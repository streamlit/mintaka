var bae=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var XXe=bae((dZe,n$)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MB={exports:{}},Jx={},NB={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=Symbol.for("react.element"),xae=Symbol.for("react.portal"),_ae=Symbol.for("react.fragment"),Rae=Symbol.for("react.strict_mode"),Tae=Symbol.for("react.profiler"),Aae=Symbol.for("react.provider"),Dae=Symbol.for("react.context"),Oae=Symbol.for("react.forward_ref"),Pae=Symbol.for("react.suspense"),Fae=Symbol.for("react.memo"),Mae=Symbol.for("react.lazy"),c$=Symbol.iterator;function Nae(t){return t===null||typeof t!="object"?null:(t=c$&&t[c$]||t["@@iterator"],typeof t=="function"?t:null)}var LB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IB=Object.assign,kB={};function am(t,e,n){this.props=t,this.context=e,this.refs=kB,this.updater=n||LB}am.prototype.isReactComponent={};am.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};am.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GB(){}GB.prototype=am.prototype;function BM(t,e,n){this.props=t,this.context=e,this.refs=kB,this.updater=n||LB}var zM=BM.prototype=new GB;zM.constructor=BM;IB(zM,am.prototype);zM.isPureReactComponent=!0;var d$=Array.isArray,$B=Object.prototype.hasOwnProperty,UM={current:null},HB={key:!0,ref:!0,__self:!0,__source:!0};function WB(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$B.call(e,i)&&!HB.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:E1,type:t,key:s,ref:o,props:r,_owner:UM.current}}function Lae(t,e){return{$$typeof:E1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jM(t){return typeof t=="object"&&t!==null&&t.$$typeof===E1}function Iae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h$=/\/+/g;function bA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Iae(""+t.key):e.toString(36)}function yS(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case E1:case xae:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+bA(o,0):i,d$(r)?(n="",t!=null&&(n=t.replace(h$,"$&/")+"/"),yS(r,e,n,"",function(u){return u})):r!=null&&(jM(r)&&(r=Lae(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(h$,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",d$(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+bA(s,a);o+=yS(s,e,n,l,r)}else if(l=Nae(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+bA(s,a++),o+=yS(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function aw(t,e,n){if(t==null)return t;var i=[],r=0;return yS(t,i,"","",function(s){return e.call(n,s,r++)}),i}function kae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ar={current:null},vS={transition:null},Gae={ReactCurrentDispatcher:ar,ReactCurrentBatchConfig:vS,ReactCurrentOwner:UM};it.Children={map:aw,forEach:function(t,e,n){aw(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return aw(t,function(){e++}),e},toArray:function(t){return aw(t,function(e){return e})||[]},only:function(t){if(!jM(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=am;it.Fragment=_ae;it.Profiler=Tae;it.PureComponent=BM;it.StrictMode=Rae;it.Suspense=Pae;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gae;it.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=IB({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=UM.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$B.call(e,l)&&!HB.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:E1,type:t.type,key:r,ref:s,props:i,_owner:o}};it.createContext=function(t){return t={$$typeof:Dae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Aae,_context:t},t.Consumer=t};it.createElement=WB;it.createFactory=function(t){var e=WB.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:Oae,render:t}};it.isValidElement=jM;it.lazy=function(t){return{$$typeof:Mae,_payload:{_status:-1,_result:t},_init:kae}};it.memo=function(t,e){return{$$typeof:Fae,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=vS.transition;vS.transition={};try{t()}finally{vS.transition=e}};it.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};it.useCallback=function(t,e){return ar.current.useCallback(t,e)};it.useContext=function(t){return ar.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return ar.current.useDeferredValue(t)};it.useEffect=function(t,e){return ar.current.useEffect(t,e)};it.useId=function(){return ar.current.useId()};it.useImperativeHandle=function(t,e,n){return ar.current.useImperativeHandle(t,e,n)};it.useInsertionEffect=function(t,e){return ar.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return ar.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return ar.current.useMemo(t,e)};it.useReducer=function(t,e,n){return ar.current.useReducer(t,e,n)};it.useRef=function(t){return ar.current.useRef(t)};it.useState=function(t){return ar.current.useState(t)};it.useSyncExternalStore=function(t,e,n){return ar.current.useSyncExternalStore(t,e,n)};it.useTransition=function(){return ar.current.useTransition()};it.version="18.2.0";NB.exports=it;var T=NB.exports;const Q=pf(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $ae=T,Hae=Symbol.for("react.element"),Wae=Symbol.for("react.fragment"),Vae=Object.prototype.hasOwnProperty,Bae=$ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zae={key:!0,ref:!0,__self:!0,__source:!0};function VB(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Vae.call(e,i)&&!zae.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Hae,type:t,key:s,ref:o,props:r,_owner:Bae.current}}Jx.Fragment=Wae;Jx.jsx=VB;Jx.jsxs=VB;MB.exports=Jx;var K=MB.exports,KO={},BB={exports:{}},_s={},zB={exports:{}},UB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,G){var W=N.length;N.push(G);e:for(;0<W;){var X=W-1>>>1,ne=N[X];if(0<r(ne,G))N[X]=G,N[W]=ne,W=X;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var G=N[0],W=N.pop();if(W!==G){N[0]=W;e:for(var X=0,ne=N.length,Se=ne>>>1;X<Se;){var xe=2*(X+1)-1,rt=N[xe],cn=xe+1,Gi=N[cn];if(0>r(rt,W))cn<ne&&0>r(Gi,rt)?(N[X]=Gi,N[cn]=W,X=cn):(N[X]=rt,N[xe]=W,X=xe);else if(cn<ne&&0>r(Gi,W))N[X]=Gi,N[cn]=W,X=cn;else break e}}return G}function r(N,G){var W=N.sortIndex-G.sortIndex;return W!==0?W:N.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(N){for(var G=n(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=N)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(u)}}function w(N){if(g=!1,C(N),!p)if(n(l)!==null)p=!0,I(E);else{var G=n(u);G!==null&&H(w,G.startTime-N)}}function E(N,G){p=!1,g&&(g=!1,y(_),_=-1),f=!0;var W=h;try{for(C(G),d=n(l);d!==null&&(!(d.expirationTime>G)||N&&!P());){var X=d.callback;if(typeof X=="function"){d.callback=null,h=d.priorityLevel;var ne=X(d.expirationTime<=G);G=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(l)&&i(l),C(G)}else i(l);d=n(l)}if(d!==null)var Se=!0;else{var xe=n(u);xe!==null&&H(w,xe.startTime-G),Se=!1}return Se}finally{d=null,h=W,f=!1}}var b=!1,S=null,_=-1,A=5,D=-1;function P(){return!(t.unstable_now()-D<A)}function L(){if(S!==null){var N=t.unstable_now();D=N;var G=!0;try{G=S(!0,N)}finally{G?O():(b=!1,S=null)}}else b=!1}var O;if(typeof v=="function")O=function(){v(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,F=M.port2;M.port1.onmessage=L,O=function(){F.postMessage(null)}}else O=function(){m(L,0)};function I(N){S=N,b||(b=!0,O())}function H(N,G){_=m(function(){N(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(E))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var W=h;h=G;try{return N()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,G){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=h;h=N;try{return G()}finally{h=W}},t.unstable_scheduleCallback=function(N,G,W){var X=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,N){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=W+ne,N={id:c++,callback:G,priorityLevel:N,startTime:W,expirationTime:ne,sortIndex:-1},W>X?(N.sortIndex=W,e(u,N),n(l)===null&&N===n(u)&&(g?(y(_),_=-1):g=!0,H(w,W-X))):(N.sortIndex=ne,e(l,N),p||f||(p=!0,I(E))),N},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(N){var G=h;return function(){var W=h;h=G;try{return N.apply(this,arguments)}finally{h=W}}}})(UB);zB.exports=UB;var Uae=zB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jB=T,vs=Uae;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YB=new Set,X0={};function gf(t,e){ng(t,e),ng(t+"Capture",e)}function ng(t,e){for(X0[t]=e,t=0;t<e.length;t++)YB.add(e[t])}var uu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),XO=Object.prototype.hasOwnProperty,jae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f$={},p$={};function Yae(t){return XO.call(p$,t)?!0:XO.call(f$,t)?!1:jae.test(t)?p$[t]=!0:(f$[t]=!0,!1)}function qae(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kae(t,e,n,i){if(e===null||typeof e>"u"||qae(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lr(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ri[t]=new lr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ri[e]=new lr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ri[t]=new lr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ri[t]=new lr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ri[t]=new lr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ri[t]=new lr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ri[t]=new lr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ri[t]=new lr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ri[t]=new lr(t,5,!1,t.toLowerCase(),null,!1,!1)});var YM=/[\-:]([a-z])/g;function qM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(YM,qM);ri[e]=new lr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(YM,qM);ri[e]=new lr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(YM,qM);ri[e]=new lr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ri[t]=new lr(t,1,!1,t.toLowerCase(),null,!1,!1)});ri.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ri[t]=new lr(t,1,!1,t.toLowerCase(),null,!0,!0)});function KM(t,e,n,i){var r=ri.hasOwnProperty(e)?ri[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kae(e,n,r,i)&&(n=null),i||r===null?Yae(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Eu=jB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lw=Symbol.for("react.element"),pp=Symbol.for("react.portal"),gp=Symbol.for("react.fragment"),XM=Symbol.for("react.strict_mode"),QO=Symbol.for("react.profiler"),qB=Symbol.for("react.provider"),KB=Symbol.for("react.context"),QM=Symbol.for("react.forward_ref"),JO=Symbol.for("react.suspense"),ZO=Symbol.for("react.suspense_list"),JM=Symbol.for("react.memo"),Uu=Symbol.for("react.lazy"),XB=Symbol.for("react.offscreen"),g$=Symbol.iterator;function ly(t){return t===null||typeof t!="object"?null:(t=g$&&t[g$]||t["@@iterator"],typeof t=="function"?t:null)}var tn=Object.assign,xA;function zy(t){if(xA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xA=e&&e[1]||""}return`
`+xA+t}var _A=!1;function RA(t,e){if(!t||_A)return"";_A=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{_A=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zy(t):""}function Xae(t){switch(t.tag){case 5:return zy(t.type);case 16:return zy("Lazy");case 13:return zy("Suspense");case 19:return zy("SuspenseList");case 0:case 2:case 15:return t=RA(t.type,!1),t;case 11:return t=RA(t.type.render,!1),t;case 1:return t=RA(t.type,!0),t;default:return""}}function e2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gp:return"Fragment";case pp:return"Portal";case QO:return"Profiler";case XM:return"StrictMode";case JO:return"Suspense";case ZO:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case KB:return(t.displayName||"Context")+".Consumer";case qB:return(t._context.displayName||"Context")+".Provider";case QM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case JM:return e=t.displayName||null,e!==null?e:e2(t.type)||"Memo";case Uu:e=t._payload,t=t._init;try{return e2(t(e))}catch{}}return null}function Qae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e2(e);case 8:return e===XM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QB(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jae(t){var e=QB(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uw(t){t._valueTracker||(t._valueTracker=Jae(t))}function JB(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=QB(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function fE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function t2(t,e){var n=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m$(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Mc(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZB(t,e){e=e.checked,e!=null&&KM(t,"checked",e,!1)}function n2(t,e){ZB(t,e);var n=Mc(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?i2(t,e.type,n):e.hasOwnProperty("defaultValue")&&i2(t,e.type,Mc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function y$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function i2(t,e,n){(e!=="number"||fE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uy=Array.isArray;function Ip(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Mc(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function r2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function v$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(Uy(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mc(n)}}function ez(t,e){var n=Mc(e.value),i=Mc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function C$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function s2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cw,nz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cw=cw||document.createElement("div"),cw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Q0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var x0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zae=["Webkit","ms","Moz","O"];Object.keys(x0).forEach(function(t){Zae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),x0[e]=x0[t]})});function iz(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||x0.hasOwnProperty(t)&&x0[t]?(""+e).trim():e+"px"}function rz(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=iz(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var ele=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o2(t,e){if(e){if(ele[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function a2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l2=null;function ZM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var u2=null,kp=null,Gp=null;function w$(t){if(t=_1(t)){if(typeof u2!="function")throw Error(se(280));var e=t.stateNode;e&&(e=i_(e),u2(t.stateNode,t.type,e))}}function sz(t){kp?Gp?Gp.push(t):Gp=[t]:kp=t}function oz(){if(kp){var t=kp,e=Gp;if(Gp=kp=null,w$(t),e)for(t=0;t<e.length;t++)w$(e[t])}}function az(t,e){return t(e)}function lz(){}var TA=!1;function uz(t,e,n){if(TA)return t(e,n);TA=!0;try{return az(t,e,n)}finally{TA=!1,(kp!==null||Gp!==null)&&(lz(),oz())}}function J0(t,e){var n=t.stateNode;if(n===null)return null;var i=i_(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var c2=!1;if(uu)try{var uy={};Object.defineProperty(uy,"passive",{get:function(){c2=!0}}),window.addEventListener("test",uy,uy),window.removeEventListener("test",uy,uy)}catch{c2=!1}function tle(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var _0=!1,pE=null,gE=!1,d2=null,nle={onError:function(t){_0=!0,pE=t}};function ile(t,e,n,i,r,s,o,a,l){_0=!1,pE=null,tle.apply(nle,arguments)}function rle(t,e,n,i,r,s,o,a,l){if(ile.apply(this,arguments),_0){if(_0){var u=pE;_0=!1,pE=null}else throw Error(se(198));gE||(gE=!0,d2=u)}}function mf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S$(t){if(mf(t)!==t)throw Error(se(188))}function sle(t){var e=t.alternate;if(!e){if(e=mf(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return S$(r),t;if(s===i)return S$(r),e;s=s.sibling}throw Error(se(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==i)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function dz(t){return t=sle(t),t!==null?hz(t):null}function hz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hz(t);if(e!==null)return e;t=t.sibling}return null}var fz=vs.unstable_scheduleCallback,E$=vs.unstable_cancelCallback,ole=vs.unstable_shouldYield,ale=vs.unstable_requestPaint,fn=vs.unstable_now,lle=vs.unstable_getCurrentPriorityLevel,eN=vs.unstable_ImmediatePriority,pz=vs.unstable_UserBlockingPriority,mE=vs.unstable_NormalPriority,ule=vs.unstable_LowPriority,gz=vs.unstable_IdlePriority,Zx=null,Wa=null;function cle(t){if(Wa&&typeof Wa.onCommitFiberRoot=="function")try{Wa.onCommitFiberRoot(Zx,t,void 0,(t.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:fle,dle=Math.log,hle=Math.LN2;function fle(t){return t>>>=0,t===0?32:31-(dle(t)/hle|0)|0}var dw=64,hw=4194304;function jy(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yE(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=jy(a):(s&=o,s!==0&&(i=jy(s)))}else o=n&~r,o!==0?i=jy(o):s!==0&&(i=jy(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Vo(e),r=1<<n,i|=t[n],e&=~r;return i}function ple(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gle(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vo(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=ple(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function h2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mz(){var t=dw;return dw<<=1,!(dw&4194240)&&(dw=64),t}function AA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function b1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vo(e),t[e]=n}function mle(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Vo(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function tN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Vo(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Rt=0;function yz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vz,nN,Cz,wz,Sz,f2=!1,fw=[],vc=null,Cc=null,wc=null,Z0=new Map,ev=new Map,Zu=[],yle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b$(t,e){switch(t){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":wc=null;break;case"pointerover":case"pointerout":Z0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ev.delete(e.pointerId)}}function cy(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=_1(e),e!==null&&nN(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function vle(t,e,n,i,r){switch(e){case"focusin":return vc=cy(vc,t,e,n,i,r),!0;case"dragenter":return Cc=cy(Cc,t,e,n,i,r),!0;case"mouseover":return wc=cy(wc,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Z0.set(s,cy(Z0.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ev.set(s,cy(ev.get(s)||null,t,e,n,i,r)),!0}return!1}function Ez(t){var e=rh(t.target);if(e!==null){var n=mf(e);if(n!==null){if(e=n.tag,e===13){if(e=cz(n),e!==null){t.blockedOn=e,Sz(t.priority,function(){Cz(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function CS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=p2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);l2=i,n.target.dispatchEvent(i),l2=null}else return e=_1(n),e!==null&&nN(e),t.blockedOn=n,!1;e.shift()}return!0}function x$(t,e,n){CS(t)&&n.delete(e)}function Cle(){f2=!1,vc!==null&&CS(vc)&&(vc=null),Cc!==null&&CS(Cc)&&(Cc=null),wc!==null&&CS(wc)&&(wc=null),Z0.forEach(x$),ev.forEach(x$)}function dy(t,e){t.blockedOn===e&&(t.blockedOn=null,f2||(f2=!0,vs.unstable_scheduleCallback(vs.unstable_NormalPriority,Cle)))}function tv(t){function e(r){return dy(r,t)}if(0<fw.length){dy(fw[0],t);for(var n=1;n<fw.length;n++){var i=fw[n];i.blockedOn===t&&(i.blockedOn=null)}}for(vc!==null&&dy(vc,t),Cc!==null&&dy(Cc,t),wc!==null&&dy(wc,t),Z0.forEach(e),ev.forEach(e),n=0;n<Zu.length;n++)i=Zu[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Zu.length&&(n=Zu[0],n.blockedOn===null);)Ez(n),n.blockedOn===null&&Zu.shift()}var $p=Eu.ReactCurrentBatchConfig,vE=!0;function wle(t,e,n,i){var r=Rt,s=$p.transition;$p.transition=null;try{Rt=1,iN(t,e,n,i)}finally{Rt=r,$p.transition=s}}function Sle(t,e,n,i){var r=Rt,s=$p.transition;$p.transition=null;try{Rt=4,iN(t,e,n,i)}finally{Rt=r,$p.transition=s}}function iN(t,e,n,i){if(vE){var r=p2(t,e,n,i);if(r===null)GA(t,e,i,CE,n),b$(t,i);else if(vle(r,t,e,n,i))i.stopPropagation();else if(b$(t,i),e&4&&-1<yle.indexOf(t)){for(;r!==null;){var s=_1(r);if(s!==null&&vz(s),s=p2(t,e,n,i),s===null&&GA(t,e,i,CE,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else GA(t,e,i,null,n)}}var CE=null;function p2(t,e,n,i){if(CE=null,t=ZM(i),t=rh(t),t!==null)if(e=mf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cz(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return CE=t,null}function bz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lle()){case eN:return 1;case pz:return 4;case mE:case ule:return 16;case gz:return 536870912;default:return 16}default:return 16}}var ic=null,rN=null,wS=null;function xz(){if(wS)return wS;var t,e=rN,n=e.length,i,r="value"in ic?ic.value:ic.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return wS=r.slice(t,1<i?1-i:void 0)}function SS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pw(){return!0}function _$(){return!1}function Rs(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pw:_$,this.isPropagationStopped=_$,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pw)},persist:function(){},isPersistent:pw}),e}var lm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sN=Rs(lm),x1=tn({},lm,{view:0,detail:0}),Ele=Rs(x1),DA,OA,hy,e_=tn({},x1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hy&&(hy&&t.type==="mousemove"?(DA=t.screenX-hy.screenX,OA=t.screenY-hy.screenY):OA=DA=0,hy=t),DA)},movementY:function(t){return"movementY"in t?t.movementY:OA}}),R$=Rs(e_),ble=tn({},e_,{dataTransfer:0}),xle=Rs(ble),_le=tn({},x1,{relatedTarget:0}),PA=Rs(_le),Rle=tn({},lm,{animationName:0,elapsedTime:0,pseudoElement:0}),Tle=Rs(Rle),Ale=tn({},lm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dle=Rs(Ale),Ole=tn({},lm,{data:0}),T$=Rs(Ole),Ple={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mle[t])?!!e[t]:!1}function oN(){return Nle}var Lle=tn({},x1,{key:function(t){if(t.key){var e=Ple[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=SS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oN,charCode:function(t){return t.type==="keypress"?SS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?SS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ile=Rs(Lle),kle=tn({},e_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A$=Rs(kle),Gle=tn({},x1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oN}),$le=Rs(Gle),Hle=tn({},lm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wle=Rs(Hle),Vle=tn({},e_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ble=Rs(Vle),zle=[9,13,27,32],aN=uu&&"CompositionEvent"in window,R0=null;uu&&"documentMode"in document&&(R0=document.documentMode);var Ule=uu&&"TextEvent"in window&&!R0,_z=uu&&(!aN||R0&&8<R0&&11>=R0),D$=String.fromCharCode(32),O$=!1;function Rz(t,e){switch(t){case"keyup":return zle.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mp=!1;function jle(t,e){switch(t){case"compositionend":return Tz(e);case"keypress":return e.which!==32?null:(O$=!0,D$);case"textInput":return t=e.data,t===D$&&O$?null:t;default:return null}}function Yle(t,e){if(mp)return t==="compositionend"||!aN&&Rz(t,e)?(t=xz(),wS=rN=ic=null,mp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _z&&e.locale!=="ko"?null:e.data;default:return null}}var qle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qle[t.type]:e==="textarea"}function Az(t,e,n,i){sz(i),e=wE(e,"onChange"),0<e.length&&(n=new sN("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var T0=null,nv=null;function Kle(t){$z(t,0)}function t_(t){var e=Cp(t);if(JB(e))return t}function Xle(t,e){if(t==="change")return e}var Dz=!1;if(uu){var FA;if(uu){var MA="oninput"in document;if(!MA){var F$=document.createElement("div");F$.setAttribute("oninput","return;"),MA=typeof F$.oninput=="function"}FA=MA}else FA=!1;Dz=FA&&(!document.documentMode||9<document.documentMode)}function M$(){T0&&(T0.detachEvent("onpropertychange",Oz),nv=T0=null)}function Oz(t){if(t.propertyName==="value"&&t_(nv)){var e=[];Az(e,nv,t,ZM(t)),uz(Kle,e)}}function Qle(t,e,n){t==="focusin"?(M$(),T0=e,nv=n,T0.attachEvent("onpropertychange",Oz)):t==="focusout"&&M$()}function Jle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return t_(nv)}function Zle(t,e){if(t==="click")return t_(e)}function eue(t,e){if(t==="input"||t==="change")return t_(e)}function tue(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qo=typeof Object.is=="function"?Object.is:tue;function iv(t,e){if(Qo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!XO.call(e,r)||!Qo(t[r],e[r]))return!1}return!0}function N$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function L$(t,e){var n=N$(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N$(n)}}function Pz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fz(){for(var t=window,e=fE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fE(t.document)}return e}function lN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nue(t){var e=Fz(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pz(n.ownerDocument.documentElement,n)){if(i!==null&&lN(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=L$(n,s);var o=L$(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iue=uu&&"documentMode"in document&&11>=document.documentMode,yp=null,g2=null,A0=null,m2=!1;function I$(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;m2||yp==null||yp!==fE(i)||(i=yp,"selectionStart"in i&&lN(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),A0&&iv(A0,i)||(A0=i,i=wE(g2,"onSelect"),0<i.length&&(e=new sN("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=yp)))}function gw(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vp={animationend:gw("Animation","AnimationEnd"),animationiteration:gw("Animation","AnimationIteration"),animationstart:gw("Animation","AnimationStart"),transitionend:gw("Transition","TransitionEnd")},NA={},Mz={};uu&&(Mz=document.createElement("div").style,"AnimationEvent"in window||(delete vp.animationend.animation,delete vp.animationiteration.animation,delete vp.animationstart.animation),"TransitionEvent"in window||delete vp.transitionend.transition);function n_(t){if(NA[t])return NA[t];if(!vp[t])return t;var e=vp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mz)return NA[t]=e[n];return t}var Nz=n_("animationend"),Lz=n_("animationiteration"),Iz=n_("animationstart"),kz=n_("transitionend"),Gz=new Map,k$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function id(t,e){Gz.set(t,e),gf(e,[t])}for(var LA=0;LA<k$.length;LA++){var IA=k$[LA],rue=IA.toLowerCase(),sue=IA[0].toUpperCase()+IA.slice(1);id(rue,"on"+sue)}id(Nz,"onAnimationEnd");id(Lz,"onAnimationIteration");id(Iz,"onAnimationStart");id("dblclick","onDoubleClick");id("focusin","onFocus");id("focusout","onBlur");id(kz,"onTransitionEnd");ng("onMouseEnter",["mouseout","mouseover"]);ng("onMouseLeave",["mouseout","mouseover"]);ng("onPointerEnter",["pointerout","pointerover"]);ng("onPointerLeave",["pointerout","pointerover"]);gf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gf("onBeforeInput",["compositionend","keypress","textInput","paste"]);gf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oue=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yy));function G$(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,rle(i,e,void 0,t),t.currentTarget=null}function $z(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;G$(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;G$(r,a,u),s=l}}}if(gE)throw t=d2,gE=!1,d2=null,t}function $t(t,e){var n=e[S2];n===void 0&&(n=e[S2]=new Set);var i=t+"__bubble";n.has(i)||(Hz(e,t,2,!1),n.add(i))}function kA(t,e,n){var i=0;e&&(i|=4),Hz(n,t,i,e)}var mw="_reactListening"+Math.random().toString(36).slice(2);function rv(t){if(!t[mw]){t[mw]=!0,YB.forEach(function(n){n!=="selectionchange"&&(oue.has(n)||kA(n,!1,t),kA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mw]||(e[mw]=!0,kA("selectionchange",!1,e))}}function Hz(t,e,n,i){switch(bz(e)){case 1:var r=wle;break;case 4:r=Sle;break;default:r=iN}n=r.bind(null,e,n,t),r=void 0,!c2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function GA(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=rh(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}uz(function(){var u=s,c=ZM(n),d=[];e:{var h=Gz.get(t);if(h!==void 0){var f=sN,p=t;switch(t){case"keypress":if(SS(n)===0)break e;case"keydown":case"keyup":f=Ile;break;case"focusin":p="focus",f=PA;break;case"focusout":p="blur",f=PA;break;case"beforeblur":case"afterblur":f=PA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=R$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=xle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=$le;break;case Nz:case Lz:case Iz:f=Tle;break;case kz:f=Wle;break;case"scroll":f=Ele;break;case"wheel":f=Ble;break;case"copy":case"cut":case"paste":f=Dle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=A$}var g=(e&4)!==0,m=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,C;v!==null;){C=v;var w=C.stateNode;if(C.tag===5&&w!==null&&(C=w,y!==null&&(w=J0(v,y),w!=null&&g.push(sv(v,w,C)))),m)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==l2&&(p=n.relatedTarget||n.fromElement)&&(rh(p)||p[cu]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?rh(p):null,p!==null&&(m=mf(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=R$,w="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=A$,w="onPointerLeave",y="onPointerEnter",v="pointer"),m=f==null?h:Cp(f),C=p==null?h:Cp(p),h=new g(w,v+"leave",f,n,c),h.target=m,h.relatedTarget=C,w=null,rh(c)===u&&(g=new g(y,v+"enter",p,n,c),g.target=C,g.relatedTarget=m,w=g),m=w,f&&p)t:{for(g=f,y=p,v=0,C=g;C;C=Xf(C))v++;for(C=0,w=y;w;w=Xf(w))C++;for(;0<v-C;)g=Xf(g),v--;for(;0<C-v;)y=Xf(y),C--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Xf(g),y=Xf(y)}g=null}else g=null;f!==null&&$$(d,h,f,g,!1),p!==null&&m!==null&&$$(d,m,p,g,!0)}}e:{if(h=u?Cp(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=Xle;else if(P$(h))if(Dz)E=eue;else{E=Jle;var b=Qle}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=Zle);if(E&&(E=E(t,u))){Az(d,E,n,c);break e}b&&b(t,h,u),t==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&i2(h,"number",h.value)}switch(b=u?Cp(u):window,t){case"focusin":(P$(b)||b.contentEditable==="true")&&(yp=b,g2=u,A0=null);break;case"focusout":A0=g2=yp=null;break;case"mousedown":m2=!0;break;case"contextmenu":case"mouseup":case"dragend":m2=!1,I$(d,n,c);break;case"selectionchange":if(iue)break;case"keydown":case"keyup":I$(d,n,c)}var S;if(aN)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else mp?Rz(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(_z&&n.locale!=="ko"&&(mp||_!=="onCompositionStart"?_==="onCompositionEnd"&&mp&&(S=xz()):(ic=c,rN="value"in ic?ic.value:ic.textContent,mp=!0)),b=wE(u,_),0<b.length&&(_=new T$(_,t,null,n,c),d.push({event:_,listeners:b}),S?_.data=S:(S=Tz(n),S!==null&&(_.data=S)))),(S=Ule?jle(t,n):Yle(t,n))&&(u=wE(u,"onBeforeInput"),0<u.length&&(c=new T$("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=S))}$z(d,e)})}function sv(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wE(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=J0(t,n),s!=null&&i.unshift(sv(t,s,r)),s=J0(t,e),s!=null&&i.push(sv(t,s,r))),t=t.return}return i}function Xf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $$(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=J0(n,s),l!=null&&o.unshift(sv(n,l,a))):r||(l=J0(n,s),l!=null&&o.push(sv(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aue=/\r\n?/g,lue=/\u0000|\uFFFD/g;function H$(t){return(typeof t=="string"?t:""+t).replace(aue,`
`).replace(lue,"")}function yw(t,e,n){if(e=H$(e),H$(t)!==e&&n)throw Error(se(425))}function SE(){}var y2=null,v2=null;function C2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var w2=typeof setTimeout=="function"?setTimeout:void 0,uue=typeof clearTimeout=="function"?clearTimeout:void 0,W$=typeof Promise=="function"?Promise:void 0,cue=typeof queueMicrotask=="function"?queueMicrotask:typeof W$<"u"?function(t){return W$.resolve(null).then(t).catch(due)}:w2;function due(t){setTimeout(function(){throw t})}function $A(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),tv(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);tv(e)}function Sc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var um=Math.random().toString(36).slice(2),La="__reactFiber$"+um,ov="__reactProps$"+um,cu="__reactContainer$"+um,S2="__reactEvents$"+um,hue="__reactListeners$"+um,fue="__reactHandles$"+um;function rh(t){var e=t[La];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cu]||n[La]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=V$(t);t!==null;){if(n=t[La])return n;t=V$(t)}return e}t=n,n=t.parentNode}return null}function _1(t){return t=t[La]||t[cu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function i_(t){return t[ov]||null}var E2=[],wp=-1;function rd(t){return{current:t}}function Ut(t){0>wp||(t.current=E2[wp],E2[wp]=null,wp--)}function kt(t,e){wp++,E2[wp]=t.current,t.current=e}var Nc={},Fi=rd(Nc),Or=rd(!1),Fh=Nc;function ig(t,e){var n=t.type.contextTypes;if(!n)return Nc;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Pr(t){return t=t.childContextTypes,t!=null}function EE(){Ut(Or),Ut(Fi)}function B$(t,e,n){if(Fi.current!==Nc)throw Error(se(168));kt(Fi,e),kt(Or,n)}function Wz(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(se(108,Qae(t)||"Unknown",r));return tn({},n,i)}function bE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nc,Fh=Fi.current,kt(Fi,t),kt(Or,Or.current),!0}function z$(t,e,n){var i=t.stateNode;if(!i)throw Error(se(169));n?(t=Wz(t,e,Fh),i.__reactInternalMemoizedMergedChildContext=t,Ut(Or),Ut(Fi),kt(Fi,t)):Ut(Or),kt(Or,n)}var Il=null,r_=!1,HA=!1;function Vz(t){Il===null?Il=[t]:Il.push(t)}function pue(t){r_=!0,Vz(t)}function sd(){if(!HA&&Il!==null){HA=!0;var t=0,e=Rt;try{var n=Il;for(Rt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Il=null,r_=!1}catch(r){throw Il!==null&&(Il=Il.slice(t+1)),fz(eN,sd),r}finally{Rt=e,HA=!1}}return null}var Sp=[],Ep=0,xE=null,_E=0,Gs=[],$s=0,Mh=null,Vl=1,Bl="";function Bd(t,e){Sp[Ep++]=_E,Sp[Ep++]=xE,xE=t,_E=e}function Bz(t,e,n){Gs[$s++]=Vl,Gs[$s++]=Bl,Gs[$s++]=Mh,Mh=t;var i=Vl;t=Bl;var r=32-Vo(i)-1;i&=~(1<<r),n+=1;var s=32-Vo(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Vl=1<<32-Vo(e)+r|n<<r|i,Bl=s+t}else Vl=1<<s|n<<r|i,Bl=t}function uN(t){t.return!==null&&(Bd(t,1),Bz(t,1,0))}function cN(t){for(;t===xE;)xE=Sp[--Ep],Sp[Ep]=null,_E=Sp[--Ep],Sp[Ep]=null;for(;t===Mh;)Mh=Gs[--$s],Gs[$s]=null,Bl=Gs[--$s],Gs[$s]=null,Vl=Gs[--$s],Gs[$s]=null}var ms=null,cs=null,Yt=!1,Ao=null;function zz(t,e){var n=Ws(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function U$(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ms=t,cs=Sc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ms=t,cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mh!==null?{id:Vl,overflow:Bl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ws(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ms=t,cs=null,!0):!1;default:return!1}}function b2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function x2(t){if(Yt){var e=cs;if(e){var n=e;if(!U$(t,e)){if(b2(t))throw Error(se(418));e=Sc(n.nextSibling);var i=ms;e&&U$(t,e)?zz(i,n):(t.flags=t.flags&-4097|2,Yt=!1,ms=t)}}else{if(b2(t))throw Error(se(418));t.flags=t.flags&-4097|2,Yt=!1,ms=t}}}function j$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ms=t}function vw(t){if(t!==ms)return!1;if(!Yt)return j$(t),Yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!C2(t.type,t.memoizedProps)),e&&(e=cs)){if(b2(t))throw Uz(),Error(se(418));for(;e;)zz(t,e),e=Sc(e.nextSibling)}if(j$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cs=Sc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cs=null}}else cs=ms?Sc(t.stateNode.nextSibling):null;return!0}function Uz(){for(var t=cs;t;)t=Sc(t.nextSibling)}function rg(){cs=ms=null,Yt=!1}function dN(t){Ao===null?Ao=[t]:Ao.push(t)}var gue=Eu.ReactCurrentBatchConfig;function xo(t,e){if(t&&t.defaultProps){e=tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var RE=rd(null),TE=null,bp=null,hN=null;function fN(){hN=bp=TE=null}function pN(t){var e=RE.current;Ut(RE),t._currentValue=e}function _2(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Hp(t,e){TE=t,hN=bp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tr=!0),t.firstContext=null)}function Zs(t){var e=t._currentValue;if(hN!==t)if(t={context:t,memoizedValue:e,next:null},bp===null){if(TE===null)throw Error(se(308));bp=t,TE.dependencies={lanes:0,firstContext:t}}else bp=bp.next=t;return e}var sh=null;function gN(t){sh===null?sh=[t]:sh.push(t)}function jz(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,gN(e)):(n.next=r.next,r.next=n),e.interleaved=n,du(t,i)}function du(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ju=!1;function mN(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ql(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ec(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ht&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,du(t,n)}return r=i.interleaved,r===null?(e.next=e,gN(i)):(e.next=r.next,r.next=e),i.interleaved=e,du(t,n)}function ES(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tN(t,n)}}function Y$(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function AE(t,e,n,i){var r=t.updateQueue;ju=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=tn({},d,h);break e;case 2:ju=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Lh|=o,t.lanes=o,t.memoizedState=d}}function q$(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(se(191,r));r.call(i)}}}var qz=new jB.Component().refs;function R2(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var s_={isMounted:function(t){return(t=t._reactInternals)?mf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Zi(),r=xc(t),s=Ql(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ec(t,s,r),e!==null&&(Bo(e,t,r,i),ES(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Zi(),r=xc(t),s=Ql(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ec(t,s,r),e!==null&&(Bo(e,t,r,i),ES(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zi(),i=xc(t),r=Ql(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ec(t,r,i),e!==null&&(Bo(e,t,i,n),ES(e,t,i))}};function K$(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!iv(n,i)||!iv(r,s):!0}function Kz(t,e,n){var i=!1,r=Nc,s=e.contextType;return typeof s=="object"&&s!==null?s=Zs(s):(r=Pr(e)?Fh:Fi.current,i=e.contextTypes,s=(i=i!=null)?ig(t,r):Nc),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=s_,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function X$(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&s_.enqueueReplaceState(e,e.state,null)}function T2(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=qz,mN(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Zs(s):(s=Pr(e)?Fh:Fi.current,r.context=ig(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(R2(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&s_.enqueueReplaceState(r,r.state,null),AE(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function fy(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var i=n.stateNode}if(!i)throw Error(se(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===qz&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Cw(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q$(t){var e=t._init;return e(t._payload)}function Xz(t){function e(y,v){if(t){var C=y.deletions;C===null?(y.deletions=[v],y.flags|=16):C.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function i(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function r(y,v){return y=_c(y,v),y.index=0,y.sibling=null,y}function s(y,v,C){return y.index=C,t?(C=y.alternate,C!==null?(C=C.index,C<v?(y.flags|=2,v):C):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,C,w){return v===null||v.tag!==6?(v=YA(C,y.mode,w),v.return=y,v):(v=r(v,C),v.return=y,v)}function l(y,v,C,w){var E=C.type;return E===gp?c(y,v,C.props.children,w,C.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Uu&&Q$(E)===v.type)?(w=r(v,C.props),w.ref=fy(y,v,C),w.return=y,w):(w=AS(C.type,C.key,C.props,null,y.mode,w),w.ref=fy(y,v,C),w.return=y,w)}function u(y,v,C,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=qA(C,y.mode,w),v.return=y,v):(v=r(v,C.children||[]),v.return=y,v)}function c(y,v,C,w,E){return v===null||v.tag!==7?(v=mh(C,y.mode,w,E),v.return=y,v):(v=r(v,C),v.return=y,v)}function d(y,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=YA(""+v,y.mode,C),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case lw:return C=AS(v.type,v.key,v.props,null,y.mode,C),C.ref=fy(y,null,v),C.return=y,C;case pp:return v=qA(v,y.mode,C),v.return=y,v;case Uu:var w=v._init;return d(y,w(v._payload),C)}if(Uy(v)||ly(v))return v=mh(v,y.mode,C,null),v.return=y,v;Cw(y,v)}return null}function h(y,v,C,w){var E=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return E!==null?null:a(y,v,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case lw:return C.key===E?l(y,v,C,w):null;case pp:return C.key===E?u(y,v,C,w):null;case Uu:return E=C._init,h(y,v,E(C._payload),w)}if(Uy(C)||ly(C))return E!==null?null:c(y,v,C,w,null);Cw(y,C)}return null}function f(y,v,C,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(C)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lw:return y=y.get(w.key===null?C:w.key)||null,l(v,y,w,E);case pp:return y=y.get(w.key===null?C:w.key)||null,u(v,y,w,E);case Uu:var b=w._init;return f(y,v,C,b(w._payload),E)}if(Uy(w)||ly(w))return y=y.get(C)||null,c(v,y,w,E,null);Cw(v,w)}return null}function p(y,v,C,w){for(var E=null,b=null,S=v,_=v=0,A=null;S!==null&&_<C.length;_++){S.index>_?(A=S,S=null):A=S.sibling;var D=h(y,S,C[_],w);if(D===null){S===null&&(S=A);break}t&&S&&D.alternate===null&&e(y,S),v=s(D,v,_),b===null?E=D:b.sibling=D,b=D,S=A}if(_===C.length)return n(y,S),Yt&&Bd(y,_),E;if(S===null){for(;_<C.length;_++)S=d(y,C[_],w),S!==null&&(v=s(S,v,_),b===null?E=S:b.sibling=S,b=S);return Yt&&Bd(y,_),E}for(S=i(y,S);_<C.length;_++)A=f(S,y,_,C[_],w),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?_:A.key),v=s(A,v,_),b===null?E=A:b.sibling=A,b=A);return t&&S.forEach(function(P){return e(y,P)}),Yt&&Bd(y,_),E}function g(y,v,C,w){var E=ly(C);if(typeof E!="function")throw Error(se(150));if(C=E.call(C),C==null)throw Error(se(151));for(var b=E=null,S=v,_=v=0,A=null,D=C.next();S!==null&&!D.done;_++,D=C.next()){S.index>_?(A=S,S=null):A=S.sibling;var P=h(y,S,D.value,w);if(P===null){S===null&&(S=A);break}t&&S&&P.alternate===null&&e(y,S),v=s(P,v,_),b===null?E=P:b.sibling=P,b=P,S=A}if(D.done)return n(y,S),Yt&&Bd(y,_),E;if(S===null){for(;!D.done;_++,D=C.next())D=d(y,D.value,w),D!==null&&(v=s(D,v,_),b===null?E=D:b.sibling=D,b=D);return Yt&&Bd(y,_),E}for(S=i(y,S);!D.done;_++,D=C.next())D=f(S,y,_,D.value,w),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?_:D.key),v=s(D,v,_),b===null?E=D:b.sibling=D,b=D);return t&&S.forEach(function(L){return e(y,L)}),Yt&&Bd(y,_),E}function m(y,v,C,w){if(typeof C=="object"&&C!==null&&C.type===gp&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case lw:e:{for(var E=C.key,b=v;b!==null;){if(b.key===E){if(E=C.type,E===gp){if(b.tag===7){n(y,b.sibling),v=r(b,C.props.children),v.return=y,y=v;break e}}else if(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Uu&&Q$(E)===b.type){n(y,b.sibling),v=r(b,C.props),v.ref=fy(y,b,C),v.return=y,y=v;break e}n(y,b);break}else e(y,b);b=b.sibling}C.type===gp?(v=mh(C.props.children,y.mode,w,C.key),v.return=y,y=v):(w=AS(C.type,C.key,C.props,null,y.mode,w),w.ref=fy(y,v,C),w.return=y,y=w)}return o(y);case pp:e:{for(b=C.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){n(y,v.sibling),v=r(v,C.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=qA(C,y.mode,w),v.return=y,y=v}return o(y);case Uu:return b=C._init,m(y,v,b(C._payload),w)}if(Uy(C))return p(y,v,C,w);if(ly(C))return g(y,v,C,w);Cw(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(n(y,v.sibling),v=r(v,C),v.return=y,y=v):(n(y,v),v=YA(C,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return m}var sg=Xz(!0),Qz=Xz(!1),R1={},Va=rd(R1),av=rd(R1),lv=rd(R1);function oh(t){if(t===R1)throw Error(se(174));return t}function yN(t,e){switch(kt(lv,e),kt(av,t),kt(Va,R1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:s2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=s2(e,t)}Ut(Va),kt(Va,e)}function og(){Ut(Va),Ut(av),Ut(lv)}function Jz(t){oh(lv.current);var e=oh(Va.current),n=s2(e,t.type);e!==n&&(kt(av,t),kt(Va,n))}function vN(t){av.current===t&&(Ut(Va),Ut(av))}var Zt=rd(0);function DE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var WA=[];function CN(){for(var t=0;t<WA.length;t++)WA[t]._workInProgressVersionPrimary=null;WA.length=0}var bS=Eu.ReactCurrentDispatcher,VA=Eu.ReactCurrentBatchConfig,Nh=0,en=null,wn=null,Mn=null,OE=!1,D0=!1,uv=0,mue=0;function di(){throw Error(se(321))}function wN(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qo(t[n],e[n]))return!1;return!0}function SN(t,e,n,i,r,s){if(Nh=s,en=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bS.current=t===null||t.memoizedState===null?wue:Sue,t=n(i,r),D0){s=0;do{if(D0=!1,uv=0,25<=s)throw Error(se(301));s+=1,Mn=wn=null,e.updateQueue=null,bS.current=Eue,t=n(i,r)}while(D0)}if(bS.current=PE,e=wn!==null&&wn.next!==null,Nh=0,Mn=wn=en=null,OE=!1,e)throw Error(se(300));return t}function EN(){var t=uv!==0;return uv=0,t}function Ra(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?en.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function eo(){if(wn===null){var t=en.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=Mn===null?en.memoizedState:Mn.next;if(e!==null)Mn=e,wn=t;else{if(t===null)throw Error(se(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Mn===null?en.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function cv(t,e){return typeof e=="function"?e(t):e}function BA(t){var e=eo(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=wn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Nh&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,en.lanes|=c,Lh|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Qo(i,e.memoizedState)||(Tr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,en.lanes|=s,Lh|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zA(t){var e=eo(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Qo(s,e.memoizedState)||(Tr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Zz(){}function eU(t,e){var n=en,i=eo(),r=e(),s=!Qo(i.memoizedState,r);if(s&&(i.memoizedState=r,Tr=!0),i=i.queue,bN(iU.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,dv(9,nU.bind(null,n,i,r,e),void 0,null),Vn===null)throw Error(se(349));Nh&30||tU(n,e,r)}return r}function tU(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nU(t,e,n,i){e.value=n,e.getSnapshot=i,rU(e)&&sU(t)}function iU(t,e,n){return n(function(){rU(e)&&sU(t)})}function rU(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qo(t,n)}catch{return!0}}function sU(t){var e=du(t,1);e!==null&&Bo(e,t,1,-1)}function J$(t){var e=Ra();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cv,lastRenderedState:t},e.queue=t,t=t.dispatch=Cue.bind(null,en,t),[e.memoizedState,t]}function dv(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function oU(){return eo().memoizedState}function xS(t,e,n,i){var r=Ra();en.flags|=t,r.memoizedState=dv(1|e,n,void 0,i===void 0?null:i)}function o_(t,e,n,i){var r=eo();i=i===void 0?null:i;var s=void 0;if(wn!==null){var o=wn.memoizedState;if(s=o.destroy,i!==null&&wN(i,o.deps)){r.memoizedState=dv(e,n,s,i);return}}en.flags|=t,r.memoizedState=dv(1|e,n,s,i)}function Z$(t,e){return xS(8390656,8,t,e)}function bN(t,e){return o_(2048,8,t,e)}function aU(t,e){return o_(4,2,t,e)}function lU(t,e){return o_(4,4,t,e)}function uU(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cU(t,e,n){return n=n!=null?n.concat([t]):null,o_(4,4,uU.bind(null,e,t),n)}function xN(){}function dU(t,e){var n=eo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wN(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function hU(t,e){var n=eo();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&wN(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function fU(t,e,n){return Nh&21?(Qo(n,e)||(n=mz(),en.lanes|=n,Lh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tr=!0),t.memoizedState=n)}function yue(t,e){var n=Rt;Rt=n!==0&&4>n?n:4,t(!0);var i=VA.transition;VA.transition={};try{t(!1),e()}finally{Rt=n,VA.transition=i}}function pU(){return eo().memoizedState}function vue(t,e,n){var i=xc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gU(t))mU(e,n);else if(n=jz(t,e,n,i),n!==null){var r=Zi();Bo(n,t,i,r),yU(n,e,i)}}function Cue(t,e,n){var i=xc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gU(t))mU(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Qo(a,o)){var l=e.interleaved;l===null?(r.next=r,gN(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=jz(t,e,r,i),n!==null&&(r=Zi(),Bo(n,t,i,r),yU(n,e,i))}}function gU(t){var e=t.alternate;return t===en||e!==null&&e===en}function mU(t,e){D0=OE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yU(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tN(t,n)}}var PE={readContext:Zs,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},wue={readContext:Zs,useCallback:function(t,e){return Ra().memoizedState=[t,e===void 0?null:e],t},useContext:Zs,useEffect:Z$,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xS(4194308,4,uU.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xS(4194308,4,t,e)},useInsertionEffect:function(t,e){return xS(4,2,t,e)},useMemo:function(t,e){var n=Ra();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ra();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=vue.bind(null,en,t),[i.memoizedState,t]},useRef:function(t){var e=Ra();return t={current:t},e.memoizedState=t},useState:J$,useDebugValue:xN,useDeferredValue:function(t){return Ra().memoizedState=t},useTransition:function(){var t=J$(!1),e=t[0];return t=yue.bind(null,t[1]),Ra().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=en,r=Ra();if(Yt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),Vn===null)throw Error(se(349));Nh&30||tU(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Z$(iU.bind(null,i,s,t),[t]),i.flags|=2048,dv(9,nU.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ra(),e=Vn.identifierPrefix;if(Yt){var n=Bl,i=Vl;n=(i&~(1<<32-Vo(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=uv++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mue++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sue={readContext:Zs,useCallback:dU,useContext:Zs,useEffect:bN,useImperativeHandle:cU,useInsertionEffect:aU,useLayoutEffect:lU,useMemo:hU,useReducer:BA,useRef:oU,useState:function(){return BA(cv)},useDebugValue:xN,useDeferredValue:function(t){var e=eo();return fU(e,wn.memoizedState,t)},useTransition:function(){var t=BA(cv)[0],e=eo().memoizedState;return[t,e]},useMutableSource:Zz,useSyncExternalStore:eU,useId:pU,unstable_isNewReconciler:!1},Eue={readContext:Zs,useCallback:dU,useContext:Zs,useEffect:bN,useImperativeHandle:cU,useInsertionEffect:aU,useLayoutEffect:lU,useMemo:hU,useReducer:zA,useRef:oU,useState:function(){return zA(cv)},useDebugValue:xN,useDeferredValue:function(t){var e=eo();return wn===null?e.memoizedState=t:fU(e,wn.memoizedState,t)},useTransition:function(){var t=zA(cv)[0],e=eo().memoizedState;return[t,e]},useMutableSource:Zz,useSyncExternalStore:eU,useId:pU,unstable_isNewReconciler:!1};function ag(t,e){try{var n="",i=e;do n+=Xae(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function UA(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function A2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bue=typeof WeakMap=="function"?WeakMap:Map;function vU(t,e,n){n=Ql(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ME||(ME=!0,G2=i),A2(t,e)},n}function CU(t,e,n){n=Ql(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){A2(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){A2(t,e),typeof i!="function"&&(bc===null?bc=new Set([this]):bc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function e4(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bue;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=kue.bind(null,t,e,n),e.then(t,t))}function t4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function n4(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ql(-1,1),e.tag=2,Ec(n,e,1))),n.lanes|=1),t)}var xue=Eu.ReactCurrentOwner,Tr=!1;function Bi(t,e,n,i){e.child=t===null?Qz(e,null,n,i):sg(e,t.child,n,i)}function i4(t,e,n,i,r){n=n.render;var s=e.ref;return Hp(e,r),i=SN(t,e,n,i,s,r),n=EN(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,hu(t,e,r)):(Yt&&n&&uN(e),e.flags|=1,Bi(t,e,i,r),e.child)}function r4(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!FN(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wU(t,e,s,i,r)):(t=AS(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:iv,n(o,i)&&t.ref===e.ref)return hu(t,e,r)}return e.flags|=1,t=_c(s,i),t.ref=e.ref,t.return=e,e.child=t}function wU(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(iv(s,i)&&t.ref===e.ref)if(Tr=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Tr=!0);else return e.lanes=t.lanes,hu(t,e,r)}return D2(t,e,n,i,r)}function SU(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(_p,ts),ts|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(_p,ts),ts|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,kt(_p,ts),ts|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,kt(_p,ts),ts|=i;return Bi(t,e,r,n),e.child}function EU(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function D2(t,e,n,i,r){var s=Pr(n)?Fh:Fi.current;return s=ig(e,s),Hp(e,r),n=SN(t,e,n,i,s,r),i=EN(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,hu(t,e,r)):(Yt&&i&&uN(e),e.flags|=1,Bi(t,e,n,r),e.child)}function s4(t,e,n,i,r){if(Pr(n)){var s=!0;bE(e)}else s=!1;if(Hp(e,r),e.stateNode===null)_S(t,e),Kz(e,n,i),T2(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Zs(u):(u=Pr(n)?Fh:Fi.current,u=ig(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&X$(e,o,i,u),ju=!1;var h=e.memoizedState;o.state=h,AE(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Or.current||ju?(typeof c=="function"&&(R2(e,n,c,i),l=e.memoizedState),(a=ju||K$(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Yz(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:xo(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zs(l):(l=Pr(n)?Fh:Fi.current,l=ig(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&X$(e,o,i,l),ju=!1,h=e.memoizedState,o.state=h,AE(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Or.current||ju?(typeof f=="function"&&(R2(e,n,f,i),p=e.memoizedState),(u=ju||K$(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return O2(t,e,n,i,s,r)}function O2(t,e,n,i,r,s){EU(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&z$(e,n,!1),hu(t,e,s);i=e.stateNode,xue.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=sg(e,t.child,null,s),e.child=sg(e,null,a,s)):Bi(t,e,a,s),e.memoizedState=i.state,r&&z$(e,n,!0),e.child}function bU(t){var e=t.stateNode;e.pendingContext?B$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&B$(t,e.context,!1),yN(t,e.containerInfo)}function o4(t,e,n,i,r){return rg(),dN(r),e.flags|=256,Bi(t,e,n,i),e.child}var P2={dehydrated:null,treeContext:null,retryLane:0};function F2(t){return{baseLanes:t,cachePool:null,transitions:null}}function xU(t,e,n){var i=e.pendingProps,r=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),kt(Zt,r&1),t===null)return x2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=u_(o,i,0,null),t=mh(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=F2(n),e.memoizedState=P2,t):_N(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return _ue(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=_c(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=_c(a,s):(s=mh(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?F2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=P2,i}return s=t.child,t=s.sibling,i=_c(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function _N(t,e){return e=u_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ww(t,e,n,i){return i!==null&&dN(i),sg(e,t.child,null,n),t=_N(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _ue(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=UA(Error(se(422))),ww(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=u_({mode:"visible",children:i.children},r,0,null),s=mh(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&sg(e,t.child,null,o),e.child.memoizedState=F2(o),e.memoizedState=P2,s);if(!(e.mode&1))return ww(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(se(419)),i=UA(s,i,void 0),ww(t,e,o,i)}if(a=(o&t.childLanes)!==0,Tr||a){if(i=Vn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,du(t,r),Bo(i,t,r,-1))}return PN(),i=UA(Error(se(421))),ww(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Gue.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,cs=Sc(r.nextSibling),ms=e,Yt=!0,Ao=null,t!==null&&(Gs[$s++]=Vl,Gs[$s++]=Bl,Gs[$s++]=Mh,Vl=t.id,Bl=t.overflow,Mh=e),e=_N(e,i.children),e.flags|=4096,e)}function a4(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),_2(t.return,e,n)}function jA(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function _U(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Bi(t,e,i.children,n),i=Zt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a4(t,n,e);else if(t.tag===19)a4(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(kt(Zt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&DE(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),jA(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&DE(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}jA(e,!0,n,null,s);break;case"together":jA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _S(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=_c(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_c(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rue(t,e,n){switch(e.tag){case 3:bU(e),rg();break;case 5:Jz(e);break;case 1:Pr(e.type)&&bE(e);break;case 4:yN(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;kt(RE,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(kt(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?xU(t,e,n):(kt(Zt,Zt.current&1),t=hu(t,e,n),t!==null?t.sibling:null);kt(Zt,Zt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return _U(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),kt(Zt,Zt.current),i)break;return null;case 22:case 23:return e.lanes=0,SU(t,e,n)}return hu(t,e,n)}var RU,M2,TU,AU;RU=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};M2=function(){};TU=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,oh(Va.current);var s=null;switch(n){case"input":r=t2(t,r),i=t2(t,i),s=[];break;case"select":r=tn({},r,{value:void 0}),i=tn({},i,{value:void 0}),s=[];break;case"textarea":r=r2(t,r),i=r2(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=SE)}o2(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(X0.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(X0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&$t("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};AU=function(t,e,n,i){n!==i&&(e.flags|=4)};function py(t,e){if(!Yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function hi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Tue(t,e,n){var i=e.pendingProps;switch(cN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(e),null;case 1:return Pr(e.type)&&EE(),hi(e),null;case 3:return i=e.stateNode,og(),Ut(Or),Ut(Fi),CN(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(vw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ao!==null&&(W2(Ao),Ao=null))),M2(t,e),hi(e),null;case 5:vN(e);var r=oh(lv.current);if(n=e.type,t!==null&&e.stateNode!=null)TU(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(se(166));return hi(e),null}if(t=oh(Va.current),vw(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[La]=e,i[ov]=s,t=(e.mode&1)!==0,n){case"dialog":$t("cancel",i),$t("close",i);break;case"iframe":case"object":case"embed":$t("load",i);break;case"video":case"audio":for(r=0;r<Yy.length;r++)$t(Yy[r],i);break;case"source":$t("error",i);break;case"img":case"image":case"link":$t("error",i),$t("load",i);break;case"details":$t("toggle",i);break;case"input":m$(i,s),$t("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},$t("invalid",i);break;case"textarea":v$(i,s),$t("invalid",i)}o2(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&yw(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&yw(i.textContent,a,t),r=["children",""+a]):X0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$t("scroll",i)}switch(n){case"input":uw(i),y$(i,s,!0);break;case"textarea":uw(i),C$(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=SE)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tz(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[La]=e,t[ov]=i,RU(t,e,!1,!1),e.stateNode=t;e:{switch(o=a2(n,i),n){case"dialog":$t("cancel",t),$t("close",t),r=i;break;case"iframe":case"object":case"embed":$t("load",t),r=i;break;case"video":case"audio":for(r=0;r<Yy.length;r++)$t(Yy[r],t);r=i;break;case"source":$t("error",t),r=i;break;case"img":case"image":case"link":$t("error",t),$t("load",t),r=i;break;case"details":$t("toggle",t),r=i;break;case"input":m$(t,i),r=t2(t,i),$t("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=tn({},i,{value:void 0}),$t("invalid",t);break;case"textarea":v$(t,i),r=r2(t,i),$t("invalid",t);break;default:r=i}o2(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?rz(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nz(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Q0(t,l):typeof l=="number"&&Q0(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(X0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$t("scroll",t):l!=null&&KM(t,s,l,o))}switch(n){case"input":uw(t),y$(t,i,!1);break;case"textarea":uw(t),C$(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Mc(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ip(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ip(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=SE)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hi(e),null;case 6:if(t&&e.stateNode!=null)AU(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(se(166));if(n=oh(lv.current),oh(Va.current),vw(e)){if(i=e.stateNode,n=e.memoizedProps,i[La]=e,(s=i.nodeValue!==n)&&(t=ms,t!==null))switch(t.tag){case 3:yw(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yw(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[La]=e,e.stateNode=i}return hi(e),null;case 13:if(Ut(Zt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Yt&&cs!==null&&e.mode&1&&!(e.flags&128))Uz(),rg(),e.flags|=98560,s=!1;else if(s=vw(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[La]=e}else rg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hi(e),s=!1}else Ao!==null&&(W2(Ao),Ao=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?xn===0&&(xn=3):PN())),e.updateQueue!==null&&(e.flags|=4),hi(e),null);case 4:return og(),M2(t,e),t===null&&rv(e.stateNode.containerInfo),hi(e),null;case 10:return pN(e.type._context),hi(e),null;case 17:return Pr(e.type)&&EE(),hi(e),null;case 19:if(Ut(Zt),s=e.memoizedState,s===null)return hi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)py(s,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=DE(t),o!==null){for(e.flags|=128,py(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&fn()>lg&&(e.flags|=128,i=!0,py(s,!1),e.lanes=4194304)}else{if(!i)if(t=DE(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),py(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Yt)return hi(e),null}else 2*fn()-s.renderingStartTime>lg&&n!==1073741824&&(e.flags|=128,i=!0,py(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fn(),e.sibling=null,n=Zt.current,kt(Zt,i?n&1|2:n&1),e):(hi(e),null);case 22:case 23:return ON(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ts&1073741824&&(hi(e),e.subtreeFlags&6&&(e.flags|=8192)):hi(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function Aue(t,e){switch(cN(e),e.tag){case 1:return Pr(e.type)&&EE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return og(),Ut(Or),Ut(Fi),CN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vN(e),null;case 13:if(Ut(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));rg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(Zt),null;case 4:return og(),null;case 10:return pN(e.type._context),null;case 22:case 23:return ON(),null;case 24:return null;default:return null}}var Sw=!1,wi=!1,Due=typeof WeakSet=="function"?WeakSet:Set,ye=null;function xp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){sn(t,e,i)}else n.current=null}function N2(t,e,n){try{n()}catch(i){sn(t,e,i)}}var l4=!1;function Oue(t,e){if(y2=vE,t=Fz(),lN(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(v2={focusedElem:t,selectionRange:n},vE=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:xo(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(w){sn(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return p=l4,l4=!1,p}function O0(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&N2(e,n,s)}r=r.next}while(r!==i)}}function a_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function L2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DU(t){var e=t.alternate;e!==null&&(t.alternate=null,DU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[La],delete e[ov],delete e[S2],delete e[hue],delete e[fue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OU(t){return t.tag===5||t.tag===3||t.tag===4}function u4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OU(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function I2(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=SE));else if(i!==4&&(t=t.child,t!==null))for(I2(t,e,n),t=t.sibling;t!==null;)I2(t,e,n),t=t.sibling}function k2(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(k2(t,e,n),t=t.sibling;t!==null;)k2(t,e,n),t=t.sibling}var Kn=null,Ro=!1;function Gu(t,e,n){for(n=n.child;n!==null;)PU(t,e,n),n=n.sibling}function PU(t,e,n){if(Wa&&typeof Wa.onCommitFiberUnmount=="function")try{Wa.onCommitFiberUnmount(Zx,n)}catch{}switch(n.tag){case 5:wi||xp(n,e);case 6:var i=Kn,r=Ro;Kn=null,Gu(t,e,n),Kn=i,Ro=r,Kn!==null&&(Ro?(t=Kn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kn.removeChild(n.stateNode));break;case 18:Kn!==null&&(Ro?(t=Kn,n=n.stateNode,t.nodeType===8?$A(t.parentNode,n):t.nodeType===1&&$A(t,n),tv(t)):$A(Kn,n.stateNode));break;case 4:i=Kn,r=Ro,Kn=n.stateNode.containerInfo,Ro=!0,Gu(t,e,n),Kn=i,Ro=r;break;case 0:case 11:case 14:case 15:if(!wi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&N2(n,e,o),r=r.next}while(r!==i)}Gu(t,e,n);break;case 1:if(!wi&&(xp(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){sn(n,e,a)}Gu(t,e,n);break;case 21:Gu(t,e,n);break;case 22:n.mode&1?(wi=(i=wi)||n.memoizedState!==null,Gu(t,e,n),wi=i):Gu(t,e,n);break;default:Gu(t,e,n)}}function c4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Due),e.forEach(function(i){var r=$ue.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function vo(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kn=a.stateNode,Ro=!1;break e;case 3:Kn=a.stateNode.containerInfo,Ro=!0;break e;case 4:Kn=a.stateNode.containerInfo,Ro=!0;break e}a=a.return}if(Kn===null)throw Error(se(160));PU(s,o,r),Kn=null,Ro=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){sn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FU(e,t),e=e.sibling}function FU(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vo(e,t),va(t),i&4){try{O0(3,t,t.return),a_(3,t)}catch(g){sn(t,t.return,g)}try{O0(5,t,t.return)}catch(g){sn(t,t.return,g)}}break;case 1:vo(e,t),va(t),i&512&&n!==null&&xp(n,n.return);break;case 5:if(vo(e,t),va(t),i&512&&n!==null&&xp(n,n.return),t.flags&32){var r=t.stateNode;try{Q0(r,"")}catch(g){sn(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ZB(r,s),a2(a,o);var u=a2(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?rz(r,d):c==="dangerouslySetInnerHTML"?nz(r,d):c==="children"?Q0(r,d):KM(r,c,d,u)}switch(a){case"input":n2(r,s);break;case"textarea":ez(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ip(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ip(r,!!s.multiple,s.defaultValue,!0):Ip(r,!!s.multiple,s.multiple?[]:"",!1))}r[ov]=s}catch(g){sn(t,t.return,g)}}break;case 6:if(vo(e,t),va(t),i&4){if(t.stateNode===null)throw Error(se(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){sn(t,t.return,g)}}break;case 3:if(vo(e,t),va(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{tv(e.containerInfo)}catch(g){sn(t,t.return,g)}break;case 4:vo(e,t),va(t);break;case 13:vo(e,t),va(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(AN=fn())),i&4&&c4(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(wi=(u=wi)||c,vo(e,t),wi=u):vo(e,t),va(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ye=t,c=t.child;c!==null;){for(d=ye=c;ye!==null;){switch(h=ye,f=h.child,h.tag){case 0:case 11:case 14:case 15:O0(4,h,h.return);break;case 1:xp(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){sn(i,n,g)}}break;case 5:xp(h,h.return);break;case 22:if(h.memoizedState!==null){h4(d);continue}}f!==null?(f.return=h,ye=f):h4(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iz("display",o))}catch(g){sn(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){sn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vo(e,t),va(t),i&4&&c4(t);break;case 21:break;default:vo(e,t),va(t)}}function va(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OU(n)){var i=n;break e}n=n.return}throw Error(se(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Q0(r,""),i.flags&=-33);var s=u4(t);k2(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=u4(t);I2(t,a,o);break;default:throw Error(se(161))}}catch(l){sn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Pue(t,e,n){ye=t,MU(t)}function MU(t,e,n){for(var i=(t.mode&1)!==0;ye!==null;){var r=ye,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Sw;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||wi;a=Sw;var u=wi;if(Sw=o,(wi=l)&&!u)for(ye=r;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?f4(r):l!==null?(l.return=o,ye=l):f4(r);for(;s!==null;)ye=s,MU(s),s=s.sibling;ye=r,Sw=a,wi=u}d4(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ye=s):d4(t)}}function d4(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wi||a_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!wi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:xo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&q$(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q$(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&tv(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}wi||e.flags&512&&L2(e)}catch(h){sn(e,e.return,h)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function h4(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function f4(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{a_(4,e)}catch(l){sn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){sn(e,r,l)}}var s=e.return;try{L2(e)}catch(l){sn(e,s,l)}break;case 5:var o=e.return;try{L2(e)}catch(l){sn(e,o,l)}}}catch(l){sn(e,e.return,l)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var Fue=Math.ceil,FE=Eu.ReactCurrentDispatcher,RN=Eu.ReactCurrentOwner,Ys=Eu.ReactCurrentBatchConfig,ht=0,Vn=null,yn=null,ti=0,ts=0,_p=rd(0),xn=0,hv=null,Lh=0,l_=0,TN=0,P0=null,wr=null,AN=0,lg=1/0,Ml=null,ME=!1,G2=null,bc=null,Ew=!1,rc=null,NE=0,F0=0,$2=null,RS=-1,TS=0;function Zi(){return ht&6?fn():RS!==-1?RS:RS=fn()}function xc(t){return t.mode&1?ht&2&&ti!==0?ti&-ti:gue.transition!==null?(TS===0&&(TS=mz()),TS):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:bz(t.type)),t):1}function Bo(t,e,n,i){if(50<F0)throw F0=0,$2=null,Error(se(185));b1(t,n,i),(!(ht&2)||t!==Vn)&&(t===Vn&&(!(ht&2)&&(l_|=n),xn===4&&ec(t,ti)),Fr(t,i),n===1&&ht===0&&!(e.mode&1)&&(lg=fn()+500,r_&&sd()))}function Fr(t,e){var n=t.callbackNode;gle(t,e);var i=yE(t,t===Vn?ti:0);if(i===0)n!==null&&E$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&E$(n),e===1)t.tag===0?pue(p4.bind(null,t)):Vz(p4.bind(null,t)),cue(function(){!(ht&6)&&sd()}),n=null;else{switch(yz(i)){case 1:n=eN;break;case 4:n=pz;break;case 16:n=mE;break;case 536870912:n=gz;break;default:n=mE}n=WU(n,NU.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NU(t,e){if(RS=-1,TS=0,ht&6)throw Error(se(327));var n=t.callbackNode;if(Wp()&&t.callbackNode!==n)return null;var i=yE(t,t===Vn?ti:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=LE(t,i);else{e=i;var r=ht;ht|=2;var s=IU();(Vn!==t||ti!==e)&&(Ml=null,lg=fn()+500,gh(t,e));do try{Lue();break}catch(a){LU(t,a)}while(1);fN(),FE.current=s,ht=r,yn!==null?e=0:(Vn=null,ti=0,e=xn)}if(e!==0){if(e===2&&(r=h2(t),r!==0&&(i=r,e=H2(t,r))),e===1)throw n=hv,gh(t,0),ec(t,i),Fr(t,fn()),n;if(e===6)ec(t,i);else{if(r=t.current.alternate,!(i&30)&&!Mue(r)&&(e=LE(t,i),e===2&&(s=h2(t),s!==0&&(i=s,e=H2(t,s))),e===1))throw n=hv,gh(t,0),ec(t,i),Fr(t,fn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(se(345));case 2:zd(t,wr,Ml);break;case 3:if(ec(t,i),(i&130023424)===i&&(e=AN+500-fn(),10<e)){if(yE(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Zi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=w2(zd.bind(null,t,wr,Ml),e);break}zd(t,wr,Ml);break;case 4:if(ec(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Vo(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=fn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Fue(i/1960))-i,10<i){t.timeoutHandle=w2(zd.bind(null,t,wr,Ml),i);break}zd(t,wr,Ml);break;case 5:zd(t,wr,Ml);break;default:throw Error(se(329))}}}return Fr(t,fn()),t.callbackNode===n?NU.bind(null,t):null}function H2(t,e){var n=P0;return t.current.memoizedState.isDehydrated&&(gh(t,e).flags|=256),t=LE(t,e),t!==2&&(e=wr,wr=n,e!==null&&W2(e)),t}function W2(t){wr===null?wr=t:wr.push.apply(wr,t)}function Mue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Qo(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ec(t,e){for(e&=~TN,e&=~l_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vo(e),i=1<<n;t[n]=-1,e&=~i}}function p4(t){if(ht&6)throw Error(se(327));Wp();var e=yE(t,0);if(!(e&1))return Fr(t,fn()),null;var n=LE(t,e);if(t.tag!==0&&n===2){var i=h2(t);i!==0&&(e=i,n=H2(t,i))}if(n===1)throw n=hv,gh(t,0),ec(t,e),Fr(t,fn()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zd(t,wr,Ml),Fr(t,fn()),null}function DN(t,e){var n=ht;ht|=1;try{return t(e)}finally{ht=n,ht===0&&(lg=fn()+500,r_&&sd())}}function Ih(t){rc!==null&&rc.tag===0&&!(ht&6)&&Wp();var e=ht;ht|=1;var n=Ys.transition,i=Rt;try{if(Ys.transition=null,Rt=1,t)return t()}finally{Rt=i,Ys.transition=n,ht=e,!(ht&6)&&sd()}}function ON(){ts=_p.current,Ut(_p)}function gh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uue(n)),yn!==null)for(n=yn.return;n!==null;){var i=n;switch(cN(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&EE();break;case 3:og(),Ut(Or),Ut(Fi),CN();break;case 5:vN(i);break;case 4:og();break;case 13:Ut(Zt);break;case 19:Ut(Zt);break;case 10:pN(i.type._context);break;case 22:case 23:ON()}n=n.return}if(Vn=t,yn=t=_c(t.current,null),ti=ts=e,xn=0,hv=null,TN=l_=Lh=0,wr=P0=null,sh!==null){for(e=0;e<sh.length;e++)if(n=sh[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}sh=null}return t}function LU(t,e){do{var n=yn;try{if(fN(),bS.current=PE,OE){for(var i=en.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}OE=!1}if(Nh=0,Mn=wn=en=null,D0=!1,uv=0,RN.current=null,n===null||n.return===null){xn=1,hv=e,yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ti,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=t4(o);if(f!==null){f.flags&=-257,n4(f,o,a,s,e),f.mode&1&&e4(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){e4(s,u,e),PN();break e}l=Error(se(426))}}else if(Yt&&a.mode&1){var m=t4(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),n4(m,o,a,s,e),dN(ag(l,a));break e}}s=l=ag(l,a),xn!==4&&(xn=2),P0===null?P0=[s]:P0.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=vU(s,l,e);Y$(s,y);break e;case 1:a=l;var v=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(bc===null||!bc.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=CU(s,a,e);Y$(s,w);break e}}s=s.return}while(s!==null)}GU(n)}catch(E){e=E,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(1)}function IU(){var t=FE.current;return FE.current=PE,t===null?PE:t}function PN(){(xn===0||xn===3||xn===2)&&(xn=4),Vn===null||!(Lh&268435455)&&!(l_&268435455)||ec(Vn,ti)}function LE(t,e){var n=ht;ht|=2;var i=IU();(Vn!==t||ti!==e)&&(Ml=null,gh(t,e));do try{Nue();break}catch(r){LU(t,r)}while(1);if(fN(),ht=n,FE.current=i,yn!==null)throw Error(se(261));return Vn=null,ti=0,xn}function Nue(){for(;yn!==null;)kU(yn)}function Lue(){for(;yn!==null&&!ole();)kU(yn)}function kU(t){var e=HU(t.alternate,t,ts);t.memoizedProps=t.pendingProps,e===null?GU(t):yn=e,RN.current=null}function GU(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Aue(n,e),n!==null){n.flags&=32767,yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,yn=null;return}}else if(n=Tue(n,e,ts),n!==null){yn=n;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=t}while(e!==null);xn===0&&(xn=5)}function zd(t,e,n){var i=Rt,r=Ys.transition;try{Ys.transition=null,Rt=1,Iue(t,e,n,i)}finally{Ys.transition=r,Rt=i}return null}function Iue(t,e,n,i){do Wp();while(rc!==null);if(ht&6)throw Error(se(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mle(t,s),t===Vn&&(yn=Vn=null,ti=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ew||(Ew=!0,WU(mE,function(){return Wp(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ys.transition,Ys.transition=null;var o=Rt;Rt=1;var a=ht;ht|=4,RN.current=null,Oue(t,n),FU(n,t),nue(v2),vE=!!y2,v2=y2=null,t.current=n,Pue(n),ale(),ht=a,Rt=o,Ys.transition=s}else t.current=n;if(Ew&&(Ew=!1,rc=t,NE=r),s=t.pendingLanes,s===0&&(bc=null),cle(n.stateNode),Fr(t,fn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ME)throw ME=!1,t=G2,G2=null,t;return NE&1&&t.tag!==0&&Wp(),s=t.pendingLanes,s&1?t===$2?F0++:(F0=0,$2=t):F0=0,sd(),null}function Wp(){if(rc!==null){var t=yz(NE),e=Ys.transition,n=Rt;try{if(Ys.transition=null,Rt=16>t?16:t,rc===null)var i=!1;else{if(t=rc,rc=null,NE=0,ht&6)throw Error(se(331));var r=ht;for(ht|=4,ye=t.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ye=u;ye!==null;){var c=ye;switch(c.tag){case 0:case 11:case 15:O0(8,c,s)}var d=c.child;if(d!==null)d.return=c,ye=d;else for(;ye!==null;){c=ye;var h=c.sibling,f=c.return;if(DU(c),c===u){ye=null;break}if(h!==null){h.return=f,ye=h;break}ye=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:O0(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ye=y;break e}ye=s.return}}var v=t.current;for(ye=v;ye!==null;){o=ye;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ye=C;else e:for(o=v;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:a_(9,a)}}catch(E){sn(a,a.return,E)}if(a===o){ye=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ye=w;break e}ye=a.return}}if(ht=r,sd(),Wa&&typeof Wa.onPostCommitFiberRoot=="function")try{Wa.onPostCommitFiberRoot(Zx,t)}catch{}i=!0}return i}finally{Rt=n,Ys.transition=e}}return!1}function g4(t,e,n){e=ag(n,e),e=vU(t,e,1),t=Ec(t,e,1),e=Zi(),t!==null&&(b1(t,1,e),Fr(t,e))}function sn(t,e,n){if(t.tag===3)g4(t,t,n);else for(;e!==null;){if(e.tag===3){g4(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bc===null||!bc.has(i))){t=ag(n,t),t=CU(e,t,1),e=Ec(e,t,1),t=Zi(),e!==null&&(b1(e,1,t),Fr(e,t));break}}e=e.return}}function kue(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Zi(),t.pingedLanes|=t.suspendedLanes&n,Vn===t&&(ti&n)===n&&(xn===4||xn===3&&(ti&130023424)===ti&&500>fn()-AN?gh(t,0):TN|=n),Fr(t,e)}function $U(t,e){e===0&&(t.mode&1?(e=hw,hw<<=1,!(hw&130023424)&&(hw=4194304)):e=1);var n=Zi();t=du(t,e),t!==null&&(b1(t,e,n),Fr(t,n))}function Gue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$U(t,n)}function $ue(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(se(314))}i!==null&&i.delete(e),$U(t,n)}var HU;HU=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Or.current)Tr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tr=!1,Rue(t,e,n);Tr=!!(t.flags&131072)}else Tr=!1,Yt&&e.flags&1048576&&Bz(e,_E,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_S(t,e),t=e.pendingProps;var r=ig(e,Fi.current);Hp(e,n),r=SN(null,e,i,t,r,n);var s=EN();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pr(i)?(s=!0,bE(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,mN(e),r.updater=s_,e.stateNode=r,r._reactInternals=e,T2(e,i,t,n),e=O2(null,e,i,!0,s,n)):(e.tag=0,Yt&&s&&uN(e),Bi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(_S(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Wue(i),t=xo(i,t),r){case 0:e=D2(null,e,i,t,n);break e;case 1:e=s4(null,e,i,t,n);break e;case 11:e=i4(null,e,i,t,n);break e;case 14:e=r4(null,e,i,xo(i.type,t),n);break e}throw Error(se(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xo(i,r),D2(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xo(i,r),s4(t,e,i,r,n);case 3:e:{if(bU(e),t===null)throw Error(se(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Yz(t,e),AE(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ag(Error(se(423)),e),e=o4(t,e,i,n,r);break e}else if(i!==r){r=ag(Error(se(424)),e),e=o4(t,e,i,n,r);break e}else for(cs=Sc(e.stateNode.containerInfo.firstChild),ms=e,Yt=!0,Ao=null,n=Qz(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rg(),i===r){e=hu(t,e,n);break e}Bi(t,e,i,n)}e=e.child}return e;case 5:return Jz(e),t===null&&x2(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,C2(i,r)?o=null:s!==null&&C2(i,s)&&(e.flags|=32),EU(t,e),Bi(t,e,o,n),e.child;case 6:return t===null&&x2(e),null;case 13:return xU(t,e,n);case 4:return yN(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=sg(e,null,i,n):Bi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xo(i,r),i4(t,e,i,r,n);case 7:return Bi(t,e,e.pendingProps,n),e.child;case 8:return Bi(t,e,e.pendingProps.children,n),e.child;case 12:return Bi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,kt(RE,i._currentValue),i._currentValue=o,s!==null)if(Qo(s.value,o)){if(s.children===r.children&&!Or.current){e=hu(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ql(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),_2(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_2(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Hp(e,n),r=Zs(r),i=i(r),e.flags|=1,Bi(t,e,i,n),e.child;case 14:return i=e.type,r=xo(i,e.pendingProps),r=xo(i.type,r),r4(t,e,i,r,n);case 15:return wU(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xo(i,r),_S(t,e),e.tag=1,Pr(i)?(t=!0,bE(e)):t=!1,Hp(e,n),Kz(e,i,r),T2(e,i,r,n),O2(null,e,i,!0,t,n);case 19:return _U(t,e,n);case 22:return SU(t,e,n)}throw Error(se(156,e.tag))};function WU(t,e){return fz(t,e)}function Hue(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(t,e,n,i){return new Hue(t,e,n,i)}function FN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wue(t){if(typeof t=="function")return FN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===QM)return 11;if(t===JM)return 14}return 2}function _c(t,e){var n=t.alternate;return n===null?(n=Ws(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function AS(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")FN(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gp:return mh(n.children,r,s,e);case XM:o=8,r|=8;break;case QO:return t=Ws(12,n,e,r|2),t.elementType=QO,t.lanes=s,t;case JO:return t=Ws(13,n,e,r),t.elementType=JO,t.lanes=s,t;case ZO:return t=Ws(19,n,e,r),t.elementType=ZO,t.lanes=s,t;case XB:return u_(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qB:o=10;break e;case KB:o=9;break e;case QM:o=11;break e;case JM:o=14;break e;case Uu:o=16,i=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Ws(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function mh(t,e,n,i){return t=Ws(7,t,i,e),t.lanes=n,t}function u_(t,e,n,i){return t=Ws(22,t,i,e),t.elementType=XB,t.lanes=n,t.stateNode={isHidden:!1},t}function YA(t,e,n){return t=Ws(6,t,null,e),t.lanes=n,t}function qA(t,e,n){return e=Ws(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vue(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=AA(0),this.expirationTimes=AA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=AA(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function MN(t,e,n,i,r,s,o,a,l){return t=new Vue(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ws(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mN(s),t}function Bue(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pp,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function VU(t){if(!t)return Nc;t=t._reactInternals;e:{if(mf(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Pr(n))return Wz(t,n,e)}return e}function BU(t,e,n,i,r,s,o,a,l){return t=MN(n,i,!0,t,r,s,o,a,l),t.context=VU(null),n=t.current,i=Zi(),r=xc(n),s=Ql(i,r),s.callback=e??null,Ec(n,s,r),t.current.lanes=r,b1(t,r,i),Fr(t,i),t}function c_(t,e,n,i){var r=e.current,s=Zi(),o=xc(r);return n=VU(n),e.context===null?e.context=n:e.pendingContext=n,e=Ql(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ec(r,e,o),t!==null&&(Bo(t,r,o,s),ES(t,r,o)),o}function IE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function m4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function NN(t,e){m4(t,e),(t=t.alternate)&&m4(t,e)}function zue(){return null}var zU=typeof reportError=="function"?reportError:function(t){console.error(t)};function LN(t){this._internalRoot=t}d_.prototype.render=LN.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));c_(t,e,null,null)};d_.prototype.unmount=LN.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ih(function(){c_(null,t,null,null)}),e[cu]=null}};function d_(t){this._internalRoot=t}d_.prototype.unstable_scheduleHydration=function(t){if(t){var e=wz();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zu.length&&e!==0&&e<Zu[n].priority;n++);Zu.splice(n,0,t),n===0&&Ez(t)}};function IN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function y4(){}function Uue(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=IE(o);s.call(u)}}var o=BU(e,i,t,0,null,!1,!1,"",y4);return t._reactRootContainer=o,t[cu]=o.current,rv(t.nodeType===8?t.parentNode:t),Ih(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=IE(l);a.call(u)}}var l=MN(t,0,!1,null,null,!1,!1,"",y4);return t._reactRootContainer=l,t[cu]=l.current,rv(t.nodeType===8?t.parentNode:t),Ih(function(){c_(e,l,n,i)}),l}function f_(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=IE(o);a.call(l)}}c_(e,o,t,r)}else o=Uue(n,e,t,r,i);return IE(o)}vz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jy(e.pendingLanes);n!==0&&(tN(e,n|1),Fr(e,fn()),!(ht&6)&&(lg=fn()+500,sd()))}break;case 13:Ih(function(){var i=du(t,1);if(i!==null){var r=Zi();Bo(i,t,1,r)}}),NN(t,1)}};nN=function(t){if(t.tag===13){var e=du(t,134217728);if(e!==null){var n=Zi();Bo(e,t,134217728,n)}NN(t,134217728)}};Cz=function(t){if(t.tag===13){var e=xc(t),n=du(t,e);if(n!==null){var i=Zi();Bo(n,t,e,i)}NN(t,e)}};wz=function(){return Rt};Sz=function(t,e){var n=Rt;try{return Rt=t,e()}finally{Rt=n}};u2=function(t,e,n){switch(e){case"input":if(n2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i_(i);if(!r)throw Error(se(90));JB(i),n2(i,r)}}}break;case"textarea":ez(t,n);break;case"select":e=n.value,e!=null&&Ip(t,!!n.multiple,e,!1)}};az=DN;lz=Ih;var jue={usingClientEntryPoint:!1,Events:[_1,Cp,i_,sz,oz,DN]},gy={findFiberByHostInstance:rh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Yue={bundleType:gy.bundleType,version:gy.version,rendererPackageName:gy.rendererPackageName,rendererConfig:gy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dz(t),t===null?null:t.stateNode},findFiberByHostInstance:gy.findFiberByHostInstance||zue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bw.isDisabled&&bw.supportsFiber)try{Zx=bw.inject(Yue),Wa=bw}catch{}}_s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jue;_s.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IN(e))throw Error(se(200));return Bue(t,e,null,n)};_s.createRoot=function(t,e){if(!IN(t))throw Error(se(299));var n=!1,i="",r=zU;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=MN(t,1,!1,null,null,n,!1,i,r),t[cu]=e.current,rv(t.nodeType===8?t.parentNode:t),new LN(e)};_s.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=dz(e),t=t===null?null:t.stateNode,t};_s.flushSync=function(t){return Ih(t)};_s.hydrate=function(t,e,n){if(!h_(e))throw Error(se(200));return f_(null,t,e,!0,n)};_s.hydrateRoot=function(t,e,n){if(!IN(t))throw Error(se(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=zU;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=BU(e,null,t,1,n??null,r,!1,s,o),t[cu]=e.current,rv(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new d_(e)};_s.render=function(t,e,n){if(!h_(e))throw Error(se(200));return f_(null,t,e,!1,n)};_s.unmountComponentAtNode=function(t){if(!h_(t))throw Error(se(40));return t._reactRootContainer?(Ih(function(){f_(null,null,t,!1,function(){t._reactRootContainer=null,t[cu]=null})}),!0):!1};_s.unstable_batchedUpdates=DN;_s.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!h_(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return f_(t,e,n,!1,i)};_s.version="18.2.0-next-9e3b772b8-20220608";function UU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UU)}catch(t){console.error(t)}}UU(),BB.exports=_s;var T1=BB.exports;const V2=pf(T1);var v4=T1;KO.createRoot=v4.createRoot,KO.hydrateRoot=v4.hydrateRoot;function Ba(t){return t==null||t===""?null:t}function B(t,e=!1){return t!=null&&(t!==""||e)}function Pe(t){return!B(t)}function ls(t){return t==null||t.length===0}function fv(t){return t!=null&&typeof t.toString=="function"?t.toString():null}function Vs(t){if(t===void 0)return;if(t===null||t==="")return null;if(typeof t=="number")return isNaN(t)?void 0:t;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Pa(t){if(t!==void 0)return t===null||t===""?!1:typeof t=="boolean"?t:/true/i.test(t)}function que(t){if(!(t==null||t===""))return t}function Kue(t,e){return t==null&&e==null?!0:t==null&&e!=null||t!=null&&e==null?!1:t===e}function Xue(t,e){const n=t?JSON.stringify(t):null,i=e?JSON.stringify(e):null;return n===i}function Que(t,e,n=!1){const i=t==null,r=e==null;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),i&&r)return 0;if(i)return-1;if(r)return 1;function s(o,a){return o>a?1:o<a?-1:0}if(typeof t!="string"||!n)return s(t,e);try{return t.localeCompare(e)}catch{return s(t,e)}}function yh(t){if(t instanceof Set||t instanceof Map){const e=[];return t.forEach(n=>e.push(n)),e}return Object.values(t)}const Jue=Object.freeze(Object.defineProperty({__proto__:null,attrToBoolean:Pa,attrToNumber:Vs,attrToString:que,defaultComparator:Que,exists:B,jsonEquals:Xue,makeNull:Ba,missing:Pe,missingOrEmpty:ls,referenceCompare:Kue,toStringOrNull:fv,values:yh},Symbol.toStringTag,{value:"Module"}));class Zue{constructor(){this.existingKeys={}}addExistingKeys(e){for(let n=0;n<e.length;n++)this.existingKeys[e[n]]=!0}getUniqueKey(e,n){e=fv(e);let i=0;for(;;){let r;if(e?(r=e,i!==0&&(r+="_"+i)):n?(r=n,i!==0&&(r+="_"+i)):r=i,!this.existingKeys[r])return this.existingKeys[r]=!0,String(r);i++}}}function qt(t,e){if(t!=null){if(Array.isArray(t)){for(let n=0;n<t.length;n++)e(n.toString(),t[n]);return}for(const[n,i]of Object.entries(t))e(n,i)}}function kN(t){const e={},n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i],s=t[r];e[r]=s}return e}function ece(t){return JSON.parse(JSON.stringify(t))}function kE(t,e){if(!t)return;const n=t,i={};return Object.keys(n).forEach(r=>{if(e&&e.indexOf(r)>=0)return;const s=n[r];GE(s)&&s.constructor===Object?i[r]=kE(s):i[r]=s}),i}function jU(t,e){return t[e]}function YU(t,e,n){t[e]=n}function tce(t,e,...n){n.forEach(i=>qU(t,e,i))}function qU(t,e,n,i){const r=jU(t,n);r!==void 0&&YU(e,n,i?i(r):r)}function KU(t){const e={};return t.filter(n=>n!=null).forEach(n=>{Object.keys(n).forEach(i=>e[i]=null)}),Object.keys(e)}function Ja(t){if(!t)return[];const e=Object;if(typeof e.values=="function")return e.values(t);const n=[];for(const i in t)t.hasOwnProperty(i)&&t.propertyIsEnumerable(i)&&n.push(t[i]);return n}function ds(t,e,n=!0,i=!1){B(e)&&qt(e,(r,s)=>{let o=t[r];o!==s&&(i&&o==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(o={},t[r]=o),GE(s)&&GE(o)&&!Array.isArray(o)?ds(o,s,n,i):(n||s!==void 0)&&(t[r]=s))})}function nce(t){return Pe(t)||Object.keys(t).length===0}function ice(t,e,n){if(t==null)return n;const i=e.split(".");let r=t;for(;i.length>1;)if(r=r[i.shift()],r==null)return n;const s=r[i[0]];return s??n}function rce(t,e,n){if(t==null)return;const i=e.split(".");let r=t;i.forEach((s,o)=>{r[s]||(r[s]={}),o<i.length-1&&(r=r[s])}),r[i[i.length-1]]=n}function Vp(t,e,n){if(!e||!t)return;if(!n)return t[e];const i=e.split(".");let r=t;for(let s=0;s<i.length;s++){if(r==null)return;r=r[i[s]]}return r}function XU(t,e){Object.keys(t).forEach(r=>{typeof t[r]=="object"&&(t[r]=void 0)});const n=Object.getPrototypeOf(t),i={};Object.keys(n).forEach(r=>{if(typeof n[r]=="function"){const o=()=>{console.warn(`AG Grid: ${e} function ${r}() cannot be called as the grid has been destroyed.
                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't
                     be keeping the API reference, your application has a memory leak! Remove the API reference
                     when the grid is destroyed.`)};i[r]={value:o,writable:!0}}}),Object.defineProperties(t,i)}function GE(t){return typeof t=="object"&&t!==null}const sce=Object.freeze(Object.defineProperty({__proto__:null,cloneObject:kN,copyPropertiesIfPresent:tce,copyPropertyIfPresent:qU,deepCloneDefinition:kE,deepCloneObject:ece,get:ice,getAllKeysInObjects:KU,getAllValuesInObject:Ja,getProperty:jU,getValueUsingField:Vp,isNonNullObject:GE,iterateObject:qt,mergeDeep:ds,missingOrEmptyObject:nce,removeAllReferences:XU,set:rce,setProperty:YU},Symbol.toStringTag,{value:"Module"})),C4={};function et(t,e){C4[e]||(t(),C4[e]=!0)}function p_(t){if(t.name)return t.name;const e=/function\s+([^\(]+)/.exec(t.toString());return e&&e.length===2?e[1].trim():null}function g_(t){return!!(t&&t.constructor&&t.call&&t.apply)}function QU(t){JU(t,400)}const KA=[];let XA=!1;function B2(t){KA.push(t),!XA&&(XA=!0,window.setTimeout(()=>{const e=KA.slice();KA.length=0,XA=!1,e.forEach(n=>n())},0))}function JU(t,e=0){t.length>0&&window.setTimeout(()=>t.forEach(n=>n()),e)}function Lo(t,e){let n;return function(...i){const r=this;window.clearTimeout(n),n=window.setTimeout(function(){t.apply(r,i)},e)}}function z2(t,e){let n=0;return function(...i){const r=this,s=new Date().getTime();s-n<e||(n=s,t.apply(r,i))}}function GN(t,e,n=100,i){const r=new Date().getTime();let s=null,o=!1;const a=()=>{const l=new Date().getTime()-r>n;(t()||l)&&(e(),o=!0,s!=null&&(window.clearInterval(s),s=null),l&&i&&console.warn(i))};a(),o||(s=window.setInterval(a,10))}function oce(...t){return e=>t.reduce((n,i)=>i(n),e)}function ZU(t){t&&t()}const ace=()=>{},lce=Object.freeze(Object.defineProperty({__proto__:null,callIfPresent:ZU,compose:oce,debounce:Lo,doOnce:et,executeAfter:JU,executeInAWhile:QU,executeNextVMTurn:B2,getFunctionName:p_,isFunction:g_,noop:ace,throttle:z2,waitUntil:GN},Symbol.toStringTag,{value:"Module"}));var pe;(function(t){t.CommunityCoreModule="@ag-grid-community/core",t.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",t.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",t.CsvExportModule="@ag-grid-community/csv-export",t.EnterpriseCoreModule="@ag-grid-enterprise/core",t.RowGroupingModule="@ag-grid-enterprise/row-grouping",t.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",t.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",t.MenuModule="@ag-grid-enterprise/menu",t.SetFilterModule="@ag-grid-enterprise/set-filter",t.MultiFilterModule="@ag-grid-enterprise/multi-filter",t.StatusBarModule="@ag-grid-enterprise/status-bar",t.SideBarModule="@ag-grid-enterprise/side-bar",t.RangeSelectionModule="@ag-grid-enterprise/range-selection",t.MasterDetailModule="@ag-grid-enterprise/master-detail",t.RichSelectModule="@ag-grid-enterprise/rich-select",t.GridChartsModule="@ag-grid-enterprise/charts",t.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",t.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",t.ExcelExportModule="@ag-grid-enterprise/excel-export",t.ClipboardModule="@ag-grid-enterprise/clipboard",t.SparklinesModule="@ag-grid-enterprise/sparklines",t.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",t.AngularModule="@ag-grid-community/angular",t.ReactModule="@ag-grid-community/react",t.VueModule="@ag-grid-community/vue"})(pe||(pe={}));class oe{static register(e){oe.__register(e,!0,void 0)}static registerModules(e){oe.__registerModules(e,!0,void 0)}static __register(e,n,i){oe.runVersionChecks(e),i!==void 0?(oe.areGridScopedModules=!0,oe.gridModulesMap[i]===void 0&&(oe.gridModulesMap[i]={}),oe.gridModulesMap[i][e.moduleName]=e):oe.globalModulesMap[e.moduleName]=e,oe.setModuleBased(n)}static __unRegisterGridModules(e){delete oe.gridModulesMap[e]}static __registerModules(e,n,i){oe.setModuleBased(n),e&&e.forEach(r=>oe.__register(r,n,i))}static isValidModuleVersion(e){const[n,i]=e.version.split(".")||[],[r,s]=oe.currentModuleVersion.split(".")||[];return n===r&&i===s}static runVersionChecks(e){if(oe.currentModuleVersion||(oe.currentModuleVersion=e.version),e.version?oe.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){const n=e.validate();n.isValid||console.error(`AG Grid: ${n.message}`)}}static setModuleBased(e){oe.moduleBased===void 0?oe.moduleBased=e:oe.moduleBased!==e&&et(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){oe.isBundled=!0}static __assertRegistered(e,n,i){var r;if(this.__isRegistered(e,i))return!0;const s=n+e;let o;if(oe.isBundled)o=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(oe.moduleBased||oe.moduleBased===void 0){let a=(r=Object.entries(pe).find(([l,u])=>u===e))===null||r===void 0?void 0:r[0];o=`AG Grid: unable to use ${n} as the ${a} is not registered${oe.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${e}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else o=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`;return et(()=>{console.warn(o)},s),!1}static __isRegistered(e,n){var i;return!!oe.globalModulesMap[e]||!!(!((i=oe.gridModulesMap[n])===null||i===void 0)&&i[e])}static __getRegisteredModules(e){return[...yh(oe.globalModulesMap),...yh(oe.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){var n;return yh((n=oe.gridModulesMap[e])!==null&&n!==void 0?n:{})||[]}static __isPackageBased(){return!oe.moduleBased}}oe.globalModulesMap={};oe.gridModulesMap={};oe.areGridScopedModules=!1;let uce=class{constructor(e,n){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=n,this.logger.log(">> creating ag-Application Context"),this.createBeans();const i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return yh(this.beanWrappers).map(e=>e.beanInstance)}createBean(e,n){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],n),e}wireBeans(e,n){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),B(n)&&e.forEach(n),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),qt(this.beanWrappers,(n,i)=>{let r;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(r=i.bean.__agBeanMetaData.autowireMethods.agConstructor);const s=this.getBeansForParameters(r,i.bean.name),o=new(i.bean.bind.apply(i.bean,[null,...s]));i.beanInstance=o});const e=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${e}`)}createBeanWrapper(e){const n=e.__agBeanMetaData;if(!n){let r;e.prototype.constructor?r=p_(e.prototype.constructor):r=""+e,console.error(`Context item ${r} is not a bean`);return}const i={bean:e,beanInstance:null,beanName:n.beanName};this.beanWrappers[n.beanName]=i}autoWireBeans(e){e.forEach(n=>{this.forEachMetaDataInHierarchy(n,(i,r)=>{const s=i.agClassAttributes;s&&s.forEach(o=>{const a=this.lookupBeanInstance(r,o.beanName,o.optional);n[o.attributeName]=a})})})}methodWireBeans(e){e.forEach(n=>{this.forEachMetaDataInHierarchy(n,(i,r)=>{qt(i.autowireMethods,(s,o)=>{if(s==="agConstructor")return;const a=this.getBeansForParameters(o,r);n[s].apply(n,a)})})})}forEachMetaDataInHierarchy(e,n){let i=Object.getPrototypeOf(e);for(;i!=null;){const r=i.constructor;if(r.hasOwnProperty("__agBeanMetaData")){const s=r.__agBeanMetaData,o=this.getBeanName(r);n(s,o)}i=Object.getPrototypeOf(i)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;const n=e.toString();return n.substring(9,n.indexOf("("))}getBeansForParameters(e,n){const i=[];return e&&qt(e,(r,s)=>{const o=this.lookupBeanInstance(n,s);i[Number(r)]=o}),i}lookupBeanInstance(e,n,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${n} is used after the grid is destroyed!`),null;if(n==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(n))return this.contextParams.providedBeanInstances[n];const r=this.beanWrappers[n];return r?r.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${n} while initialising ${e}`),null)}callLifeCycleMethods(e,n){e.forEach(i=>this.callLifeCycleMethodsOnBean(i,n))}callLifeCycleMethodsOnBean(e,n,i){const r={};this.forEachMetaDataInHierarchy(e,o=>{const a=o[n];a&&a.forEach(l=>{l!=i&&(r[l]=!0)})}),Object.keys(r).forEach(o=>e[o]())}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,oe.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){e&&this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach(n=>{this.callLifeCycleMethodsOnBean(n,"preDestroyMethods","destroy");const i=n;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function ej(t,e,n){const i=kh(t.constructor);i.preConstructMethods||(i.preConstructMethods=[]),i.preConstructMethods.push(e)}function Z(t,e,n){const i=kh(t.constructor);i.postConstructMethods||(i.postConstructMethods=[]),i.postConstructMethods.push(e)}function ur(t,e,n){const i=kh(t.constructor);i.preDestroyMethods||(i.preDestroyMethods=[]),i.preDestroyMethods.push(e)}function me(t){return e=>{const n=kh(e);n.beanName=t}}function R(t){return(e,n,i)=>{tj(e,t,!1,e,n,null)}}function lt(t){return(e,n,i)=>{tj(e,t,!0,e,n,null)}}function tj(t,e,n,i,r,s){if(e===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof s=="number"){console.error("AG Grid: Autowired should be on an attribute");return}const o=kh(t.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:r,beanName:e,optional:n})}function Ar(t){return(e,n,i)=>{const r=typeof e=="function"?e:e.constructor;let s;if(typeof i=="number"){let o;n?(s=kh(r),o=n):(s=kh(r),o="agConstructor"),s.autowireMethods||(s.autowireMethods={}),s.autowireMethods[o]||(s.autowireMethods[o]={}),s.autowireMethods[o][i]=t}}}function kh(t){return t.hasOwnProperty("__agBeanMetaData")||(t.__agBeanMetaData={}),t.__agBeanMetaData}var nj=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},xw=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};let Jo=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,n,i,r=null){if(this.frameworkOverrides=i,this.gridOptionsService=n,r){const s=n.useAsyncEvents();this.addGlobalListener(r,s)}}getListeners(e,n,i){const r=n?this.allAsyncListeners:this.allSyncListeners;let s=r.get(e);return!s&&i&&(s=new Set,r.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,n,i=!1){this.getListeners(e,i,!0).add(n)}removeEventListener(e,n,i=!1){const r=this.getListeners(e,i,!1);r&&(r.delete(n),r.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,n=!1){(n?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,n=!1){(n?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let n=e;if(this.gridOptionsService){const{api:i,columnApi:r,context:s}=this.gridOptionsService;n.api=i,n.columnApi=r,n.context=s}this.dispatchToListeners(n,!0),this.dispatchToListeners(n,!1),this.firedEvents[n.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,n){const i=e.type;if(n&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const r=a=>a.forEach(l=>{n?this.dispatchAsync(()=>l(e)):l(e)}),s=new Set(this.getListeners(i,n,!1));s&&r(s),new Set(n?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{n?this.dispatchAsync(()=>this.frameworkOverrides.dispatchEvent(i,()=>a(i,e),!0)):this.frameworkOverrides.dispatchEvent(i,()=>a(i,e),!0)})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(n=>n())}};nj([xw(0,Ar("loggerFactory")),xw(1,Ar("gridOptionsService")),xw(2,Ar("frameworkOverrides")),xw(3,Ar("globalEventListener"))],Jo.prototype,"setBeans",null);Jo=nj([me("eventService")],Jo);var m_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let cce=0;function ij(){return cce++}let Ge=class rj{constructor(e,n,i,r){this.instanceId=ij(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new Jo,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=n,this.colId=i,this.primary=r,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const n=Vs(e.sortIndex),i=Vs(e.initialSortIndex);n!==void 0?n!==null&&(this.sortIndex=n):i!==null&&(this.sortIndex=i);const r=Pa(e.hide),s=Pa(e.initialHide);r!==void 0?this.visible=!r:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=Vs(e.flex),a=Vs(e.initialFlex);o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(e,n){this.colDef=e,this.userProvidedColDef=n,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.validate()}initDotNotation(){const e=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=B(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=B(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(e),this.maxWidth=this.columnUtils.calculateColMaxWidth(e)}initTooltip(){this.tooltipEnabled=B(this.colDef.tooltipField)||B(this.colDef.tooltipValueGetter)||B(this.colDef.tooltipComponent)}resetActualWidth(e="api"){const n=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(n,e,!0)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Pe(this.colDef)||Pe(this.colDef.showRowGroup))return!1;const n=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return n||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}validate(){const e=this.colDef;function n(r,s,o){et(()=>{o?console.warn(r,o):et(()=>console.warn(r),s)},s)}if(this.gridOptionsService.isRowModelType("clientSide")&&!oe.__isRegistered(pe.RowGroupingModule,this.gridOptionsService.getGridId())){const s=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].filter(o=>B(e[o]));s.length>0&&oe.__assertRegistered(pe.RowGroupingModule,s.map(o=>"colDef."+o).join(", "),this.gridOptionsService.getGridId())}if((this.colDef.cellEditor==="agRichSelect"||this.colDef.cellEditor==="agRichSelectCellEditor")&&oe.__assertRegistered(pe.RichSelectModule,this.colDef.cellEditor,this.gridOptionsService.getGridId()),this.gridOptionsService.isTreeData()){const s=["rowGroup","rowGroupIndex","pivot","pivotIndex"].filter(o=>B(e[o]));s.length>0&&n(`AG Grid: ${s.join()} is not possible when doing tree data, your column definition should not have ${s.join()}`,"TreeDataCannotRowGroup")}if(B(e.menuTabs))if(Array.isArray(e.menuTabs)){const r=["filterMenuTab"],s=["columnsMenuTab","generalMenuTab"],o=s.filter(a=>e.menuTabs.includes(a));o.length>0&&oe.__assertRegistered(pe.MenuModule,`menuTab(s): ${o.map(a=>`'${a}'`).join()}`,this.gridOptionsService.getGridId()),e.menuTabs.forEach(a=>{!s.includes(a)&&!r.includes(a)&&n(`AG Grid: '${a}' is not valid for 'colDef.menuTabs'. Valid values are: ${[...r,...s].map(l=>`'${l}'`).join()}.`,"wrongValue_menuTabs_"+a)})}else n("AG Grid: The typeof 'colDef.menuTabs' should be an array not:"+typeof e.menuTabs,"wrongType_menuTabs");B(e.columnsMenuParams)&&oe.__assertRegistered(pe.MenuModule,"columnsMenuParams",this.gridOptionsService.getGridId()),B(e.columnsMenuParams)&&oe.__assertRegistered(pe.ColumnsToolPanelModule,"columnsMenuParams",this.gridOptionsService.getGridId()),B(this.colDef.width)&&typeof this.colDef.width!="number"&&n("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),B(e.columnGroupShow)&&e.columnGroupShow!=="closed"&&e.columnGroupShow!=="open"&&n(`AG Grid: '${e.columnGroupShow}' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null`,"columnGroupShow_invalid")}addEventListener(e,n){this.eventService.addEventListener(e,n)}removeEventListener(e,n){this.eventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return{node:e,data:e.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const n=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(n)}return!1}isCellEditable(e){return e.group&&!this.gridOptionsService.is("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!Pa(this.colDef.suppressFillHandle)}isAutoHeight(){return!!Pa(this.colDef.autoHeight)}isAutoHeaderHeight(){return!!Pa(this.colDef.autoHeaderHeight)}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!Pa(this.colDef.resizable)}isColumnFunc(e,n){if(typeof n=="boolean")return n;if(typeof n=="function"){const i=this.createColumnFunctionCallbackParams(e);return n(i)}return!1}setMoving(e,n="api"){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",n))}createColumnEvent(e,n){return{type:e,column:this,columns:[this],source:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,n="api"){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",n))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,n="api"){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",n)))}isMenuVisible(){return this.menuVisible}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Pe(this.sort)}isSorting(){return B(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,n="api"){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",n)))}isFilterActive(){return this.filterActive}setFilterActive(e,n="api",i){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",n)));const r=this.createColumnEvent("filterChanged",n);i&&ds(r,i),this.eventService.dispatchEvent(r)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,n="api"){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",n)))}setLastLeftPinned(e,n="api"){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",n)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,n="api"){const i=e===!0;this.visible!==i&&(this.visible=i,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",n))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const n=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,n}createBaseColDefParams(e){return{node:e,data:e.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}getColSpan(e){if(Pe(this.colDef.colSpan))return 1;const n=this.createBaseColDefParams(e),i=this.colDef.colSpan(n);return Math.max(i,1)}getRowSpan(e){if(Pe(this.colDef.rowSpan))return 1;const n=this.createBaseColDefParams(e),i=this.colDef.rowSpan(n);return Math.max(i,1)}setActualWidth(e,n="api",i=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&n!=="flex"&&n!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(n)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e="api"){B(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,n="api"){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",n))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,n="api"){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",n))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,n="api"){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",n)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){let n=this.getColDef().menuTabs;return n==null&&(n=e),n}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:rj.EVENT_STATE_UPDATED,key:e})}};Ge.EVENT_MOVING_CHANGED="movingChanged";Ge.EVENT_LEFT_CHANGED="leftChanged";Ge.EVENT_WIDTH_CHANGED="widthChanged";Ge.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";Ge.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";Ge.EVENT_VISIBLE_CHANGED="visibleChanged";Ge.EVENT_FILTER_CHANGED="filterChanged";Ge.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";Ge.EVENT_SORT_CHANGED="sortChanged";Ge.EVENT_COL_DEF_CHANGED="colDefChanged";Ge.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";Ge.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";Ge.EVENT_PIVOT_CHANGED="columnPivotChanged";Ge.EVENT_VALUE_CHANGED="columnValueChanged";Ge.EVENT_STATE_UPDATED="columnStateUpdated";m_([R("gridOptionsService")],Ge.prototype,"gridOptionsService",void 0);m_([R("columnUtils")],Ge.prototype,"columnUtils",void 0);m_([R("columnHoverService")],Ge.prototype,"columnHoverService",void 0);m_([Z],Ge.prototype,"initialise",null);var dce=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class bt{constructor(e,n,i,r){this.localEventService=new Jo,this.expandable=!1,this.instanceId=ij(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=n,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=r}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,n){this.colGroupDef=e,this.level=n,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;const n={type:bt.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(n)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(n=>{n instanceof Ge?e.push(n):n instanceof bt&&n.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(n=>n.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(n=>n.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,n=!1,i=!1;const r=this.findChildrenRemovingPadding();for(let o=0,a=r.length;o<a;o++){const l=r[o];if(!l.isVisible())continue;const u=l.getColumnGroupShow();u==="open"?(e=!0,i=!0):u==="closed"?(n=!0,i=!0):(e=!0,n=!0)}const s=e&&n&&i;if(this.expandable!==s){this.expandable=s;const o={type:bt.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(o)}}findChildrenRemovingPadding(){const e=[],n=i=>{i.forEach(r=>{r instanceof bt&&r.isPadding()?n(r.children):e.push(r)})};return n(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,n){this.localEventService.addEventListener(e,n)}removeEventListener(e,n){this.localEventService.removeEventListener(e,n)}}bt.EVENT_EXPANDED_CHANGED="expandedChanged";bt.EVENT_EXPANDABLE_CHANGED="expandableChanged";dce([ur],bt.prototype,"destroy",null);const hce={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function sj(...t){for(let e=0;e<t.length;e++){const n=t[e];if(B(n))return n}return null}function fce(t){return t!=null&&t.length>0}function St(t){if(!(!t||!t.length))return t[t.length-1]}function sc(t,e,n){return t==null&&e==null?!0:t!=null&&e!=null&&t.length===e.length&&t.every((i,r)=>n?n(i,e[r]):e[r]===i)}function pce(t,e){return sc(t,e)}function oj(t){return t.sort((e,n)=>e-n)}function gce(t,e){if(t)for(let n=t.length-2;n>=0;n--){const i=t[n]===e,r=t[n+1]===e;i&&r&&t.splice(n+1,1)}}function $N(t,e){const n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.pop())}function zi(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function aj(t,e){for(let n=0;n<e.length;n++)$N(t,e[n])}function lj(t,e){for(let n=0;n<e.length;n++)zi(t,e[n])}function pv(t,e,n){t.splice(n,0,e)}function mce(t,e,n){if(!(t==null||e==null))for(let i=e.length-1;i>=0;i--){const r=e[i];pv(t,r,n)}}function U2(t,e,n){lj(t,e),e.slice().reverse().forEach(i=>pv(t,i,n))}function qs(t,e){return t.indexOf(e)>-1}function uj(t){return[].concat.apply([],t)}function j2(t,e){e==null||t==null||e.forEach(n=>t.push(n))}function yce(t){return t.map(fv)}function vce(t,e){if(t!=null)for(let n=t.length-1;n>=0;n--)e(t[n],n)}const Cce=Object.freeze(Object.defineProperty({__proto__:null,areEqual:sc,existsAndNotEmpty:fce,firstExistingValue:sj,flatten:uj,forEachReverse:vce,includes:qs,insertArrayIntoArray:mce,insertIntoArray:pv,last:St,moveInArray:U2,pushAll:j2,removeAllFromArray:lj,removeAllFromUnorderedArray:aj,removeFromArray:zi,removeFromUnorderedArray:$N,removeRepeatsFromArray:gce,shallowCompare:pce,sortNumerically:oj,toStrings:yce},Symbol.toStringTag,{value:"Module"})),cj="__ag_Grid_Stop_Propagation",wce=["touchstart","touchend","touchmove","touchcancel","scroll"],QA={};function fu(t){t[cj]=!0}function za(t){return t[cj]===!0}const HN=(()=>{const t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof QA[n]=="boolean")return QA[n];const i=document.createElement(t[n]||"div");return n="on"+n,QA[n]=n in i}})();function $E(t,e,n){let i=e;for(;i;){const r=t.getDomData(i,n);if(r)return r;i=i.parentElement}return null}function HE(t,e){return!e||!t?!1:hj(e).indexOf(t)>=0}function dj(t){const e=[];let n=t.target;for(;n;)e.push(n),n=n.parentElement;return e}function hj(t){const e=t;return e.path?e.path:e.composedPath?e.composedPath():dj(e)}function fj(t,e,n,i){const s=qs(wce,n)?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,n,i,s)}const Sce=Object.freeze(Object.defineProperty({__proto__:null,addSafePassiveEventListener:fj,createEventPath:dj,getCtrlForEventTarget:$E,getEventPath:hj,isElementInEventPath:HE,isEventSupported:HN,isStopPropagationForAgGrid:za,stopPropagationForAgGrid:fu},Symbol.toStringTag,{value:"Module"}));var yf=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class q{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){this.destroyFunctions.forEach(e=>e()),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:q.EVENT_DESTROYED})}addEventListener(e,n){this.localEventService||(this.localEventService=new Jo),this.localEventService.addEventListener(e,n)}removeEventListener(e,n){this.localEventService&&this.localEventService.removeEventListener(e,n)}dispatchEventAsync(e){window.setTimeout(()=>this.dispatchEvent(e),0)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,n,i){if(this.destroyed)return;e instanceof HTMLElement?fj(this.getFrameworkOverrides(),e,n,i):e.addEventListener(n,i);const r=()=>(e.removeEventListener(n,i),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==r),null);return this.destroyFunctions.push(r),r}addManagedPropertyListener(e,n){if(this.destroyed)return;this.gridOptionsService.addEventListener(e,n);const i=()=>(this.gridOptionsService.removeEventListener(e,n),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null);return this.destroyFunctions.push(i),i}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,n){const i=this.createBean(e,n);return this.addDestroyFunc(this.destroyBean.bind(this,e,n)),i}createBean(e,n,i){return(n||this.getContext()).createBean(e,i)}destroyBean(e,n){return(n||this.getContext()).destroyBean(e)}destroyBeans(e,n){return e&&e.forEach(i=>this.destroyBean(i,n)),[]}}q.EVENT_DESTROYED="destroyed";yf([R("frameworkOverrides")],q.prototype,"frameworkOverrides",void 0);yf([R("context")],q.prototype,"context",void 0);yf([R("eventService")],q.prototype,"eventService",void 0);yf([R("gridOptionsService")],q.prototype,"gridOptionsService",void 0);yf([R("localeService")],q.prototype,"localeService",void 0);yf([R("environment")],q.prototype,"environment",void 0);yf([ur],q.prototype,"destroy",null);var y_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Ece=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};let ug=class extends q{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,n,i){const r=new Zue,{existingCols:s,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(i);r.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,n,s,r,o),u=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+u);const c=this.balanceColumnTree(l,0,u,r),d=(h,f)=>{h instanceof bt&&h.setupExpandable(),h.setOriginalParent(f)};return this.columnUtils.depthFirstOriginalTreeSearch(null,c,d),{columnTree:c,treeDept:u}}extractExistingTreeData(e){const n=[],i=[],r=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,s=>{if(s instanceof bt){const o=s;i.push(o)}else{const o=s;r.push(o.getId()),n.push(o)}}),{existingCols:n,existingGroups:i,existingColKeys:r}}createForAutoGroups(e,n){return e.map(i=>this.createAutoGroupTreeItem(n,i))}createAutoGroupTreeItem(e,n){const i=this.findDepth(e);let r=n;for(let s=i-1;s>=0;s--){const o=new bt(null,`FAKE_PATH_${n.getId()}}_${s}`,!0,s);this.createBean(o),o.setChildren([r]),r.setOriginalParent(o),r=o}return i===0&&n.setOriginalParent(null),r}findDepth(e){let n=0,i=e;for(;i&&i[0]&&i[0]instanceof bt;)n++,i=i[0].getChildren();return n}balanceColumnTree(e,n,i,r){const s=[];for(let o=0;o<e.length;o++){const a=e[o];if(a instanceof bt){const l=a,u=this.balanceColumnTree(l.getChildren(),n+1,i,r);l.setChildren(u),s.push(l)}else{let l,u;for(let c=i-1;c>=n;c--){const d=r.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),f=new bt(h,d,!0,n);this.createBean(f),u&&u.setChildren([f]),u=f,l||(l=u)}if(l&&u)if(s.push(l),e.some(d=>d instanceof bt)){u.setChildren([a]);continue}else{u.setChildren(e);break}s.push(a)}}return s}findMaxDept(e,n){let i=n;for(let r=0;r<e.length;r++){const s=e[r];if(s instanceof bt){const o=s,a=this.findMaxDept(o.getChildren(),n+1);i<a&&(i=a)}}return i}recursivelyCreateColumns(e,n,i,r,s,o){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const u=e[l];this.isColumnGroup(u)?a[l]=this.createColumnGroup(i,u,n,r,s,o):a[l]=this.createColumn(i,u,r,s)}return a}createColumnGroup(e,n,i,r,s,o){const a=this.createMergedColGroupDef(n),l=s.getUniqueKey(a.groupId||null,null),u=new bt(a,l,!1,i);this.createBean(u);const c=this.findExistingGroup(n,o);c&&zi(o,c),c&&c.isExpanded()&&u.setExpanded(!0);const d=this.recursivelyCreateColumns(a.children,i+1,e,r,s,o);return u.setChildren(d),u}createMergedColGroupDef(e){const n={};return Object.assign(n,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(n,e),n}createColumn(e,n,i,r){let s=this.findExistingColumn(n,i);if(i&&s&&zi(i,s),s){const o=this.addColumnDefaultAndTypes(n,s.getColId());s.setColDef(o,n),this.applyColumnState(s,o)}else{const o=r.getUniqueKey(n.colId,n.field),a=this.addColumnDefaultAndTypes(n,o);s=new Ge(a,n,o,e),this.context.createBean(s)}return this.dataTypeService.addColumnListeners(s),s}applyColumnState(e,n){const i=Vs(n.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){const a=Vs(n.width);if(a!=null)e.setActualWidth(a);else{const l=e.getActualWidth();e.setActualWidth(l)}}n.sort!==void 0&&(n.sort=="asc"||n.sort=="desc"?e.setSort(n.sort):e.setSort(void 0));const s=Vs(n.sortIndex);s!==void 0&&e.setSortIndex(s);const o=Pa(n.hide);o!==void 0&&e.setVisible(!o),n.pinned!==void 0&&e.setPinned(n.pinned)}findExistingColumn(e,n){if(n)for(let i=0;i<n.length;i++){const r=n[i].getUserProvidedColDef();if(!r)continue;if(e.colId!=null){if(n[i].getId()===e.colId)return n[i];continue}if(e.field!=null){if(r.field===e.field)return n[i];continue}if(r===e)return n[i]}}findExistingGroup(e,n){return n.find(i=>i.getColGroupDef()&&e.groupId!=null?i.getId()===e.groupId:!1)}addColumnDefaultAndTypes(e,n){const i={},r=this.gridOptionsService.get("defaultColDef");ds(i,r,!1,!0);const s=this.dataTypeService.updateColDefAndGetColumnType(i,e,n);s&&this.assignColumnTypes(s,i),ds(i,e,!1,!0);const o=this.gridOptionsService.get("autoGroupColumnDef"),a=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&o&&a&&ds(i,{sort:o.sort,initialSort:o.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(e,n){if(!e.length)return;const i=Object.assign({},hce),r=this.gridOptionsService.get("columnTypes")||{};qt(r,(s,o)=>{s in i?console.warn(`AG Grid: the column type '${s}' is a default column type and cannot be overridden.`):i[s]=o}),e.forEach(s=>{const o=i[s.trim()];o?ds(n,o,!1,!0):console.warn("AG Grid: colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};y_([R("columnUtils")],ug.prototype,"columnUtils",void 0);y_([R("dataTypeService")],ug.prototype,"dataTypeService",void 0);y_([Ece(0,Ar("loggerFactory"))],ug.prototype,"setBeans",null);ug=y_([me("columnFactory")],ug);var bce=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class xt{constructor(e,n,i,r){this.displayedChildren=[],this.localEventService=new Jo,this.groupId=n,this.partId=i,this.providedColumnGroup=e,this.pinned=r}static createUniqueId(e,n){return e+"_"+n}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return xt.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(n=>n.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof xt&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){const n=St(this.displayedChildren).getLeft();this.setLeft(n)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=e,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(xt.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,n){this.localEventService.addEventListener(e,n)}removeEventListener(e,n){this.localEventService.removeEventListener(e,n)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let n=!1;return this.children.forEach(i=>{e===i&&(n=!0),i instanceof xt&&i.isChildInThisGroupDeepSearch(e)&&(n=!0)}),n}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(n=>{e+=n.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(n=>{n.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(n=>{e+=n.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(n=>{n instanceof Ge?e.push(n):n instanceof xt&&n.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(n=>{n instanceof Ge?e.push(n):n instanceof xt&&n.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(xt.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(i=>{if(i instanceof xt&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.localEventService.dispatchEvent(this.createAgEvent(xt.EVENT_DISPLAYED_CHILDREN_CHANGED))}}xt.EVENT_LEFT_CHANGED="leftChanged";xt.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";bce([R("gridOptionsService")],xt.prototype,"gridOptionsService",void 0);let x=class{};x.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";x.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";x.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";x.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";x.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";x.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";x.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";x.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";x.EVENT_COLUMN_MOVED="columnMoved";x.EVENT_COLUMN_VISIBLE="columnVisible";x.EVENT_COLUMN_PINNED="columnPinned";x.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";x.EVENT_COLUMN_RESIZED="columnResized";x.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";x.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";x.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";x.EVENT_ROW_GROUP_OPENED="rowGroupOpened";x.EVENT_ROW_DATA_CHANGED="rowDataChanged";x.EVENT_ROW_DATA_UPDATED="rowDataUpdated";x.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";x.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";x.EVENT_CHART_CREATED="chartCreated";x.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";x.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";x.EVENT_CHART_DESTROYED="chartDestroyed";x.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";x.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";x.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";x.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";x.EVENT_MODEL_UPDATED="modelUpdated";x.EVENT_CUT_START="cutStart";x.EVENT_CUT_END="cutEnd";x.EVENT_PASTE_START="pasteStart";x.EVENT_PASTE_END="pasteEnd";x.EVENT_FILL_START="fillStart";x.EVENT_FILL_END="fillEnd";x.EVENT_RANGE_DELETE_START="rangeDeleteStart";x.EVENT_RANGE_DELETE_END="rangeDeleteEnd";x.EVENT_UNDO_STARTED="undoStarted";x.EVENT_UNDO_ENDED="undoEnded";x.EVENT_REDO_STARTED="redoStarted";x.EVENT_REDO_ENDED="redoEnded";x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";x.EVENT_CELL_CLICKED="cellClicked";x.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";x.EVENT_CELL_MOUSE_DOWN="cellMouseDown";x.EVENT_CELL_CONTEXT_MENU="cellContextMenu";x.EVENT_CELL_VALUE_CHANGED="cellValueChanged";x.EVENT_CELL_EDIT_REQUEST="cellEditRequest";x.EVENT_ROW_VALUE_CHANGED="rowValueChanged";x.EVENT_CELL_FOCUSED="cellFocused";x.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";x.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";x.EVENT_ROW_SELECTED="rowSelected";x.EVENT_SELECTION_CHANGED="selectionChanged";x.EVENT_TOOLTIP_SHOW="tooltipShow";x.EVENT_TOOLTIP_HIDE="tooltipHide";x.EVENT_CELL_KEY_DOWN="cellKeyDown";x.EVENT_CELL_MOUSE_OVER="cellMouseOver";x.EVENT_CELL_MOUSE_OUT="cellMouseOut";x.EVENT_FILTER_CHANGED="filterChanged";x.EVENT_FILTER_MODIFIED="filterModified";x.EVENT_FILTER_OPENED="filterOpened";x.EVENT_SORT_CHANGED="sortChanged";x.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";x.EVENT_ROW_CLICKED="rowClicked";x.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";x.EVENT_GRID_READY="gridReady";x.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";x.EVENT_VIEWPORT_CHANGED="viewportChanged";x.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";x.EVENT_FIRST_DATA_RENDERED="firstDataRendered";x.EVENT_DRAG_STARTED="dragStarted";x.EVENT_DRAG_STOPPED="dragStopped";x.EVENT_CHECKBOX_CHANGED="checkboxChanged";x.EVENT_ROW_EDITING_STARTED="rowEditingStarted";x.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";x.EVENT_CELL_EDITING_STARTED="cellEditingStarted";x.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";x.EVENT_BODY_SCROLL="bodyScroll";x.EVENT_BODY_SCROLL_END="bodyScrollEnd";x.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";x.EVENT_PAGINATION_CHANGED="paginationChanged";x.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";x.EVENT_STORE_REFRESHED="storeRefreshed";x.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";x.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";x.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";x.EVENT_FLASH_CELLS="flashCells";x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";x.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";x.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";x.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";x.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";x.EVENT_ROW_DRAG_ENTER="rowDragEnter";x.EVENT_ROW_DRAG_MOVE="rowDragMove";x.EVENT_ROW_DRAG_LEAVE="rowDragLeave";x.EVENT_ROW_DRAG_END="rowDragEnd";x.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";x.EVENT_POPUP_TO_FRONT="popupToFront";x.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";x.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";x.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";x.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";x.EVENT_KEYBOARD_FOCUS="keyboardFocus";x.EVENT_MOUSE_FOCUS="mouseFocus";x.EVENT_STORE_UPDATED="storeUpdated";x.EVENT_FILTER_DESTROYED="filterDestroyed";x.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";x.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";x.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";x.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";class xce{constructor(){this.existingIds={}}getInstanceIdForKey(e){const n=this.existingIds[e];let i;return typeof n!="number"?i=0:i=n+1,this.existingIds[e]=i,i}}var WN=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const gv="ag-Grid-AutoColumn";let mv=class extends q{createAutoGroupColumns(e){const n=[],i=this.gridOptionsService.isTreeData();let r=this.gridOptionsService.isGroupMultiAutoColumn();return i&&r&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),r=!1),r?e.forEach((s,o)=>{n.push(this.createOneAutoGroupColumn(s,o))}):n.push(this.createOneAutoGroupColumn()),n}updateAutoGroupColumns(e){e.forEach((n,i)=>this.updateOneAutoGroupColumn(n,i))}createOneAutoGroupColumn(e,n){let i;e?i=`${gv}-${e.getId()}`:i=gv;const r=this.createAutoGroupColDef(i,e,n);r.colId=i;const s=new Ge(r,null,i,!0);return this.context.createBean(s),s}updateOneAutoGroupColumn(e,n){const i=e.getColDef(),r=typeof i.showRowGroup=="string"?i.showRowGroup:void 0,s=r!=null?this.columnModel.getPrimaryColumn(r):void 0,o=this.createAutoGroupColDef(e.getId(),s??void 0,n);e.setColDef(o,null),this.columnFactory.applyColumnState(e,o)}createAutoGroupColDef(e,n,i){let r=this.createBaseColDef(n);const s=this.gridOptionsService.get("autoGroupColumnDef");ds(r,s),r=this.columnFactory.addColumnDefaultAndTypes(r,e),this.gridOptionsService.isTreeData()||Pe(r.field)&&Pe(r.valueGetter)&&Pe(r.filterValueGetter)&&r.filter!=="agGroupColumnFilter"&&(r.filter=!1),i&&i>0&&(r.headerCheckboxSelection=!1);const o=this.gridOptionsService.isColumnsSortingCoupledToGroup(),a=r.valueGetter||r.field!=null;return o&&!a&&(r.sortIndex=void 0,r.initialSort=void 0),r}createBaseColDef(e){const n=this.gridOptionsService.get("autoGroupColumnDef"),r={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(n&&(n.cellRenderer||n.cellRendererSelector)||(r.cellRenderer="agGroupCellRenderer"),e){const o=e.getColDef();Object.assign(r,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:o.headerValueGetter}),o.cellRenderer&&Object.assign(r,{cellRendererParams:{innerRenderer:o.cellRenderer,innerRendererParams:o.cellRendererParams}}),r.showRowGroup=e.getColId()}else r.showRowGroup=!0;return r}};WN([R("columnModel")],mv.prototype,"columnModel",void 0);WN([R("columnFactory")],mv.prototype,"columnFactory",void 0);mv=WN([me("autoGroupColService")],mv);const _ce=/[&<>"']/g,Rce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Tce(t){const e=String.fromCharCode;function n(d){const h=[];if(!d)return[];const f=d.length;let p=0,g,m;for(;p<f;)g=d.charCodeAt(p++),g>=55296&&g<=56319&&p<f?(m=d.charCodeAt(p++),(m&64512)==56320?h.push(((g&1023)<<10)+(m&1023)+65536):(h.push(g),p--)):h.push(g);return h}function i(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function r(d,h){return e(d>>h&63|128)}function s(d){if(d>=0&&d<=31&&d!==10)return`_x${d.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(d&4294967168))return e(d);let h="";return d&4294965248?d&4294901760?d&4292870144||(h=e(d>>18&7|240),h+=r(d,12),h+=r(d,6)):(i(d),h=e(d>>12&15|224),h+=r(d,6)):h=e(d>>6&31|192),h+=e(d&63|128),h}const o=n(t),a=o.length;let l=-1,u,c="";for(;++l<a;)u=o[l],c+=s(u);return c}function Ace(t){return t[0].toUpperCase()+t.substr(1).toLowerCase()}function bi(t,e){if(t==null)return null;const n=t.toString().toString();return e?n:n.replace(_ce,i=>Rce[i])}function pj(t){if(!t||t==null)return null;const e=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function gj(t){return t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}const Dce=Object.freeze(Object.defineProperty({__proto__:null,camelCaseToHumanText:pj,camelCaseToHyphenated:gj,capitalise:Ace,escapeString:bi,utf8_encode:Tce},Symbol.toStringTag,{value:"Module"}));function Hl(t){const e=new Map;return t.forEach(n=>e.set(n[0],n[1])),e}function Oce(t,e){const n=new Map;return t.forEach(i=>n.set(e(i),i)),n}function Pce(t){const e=[];return t.forEach((n,i)=>e.push(i)),e}const Fce=Object.freeze(Object.defineProperty({__proto__:null,convertToMap:Hl,keys:Pce,mapById:Oce},Symbol.toStringTag,{value:"Module"}));class WE{}WE.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0};WE.ALL_PROPERTIES=Object.keys(WE.ColDefPropertyMap);class It{}It.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator"];It.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent"];It.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"];It.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"];It.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideFilterAllLevels","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard","enableAdvancedFilter","includeHiddenColumnsInAdvancedFilter"];It.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer"];It.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","groupAggFiltering"];It.FUNCTION_PROPERTIES=[...It.FUNCTIONAL_PROPERTIES,...It.CALLBACK_PROPERTIES];It.ALL_PROPERTIES=[...It.ARRAY_PROPERTIES,...It.OBJECT_PROPERTIES,...It.STRING_PROPERTIES,...It.NUMBER_PROPERTIES,...It.FUNCTION_PROPERTIES,...It.BOOLEAN_PROPERTIES];class Fe{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substr(1)}static getCoercionLookup(){let e={};return[...Fe.ARRAY_PROPERTIES,...Fe.OBJECT_PROPERTIES,...Fe.STRING_PROPERTIES,...Fe.FUNCTION_PROPERTIES,...Fe.EVENT_CALLBACKS].forEach(n=>e[n]="none"),Fe.BOOLEAN_PROPERTIES.forEach(n=>e[n]="boolean"),Fe.NUMBER_PROPERTIES.forEach(n=>e[n]="number"),e}static getValue(e,n){const i=Fe.coercionLookup[e];if(i){let r=n;switch(i){case"number":{r=Fe.toNumber(n);break}case"boolean":{r=Fe.toBoolean(n);break}case"none":{e==="groupAggFiltering"&&typeof n!="function"&&(r=Fe.toBoolean(n));break}}return r}}static getGridOptionKeys(e,n){return Object.keys(n?Fe.coercionLookup:e)}static copyAttributesToGridOptions(e,n,i=!1){typeof e!="object"&&(e={});const r=e;return Fe.getGridOptionKeys(n,i).forEach(o=>{const a=n[o];if(typeof a<"u"){const l=Fe.getValue(o,a);l!==void 0&&(r[o]=l)}}),e}static processOnChange(e,n){if(!e||Object.keys(e).length===0)return;const i=Object.assign({},e);i.columnTypes&&(n.setColumnTypes(i.columnTypes.currentValue,"gridOptionsChanged"),delete i.columnTypes),i.autoGroupColumnDef&&(n.setAutoGroupColumnDef(i.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete i.autoGroupColumnDef),i.defaultColDef&&(n.setDefaultColDef(i.defaultColDef.currentValue,"gridOptionsChanged"),delete i.defaultColDef),i.columnDefs&&(n.setColumnDefs(i.columnDefs.currentValue,"gridOptionsChanged"),delete i.columnDefs),Object.keys(i).forEach(s=>{const o=s,a=Fe.getValue(o,i[o].currentValue);n.__setProperty(o,a)});const r={type:x.EVENT_COMPONENT_STATE_CHANGED};qt(e,(s,o)=>{r[s]=o}),n.dispatchEvent(r)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}static toNumber(e){if(typeof e=="number")return e;if(typeof e=="string")return Number(e)}}Fe.EVENTS=yh(x);Fe.EXCLUDED_INTERNAL_EVENTS=[x.EVENT_SCROLLBAR_WIDTH_CHANGED,x.EVENT_CHECKBOX_CHANGED,x.EVENT_HEIGHT_SCALE_CHANGED,x.EVENT_BODY_HEIGHT_CHANGED,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,x.EVENT_SCROLL_VISIBILITY_CHANGED,x.EVENT_COLUMN_HOVER_CHANGED,x.EVENT_FLASH_CELLS,x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,x.EVENT_DISPLAYED_ROWS_CHANGED,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,x.EVENT_POPUP_TO_FRONT,x.EVENT_KEYBOARD_FOCUS,x.EVENT_MOUSE_FOCUS,x.EVENT_STORE_UPDATED,x.EVENT_COLUMN_PANEL_ITEM_DRAG_START,x.EVENT_COLUMN_PANEL_ITEM_DRAG_END,x.EVENT_FILL_START,x.EVENT_FILL_END,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,x.EVENT_FULL_WIDTH_ROW_FOCUSED,x.EVENT_HEADER_HEIGHT_CHANGED,x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,x.EVENT_CELL_FOCUS_CLEARED,x.EVENT_GRID_STYLES_CHANGED,x.EVENT_FILTER_DESTROYED,x.EVENT_ROW_DATA_UPDATE_STARTED,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,x.EVENT_DATA_TYPES_INFERRED,x.EVENT_FIELD_VALUE_CHANGED,x.EVENT_FIELD_PICKER_VALUE_SELECTED];Fe.PUBLIC_EVENTS=Fe.EVENTS.filter(t=>!qs(Fe.EXCLUDED_INTERNAL_EVENTS,t));Fe.EVENT_CALLBACKS=Fe.EVENTS.map(t=>Fe.getCallbackForEvent(t));Fe.STRING_PROPERTIES=It.STRING_PROPERTIES;Fe.OBJECT_PROPERTIES=It.OBJECT_PROPERTIES;Fe.ARRAY_PROPERTIES=It.ARRAY_PROPERTIES;Fe.NUMBER_PROPERTIES=It.NUMBER_PROPERTIES;Fe.BOOLEAN_PROPERTIES=It.BOOLEAN_PROPERTIES;Fe.FUNCTION_PROPERTIES=It.FUNCTION_PROPERTIES;Fe.ALL_PROPERTIES=It.ALL_PROPERTIES;Fe.ALL_PROPERTIES_SET=new Set(It.ALL_PROPERTIES);Fe.coercionLookup=Fe.getCoercionLookup();function mj(t,e,n){const i={},r=t.filter(s=>!e.some(o=>o===s));return r.length>0&&r.forEach(s=>i[s]=A1(s,n)),i}function A1(t,e,n,i){let r=e.map(s=>({value:s,relevance:Mce(t.toLowerCase(),s.toLocaleLowerCase())}));if(r.sort((s,o)=>o.relevance-s.relevance),n&&(r=r.filter(s=>s.relevance!==0)),r.length>0&&i&&i>0){const o=r[0].relevance*i;r=r.filter(a=>o-a.relevance<0)}return r.map(s=>s.value)}function Mce(t,e){const n=t.replace(/\s/g,""),i=e.replace(/\s/g,"");let r=0,s=-1;for(let o=0;o<n.length;o++){const a=i.indexOf(n[o],s+1);a!==-1&&(s=a,r+=100-s*100/1e4*100)}return r}const Nce=Object.freeze(Object.defineProperty({__proto__:null,fuzzyCheckStrings:mj,fuzzySuggestions:A1},Symbol.toStringTag,{value:"Module"}));var v_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};function Hs(t,e,n,i){const r=n?`Please use '${n}' instead. `:"";et(()=>console.warn(`AG Grid: since v${t}, '${e}' is deprecated. ${r}${i??""}`),`Deprecated_${e}`)}const w4=["__ob__","__v_skip","__metadata__"];let cg=class{constructor(){this.deprecatedProperties={rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideOnlyRefreshFilteredGroups",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",newProp:"enterNavigatesVertically",copyToNewProp:!0},enterMovesDownAfterEdit:{version:"30",newProp:"enterNavigatesVerticallyAfterEdit",copyToNewProp:!0}}}pickOneWarning(e,n){console.warn(`AG Grid: ${e} and ${n} do not work with each other, you need to pick one.`)}init(){if(this.checkForDeprecated(),this.checkForViolations(),this.gridOptions.suppressPropertyNamesCheck!==!0&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.get("rowSelection")!=="multiple"&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){const n=(i,r)=>`AG Grid: '${i}' is not supported on the Server-Side Row Model.`+(r?` Please use ${r} instead.`:"");this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(n("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&this.gridOptionsService.is("suppressServerSideInfiniteScroll")&&console.warn(n("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(n("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?oe.__assertRegistered(pe.RangeSelectionModule,"enableRangeSelection",this.gridOptionsService.getGridId()):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");const e=(n,i)=>this.gridOptionsService.exists(n)&&oe.__assertRegistered(i,n,this.gridOptionsService.getGridId());e("sideBar",pe.SideBarModule),e("statusBar",pe.StatusBarModule),e("enableCharts",pe.GridChartsModule),e("getMainMenuItems",pe.MenuModule),e("getContextMenuItems",pe.MenuModule),e("allowContextMenuWithControlKey",pe.MenuModule),e("enableAdvancedFilter",pe.AdvancedFilterModule)}checkColumnDefProperties(){if(this.gridOptions.columnDefs==null)return;const e=WE.ALL_PROPERTIES,n=(i,r)=>{const s=Object.getOwnPropertyNames(i);this.checkProperties(s,[...e,...w4],e,r,"https://www.ag-grid.com/javascript-data-grid/column-properties/"),i.children&&i.children.forEach(o=>n(o,"columnDefs.children"))};this.gridOptions.columnDefs.forEach(i=>n(i,"columnDefs")),this.gridOptions.defaultColDef&&n(this.gridOptions.defaultColDef,"defaultColDef")}checkColumnDefViolations(){var e;const n=(e=this.gridOptionsService.get("rowModelType"))!==null&&e!==void 0?e:"clientSide",r={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]}[n];if(!(r!=null&&r.length))return;const s=o=>{r.forEach(a=>{a in o&&o[a]&&console.warn(`AG Grid: Column property ${a} is not supported with the row model type ${n}.`)})};this.gridOptions.columnDefs!=null&&this.gridOptions.columnDefs.forEach(o=>s(o)),this.gridOptions.autoGroupColumnDef!=null&&s(this.gridOptions.autoGroupColumnDef),this.gridOptions.defaultColDef!=null&&s(this.gridOptions.defaultColDef)}checkGridOptionsProperties(){const e=Object.getOwnPropertyNames(this.gridOptions),n=[...It.ALL_PROPERTIES,...Fe.EVENT_CALLBACKS],i=[...n,"api","columnApi",...w4,...Object.keys(this.deprecatedProperties)];this.checkProperties(e,i,n,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")}checkProperties(e,n,i,r,s){const o=mj(e,n,i);qt(o,(a,l)=>{et(()=>console.warn(`AG Grid: invalid ${r} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`),"invalidProperty"+r+a)}),Object.keys(o).length>0&&et(()=>console.warn(`AG Grid: to see all the valid ${r} properties please check: ${s}`),"invalidProperties"+r+s)}checkForDeprecated(){const e=this.gridOptions;Object.entries(this.deprecatedProperties).forEach(([n,i])=>{var r;const s=e[n];s&&(Hs(i.version,n,i.newProp,i.message),i.copyToNewProp&&i.newProp&&e[i.newProp]==null&&(e[i.newProp]=(r=i.newPropValue)!==null&&r!==void 0?r:s))}),e.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),e.suppressServerSideInfiniteScroll=e.serverSideStoreType!=="partial")}checkForViolations(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()}treeDataViolations(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))}};v_([R("gridOptions")],cg.prototype,"gridOptions",void 0);v_([R("gridOptionsService")],cg.prototype,"gridOptionsService",void 0);v_([Z],cg.prototype,"init",null);cg=v_([me("gridOptionsValidator")],cg);function Y2(t,e){const n=["groupRows","multipleColumns","custom","singleColumn"];return n.indexOf(e)<0?(console.warn(`AG Grid: '${e}' is not a valid groupDisplayType value - possible values are: '${n.join("', '")}'`),!1):e===t}function Lce(t,e){const n=["auto","custom"];return n.indexOf(e)<0?(console.warn(`AG Grid: '${e}' is not a valid treeDataDisplayType value - possible values are: '${n.join("', '")}'`),!1):e===t}var li=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Ice=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}},kce=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};let An=class extends q{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");const e=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.usingTreeData=this.gridOptionsService.isTreeData(),this.addManagedPropertyListener("groupDisplayType",()=>this.onGroupDisplayTypeChanged()),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.onAutoGroupColumnDefChanged()),this.addManagedPropertyListener("defaultColDef",n=>this.onSharedColDefChanged(n.source)),this.addManagedPropertyListener("columnTypes",n=>this.onSharedColDefChanged(n.source))}onGroupDisplayTypeChanged(){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged"))}onAutoGroupColumnDefChanged(){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns)}onSharedColDefChanged(e="api"){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns),this.createColumnsFromColumnDefs(!0,e)}setColumnDefs(e,n="api"){const i=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(i,n)}recreateColumnDefs(e="api"){this.onSharedColDefChanged(e)}destroyOldColumns(e,n){const i={};if(!e)return;this.columnUtils.depthFirstOriginalTreeSearch(null,e,s=>{i[s.getInstanceId()]=s}),n&&this.columnUtils.depthFirstOriginalTreeSearch(null,n,s=>{i[s.getInstanceId()]=null});const r=Object.values(i).filter(s=>s!=null);this.destroyBeans(r)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,n="api"){const i=e?this.compareColumnStatesAndDispatchEvents(n):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const r=this.primaryColumns,s=this.primaryColumnTree,o=this.columnFactory.createColumnTree(this.columnDefs,!0,s);this.destroyOldColumns(this.primaryColumnTree,o.columnTree),this.primaryColumnTree=o.columnTree,this.primaryHeaderRowCount=o.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(u=>this.primaryColumnsMap[u.getId()]=u),this.extractRowGroupColumns(n,r),this.extractPivotColumns(n,r),this.extractValueColumns(n,r),this.ready=!0;const a=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||a)&&(this.updateGridColumns(),e&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(n),this.checkViewportColumns()),this.dispatchEverythingChanged(n),i&&i(),this.dispatchNewColumnsLoaded(n)}dispatchNewColumnsLoaded(e){const n={type:x.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(n)}dispatchEverythingChanged(e="api"){const n={type:x.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(n)}orderGridColumnsLikePrimary(){const e=this.primaryColumns;if(!e)return;const n=e.filter(r=>this.gridColumns.indexOf(r)>=0),i=this.gridColumns.filter(r=>n.indexOf(r)<0);this.gridColumns=[...i,...n],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}getDisplayedColumnsStartingAt(e){let n=e;const i=[];for(;n!=null;)i.push(n),n=this.getDisplayedColAfter(n);return i}checkViewportColumns(){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const n={type:x.EVENT_VIRTUAL_COLUMNS_CHANGED};this.eventService.dispatchEvent(n)}setViewportPosition(e,n){(e!==this.scrollWidth||n!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=n,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return e&&this.gridOptionsService.isTreeData()?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0}setPivotMode(e,n="api"){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))return;this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(n);const i={type:x.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(e,n){if(Pe(this.secondaryColumns))return null;const i=this.getPrimaryColumn(n);let r=null;return this.secondaryColumns.forEach(s=>{const o=s.getColDef().pivotKeys,a=s.getColDef().pivotValueColumn;sc(o,e)&&a===i&&(r=s)}),r}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let n,i;this.gridOptionsService.is("enableRtl")?(n=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?St(this.displayedColumnsRight):null):(n=this.displayedColumnsLeft?St(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(r=>{r.setLastLeftPinned(r===n,e),r.setFirstRightPinned(r===i,e)})}autoSizeColumns(e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(e));return}const{columns:n,skipHeader:i,skipHeaderGroups:r,stopAtGroup:s,source:o="api"}=e;this.animationFrameService.flushAllFrames();const a=[];let l=-1;const u=i??this.gridOptionsService.is("skipHeaderOnAutoSize"),c=r??u;for(;l!==0;)l=0,this.actionOnGridColumns(n,d=>{if(a.indexOf(d)>=0)return!1;const h=this.autoWidthCalculator.getPreferredWidthForColumn(d,u);if(h>0){const f=this.normaliseColumnWidth(d,h);d.setActualWidth(f,o),a.push(d),l++}return!0},o);c||this.autoSizeColumnGroupsByColumns(n,o,s),this.dispatchColumnResizedEvent(a,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,n,i,r=null){if(e&&e.length){const s={type:x.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:r,finished:n,source:i};this.eventService.dispatchEvent(s)}}dispatchColumnChangedEvent(e,n,i){const r={type:e,columns:n,column:n&&n.length==1?n[0]:null,source:i};this.eventService.dispatchEvent(r)}dispatchColumnMovedEvent(e){const{movedColumns:n,source:i,toIndex:r,finished:s}=e,o={type:x.EVENT_COLUMN_MOVED,columns:n,column:n&&n.length===1?n[0]:null,toIndex:r,finished:s,source:i};this.eventService.dispatchEvent(o)}dispatchColumnPinnedEvent(e,n){if(!e.length)return;const i=e.length===1?e[0]:null,r=this.getCommonValue(e,o=>o.getPinned()),s={type:x.EVENT_COLUMN_PINNED,pinned:r??null,columns:e,column:i,source:n};this.eventService.dispatchEvent(s)}dispatchColumnVisibleEvent(e,n){if(!e.length)return;const i=e.length===1?e[0]:null,r=this.getCommonValue(e,o=>o.isVisible()),s={type:x.EVENT_COLUMN_VISIBLE,visible:r,columns:e,column:i,source:n};this.eventService.dispatchEvent(s)}autoSizeColumn(e,n,i="api"){e&&this.autoSizeColumns({columns:[e],skipHeader:n,skipHeaderGroups:!0,source:i})}autoSizeColumnGroupsByColumns(e,n,i){const r=new Set;this.getGridColumns(e).forEach(l=>{let u=l.getParent();for(;u&&u!=i;)u.isPadding()||r.add(u),u=u.getParent()});let o;const a=[];for(const l of r){for(const u of this.ctrlsService.getHeaderRowContainerCtrls())if(o=u.getHeaderCtrlForColumn(l),o)break;o&&o.resizeLeafColumnsToFit(n)}return a}autoSizeAllColumns(e,n="api"){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(e,n));return}const i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:n})}getColumnsFromTree(e){const n=[],i=r=>{for(let s=0;s<r.length;s++){const o=r[s];o instanceof Ge?n.push(o):o instanceof bt&&i(o.getChildren())}};return i(e),n}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,n,i,r){const s=[];let o=null;for(let a=0;a<n.length;a++){const l=n[a],u=n.length-a,c=Math.min(l.getColSpan(e),u),d=[l];if(c>1){const f=c-1;for(let p=1;p<=f;p++)d.push(n[a+p]);a+=f}let h;i?(h=!1,d.forEach(f=>{i(f)&&(h=!0)})):h=!0,h&&(s.length===0&&o&&(r&&r(l))&&s.push(o),s.push(l)),o=l}return s}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const n=r=>{const s=r.getLeft();return B(s)&&s>this.viewportLeft},i=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,i,n)}getAriaColumnIndex(e){return this.getAllGridColumns().indexOf(e)+1}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const n=e.getLeft()||0,i=n+e.getActualWidth(),r=this.viewportLeft-200,s=this.viewportRight+200,o=n<r&&i<r,a=n>s&&i>s;return!o&&!a}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,n,i,r,s,o="api"){if(!e||ls(e))return;let a=!1;if(e.forEach(u=>{const c=this.getPrimaryColumn(u);if(c){if(i){if(n.indexOf(c)>=0)return;n.push(c)}else{if(n.indexOf(c)<0)return;zi(n,c)}r(c),a=!0}}),!a)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o);const l={type:s,columns:n,column:n.length===1?n[0]:null,source:o};this.eventService.dispatchEvent(l)}setRowGroupColumns(e,n="api"){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,x.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),n)}setRowGroupActive(e,n,i){e!==n.isRowGroupActive()&&(n.setRowGroupActive(e,i),e&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(n,!1,i),!e&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(n,!0,i))}addRowGroupColumn(e,n="api"){e&&this.addRowGroupColumns([e],n)}addRowGroupColumns(e,n="api"){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),x.EVENT_COLUMN_ROW_GROUP_CHANGED,n)}removeRowGroupColumns(e,n="api"){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),x.EVENT_COLUMN_ROW_GROUP_CHANGED,n)}removeRowGroupColumn(e,n="api"){e&&this.removeRowGroupColumns([e],n)}addPivotColumns(e,n="api"){this.updatePrimaryColumnList(e,this.pivotColumns,!0,i=>i.setPivotActive(!0,n),x.EVENT_COLUMN_PIVOT_CHANGED,n)}setPivotColumns(e,n="api"){this.setPrimaryColumnList(e,this.pivotColumns,x.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,r)=>{r.setPivotActive(i,n)},n)}addPivotColumn(e,n="api"){this.addPivotColumns([e],n)}removePivotColumns(e,n="api"){this.updatePrimaryColumnList(e,this.pivotColumns,!1,i=>i.setPivotActive(!1,n),x.EVENT_COLUMN_PIVOT_CHANGED,n)}removePivotColumn(e,n="api"){this.removePivotColumns([e],n)}setPrimaryColumnList(e,n,i,r,s,o){const a=new Map;n.forEach((l,u)=>a.set(l,u)),n.length=0,B(e)&&e.forEach(l=>{const u=this.getPrimaryColumn(l);u&&n.push(u)}),n.forEach((l,u)=>{const c=a.get(l);if(c===void 0){a.set(l,0);return}r&&c!==u||a.delete(l)}),(this.primaryColumns||[]).forEach(l=>{const u=n.indexOf(l)>=0;s(u,l)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o),this.dispatchColumnChangedEvent(i,[...a.keys()],o)}setValueColumns(e,n="api"){this.setPrimaryColumnList(e,this.valueColumns,x.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),n)}setValueActive(e,n,i){if(e!==n.isValueActive()&&(n.setValueActive(e,i),e&&!n.getAggFunc())){const r=this.aggFuncService.getDefaultAggFunc(n);n.setAggFunc(r)}}addValueColumns(e,n="api"){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),x.EVENT_COLUMN_VALUE_CHANGED,n)}addValueColumn(e,n="api"){e&&this.addValueColumns([e],n)}removeValueColumn(e,n="api"){this.removeValueColumns([e],n)}removeValueColumns(e,n="api"){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),x.EVENT_COLUMN_VALUE_CHANGED,n)}normaliseColumnWidth(e,n){const i=e.getMinWidth();B(i)&&n<i&&(n=i);const r=e.getMaxWidth();return B(r)&&e.isGreaterThanMax(n)&&(n=r),n}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,n,i,r="api"){const s=[];e.forEach(o=>{const a=this.getPrimaryOrGridColumn(o.key);if(!a)return;if(s.push({width:o.newWidth,ratios:[1],columns:[a]}),this.gridOptionsService.get("colResizeDefault")==="shift"&&(n=!n),n){const u=this.getDisplayedColAfter(a);if(!u)return;const c=a.getActualWidth()-o.newWidth,d=u.getActualWidth()+c;s.push({width:d,ratios:[1],columns:[u]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:i,source:r})}checkMinAndMaxWidthsForSet(e){const{columns:n,width:i}=e;let r=0,s=0,o=!0;n.forEach(u=>{const c=u.getMinWidth();r+=c||0;const d=u.getMaxWidth();B(d)&&d>0?s+=d:o=!1});const a=i>=r,l=!o||i<=s;return a&&l}resizeColumnSets(e){const{resizeSets:n,finished:i,source:r}=e;if(!(!n||n.every(d=>this.checkMinAndMaxWidthsForSet(d)))){if(i){const d=n&&n.length>0?n[0].columns:null;this.dispatchColumnResizedEvent(d,i,r)}return}const o=[],a=[];n.forEach(d=>{const{width:h,columns:f,ratios:p}=d,g={},m={};f.forEach(C=>a.push(C));let y=!0,v=0;for(;y;){if(v++,v>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}y=!1;const C=[];let w=0,E=h;f.forEach((S,_)=>{if(m[S.getId()])E-=g[S.getId()];else{C.push(S);const D=p[_];w+=D}});const b=1/w;C.forEach((S,_)=>{const A=_===C.length-1;let D;A?D=E:(D=Math.round(p[_]*h*b),E-=D);const P=S.getMinWidth(),L=S.getMaxWidth();B(P)&&D<P?(D=P,m[S.getId()]=!0,y=!0):B(L)&&L>0&&D>L&&(D=L,m[S.getId()]=!0,y=!0),g[S.getId()]=D})}f.forEach(C=>{const w=g[C.getId()];C.getActualWidth()!==w&&(C.setActualWidth(w,r),o.push(C))})});const l=o.length>0;let u=[];l&&(u=this.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}),this.setLeftValues(r),this.updateBodyWidths(),this.checkViewportColumns());const c=a.concat(u);(l||i)&&this.dispatchColumnResizedEvent(c,i,r,u)}setColumnAggFunc(e,n,i="api"){if(!e)return;const r=this.getPrimaryColumn(e);r&&(r.setAggFunc(n),this.dispatchColumnChangedEvent(x.EVENT_COLUMN_VALUE_CHANGED,[r],i))}moveRowGroupColumn(e,n,i="api"){const r=this.rowGroupColumns[e],s=this.rowGroupColumns.slice(e,n);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(n,0,r);const o={type:x.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:s,column:s.length===1?s[0]:null,source:i};this.eventService.dispatchEvent(o)}moveColumns(e,n,i="api",r=!0){if(this.columnAnimationService.start(),n>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+n),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const s=this.getGridColumns(e);this.doesMovePassRules(s,n)&&(U2(this.gridColumns,s,n),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:s,source:i,toIndex:n,finished:r}),this.columnAnimationService.finish())}doesMovePassRules(e,n){const i=this.getProposedColumnOrder(e,n);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,n){const i=this.gridColumns.slice();return U2(i,e,n),i}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(i=>this.gridColumns.indexOf(i)<0).length>0||e.sort((i,r)=>{const s=this.gridColumns.indexOf(i),o=this.gridColumns.indexOf(r);return s-o})}doesMovePassLockedPositions(e){let n=0,i=!0;const r=s=>s?s===!0||s==="left"?0:2:1;return e.forEach(s=>{const o=r(s.getColDef().lockPosition);o<n&&(i=!1),n=o}),i}doesMovePassMarryChildren(e){let n=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{if(!(i instanceof bt))return;const r=i,s=r.getColGroupDef();if(!(s&&s.marryChildren))return;const a=[];r.getLeafColumns().forEach(h=>{const f=e.indexOf(h);a.push(f)});const l=Math.max.apply(Math,a),u=Math.min.apply(Math,a),c=l-u,d=r.getLeafColumns().length-1;c>d&&(n=!1)}),n}moveColumn(e,n,i="api"){this.moveColumns([e],n,i)}moveColumnByIndex(e,n,i="api"){const r=this.gridColumns[e];this.moveColumn(r,n,i)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((n,i)=>this.gridColumns.indexOf(n)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&e.sort((n,i)=>this.lastPrimaryOrder.indexOf(n)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),n=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==n||this.rightWidth!==i){this.bodyWidth=e,this.leftWidth=n,this.rightWidth=i;const s={type:x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(s)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getDisplayedColumns(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns.slice():null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns.slice():null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){return this.gridColumns}isEmpty(){return ls(this.gridColumns)}isRowGroupEmpty(){return ls(this.rowGroupColumns)}setColumnVisible(e,n,i="api"){this.setColumnsVisible([e],n,i)}setColumnsVisible(e,n=!1,i="api"){this.applyColumnState({state:e.map(r=>({colId:typeof r=="string"?r:r.getColId(),hide:!n}))},i)}setColumnPinned(e,n,i="api"){e&&this.setColumnsPinned([e],n,i)}setColumnsPinned(e,n,i="api"){if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let r;n===!0||n==="left"?r="left":n==="right"?r="right":r=null,this.actionOnGridColumns(e,s=>s.getPinned()!==r?(s.setPinned(r),!0):!1,i,()=>({type:x.EVENT_COLUMN_PINNED,pinned:r,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(e,n,i,r){if(ls(e))return;const s=[];if(e.forEach(o=>{const a=this.getGridColumn(o);if(!a)return;n(a)!==!1&&s.push(a)}),!!s.length&&(this.updateDisplayedColumns(i),B(r)&&r)){const o=r();o.columns=s,o.column=s.length===1?s[0]:null,this.eventService.dispatchEvent(o)}}getDisplayedColBefore(e){const n=this.getAllDisplayedColumns(),i=n.indexOf(e);return i>0?n[i-1]:null}getDisplayedColAfter(e){const n=this.getAllDisplayedColumns(),i=n.indexOf(e);return i<n.length-1?n[i+1]:null}getDisplayedGroupAfter(e){return this.getDisplayedGroupAtDirection(e,"After")}getDisplayedGroupBefore(e){return this.getDisplayedGroupAtDirection(e,"Before")}getDisplayedGroupAtDirection(e,n){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),r=e.getDisplayedLeafColumns(),s=n==="After"?St(r):r[0],o=`getDisplayedCol${n}`;for(;;){const a=this[o](s);if(!a)return null;const l=this.getColumnGroupAtLevel(a,i);if(l!==e)return l}}getColumnGroupAtLevel(e,n){let i=e.getParent(),r,s;for(;r=i.getProvidedColumnGroup().getLevel(),s=i.getPaddingLevel(),!(r+s<=n);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const n=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,s=e.getSort()!=null?e.getSort():null,o=e.getSortIndex()!=null?e.getSortIndex():null,a=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:o,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:n,pivot:e.isPivotActive(),pivotIndex:i,flex:a}}getColumnState(){if(Pe(this.primaryColumns)||!this.isAlive())return[];const n=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(n),n}orderColumnStateList(e){const n=Hl(this.gridColumns.map((i,r)=>[i.getColId(),r]));e.sort((i,r)=>{const s=n.has(i.colId)?n.get(i.colId):-1,o=n.has(r.colId)?n.get(r.colId):-1;return s-o})}resetColumnState(e="api"){const n=this.getColumnsFromTree(this.primaryColumnTree),i=[];let r=1e3,s=1e3,o=[];this.groupAutoColumns&&(o=o.concat(this.groupAutoColumns)),n&&(o=o.concat(n)),o.forEach(a=>{const l=this.getColumnStateFromColDef(a);Pe(l.rowGroupIndex)&&l.rowGroup&&(l.rowGroupIndex=r++),Pe(l.pivotIndex)&&l.pivot&&(l.pivotIndex=s++),i.push(l)}),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const n=(g,m)=>g??m??null,i=e.getColDef(),r=n(i.sort,i.initialSort),s=n(i.sortIndex,i.initialSortIndex),o=n(i.hide,i.initialHide),a=n(i.pinned,i.initialPinned),l=n(i.width,i.initialWidth),u=n(i.flex,i.initialFlex);let c=n(i.rowGroupIndex,i.initialRowGroupIndex),d=n(i.rowGroup,i.initialRowGroup);c==null&&(d==null||d==!1)&&(c=null,d=null);let h=n(i.pivotIndex,i.initialPivotIndex),f=n(i.pivot,i.initialPivot);h==null&&(f==null||f==!1)&&(h=null,f=null);const p=n(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:r,sortIndex:s,hide:o,pinned:a,width:l,flex:u,rowGroup:d,rowGroupIndex:c,pivot:f,pivotIndex:h,aggFunc:p}}applyColumnState(e,n){if(ls(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const i=(o,a,l)=>{const u=this.compareColumnStatesAndDispatchEvents(n);this.autoGroupsNeedBuilding=!0;const c=a.slice(),d={},h={},f=[],p=[];let g=0;const m=this.rowGroupColumns.slice(),y=this.pivotColumns.slice();o.forEach(E=>{const b=E.colId||"";if(b.startsWith(gv)){f.push(E),p.push(E);return}const _=l(b);_?(this.syncColumnWithStateItem(_,E,e.defaultState,d,h,!1,n),zi(c,_)):(p.push(E),g+=1)});const v=E=>this.syncColumnWithStateItem(E,null,e.defaultState,d,h,!1,n);c.forEach(v);const C=(E,b,S,_)=>{const A=E[S.getId()],D=E[_.getId()],P=A!=null,L=D!=null;if(P&&L)return A-D;if(P)return-1;if(L)return 1;const O=b.indexOf(S),M=b.indexOf(_),F=O>=0,I=M>=0;return F&&I?O-M:F?-1:1};this.rowGroupColumns.sort(C.bind(this,d,m)),this.pivotColumns.sort(C.bind(this,h,y)),this.updateGridColumns();const w=this.groupAutoColumns?this.groupAutoColumns.slice():[];return f.forEach(E=>{const b=this.getAutoColumn(E.colId);zi(w,b),this.syncColumnWithStateItem(b,E,e.defaultState,null,null,!0,n)}),w.forEach(v),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(n),this.dispatchEverythingChanged(n),u(),{unmatchedAndAutoStates:p,unmatchedCount:g}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:s}=i(e.state||[],this.primaryColumns||[],o=>this.getPrimaryColumn(o));return(r.length>0||B(e.defaultState))&&(s=i(r,this.secondaryColumns||[],o=>this.getSecondaryColumn(o)).unmatchedCount),this.columnAnimationService.finish(),s===0}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let n=[];const i={};e.state.forEach(s=>{if(!s.colId||i[s.colId])return;const o=this.gridColumnsMap[s.colId];o&&(n.push(o),i[s.colId]=!0)});let r=0;if(this.gridColumns.forEach(s=>{const o=s.getColId();if(i[o]!=null)return;o.startsWith(gv)?pv(n,s,r++):n.push(s)}),n=this.placeLockedColumns(n),!this.doesMovePassMarryChildren(n)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=n}compareColumnStatesAndDispatchEvents(e){const n={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),r={};return i.forEach(s=>{r[s.colId]=s}),()=>{const s=this.getPrimaryAndSecondaryAndAutoColumns(),o=(g,m,y,v)=>{const C=m.map(v),w=y.map(v);if(sc(C,w))return;const b=new Set(m);y.forEach(A=>{b.delete(A)||b.add(A)});const S=[...b],_={type:g,columns:S,column:S.length===1?S[0]:null,source:e};this.eventService.dispatchEvent(_)},a=g=>{const m=[];return s.forEach(y=>{const v=r[y.getColId()];v&&g(v,y)&&m.push(y)}),m},l=g=>g.getColId();o(x.EVENT_COLUMN_ROW_GROUP_CHANGED,n.rowGroupColumns,this.rowGroupColumns,l),o(x.EVENT_COLUMN_PIVOT_CHANGED,n.pivotColumns,this.pivotColumns,l);const c=a((g,m)=>{const y=g.aggFunc!=null,v=y!=m.isValueActive(),C=y&&g.aggFunc!=m.getAggFunc();return v||C});c.length>0&&this.dispatchColumnChangedEvent(x.EVENT_COLUMN_VALUE_CHANGED,c,e);const d=(g,m)=>g.width!=m.getActualWidth();this.dispatchColumnResizedEvent(a(d),!0,e);const h=(g,m)=>g.pinned!=m.getPinned();this.dispatchColumnPinnedEvent(a(h),e);const f=(g,m)=>g.hide==m.isVisible();this.dispatchColumnVisibleEvent(a(f),e),a((g,m)=>g.sort!=m.getSort()||g.sortIndex!=m.getSortIndex()).length>0&&this.sortController.dispatchSortChangedEvents(e),this.normaliseColumnMovedEventForColumnState(i,e)}}getCommonValue(e,n){if(!e||e.length==0)return;const i=n(e[0]);for(let r=1;r<e.length;r++)if(i!==n(e[r]))return;return i}normaliseColumnMovedEventForColumnState(e,n){const i=this.getColumnState(),r={};i.forEach(u=>r[u.colId]=u);const s={};e.forEach(u=>{r[u.colId]&&(s[u.colId]=!0)});const o=e.filter(u=>s[u.colId]),a=i.filter(u=>s[u.colId]),l=[];a.forEach((u,c)=>{const d=o&&o[c];if(d&&d.colId!==u.colId){const h=this.getGridColumn(d.colId);h&&l.push(h)}}),l.length&&this.dispatchColumnMovedEvent({movedColumns:l,source:n,finished:!0})}syncColumnWithStateItem(e,n,i,r,s,o,a){if(!e)return;const l=(E,b)=>{const S={value1:void 0,value2:void 0};let _=!1;return n&&(n[E]!==void 0&&(S.value1=n[E],_=!0),B(b)&&n[b]!==void 0&&(S.value2=n[b],_=!0)),!_&&i&&(i[E]!==void 0&&(S.value1=i[E]),B(b)&&i[b]!==void 0&&(S.value2=i[b])),S},u=l("hide").value1;u!==void 0&&e.setVisible(!u,a);const c=l("pinned").value1;c!==void 0&&e.setPinned(c);const d=this.columnUtils.calculateColMinWidth(e.getColDef()),h=l("flex").value1;if(h!==void 0&&e.setFlex(h),e.getFlex()<=0){const E=l("width").value1;E!=null&&d!=null&&E>=d&&e.setActualWidth(E,a)}const p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,a):e.setSort(void 0,a));const g=l("sortIndex").value1;if(g!==void 0&&e.setSortIndex(g),o||!e.isPrimary())return;const m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,a),this.valueColumns.push(e))):(B(m)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,a),zi(this.valueColumns,e))));const{value1:y,value2:v}=l("rowGroup","rowGroupIndex");(y!==void 0||v!==void 0)&&(typeof v=="number"||y?(e.isRowGroupActive()||(e.setRowGroupActive(!0,a),this.rowGroupColumns.push(e)),r&&typeof v=="number"&&(r[e.getId()]=v)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,a),zi(this.rowGroupColumns,e)));const{value1:C,value2:w}=l("pivot","pivotIndex");(C!==void 0||w!==void 0)&&(typeof w=="number"||C?(e.isPivotActive()||(e.setPivotActive(!0,a),this.pivotColumns.push(e)),s&&typeof w=="number"&&(s[e.getId()]=w)):e.isPivotActive()&&(e.setPivotActive(!1,a),zi(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,n){const i=[];return e&&e.forEach(r=>{const s=n(r);s&&i.push(s)}),i}getColumnWithValidation(e){if(e==null)return null;const n=this.getGridColumn(e);return n||console.warn("AG Grid: could not find column "+e),n}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,n,i){if(!e)return null;if(typeof e=="string"&&i[e])return i[e];for(let r=0;r<n.length;r++)if(this.columnsMatch(n[r],e))return n[r];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const n=e.getColDef().showRowGroup;if(!n)return null;if(n===!0)return this.rowGroupColumns.slice(0);const i=this.getPrimaryColumn(n);return i?[i]:null}getAutoColumn(e){return!this.groupAutoColumns||!B(this.groupAutoColumns)||Pe(this.groupAutoColumns)?null:this.groupAutoColumns.find(n=>this.columnsMatch(n,e))||null}columnsMatch(e,n){const i=e===n,r=e.getColDef()===n,s=e.getColId()==n;return i||r||s}getDisplayNameForColumn(e,n,i=!1){if(!e)return null;const r=this.getHeaderName(e.getColDef(),e,null,null,n);return i?this.wrapHeaderNameWithAggFunc(e,r):r}getDisplayNameForProvidedColumnGroup(e,n,i){const r=n?n.getColGroupDef():null;return r?this.getHeaderName(r,null,e,n,i):null}getDisplayNameForColumnGroup(e,n){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),n)}getHeaderName(e,n,i,r,s){const o=e.headerValueGetter;if(o){const a={colDef:e,column:n,columnGroup:i,providedColumnGroup:r,location:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return typeof o=="function"?o(a):typeof o=="string"?this.expressionService.evaluate(o,a):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return pj(e.field)}return""}wrapHeaderNameWithAggFunc(e,n){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return n;const i=e.getColDef().pivotValueColumn,r=B(i);let s=null,o;if(r){const a=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return n;s=i?i.getAggFunc():null,o=!0}else{const a=e.isValueActive(),l=this.pivotMode||!this.isRowGroupEmpty();a&&l?(s=e.getAggFunc(),o=!0):o=!1}if(o){const a=typeof s=="string"?s:"func";return`${this.localeService.getLocaleTextFunc()(a,a)}(${n})`}return n}getColumnGroup(e,n){if(!e)return null;if(e instanceof xt)return e;const i=this.getAllDisplayedTrees(),r=typeof n=="number";let s=null;return this.columnUtils.depthFirstAllColumnTreeSearch(i,o=>{if(o instanceof xt){const a=o;let l;r?l=e===a.getGroupId()&&n===a.getPartId():l=e===a.getGroupId(),l&&(s=a)}}),s}isReady(){return this.ready}extractValueColumns(e,n){this.valueColumns=this.extractColumns(n,this.valueColumns,(i,r)=>i.setValueActive(r,e),()=>{},()=>{},i=>{const r=i.aggFunc;if(r===null||r==="")return null;if(r!==void 0)return!!r},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{const r=i.getColDef();r.aggFunc!=null&&r.aggFunc!=""?i.setAggFunc(r.aggFunc):i.getAggFunc()||i.setAggFunc(r.initialAggFunc)})}extractRowGroupColumns(e,n){this.rowGroupColumns=this.extractColumns(n,this.rowGroupColumns,(i,r)=>i.setRowGroupActive(r,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(e=[],n=[],i,r,s,o,a){const l=[],u=[];(this.primaryColumns||[]).forEach(h=>{const f=e.indexOf(h)<0,p=h.getColDef(),g=Pa(o(p)),m=Pa(a(p)),y=Vs(r(p)),v=Vs(s(p));let C;g!==void 0?C=g:y!==void 0?y===null?C=!1:C=y>=0:f?m!==void 0?C=m:v!==void 0?C=v!=null&&v>=0:C=!1:C=n.indexOf(h)>=0,C&&((f?y!=null||v!=null:y!=null)?l.push(h):u.push(h))});const c=h=>{const f=r(h.getColDef()),p=s(h.getColDef());return f??p};l.sort((h,f)=>{const p=c(h),g=c(f);return p===g?0:p<g?-1:1});const d=[].concat(l);return n.forEach(h=>{u.indexOf(h)>=0&&d.push(h)}),u.forEach(h=>{d.indexOf(h)<0&&d.push(h)}),n.forEach(h=>{d.indexOf(h)<0&&i(h,!1)}),d.forEach(h=>{n.indexOf(h)<0&&i(h,!0)}),d}extractPivotColumns(e,n){this.pivotColumns=this.extractColumns(n,this.pivotColumns,(i,r)=>i.setPivotActive(r,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(e="api"){const n=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,i=>{if(i instanceof bt){const r=i.getColGroupDef(),s={groupId:i.getGroupId(),open:r?r.openByDefault:void 0};n.push(s)}}),this.setColumnGroupState(n,e)}getColumnGroupState(){const e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,n=>{n instanceof bt&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}setColumnGroupState(e,n="api"){this.columnAnimationService.start();const i=[];e.forEach(r=>{const s=r.groupId,o=r.open,a=this.getProvidedColumnGroup(s);a&&a.isExpanded()!==o&&(this.logger.log("columnGroupOpened("+a.getGroupId()+","+o+")"),a.setExpanded(o),i.push(a))}),this.updateGroupsAndDisplayedColumns(n),this.setFirstRightAndLastLeftPinned(n),i.forEach(r=>{const s={type:x.EVENT_COLUMN_GROUP_OPENED,columnGroup:r};this.eventService.dispatchEvent(s)}),this.columnAnimationService.finish()}setColumnGroupOpened(e,n,i="api"){let r;e instanceof bt?r=e.getId():r=e||"",this.setColumnGroupState([{groupId:r,open:n}],i)}getProvidedColumnGroup(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");let n=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{i instanceof bt&&i.getId()===e&&(n=i)}),n}calculateColumnsForDisplay(){let e;return this.pivotMode&&Pe(this.secondaryColumns)?e=this.gridColumns.filter(n=>{const i=this.groupAutoColumns&&qs(this.groupAutoColumns,n),r=this.valueColumns&&qs(this.valueColumns,n);return i||r}):e=this.gridColumns.filter(n=>this.groupAutoColumns&&qs(this.groupAutoColumns,n)||n.isVisible()),e}checkColSpanActiveInCols(e){let n=!1;return e.forEach(i=>{B(i.getColDef().colSpan)&&(n=!0)}),n}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const e=n=>{const i=n.getColDef(),r=i.showRowGroup;i&&B(r)&&(this.groupDisplayColumns.push(n),typeof r=="string"?this.groupDisplayColumnsMap[r]=n:r===!0&&this.getRowGroupColumns().forEach(s=>{this.groupDisplayColumnsMap[s.getId()]=n}))};this.gridColumns.forEach(e)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const n=this.calculateColumnsForDisplay();this.buildDisplayedTrees(n),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return B(this.secondaryColumns)}setSecondaryColumns(e,n="api"){const i=e&&e.length>0;if(!(!i&&Pe(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(e);const r=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,r.columnTree),this.secondaryBalancedTree=r.columnTree,this.secondaryHeaderRowCount=r.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(s=>this.secondaryColumnsMap[s.getId()]=s),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(n)}}processSecondaryColumnDefinitions(e){const n=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),i=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(!n&&!i)return;const r=s=>{s.forEach(o=>{if(B(o.children)){const l=o;i&&i(l),r(l.children)}else n&&n(o)})};e&&r(e)}updateGridColumns(){const e=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;let n;if(this.secondaryColumns&&this.secondaryBalancedTree){const r=this.secondaryColumns.every(s=>this.gridColumnsMap[s.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,r&&(n=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,n=this.lastPrimaryOrder);if(this.createGroupAutoColumnsIfNeeded()&&n){const r=Hl(this.groupAutoColumns.map(s=>[s,!0]));n=n.filter(s=>!r.has(s)),n=[...this.groupAutoColumns,...n]}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(n),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(r=>this.gridColumnsMap[r.getId()]=r),this.setAutoHeightActive(),!sc(e,this.gridBalancedTree)){const r={type:x.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(r)}}setAutoHeightActive(){if(this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,!(this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")))){const n="AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";et(()=>console.warn(n),"autoHeightActive.wrongRowModel")}}orderGridColsLike(e){if(Pe(e))return;const n=Hl(e.map((u,c)=>[u,c]));let i=!0;if(this.gridColumns.forEach(u=>{n.has(u)&&(i=!1)}),i)return;const r=Hl(this.gridColumns.map(u=>[u,!0])),s=e.filter(u=>r.has(u)),o=Hl(s.map(u=>[u,!0])),a=this.gridColumns.filter(u=>!o.has(u)),l=s.slice();a.forEach(u=>{let c=u.getOriginalParent();if(!c){l.push(u);return}const d=[];for(;!d.length&&c;)c.getLeafColumns().forEach(g=>{const m=l.indexOf(g)>=0,y=d.indexOf(g)<0;m&&y&&d.push(g)}),c=c.getOriginalParent();if(!d.length){l.push(u);return}const h=d.map(p=>l.indexOf(p)),f=Math.max(...h);pv(l,u,f+1)}),this.gridColumns=l}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let n=(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!==null&&e!==void 0?e:[];this.groupAutoColumns&&(n=n.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")?n:n.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(e){const n=[],i=[],r=[];return e.forEach(s=>{const o=s.getColDef().lockPosition;o==="right"?r.push(s):o==="left"||o===!0?n.push(s):i.push(s)}),[...n,...i,...r]}addAutoGroupToGridColumns(){if(Pe(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const n={type:x.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(n)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(n=>n.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinDisplayedColumns(){this.gridOptionsService.is("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const n=this.primaryColumns.slice(0),i=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(r=>{if(i){let s=this.getWidthOfColsInList(r);r.forEach(o=>{s-=o.getActualWidth(),o.setLeft(s,e)})}else{let s=0;r.forEach(o=>{o.setLeft(s,e),s+=o.getActualWidth()})}aj(n,r)}),n.forEach(r=>{r.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(n=>{n instanceof xt&&n.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,n){n.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,i=>{i instanceof Ge&&n.push(i)})}extractViewportColumns(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,n){let i;switch(e){case"left":i=this.viewportRowLeft[n];break;case"right":i=this.viewportRowRight[n];break;default:i=this.viewportRowCenter[n];break}return Pe(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach(i=>e[i.getId()]=!0);const n=(i,r,s)=>{let o=!1;for(let a=0;a<i.length;a++){const l=i[a];let u=!1;if(l instanceof Ge)u=e[l.getId()]===!0;else{const d=l.getDisplayedChildren();d&&(u=n(d,r,s+1))}u&&(o=!0,r[s]||(r[s]=[]),r[s].push(l))}return o};n(this.displayedTreeLeft,this.viewportRowLeft,0),n(this.displayedTreeRight,this.viewportRowRight,0),n(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const e=r=>`${r.getId()}-${r.getPinned()||"normal"}`;this.extractViewportColumns();const n=this.viewportColumns.map(e).join("#"),i=this.viewportColumnsHash!==n;return i&&(this.viewportColumnsHash=n,this.calculateHeaderRows()),i}refreshFlexedColumns(e={}){var n;const i=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let r=-1;if(e.resizingCols){const f=new Set(e.resizingCols);let p=this.displayedColumnsCenter;for(let g=p.length-1;g>=0;g--)if(f.has(p[g])){r=g;break}}let s=0,o=[],a=0,l=0;for(let f=0;f<this.displayedColumnsCenter.length;f++)this.displayedColumnsCenter[f].getFlex()&&f>r?(o.push(this.displayedColumnsCenter[f]),l+=this.displayedColumnsCenter[f].getFlex(),a+=(n=this.displayedColumnsCenter[f].getMinWidth())!==null&&n!==void 0?n:0):s+=this.displayedColumnsCenter[f].getActualWidth();if(!o.length)return[];let u=[];s+a>this.flexViewportWidth&&(o.forEach(f=>{var p;return f.setActualWidth((p=f.getMinWidth())!==null&&p!==void 0?p:0,i)}),u=o,o=[]);const c=[];let d;e:for(;;){d=this.flexViewportWidth-s;const f=d/l;for(let p=0;p<o.length;p++){const g=o[p],m=f*g.getFlex();let y=0;const v=g.getMinWidth(),C=g.getMaxWidth();if(B(v)&&m<v?y=v:B(C)&&m>C&&(y=C),y){g.setActualWidth(y,i),$N(o,g),l-=g.getFlex(),u.push(g),s+=g.getActualWidth();continue e}c[p]=Math.round(m)}break}let h=d;return o.forEach((f,p)=>{f.setActualWidth(Math.min(c[p],h),i),u.push(f),h-=c[p]}),e.skipSetLeft||this.setLeftValues(i),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(u,!0,i,o),o}sizeColumnsToFit(e,n="sizeColumnsToFit",i,r){var s,o,a,l,u;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(e,n,i,r));return}const c={};r&&((s=r==null?void 0:r.columnLimits)===null||s===void 0||s.forEach(v=>{var{key:C}=v,w=kce(v,["key"]);c[typeof C=="string"?C:C.getColId()]=w}));const d=this.getAllDisplayedColumns(),h=e===this.getWidthOfColsInList(d);if(e<=0||!d.length||h)return;const f=[],p=[];d.forEach(v=>{v.getColDef().suppressSizeToFit===!0?p.push(v):f.push(v)});const g=f.slice(0);let m=!1;const y=v=>{zi(f,v),p.push(v)};for(f.forEach(v=>{var C,w;v.resetActualWidth(n);const E=c==null?void 0:c[v.getId()],b=(C=E==null?void 0:E.minWidth)!==null&&C!==void 0?C:r==null?void 0:r.defaultMinWidth,S=(w=E==null?void 0:E.maxWidth)!==null&&w!==void 0?w:r==null?void 0:r.defaultMaxWidth,_=v.getActualWidth();typeof b=="number"&&_<b?v.setActualWidth(b,n,!0):typeof S=="number"&&_>S&&v.setActualWidth(S,n,!0)});!m;){m=!0;const v=e-this.getWidthOfColsInList(p);if(v<=0)f.forEach(C=>{var w,E;const b=(E=(w=c==null?void 0:c[C.getId()])===null||w===void 0?void 0:w.minWidth)!==null&&E!==void 0?E:r==null?void 0:r.defaultMinWidth;if(typeof b=="number"){C.setActualWidth(b,n,!0);return}C.setMinimum(n)});else{const C=v/this.getWidthOfColsInList(f);let w=v;for(let E=f.length-1;E>=0;E--){const b=f[E],S=c==null?void 0:c[b.getId()],_=(o=S==null?void 0:S.minWidth)!==null&&o!==void 0?o:r==null?void 0:r.defaultMinWidth,A=(a=S==null?void 0:S.maxWidth)!==null&&a!==void 0?a:r==null?void 0:r.defaultMaxWidth,D=(l=b.getMinWidth())!==null&&l!==void 0?l:0,P=(u=b.getMaxWidth())!==null&&u!==void 0?u:Number.MAX_VALUE,L=typeof _=="number"&&_>D?_:b.getMinWidth(),O=typeof A=="number"&&A<P?A:b.getMaxWidth();let M=Math.round(b.getActualWidth()*C);B(L)&&M<L?(M=L,y(b),m=!1):B(O)&&M>O?(M=O,y(b),m=!1):E===0&&(M=w),b.setActualWidth(M,n,!0),w-=M}}}g.forEach(v=>{v.fireColumnWidthChangedEvent(n)}),this.setLeftValues(n),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(g,!0,n)}buildDisplayedTrees(e){const n=[],i=[],r=[];e.forEach(o=>{switch(o.getPinned()){case"left":n.push(o);break;case"right":i.push(o);break;default:r.push(o);break}});const s=new xce;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(n,s,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,s,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(r,s,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=n=>{this.displayedColumnsAndGroupsMap[n.getUniqueId()]=n};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,n=>{n instanceof xt&&n.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const n=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.usingTreeData)&&!i&&!n){const o=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(o,this.groupAutoColumns)||e)return this.groupAutoColumns=o,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){const e=this.gridOptionsService.get("groupDisplayType");if(e?Y2("custom",e):!1)return!0;const i=this.gridOptionsService.get("treeDataDisplayType");return i?Lce("custom",i):!1}autoColsEqual(e,n){return sc(e,n,(i,r)=>i.getColId()===r.getColId())}getWidthOfColsInList(e){return e.reduce((n,i)=>n+i.getActualWidth(),0)}getGridBalancedTree(){return this.gridBalancedTree}getFirstDisplayedColumn(){const e=this.gridOptionsService.is("enableRtl"),n=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&n.reverse();for(let i=0;i<n.length;i++){const r=this[n[i]]();if(r.length)return e?St(r):r[0]}return null}setColumnHeaderHeight(e,n){if(e.setAutoHeaderHeight(n)){const r={type:x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(r)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),n=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...n)}getHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("headerHeight"))!==null&&e!==void 0?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return(e=this.gridOptionsService.getNum("floatingFiltersHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("groupHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("pivotHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return(e=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))!==null&&e!==void 0?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e){const n=e.getUserProvidedColDef();if(!n)return!1;const i=this.columnFactory.addColumnDefaultAndTypes(n,e.getColId());return e.setColDef(i,n),!0}generateColumnStateForRowGroupAndPivotIndexes(e,n){let i={};const r=(s,o,a,l,u,c)=>{if(!o.length||!this.primaryColumns)return[];const d=Object.keys(s),h=new Set(d),f=new Set(d),p=new Set(o.map(b=>{const S=b.getColId();return f.delete(S),S}).concat(d)),g=[],m={};let y=0;for(let b=0;b<this.primaryColumns.length;b++){const S=this.primaryColumns[b].getColId();p.has(S)&&(g.push(S),m[S]=y++)}let v=1e3,C=!1,w=0;const E=b=>{const S=m[b];for(let _=w;_<S;_++){const A=g[_];f.has(A)&&(s[A][u]=v++,f.delete(A))}w=S};o.forEach(b=>{const S=b.getColId();if(h.has(S))E(S),s[S][u]=v++;else{const _=b.getColDef();(_[u]===null||_[u]===void 0&&_[c]==null)&&(C||(_[a]||_[a]===void 0&&_[l]?E(S):(f.forEach(P=>{s[P][u]=v+m[P]}),v+=g.length,C=!0)),i[S]||(i[S]={colId:S}),i[S][u]=v++)}})};return r(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),r(n,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}};li([R("expressionService")],An.prototype,"expressionService",void 0);li([R("columnFactory")],An.prototype,"columnFactory",void 0);li([R("displayedGroupCreator")],An.prototype,"displayedGroupCreator",void 0);li([R("ctrlsService")],An.prototype,"ctrlsService",void 0);li([R("autoWidthCalculator")],An.prototype,"autoWidthCalculator",void 0);li([R("columnUtils")],An.prototype,"columnUtils",void 0);li([R("columnAnimationService")],An.prototype,"columnAnimationService",void 0);li([R("autoGroupColService")],An.prototype,"autoGroupColService",void 0);li([lt("aggFuncService")],An.prototype,"aggFuncService",void 0);li([lt("valueCache")],An.prototype,"valueCache",void 0);li([lt("animationFrameService")],An.prototype,"animationFrameService",void 0);li([R("sortController")],An.prototype,"sortController",void 0);li([R("columnDefFactory")],An.prototype,"columnDefFactory",void 0);li([Z],An.prototype,"init",null);li([ur],An.prototype,"destroyColumns",null);li([Ice(0,Ar("loggerFactory"))],An.prototype,"setBeans",null);An=li([me("columnModel")],An);var Gce=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let q2=class extends q{calculateColMinWidth(e){return e.minWidth!=null?e.minWidth:this.environment.getMinColWidth()}calculateColMaxWidth(e){return e.maxWidth!=null?e.maxWidth:Number.MAX_SAFE_INTEGER}calculateColInitialWidth(e){const n=this.calculateColMinWidth(e),i=this.calculateColMaxWidth(e);let r;const s=Vs(e.width),o=Vs(e.initialWidth);return s!=null?r=s:o!=null?r=o:r=200,Math.max(Math.min(r,i),n)}getOriginalPathForColumn(e,n){const i=[];let r=!1;const s=(o,a)=>{for(let l=0;l<o.length;l++){if(r)return;const u=o[l];u instanceof bt?(s(u.getChildren(),a+1),i[a]=u):u===e&&(r=!0)}};return s(n,0),r?i:null}depthFirstOriginalTreeSearch(e,n,i){n&&n.forEach(r=>{r instanceof bt&&this.depthFirstOriginalTreeSearch(r,r.getChildren(),i),i(r,e)})}depthFirstAllColumnTreeSearch(e,n){e&&e.forEach(i=>{i instanceof xt&&this.depthFirstAllColumnTreeSearch(i.getChildren(),n),n(i)})}depthFirstDisplayedColumnTreeSearch(e,n){e&&e.forEach(i=>{i instanceof xt&&this.depthFirstDisplayedColumnTreeSearch(i.getDisplayedChildren(),n),n(i)})}};q2=Gce([me("columnUtils")],q2);var $ce=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let K2=class extends q{createDisplayedGroups(e,n,i,r){const s=this.mapOldGroupsById(r),o=[];let a=e;for(;a.length;){const l=a;a=[];let u=0;const c=d=>{const h=u;u=d;const f=l[h],g=(f instanceof xt?f.getProvidedColumnGroup():f).getOriginalParent();if(g==null){for(let y=h;y<d;y++)o.push(l[y]);return}const m=this.createColumnGroup(g,n,s,i);for(let y=h;y<d;y++)m.addChild(l[y]);a.push(m)};for(let d=1;d<l.length;d++){const h=l[d],p=(h instanceof xt?h.getProvidedColumnGroup():h).getOriginalParent(),g=l[u],y=(g instanceof xt?g.getProvidedColumnGroup():g).getOriginalParent();p!==y&&c(d)}u<l.length&&c(l.length)}return this.setupParentsIntoColumns(o,null),o}createColumnGroup(e,n,i,r){const s=e.getGroupId(),o=n.getInstanceIdForKey(s),a=xt.createUniqueId(s,o);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),B(l)?l.reset():(l=new xt(e,s,o,r),this.context.createBean(l)),l}mapOldGroupsById(e){const n={},i=r=>{r.forEach(s=>{if(s instanceof xt){const o=s;n[s.getUniqueId()]=o,i(o.getChildren())}})};return e&&i(e),n}setupParentsIntoColumns(e,n){e.forEach(i=>{if(i.setParent(n),i instanceof xt){const r=i;this.setupParentsIntoColumns(r.getChildren(),r)}})}};K2=$ce([me("displayedGroupCreator")],K2);var Hce=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let X2=class extends q{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(n=>this.addComponent(n))}addComponent(e){const i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};X2=Hce([me("agStackComponentsRegistry")],X2);function cl(t,e,n){n==null||n==""?VN(t,e):co(t,e,n)}function co(t,e,n){t.setAttribute(yj(e),n.toString())}function VN(t,e){t.removeAttribute(yj(e))}function yj(t){return`aria-${t}`}function zn(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function vj(t){let e;return t==="asc"?e="ascending":t==="desc"?e="descending":t==="mixed"?e="other":e="none",e}function Cj(t){return parseInt(t.getAttribute("aria-level"),10)}function wj(t){return parseInt(t.getAttribute("aria-posinset"),10)}function Wce(t){return t.getAttribute("aria-describedby")||""}function od(t,e){cl(t,"label",e)}function C_(t,e){cl(t,"labelledby",e)}function Sj(t,e){cl(t,"description",e)}function Ej(t,e){cl(t,"describedby",e)}function bj(t,e){cl(t,"live",e)}function xj(t,e){cl(t,"level",e)}function BN(t,e){cl(t,"disabled",e)}function w_(t,e){cl(t,"hidden",e)}function $a(t,e){co(t,"expanded",e)}function _j(t){VN(t,"expanded")}function zN(t,e){co(t,"setsize",e)}function UN(t,e){co(t,"posinset",e)}function Rj(t,e){co(t,"multiselectable",e)}function Tj(t,e){co(t,"rowcount",e)}function jN(t,e){co(t,"rowindex",e)}function Aj(t,e){co(t,"colcount",e)}function YN(t,e){co(t,"colindex",e)}function Dj(t,e){co(t,"colspan",e)}function Oj(t,e){co(t,"sort",e)}function Pj(t){VN(t,"sort")}function Gh(t,e){cl(t,"selected",e)}function Fj(t,e){co(t,"checked",e===void 0?"mixed":e)}function Mj(t,e){cl(t,"controls",e.id),C_(e,t.id)}function S_(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}const Vce=Object.freeze(Object.defineProperty({__proto__:null,getAriaCheckboxStateName:S_,getAriaDescribedBy:Wce,getAriaLevel:Cj,getAriaPosInSet:wj,getAriaSortState:vj,removeAriaExpanded:_j,removeAriaSort:Pj,setAriaChecked:Fj,setAriaColCount:Aj,setAriaColIndex:YN,setAriaColSpan:Dj,setAriaControls:Mj,setAriaDescribedBy:Ej,setAriaDescription:Sj,setAriaDisabled:BN,setAriaExpanded:$a,setAriaHidden:w_,setAriaLabel:od,setAriaLabelledBy:C_,setAriaLevel:xj,setAriaLive:bj,setAriaMultiSelectable:Rj,setAriaPosInSet:UN,setAriaRole:zn,setAriaRowCount:Tj,setAriaRowIndex:jN,setAriaSelected:Gh,setAriaSetSize:zN,setAriaSort:Oj},Symbol.toStringTag,{value:"Module"}));let JA,_w,ZA,eD,tD,nD,Q2,J2;function to(){return JA===void 0&&(JA=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),JA}function qN(){if(_w===void 0)if(to()){const t=navigator.userAgent.match(/version\/(\d+)/i);t&&(_w=t[1]!=null?parseFloat(t[1]):0)}else _w=0;return _w}function E_(){if(ZA===void 0){const t=window;ZA=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return ZA}function KN(){return eD===void 0&&(eD=/(firefox)/i.test(navigator.userAgent)),eD}function XN(){return tD===void 0&&(tD=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),tD}function ad(){return nD===void 0&&(nD=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),nD}function b_(){return!to()||qN()>=15}function VE(t){if(!t)return null;const e=t.tabIndex,n=t.getAttribute("tabIndex");return e===-1&&(n===null||n===""&&!KN())?null:e.toString()}function Nj(){if(!document.body)return-1;let t=1e6;const e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const i=t*2;if(n.style.height=i+"px",i>e||n.clientHeight!==i)break;t=i}return document.body.removeChild(n),t}function Lj(){var t,e,n;return(e=(t=document.body)===null||t===void 0?void 0:t.clientWidth)!==null&&e!==void 0?e:window.innerHeight||((n=document.documentElement)===null||n===void 0?void 0:n.clientWidth)||-1}function Ij(){var t,e,n;return(e=(t=document.body)===null||t===void 0?void 0:t.clientHeight)!==null&&e!==void 0?e:window.innerHeight||((n=document.documentElement)===null||n===void 0?void 0:n.clientHeight)||-1}function kj(){return J2==null&&Gj(),J2}function Gj(){const t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let n=e.offsetWidth-e.clientWidth;n===0&&e.clientWidth===0&&(n=null),e.parentNode&&e.parentNode.removeChild(e),n!=null&&(J2=n,Q2=n===0)}function Bp(){return Q2==null&&Gj(),Q2}const Bce=Object.freeze(Object.defineProperty({__proto__:null,browserSupportsPreventScroll:b_,getBodyHeight:Ij,getBodyWidth:Lj,getMaxDivHeight:Nj,getSafariVersion:qN,getScrollbarWidth:kj,getTabIndex:VE,isBrowserChrome:E_,isBrowserFirefox:KN,isBrowserSafari:to,isIOSUserAgent:ad,isInvisibleScrollbar:Bp,isMacOsUserAgent:XN},Symbol.toStringTag,{value:"Module"}));function zp(t,e){return t.toString().padStart(e,"0")}function $j(t,e){const n=[];for(let i=t;i<=e;i++)n.push(i);return n}function zce(t){return typeof t=="string"&&(t=parseInt(t,10)),typeof t=="number"?Math.floor(t):null}function Uce(t,e){let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t&255),t>>>=8;return n}function jce(t,e,n){return typeof t!="number"?"":QN(Math.round(t*100)/100,e,n)}function QN(t,e,n){return typeof t!="number"?"":t.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function Yce(t){return t==null?null:t.reduce((e,n)=>e+n,0)}function qce(t,e){return t>=0?t:e}function Kce(t,e){const n=parseInt(t,10);return!isNaN(n)&&isFinite(n)&&n>0?n:e}const Xce=Object.freeze(Object.defineProperty({__proto__:null,cleanNumber:zce,createArrayOfNumbers:$j,decToHex:Uce,formatNumberCommas:QN,formatNumberTwoDecimalPlacesAndCommas:jce,oneOrGreater:Kce,padStartWidthZeros:zp,sum:Yce,zeroOrGreater:qce},Symbol.toStringTag,{value:"Module"}));function Ks(t,e=!0,n="-"){if(!t)return null;let i=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(r=>zp(r,2)).join(n);return e&&(i+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(r=>zp(r,2)).join(":")),i}const iD=t=>{if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function DS(t,e="YYYY-MM-DD"){const n=zp(t.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${t.getFullYear()}`,MMMM:()=>i[t.getMonth()],MMM:()=>i[t.getMonth()].slice(0,3),MM:()=>zp(t.getMonth()+1,2),Mo:()=>`${t.getMonth()+1}${iD(t.getMonth()+1)}`,M:()=>`${t.getMonth()+1}`,Do:()=>`${t.getDate()}${iD(t.getDate())}`,DD:()=>zp(t.getDate(),2),D:()=>`${t.getDate()}`,dddd:()=>r[t.getDay()],ddd:()=>r[t.getDay()].slice(0,3),dd:()=>r[t.getDay()].slice(0,2),do:()=>`${t.getDay()}${iD(t.getDay())}`,d:()=>`${t.getDay()}`},o=new RegExp(Object.keys(s).join("|"),"g");return e.replace(o,a=>a in s?s[a]():a)}function Zo(t){if(!t)return null;const[e,n]=t.split(" ");if(!e)return null;const i=e.split("-").map(d=>parseInt(d,10));if(i.filter(d=>!isNaN(d)).length!==3)return null;const[r,s,o]=i,a=new Date(r,s-1,o);if(a.getFullYear()!==r||a.getMonth()!==s-1||a.getDate()!==o)return null;if(!n||n==="00:00:00")return a;const[l,u,c]=n.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),u>=0&&u<60&&a.setMinutes(u),c>=0&&c<60&&a.setSeconds(c),a}const Qce=Object.freeze(Object.defineProperty({__proto__:null,dateToFormattedString:DS,parseDateTimeFromString:Zo,serialiseDate:Ks},Symbol.toStringTag,{value:"Module"}));let Rw;function Jce(t,e,n){const i=t.parentElement;let r=i&&i.firstChild;for(;r;)e&&r.classList.toggle(e,r===t),n&&r.classList.toggle(n,r!==t),r=r.nextSibling}const Hj="[tabindex], input, select, button, textarea, [href]",JN=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled:not(.ag-button), .ag-disabled *.mjs";function ZN(t){const e=Element.prototype.matches||Element.prototype.msMatchesSelector,n="input, select, button, textarea",i=e.call(t,n),r=e.call(t,JN),s=bu(t);return i&&!r&&s}function Qe(t,e,n={}){const{skipAriaHidden:i}=n;t.classList.toggle("ag-hidden",!e),i||w_(t,!e)}function Wj(t,e,n={}){const{skipAriaHidden:i}=n;t.classList.toggle("ag-invisible",!e),i||w_(t,!e)}function dg(t,e){const n="disabled",i=e?r=>r.setAttribute(n,""):r=>r.removeAttribute(n);i(t),oL(t.querySelectorAll("input"),r=>i(r))}function vh(t,e,n){let i=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof n=="number"){if(++i>n)break}else if(t===n)break}return!1}function ld(t){const{height:e,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:s,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:u,paddingLeft:c,marginTop:d,marginRight:h,marginBottom:f,marginLeft:p,boxSizing:g}=window.getComputedStyle(t);return{height:parseFloat(e),width:parseFloat(n),borderTopWidth:parseFloat(i),borderRightWidth:parseFloat(r),borderBottomWidth:parseFloat(s),borderLeftWidth:parseFloat(o),paddingTop:parseFloat(a),paddingRight:parseFloat(l),paddingBottom:parseFloat(u),paddingLeft:parseFloat(c),marginTop:parseFloat(d),marginRight:parseFloat(h),marginBottom:parseFloat(f),marginLeft:parseFloat(p),boxSizing:g}}function D1(t){const e=ld(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function x_(t){const e=ld(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function eL(t){const e=ld(t),n=e.marginBottom+e.marginTop;return Math.ceil(t.offsetHeight+n)}function __(t){const e=ld(t),n=e.marginLeft+e.marginRight;return Math.ceil(t.offsetWidth+n)}function tL(t){const e=t.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:s}=ld(t);return{top:e.top+(n||0),left:e.left+(i||0),right:e.right+(r||0),bottom:e.bottom+(s||0)}}function yv(){if(typeof Rw=="boolean")return Rw;const t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(t),t.scrollLeft=1,Rw=Math.floor(t.scrollLeft)===0,document.body.removeChild(t),Rw}function vv(t,e){let n=t.scrollLeft;return e&&(n=Math.abs(n),E_()&&!yv()&&(n=t.scrollWidth-t.clientWidth-n)),n}function Cv(t,e,n){n&&(yv()?e*=-1:(to()||E_())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function Ti(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function Zce(t,e){zl(t.querySelector(e))}function zl(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function bu(t){return t.offsetParent!==null}function Qn(t){const e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function ede(t,e){t.lastChild?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e}function tde(t,e){return t.attributes&&t.attributes[e]?t.attributes[e].value:null}function Z2(t){return t&&t.clientHeight?t.clientHeight:0}function eP(t){return t&&t.clientWidth?t.clientWidth:0}function nL(t,e,n){if(n&&n.nextSibling===e)return;const i=document.activeElement,r=e.contains(i);n?n.nextSibling?t.insertBefore(e,n.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e),r&&i&&b_()&&i.focus({preventScroll:!0})}function iL(t,e){for(let n=0;n<e.length;n++){const i=e[n],r=t.children[n];r!==i&&t.insertBefore(i,r)}}function Vj(t,e,n){n?n.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function nde(t,e){B(t.firstChild)?t.insertBefore(e,t.firstChild):t.appendChild(e)}function rL(t,e){if(e)for(const[n,i]of Object.entries(e)){if(!n||!n.length||i==null)continue;const r=gj(n),s=i.toString(),o=s.replace(/\s*!important/g,""),a=o.length!=s.length?"important":void 0;t.style.setProperty(r,o,a)}}function Bj(t){return t.clientWidth<t.scrollWidth}function zj(t){return t.clientHeight<t.scrollHeight}function wv(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):Xs(t,e)}function Xs(t,e){e=sL(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function ide(t,e){e==="flex"?(t.style.removeProperty("height"),t.style.removeProperty("minHeight"),t.style.removeProperty("maxHeight"),t.style.flex="1 1 auto"):Ch(t,e)}function Ch(t,e){e=sL(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function sL(t){return typeof t=="number"?`${t}px`:t}function O1(t){return t instanceof Node||t instanceof HTMLElement}function Uj(t){if(t==null)return[];const e=[];return oL(t,n=>e.push(n)),e}function jj(t,e){if(t)for(let n=0;n<t.length;n++){const i=t[n];e(i.name,i.value)}}function Ua(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n.toString())}function oL(t,e){if(t!=null)for(let n=0;n<t.length;n++)e(t[n])}function aL(t,e){t.then(n=>{const i=n.getGui();i!=null&&(typeof i=="object"?e.appendChild(i):e.innerHTML=i)})}const rde=Object.freeze(Object.defineProperty({__proto__:null,FOCUSABLE_EXCLUDE:JN,FOCUSABLE_SELECTOR:Hj,addOrRemoveAttribute:Ua,addStylesToElement:rL,appendHtml:ede,bindCellRendererToHtmlElement:aL,clearElement:Ti,copyNodeList:Uj,ensureDomOrder:nL,formatSize:sL,getAbsoluteHeight:eL,getAbsoluteWidth:__,getElementAttribute:tde,getElementRectWithOffset:tL,getElementSize:ld,getInnerHeight:D1,getInnerWidth:x_,getScrollLeft:vv,insertWithDomOrder:Vj,isElementChildOfClass:vh,isFocusableFormField:ZN,isHorizontalScrollShowing:Bj,isNodeOrElement:O1,isRtlNegativeScroll:yv,isVerticalScrollShowing:zj,isVisible:bu,iterateNamedNodeMap:jj,loadTemplate:Qn,nodeListForEach:oL,offsetHeight:Z2,offsetWidth:eP,prependDC:nde,radioCssClass:Jce,removeElement:Zce,removeFromParent:zl,setDisabled:dg,setDisplayed:Qe,setDomChildOrder:iL,setElementHeight:ide,setElementWidth:wv,setFixedHeight:Ch,setFixedWidth:Xs,setScrollLeft:Cv,setVisible:Wj},Symbol.toStringTag,{value:"Module"})),Yj={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function Is(t,e,n){const i=pn(t,e,n);if(i){const{className:s}=i;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return i}const r=document.createElement("span");return r.appendChild(i),r}function pn(t,e,n,i){let r=null;const s=n&&n.getColDef().icons;if(s&&(r=s[t]),e&&!r){const o=e.get("icons");o&&(r=o[t])}if(r){let o;if(typeof r=="function")o=r();else if(typeof r=="string")o=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Qn(o);if(O1(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const o=document.createElement("span");let a=Yj[t];return a||(i?a=t:(console.warn(`AG Grid: Did not find icon ${t}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),zn(o,"presentation"),o}}const sde=Object.freeze(Object.defineProperty({__proto__:null,createIcon:Is,createIconNoSpan:pn,iconNameClassMap:Yj},Symbol.toStringTag,{value:"Module"}));class k{}k.BACKSPACE="Backspace";k.TAB="Tab";k.ENTER="Enter";k.ESCAPE="Escape";k.SPACE=" ";k.LEFT="ArrowLeft";k.UP="ArrowUp";k.RIGHT="ArrowRight";k.DOWN="ArrowDown";k.DELETE="Delete";k.F2="F2";k.PAGE_UP="PageUp";k.PAGE_DOWN="PageDown";k.PAGE_HOME="Home";k.PAGE_END="End";k.A="KeyA";k.C="KeyC";k.D="KeyD";k.V="KeyV";k.X="KeyX";k.Y="KeyY";k.Z="KeyZ";const ode=65,ade=67,lde=86,ude=68,cde=90,dde=89;function R_(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key.length===1}function BE(t,e,n,i,r){const s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const o={event:e,editing:r,column:i,api:t.api,node:n,data:n.data,colDef:i.getColDef(),context:t.context,columnApi:t.columnApi};return!!(s&&s(o))}function qj(t,e,n,i){const r=i.getDefinition(),s=r&&r.suppressHeaderKeyboardEvent;if(!B(s))return!1;const o={api:t.api,columnApi:t.columnApi,context:t.context,colDef:r,column:i,headerRowIndex:n,event:e};return!!s(o)}function Kj(t){const{keyCode:e}=t;let n;switch(e){case ode:n=k.A;break;case ade:n=k.C;break;case lde:n=k.V;break;case ude:n=k.D;break;case cde:n=k.Z;break;case dde:n=k.Y;break;default:n=t.code}return n}function Xj(t,e=!1){return t===k.DELETE?!0:!e&&t===k.BACKSPACE?XN():!1}const hde=Object.freeze(Object.defineProperty({__proto__:null,isDeleteKey:Xj,isEventFromPrintableCharacter:R_,isUserSuppressingHeaderKeyboardEvent:qj,isUserSuppressingKeyboardEvent:BE,normaliseQwertyAzerty:Kj},Symbol.toStringTag,{value:"Module"}));function lL(t,e,n){if(n===0)return!1;const i=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(i,r)<=n}const fde=Object.freeze(Object.defineProperty({__proto__:null,areEventsNear:lL},Symbol.toStringTag,{value:"Module"}));function pde(t,e){if(!t)return!1;const n=(o,a)=>{const l=e[o.id],u=e[a.id],c=l!==void 0,d=u!==void 0,h=c&&d,f=!c&&!d;return h?l-u:f?o.__objectId-a.__objectId:c?1:-1};let i,r,s=!1;for(let o=0;o<t.length-1;o++)if(i=t[o],r=t[o+1],n(i,r)>0){s=!0;break}return s?(t.sort(n),!0):!1}function gde(t,e){const n=[];i(t);function i(r){r&&r.forEach(s=>{if(s.group||s.hasChildren()){n.push(s.key);const o=n.join("|");e(s,o),i(s.childrenAfterGroup),n.pop()}})}}const mde=Object.freeze(Object.defineProperty({__proto__:null,sortRowNodesByOrder:pde,traverseNodesWithKey:gde},Symbol.toStringTag,{value:"Module"}));function uL(t){const e=new Set;return t.forEach(n=>e.add(n)),e}const yde=Object.freeze(Object.defineProperty({__proto__:null,convertToSet:uL},Symbol.toStringTag,{value:"Module"})),vde=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Vce),Cce),Bce),Qce),rde),Sce),lce),Nce),Jue),sde),hde),Fce),fde),Xce),sce),mde),yde),Dce),Ie=vde;class cL{constructor(e=0,n=1){this.nextValue=e,this.step=n}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}}var Rp;(function(t){t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.RESOLVED=1]="RESOLVED"})(Rp||(Rp={}));class Nn{constructor(e){this.status=Rp.IN_PROGRESS,this.resolution=null,this.waiters=[],e(n=>this.onDone(n),n=>this.onReject(n))}static all(e){return new Nn(n=>{let i=e.length;const r=new Array(i);e.forEach((s,o)=>{s.then(a=>{r[o]=a,i--,i===0&&n(r)})})})}static resolve(e=null){return new Nn(n=>n(e))}then(e){return new Nn(n=>{this.status===Rp.RESOLVED?n(e(this.resolution)):this.waiters.push(i=>n(e(i)))})}resolveNow(e,n){return this.status===Rp.RESOLVED?n(this.resolution):e}onDone(e){this.status=Rp.RESOLVED,this.resolution=e,this.waiters.forEach(n=>n(e))}onReject(e){console.warn("TBI")}}var dL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Eo;(function(t){t[t.NOTHING=0]="NOTHING",t[t.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",t[t.SHOWING=2]="SHOWING"})(Eo||(Eo={}));var Ta;(function(t){t[t.HOVER=0]="HOVER",t[t.FOCUS=1]="FOCUS"})(Ta||(Ta={}));class Sr extends q{constructor(e,n,i){super(),this.parentComp=e,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=i,this.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,this.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=Eo.NOTHING,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gridOptionsService.is("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipShowDelay=this.getTooltipDelay("show"),this.tooltipHideDelay=this.getTooltipDelay("hide"),this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");const e=this.parentComp.getGui();this.tooltipTrigger===Ta.HOVER&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===Ta.FOCUS&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){const n=this.gridOptionsService.getNum(e);if(B(n))return n<0&&et(()=>console.warn(`AG Grid: ${e} should not be lower than 0`),`${e}Warn`),Math.max(200,n)}getTooltipDelay(e){var n,i,r,s;return e==="show"?(i=(n=this.getGridOptionsTooltipDelay("tooltipShowDelay"))!==null&&n!==void 0?n:this.tooltipShowDelayOverride)!==null&&i!==void 0?i:this.DEFAULT_SHOW_TOOLTIP_DELAY:(s=(r=this.getGridOptionsTooltipDelay("tooltipHideDelay"))!==null&&r!==void 0?r:this.tooltipHideDelayOverride)!==null&&s!==void 0?s:this.DEFAULT_HIDE_TOOLTIP_DELAY}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gridOptionsService.get("tooltipTrigger");return!e||e==="hover"?Ta.HOVER:Ta.FOCUS}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!ad()&&(Sr.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===Eo.SHOWING&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var n;const i=e.relatedTarget,r=this.parentComp.getGui(),s=(n=this.tooltipComp)===null||n===void 0?void 0:n.getGui();this.isInteractingWithTooltip||r.contains(i)||this.interactionEnabled&&(s!=null&&s.contains(i))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=Eo.NOTHING||Sr.isLocked)return!1;let n=0;return e&&(n=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=Eo.WAITING_TO_SHOW,!0}isLastTooltipHiddenRecently(){const e=new Date().getTime(),n=Sr.lastTooltipHideTime;return e-n<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===Eo.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=Eo.NOTHING,this.lastMouseEvent=null}showTooltip(){const e=Object.assign({},this.parentComp.getTooltipParams());if(!B(e.value)){this.setToDoNothing();return}this.state=Eo.SHOWING,this.tooltipInstanceCount++;const n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(n)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),Sr.lastTooltipHideTime=new Date().getTime());const n={type:x.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),this.state=Eo.NOTHING}newTooltipComponentCallback(e,n){if(this.state!==Eo.SHOWING||this.tooltipInstanceCount!==e){this.getContext().destroyBean(n);return}const r=n.getGui();this.tooltipComp=n,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===Ta.HOVER&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:r,ariaLabel:s("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===Ta.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===Ta.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(r,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(r,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(r,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(r,"focusout",this.onTooltipFocusOut.bind(this))||null));const a={type:x.EVENT_TOOLTIP_SHOW,tooltipGui:r,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var n;const i=this.parentComp.getGui(),r=(n=this.tooltipComp)===null||n===void 0?void 0:n.getGui(),s=e.relatedTarget;r!=null&&r.contains(s)||(this.isInteractingWithTooltip=!1,i.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Object.assign(Object.assign({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Object.assign(Object.assign({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,n=this.tooltipComp,i=this.tooltipTrigger===Ta.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(n)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Sr.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){Sr.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}}Sr.isLocked=!1;dL([R("popupService")],Sr.prototype,"popupService",void 0);dL([R("userComponentFactory")],Sr.prototype,"userComponentFactory",void 0);dL([Z],Sr.prototype,"postConstruct",null);class P1{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const n=(e||"").split(" ");if(n.length>1){n.forEach(r=>this.addCssClass(r));return}if(this.cssClassStates[e]!==!0&&e.length){const r=this.getGui();r&&r.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const n=(e||"").split(" ");if(n.length>1){n.forEach(r=>this.removeCssClass(r));return}if(this.cssClassStates[e]!==!1&&e.length){const r=this.getGui();r&&r.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const n=this.getGui();return n?n.classList.contains(e):!1}addOrRemoveCssClass(e,n){if(!e)return;if(e.indexOf(" ")>=0){const r=(e||"").split(" ");if(r.length>1){r.forEach(s=>this.addOrRemoveCssClass(s,n));return}}if(this.cssClassStates[e]!==n&&e.length){const r=this.getGui();r&&r.classList.toggle(e,n),this.cssClassStates[e]=n}}}var hL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const Cde=new cL;class Le extends q{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=Cde.next(),this.cssClassManager=new P1(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e,n,i){const r=()=>{this.usingBrowserTooltips?this.getGui().removeAttribute("title"):this.tooltipFeature=this.destroyBean(this.tooltipFeature)},s=()=>{this.usingBrowserTooltips?this.getGui().setAttribute("title",this.tooltipText):this.tooltipFeature=this.createBean(new Sr(this,n,i))};this.tooltipText!=e&&(this.tooltipText&&r(),e!=null&&(this.tooltipText=e,this.tooltipText&&s()))}createChildComponentsFromTags(e,n){Uj(e.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;const s=this.createComponentFromElement(r,o=>{o.getGui()&&this.copyAttributesFromNode(r,o.getGui())},n);if(s){if(s.addItems&&r.children.length){this.createChildComponentsFromTags(r,n);const o=Array.prototype.slice.call(r.children);s.addItems(o)}this.swapComponentForNode(s,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,n)})}createComponentFromElement(e,n,i){const r=e.nodeName,s=i?i[e.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(r);if(o){Le.elementGettingCreated=e;const a=new o(s);return a.setParentComponent(this),this.createBean(a,null,n),a}return null}copyAttributesFromNode(e,n){jj(e.attributes,(i,r)=>n.setAttribute(i,r))}swapComponentForNode(e,n,i){const r=e.getGui();n.replaceChild(r,i),n.insertBefore(document.createComment(i.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,i)}swapInComponentForQuerySelectors(e,n){const i=this;this.iterateOverQuerySelectors(r=>{i[r.attributeName]===n&&(i[r.attributeName]=e)})}iterateOverQuerySelectors(e){let n=Object.getPrototypeOf(this);for(;n!=null;){const i=n.__agComponentMetaData,r=p_(n.constructor);i&&i[r]&&i[r].querySelectors&&i[r].querySelectors.forEach(s=>e(s)),n=Object.getPrototypeOf(n)}}activateTabIndex(e){const n=this.gridOptionsService.getNum("tabIndex")||0;e||(e=[]),e.length||e.push(this.getGui()),e.forEach(i=>i.setAttribute("tabindex",n.toString()))}setTemplate(e,n){const i=Qn(e);this.setTemplateFromElement(i,n)}setTemplateFromElement(e,n){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),n)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors(n=>{const i=s=>e[n.attributeName]=s;if(n.refSelector&&this.getAttribute("ref")===n.refSelector)i(this.eGui);else{const s=this.eGui.querySelector(n.querySelector);s&&i(s.__agComponent||s)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,n){if(e!=null)if(n||(n=this.eGui),O1(e))n.appendChild(e);else{const i=e;n.appendChild(i.getGui())}}isDisplayed(){return this.displayed}setVisible(e,n={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=n;Wj(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,n={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=n;Qe(this.eGui,e,{skipAriaHidden:i});const r={type:Le.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,n,i){this.eGui.addEventListener(e,n,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,n))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,n){this.cssClassManager.addOrRemoveCssClass(e,n)}getAttribute(e){const{eGui:n}=this;return n?n.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}}Le.EVENT_DISPLAYED_CHANGED="displayedChanged";hL([R("agStackComponentsRegistry")],Le.prototype,"agStackComponentsRegistry",void 0);hL([ej],Le.prototype,"preConstructOnComponent",null);hL([ej],Le.prototype,"createChildComponentsPreConstruct",null);function te(t){return wde.bind(this,`[ref=${t}]`,t)}function wde(t,e,n,i,r){if(t===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof r=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}Sde(n,"querySelectors",{attributeName:i,querySelector:t,refSelector:e})}function Sde(t,e,n){const i=Ede(t,p_(t.constructor));i[e]||(i[e]=[]),i[e].push(n)}function Ede(t,e){return t.__agComponentMetaData||(t.__agComponentMetaData={}),t.__agComponentMetaData[e]||(t.__agComponentMetaData[e]={}),t.__agComponentMetaData[e]}var Qj=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class fL extends Le{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e;const n=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${n} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(!e){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(n=>{if(n.getModelAsString){const i=n.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.init(e)}}Qj([te("eFloatingFilterText")],fL.prototype,"eFloatingFilterText",void 0);Qj([R("columnModel")],fL.prototype,"columnModel",void 0);class Jj{constructor(e,n,i,r){this.alive=!0,this.context=e,this.eParent=r,n.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(r.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Qe(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var n;!((n=this.dateComp)===null||n===void 0)&&n.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}}class Zj{constructor(){this.customFilterOptions={}}init(e,n){this.filterOptions=e.filterOptions||n,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const n=[["displayKey"],["displayName"],["predicate","test"]],i=r=>r.some(s=>e[s]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${r}'`),!1);if(!n.every(i)){this.filterOptions=this.filterOptions.filter(r=>r===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const n=this.filterOptions[0];typeof n=="string"?this.defaultOption=n:n.displayKey?this.defaultOption=n.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}}const eY={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};var tY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Ts extends q{constructor(e,n={}){super(),this.eFocusableElement=e,this.callbacks=n,this.callbacks=Object.assign({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);r&&(r.focus(),i.preventDefault())}},n)}postConstruct(){this.eFocusableElement.classList.add(Ts.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",n=>{if(!(n.defaultPrevented||za(n))){if(this.callbacks.shouldStopEventPropagation(n)){fu(n);return}n.key===k.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}})}}Ts.FOCUS_MANAGED_CLASS="ag-focus-managed";tY([R("focusService")],Ts.prototype,"focusService",void 0);tY([Z],Ts.prototype,"postConstruct",null);var pL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const nY="ag-resizer-wrapper",bde=`<div class="${nY}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`;class F1 extends q{constructor(e,n){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},n)}center(){const{clientHeight:e,clientWidth:n}=this.offsetParent,i=n/2-this.getWidth()/2,r=e/2-this.getHeight()/2;this.offsetElement(i,r)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:n,minWidth:i,width:r,minHeight:s,height:o,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let u=0,c=0;const d=!!this.element.offsetParent;if(d){const h=this.findBoundaryElement(),f=window.getComputedStyle(h);if(f.minWidth!=null){const p=h.offsetWidth-this.element.offsetWidth;c=parseInt(f.minWidth,10)-p}if(f.minHeight!=null){const p=h.offsetHeight-this.element.offsetHeight;u=parseInt(f.minHeight,10)-p}}if(this.minHeight=s||u,this.minWidth=i||c,r&&this.setWidth(r),o&&this.setHeight(o),(!r||!o)&&this.refreshSize(),e)this.center();else if(a||l)this.offsetElement(a,l);else if(d&&n){let h=this.boundaryEl,f=!0;if(h||(h=this.findBoundaryElement(),f=!1),h){const p=parseFloat(h.style.top),g=parseFloat(h.style.left);f?this.offsetElement(isNaN(g)?0:g,isNaN(p)?0:p):this.setPosition(g,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,n){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:n,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(n=>{const r=!!e[n],s=this.getResizerElement(n),o={dragStartPixels:0,eElement:s,onDragStart:a=>this.onResizeStart(a,n),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,n)};(r||!this.isAlive()&&!r)&&(r?(this.dragService.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[n]=r)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:n}=this.lastSize;n!==-1&&(this.element.style.width=`${n}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:n}=this.config,i=this.element;let r=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ch(i,e),e=eL(i),r=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(r?(i.style.maxHeight="unset",i.style.minHeight="unset"):n?Ch(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:n}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:r.top,a=e?0:s.top;let l=0;if(n){const c=this.element.parentElement;if(c){const{bottom:d}=c.getBoundingClientRect();l=d-r.bottom}}return i+a-o-l}getWidth(){return this.element.offsetWidth}setWidth(e){const n=this.element,{popup:i}=this.config;let r=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Xs(n,e),e=__(n),r=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:s}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+o>s&&(e=s-o)}this.getWidth()!==e&&(r?(n.style.maxWidth="unset",n.style.minWidth="unset"):this.config.popup?Xs(n,e):(n.style.width=`${e}px`,n.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,n=0){const{forcePopupParentAsOffsetParent:i}=this.config,r=i?this.boundaryEl:this.element;r&&(this.popupService.positionPopup({ePopup:r,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:n})}),this.setPosition(parseFloat(r.style.left),parseFloat(r.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const n=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),n):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,n){this.position.x=e,this.position.y=n}updateDragStartPosition(e,n){this.dragStartPosition={x:e,y:n}}calculateMouseMovement(e){const{e:n,isLeft:i,isTop:r,anywhereWithin:s,topBuffer:o}=e,a=n.clientX-this.dragStartPosition.x,l=n.clientY-this.dragStartPosition.y,u=this.shouldSkipX(n,!!i,!!s,a)?0:a,c=this.shouldSkipY(n,!!r,o,l)?0:l;return{movementX:u,movementY:c}}shouldSkipX(e,n,i,r){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.x:s.left;let u=l<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=a.right;return u?!0:(n?u=r<0&&e.clientX>l+o.left||r>0&&e.clientX<l+o.left:i?u=r<0&&e.clientX>a.right||r>0&&e.clientX<l+o.left:u=r<0&&e.clientX>a.right||r>0&&e.clientX<a.right,u)}shouldSkipY(e,n,i=0,r){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.y:s.top;let u=l<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=a.bottom;return u?!0:(n?u=r<0&&e.clientY>l+o.top+i||r>0&&e.clientY<l+o.top:u=r<0&&e.clientY>a.bottom||r>0&&e.clientY<a.bottom,u)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(bde,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${nY}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,n){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!n.match(/top/i),isRight:!!n.match(/right/i),isBottom:!!n.match(/bottom/i),isLeft:!!n.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[n].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:r}=this.config;!i&&!r&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const n=this.element.parentElement;return n?Array.prototype.slice.call(n.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let n=0,i=0;for(let r=0;r<e.length;r++){const s=e[r],o=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let a=this.minHeight||0,l=this.minWidth||0;if(o){const u=window.getComputedStyle(s);u.minHeight&&(a=parseInt(u.minHeight,10)),u.minWidth&&(l=parseInt(u.minWidth,10))}else a=s.offsetHeight,l=s.offsetWidth;n+=a,i+=l}return{height:n,width:i}}applySizeToSiblings(e){let n=null;const i=this.getSiblings();if(i){for(let r=0;r<i.length;r++){const s=i[r];s!==n&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(n=i[r+1]))}n&&(n.style.removeProperty("height"),n.style.removeProperty("min-height"),n.style.removeProperty("max-height"),n.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:n,forcePopupParentAsOffsetParent:i}=this.config,{isTop:r,isRight:s,isBottom:o,isLeft:a}=this.currentResizer,l=s||a,u=o||r,{movementX:c,movementY:d}=this.calculateMouseMovement({e,isLeft:a,isTop:r}),h=this.position.x,f=this.position.y;let p=0,g=0;if(l&&c){const m=a?-1:1,y=this.getWidth(),v=y+c*m;let C=!1;a&&(p=y-v,(h+p<=0||v<=this.minWidth)&&(C=!0,p=0)),C||this.setWidth(v)}if(u&&d){const m=r?-1:1,y=this.getHeight(),v=y+d*m;let C=!1;r?(g=y-v,(f+g<=0||v<=this.minHeight)&&(C=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&y<v&&this.getMinSizeOfSiblings().height+v>this.element.parentElement.offsetHeight&&(C=!0),C||this.setHeight(v)}this.updateDragStartPosition(e.clientX,e.clientY),((n||i)&&p||g)&&this.offsetElement(h+p,f+g)}onResizeEnd(e,n){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const i={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[n].element.classList.remove("ag-active"),this.dispatchEvent(i)}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:n,y:i}=this.position;let r;this.config.calculateTopBuffer&&(r=this.config.calculateTopBuffer());const{movementX:s,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:r});this.offsetElement(n+s,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}}pL([R("popupService")],F1.prototype,"popupService",void 0);pL([R("resizeObserverService")],F1.prototype,"resizeObserverService",void 0);pL([R("dragService")],F1.prototype,"dragService",void 0);var gL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class zo extends Le{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null}postConstruct(){this.resetTemplate(),this.createManagedBean(new Ts(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new F1(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let n=this.getGui();n&&n.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,e),n=this.getGui(),n&&n.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=zo.isUseApplyButton(e),this.createButtonPanel()}createButtonPanel(){const{buttons:e}=this.providedFilterParams;if(!e||e.length<1||this.isReadOnly())return;const n=document.createElement("div");n.classList.add("ag-filter-apply-panel");const i=r=>{let s,o;switch(r){case"apply":s=this.translate("applyFilter"),o=u=>this.onBtApply(!1,!1,u);break;case"clear":s=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":s=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":s=this.translate("cancelFilter"),o=u=>{this.onBtCancel(u)};break;default:console.warn("AG Grid: Unknown button type specified");return}const l=Qn(`<button
                    type="${r==="apply"?"submit":"button"}"
                    ref="${r}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${s}
                </button>`);n.appendChild(l),this.addManagedListener(l,"click",o)};uL(e).forEach(r=>i(r)),this.getGui().appendChild(n)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=zo.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),n=Lo(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,n()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,n){const i=()=>{this.onUiChanged(!1,"prevent"),n==null||n()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const n=this.getModelFromUi();if(!this.isModelValid(n))return!1;const i=this.appliedModel;return this.appliedModel=n,!this.areModelsEqual(i,n)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,n=!1,i){if(i&&i.preventDefault(),this.applyModel(n?"rowDataUpdated":"ui")){const s="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:n,source:s})}const{closeOnApply:r}=this.providedFilterParams;r&&this.applyActive&&!e&&!n&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const n=e,i=n&&n.key;let r;(i==="Enter"||i==="Space")&&(r={keyboardEvent:n}),this.hidePopup(r),this.hidePopup=null}onUiChanged(e=!1,n){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi());dg(this.getRefElement("applyFilterButton"),!i)}e&&!n||n==="immediately"?this.onBtApply(e):(!this.applyActive&&!n||n==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const n=e==="floatingFilter",{positionableFeature:i,gridOptionsService:r}=this;n?(i.restoreLastSize(),i.setResizable(r.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,n){return zo.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:n}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,eY[e])}getCellValue(e){const{api:n,colDef:i,column:r,columnApi:s,context:o}=this.providedFilterParams;return this.providedFilterParams.valueGetter({api:n,colDef:i,column:r,columnApi:s,context:o,data:e.data,getValue:a=>e.data[a],node:e})}getPositionableElement(){return this.eFilterBody}}gL([R("rowModel")],zo.prototype,"rowModel",void 0);gL([te("eFilterBody")],zo.prototype,"eFilterBody",void 0);gL([Z],zo.prototype,"postConstruct",null);var xde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class mL extends Le{constructor(e,n){super(n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:n,labelWidth:i,labelAlignment:r}=this.config;e!=null&&this.setLabelSeparator(e),n!=null&&this.setLabel(n),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){Ti(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Qe(this.eLabel,!1),zn(this.eLabel,"presentation")):(Qe(this.eLabel,!0),zn(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(wv(this.eLabel,e),this)}setDisabled(e){e=!!e;const n=this.getGui();return dg(n,e),n.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}}xde([Z],mL.prototype,"postConstruct",null);class iY extends mL{constructor(e,n,i){super(e,n),this.className=i}postConstruct(){super.postConstruct(),this.className&&this.addCssClass(this.className)}onValueChange(e){return this.addManagedListener(this,x.EVENT_FIELD_VALUE_CHANGED,()=>e(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Xs(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,n){return this.value===e?this:(this.previousValue=this.value,this.value=e,n||this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED}),this)}}var M1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class vf extends iY{constructor(e,n,i,r){super(e,`<div class="ag-picker-field" role="presentation">
                <div ref="eLabel"></div>
                <div ref="eWrapper"
                    class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed"
                    tabIndex="-1"
                    aria-expanded="false"
                    ${r?`role="${r}"`:""}
                >
                    <div ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,n),this.pickerIcon=i,this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),(e==null?void 0:e.pickerGap)!=null&&(this.pickerGap=e.pickerGap)}postConstruct(){super.postConstruct();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e),Ej(this.eWrapper,e);const n=this.getGui();this.addManagedListener(n,"mousedown",r=>{var s;!this.skipClick&&(!((s=this.pickerComponent)===null||s===void 0)&&s.isAlive())&&bu(this.pickerComponent.getGui())&&n.contains(r.target)&&(this.skipClick=!0)});const i=this.getFocusableElement();if(this.addManagedListener(n,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"click",this.clickHandler.bind(this)),this.addManagedListener(i,"click",this.clickHandler.bind(this)),this.pickerIcon){const r=pn(this.pickerIcon,this.gridOptionsService);r&&this.eIcon.appendChild(r)}}refreshLabel(){B(this.getLabel())?C_(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),super.refreshLabel()}clickHandler(){if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||this.showPicker()}onKeyDown(e){switch(e.key){case k.UP:case k.DOWN:case k.ENTER:case k.SPACE:e.preventDefault(),this.clickHandler();break;case k.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gridOptionsService.getDocument(),n=this.pickerComponent.getGui();this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(e.body,"wheel",u=>{n.contains(u.target)||this.hidePicker()}));const i=this.localeService.getLocaleTextFunc(),{pickerType:r,pickerAriaLabelKey:s,pickerAriaLabelValue:o}=this.config,a={modal:!0,eChild:n,closeOnEsc:!0,closedCallback:()=>{const u=e.activeElement===e.body;this.beforeHidePicker(),u&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(s,o)},l=this.popupService.addPopup(a);return wv(n,__(this.eWrapper)),n.style.position="absolute",this.popupService.positionPopupByComponent({type:r,eventSource:this.eWrapper,ePopup:n,position:"under",keepWithinBounds:!0,nudgeY:this.pickerGap}),l.hideFunc}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){this.isAlive()&&($a(this.eWrapper,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e))}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var n;!((n=this.pickerComponent)===null||n===void 0)&&n.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setAriaLabel(e){return od(this.eWrapper,e),this}setInputWidth(e){return wv(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}destroy(){this.hidePicker(),super.destroy()}}M1([R("popupService")],vf.prototype,"popupService",void 0);M1([te("eLabel")],vf.prototype,"eLabel",void 0);M1([te("eWrapper")],vf.prototype,"eWrapper",void 0);M1([te("eDisplayField")],vf.prototype,"eDisplayField",void 0);M1([te("eIcon")],vf.prototype,"eIcon",void 0);var _de=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Jl extends Le{constructor(e="default"){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.options=[],this.itemEls=[]}init(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const n=e.key;switch(n){case k.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const s=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(s)}break;case k.DOWN:case k.UP:const i=n===k.DOWN;let r;if(e.preventDefault(),!this.highlightedEl)r=this.itemEls[i?0:this.itemEls.length-1];else{let o=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);o=Math.min(Math.max(o,0),this.itemEls.length-1),r=this.itemEls[o]}this.highlightItem(r);break}}addOptions(e){return e.forEach(n=>this.addOption(n)),this}addOption(e){const{value:n,text:i}=e,r=bi(i||n);return this.options.push({value:n,text:r}),this.renderOption(n,r),this.updateIndices(),this}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((n,i)=>{UN(n,i+1),zN(n,e.length)})}renderOption(e,n){const i=document.createElement("div");zn(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`),i.innerHTML=`<span>${n}</span>`,i.tabIndex=-1,this.itemEls.push(i),this.addManagedListener(i,"mouseover",()=>this.highlightItem(i)),this.addManagedListener(i,"mouseleave",()=>this.clearHighlighted()),this.addManagedListener(i,"click",()=>this.setValue(e)),this.getGui().appendChild(i)}setValue(e,n){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(),this;const i=this.options.findIndex(r=>r.value===e);if(i!==-1){const r=this.options[i];this.value=r.value,this.displayValue=r.text!=null?r.text:r.value,this.highlightItem(this.itemEls[i]),n||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(n=>n.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()}highlightItem(e){e.offsetParent&&(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(Jl.ACTIVE_CLASS),Gh(this.highlightedEl,!0),this.highlightedEl.focus())}clearHighlighted(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(Jl.ACTIVE_CLASS),Gh(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Jl.EVENT_ITEM_SELECTED})}}Jl.EVENT_ITEM_SELECTED="selectedItem";Jl.ACTIVE_CLASS="ag-active-item";_de([Z],Jl.prototype,"init",null);class cm extends vf{constructor(e){super(Object.assign({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list"},e),"ag-select","smallDown","listbox")}postConstruct(){var e;super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=(e=this.gridOptionsService.getNum("tabIndex"))!==null&&e!==void 0?e:0}createListComponent(){this.listComponent=this.createBean(new Jl("select")),this.listComponent.setParentComponent(this),this.listComponent.addGuiEventListener("keydown",e=>{e.key===k.TAB&&(e.preventDefault(),e.stopImmediatePropagation(),this.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:e.key,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,Jl.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:cm.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,x.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}showPicker(){if(!this.listComponent)return;super.showPicker(),this.listComponent.getGui().style.maxHeight=`${D1(this.popupService.getPopupParent())}px`;const e=this.listComponent.getGui();this.pickerFocusOutListener=this.addManagedListener(e,"focusout",n=>{e.contains(n.relatedTarget)||this.hidePicker()}),this.listComponent.refreshHighlighted()}beforeHidePicker(){this.pickerFocusOutListener&&(this.pickerFocusOutListener(),this.pickerFocusOutListener=void 0),super.beforeHidePicker()}addOptions(e){return e.forEach(n=>this.addOption(n)),this}addOption(e){return this.listComponent.addOption(e),this}setValue(e,n,i){return this.value===e||!this.listComponent?this:(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),super.setValue(e,n)))}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}}cm.EVENT_ITEM_SELECTED="selectedItem";var yL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Io extends iY{constructor(e,n,i="text",r="input"){super(e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${r} ref="eInput" class="ag-input-field-input"></${r}>
                </div>
            </div>`,n),this.inputType=i,this.displayFieldTag=r}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{width:e,value:n}=this.config;e!=null&&this.setWidth(e),n!=null&&this.setValue(n),this.addInputListeners(),this.activateTabIndex([this.eInput])}refreshLabel(){B(this.getLabel())?C_(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),super.refreshLabel()}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>this.setValue(e.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return wv(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const n=this.eInput;return n.maxLength=e,this}setInputPlaceholder(e){return Ua(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return od(this.eInput,e),this}setDisabled(e){return dg(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Ua(this.eInput,"autocomplete",null);else{const n=typeof e=="string"?e:"off";Ua(this.eInput,"autocomplete",n)}return this}}yL([te("eLabel")],Io.prototype,"eLabel",void 0);yL([te("eWrapper")],Io.prototype,"eWrapper",void 0);yL([te("eInput")],Io.prototype,"eInput",void 0);class T_ extends Io{constructor(e,n="ag-checkbox",i="checkbox"){super(e,n,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),n=this.getNextValue();this.passive?this.dispatchChange(n,e):this.setValue(n)}getValue(){return this.isSelected()}setValue(e,n){return this.refreshSelectedClass(e),this.setSelected(e,n),this}setName(e){const n=this.getInputElement();return n.name=e,this}isSelected(){return this.selected}setSelected(e,n){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,n||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,n,i){this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:n,event:i});const r=this.getInputElement(),s={type:x.EVENT_CHECKBOX_CHANGED,id:r.id,name:r.name,selected:e,previousValue:n};this.eventService.dispatchEvent(s)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const n=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,n,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}}class rY extends T_{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,x.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}}class vL{constructor(e,n,i){this.localeService=e,this.optionsFactory=n,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const n=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(n){const r=e;let{conditions:s}=r;if(!s){const{condition1:l,condition2:u}=r;s=[l,u]}const o=s.map(l=>this.getModelAsString(l)),a=r.operator==="AND"?"andCondition":"orCondition";return o.join(` ${i(a,eY[a])} `)}else{if(e.type===Ve.BLANK||e.type===Ve.NOT_BLANK)return i(e.type,e.type);{const r=e,s=this.optionsFactory.getCustomOption(r.type),{displayKey:o,displayName:a,numberOfInputs:l}=s||{};return o&&a&&l===0?(i(o,a),a):this.conditionToString(r,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var n;return this.valueFormatter?(n=this.valueFormatter(e??null))!==null&&n!==void 0?n:"":String(e)}}class Ve extends zo{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const n=this.optionsFactory.getCustomOption(e);if(n){const{numberOfInputs:r}=n;return r??1}const i=[Ve.EMPTY,Ve.NOT_BLANK,Ve.BLANK];return e&&i.indexOf(e)>=0?0:e===Ve.IN_RANGE?2:1}onFloatingFilterChanged(e,n){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(n),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((n,i)=>{i===0?n.setValue(e,!0):n.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,n){if(!e&&!n)return!0;if(!e&&n||e&&!n)return!1;const i=!e.operator,r=!n.operator;if(!i&&r||i&&!r)return!1;let o;if(i){const a=e,l=n;o=this.areSimpleModelsEqual(a,l)}else{const a=e,l=n;o=a.operator===l.operator&&sc(a.conditions,l.conditions,(u,c)=>this.areSimpleModelsEqual(u,c))}return o}setModelIntoUi(e){if(e.operator){let i=e;i.conditions||(i.conditions=[i.condition1,i.condition2]);const r=this.validateAndUpdateConditions(i.conditions),s=this.getNumConditions();if(r<s)this.removeConditionsAndOperators(r);else if(r>s)for(let a=s;a<r;a++)this.createJoinOperatorPanel(),this.createOption();const o=i.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),i.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Nn.resolve()}validateAndUpdateConditions(e){let n=e.length;return n>this.maxNumConditions&&(e.splice(this.maxNumConditions),et(()=>console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),"simpleFilterSetModelMaxNumConditions"),n=this.maxNumConditions),n}doesFilterPass(e){var n;const i=this.getModel();if(i==null)return!0;const{operator:r}=i,s=[];if(r){const a=i;s.push(...(n=a.conditions)!==null&&n!==void 0?n:[])}else s.push(i);return s[r&&r==="OR"?"some":"every"](a=>this.individualConditionPasses(e,a))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Zj,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var n,i;e.suppressAndOrCondition!=null&&et(()=>console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),"simpleFilterSuppressAndOrCondition"),e.alwaysShowBothConditions!=null&&et(()=>console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=(n=e.maxNumConditions)!==null&&n!==void 0?n:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(et(()=>console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.'),"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(i=e.numAlwaysVisibleConditions)!==null&&i!==void 0?i:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(et(()=>console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(et(()=>console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new cm);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const n=this.createValueElement();this.eConditionBodies.push(n),this.eFilterBody.appendChild(n),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,r=>this.resetInput(r)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const n=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const r=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(n,r,s),this.resetJoinOperatorOr(i,r,s),this.isReadOnly()||(n.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,n,i){const r=this.createManagedBean(new rY);return e.push(r),r.addCssClass("ag-filter-condition-operator"),r.addCssClass(`ag-filter-condition-operator-${i}`),n.appendChild(r.getGui()),r}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(n=>typeof n=="string"?this.createBoilerplateListOption(n):this.createCustomListOption(n))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(n=>{e.addOption(n)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:n}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:n,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(n)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let n=-1,i=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?n=r:i=!1;if(this.shouldAddNewConditionAtEnd(i))this.createJoinOperatorPanel(),this.createOption();else{const r=(e=this.lastUiCompletePosition)!==null&&e!==void 0?e:this.getNumConditions()-2;if(n<r){this.removeConditionsAndOperators(r+1);const s=n+1,o=r-s;o>0&&this.removeConditionsAndOperators(s,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=n}updateConditionStatusesAndValues(e,n){this.eTypes.forEach((r,s)=>{const o=this.isConditionDisabled(s,e);r.setDisabled(o||this.filterListOptions.length<=1),s===1&&(dg(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((r,s)=>{Qe(r,this.isConditionBodyVisible(s))});const i=(n??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((r,s)=>{r.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach((r,s)=>{r.setValue(i,!0)}),this.forEachInput((r,s,o,a)=>{this.setElementDisplayed(r,s<a),this.setElementDisabled(r,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,n){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,n),this.removeElements(this.eConditionBodies,e,n),this.removeValueElements(e,n);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,n),this.removeComponents(this.eJoinOperatorsAnd,i,n),this.removeComponents(this.eJoinOperatorsOr,i,n)}removeElements(e,n,i){this.removeItems(e,n,i).forEach(s=>zl(s))}removeComponents(e,n,i){this.removeItems(e,n,i).forEach(s=>{zl(s.getGui()),this.destroyBean(s)})}removeItems(e,n,i){return i==null?e.splice(n):e.splice(n,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const n=this.getInputs(0)[0];if(!n)return;n instanceof Io&&n.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();(!this.areModelsEqual(e,this.getModelFromUi())||this.hasInvalidInputs())&&this.resetUiToActiveModel(e);let n=-1,i=-1,r=!1;const s=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))n===-1&&(n=a,i=a);else{const l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),u=a<n;(l||u)&&(this.removeConditionsAndOperators(a,1),r=!0,u&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,s),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,n){let i=this.translate(e);if(g_(this.filterPlaceholder)){const r=this.filterPlaceholder,s=this.eTypes[n].getValue(),o=this.translate(s);i=r({filterOptionKey:s,filterOption:o,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((n,i,r,s)=>{if(!(n instanceof Io))return;const o=i===0&&s>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",a=i===0&&s>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");n.setInputPlaceholder(this.getPlaceholderText(o,r)),n.setInputAriaLabel(a)})}setElementValue(e,n){e instanceof Io&&e.setValue(n!=null?String(n):null,!0)}setElementDisplayed(e,n){e instanceof Le&&Qe(e.getGui(),n)}setElementDisabled(e,n){e instanceof Le&&dg(e.getGui(),n)}attachElementOnChange(e,n){e instanceof Io&&e.onValueChange(n)}forEachInput(e){this.getConditionTypes().forEach((n,i)=>{this.forEachPositionTypeInput(i,n,e)})}forEachPositionInput(e,n){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,n)}forEachPositionTypeInput(e,n,i){const r=this.getNumberOfInputs(n),s=this.getInputs(e);for(let o=0;o<s.length;o++){const a=s[o];a!=null&&i(a,o,e,r)}}isConditionDisabled(e,n){return this.isReadOnly()?!0:e===0?!1:e>n+1}isConditionBodyVisible(e){const n=this.getConditionType(e);return this.getNumberOfInputs(n)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===Ve.EMPTY||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)&&e.push(this.createCondition(n));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(n=>this.resetType(n)),this.eJoinOperatorsAnd.forEach((n,i)=>this.resetJoinOperatorAnd(n,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((n,i)=>this.resetJoinOperatorOr(n,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(n=>this.resetInput(n)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Nn.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,n,i){this.resetJoinOperator(e,n,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,n,i){this.resetJoinOperator(e,n,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,n,i,r,s){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(r),n)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,n)=>this.updateJoinOperatorDisabled(e,n)),this.eJoinOperatorsOr.forEach((e,n)=>this.updateJoinOperatorDisabled(e,n))}updateJoinOperatorDisabled(e,n){e.setDisabled(this.isReadOnly()||n>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,n){const i=this.mapValuesFromModel(e);this.forEachInput((r,s,o,a)=>{o===n&&this.setElementValue(r,i[s]!=null?i[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((n,i,r,s)=>{this.setElementValue(n,i===0&&r===0?e:null)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,n){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(n,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,n){const i=this.getCellValue(e.node),r=this.mapValuesFromModel(n),s=this.optionsFactory.getCustomOption(n.type),o=this.evaluateCustomFilter(s,r,i);return o??(i==null?this.evaluateNullValue(n.type):this.evaluateNonNullValue(r,i,n,e))}evaluateCustomFilter(e,n,i){if(e==null)return;const{predicate:r}=e;if(r!=null&&!n.some(s=>s==null))return r(n,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}}Ve.EMPTY="empty";Ve.BLANK="blank";Ve.NOT_BLANK="notBlank";Ve.EQUALS="equals";Ve.NOT_EQUAL="notEqual";Ve.LESS_THAN="lessThan";Ve.LESS_THAN_OR_EQUAL="lessThanOrEqual";Ve.GREATER_THAN="greaterThan";Ve.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";Ve.IN_RANGE="inRange";Ve.CONTAINS="contains";Ve.NOT_CONTAINS="notContains";Ve.STARTS_WITH="startsWith";Ve.ENDS_WITH="endsWith";class Xe extends Ve{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case Xe.EQUALS:case Xe.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case Xe.GREATER_THAN:case Xe.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case Xe.LESS_THAN:case Xe.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case Xe.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case Xe.BLANK:return!0;case Xe.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,n,i){const r=this.comparator(),s=e[0]!=null?r(e[0],n):0;switch(i.type){case Xe.EQUALS:return s===0;case Xe.NOT_EQUAL:return s!==0;case Xe.GREATER_THAN:return s>0;case Xe.GREATER_THAN_OR_EQUAL:return s>=0;case Xe.LESS_THAN:return s<0;case Xe.LESS_THAN_OR_EQUAL:return s<=0;case Xe.IN_RANGE:{const o=r(e[1],n);return this.scalarFilterParams.inRangeInclusive?s>=0&&o<=0:s>0&&o<0}case Xe.BLANK:return this.isBlank(n);case Xe.NOT_BLANK:return!this.isBlank(n);default:return console.warn('AG Grid: Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}}var Rde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const S4=1e3,E4=1/0;class sY extends vL{constructor(e,n,i){super(n,i),this.dateFilterParams=e}conditionToString(e,n){const{type:i}=e,{numberOfInputs:r}=n||{},s=i==Ve.IN_RANGE||r===2,o=Zo(e.dateFrom),a=Zo(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){const u=o!==null?DS(o,l):"null",c=a!==null?DS(a,l):"null";return`${u}-${c}`}return o!=null?DS(o,l):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}}class dm extends Xe{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=S4,this.maxValidYear=E4}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:n,dateTo:i,type:r}=e||{};return[n&&Zo(n)||null,i&&Zo(i)||null].slice(0,this.getNumberOfInputs(r))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,n){const i=n;return n==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const n=(i,r)=>{if(e[i]!=null)if(isNaN(e[i]))console.warn(`AG Grid: DateFilter ${i} is not a number`);else return e[i]==null?r:Number(e[i]);return r};this.minValidYear=n("minValidYear",S4),this.maxValidYear=n("maxValidYear",E4),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.filterModelFormatter=new sY(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const n=new Jj(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>n.destroy()),n}setElementValue(e,n){e.setDate(n)}setElementDisplayed(e,n){e.setDisplayed(n)}setElementDisabled(e,n){e.setDisabled(n)}getDefaultFilterOptions(){return dm.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,n,i,r){const s=document.createElement("div");s.classList.add(`ag-filter-${r}`),s.classList.add(`ag-filter-date-${r}`),n.push(s),e.appendChild(s),i.push(this.createDateCompWrapper(s))}removeValueElements(e,n){this.removeDateComps(this.dateConditionFromComps,e,n),this.removeDateComps(this.dateConditionToComps,e,n),this.removeItems(this.eConditionPanelsFrom,e,n),this.removeItems(this.eConditionPanelsTo,e,n)}removeDateComps(e,n,i){this.removeItems(e,n,i).forEach(s=>s.destroy())}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;const n=r=>r!=null&&r.getUTCFullYear()>=this.minValidYear&&r.getUTCFullYear()<=this.maxValidYear;let i=!0;return this.forEachInput((r,s,o,a)=>{o!==e||!i||s>=a||(i=i&&n(r.getDate()))}),i}areSimpleModelsEqual(e,n){return e.dateFrom===n.dateFrom&&e.dateTo===n.dateTo&&e.type===n.type}getFilterType(){return"date"}createCondition(e){const n=this.getConditionType(e),i={},r=this.getValues(e);return r.length>0&&(i.dateFrom=Ks(r[0])),r.length>1&&(i.dateTo=Ks(r[1])),Object.assign({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:n},i)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),n=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(r=>{r.setInputPlaceholder(n),r.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const n=[];return this.forEachPositionInput(e,(i,r,s,o)=>{r<o&&n.push(i.getDate())}),n}getModelAsString(e){var n;return(n=this.filterModelFormatter.getModelAsString(e))!==null&&n!==void 0?n:""}}dm.DEFAULT_FILTER_OPTIONS=[Xe.EQUALS,Xe.GREATER_THAN,Xe.LESS_THAN,Xe.NOT_EQUAL,Xe.IN_RANGE,Xe.BLANK,Xe.NOT_BLANK];Rde([R("userComponentFactory")],dm.prototype,"userComponentFactory",void 0);class oY extends Le{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const n=e.operator;let i;n?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e)}setSimpleParams(e){this.optionsFactory=new Zj,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;const n=this.isTypeEditable(this.lastType);this.setEditable(n)}onParamsUpdated(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const n=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=n||{};return i==null||i==1}isTypeEditable(e){const n=[Ve.IN_RANGE,Ve.EMPTY,Ve.BLANK,Ve.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&n.indexOf(e)<0}}var CL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class A_ extends oY{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return dm.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new sY(this.filterParams,this.localeService,this.optionsFactory);const n=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(n("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){super.onParamsUpdated(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams})}setEditable(e){Qe(this.eDateWrapper,e),Qe(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,n){if(this.isEventFromFloatingFilter(n)||this.isEventFromDataChange(n))return;super.setLastTypeFromModel(e);const i=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(i),i){if(e){const r=e;this.dateComp.setDate(Zo(r.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}onDateChanged(){const e=this.dateComp.getDate(),n=Ks(e);this.params.parentFilterInstance(i=>{if(i){const r=Zo(n);i.onFloatingFilterChanged(this.getLastType()||null,r)}})}getDateComponentParams(){const e=zo.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Lo(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Jj(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.getDateComponentParams(),{api:n,columnApi:i,context:r}=this.gridOptionsService;e.api=n,e.columnApi=i,e.context=r,this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}}CL([R("userComponentFactory")],A_.prototype,"userComponentFactory",void 0);CL([te("eReadOnlyText")],A_.prototype,"eReadOnlyText",void 0);CL([te("eDateWrapper")],A_.prototype,"eDateWrapper",void 0);var Tde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class aY extends Le{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const n=this.gridOptionsService.getDocument(),i=this.eDateInput.getInputElement();this.addManagedListener(i,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||i.focus()}),this.addManagedListener(i,"input",r=>{r.target===n.activeElement&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(e){const n=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&to(),n.type=i?"date":"text";const{minValidYear:r,maxValidYear:s}=e.filterParams||{};r&&(n.min=`${r}-01-01`),s&&(n.max=`${s}-12-31`)}onParamsUpdated(e){this.params=e,this.setParams(e)}getDate(){return Zo(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Ks(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:E_()||KN()||to()&&qN()>=14.1}}Tde([te("eDateInput")],aY.prototype,"eDateInput",void 0);class Cf extends Io{constructor(e,n="ag-text-field",i="text"){super(e,n,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,n){return this.eInput.value!==e&&(this.eInput.value=B(e)?e:""),super.setValue(e,n)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),n=i=>{R_(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListener(this.eInput,"keydown",n),this.addManagedListener(this.eInput,"paste",i=>{var r;const s=(r=i.clipboardData)===null||r===void 0?void 0:r.getData("text");s&&s.split("").some(o=>!e.test(o))&&i.preventDefault()})}}class wL extends Cf{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const e=parseFloat(this.eInput.value),n=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==n&&this.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const n=parseFloat(e);return this.min!=null&&n<this.min?e=this.min.toString():this.max!=null&&n>this.max&&(e=this.max.toString()),e}adjustPrecision(e,n){if(this.precision==null)return e;if(n){const r=parseFloat(e).toFixed(this.precision);return parseFloat(r).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Ua(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Ua(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Ua(this.eInput,"step",e),this)}setValue(e,n){return this.setValueOrInputValue(i=>super.setValue(i,n),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(n=>super.setValue(n,!0),n=>{this.eInput.value=n},e)}setValueOrInputValue(e,n,i){if(B(i)){let r=this.isScientificNotation(i);if(r&&this.eInput.validity.valid)return e(i);if(!r){i=this.adjustPrecision(i);const s=this.normalizeValue(i);r=i!=s}if(r)return n(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}}class lY extends vL{conditionToString(e,n){const{numberOfInputs:i}=n||{};return e.type==Ve.IN_RANGE||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}}function tP(t){const{allowedCharPattern:e}=t??{};return e??null}class N1 extends Xe{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}mapValuesFromModel(e){const{filter:n,filterTo:i,type:r}=e||{};return[this.processValue(n),this.processValue(i)].slice(0,this.getNumberOfInputs(r))}getDefaultDebounceMs(){return 500}comparator(){return(e,n)=>e===n?0:e<n?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new lY(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return N1.DEFAULT_FILTER_OPTIONS}setElementValue(e,n){const i=this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(n??null):n;super.setElementValue(e,i)}createValueElement(){const e=tP(this.numberFilterParams),n=document.createElement("div");return n.classList.add("ag-filter-body"),zn(n,"presentation"),this.createFromToElement(n,this.eValuesFrom,"from",e),this.createFromToElement(n,this.eValuesTo,"to",e),n}createFromToElement(e,n,i,r){const s=this.createManagedBean(r?new Cf({allowedCharPattern:r}):new wL);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),n.push(s),e.appendChild(s.getGui())}removeValueElements(e,n){this.removeComponents(this.eValuesFrom,e,n),this.removeComponents(this.eValuesTo,e,n)}getValues(e){const n=[];return this.forEachPositionInput(e,(i,r,s,o)=>{r<o&&n.push(this.processValue(this.stringToFloat(i.getValue())))}),n}areSimpleModelsEqual(e,n){return e.filter===n.filter&&e.filterTo===n.filterTo&&e.type===n.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let n=Ba(e);return n!=null&&n.trim()===""&&(n=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(n):n==null||n.trim()==="-"?null:parseFloat(n)}createCondition(e){const n=this.getConditionType(e),i={filterType:this.getFilterType(),type:n},r=this.getValues(e);return r.length>0&&(i.filter=r[0]),r.length>1&&(i.filterTo=r[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var n;return(n=this.filterModelFormatter.getModelAsString(e))!==null&&n!==void 0?n:""}hasInvalidInputs(){let e=!1;return this.forEachInput(n=>{if(!n.getInputElement().validity.valid){e=!0;return}}),e}}N1.DEFAULT_FILTER_OPTIONS=[Xe.EQUALS,Xe.NOT_EQUAL,Xe.LESS_THAN,Xe.LESS_THAN_OR_EQUAL,Xe.GREATER_THAN,Xe.GREATER_THAN_OR_EQUAL,Xe.IN_RANGE,Xe.BLANK,Xe.NOT_BLANK];class uY extends vL{conditionToString(e,n){const{numberOfInputs:i}=n||{};return e.type==Ve.IN_RANGE||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}}class Sn extends Ve{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const n=e&&e.trim();return n===""?e:n}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?Sn.DEFAULT_FORMATTER:Sn.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new uY(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(Ie.doOnce(()=>console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead."),"textCustomComparator.deprecated"),({filterOption:n,value:i,filterText:r})=>e(n,i,r)):this.textFilterParams.textMatcher||Sn.DEFAULT_MATCHER}createCondition(e){const n=this.getConditionType(e),i={filterType:this.getFilterType(),type:n},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(i.filter=r[0]),r.length>1&&(i.filterTo=r[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,n){return e.filter===n.filter&&e.filterTo===n.filterTo&&e.type===n.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,n){const i=[];return this.forEachPositionInput(e,(r,s,o,a)=>{var l;if(s<a){let u=Ba(r.getValue());n&&this.textFilterParams.trimInput&&(u=(l=Sn.trimInput(u))!==null&&l!==void 0?l:null,r.setValue(u,!0)),i.push(u)}}),i}getDefaultFilterOptions(){return Sn.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),zn(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,n,i){const r=this.createManagedBean(new Cf);r.addCssClass(`ag-filter-${i}`),r.addCssClass("ag-filter-filter"),n.push(r),e.appendChild(r.getGui())}removeValueElements(e,n){this.removeComponents(this.eValuesFrom,e,n),this.removeComponents(this.eValuesTo,e,n)}mapValuesFromModel(e){const{filter:n,filterTo:i,type:r}=e||{};return[n||null,i||null].slice(0,this.getNumberOfInputs(r))}evaluateNullValue(e){const n=[Ve.NOT_EQUAL,Ve.NOT_CONTAINS,Ve.BLANK];return e?n.indexOf(e)>=0:!1}evaluateNonNullValue(e,n,i,r){const s=e.map(p=>this.formatter(p))||[],o=this.formatter(n),{api:a,colDef:l,column:u,columnApi:c,context:d,textFormatter:h}=this.textFilterParams;if(i.type===Ve.BLANK)return this.isBlank(n);if(i.type===Ve.NOT_BLANK)return!this.isBlank(n);const f={api:a,colDef:l,column:u,columnApi:c,context:d,node:r.node,data:r.data,filterOption:i.type,value:o,textFormatter:h};return s.some(p=>this.matcher(Object.assign(Object.assign({},f),{filterText:p})))}getModelAsString(e){var n;return(n=this.filterModelFormatter.getModelAsString(e))!==null&&n!==void 0?n:""}}Sn.DEFAULT_FILTER_OPTIONS=[Ve.CONTAINS,Ve.NOT_CONTAINS,Ve.EQUALS,Ve.NOT_EQUAL,Ve.STARTS_WITH,Ve.ENDS_WITH,Ve.BLANK,Ve.NOT_BLANK];Sn.DEFAULT_FORMATTER=t=>t;Sn.DEFAULT_LOWERCASE_FORMATTER=t=>t==null?null:t.toString().toLowerCase();Sn.DEFAULT_MATCHER=({filterOption:t,value:e,filterText:n})=>{if(n==null)return!1;switch(t){case Sn.CONTAINS:return e.indexOf(n)>=0;case Sn.NOT_CONTAINS:return e.indexOf(n)<0;case Sn.EQUALS:return e===n;case Sn.NOT_EQUAL:return e!=n;case Sn.STARTS_WITH:return e.indexOf(n)===0;case Sn.ENDS_WITH:const i=e.lastIndexOf(n);return i>=0&&i===e.length-n.length;default:return!1}};var SL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class cY extends q{constructor(e){super(),this.params=e,this.valueChangedListener=()=>{}}setupGui(e){var n;this.eFloatingFilterTextInput=this.createManagedBean(new Cf((n=this.params)===null||n===void 0?void 0:n.config));const i=this.eFloatingFilterTextInput.getGui();e.appendChild(i),this.addManagedListener(i,"input",r=>this.valueChangedListener(r)),this.addManagedListener(i,"keydown",r=>this.valueChangedListener(r))}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,n){this.eFloatingFilterTextInput.setValue(e,n)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}}class L1 extends oY{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,n){this.isEventFromFloatingFilter(n)||this.isEventFromDataChange(n)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var n;this.params=e;const i=(n=e.browserAutoComplete)!==null&&n!==void 0?n:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=zo.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const r=zo.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),s=Lo(this.syncUpWithParentFilter.bind(this),r);this.floatingFilterInputService.setValueChangedListener(s)}}onParamsUpdated(e){super.onParamsUpdated(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const n=this.floatingFilterInputService.getValue();Ti(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(n,!0)}getAriaLabel(e){const n=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${n} ${i("ariaFilterInput","Filter Input")}`}syncUpWithParentFilter(e){const n=e.key===k.ENTER;if(this.applyActive&&!n)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Sn.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(r=>{r&&r.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}}SL([R("columnModel")],L1.prototype,"columnModel",void 0);SL([te("eFloatingFilterInputContainer")],L1.prototype,"eFloatingFilterInputContainer",void 0);SL([Z],L1.prototype,"postConstruct",null);class Ade extends q{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new wL),this.eFloatingFilterTextInput=this.createManagedBean(new Cf),this.eFloatingFilterTextInput.setDisabled(!0);const n=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(n),e.appendChild(i),this.setupListeners(n,r=>this.valueChangedListener(r)),this.setupListeners(i,r=>this.valueChangedListener(r))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,n){this.getActiveInputElement().setValue(e,n)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,n){this.addManagedListener(e,"input",n),this.addManagedListener(e,"keydown",n)}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}}class Dde extends L1{init(e){var n;super.init(e),this.filterModelFormatter=new lY(this.localeService,this.optionsFactory,(n=e.filterParams)===null||n===void 0?void 0:n.numberFormatter)}onParamsUpdated(e){tP(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.onParamsUpdated(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return N1.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=tP(e.filterParams),this.allowedCharPattern?this.createManagedBean(new cY({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Ade)}}class Ode extends L1{init(e){super.init(e),this.filterModelFormatter=new uY(this.localeService,this.optionsFactory)}onParamsUpdated(e){super.onParamsUpdated(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Sn.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new cY)}}class ln{constructor(e,n=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new Jo,this.eElement=e,this.preventMouseClick=n;const i=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",r,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let n=0;n<e.length;n++)if(e[n].identifier===this.touchStart.identifier)return e[n];return null}addEventListener(e,n){this.eventService.addEventListener(e,n)}removeEventListener(e,n){this.eventService.removeEventListener(e,n)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const n=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===n;if(this.touching&&i&&!this.moved){this.moved=!0;const r={type:ln.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(r)}},500)}onTouchMove(e){if(!this.touching)return;const n=this.getActiveTouch(e.touches);if(!n)return;!lL(n,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const n={type:ln.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(n),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>ln.DOUBLE_TAP_MILLIS){const i={type:ln.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}}ln.EVENT_TAP="tap";ln.EVENT_DOUBLE_TAP="doubleTap";ln.EVENT_LONG_TAP="longTap";ln.DOUBLE_TAP_MILLIS=500;var wf=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class As extends Le{constructor(e){super(),e||this.setTemplate(As.TEMPLATE)}attachCustomElements(e,n,i,r,s){this.eSortOrder=e,this.eSortAsc=n,this.eSortDesc=i,this.eSortMixed=r,this.eSortNone=s}setupSort(e,n=!1){this.column=e,this.suppressOrder=n,this.setupMultiSortIndicator(),this.column.getColDef().sortable&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,n,i){if(n==null)return;const r=pn(e,this.gridOptionsService,i);r&&n.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const n=e==="asc";Qe(this.eSortAsc,n,{skipAriaHidden:!0})}if(this.eSortDesc){const n=e==="desc";Qe(this.eSortDesc,n,{skipAriaHidden:!0})}if(this.eSortNone){const n=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon"),i=e==null;Qe(this.eSortNone,!n&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Qe(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const n=this.sortController.getColumnsWithSortingOrdered(),i=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!==null&&e!==void 0?e:-1,r=n.some(o=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(o))!==null&&a!==void 0?a:-1>=1}),s=i>=0&&r;Qe(this.eSortOrder,s,{skipAriaHidden:!0}),i>=0?this.eSortOrder.innerHTML=(i+1).toString():Ti(this.eSortOrder)}}As.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;wf([te("eSortOrder")],As.prototype,"eSortOrder",void 0);wf([te("eSortAsc")],As.prototype,"eSortAsc",void 0);wf([te("eSortDesc")],As.prototype,"eSortDesc",void 0);wf([te("eSortMixed")],As.prototype,"eSortMixed",void 0);wf([te("eSortNone")],As.prototype,"eSortNone",void 0);wf([R("columnModel")],As.prototype,"columnModel",void 0);wf([R("sortController")],As.prototype,"sortController",void 0);var Ds=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class ui extends Le{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=sj(this.params.template,ui.TEMPLATE);return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const n=bi(this.currentDisplayName);this.eText&&(this.eText.innerHTML=n)}}setupIcons(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)}addInIcon(e,n,i){if(n==null)return;const r=pn(e,this.gridOptionsService,i);r&&n.appendChild(r)}setupTap(){const{gridOptionsService:e}=this;if(e.is("suppressTouch"))return;const n=new ln(this.getGui(),!0),i=e.is("suppressMenuHide"),r=i&&B(this.eMenu),s=r?new ln(this.eMenu,!0):n;if(this.params.enableMenu){const o=r?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>{e.api.showColumnMenuAfterMouseClick(this.params.column,l.touchStart)};this.addManagedListener(s,ln[o],a)}if(this.params.enableSorting){const o=a=>{const l=a.touchStart.target;i&&this.eMenu.contains(l)||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(n,ln.EVENT_TAP,o)}this.addDestroyFunc(()=>n.destroy()),r&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){const e=!this.gridOptionsService.is("suppressMenuHide"),n=ad()&&e;return this.params.enableMenu&&!n}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){zl(this.eMenu);return}const e=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",()=>this.showMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",e)}showMenu(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new As(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;const e=this.gridOptionsService.get("multiSortKey")==="ctrl";this.addManagedListener(this.params.column,Ge.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",i=>{const r=this.params.column.isMoving(),o=new Date().getTime()-this.lastMovingChanged<50;if(!(r||o)){const l=e?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(l)}});const n=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const i=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),s=!(i==null?void 0:i.every(o=>this.params.column.getSort()==o.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,n),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,n)}setupFilterIcon(){this.eFilter&&(this.addManagedListener(this.params.column,Ge.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())}onFilterChanged(){const e=this.params.column.isFilterActive();Qe(this.eFilter,e,{skipAriaHidden:!0})}}ui.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;Ds([R("sortController")],ui.prototype,"sortController",void 0);Ds([R("menuFactory")],ui.prototype,"menuFactory",void 0);Ds([R("columnModel")],ui.prototype,"columnModel",void 0);Ds([te("eFilter")],ui.prototype,"eFilter",void 0);Ds([te("eSortIndicator")],ui.prototype,"eSortIndicator",void 0);Ds([te("eMenu")],ui.prototype,"eMenu",void 0);Ds([te("eLabel")],ui.prototype,"eLabel",void 0);Ds([te("eText")],ui.prototype,"eText",void 0);Ds([te("eSortOrder")],ui.prototype,"eSortOrder",void 0);Ds([te("eSortAsc")],ui.prototype,"eSortAsc",void 0);Ds([te("eSortDesc")],ui.prototype,"eSortDesc",void 0);Ds([te("eSortMixed")],ui.prototype,"eSortMixed",void 0);Ds([te("eSortNone")],ui.prototype,"eSortNone",void 0);var EL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Sf extends Le{constructor(){super(Sf.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){if(this.params.template){const n="AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";et(()=>console.warn(n),"HeaderGroupComp.templateNotSupported")}}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=r=>{if(za(r))return;const s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const n=r=>{fu(r)};this.addManagedListener(this.eCloseIcon,"dblclick",n),this.addManagedListener(this.eOpenIcon,"dblclick",n),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(i,bt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(i,bt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,n){const i=new ln(e,!0);this.addManagedListener(i,ln.EVENT_TAP,n),this.addDestroyFunc(()=>i.destroy()),this.addManagedListener(e,"click",n)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const n=this.params.columnGroup.isExpanded();Qe(this.eOpenIcon,n),Qe(this.eCloseIcon,!n)}else Qe(this.eOpenIcon,!1),Qe(this.eCloseIcon,!1)}addInIcon(e,n){const i=pn(e,this.gridOptionsService,null);i&&this.getRefElement(n).appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Qe(this.eOpenIcon,!1),Qe(this.eCloseIcon,!1);return}}setupLabel(){var e;const{displayName:n,columnGroup:i}=this.params;if(B(n)){const r=bi(n);this.getRefElement("agLabel").innerHTML=r}this.addOrRemoveCssClass("ag-sticky-label",!(!((e=i.getColGroupDef())===null||e===void 0)&&e.suppressStickyLabel))}}Sf.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;EL([R("columnModel")],Sf.prototype,"columnModel",void 0);EL([te("agOpened")],Sf.prototype,"eOpenIcon",void 0);EL([te("agClosed")],Sf.prototype,"eCloseIcon",void 0);class Ef extends Le{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}}var Pde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class I1 extends Ef{constructor(){super(I1.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),B(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const n=e.key;(n===k.LEFT||n===k.UP||n===k.RIGHT||n===k.DOWN||e.shiftKey&&n===k.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!B(e)&&!B(this.params.value)?this.params.value:this.params.parseValue(e)}}I1.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;Pde([te("eTextArea")],I1.prototype,"eTextArea",void 0);var dY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class bL extends Ef{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{values:n,value:i,eventKey:r}=e;if(Pe(n)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=r!=null?r===k.ENTER:!1;let s=!1;n.forEach(o=>{const a={value:o},l=this.valueFormatterService.formatValue(e.column,null,o),u=l!=null;a.text=u?l:o,this.eSelect.addOption(a),s=s||i===o}),s?this.eSelect.setValue(e.value,!0):e.values.length&&this.eSelect.setValue(e.values[0],!0),e.valueListGap!=null&&this.eSelect.setPickerGap(e.valueListGap),this.gridOptionsService.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,cm.EVENT_ITEM_SELECTED,()=>e.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}dY([R("valueFormatterService")],bL.prototype,"valueFormatterService",void 0);dY([te("eSelect")],bL.prototype,"eSelect",void 0);var Fde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class k1 extends Ef{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`),this.cellEditorInput=e}init(e){this.params=e;const n=this.eInput;this.cellEditorInput.init(n,e);let i;if(e.cellStartedEdit){this.focusAfterAttached=!0;const r=e.eventKey;r===k.BACKSPACE||e.eventKey===k.DELETE?i="":r&&r.length===1?i=r:(i=this.cellEditorInput.getStartValue(),r!==k.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&n.setStartValue(i),this.addManagedListener(n.getGui(),"keydown",r=>{const{key:s}=r;(s===k.PAGE_UP||s===k.PAGE_DOWN)&&r.preventDefault()})}afterGuiAttached(){var e,n;const i=this.localeService.getLocaleTextFunc(),r=this.eInput;if(r.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;to()||r.getFocusableElement().focus();const s=r.getInputElement();this.highlightAllOnFocus?s.select():(n=(e=this.cellEditorInput).setCaret)===null||n===void 0||n.call(e)}focusIn(){const e=this.eInput,n=e.getFocusableElement(),i=e.getInputElement();n.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}}Fde([te("eInput")],k1.prototype,"eInput",void 0);class Mde{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,n){this.eInput=e,this.params=n,n.maxLength!=null&&e.setMaxLength(n.maxLength)}getValue(){const e=this.eInput.getValue();return!B(e)&&!B(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),n=B(e)&&e.length||0;n&&this.eInput.getInputElement().setSelectionRange(n,n)}}class b4 extends k1{constructor(){super(new Mde)}}var Nde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const Lde="",Ide="";class G1 extends Le{constructor(){super(G1.TEMPLATE),this.refreshCount=0}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)}showDelta(e,n){const i=Math.abs(n),r=e.formatValue(i),s=B(r)?r:i,o=n>=0;o?this.eDelta.innerHTML=Lde+s:this.eDelta.innerHTML=Ide+s,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Ti(this.eDelta)}refresh(e){const n=e.value;if(n===this.lastValue||(B(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:B(e.value)?this.eValue.innerHTML=n:Ti(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof this.lastValue=="number"){const i=n-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=n,!0}}G1.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>';Nde([R("filterManager")],G1.prototype,"filterManager",void 0);var kde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class $1 extends Le{constructor(){super($1.TEMPLATE),this.refreshCount=0,this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=Qn('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)}refresh(e){let n=e.value;return Pe(n)&&(n=""),n===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(this.addSlideAnimation(),this.lastValue=n,B(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:B(e.value)?this.eCurrent.innerHTML=n:Ti(this.eCurrent),!0)}}$1.TEMPLATE=`<span>
            <span class="ag-value-slide-current"></span>
        </span>`;kde([R("filterManager")],$1.prototype,"filterManager",void 0);class re{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=re.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,n){const i=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,i,n);this.dispatchLocalEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,n,i){return{type:re.EVENT_DATA_CHANGED,node:this,oldData:n,newData:e,update:i}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const e=new re(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,n){const i=B(this.id)?this.createDaemonNode():null,r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);const s=this.createDataChangedEvent(e,r,!1);this.dispatchLocalEvent(s)}checkRowSelectable(){const e=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e){if(this.selectable!==e&&(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_SELECTABLE_CHANGED)),this.beans.gridOptionsService.is("groupSelectsChildren"))){const i=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:i??!1,source:"selectableChanged"})}}setId(e){const n=this.beans.gridOptionsService.getCallback("getRowId");if(n)if(this.data){const i=this.getGroupKeys(!0);this.id=n({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(re.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${re.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){const n=[];let i=this;for(e&&(i=i.parent);i&&i.level>=0;)n.push(i.key),i=i.parent;return n.reverse(),n}isPixelInRange(e){return!B(this.rowTop)||!B(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_GROUP_CHANGED)))}setRowHeight(e,n=!1){this.rowHeight=e,this.rowHeightEstimated=n,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Lo(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,n=!0,i=0;const r=this.__autoHeights;if(r==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=r[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let u=[];switch(a.getPinned()){case"left":u=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":u=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:u=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(u.includes(a)){e=!0;return}l=-1}else{e=!0;return}else n=!1;l>i&&(i=l)}),e)||((n||i<10)&&(i=this.beans.gridOptionsService.getRowHeightForNode(this).height),i==this.rowHeight))return;this.setRowHeight(i);const o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,n){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_EXPANDED_CHANGED));const i=Object.assign({},this.createGlobalRowEvent(x.EVENT_ROW_GROUP_OPENED),{expanded:e,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(i),this.beans.gridOptionsService.is("groupIncludeFooter")&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return{type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,n,i){const s=(()=>{var l;return typeof e!="string"?e:(l=this.beans.columnModel.getGridColumn(e))!==null&&l!==void 0?l:this.beans.columnModel.getPrimaryColumn(e)})(),o=this.getValueFromValueService(s);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(s,o,n,i),!1;const a=this.beans.valueService.setValue(this,s,n,i);return this.dispatchCellChangedEvent(s,n,o),this.checkRowSelectable(),a}getValueFromValueService(e){const n=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!n,r=this.beans.gridOptionsService.is("groupIncludeFooter"),s=this.beans.gridOptionsService.is("groupSuppressBlankHeader"),o=i&&r&&!s;return this.beans.valueService.getValue(e,this,!1,o)}dispatchEventForSaveValueReadOnly(e,n,i,r){const s={type:x.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:n,newValue:i,value:i,source:r};this.beans.eventService.dispatchEvent(s)}setGroupValue(e,n){const i=this.beans.columnModel.getGridColumn(e);Pe(this.groupData)&&(this.groupData={});const r=i.getColId(),s=this.groupData[r];s!==n&&(this.groupData[r]=n,this.dispatchCellChangedEvent(i,n,s))}setAggData(e){const n=KU([this.aggData,e]),i=this.aggData;this.aggData=e,this.eventService&&n.forEach(r=>{const s=this.beans.columnModel.getGridColumn(r),o=this.aggData?this.aggData[r]:void 0,a=i?i[r]:void 0;this.dispatchCellChangedEvent(s,o,a)})}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){const i=this.beans.gridOptionsService.isTreeData(),r=this.beans.gridOptionsService.get("isServerSideGroup");e=!this.stub&&!this.footer&&(i?!!r&&r(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(re.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&ls(this.childrenAfterGroup)}dispatchCellChangedEvent(e,n,i){const r={type:re.EVENT_CELL_CHANGED,node:this,column:e,newValue:n,oldValue:i};this.dispatchLocalEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!!(this.hasChildren()&&!this.footer||this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let n=!1,i=!1,r=!1;if(!(!((e=this.childrenAfterGroup)===null||e===void 0)&&e.length))return this.selectable?this.selected:null;for(let s=0;s<this.childrenAfterGroup.length;s++){const o=this.childrenAfterGroup[s];let a=o.isSelected();if(!o.selectable){const l=o.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:n=!0;break;case!1:i=!0;break;default:r=!0;break}}if(!(r||n&&i))return n?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,n,i="api"){const r=!this.selectable&&e,s=this.selected===e;if(r||s)return!1;this.selected=e,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(re.EVENT_ROW_SELECTED));const o=Object.assign(Object.assign({},this.createGlobalRowEvent(x.EVENT_ROW_SELECTED)),{event:n||null,source:i});return this.beans.eventService.dispatchEvent(o),!0}setSelected(e,n=!1,i="api"){if(typeof i=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:n,rangeSelect:!1,source:i})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Object.assign(Object.assign({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let n=this.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}addEventListener(e,n){this.eventService||(this.eventService=new Jo),this.eventService.addEventListener(e,n)}removeEventListener(e,n){this.eventService&&(this.eventService.removeEventListener(e,n),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(re.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(re.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let n=this,i=!0,r=!1,s=null;for(;i&&!r;){const o=n.parent;B(o)&&n.firstChild?o.rowGroupColumn===e&&(r=!0,s=o):i=!1,n=o}return r?s:null}isFullWidthCell(){const e=this.beans.gridOptionsService.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;const e=[];let n=this;for(;n.key!=null;)e.push(n.key),n=n.parent;return e.reverse()}createFooter(){if(this.sibling)return;const e=new re(this.beans);Object.keys(this).forEach(n=>{e[n]=this[n]}),e.footer=!0,e.setRowTop(null),e.setRowIndex(null),e.oldRowTop=null,e.id="rowGroupFooter_"+this.id,e.sibling=this,this.sibling=e}}re.ID_PREFIX_ROW_GROUP="row-group-";re.ID_PREFIX_TOP_PINNED="t-";re.ID_PREFIX_BOTTOM_PINNED="b-";re.OBJECT_ID_SEQUENCE=0;re.EVENT_ROW_SELECTED="rowSelected";re.EVENT_DATA_CHANGED="dataChanged";re.EVENT_CELL_CHANGED="cellChanged";re.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";re.EVENT_MASTER_CHANGED="masterChanged";re.EVENT_GROUP_CHANGED="groupChanged";re.EVENT_MOUSE_ENTER="mouseEnter";re.EVENT_MOUSE_LEAVE="mouseLeave";re.EVENT_HEIGHT_CHANGED="heightChanged";re.EVENT_TOP_CHANGED="topChanged";re.EVENT_DISPLAYED_CHANGED="displayedChanged";re.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";re.EVENT_LAST_CHILD_CHANGED="lastChildChanged";re.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";re.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";re.EVENT_EXPANDED_CHANGED="expandedChanged";re.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";re.EVENT_SELECTABLE_CHANGED="selectableChanged";re.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";re.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";re.EVENT_DRAGGING_CHANGED="draggingChanged";var hY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class D_ extends Le{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0),bj(this.eCheckbox.getInputElement(),"polite")}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),n=this.rowNode.isSelected(),i=S_(e,n),r=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(n,!0),this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}onClicked(e,n,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:n,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",r=>{fu(r)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",r=>{fu(r);const s=this.gridOptionsService.is("groupSelectsFiltered"),o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,s)?this.onClicked(!0,s,r||{})===0&&this.onClicked(!1,s,r):o?this.onClicked(!1,s,r):this.onClicked(!0,s,r||{})}),this.addManagedListener(this.rowNode,re.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const r=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,r),this.addManagedListener(this.rowNode,re.EVENT_DATA_CHANGED,r),this.addManagedListener(this.rowNode,re.EVENT_CELL_CHANGED,r),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,n){return n&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gridOptionsService.isRowModelType("clientSide")}showOrHideSelect(){var e,n,i,r;let s=this.rowNode.selectable;const o=this.getIsVisible();if(s)if(typeof o=="function"){const l=(e=this.overrides)===null||e===void 0?void 0:e.callbackParams,u=(n=this.column)===null||n===void 0?void 0:n.createColumnFunctionCallbackParams(this.rowNode);s=u?o(Object.assign(Object.assign({},l),u)):!1}else s=o??!1;if((i=this.column)===null||i===void 0?void 0:i.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if(!((r=this.overrides)===null||r===void 0)&&r.removeHidden){this.setDisplayed(s);return}this.setVisible(s)}getIsVisible(){var e,n;return this.overrides?this.overrides.isVisible:(n=(e=this.column)===null||e===void 0?void 0:e.getColDef())===null||n===void 0?void 0:n.checkboxSelection}}hY([te("eCheckbox")],D_.prototype,"eCheckbox",void 0);hY([Z],D_.prototype,"postConstruct",null);var bf=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Qr,er;(function(t){t[t.ToolPanel=0]="ToolPanel",t[t.HeaderCell=1]="HeaderCell",t[t.RowDrag=2]="RowDrag",t[t.ChartPanel=3]="ChartPanel"})(er||(er={}));var hg;(function(t){t[t.Up=0]="Up",t[t.Down=1]="Down"})(hg||(hg={}));var Fa;(function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"})(Fa||(Fa={}));let st=Qr=class extends q{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=Is("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Is("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Is("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Is("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Is("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Is("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Is("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Is("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Is("dropNotAllowed",this.gridOptionsService,null)}addDragSource(e,n=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:n};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}removeDragSource(e){const n=this.dragSourceAndParamsList.find(i=>i.dragSource===e);n&&(this.dragService.removeDragSource(n.params),zi(this.dragSourceAndParamsList,n))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,n){this.dragging=!0,this.dragSource=e,this.eventLastTime=n,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const n=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(n)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,n){var i,r,s,o;const a=this.getHorizontalDirection(e),l=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const u=this.dropTargets.filter(d=>this.isMouseOnDropTarget(e,d)),c=this.findCurrentDropTarget(e,u);if(c!==this.lastDropTarget)this.leaveLastTargetIfExists(e,a,l,n),this.lastDropTarget!==null&&c===null&&((r=(i=this.dragSource).onGridExit)===null||r===void 0||r.call(i,this.dragItem)),this.lastDropTarget===null&&c!==null&&((o=(s=this.dragSource).onGridEnter)===null||o===void 0||o.call(s,this.dragItem)),this.enterDragTargetIfExists(c,e,a,l,n),this.lastDropTarget=c;else if(c&&c.onDragging){const d=this.createDropTargetEvent(c,e,a,l,n);c.onDragging(d)}}getAllContainersFromDropTarget(e){const n=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return n?i.concat(n):i}allContainersIntersect(e,n){for(const i of n){const r=i.getBoundingClientRect();if(r.width===0||r.height===0)return!1;const s=e.clientX>=r.left&&e.clientX<r.right,o=e.clientY>=r.top&&e.clientY<r.bottom;if(!s||!o)return!1}return!0}isMouseOnDropTarget(e,n){const i=this.getAllContainersFromDropTarget(n);let r=!1;for(const s of i)if(this.allContainersIntersect(e,s)){r=!0;break}return n.targetContainsSource&&!n.getContainer().contains(this.dragSource.eElement)?!1:r&&n.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,n){const i=n.length;if(i===0)return null;if(i===1)return n[0];const s=this.gridOptionsService.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const a of n)if(uj(this.getAllContainersFromDropTarget(a)).indexOf(o)!==-1)return a;return null}enterDragTargetIfExists(e,n,i,r,s){if(e){if(e.onDragEnter){const o=this.createDropTargetEvent(e,n,i,r,s);e.onDragEnter(o)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,n,i,r){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const s=this.createDropTargetEvent(this.lastDropTarget,e,n,i,r);this.lastDropTarget.onDragLeave(s)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(n=>n.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}getHorizontalDirection(e){const n=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return n===i?null:n>i?Fa.Left:Fa.Right}getVerticalDirection(e){const n=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return n===i?null:n>i?hg.Up:hg.Down}createDropTargetEvent(e,n,i,r,s){const o=e.getContainer(),a=o.getBoundingClientRect(),{gridApi:l,columnApi:u,dragItem:c,dragSource:d}=this,h=n.clientX-a.left,f=n.clientY-a.top;return{event:n,x:h,y:f,vDirection:r,hDirection:i,dragSource:d,fromNudge:s,dragItem:c,api:l,columnApi:u,dropZoneTarget:o}}positionGhost(e){const n=this.eGhost;if(!n)return;const r=n.getBoundingClientRect().height,s=Lj()-2,o=Ij()-2,a=tL(n.offsetParent),{clientY:l,clientX:u}=e;let c=l-a.top-r/2,d=u-a.left-10;const h=this.gridOptionsService.getDocument(),f=h.defaultView||window,p=f.pageYOffset||h.documentElement.scrollTop,g=f.pageXOffset||h.documentElement.scrollLeft;s>0&&d+n.clientWidth>s+g&&(d=s+g-n.clientWidth),d<0&&(d=0),o>0&&c+n.clientHeight>o+p&&(c=o+p-n.clientHeight),c<0&&(c=0),n.style.left=`${d}px`,n.style.top=`${c}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Qn(Qr.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const n=this.eGhost.querySelector(".ag-dnd-ghost-label");let i=this.dragSource.dragItemName;g_(i)&&(i=i()),n.innerHTML=bi(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const r=this.gridOptionsService.getDocument();let s=null;try{s=r.fullscreenElement}catch{}finally{if(!s){const o=this.gridOptionsService.getRootNode(),a=o.querySelector("body");a?s=a:o instanceof ShadowRoot?s=o:s=o==null?void 0:o.documentElement}}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e,n=!1){Ti(this.eGhostIcon);let i=null;switch(e||(e=this.dragSource.defaultIconName||Qr.ICON_NOT_ALLOWED),e){case Qr.ICON_PINNED:i=this.ePinnedIcon;break;case Qr.ICON_MOVE:i=this.eMoveIcon;break;case Qr.ICON_LEFT:i=this.eLeftIcon;break;case Qr.ICON_RIGHT:i=this.eRightIcon;break;case Qr.ICON_GROUP:i=this.eGroupIcon;break;case Qr.ICON_AGGREGATE:i=this.eAggregateIcon;break;case Qr.ICON_PIVOT:i=this.ePivotIcon;break;case Qr.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case Qr.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",n),!(i===this.eHideIcon&&this.gridOptionsService.is("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};st.ICON_PINNED="pinned";st.ICON_MOVE="move";st.ICON_LEFT="left";st.ICON_RIGHT="right";st.ICON_GROUP="group";st.ICON_AGGREGATE="aggregate";st.ICON_PIVOT="pivot";st.ICON_NOT_ALLOWED="notAllowed";st.ICON_HIDE="hide";st.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;bf([R("dragService")],st.prototype,"dragService",void 0);bf([R("mouseEventService")],st.prototype,"mouseEventService",void 0);bf([R("columnApi")],st.prototype,"columnApi",void 0);bf([R("gridApi")],st.prototype,"gridApi",void 0);bf([Z],st.prototype,"init",null);bf([ur],st.prototype,"clearDragSourceParamsList",null);st=Qr=bf([me("dragAndDropService")],st);var H1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class $h extends Le{constructor(e,n,i,r,s,o){super(),this.cellValueFn=e,this.rowNode=n,this.column=i,this.customGui=r,this.dragStartPixels=s,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(pn("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gridOptionsService.is("rowDragManaged")?new gY(this,this.beans,this.rowNode,this.column):new pY(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,n){this.setTemplateFromElement(e),this.addDragSource(n)}getSelectedNodes(){if(!this.gridOptionsService.is("rowDragMultiRow"))return[this.rowNode];const n=this.beans.selectionService.getSelectedNodes();return n.indexOf(this.rowNode)!==-1?n:[this.rowNode]}checkCompatibility(){const e=this.gridOptionsService.is("rowDragManaged");this.gridOptionsService.isTreeData()&&e&&et(()=>console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true"),"RowDragComp.managedAndTreeData")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const n=e.getColDef();if(n.rowDragText)return n.rowDragText}return this.gridOptionsService.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const n=this.getRowDragText(this.column),i=this.localeService.getLocaleTextFunc();this.dragSource={type:er.RowDrag,eElement:this.getGui(),dragItemName:()=>{var r;const s=this.getDragItem(),o=((r=s.rowNodes)===null||r===void 0?void 0:r.length)||1;return n?n(s,o):o===1?this.cellValueFn():`${o} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}}H1([R("beans")],$h.prototype,"beans",void 0);H1([Z],$h.prototype,"postConstruct",null);H1([ur],$h.prototype,"removeDragSource",null);class fY extends q{constructor(e,n,i){super(),this.parent=e,this.rowNode=n,this.column=i}setDisplayedOrVisible(e){const n={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,n);else{let i=!0,r=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),r=g_(this.column.getColDef().rowDrag)),r?(this.parent.setDisplayed(!0,n),this.parent.setVisible(i,n)):(this.parent.setDisplayed(i,n),this.parent.setVisible(!0,n))}}}class pY extends fY{constructor(e,n,i,r){super(e,i,r),this.beans=n}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(e)}}H1([Z],pY.prototype,"postConstruct",null);class gY extends fY{constructor(e,n,i,r){super(e,i,r),this.beans=n}postConstruct(){this.addManagedListener(this.beans.eventService,x.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const n=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=n&&n.shouldPreventRowMove(),r=this.gridOptionsService.is("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),o=i&&!s||r;this.setDisplayedOrVisible(o)}}H1([Z],gY.prototype,"postConstruct",null);var W1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class xf extends q{init(e,n,i,r,s,o,a){this.params=a,this.eGui=n,this.eCheckbox=i,this.eExpanded=r,this.eContracted=s,this.comp=e,this.compClass=o;const l=this.isTopLevelFooter(),u=this.isEmbeddedRowMismatch(),c=a.value==null&&!a.node.master;let d=!1;if(this.gridOptionsService.is("groupIncludeFooter")&&this.gridOptionsService.is("groupHideOpenParents")){const h=a.node;if(h.footer){const f=a.colDef&&a.colDef.showRowGroup,p=h.rowGroupColumn&&h.rowGroupColumn.getColId();d=f!==p}}this.cellIsBlank=l?!1:u||c&&!a.node.master||d,!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded())}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eParentOfValue:n}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){_j(n);return}const i=()=>{$a(n,!!e.expanded)};this.expandListener=this.addManagedListener(e,re.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gridOptionsService.is("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;const e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;const i=this.columnModel.getRowGroupColumns();return!i||i.length===0?!0:i[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;const e=this.params.pinned==="left",n=this.params.pinned==="right",i=!e&&!n;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!n:!i:this.columnModel.isPinningLeft()?!e:!i}findDisplayedGroupNode(){const e=this.params.column,n=this.params.node;if(this.showingValueForOpenedParent){let i=n.parent;for(;i!=null;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}Pe(this.displayedGroupNode)&&(this.displayedGroupNode=n)}setupShowingValueForOpenedParent(){const e=this.params.node,n=this.params.column;if(!this.gridOptionsService.is("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}if(e.rowGroupColumn!=null){const s=e.rowGroupColumn.getId();if(n.isRowGroupDisplayed(s)){this.showingValueForOpenedParent=!1;return}}const r=e.groupData[n.getId()]!=null;this.showingValueForOpenedParent=r}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){const e=this.adjustParamsWithDetailsFromRelatedColumn(),n=this.getInnerCompDetails(e),{valueFormatted:i,value:r}=e;let s=i;s==null&&(r===""&&this.params.node.group?s=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):s=r??null),this.comp.setInnerRenderer(n,s)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,n=this.params.column;if(!e)return this.params;if(n!=null&&!n.isRowGroupDisplayed(e.getId()))return this.params;const r=this.params,{value:s,node:o}=this.params,a=this.valueFormatterService.formatValue(e,o,s);return Object.assign(Object.assign({},r),{valueFormatted:a})}addFooterValue(){const e=this.params.footerValueGetter;let n="";if(e){const r=kN(this.params);r.value=this.params.value,typeof e=="function"?n=e(r):typeof e=="string"?n=this.expressionService.evaluate(e,r):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else n="Total "+(this.params.value!=null?this.params.value:"");const i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,n)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);const n=this.userComponentFactory.getInnerRendererDetails(e,e),i=a=>a&&a.componentClass==this.compClass;if(n&&!i(n))return n;const r=this.displayedGroupNode.rowGroupColumn,s=r?r.getColDef():void 0;if(!s)return;const o=this.userComponentFactory.getCellRendererDetails(s,e);if(o&&!i(o))return o;if(i(o)&&s.cellRendererParams&&s.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(s.cellRendererParams,e)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,re.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,r=this.isShowRowGroupForThisRow()&&e!=null&&e>=0?`(${e})`:"";this.comp.setChildCount(r)}isShowRowGroupForThisRow(){if(this.gridOptionsService.isTreeData())return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const n=this.params.column;return n==null||n.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const n=this.params,i=pn("groupExpanded",this.gridOptionsService,null),r=pn("groupContracted",this.gridOptionsService,null);i&&this.eExpanded.appendChild(i),r&&this.eContracted.appendChild(r);const s=n.eGridCell;!(((e=this.params.column)===null||e===void 0?void 0:e.isCellEditable(n.node))&&this.gridOptionsService.is("enableGroupEdit"))&&this.isExpandable()&&!n.suppressDoubleClickExpand&&this.addManagedListener(s,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(s,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(n.node,re.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const a=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,re.EVENT_ALL_CHILDREN_COUNT_CHANGED,a),this.addManagedListener(this.displayedGroupNode,re.EVENT_MASTER_CHANGED,a),this.addManagedListener(this.displayedGroupNode,re.EVENT_GROUP_CHANGED,a),this.addManagedListener(this.displayedGroupNode,re.EVENT_HAS_CHILDREN_CHANGED,a)}onExpandClicked(e){za(e)||(fu(e),this.onExpandOrContract(e))}onExpandOrContract(e){const n=this.displayedGroupNode,i=!n.expanded;!i&&n.sticky&&this.scrollToStickyNode(n),n.setExpanded(i,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,n=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!n))return!1;const r=this.params.column;return r!=null&&typeof r.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:n,columnModel:i}=this,{node:r}=e,s=this.isExpandable();if(s){const c=this.showingValueForOpenedParent?!0:r.expanded;this.comp.setExpandedDisplayed(c),this.comp.setContractedDisplayed(!c)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const o=i.isPivotMode(),a=o&&n.leafGroup,l=s&&!a,u=r.footer&&r.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",l),this.comp.addOrRemoveCssClass("ag-row-group",l),o?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",a):u||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!l)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListener(e,re.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gridOptionsService.is("groupHideOpenParents"))return;const e=this.params,n=e.node,i=!!e.colDef,r=this.gridOptionsService.isTreeData(),o=!i||r||e.colDef.showRowGroup===!0?n.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+o,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new $h(()=>this.params.value,this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return typeof e=="function"||e===!0}addCheckboxIfNeeded(){const e=this.displayedGroupNode,n=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(n){const i=new D_;this.getContext().createBean(i),i.init({rowNode:e,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(n)}onKeyDown(e){!(e.key===k.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(za(e))return;HE(this.eExpanded,e)||HE(this.eContracted,e)||this.onExpandOrContract(e)}}W1([R("expressionService")],xf.prototype,"expressionService",void 0);W1([R("valueFormatterService")],xf.prototype,"valueFormatterService",void 0);W1([R("columnModel")],xf.prototype,"columnModel",void 0);W1([R("userComponentFactory")],xf.prototype,"userComponentFactory",void 0);W1([R("ctrlsService")],xf.prototype,"ctrlsService",void 0);var V1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Lc=class mY extends Le{constructor(){super(mY.TEMPLATE)}init(e){const n={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.innerHTML=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>Qe(this.eContracted,o),setExpandedDisplayed:o=>Qe(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},i=this.createManagedBean(new xf),r=!e.colDef,s=this.getGui();i.init(n,s,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),r&&zn(s,"gridcell")}setRenderDetails(e,n){if(e){const i=e.newAgStackInstance();if(!i)return;i.then(r=>{if(!r)return;const s=()=>this.context.destroyBean(r);this.isAlive()?(this.eValue.appendChild(r.getGui()),this.addDestroyFunc(s)):s()})}else this.eValue.innerText=n}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};Lc.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;V1([te("eExpanded")],Lc.prototype,"eExpanded",void 0);V1([te("eContracted")],Lc.prototype,"eContracted",void 0);V1([te("eCheckbox")],Lc.prototype,"eCheckbox",void 0);V1([te("eValue")],Lc.prototype,"eValue",void 0);V1([te("eChildCount")],Lc.prototype,"eChildCount",void 0);var yY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class hm extends Le{constructor(){super(hm.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=pn("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);const n=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=n("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}}hm.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;yY([te("eLoadingIcon")],hm.prototype,"eLoadingIcon",void 0);yY([te("eLoadingText")],hm.prototype,"eLoadingText",void 0);let vY=class CY extends Le{constructor(){super()}destroy(){super.destroy()}init(e){var n;const i=(n=this.gridOptionsService.get("overlayLoadingTemplate"))!==null&&n!==void 0?n:CY.DEFAULT_LOADING_OVERLAY_TEMPLATE,r=this.localeService.getLocaleTextFunc(),s=i.replace("[LOADING...]",r("loadingOoo","Loading..."));this.setTemplate(s)}};vY.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>';let wY=class SY extends Le{constructor(){super()}destroy(){super.destroy()}init(e){var n;const i=(n=this.gridOptionsService.get("overlayNoRowsTemplate"))!==null&&n!==void 0?n:SY.DEFAULT_NO_ROWS_TEMPLATE,r=this.localeService.getLocaleTextFunc(),s=i.replace("[NO_ROWS_TO_SHOW]",r("noRowsToShow","No Rows To Show"));this.setTemplate(s)}};wY.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>';let Gde=class extends Ef{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:n}=e;this.getGui().innerHTML=bi(n)}};class $de{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,n){this.eInput=e,this.params=n,n.max!=null&&e.setMax(n.max),n.min!=null&&e.setMin(n.min),n.precision!=null&&e.setPrecision(n.precision),n.step!=null&&e.setStep(n.step),n.showStepperButtons&&e.getInputElement().classList.add("ag-number-field-input-stepper")}getValue(){const e=this.eInput.getValue();if(!B(e)&&!B(this.params.value))return this.params.value;let n=this.params.parseValue(e);if(n==null)return n;if(typeof n=="string"){if(n==="")return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}}class Hde extends k1{constructor(){super(new $de)}}class Wde{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,n){this.eInput=e,this.params=n,n.min!=null&&e.setMin(n.min),n.max!=null&&e.setMax(n.max),n.step!=null&&e.setStep(n.step)}getValue(){const e=this.eInput.getDate();return!B(e)&&!B(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ks(e,!1)}}class Vde extends k1{constructor(){super(new Wde)}}var Bde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class zde{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,n){this.eInput=e,this.params=n,n.min!=null&&e.setMin(n.min),n.max!=null&&e.setMax(n.max),n.step!=null&&e.setStep(n.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!B(e)&&!B(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){var e,n;return Ks((n=this.parseDate((e=this.params.value)!==null&&e!==void 0?e:void 0))!==null&&n!==void 0?n:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction()(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction()(e)}}class EY extends k1{constructor(){super(new zde(()=>this.dataTypeService))}}Bde([R("dataTypeService")],EY.prototype,"dataTypeService",void 0);var Ude=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class B1 extends Le{constructor(){super(B1.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.addManagedListener(this.eCheckbox.getInputElement(),"click",i=>{if(fu(i),this.eCheckbox.isDisabled())return;const r=this.eCheckbox.getValue();this.onCheckboxChanged(r)}),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",i=>{fu(i)});const n=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",i=>{if(i.key===k.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===n.activeElement&&this.eCheckbox.toggle();const r=this.eCheckbox.getValue();this.onCheckboxChanged(r),i.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var n,i,r;let s,o=!0;if(e.node.group&&e.column){const d=e.column.getColId();d.startsWith(gv)?s=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[d]!==void 0?s=(n=e.value)!==null&&n!==void 0?n:void 0:o=!1}else s=(i=e.value)!==null&&i!==void 0?i:void 0;if(!o){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(s);const a=e.disabled!=null?e.disabled:!(!((r=e.column)===null||r===void 0)&&r.isCellEditable(e.node));this.eCheckbox.setDisabled(a);const l=this.localeService.getLocaleTextFunc(),u=S_(l,s),c=a?u:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;this.eCheckbox.setInputAriaLabel(c)}onCheckboxChanged(e){const{column:n,node:i,rowIndex:r,value:s}=this.params,o={type:x.EVENT_CELL_EDITING_STARTED,column:n,colDef:n==null?void 0:n.getColDef(),data:i.data,node:i,rowIndex:r,rowPinned:i.rowPinned,value:s};this.eventService.dispatchEvent(o);const a=this.params.node.setDataValue(this.params.column,e,"edit"),l={type:x.EVENT_CELL_EDITING_STOPPED,column:n,colDef:n==null?void 0:n.getColDef(),data:i.data,node:i,rowIndex:r,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:a};this.eventService.dispatchEvent(l)}}B1.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;Ude([te("eCheckbox")],B1.prototype,"eCheckbox",void 0);var jde=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class bY extends Ef{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(e){var n;this.params=e;const i=(n=e.value)!==null&&n!==void 0?n:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,x.EVENT_FIELD_VALUE_CHANGED,r=>this.setAriaLabel(r.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const n=this.localeService.getLocaleTextFunc(),i=S_(n,e),r=n("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}}jde([te("eCheckbox")],bY.prototype,"eCheckbox",void 0);var xL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Sv=class extends q{constructor(){super(...arguments),this.agGridDefaults={agDateInput:aY,agColumnHeader:ui,agColumnGroupHeader:Sf,agSortIndicator:As,agTextColumnFloatingFilter:Ode,agNumberColumnFloatingFilter:Dde,agDateColumnFloatingFilter:A_,agReadOnlyFloatingFilter:fL,agAnimateShowChangeCellRenderer:G1,agAnimateSlideCellRenderer:$1,agGroupCellRenderer:Lc,agGroupRowRenderer:Lc,agLoadingCellRenderer:hm,agCheckboxCellRenderer:B1,agCellEditor:b4,agTextCellEditor:b4,agNumberCellEditor:Hde,agDateCellEditor:Vde,agDateStringCellEditor:EY,agSelectCellEditor:bL,agLargeTextCellEditor:I1,agCheckboxCellEditor:bY,agTextColumnFilter:Sn,agNumberColumnFilter:N1,agDateColumnFilter:dm,agLoadingOverlay:vY,agNoRowsOverlay:wY,agTooltipComponent:Gde},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:pe.SetFilterModule,agSetColumnFloatingFilter:pe.SetFilterModule,agMultiColumnFilter:pe.MultiFilterModule,agMultiColumnFloatingFilter:pe.MultiFilterModule,agGroupColumnFilter:pe.RowGroupingModule,agGroupColumnFloatingFilter:pe.RowGroupingModule,agRichSelect:pe.RichSelectModule,agRichSelectCellEditor:pe.RichSelectModule,agDetailCellRenderer:pe.MasterDetailModule,agSparklineCellRenderer:pe.SparklinesModule},this.jsComps={}}init(){this.gridOptions.components!=null&&qt(this.gridOptions.components,(e,n)=>this.registerJsComponent(e,n))}registerDefaultComponent(e,n){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=n}registerJsComponent(e,n){this.jsComps[e]=n}retrieve(e,n){const i=(l,u)=>({componentFromFramework:u,component:l}),r=this.getFrameworkOverrides().frameworkComponent(n,this.gridOptions.components);if(r!=null)return i(r,!0);const s=this.jsComps[n];if(s){const l=this.getFrameworkOverrides().isFrameworkComponent(s);return i(s,l)}const o=this.agGridDefaults[n];if(o)return i(o,!1);const a=this.enterpriseAgDefaultCompsModule[n];return a?oe.__assertRegistered(a,`AG Grid '${e}' component: ${n}`,this.context.getGridId()):et(()=>{this.warnAboutMissingComponent(e,n)},"MissingComp"+n),null}warnAboutMissingComponent(e,n){const i=[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],r=A1(n,i,!0,.8);console.warn(`AG Grid: Could not find '${n}' component. It was configured as "${e}: '${n}'" but it wasn't found in the list of registered components.`),r.length>0&&console.warn(`         Did you mean: [${r.slice(0,3)}]?`),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")}};xL([R("gridOptions")],Sv.prototype,"gridOptions",void 0);xL([Z],Sv.prototype,"init",null);Sv=xL([me("userComponentRegistry")],Sv);const Yde={propertyName:"dateComponent",cellRenderer:!1},qde={propertyName:"headerComponent",cellRenderer:!1},Kde={propertyName:"headerGroupComponent",cellRenderer:!1},x4={propertyName:"cellRenderer",cellRenderer:!0},Xde={propertyName:"cellEditor",cellRenderer:!1},_4={propertyName:"innerRenderer",cellRenderer:!0},Qde={propertyName:"loadingOverlayComponent",cellRenderer:!1},Jde={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Zde={propertyName:"tooltipComponent",cellRenderer:!1},nP={propertyName:"filter",cellRenderer:!1},ehe={propertyName:"floatingFilterComponent",cellRenderer:!1},the={propertyName:"toolPanel",cellRenderer:!1},nhe={propertyName:"statusPanel",cellRenderer:!1},ihe={propertyName:"fullWidthCellRenderer",cellRenderer:!0},rhe={propertyName:"loadingCellRenderer",cellRenderer:!0},she={propertyName:"groupRowRenderer",cellRenderer:!0},ohe={propertyName:"detailCellRenderer",cellRenderer:!0};class xY{static getFloatingFilterType(e){return this.filterToFloatingFilterMapping[e]}}xY.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var fm=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Ic=class extends q{getHeaderCompDetails(e,n){return this.getCompDetails(e,qde,"agColumnHeader",n)}getHeaderGroupCompDetails(e){const n=e.columnGroup.getColGroupDef();return this.getCompDetails(n,Kde,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,ihe,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,rhe,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,she,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,ohe,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,n){return this.getCompDetails(e,_4,null,n)}getFullWidthGroupRowInnerCellRenderer(e,n){return this.getCompDetails(e,_4,null,n)}getCellRendererDetails(e,n){return this.getCompDetails(e,x4,null,n)}getCellEditorDetails(e,n){return this.getCompDetails(e,Xde,"agCellEditor",n,!0)}getFilterDetails(e,n,i){return this.getCompDetails(e,nP,i,n,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,Yde,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,Qde,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,Jde,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,Zde,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,n){return this.getCompDetails(e,x4,null,n)}getFloatingFilterCompDetails(e,n,i){return this.getCompDetails(e,ehe,i,n)}getToolPanelCompDetails(e,n){return this.getCompDetails(e,the,null,n,!0)}getStatusPanelCompDetails(e,n){return this.getCompDetails(e,nhe,null,n,!0)}getCompDetails(e,n,i,r,s=!1){const{propertyName:o,cellRenderer:a}=n;let{compName:l,jsComp:u,fwComp:c,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:f}=this.getCompKeys(e,n,r);const p=v=>{const C=this.userComponentRegistry.retrieve(o,v);C&&(u=C.componentFromFramework?void 0:C.component,c=C.componentFromFramework?C.component:void 0)};if(l!=null&&p(l),u==null&&c==null&&i!=null&&p(i),u&&a&&!this.agComponentUtils.doesImplementIComponent(u)&&(u=this.agComponentUtils.adaptFunction(o,u)),!u&&!c){s&&console.error(`AG Grid: Could not find component ${l}, did you forget to configure this component?`);return}const g=this.mergeParamsWithApplicationProvidedParams(e,n,r,d),m=u==null,y=u||c;return{componentFromFramework:m,componentClass:y,params:g,type:n,popupFromSelector:h,popupPositionFromSelector:f,newAgStackInstance:()=>this.newAgStackInstance(y,m,g,n)}}getCompKeys(e,n,i){const{propertyName:r}=n;let s,o,a,l,u,c;if(e){const d=e,h=d[r+"Selector"],f=h?h(i):null,p=g=>{typeof g=="string"?s=g:g!=null&&g!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(g)?a=g:o=g)};f?(p(f.component),l=f.params,u=f.popup,c=f.popupPosition):p(d[r])}return{compName:s,jsComp:o,fwComp:a,paramsFromSelector:l,popupFromSelector:u,popupPositionFromSelector:c}}newAgStackInstance(e,n,i,r){const s=r.propertyName,o=!n;let a;if(o)a=new e;else{const u=this.componentMetadataProvider.retrieve(s);a=this.frameworkComponentWrapper.wrap(e,u.mandatoryMethodList,u.optionalMethodList,r)}const l=this.initComponent(a,i);return l==null?Nn.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(e,n,i,r=null){const s={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};ds(s,i);const o=e,a=o&&o[n.propertyName+"Params"];if(typeof a=="function"){const l=a(i);ds(s,l)}else typeof a=="object"&&ds(s,a);return ds(s,r),s}initComponent(e,n){if(this.context.createBean(e),e.init!=null)return e.init(n)}getDefaultFloatingFilterType(e,n){if(e==null)return null;let i=null,{compName:r,jsComp:s,fwComp:o}=this.getCompKeys(e,nP);return r?i=xY.getFloatingFilterType(r):s==null&&o==null&&e.filter===!0&&(i=n()),i}};fm([R("gridOptions")],Ic.prototype,"gridOptions",void 0);fm([R("agComponentUtils")],Ic.prototype,"agComponentUtils",void 0);fm([R("componentMetadataProvider")],Ic.prototype,"componentMetadataProvider",void 0);fm([R("userComponentRegistry")],Ic.prototype,"userComponentRegistry",void 0);fm([lt("frameworkComponentWrapper")],Ic.prototype,"frameworkComponentWrapper",void 0);Ic=fm([me("userComponentFactory")],Ic);var zE;(function(t){t[t.SINGLE_SHEET=0]="SINGLE_SHEET",t[t.MULTI_SHEET=1]="MULTI_SHEET"})(zE||(zE={}));var _L=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Ev=class extends q{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){const n=e.dragSource.eElement,i=e.mouseDownListener;if(n.removeEventListener("mousedown",i),e.touchEnabled){const r=e.touchStartListener;n.removeEventListener("touchstart",r,{passive:!0})}}removeDragSource(e){const n=this.dragSources.find(i=>i.dragSource===e);n&&(this.removeListener(n),zi(this.dragSources,n))}isDragging(){return this.dragging}addDragSource(e){const n=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:r,stopPropagationForTouch:s}=e;i.addEventListener("mousedown",n);let o=null;const a=this.gridOptionsService.is("suppressTouch");r&&!a&&(o=l=>{ZN(l.target)||(l.cancelable&&(l.preventDefault(),s&&l.stopPropagation()),this.onTouchStart(e,l))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:n,touchStartListener:o,touchEnabled:!!r})}getStartTarget(){return this.startTarget}onTouchStart(e,n){this.currentDragParams=e,this.dragging=!1;const i=n.touches[0];this.touchLastTime=i,this.touchStart=i;const r=u=>this.onTouchMove(u,e.eElement),s=u=>this.onTouchUp(u,e.eElement),o=u=>{u.cancelable&&u.preventDefault()},a=n.target,l=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:o,options:{passive:!1}},{target:a,type:"touchmove",listener:r,options:{passive:!0}},{target:a,type:"touchend",listener:s,options:{passive:!0}},{target:a,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,n){const i=n;if(e.skipMouseEvent&&e.skipMouseEvent(n)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,n.button!==0))return;this.shouldPreventMouseEvent(n)&&n.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=n,this.startTarget=n.target;const r=u=>this.onMouseMove(u,e.eElement),s=u=>this.onMouseUp(u,e.eElement),o=u=>u.preventDefault(),a=this.gridOptionsService.getRootNode(),l=[{target:a,type:"mousemove",listener:r},{target:a,type:"mouseup",listener:s},{target:a,type:"contextmenu",listener:o}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(n,e.eElement)}addTemporaryEvents(e){e.forEach(n=>{const{target:i,type:r,listener:s,options:o}=n;i.addEventListener(r,s,o)}),this.dragEndFunctions.push(()=>{e.forEach(n=>{const{target:i,type:r,listener:s,options:o}=n;i.removeEventListener(r,s,o)})})}isEventNearStartEvent(e,n){const{dragStartPixels:i}=this.currentDragParams,r=B(i)?i:4;return lL(e,n,r)}getFirstActiveTouch(e){for(let n=0;n<e.length;n++)if(e[n].identifier===this.touchStart.identifier)return e[n];return null}onCommonMove(e,n,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,n))return;this.dragging=!0;const r={type:x.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(r),this.currentDragParams.onDragStart(n),this.currentDragParams.onDragging(n)}this.currentDragParams.onDragging(e)}onTouchMove(e,n){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,n)}onMouseMove(e,n){this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,n)}shouldPreventMouseEvent(e){const n=this.gridOptionsService.is("enableCellTextSelection"),i=to(),r=e.type==="mousemove";return(n&&r||i)&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const n=e.target,i=n==null?void 0:n.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,n){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,n)}onMouseUp(e,n){this.onUpCommon(e,n)}onUpCommon(e,n){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const i={type:x.EVENT_DRAG_STOPPED,target:n};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};_L([R("mouseEventService")],Ev.prototype,"mouseEventService",void 0);_L([ur],Ev.prototype,"removeAllListeners",null);Ev=_L([me("dragService")],Ev);var Zl;(function(t){t[t.Above=0]="Above",t[t.Below=1]="Below"})(Zl||(Zl={}));var dt;(function(t){t.EVERYTHING="group",t.FILTER="filter",t.SORT="sort",t.MAP="map",t.AGGREGATE="aggregate",t.FILTER_AGGREGATES="filter_aggregates",t.PIVOT="pivot",t.NOTHING="nothing"})(dt||(dt={}));var ut=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};function ah(t){const e=t;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}let Je=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}registerOverlayWrapperComp(e){this.overlayWrapperComp=e}registerSideBarComp(e){this.sideBarComp=e}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()})}__getAlignedGridService(){return this.alignedGridsService}__getContext(){return this.context}getSetterMethod(e){return`set${e.charAt(0).toUpperCase()}${e.substring(1)}`}__setProperty(e,n){this.gos.set(e,n);const i=this.getSetterMethod(e),r=this;r[i]&&r[i](n)}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,n){this.detailGridInfoMap[e]=n}removeDetailGridInfo(e){this.detailGridInfoMap[e]=void 0}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let n=0;qt(this.detailGridInfoMap,(i,r)=>{B(r)&&(e(r,n),n++)})}getDataAsCsv(e){if(oe.__assertRegistered(pe.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){oe.__assertRegistered(pe.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}getExcelExportMode(e){const n=this.gos.get("defaultExcelExportParams");return Object.assign({exportMode:"xlsx"},n,e).exportMode}assertNotExcelMultiSheet(e,n){if(!oe.__assertRegistered(pe.ExcelExportModule,"api."+e,this.context.getGridId()))return!1;const i=this.getExcelExportMode(n);return this.excelCreator.getFactoryMode(i)===zE.MULTI_SHEET?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(!oe.__assertRegistered(pe.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId()))return;const n=this.getExcelExportMode(e);return this.excelCreator.setFactoryMode(zE.MULTI_SHEET,n),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(oe.__assertRegistered(pe.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){if(oe.__assertRegistered(pe.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(e)}setGridAriaProperty(e,n){if(!e)return;const i=this.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${e}`;n===null?i.removeAttribute(r):i.setAttribute(r,n)}logMissingRowModel(e,...n){console.error(`AG Grid: api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`)}setServerSideDatasource(e){this.serverSideRowModel?this.serverSideRowModel.setDatasource(e):this.logMissingRowModel("setServerSideDatasource","serverSide")}setCacheBlockSize(e){this.serverSideRowModel?(this.gos.set("cacheBlockSize",e),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")}setDatasource(e){this.gos.isRowModelType("infinite")?this.rowModel.setDatasource(e):this.logMissingRowModel("setDatasource","infinite")}setViewportDatasource(e){this.gos.isRowModelType("viewport")?this.rowModel.setViewportDatasource(e):this.logMissingRowModel("setViewportDatasource","viewport")}setRowData(e){if(this.immutableService==null){this.logMissingRowModel("setRowData","clientSide");return}this.immutableService.isActive()?this.immutableService.setRowData(e):(this.selectionService.reset(),this.clientSideRowModel.setRowData(e))}setPinnedTopRowData(e){this.pinnedRowModel.setPinnedTopRowData(e)}setPinnedBottomRowData(e){this.pinnedRowModel.setPinnedBottomRowData(e)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}setColumnDefs(e,n="api"){this.columnModel.setColumnDefs(e,n),this.gos.set("columnDefs",e,!0,{source:n})}setAutoGroupColumnDef(e,n="api"){this.gos.set("autoGroupColumnDef",e,!0,{source:n})}setDefaultColDef(e,n="api"){this.gos.set("defaultColDef",e,!0,{source:n})}setColumnTypes(e,n="api"){this.gos.set("columnTypes",e,!0,{source:n})}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}setAlwaysShowHorizontalScroll(e){this.gos.set("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.gos.set("alwaysShowVerticalScroll",e)}refreshCells(e={}){this.rowRenderer.refreshCells(e)}flashCells(e={}){this.rowRenderer.flashCells(e)}redrawRows(e={}){const n=e?e.rowNodes:void 0;this.rowRenderer.redrawRows(n)}setFunctionsReadOnly(e){this.gos.set("functionsReadOnly",e)}refreshHeader(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh())}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return this.rowModel}setRowNodeExpanded(e,n,i){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,n,i),e.setExpanded(n))}onGroupExpandedOrCollapsed(){if(Pe(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.clientSideRowModel.refreshModel({step:dt.MAP})}refreshClientSideRowModel(e){if(Pe(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")}addRenderedRowListener(e,n,i){this.rowRenderer.addRenderedRowListener(e,n,i)}getQuickFilter(){return this.gos.get("quickFilterText")}setQuickFilter(e){this.gos.set("quickFilterText",e)}setExcludeHiddenColumnsFromQuickFilter(e){Hs("30","setExcludeHiddenColumnsFromQuickFilter",void 0,"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `setIncludeHiddenColumnsInQuickFilter`"),this.setIncludeHiddenColumnsInQuickFilter(!e)}setIncludeHiddenColumnsInQuickFilter(e){this.gos.set("includeHiddenColumnsInQuickFilter",e)}getAdvancedFilterModel(){return oe.__assertRegistered(pe.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(e){oe.__assertRegistered(pe.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.setAdvancedFilterModel(e)}setEnableAdvancedFilter(e){this.gos.set("enableAdvancedFilter",e)}setIncludeHiddenColumnsInAdvancedFilter(e){this.gos.set("includeHiddenColumnsInAdvancedFilter",e)}setAdvancedFilterParent(e){this.gos.set("advancedFilterParent",e)}setNodesSelected(e){if(!e.nodes.every(a=>a.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):a.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:i,source:r,newValue:s}=e,o=i;this.selectionService.setNodesSelected({nodes:o,source:r??"api",newValue:s})}selectAll(e="apiSelectAll"){this.selectionService.selectAllRowNodes({source:e})}deselectAll(e="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return Pe(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()}setServerSideSelectionState(e){if(Pe(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setServerSideSelectionState(e)}selectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}sizeColumnsToFit(e){this.gridBodyCtrl.sizeColumnsToFit(e)}showLoadingOverlay(){this.overlayWrapperComp.showLoadingOverlay()}showNoRowsOverlay(){this.overlayWrapperComp.showNoRowsOverlay()}hideOverlay(){this.overlayWrapperComp.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Pe(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e,n="auto"){this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,n)}ensureIndexVisible(e,n){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,n)}ensureNodeVisible(e,n=null){this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,n)}forEachLeafNode(e){if(Pe(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,n){this.rowModel.forEachNode(e,n)}forEachNodeAfterFilter(e){if(Pe(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){if(Pe(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,n){return this.filterManager.getFilterInstance(e,n)}destroyFilter(e){const n=this.columnModel.getPrimaryColumn(e);if(n)return this.filterManager.destroyFilter(n,"api")}getStatusPanel(e){if(!oe.__assertRegistered(pe.StatusBarModule,"api.getStatusPanel",this.context.getGridId()))return;const n=this.statusBarService.getStatusPanel(e);return ah(n)}getColumnDef(e){const n=this.columnModel.getPrimaryColumn(e);return n?n.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(e="api"){this.filterManager.onFilterChanged({source:e})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.filterManager.setFilterModel(e)}getFilterModel(){return this.filterManager.getFilterModel()}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,n,i){this.focusService.setFocusedCell({rowIndex:e,column:n,rowPinned:i,forceBrowserFocus:!0})}setSuppressRowDrag(e){this.gos.set("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.gos.set("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.gos.set("suppressRowClickSelection",e)}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){const n=this.dragAndDropService.findExternalZone(e);n&&this.dragAndDropService.removeDropTarget(n)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}setHeaderHeight(e){this.gos.set("headerHeight",e)}setDomLayout(e){this.gos.set("domLayout",e)}setEnableCellTextSelection(e){this.gridBodyCtrl.setCellTextSelection(e)}setFillHandleDirection(e){this.gos.set("fillHandleDirection",e)}setGroupHeaderHeight(e){this.gos.set("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.gos.set("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.gos.set("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.gos.set("pivotGroupHeaderHeight",e)}setPivotMode(e){this.columnModel.setPivotMode(e)}setAnimateRows(e){this.gos.set("animateRows",e)}setIsExternalFilterPresent(e){this.gos.set("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.gos.set("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.gos.set("navigateToNextCell",e)}setTabToNextCell(e){this.gos.set("tabToNextCell",e)}setTabToNextHeader(e){this.gos.set("tabToNextHeader",e)}setNavigateToNextHeader(e){this.gos.set("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.gos.set("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.gos.set("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.gos.set("getBusinessKeyForNode",e)}setGetChildCount(e){this.gos.set("getChildCount",e)}setProcessRowPostCreate(e){this.gos.set("processRowPostCreate",e)}setGetRowId(e){this.gos.set("getRowId",e)}setGetRowClass(e){this.gos.set("getRowClass",e)}setIsFullWidthRow(e){this.gos.set("isFullWidthRow",e)}setIsRowSelectable(e){this.gos.set("isRowSelectable",e)}setIsRowMaster(e){this.gos.set("isRowMaster",e)}setPostSortRows(e){this.gos.set("postSortRows",e)}setGetDocument(e){this.gos.set("getDocument",e)}setGetContextMenuItems(e){this.gos.set("getContextMenuItems",e)}setGetMainMenuItems(e){this.gos.set("getMainMenuItems",e)}setProcessCellForClipboard(e){this.gos.set("processCellForClipboard",e)}setSendToClipboard(e){this.gos.set("sendToClipboard",e)}setProcessCellFromClipboard(e){this.gos.set("processCellFromClipboard",e)}setProcessSecondaryColDef(e){Hs("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(e)}setProcessSecondaryColGroupDef(e){Hs("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(e)}setProcessPivotResultColDef(e){this.gos.set("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.gos.set("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.gos.set("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.gos.set("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.gos.set("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.gos.set("paginationNumberFormatter",e)}setGetServerSideStoreParams(e){Hs("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(e)}setGetServerSideGroupLevelParams(e){this.gos.set("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.gos.set("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.gos.set("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.gos.set("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.gos.set("getServerSideGroupKey",e)}setGetRowStyle(e){this.gos.set("getRowStyle",e)}setGetRowHeight(e){this.gos.set("getRowHeight",e)}assertSideBarLoaded(e){return oe.__assertRegistered(pe.SideBarModule,"api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance")){const n=this.sideBarComp.getToolPanelInstance(e);return ah(n)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()}setSideBar(e){this.gos.set("sideBar",e)}setSuppressClipboardPaste(e){this.gos.set("suppressClipboardPaste",e)}resetRowHeights(){if(B(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setGroupRemoveSingleChildren(e){this.gos.set("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.gos.set("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.gos.set("groupDisplayType",e)}setRowClass(e){this.gos.set("rowClass",e)}setDeltaSort(e){this.gos.set("deltaSort",e)}setRowCount(e,n){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(e,n);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(e,n);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,n){let i=this.columnModel.getPrimaryColumn(e);return Pe(i)&&(i=this.columnModel.getGridColumn(e)),Pe(i)?null:this.valueService.getValue(i,n)}addEventListener(e,n){const i=this.gos.useAsyncEvents();this.eventService.addEventListener(e,n,i)}addGlobalListener(e){const n=this.gos.useAsyncEvents();this.eventService.addGlobalListener(e,n)}removeEventListener(e,n){const i=this.gos.useAsyncEvents();this.eventService.removeEventListener(e,n,i)}removeGlobalListener(e){const n=this.gos.useAsyncEvents();this.eventService.removeGlobalListener(e,n)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){if(this.destroyCalled)return;this.destroyCalled=!0;const e=this.ctrlsService.getGridCtrl();e&&e.destroyGridUi(),this.context.destroy()}cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid(){setTimeout(XU.bind(window,this,"Grid API"),100)}warnIfDestroyed(e){return this.destroyCalled&&console.warn(`AG Grid: Grid API method ${e} was called on a grid that was destroyed.`),this.destroyCalled}resetQuickFilter(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(oe.__assertRegistered(pe.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){if(this.rangeService){this.rangeService.addCellRange(e);return}oe.__assertRegistered(pe.RangeSelectionModule,"api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),oe.__assertRegistered(pe.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}getChartModels(){if(oe.__assertRegistered(pe.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()}getChartRef(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(e)}getChartImageDataURL(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(e)}downloadChart(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(e)}openChartToolPanel(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(e)}closeChartToolPanel(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(e.chartId)}createRangeChart(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(e)}createPivotChart(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(e)}createCrossFilterChart(e){if(oe.__assertRegistered(pe.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(e)}updateChart(e){oe.__assertRegistered(pe.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(e)}restoreChart(e,n){if(oe.__assertRegistered(pe.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(e,n)}copyToClipboard(e){oe.__assertRegistered(pe.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(e)}cutToClipboard(e){oe.__assertRegistered(pe.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(e,"api")}copySelectedRowsToClipboard(e){oe.__assertRegistered(pe.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(e)}copySelectedRangeToClipboard(e){oe.__assertRegistered(pe.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(e)}copySelectedRangeDown(){oe.__assertRegistered(pe.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()}pasteFromClipboard(){oe.__assertRegistered(pe.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()}showColumnMenuAfterButtonClick(e,n){const i=this.columnModel.getGridColumn(e);this.menuFactory.showMenuAfterButtonClick(i,n,"columnMenu")}showColumnMenuAfterMouseClick(e,n){let i=this.columnModel.getGridColumn(e);if(i||(i=this.columnModel.getPrimaryColumn(e)),!i){console.error(`AG Grid: column '${e}' not found`);return}this.menuFactory.showMenuAfterMouseEvent(i,n)}hidePopupMenu(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()}setPopupParent(e){this.gos.set("popupParent",e)}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(e={}){return this.rowRenderer.getCellRendererInstances(e).map(ah)}getCellEditorInstances(e={}){return this.rowRenderer.getCellEditorInstances(e).map(ah)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(e=!1){this.rowRenderer.stopEditing(e)}startEditingCell(e){const n=this.columnModel.getGridColumn(e.colKey);if(!n){console.warn(`AG Grid: no column found for ${e.colKey}`);return}const i={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:n};e.rowPinned==null&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e.rowIndex);const s=this.navigationService.getCellByPosition(i);s&&(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),s.startRowOrCellEdit(e.key))}addAggFunc(e,n){this.aggFuncService&&this.aggFuncService.addAggFunc(e,n)}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(e)}applyServerSideTransactionAsync(e,n){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(e,n)}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.clientSideRowModel.updateRowData(e)}applyTransactionAsync(e,n){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.clientSideRowModel.batchUpdateRowData(e,n)}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.clientSideRowModel.flushAsyncTransactions()}setSuppressModelUpdateAfterUpdateTransaction(e){this.gos.set("suppressModelUpdateAfterUpdateTransaction",e)}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(e)}refreshServerSideStore(e){return Hs("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(e)}getServerSideStoreState(){return Hs("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}setDataTypeDefinitions(e){this.gos.set("dataTypeDefinitions",e)}setPagination(e){this.gos.set("pagination",e)}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationSetPageSize(e){this.gos.set("paginationPageSize",e)}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}};ut([lt("immutableService")],Je.prototype,"immutableService",void 0);ut([lt("csvCreator")],Je.prototype,"csvCreator",void 0);ut([lt("excelCreator")],Je.prototype,"excelCreator",void 0);ut([R("rowRenderer")],Je.prototype,"rowRenderer",void 0);ut([R("navigationService")],Je.prototype,"navigationService",void 0);ut([R("filterManager")],Je.prototype,"filterManager",void 0);ut([R("columnModel")],Je.prototype,"columnModel",void 0);ut([R("selectionService")],Je.prototype,"selectionService",void 0);ut([R("gridOptionsService")],Je.prototype,"gos",void 0);ut([R("valueService")],Je.prototype,"valueService",void 0);ut([R("alignedGridsService")],Je.prototype,"alignedGridsService",void 0);ut([R("eventService")],Je.prototype,"eventService",void 0);ut([R("pinnedRowModel")],Je.prototype,"pinnedRowModel",void 0);ut([R("context")],Je.prototype,"context",void 0);ut([R("rowModel")],Je.prototype,"rowModel",void 0);ut([R("sortController")],Je.prototype,"sortController",void 0);ut([R("paginationProxy")],Je.prototype,"paginationProxy",void 0);ut([R("focusService")],Je.prototype,"focusService",void 0);ut([R("dragAndDropService")],Je.prototype,"dragAndDropService",void 0);ut([lt("rangeService")],Je.prototype,"rangeService",void 0);ut([lt("clipboardService")],Je.prototype,"clipboardService",void 0);ut([lt("aggFuncService")],Je.prototype,"aggFuncService",void 0);ut([R("menuFactory")],Je.prototype,"menuFactory",void 0);ut([lt("contextMenuFactory")],Je.prototype,"contextMenuFactory",void 0);ut([R("valueCache")],Je.prototype,"valueCache",void 0);ut([R("animationFrameService")],Je.prototype,"animationFrameService",void 0);ut([lt("statusBarService")],Je.prototype,"statusBarService",void 0);ut([lt("chartService")],Je.prototype,"chartService",void 0);ut([lt("undoRedoService")],Je.prototype,"undoRedoService",void 0);ut([lt("rowNodeBlockLoader")],Je.prototype,"rowNodeBlockLoader",void 0);ut([lt("ssrmTransactionManager")],Je.prototype,"serverSideTransactionManager",void 0);ut([R("ctrlsService")],Je.prototype,"ctrlsService",void 0);ut([Z],Je.prototype,"init",null);ut([ur],Je.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null);Je=ut([me("gridApi")],Je);var xu=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},iP;let no=iP=class extends q{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.quickFilter=null,this.quickFilterParts=null,this.processingFilterChange=!1,this.filterModelUpdateQueue=[]}init(){this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>{this.refreshFiltersForAggregations(),this.resetQuickFilterCache()}),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,()=>{this.resetQuickFilterCache(),this.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,()=>{this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache(),this.updateAdvancedFilterColumns()}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",()=>this.onIncludeHiddenColumnsInQuickFilterChanged()),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>this.updateAggFiltering()),this.addManagedPropertyListener("advancedFilterModel",e=>this.setAdvancedFilterModel(e.currentValue)),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:e})=>this.onAdvancedFilterEnabledChanged(e)),this.addManagedListener(this.eventService,x.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue())}isExternalFilterPresentCallback(){const e=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const n=this.gridOptionsService.get("doesExternalFilterPass");return typeof n=="function"?n(e):!1}setQuickFilterParts(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null}setFilterModel(e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push(e);return}const n=[],i=this.getFilterModel();if(e){const r=uL(Object.keys(e));this.allColumnFilters.forEach((s,o)=>{const a=e[o];n.push(this.setModelOnFilterWrapper(s.filterPromise,a)),r.delete(o)}),r.forEach(s=>{const o=this.columnModel.getPrimaryColumn(s)||this.columnModel.getGridColumn(s);if(!o){console.warn("AG Grid: setFilterModel() - no column found for colId: "+s);return}if(!o.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}const a=this.getOrCreateFilterWrapper(o,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}n.push(this.setModelOnFilterWrapper(a.filterPromise,e[s]))})}else this.allColumnFilters.forEach(r=>{n.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Nn.all(n).then(()=>{const r=this.getFilterModel(),s=[];this.allColumnFilters.forEach((o,a)=>{const l=i?i[a]:null,u=r?r[a]:null;Ie.jsonEquals(l,u)||s.push(o.column)}),s.length>0&&this.onFilterChanged({columns:s,source:"api"})})}setModelOnFilterWrapper(e,n){return new Nn(i=>{e.then(r=>{typeof r.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(r.setModel(n)||Nn.resolve()).then(()=>i())})})}getFilterModel(){const e={};return this.allColumnFilters.forEach((n,i)=>{const s=n.filterPromise.resolveNow(null,a=>a);if(s==null)return null;if(typeof s.getModel!="function"){console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel");return}const o=s.getModel();B(o)&&(e[i]=o)}),e}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var n;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):!((n=this.advancedFilterService)===null||n===void 0)&&n.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return(e=this.advancedFilterService)===null||e===void 0?void 0:e.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(e,n){return this.doColumnFiltersPass(e,n,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const e=r=>r?r.isFilterActive?r.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,n=!!this.gridOptionsService.getGroupAggFiltering(),i=r=>{if(!r.isPrimary())return!0;const o=!this.columnModel.isPivotActive();return!r.isValueActive()||!o?!1:this.columnModel.isPivotMode()?!0:n};this.allColumnFilters.forEach(r=>{if(r.filterPromise.resolveNow(!1,e)){const s=r.filterPromise.resolveNow(null,o=>o);i(r.column)?this.activeAggregateFilters.push(s):this.activeColumnFilters.push(s)}})}updateFilterFlagInColumns(e,n){this.allColumnFilters.forEach(i=>{const r=i.filterPromise.resolveNow(!1,s=>s.isFilterActive());i.column.setFilterActive(r,e,n)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()}doColumnFiltersPass(e,n,i){const{data:r,aggData:s}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,a=i?s:r;for(let l=0;l<o.length;l++){const u=o[l];if(!(u==null||u===n)){if(typeof u.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!u.doesFilterPass({node:e,data:a}))return!1}}return!0}parseQuickFilter(e){return B(e)?this.gridOptionsService.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){console.warn(`AG Grid - setQuickFilter() only supports string inputs, received: ${typeof e}`);return}const n=this.parseQuickFilter(e);this.quickFilter!==n&&(this.quickFilter=n,this.setQuickFilterParts(),this.onFilterChanged({source:"quickFilter"}))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}onIncludeHiddenColumnsInQuickFilterChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.onFilterChanged({source:"quickFilter"})}refreshFiltersForAggregations(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e){const n=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(n,0):n()}onFilterChanged(e={}){const{source:n,filterInstance:i,additionalEventAttributes:r,columns:s}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",r),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(a=>{a.filterPromise&&a.filterPromise.then(l=>{l&&l!==i&&l.onAnyFilterChanged&&l.onAnyFilterChanged()})});const o={source:n,type:x.EVENT_FILTER_CHANGED,columns:s||[]};r&&ds(o,r),this.processingFilterChange=!0,this.eventService.dispatchEvent(o),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilter!==null}updateAggFiltering(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())}doesRowPassOtherFilters(e,n){return this.doesRowPassFilter({rowNode:n,filterInstanceToSkip:e})}doesRowPassQuickFilterNoCache(e,n){return this.columnModel.getAllColumnsForQuickFilter().some(r=>{const s=this.getQuickFilterTextForColumn(r,e);return B(s)&&s.indexOf(n)>=0})}doesRowPassQuickFilterCache(e,n){return e.quickFilterAggregateText||this.aggregateRowForQuickFilter(e),e.quickFilterAggregateText.indexOf(n)>=0}doesRowPassQuickFilter(e){const n=this.gridOptionsService.is("cacheQuickFilter");return this.quickFilterParts.every(i=>n?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}getQuickFilterTextForColumn(e,n){let i=this.valueService.getValue(e,n,!0);const r=e.getColDef();if(r.getQuickFilterText){const s={value:i,node:n,data:n.data,column:e,colDef:r,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};i=r.getQuickFilterText(s)}return B(i)?i.toString().toUpperCase():null}aggregateRowForQuickFilter(e){const n=[];this.columnModel.getAllColumnsForQuickFilter().forEach(r=>{const s=this.getQuickFilterTextForColumn(r,e);B(s)&&n.push(s)}),e.quickFilterAggregateText=n.join(iP.QUICK_FILTER_SEPARATOR)}onNewRowsLoaded(e){this.allColumnFilters.forEach(n=>{n.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return({node:n})=>this.valueService.getValue(e,n,!0)}getFilterComponent(e,n,i=!0){var r;if(i)return((r=this.getOrCreateFilterWrapper(e,n))===null||r===void 0?void 0:r.filterPromise)||null;const s=this.cachedFilter(e);return s?s.filterPromise:null}isFilterActive(e){const n=this.cachedFilter(e);return!!n&&n.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(e,n){if(!e.isFilterAllowed())return null;let i=this.cachedFilter(e);if(i)n!=="NO_UI"&&this.putIntoGui(i,n);else{i=this.createFilterWrapper(e,n);const r=e.getColId();this.allColumnFilters.set(r,i),this.allColumnListeners.set(r,this.addManagedListener(e,Ge.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(r)))}return i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let n;if(oe.__isRegistered(pe.SetFilterModule,this.context.getGridId()))n="agSetColumnFilter";else{const i=e.getColDef().cellDataType;i==="number"?n="agNumberColumnFilter":i==="date"||i==="dateString"?n="agDateColumnFilter":n="agTextColumnFilter"}return n}getDefaultFloatingFilter(e){let n;if(oe.__isRegistered(pe.SetFilterModule,this.context.getGridId()))n="agSetColumnFloatingFilter";else{const i=e.getColDef().cellDataType;i==="number"?n="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?n="agDateColumnFloatingFilter":n="agTextColumnFloatingFilter"}return n}createFilterInstance(e){const n=this.getDefaultFilter(e),i=e.getColDef();let r;const s=Object.assign(Object.assign({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>{const a={type:x.EVENT_FILTER_MODIFIED,column:e,filterInstance:r};this.eventService.dispatchEvent(a)},filterChangedCallback:a=>{var l;const u=(l=a==null?void 0:a.source)!==null&&l!==void 0?l:"api",c={filterInstance:r,additionalEventAttributes:a,columns:[e],source:u};this.callOnFilterChangedOutsideRenderCycle(c)},doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(r,a)}),o=this.userComponentFactory.getFilterDetails(i,s,n);return o?{filterPromise:()=>{const a=o.newAgStackInstance();return a&&a.then(l=>r=l),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,n){return{column:e,colDef:kN(n),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),doesRowPassOtherFilter:()=>!0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}}createFilterWrapper(e,n){var i;const r={column:e,filterPromise:null,compiledElement:null,guiPromise:Nn.resolve(null),compDetails:null},{filterPromise:s,compDetails:o}=this.createFilterInstance(e);return r.filterPromise=(i=s==null?void 0:s())!==null&&i!==void 0?i:null,r.compDetails=o,s&&this.putIntoGui(r,n),r}putIntoGui(e,n){const i=document.createElement("div");i.className="ag-filter",e.guiPromise=new Nn(r=>{e.filterPromise.then(s=>{let o=s.getGui();B(o)||console.warn(`AG Grid: getGui method from filter returned ${o}, it should be a DOM element or an HTML template string.`),typeof o=="string"&&(o=Qn(o)),i.appendChild(o),r(i);const a={type:x.EVENT_FILTER_OPENED,column:e.column,source:n,eGui:i};this.eventService.dispatchEvent(a)})})}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((n,i)=>{let r;n.column.isPrimary()?r=this.columnModel.getPrimaryColumn(i):r=this.columnModel.getGridColumn(i),!r&&(e.push(n.column),this.disposeFilterWrapper(n,"columnChanged"),this.disposeColumnListener(i))}),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const e=this.columnModel.getGroupAutoColumns();e==null||e.forEach(n=>{n.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(n,"NO_UI")})}isFilterAllowed(e){var n,i;if(this.isAdvancedFilterEnabled()||!e.isFilterAllowed())return!1;const s=this.allColumnFilters.get(e.getColId());return(i=(n=s==null?void 0:s.filterPromise)===null||n===void 0?void 0:n.resolveNow(!0,o=>{var a,l;return typeof((a=o)===null||a===void 0?void 0:a.isFilterAllowed)=="function"?(l=o)===null||l===void 0?void 0:l.isFilterAllowed():!0}))!==null&&i!==void 0?i:!0}getFloatingFilterCompDetails(e,n){const i=e.getColDef(),r=this.createFilterParams(e,i),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,nP,r);let o=this.userComponentFactory.getDefaultFloatingFilterType(i,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");const l={column:e,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:u=>{const c=this.getFilterComponent(e,"NO_UI");c!=null&&c.then(d=>{u(ah(d))})},showParentFilter:n,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,l,o)}getCurrentFloatingFilterParentModel(e){const n=this.getFilterComponent(e,"NO_UI",!1);return n?n.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(e,n="api"){const i=e.getColId(),r=this.allColumnFilters.get(i);this.disposeColumnListener(i),r&&(this.disposeFilterWrapper(r,n),this.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const n=this.allColumnListeners.get(e);n&&(this.allColumnListeners.delete(e),n())}disposeFilterWrapper(e,n){e.filterPromise.then(i=>{(i.setModel(null)||Nn.resolve()).then(()=>{this.getContext().destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const r={type:x.EVENT_FILTER_DESTROYED,source:n,column:e.column};this.eventService.dispatchEvent(r)})})}checkDestroyFilter(e){const n=this.allColumnFilters.get(e);if(!n)return;const i=n.column,{compDetails:r}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};this.areFilterCompsDifferent(n.compDetails,r)&&this.destroyFilter(i,"columnChanged")}areFilterCompsDifferent(e,n){if(!n||!e)return!0;const{componentClass:i}=e,{componentClass:r}=n;return!(i===r||(i==null?void 0:i.render)&&(r==null?void 0:r.render)&&i.render===r.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){this.isAdvancedFilterEnabled()&&(this.advancedFilterService.setModel(e),this.onFilterChanged({source:"advancedFilter"}))}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){if(this.isAdvancedFilterEnabled())return!1;const e=this.columnModel.getAllGridColumns();return e?e.some(n=>n.getColDef().floatingFilter):!1}getFilterInstance(e,n){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}const i=this.getFilterInstanceImpl(e,s=>{if(!n)return;const o=ah(s);n(o)});return ah(i)}getFilterInstanceImpl(e,n){const i=this.columnModel.getPrimaryColumn(e);if(!i)return;const r=this.getFilterComponent(i,"NO_UI"),s=r&&r.resolveNow(null,o=>o);return s?setTimeout(n,0,s):r&&r.then(o=>{n(o)}),s}warnAdvancedFilters(){et(()=>{console.warn("AG Grid: Column Filter API methods have been disabled as Advanced Filters are enabled.")},"advancedFiltersCompatibility")}setupAdvancedFilterHeaderComp(e){var n;(n=this.advancedFilterService)===null||n===void 0||n.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(e=>this.setFilterModel(e)),this.filterModelUpdateQueue=[]}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};no.QUICK_FILTER_SEPARATOR=`
`;xu([R("valueService")],no.prototype,"valueService",void 0);xu([R("columnModel")],no.prototype,"columnModel",void 0);xu([R("rowModel")],no.prototype,"rowModel",void 0);xu([R("userComponentFactory")],no.prototype,"userComponentFactory",void 0);xu([R("rowRenderer")],no.prototype,"rowRenderer",void 0);xu([R("dataTypeService")],no.prototype,"dataTypeService",void 0);xu([lt("advancedFilterService")],no.prototype,"advancedFilterService",void 0);xu([Z],no.prototype,"init",null);no=iP=xu([me("filterManager")],no);class RL extends Le{constructor(e,n){super(e),this.ctrl=n}getCtrl(){return this.ctrl}}var z1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let _f=class _Y extends RL{constructor(e){super(_Y.TEMPLATE,e)}postConstruct(){const e=this.getGui(),n={addOrRemoveCssClass:(i,r)=>this.addOrRemoveCssClass(i,r),addOrRemoveBodyCssClass:(i,r)=>this.eFloatingFilterBody.classList.toggle(i,r),setButtonWrapperDisplayed:i=>Qe(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)};this.ctrl.setComp(n,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(n=>this.afterCompCreated(n))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};_f.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;z1([te("eFloatingFilterBody")],_f.prototype,"eFloatingFilterBody",void 0);z1([te("eButtonWrapper")],_f.prototype,"eButtonWrapper",void 0);z1([te("eButtonShowMainFilter")],_f.prototype,"eButtonShowMainFilter",void 0);z1([Z],_f.prototype,"postConstruct",null);z1([ur],_f.prototype,"destroyFloatingFilterComp",null);var ahe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},mn;(function(t){t.AUTO_HEIGHT="ag-layout-auto-height",t.NORMAL="ag-layout-normal",t.PRINT="ag-layout-print"})(mn||(mn={}));class O_ extends q{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),n={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=n.autoHeight?mn.AUTO_HEIGHT:n.print?mn.PRINT:mn.NORMAL;this.view.updateLayoutClasses(i,n)}getDomLayout(){var e;const n=(e=this.gridOptionsService.get("domLayout"))!==null&&e!==void 0?e:"normal";return["normal","print","autoHeight"].indexOf(n)===-1?(et(()=>console.warn(`AG Grid: ${n} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"warn about dom layout values"),"normal"):n}}ahe([Z],O_.prototype,"postConstruct",null);var ud=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},mi;(function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal"})(mi||(mi={}));var Wi;(function(t){t[t.Container=0]="Container",t[t.FakeContainer=1]="FakeContainer"})(Wi||(Wi={}));class _u extends q{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Lo(()=>this.lastScrollSource[mi.Horizontal]=null,500),this.resetLastVScrollDebounced=Lo(()=>this.lastScrollSource[mi.Vertical]=null,500)}postConstruct(){this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const e=this.ctrlsService.getFakeHScrollComp(),n=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));const i=this.gridOptionsService.is("debounceVerticalScrollbar"),r=i?Lo(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=i?Lo(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",r),n.onScrollCallback(s)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowContainerCtrl==null)return;e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());const i=this.enableRtl?e:-e,r=this.ctrlsService.getTopCenterRowContainerCtrl(),s=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),o=this.ctrlsService.getBottomCenterRowContainerCtrl(),a=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-i),o.setContainerTranslateX(i),r.setContainerTranslateX(i),s.setContainerTranslateX(i);const u=this.centerRowContainerCtrl.getViewportElement(),c=this.lastScrollSource[mi.Horizontal]===Wi.Container;e=Math.abs(e),c?a.setScrollPosition(e):Cv(u,e,this.enableRtl)}isControllingScroll(e,n){return this.lastScrollSource[n]==null?(this.lastScrollSource[n]=e,!0):this.lastScrollSource[n]===e}onFakeHScroll(){this.isControllingScroll(Wi.FakeContainer,mi.Horizontal)&&this.onHScrollCommon(Wi.FakeContainer)}onHScroll(){this.isControllingScroll(Wi.Container,mi.Horizontal)&&this.onHScrollCommon(Wi.Container)}onHScrollCommon(e){const n=this.centerRowContainerCtrl.getViewportElement(),{scrollLeft:i}=n;if(this.shouldBlockScrollUpdate(mi.Horizontal,i,!0))return;let r;e===Wi.Container?r=vv(n,this.enableRtl):r=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(r)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(Wi.FakeContainer,mi.Vertical)&&this.onVScrollCommon(Wi.FakeContainer)}onVScroll(){this.isControllingScroll(Wi.Container,mi.Vertical)&&this.onVScrollCommon(Wi.Container)}onVScrollCommon(e){let n;e===Wi.Container?n=this.eBodyViewport.scrollTop:n=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(mi.Vertical,n,!0)&&(this.animationFrameService.setScrollTop(n),this.nextScrollTop=n,e===Wi.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(n):this.eBodyViewport.scrollTop=n,this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const n=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===n||(this.scrollLeft=e,this.fireScrollEvent(mi.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.onHorizontalViewportChanged())}fireScrollEvent(e){const n={type:x.EVENT_BODY_SCROLL,direction:e===mi.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(n),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const i=Object.assign(Object.assign({},n),{type:x.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(e,n,i=!1){return i&&!ad()?!1:e===mi.Vertical?this.shouldBlockVerticalScroll(n):this.shouldBlockHorizontalScroll(n)}shouldBlockVerticalScroll(e){const n=D1(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+n>i}shouldBlockHorizontalScroll(e){const n=this.centerRowContainerCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowContainerCtrl.getViewportElement();if(this.enableRtl&&yv()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+n>i}redrawRowsAfterScroll(){this.fireScrollEvent(mi.Vertical)}onHorizontalViewportChanged(){this.centerRowContainerCtrl.onHorizontalViewportChanged()}checkScrollLeft(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(Wi.Container)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,n=!1){const r=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!n&&this.shouldBlockScrollUpdate(mi.Horizontal,e)&&(this.enableRtl&&yv()?e=e>0?0:r:e=Math.min(Math.max(e,0),r)),Cv(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}}getHScrollPosition(){return this.centerRowContainerCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const n=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(n+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-n}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,n=null){const i=this.rowModel.getRowCount();let r=-1;for(let s=0;s<i;s++){const o=this.rowModel.getRow(s);if(typeof e=="function"){if(o&&e(o)){r=s;break}}else if(e===o||e===o.data){r=s;break}}r>=0&&this.ensureIndexVisible(r,n)}ensureIndexVisible(e,n){if(this.gridOptionsService.isDomLayout("print"))return;const i=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=i){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel")||this.paginationProxy.goToPageWithIndex(e);const a=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),l=this.paginationProxy.getRow(e);let u;do{const c=l.rowTop,d=l.rowHeight,h=this.paginationProxy.getPixelOffset(),f=l.rowTop-h,p=f+l.rowHeight,g=this.getVScrollPosition(),m=this.heightScaler.getDivStretchOffset(),y=g.top+m,v=g.bottom+m,C=v-y,w=this.heightScaler.getScrollPositionForPixel(f),E=this.heightScaler.getScrollPositionForPixel(p-C),b=Math.min((w+E)/2,f),S=y+a>f,_=v<p;let A=null;n==="top"?A=w:n==="bottom"?A=E:n==="middle"?A=b:S?A=w-a:_&&(A=E),A!==null&&(this.setVerticalScrollPosition(A),this.rowRenderer.redraw({afterScroll:!0})),u=c!==l.rowTop||d!==l.rowHeight}while(u);this.animationFrameService.flushAllFrames()}ensureColumnVisible(e,n="auto"){const i=this.columnModel.getGridColumn(e);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;const r=this.getPositionedHorizontalScroll(i,n);r!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(r),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}getPositionedHorizontalScroll(e,n){const{columnBeforeStart:i,columnAfterEnd:r}=this.isColumnOutsideViewport(e),s=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowContainerCtrl.getCenterWidth(),a=this.enableRtl;let l=(a?i:r)||s,u=a?r:i;n!=="auto"&&(l=n==="start",u=n==="end");const c=n==="middle";if(l||u||c){const{colLeft:d,colMiddle:h,colRight:f}=this.getColumnBounds(e);return c?h-o/2:l?a?f:d:a?d-o:f-o}return null}isColumnOutsideViewport(e){const{start:n,end:i}=this.getViewportBounds(),{colLeft:r,colRight:s}=this.getColumnBounds(e),o=this.enableRtl,a=o?n>s:i<s,l=o?i<r:n>r;return{columnBeforeStart:a,columnAfterEnd:l}}getColumnBounds(e){const n=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),r=e.getActualWidth(),s=e.getLeft(),o=n?-1:1,a=n?i-s:s,l=a+r*o,u=a+r/2*o;return{colLeft:a,colMiddle:u,colRight:l}}getViewportBounds(){const e=this.centerRowContainerCtrl.getCenterWidth(),n=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),i=n,r=e+n;return{start:i,end:r,width:e}}}ud([R("ctrlsService")],_u.prototype,"ctrlsService",void 0);ud([R("animationFrameService")],_u.prototype,"animationFrameService",void 0);ud([R("paginationProxy")],_u.prototype,"paginationProxy",void 0);ud([R("rowModel")],_u.prototype,"rowModel",void 0);ud([R("rowContainerHeightService")],_u.prototype,"heightScaler",void 0);ud([R("rowRenderer")],_u.prototype,"rowRenderer",void 0);ud([R("columnModel")],_u.prototype,"columnModel",void 0);ud([Z],_u.prototype,"postConstruct",null);class lhe{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,n=!1){const i=n||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const r=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<r.left+s,this.tickRight=e.clientX>r.right-s,this.tickUp=e.clientY<r.top+s&&!i,this.tickDown=e.clientY>r.bottom-s&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e;if(e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const n=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(n-e),this.tickDown&&this.setVerticalPosition(n+e)}if(this.scrollHorizontally){const n=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(n-e),this.tickRight&&this.setHorizontalPosition(n+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}}var ho=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Os extends q{constructor(e){super(),this.isMultiRowDrag=!1,this.isGridSorted=!1,this.isGridFiltered=!1,this.isRowGroupActive=!1,this.eContainer=e}postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);const e=()=>{this.onSortChanged(),this.onFilterChanged(),this.onRowGroupChanged()};this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_MODEL_UPDATED,()=>{e()}),e(),this.ctrlsService.whenReady(()=>{const n=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new lhe({scrollContainer:n.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>n.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>n.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}onSortChanged(){this.isGridSorted=this.sortController.isSortActive()}onFilterChanged(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()}onRowGroupChanged(){const e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!ls(e)}getContainer(){return this.eContainer}isInterestedIn(e){return e===er.RowDrag}getIconName(){return this.gridOptionsService.is("rowDragManaged")&&this.shouldPreventRowMove()?st.ICON_NOT_ALLOWED:st.ICON_MOVE}shouldPreventRowMove(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const n=this.gridOptionsService.is("rowDragMultiRow"),i=[...this.selectionService.getSelectedNodes()].sort((s,o)=>s.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(o)),r=e.dragItem.rowNode;return n&&i.indexOf(r)!==-1?(this.isMultiRowDrag=!0,i):(this.isMultiRowDrag=!1,[r])}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(x.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(n=>{n.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:n}=e.dragSource;return n===this.gridOptionsService.getDomDataKey()}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:r}=e;return!i.contains(r)}onEnterOrDragging(e){this.dispatchGridEvent(x.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;const n=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.is("rowDragManaged")&&this.doManagedDrag(e,n),this.autoScrollService.check(e.event)}doManagedDrag(e,n){const i=this.isFromThisGrid(e),r=this.gridOptionsService.is("rowDragManaged"),s=e.dragItem.rowNodes;r&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],n):this.moveRows(s,n))}getRowIndexNumber(e){return parseInt(St(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){const n=this.clientSideRowModel.getLastHighlightedRowNode(),i=n&&n.highlighted===Zl.Below,r=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))s.forEach(a=>{a.rowTop<r&&(o-=1)}),this.moveRows(s,r,o);else{const a=this.gridOptionsService.getCallback("getRowId");let l=this.clientSideRowModel.getRowIndexAtPixel(r)+1;this.clientSideRowModel.getHighlightPosition(r)===Zl.Above&&l--,this.clientSideRowModel.updateRowData({add:s.map(u=>u.data).filter(u=>!this.clientSideRowModel.getRowNode(a?a({data:u,level:0}):u.id)),addIndex:l})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,n,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,n,i)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){et(()=>console.warn("AG Grid: addRowDropZone - A container target needs to be provided"),"add-drop-zone-empty-target");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let n={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,n=e):(e.onDragEnter&&(n.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_ENTER,i))}),e.onDragLeave&&(n.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_LEAVE,i))}),e.onDragging&&(n.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_MOVE,i))}),e.onDragStop&&(n.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(Object.assign({isInterestedIn:i=>i===er.RowDrag,getIconName:()=>st.ICON_MOVE,external:!0},n))}getRowDropZone(e){const n=this.getContainer.bind(this),i=this.onDragEnter.bind(this),r=this.onDragLeave.bind(this),s=this.onDragging.bind(this),o=this.onDragStop.bind(this);return e?{getContainer:n,onDragEnter:e.onDragEnter?a=>{i(a),e.onDragEnter(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_ENTER,a))}:i,onDragLeave:e.onDragLeave?a=>{r(a),e.onDragLeave(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_LEAVE,a))}:r,onDragging:e.onDragging?a=>{s(a),e.onDragging(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_MOVE,a))}:s,onDragStop:e.onDragStop?a=>{o(a),e.onDragStop(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_END,a))}:o,fromGrid:!0}:{getContainer:n,onDragEnter:i,onDragLeave:r,onDragging:s,onDragStop:o,fromGrid:!0}}draggingToRowDragEvent(e,n){const i=this.mouseEventService.getNormalisedPosition(n).y,r=i>this.paginationProxy.getCurrentPageHeight();let s=-1,o;r||(s=this.rowModel.getRowIndexAtPixel(i),o=this.rowModel.getRow(s));let a;switch(n.vDirection){case hg.Down:a="down";break;case hg.Up:a="up";break;default:a=null;break}return{type:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:n.event,node:n.dragItem.rowNode,nodes:n.dragItem.rowNodes,overIndex:s,overNode:o,y:i,vDirection:a}}dispatchGridEvent(e,n){const i=this.draggingToRowDragEvent(e,n);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent(x.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)}onDragStop(e){this.dispatchGridEvent(x.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(n=>{n.setDragging(!1)})}}ho([R("dragAndDropService")],Os.prototype,"dragAndDropService",void 0);ho([R("rowModel")],Os.prototype,"rowModel",void 0);ho([R("paginationProxy")],Os.prototype,"paginationProxy",void 0);ho([R("columnModel")],Os.prototype,"columnModel",void 0);ho([R("focusService")],Os.prototype,"focusService",void 0);ho([R("sortController")],Os.prototype,"sortController",void 0);ho([R("filterManager")],Os.prototype,"filterManager",void 0);ho([R("selectionService")],Os.prototype,"selectionService",void 0);ho([R("mouseEventService")],Os.prototype,"mouseEventService",void 0);ho([R("ctrlsService")],Os.prototype,"ctrlsService",void 0);ho([lt("rangeService")],Os.prototype,"rangeService",void 0);ho([Z],Os.prototype,"postConstruct",null);var Ur=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},fg;(function(t){t.ANIMATION_ON="ag-row-animation",t.ANIMATION_OFF="ag-row-no-animation"})(fg||(fg={}));const RY="ag-force-vertical-scroll",uhe="ag-selectable",che="ag-column-moving";class ki extends q{constructor(){super(...arguments),this.stickyTopHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,n,i,r,s,o){this.comp=e,this.eGridBody=n,this.eBodyViewport=i,this.eTop=r,this.eBottom=s,this.eStickyTop=o,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new O_(this.comp)),this.bodyScrollFeature=this.createManagedBean(new _u(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,i,s,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(r),this.ctrlsService.registerGridBodyCtrl(this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach(n=>{this.addManagedListener(n,"focusin",i=>{const{target:r}=i,s=vh(r,"ag-root",n);n.classList.toggle("ag-has-focus",!s)}),this.addManagedListener(n,"focusout",i=>{const{target:r,relatedTarget:s}=i,o=n.contains(s),a=vh(s,"ag-root",n);vh(r,"ag-root",n)||(!o||a)&&n.classList.remove("ag-has-focus")})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(che,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(uhe,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);const n=e&&this.gridOptionsService.getScrollbarWidth()||0,i=Bp()?16:0,r=`calc(100% + ${n+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(r))}onGridColumnsChanged(){const e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gridOptionsService.is("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const r=i.relatedTarget;if(VE(r)===null){this.rowRenderer.stopEditing();return}let s=n.some(o=>o.contains(r))&&this.mouseEventService.isElementInThisGrid(r);if(!s){const o=this.popupService;s=o.getActivePopups().some(a=>a.contains(r))||o.isElementWithinCustomPopup(r)}s||this.rowRenderer.stopEditing()},n=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];n.forEach(i=>this.addManagedListener(i,"focusout",e))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),n=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=n===-1?-1:e+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const n=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(n)}isVerticalScrollShowing(){const e=this.gridOptionsService.is("alwaysShowVerticalScroll"),n=e?RY:null,i=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(n,e),e||i&&zj(this.eBodyViewport)}setupRowAnimationCssClass(){const e=()=>{const n=this.gridOptionsService.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=n?fg.ANIMATION_ON:fg.ANIMATION_OFF;this.comp.setRowAnimationCssOnBodyViewport(i,n)};e(),this.addManagedListener(this.eventService,x.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),n=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&n&&this.addManagedListener(e,"wheel",i=>this.onFullWidthContainerWheel(i,n))}onFullWidthContainerWheel(e,n){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),n.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,n,i){if(!e&&!i)return;this.gridOptionsService.is("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:r}=e||n;if(r===this.eBodyViewport||r===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;e?this.contextMenuFactory.onContextMenu(e,null,null,null,null,this.eGridBody):i&&this.contextMenuFactory.onContextMenu(null,i,null,null,null,this.eGridBody)}}mockContextMenuForIPad(e){if(!ad())return;const n=new ln(this.eBodyViewport),i=r=>{e(void 0,r.touchStart,r.touchEvent)};this.addManagedListener(n,ln.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>n.destroy())}onBodyViewportWheel(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyTopWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const n=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(n+e),this.eBodyViewport.scrollTop-n}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Os(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:e}=this;let n=e.getPinnedTopTotalHeight();n&&(n+=1);let i=e.getPinnedBottomTotalHeight();i&&(i+=1),this.comp.setTopHeight(n),this.comp.setBottomHeight(i),this.comp.setTopDisplay(n?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyTopWidth(e){if(!e)this.comp.setStickyTopWidth("100%");else{const n=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${n}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const n=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight();let r=0;n>0&&(r+=n+1),i>0&&(r+=i+1),this.comp.setStickyTopTop(`${r}px`)}sizeColumnsToFit(e,n){const r=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,o=x_(this.eGridBody)-r;if(o>0){this.columnModel.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}n===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):n===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):n===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}}Ur([R("animationFrameService")],ki.prototype,"animationFrameService",void 0);Ur([R("rowContainerHeightService")],ki.prototype,"rowContainerHeightService",void 0);Ur([R("ctrlsService")],ki.prototype,"ctrlsService",void 0);Ur([R("columnModel")],ki.prototype,"columnModel",void 0);Ur([R("scrollVisibleService")],ki.prototype,"scrollVisibleService",void 0);Ur([lt("contextMenuFactory")],ki.prototype,"contextMenuFactory",void 0);Ur([R("headerNavigationService")],ki.prototype,"headerNavigationService",void 0);Ur([R("dragAndDropService")],ki.prototype,"dragAndDropService",void 0);Ur([R("pinnedRowModel")],ki.prototype,"pinnedRowModel",void 0);Ur([R("rowRenderer")],ki.prototype,"rowRenderer",void 0);Ur([R("popupService")],ki.prototype,"popupService",void 0);Ur([R("mouseEventService")],ki.prototype,"mouseEventService",void 0);Ur([R("rowModel")],ki.prototype,"rowModel",void 0);Ur([R("filterManager")],ki.prototype,"filterManager",void 0);var UE;(function(t){t[t.FILL=0]="FILL",t[t.RANGE=1]="RANGE"})(UE||(UE={}));var Tp;(function(t){t[t.VALUE=0]="VALUE",t[t.DIMENSION=1]="DIMENSION"})(Tp||(Tp={}));const my="ag-cell-range-selected",dhe="ag-cell-range-chart",hhe="ag-cell-range-single-cell",fhe="ag-cell-range-chart-category",phe="ag-cell-range-handle",ghe="ag-cell-range-top",mhe="ag-cell-range-right",yhe="ag-cell-range-bottom",vhe="ag-cell-range-left";class Che{constructor(e,n){this.beans=e,this.cellCtrl=n}setComp(e,n){this.cellComp=e,this.eGui=n,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(my,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${my}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${my}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${my}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${my}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(dhe,this.hasChartRange),Gh(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(hhe,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),n=this.isSingleCell(),i=!n&&e.top,r=!n&&e.right,s=!n&&e.bottom,o=!n&&e.left;this.cellComp.addOrRemoveCssClass(ghe,i),this.cellComp.addOrRemoveCssClass(mhe,r),this.cellComp.addOrRemoveCssClass(yhe,s),this.cellComp.addOrRemoveCssClass(vhe,o)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const n=e.getCellRanges();return n.length>0&&n.every(i=>qs([Tp.DIMENSION,Tp.VALUE],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gridOptionsService.is("enableRtl");let n=!1,i=!1,r=!1,s=!1;const o=this.cellCtrl.getCellPosition().column,{rangeService:a,columnModel:l}=this.beans;let u,c;e?(u=l.getDisplayedColAfter(o),c=l.getDisplayedColBefore(o)):(u=l.getDisplayedColBefore(o),c=l.getDisplayedColAfter(o));const d=a.getCellRanges().filter(h=>a.isCellInSpecificRange(this.cellCtrl.getCellPosition(),h));u||(s=!0),c||(i=!0);for(let h=0;h<d.length&&!(n&&i&&r&&s);h++){const f=d[h],p=a.getRangeStartRow(f),g=a.getRangeEndRow(f);!n&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(n=!0),!r&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(r=!0),!s&&u&&f.columns.indexOf(u)<0&&(s=!0),!i&&c&&f.columns.indexOf(c)<0&&(i=!0)}return{top:n,right:i,bottom:r,left:s}}refreshHandle(){if(!this.beans.rangeService)return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(phe,!!this.selectionHandle)}shouldHaveSelectionHandle(){const{gridOptionsService:e,rangeService:n}=this.beans,i=n.getCellRanges(),r=i.length;if(this.rangeCount<1||r<1)return!1;const s=St(i),o=this.cellCtrl.getCellPosition(),a=e.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),l=e.is("enableRangeHandle");let u=r===1&&!this.cellCtrl.isEditing()&&(a||l);if(this.hasChartRange){const d=i[0].type===Tp.DIMENSION&&n.isCellInSpecificRange(o,i[0]);this.cellComp.addOrRemoveCssClass(fhe,d),u=s.type===Tp.VALUE}return u&&s.endRow!=null&&n.isContiguousRange(s)&&n.isBottomRightCell(s,o)}addSelectionHandle(){const{gridOptionsService:e,rangeService:n}=this.beans,i=St(n.getCellRanges()).type,s=e.is("enableFillHandle")&&Pe(i)?UE.FILL:UE.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}}class whe extends q{constructor(e,n){super(),this.cellCtrl=e,this.beans=n,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.setupColSpan(),this.setupRowSpan()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode)}setComp(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onDisplayColumnsChanged(){const e=this.getColSpanningList();sc(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,n)=>e+n.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),n=[];if(e===1)n.push(this.column);else{let i=this.column;const r=this.column.getPinned();for(let s=0;i&&s<e&&(n.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!(!i||Pe(i)||r!==i.getPinned()));s++);}return n}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?e=St(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const n=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.columnModel.getBodyContainerWidth();return n+i+(e||0)}return n+(e||0)}applyRowSpan(){if(this.rowSpan===1)return;const n=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${n}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}}class She extends q{constructor(e,n){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=n,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),n={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(e.cellClassRules,n,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1))}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let n;if(typeof e.cellStyle=="function"){const i={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},r=e.cellStyle;n=r(i)}else n=e.cellStyle;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const e=this.column.getColDef(),n={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,n),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}}class TL extends q{constructor(e,n){super(),this.ctrl=e,this.beans=n}setComp(e){this.eGui=e,this.setupTooltip()}setBrowserTooltip(e){const n="title";e!=null&&e!=""?this.eGui.setAttribute(n,e):this.eGui.removeAttribute(n)}setupTooltip(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.genericTooltipFeature!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.genericTooltipFeature=this.createManagedBean(new Sr(e),this.beans.context)}refreshToolTip(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)}getTooltipParams(){const e=this.ctrl,n=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,r=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:n,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:r,data:r?r.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>this.genericTooltipFeature.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){super.destroy()}}var He=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let ke=class{postConstruct(){this.doingMasterDetail=this.gridOptionsService.isMasterDetail(),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};He([R("resizeObserverService")],ke.prototype,"resizeObserverService",void 0);He([R("paginationProxy")],ke.prototype,"paginationProxy",void 0);He([R("context")],ke.prototype,"context",void 0);He([R("columnApi")],ke.prototype,"columnApi",void 0);He([R("gridApi")],ke.prototype,"gridApi",void 0);He([R("gridOptionsService")],ke.prototype,"gridOptionsService",void 0);He([R("expressionService")],ke.prototype,"expressionService",void 0);He([R("environment")],ke.prototype,"environment",void 0);He([R("rowRenderer")],ke.prototype,"rowRenderer",void 0);He([R("templateService")],ke.prototype,"templateService",void 0);He([R("valueService")],ke.prototype,"valueService",void 0);He([R("eventService")],ke.prototype,"eventService",void 0);He([R("columnModel")],ke.prototype,"columnModel",void 0);He([R("headerNavigationService")],ke.prototype,"headerNavigationService",void 0);He([R("navigationService")],ke.prototype,"navigationService",void 0);He([R("columnAnimationService")],ke.prototype,"columnAnimationService",void 0);He([lt("rangeService")],ke.prototype,"rangeService",void 0);He([R("focusService")],ke.prototype,"focusService",void 0);He([lt("contextMenuFactory")],ke.prototype,"contextMenuFactory",void 0);He([R("popupService")],ke.prototype,"popupService",void 0);He([R("valueFormatterService")],ke.prototype,"valueFormatterService",void 0);He([R("stylingService")],ke.prototype,"stylingService",void 0);He([R("columnHoverService")],ke.prototype,"columnHoverService",void 0);He([R("userComponentFactory")],ke.prototype,"userComponentFactory",void 0);He([R("userComponentRegistry")],ke.prototype,"userComponentRegistry",void 0);He([R("animationFrameService")],ke.prototype,"animationFrameService",void 0);He([R("dragService")],ke.prototype,"dragService",void 0);He([R("dragAndDropService")],ke.prototype,"dragAndDropService",void 0);He([R("sortController")],ke.prototype,"sortController",void 0);He([R("filterManager")],ke.prototype,"filterManager",void 0);He([R("rowContainerHeightService")],ke.prototype,"rowContainerHeightService",void 0);He([R("frameworkOverrides")],ke.prototype,"frameworkOverrides",void 0);He([R("cellPositionUtils")],ke.prototype,"cellPositionUtils",void 0);He([R("rowPositionUtils")],ke.prototype,"rowPositionUtils",void 0);He([R("selectionService")],ke.prototype,"selectionService",void 0);He([lt("selectionHandleFactory")],ke.prototype,"selectionHandleFactory",void 0);He([R("rowCssClassCalculator")],ke.prototype,"rowCssClassCalculator",void 0);He([R("rowModel")],ke.prototype,"rowModel",void 0);He([R("ctrlsService")],ke.prototype,"ctrlsService",void 0);He([R("ctrlsFactory")],ke.prototype,"ctrlsFactory",void 0);He([R("agStackComponentsRegistry")],ke.prototype,"agStackComponentsRegistry",void 0);He([R("valueCache")],ke.prototype,"valueCache",void 0);He([R("rowNodeEventThrottle")],ke.prototype,"rowNodeEventThrottle",void 0);He([R("localeService")],ke.prototype,"localeService",void 0);He([R("valueParserService")],ke.prototype,"valueParserService",void 0);He([Z],ke.prototype,"postConstruct",null);ke=He([me("beans")],ke);class Ehe extends ke{constructor(e,n,i){super(),this.cellCtrl=e,this.beans=n,this.column=i}onMouseEvent(e,n){if(!za(n))switch(e){case"click":this.onCellClicked(n);break;case"mousedown":case"touchstart":this.onMouseDown(n);break;case"dblclick":this.onCellDoubleClicked(n);break;case"mouseout":this.onMouseOut(n);break;case"mouseover":this.onMouseOver(n);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:n,rangeService:i,gridOptionsService:r}=this.beans,s=e.ctrlKey||e.metaKey;i&&s&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,x.EVENT_CELL_CLICKED);n.dispatchEvent(o);const a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>a.onCellClicked(o),0),(r.is("singleClickEdit")||a.singleClickEdit)&&!r.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!ad()||HN("dblclick"))return!1;const e=new Date().getTime(),n=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,n}onCellDoubleClicked(e){const n=this.column.getColDef(),i=this.cellCtrl.createEvent(e,x.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),typeof n.onCellDoubleClicked=="function"&&window.setTimeout(()=>n.onCellDoubleClicked(i),0),!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:n,metaKey:i,shiftKey:r}=e,s=e.target,{eventService:o,rangeService:a}=this.beans;if(this.isRightClickInExistingRange(e))return;const l=a&&a.getCellRanges().length!=0;if(!r||!l){const u=to()&&!this.cellCtrl.isEditing()&&!ZN(s);this.cellCtrl.focusCell(u)}if(r&&l&&e.preventDefault(),!this.containsWidget(s)){if(a){const u=this.cellCtrl.getCellPosition();if(r)a.extendLatestRangeToCell(u);else{const c=n||i;a.setRangeToCell(u,c)}}o.dispatchEvent(this.cellCtrl.createEvent(e,x.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){const{rangeService:n}=this.beans;return!!(n&&n.isCellInAnyRange(this.cellCtrl.getCellPosition())&&e.button===2)}containsWidget(e){return vh(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const n=this.cellCtrl.createEvent(e,x.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(n),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const n=this.cellCtrl.createEvent(e,x.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(n),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const n=this.cellCtrl.getGui(),i=n.contains(e.target),r=n.contains(e.relatedTarget);return i&&r}destroy(){}}class bhe extends q{constructor(e,n,i,r,s){super(),this.cellCtrl=e,this.beans=n,this.rowNode=r,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){const n=e.key;switch(n){case k.ENTER:this.onEnterKeyDown(e);break;case k.F2:this.onF2KeyDown(e);break;case k.ESCAPE:this.onEscapeKeyDown(e);break;case k.TAB:this.onTabKeyDown(e);break;case k.BACKSPACE:case k.DELETE:this.onBackspaceOrDeleteKeyDown(n,e);break;case k.DOWN:case k.UP:case k.RIGHT:case k.LEFT:this.onNavigationKeyDown(e,n);break}}onNavigationKeyDown(e,n){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,n,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const n=this.beans.rangeService.extendLatestRangeInDirection(e);n&&this.beans.navigationService.ensureCellVisible(n)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,n){const{cellCtrl:i,beans:r,rowNode:s}=this,{gridOptionsService:o,rangeService:a,eventService:l}=r;i.isEditing()||(l.dispatchEvent({type:x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),Xj(e,o.is("enableCellEditingOnBackspace"))?a&&o.isEnableRangeSelection()?a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):i.isCellEditable()&&s.setDataValue(i.getColumn(),null,"cellClear"):i.startRowOrCellEdit(e,n),l.dispatchEvent({type:x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.is("enterNavigatesVertically")){const n=e.shiftKey?k.UP:k.DOWN;this.beans.navigationService.navigateToNextCell(null,n,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(k.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(k.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const r=e.key;r===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(r,e),e.preventDefault())}onSpaceKeyDown(e){const{gridOptionsService:n}=this.beans;if(!this.cellCtrl.isEditing()&&n.isRowSelection()){const i=this.rowNode.isSelected(),r=!i;if(r||!n.is("suppressRowDeselection")){const s=this.beans.gridOptionsService.is("groupSelectsFiltered"),o=this.rowNode.setSelectedParams({newValue:r,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});i===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}}var xhe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class TY extends Le{constructor(e,n,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=n,this.eCell=i}postConstruct(){this.getGui().appendChild(pn("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",n=>{n.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const n=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const r=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",r),e.dataTransfer.setData("text/plain",r)}catch{}};if(n){const r={rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};n(r)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}xhe([Z],TY.prototype,"postConstruct",null);const _he="ag-cell",Rhe="ag-cell-auto-height",The="ag-cell-normal-height",Ahe="ag-cell-focus",Dhe="ag-cell-first-right-pinned",Ohe="ag-cell-last-left-pinned",Phe="ag-cell-not-inline-editing",Fhe="ag-column-hover",Mhe="ag-cell-wrap-text";let Nhe=0;class Uo extends q{constructor(e,n,i,r){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=n,this.beans=i,this.rowCtrl=r,this.instanceId=e.getId()+"-"+Nhe++;const s=this.column.getColDef();this.colIdSanitised=bi(this.column.getId()),this.beans.gridOptionsService.is("suppressCellFocus")||(this.tabIndex=-1),this.isCellRenderer=s.cellRenderer!=null||s.cellRendererSelector!=null,this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!0)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new whe(this,this.beans),this.addDestroyFunc(()=>{var n;(n=this.cellPositionFeature)===null||n===void 0||n.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new She(this,this.beans),this.addDestroyFunc(()=>{var n;(n=this.cellCustomStyleFeature)===null||n===void 0||n.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new Ehe(this,this.beans,this.column),this.addDestroyFunc(()=>{var n;(n=this.cellMouseListenerFeature)===null||n===void 0||n.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new bhe(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var n;(n=this.cellKeyboardListenerFeature)===null||n===void 0||n.destroy(),this.cellKeyboardListenerFeature=null}),this.beans.rangeService&&this.beans.gridOptionsService.isEnableRangeSelection()&&(this.cellRangeFeature=new Che(this.beans,this),this.addDestroyFunc(()=>{var n;(n=this.cellRangeFeature)===null||n===void 0||n.destroy(),this.cellRangeFeature=null})),this.column.isTooltipEnabled()&&this.addTooltipFeature()}addTooltipFeature(){const n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:()=>{const i=this.column.getColDef(),r=this.rowNode.data;if(i.tooltipField&&B(r))return Vp(r,i.tooltipField,this.column.isTooltipFieldContainsDots());const s=i.tooltipValueGetter;return s?s({location:"cell",api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted}):null},getValueFormatted:()=>this.valueFormatted};this.tooltipFeature=new TL(n,this.beans),this.addDestroyFunc(()=>{var i;(i=this.tooltipFeature)===null||i===void 0||i.destroy(),this.tooltipFeature=null})}setComp(e,n,i,r,s){var o,a,l,u;this.cellComp=e,this.eGui=n,this.printLayout=r,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),i&&this.setupAutoHeight(i),this.setAriaColIndex(),(o=this.cellPositionFeature)===null||o===void 0||o.setComp(n),(a=this.cellCustomStyleFeature)===null||a===void 0||a.setComp(e),(l=this.tooltipFeature)===null||l===void 0||l.setComp(n),(u=this.cellKeyboardListenerFeature)===null||u===void 0||u.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,n),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(c=>c()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(!this.column.isAutoHeight())return;const n=e.parentElement,i=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,r=a=>{if(this.editing||!this.isAlive())return;const{paddingTop:l,paddingBottom:u,borderBottomWidth:c,borderTopWidth:d}=ld(n),h=l+u+c+d,p=e.offsetHeight+h;if(a<5){const m=this.beans.gridOptionsService.getDocument(),y=!m||!m.contains(e),v=p==0;if(y||v){this.beans.frameworkOverrides.setTimeout(()=>r(a+1),0);return}}const g=Math.max(p,i);this.rowNode.setRowAutoHeight(g,this.column)},s=()=>r(0);s();const o=this.beans.resizeObserverService.observeResize(e,s);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getInstanceId(){return this.instanceId}getIncludeSelection(){return this.includeSelection}getIncludeRowDrag(){return this.includeRowDrag}getIncludeDndSource(){return this.includeDndSource}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}getIsCellRenderer(){return this.isCellRenderer}getValueToDisplay(){return this.valueFormatted!=null?this.valueFormatted:this.value}showValue(e=!1){const n=this.getValueToDisplay();let i;if(this.isCellRenderer){const r=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),r)}this.cellComp.setRenderDetails(i,n,e),this.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){const e=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource);return n||i||r}startEditing(e=null,n=!1,i=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,n,i)});return}const r=this.createCellEditorParams(e,n),s=this.column.getColDef(),o=this.beans.userComponentFactory.getCellEditorDetails(s,r),a=(o==null?void 0:o.popupFromSelector)!=null?o.popupFromSelector:!!s.cellEditorPopup,l=(o==null?void 0:o.popupPositionFromSelector)!=null?o.popupPositionFromSelector:s.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(o,a,l);const u=this.createEvent(i,x.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(u)}setEditing(e){this.editing!==e&&(this.editing=e,this.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){const n={newValueExists:!1};if(e)return n;const i=this.cellComp.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,n){if(n===e)return!1;this.suppressRefreshCell=!0;const i=this.rowNode.setDataValue(this.column,n,"edit");return this.suppressRefreshCell=!1,i}stopEditing(e=!1){if(!this.editing)return!1;const{newValue:n,newValueExists:i}=this.takeValueFromCellEditor(e),r=this.rowNode.getValueFromValueService(this.column);let s=!1;return i&&(s=this.saveNewValue(r,n)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(r,n,!e&&!!s),s}dispatchEditingStoppedEvent(e,n,i){const r=Object.assign(Object.assign({},this.createEvent(null,x.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:n,valueChanged:i});this.beans.eventService.dispatchEvent(r)}createCellEditorParams(e,n){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:n,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}}createCellRendererParams(){return{value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,i,r,s)=>this.registerRowDragger(n,i,s)}}parseValue(e){return this.beans.valueParserService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){if(!this.cellComp)return;e.column===this.column&&this.refreshCell({})}refreshCell(e){var n,i,r;if(this.suppressRefreshCell||this.editing||!this.cellComp)return;const s=this.column.getColDef(),o=e!=null&&!!e.newData,a=e!=null&&!!e.suppressFlash||!!s.suppressCellFlash,l=s.field==null&&s.valueGetter==null&&s.showRowGroup==null,u=e&&e.forceRefresh||l||o,c=this.updateAndFormatValue();if(u||c){this.showValue(o);const h=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!a&&!h&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||s.enableCellChangeFlash)&&this.flashCell(),(n=this.cellCustomStyleFeature)===null||n===void 0||n.applyUserStyles(),(i=this.cellCustomStyleFeature)===null||i===void 0||i.applyClassesFromColDef()}this.refreshToolTip(),(r=this.cellCustomStyleFeature)===null||r===void 0||r.applyCellClassRules()}stopEditingAndFocus(e=!1,n=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(n)}navigateAfterEdit(e){if(this.beans.gridOptionsService.is("enterNavigatesVerticallyAfterEdit")){const i=e?k.UP:k.DOWN;this.beans.navigationService.navigateToNextCell(null,i,this.getCellPosition(),!1)}}flashCell(e){const n=e&&e.flashDelay,i=e&&e.fadeDelay;this.animateCell("data-changed",n,i)}animateCell(e,n,i){var r,s;if(!this.cellComp)return;const o=`ag-cell-${e}`,a=`ag-cell-${e}-animation`,{gridOptionsService:l}=this.beans;n||(n=(r=l.getNum("cellFlashDelay"))!==null&&r!==void 0?r:500),B(i)||(i=(s=l.getNum("cellFadeDelay"))!==null&&s!==void 0?s:1e3),this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(a,!1),window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(a,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(a,!1),this.eGui.style.transition="")},i))},n)}onFlashCells(e){if(!this.cellComp)return;const n=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var n;return(n=this.callValueFormatter(e))!==null&&n!==void 0?n:e}callValueFormatter(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e=!1){const n=this.value,i=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!0:!this.valuesAreEqual(n,this.value)||this.valueFormatted!=i}valuesAreEqual(e,n){const i=this.column.getColDef();return i.equals?i.equals(e,n):e===n}getComp(){return this.cellComp}getValue(){return this.value}getValueFormatted(){return this.valueFormatted}addDomData(){const e=this.getGui();this.beans.gridOptionsService.setDomData(e,Uo.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gridOptionsService.setDomData(e,Uo.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,n){return{type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex}}processCharacter(e){var n;(n=this.cellKeyboardListenerFeature)===null||n===void 0||n.processCharacter(e)}onKeyDown(e){var n;(n=this.cellKeyboardListenerFeature)===null||n===void 0||n.onKeyDown(e)}onMouseEvent(e,n){var i;(i=this.cellMouseListenerFeature)===null||i===void 0||i.onMouseEvent(e,n)}getGui(){return this.eGui}refreshToolTip(){var e;(e=this.tooltipFeature)===null||e===void 0||e.refreshToolTip()}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)===null||e===void 0||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&this.setAriaColIndex()}setAriaColIndex(){const e=this.beans.columnModel.getAriaColumnIndex(this.column);YN(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)===null||e===void 0?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}getBeans(){return this.beans}isPrintLayout(){return this.printLayout}appendChild(e){this.eGui.appendChild(e)}refreshHandle(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,n=null){this.cellComp&&(this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,n))}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(Dhe,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Ohe,e)}onCellFocused(e){if(this.beans.gridOptionsService.is("suppressCellFocus"))return;const n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&(e!=null&&e.forceBrowserFocus)&&(this.focusEventToRestore=e);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Ahe,n),n&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});const i=this.beans.gridOptionsService.get("editType")==="fullRow";!n&&!i&&this.editing&&this.stopRowOrCellEdit()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Ba(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(_he,!0),this.cellComp.addOrRemoveCssClass(Phe,!0);const e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(Rhe,e),this.cellComp.addOrRemoveCssClass(The,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gridOptionsService.is("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(Fhe,e)}onColDefChanged(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(Mhe,e)}dispatchCellContextMenuEvent(e){const n=this.column.getColDef(),i=this.createEvent(e,x.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(i),n.onCellContextMenu&&window.setTimeout(()=>n.onCellContextMenu(i),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new D_;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new TY(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,n,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,n);return}const r=this.createRowDragComp(e,n,i);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,n,i){const r=this.beans.gridOptionsService.is("pagination"),s=this.beans.gridOptionsService.is("rowDragManaged"),o=this.beans.gridOptionsService.isRowModelType("clientSide");if(s){if(!o){et(()=>console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model"),"CellComp.addRowDragging");return}if(r){et(()=>console.warn("AG Grid: managed row dragging is not possible when doing pagination"),"CellComp.addRowDragging");return}}const a=new $h(()=>this.value,this.rowNode,this.column,e,n,i);return this.beans.context.createBean(a),a}}Uo.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var gr;(function(t){t.Normal="Normal",t.FullWidth="FullWidth",t.FullWidthLoading="FullWidthLoading",t.FullWidthGroup="FullWidthGroup",t.FullWidthDetail="FullWidthDetail"})(gr||(gr={}));let Lhe=0;class jo extends q{constructor(e,n,i,r,s){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gridOptionsService=n.gridOptionsService,this.rowNode=e,this.paginationPage=n.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=r,this.printLayout=s,this.instanceId=e.id+"-"+Lhe++,this.rowId=bi(e.id),this.isFullWidth()&&!this.gridOptionsService.is("suppressCellFocus")&&(this.tabIndex=-1),this.setAnimateFlags(i),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=bi(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getBeans(){return this.beans}getInstanceId(){return this.instanceId}setComp(e,n,i){const r={rowComp:e,element:n,containerType:i};this.allRowGuis.push(r),i===Fn.LEFT?this.leftGui=r:i===Fn.RIGHT?this.rightGui=r:i===Fn.FULL_WIDTH?this.fullWidthGui=r:this.centerGui=r,this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==e),e===Fn.LEFT?this.leftGui=void 0:e===Fn.RIGHT?this.rightGui=void 0:e===Fn.FULL_WIDTH&&(this.fullWidthGui=void 0)}isCacheable(){return this.rowType===gr.FullWidthDetail&&this.gridOptionsService.is("keepDetailRows")}setCached(e){const n=e?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=n)}initialiseRowComp(e){const n=this.gridOptionsService;this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(s=>i.addOrRemoveCssClass(s,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&$a(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(i,!1),this.setRowCompRowBusinessKey(i),n.setDomData(e.element,jo.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>n.setDomData(e.element,jo.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),n.is("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e,n){n&&(this.rowId=bi(this.rowNode.id)),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:n}=e;this.slideInAnimation[n]&&(B2(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(B2(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(e){if(this.gridOptionsService.isEnableRangeSelection()){et(()=>{console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");return}const n=this.beans.localeService.getLocaleTextFunc(),i=new $h(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(i,this.beans.context)}setupFullWidth(e){const n=this.getPinnedForContainer(e.containerType),i=this.createFullWidthParams(e.element,n);if(this.rowType==gr.FullWidthDetail&&!oe.__assertRegistered(pe.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let r;switch(this.rowType){case gr.FullWidthDetail:r=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(i);break;case gr.FullWidthGroup:r=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(i);break;case gr.FullWidthLoading:r=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(i);break;default:r=this.beans.userComponentFactory.getFullWidthCellRendererDetails(i);break}e.rowComp.showFullWidth(r)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderer(){var e,n;return(n=(e=this.fullWidthGui)===null||e===void 0?void 0:e.rowComp)===null||n===void 0?void 0:n.getFullWidthCellRenderer()}getCellElement(e){const n=this.getCellCtrl(e);return n?n.getGui():null}executeProcessRowPostCreateFunc(){var e;const n=this.gridOptionsService.getCallback("processRowPostCreate");if(!n||!this.areAllContainersReady())return;const i={eRow:(e=this.centerGui)===null||e===void 0?void 0:e.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};n(i)}areAllContainersReady(){const e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),n=!!this.centerGui,i=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&n&&i}setRowType(){const e=this.rowNode.stub,n=this.rowNode.isFullWidthCell(),i=this.beans.doingMasterDetail&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(r);e?this.rowType=gr.FullWidthLoading:i?this.rowType=gr.FullWidthDetail:n?this.rowType=gr.FullWidth:o?this.rowType=gr.FullWidthGroup:this.rowType=gr.Normal}updateColumnLists(e=!1,n=!1){if(this.isFullWidth())return;if(e||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,n,i=null){const r={list:[],map:{}},s=(o,a)=>{r.list.push(a),r.map[o]=a};return n.forEach(o=>{const a=o.getInstanceId();let l=e.map[a];l||(l=new Uo(o,this.rowNode,this.beans,this)),s(a,l)}),e.list.forEach(o=>{if(r.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,i)){s(o.getColumn().getInstanceId(),o);return}o.destroy()}),r}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(n=>{const i=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(i,e)})}getCellCtrlsForContainer(e){switch(e){case Fn.LEFT:return this.leftCellCtrls.list;case Fn.RIGHT:return this.rightCellCtrls.list;case Fn.FULL_WIDTH:return[];case Fn.CENTER:return this.centerCellCtrls.list;default:const n=e;throw new Error(`Unhandled case: ${n}`)}}createAllCellCtrls(){const e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const i=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");const r=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,n){if(e.getColumn().getPinned()!=n)return!0;const o=e.isEditing(),a=this.beans.focusService.isCellFocused(e.getCellPosition());if(o||a){const u=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(u)>=0)}return!0}getDomOrder(){return this.gridOptionsService.is("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")}listenOnDomOrder(e){const n=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)}setAnimateFlags(e){if(this.isSticky()||!e)return;const n=B(this.rowNode.oldRowTop),i=this.beans.columnModel.isPinningLeft(),r=this.beans.columnModel.isPinningRight();n?(this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=r):(this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=r)}isEditing(){return this.editingRow}stopRowEditing(e){this.stopEditing(e)}isFullWidth(){return this.rowType!==gr.Normal}getRowType(){return this.rowType}refreshFullWidth(){const e=(a,l)=>{if(!a)return!0;const u=a.rowComp.getFullWidthCellRenderer();if(!u||!u.refresh)return!1;const c=this.createFullWidthParams(a.element,l);return u.refresh(c)},n=e(this.fullWidthGui,null),i=e(this.centerGui,null),r=e(this.leftGui,"left"),s=e(this.rightGui,"right");return n&&i&&r&&s}addListeners(){this.addManagedListener(this.rowNode,re.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,re.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,re.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,re.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,re.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const e=this.beans.eventService;this.addManagedListener(e,x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,x.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,x.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,x.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(e,x.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(e,x.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,x.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(e,x.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()}onColumnMoved(){this.updateColumnLists()}addListenersForCellComps(){this.addManagedListener(this.rowNode,re.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,re.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp,!0),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}onRowNodeCellChanged(){this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{const i=e===Zl.Above,r=e===Zl.Below;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}onRowNodeDraggingChanged(){this.postProcessRowDragging()}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){const e=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&n),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!n),$a(i.element,e&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Ba(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const n=this.allRowGuis.find(l=>l.element.contains(e.target));if(!((n?n.element:null)===e.target))return;const s=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||za(e))return;const n=this.allRowGuis.find(o=>o.element.contains(e.target)),i=n?n.element:null,r=i===e.target;let s=null;r||(s=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&r||!s)&&this.beans.navigationService.onTabKeyDown(this,e)}onFullWidthRowFocused(e){var n;const i=this.rowNode,r=e?this.isFullWidth()&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:(n=this.centerGui)===null||n===void 0?void 0:n.element;s&&(s.classList.toggle("ag-full-width-focus",r),r&&s.focus({preventScroll:!0}))}refreshCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()}removeCellCtrl(e,n){const i={list:[],map:{}};return e.list.forEach(r=>{r!==n&&(i.list.push(r),i.map[r.getInstanceId()]=r)}),i}onMouseEvent(e,n){switch(e){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(e,n){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:n}}createRowEventWithSource(e,n){const i=this.createRowEvent(e,n);return i.source=this,i}onRowDblClick(e){if(za(e))return;const n=this.createRowEventWithSource(x.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(n)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=vh(e.target,"ag-row-drag",3),!this.isFullWidth())return;const n=this.rowNode,i=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:i.getAllDisplayedColumns()[0],rowPinned:n.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(za(e)||this.lastMouseDownOnDragger)return;const i=this.createRowEventWithSource(x.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(i);const r=e.ctrlKey||e.metaKey,s=e.shiftKey;if(this.gridOptionsService.is("groupSelectsChildren")&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.is("suppressRowClickSelection"))return;const a=this.gridOptionsService.is("rowMultiSelectWithClick"),l=!this.gridOptionsService.is("suppressRowDeselection"),u="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):r?l&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:u});else{const c=a?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:c,rangeSelect:s,event:e,source:u})}}setupDetailRowAutoHeight(e){if(this.rowType!==gr.FullWidthDetail||!this.gridOptionsService.is("detailRowAutoHeight"))return;const n=()=>{const r=e.clientHeight;if(r!=null&&r>0){const s=()=>{this.rowNode.setRowHeight(r),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};this.beans.frameworkOverrides.setTimeout(s,0)}},i=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(i),n()}createFullWidthParams(e,n){return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:e,eParentOfValue:e,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,s,o,a)=>this.addFullWidthRowDragging(r,s,o,a)}}addFullWidthRowDragging(e,n,i="",r){if(!this.isFullWidth())return;const s=new $h(()=>i,this.rowNode,void 0,e,n,r);this.createManagedBean(s,this.beans.context)}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const n="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(n,!0),r.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}onModelUpdated(){this.refreshFirstAndLastRowStyles()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;const n=this.getAllCellCtrls(),i=this.editingRow;this.stoppingRowEdit=!0;let r=!1;for(const s of n){const o=s.stopEditing(e);i&&!e&&!r&&o&&(r=!0)}if(r){const s=this.createRowEvent(x.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(s)}i&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",e));const n=e?this.createRowEvent(x.EVENT_ROW_EDITING_STARTED):this.createRowEvent(x.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(n)}startRowEditing(e=null,n=null,i=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((s,o)=>{const a=o===n;return a?o.startEditing(e,a,i):o.startEditing(null,a,i),s?!0:o.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(n=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,n){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e===Fn.LEFT?"left":e===Fn.RIGHT?"right":null}getInitialRowClasses(e){const n=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){const e=this.gridOptionsService.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const n=this.gridOptionsService.getCallback("getRowStyle");let i;if(n){const r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=n(r)}return i||e?Object.assign({},e,i):this.emptyStyle}onRowSelected(e){const n=!!this.rowNode.isSelected();this.forEachGui(e,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",n),Gh(i.element,n?!0:void 0);const r=this.createAriaLabel();od(i.element,r??"")})}createAriaLabel(){const e=this.rowNode.isSelected();return e&&this.gridOptionsService.is("suppressRowDeselection")?void 0:this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`)}isUseAnimationFrameForCreate(){return this.useAnimationFrameForCreate}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,re.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gridOptionsService.is("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,re.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.applyPaginationOffset(i.top,!0)-100,s=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(r,e),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,n){e?n(e):this.allRowGuis.forEach(n)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const n=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,o=s?`${Math.min(i,s)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${n}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(e,n){super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}destroyFirstPass(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);const e=this.createRowEvent(x.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),super.destroy()}setupRemoveAnimation(){if(this.isSticky())return;if(this.rowNode.rowTop!=null){const n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0))}destroySecondPass(){this.allRowGuis.length=0;const e=n=>(n.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocused(){this.onCellFocusChanged()}onCellFocusCleared(){this.onCellFocusChanged()}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const i=this.beans.paginationProxy.getPixelOffset();return e+i*(n?1:-1)}setRowTop(e){if(!this.printLayout&&B(e)){const n=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.gridOptionsService.is("suppressRowTransform")?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.gridOptionsService.is("suppressRowTransform")?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let n;if(this.isSticky())n=this.rowNode.stickyRowTop;else{const i=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,r=this.applyPaginationOffset(i);n=this.rowNode.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return n+"px"}setRowTopStyle(e){const n=this.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach(i=>n?i.rowComp.setTop(e):i.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let n=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==e&&(n=i)}),n!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(e)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const n=this.rowNode.getRowIndexString(),i=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),r=this.rowNode.rowIndex%2===0,s=i+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(n),o.rowComp.addOrRemoveCssClass("ag-row-even",r),o.rowComp.addOrRemoveCssClass("ag-row-odd",!r),jN(o.element,s)})}getPinnedLeftRowElement(){return this.leftGui?this.leftGui.element:void 0}getPinnedRightRowElement(){return this.rightGui?this.rightGui.element:void 0}getBodyRowElement(){return this.centerGui?this.centerGui.element:void 0}getFullWidthRowElement(){return this.fullWidthGui?this.fullWidthGui.element:void 0}}jo.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Ps=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class jr extends q{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",n=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,n)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",HN("touchstart")?"touchstart":"mousedown"].forEach(i=>{const r=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,r)})}processMouseEvent(e,n){if(!this.mouseEventService.isEventFromThisGrid(n)||za(n))return;const i=this.getRowForEvent(n),r=this.mouseEventService.getRenderedCellForEvent(n);e==="contextmenu"?this.handleContextMenuMouseEvent(n,null,i,r):(r&&r.onMouseEvent(e,n),i&&i.onMouseEvent(e,n))}mockContextMenuForIPad(){if(!ad())return;const e=new ln(this.element),n=i=>{const r=this.getRowForEvent(i.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(null,i.touchEvent,r,s)};this.addManagedListener(e,ln.EVENT_LONG_TAP,n),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let n=e.target;for(;n;){const i=this.gridOptionsService.getDomData(n,jo.DOM_DATA_KEY_ROW_CTRL);if(i)return i;n=n.parentElement}return null}handleContextMenuMouseEvent(e,n,i,r){const s=i?i.getRowNode():null,o=r?r.getColumn():null;let a=null;if(o){const c=e||n;r.dispatchCellContextMenuEvent(c),a=this.valueService.getValue(o,s)}const l=this.ctrlsService.getGridBodyCtrl(),u=r?r.getGui():l.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,n,s,o,a,u)}getControlsForEventTarget(e){return{cellCtrl:$E(this.gridOptionsService,e,Uo.DOM_DATA_KEY_CELL_CTRL),rowCtrl:$E(this.gridOptionsService,e,jo.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,n){const{cellCtrl:i,rowCtrl:r}=this.getControlsForEventTarget(n.target);n.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,n):r&&r.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,e,n))}processCellKeyboardEvent(e,n,i){const r=e.getRowNode(),s=e.getColumn(),o=e.isEditing();if(!BE(this.gridOptionsService,i,r,s,o)&&n==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),R_(i)&&e.processCharacter(i)),n==="keydown"){const l=e.createEvent(i,x.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(l)}}processFullWidthRowKeyboardEvent(e,n,i){const r=e.getRowNode(),s=this.focusService.getFocusedCell(),o=s&&s.column;if(!BE(this.gridOptionsService,i,r,o,!1)){const l=i.key;if(n==="keydown")switch(l){case k.PAGE_HOME:case k.PAGE_END:case k.PAGE_UP:case k.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case k.UP:case k.DOWN:e.onKeyboardNavigate(i);break;case k.TAB:e.onTabKeyDown(i);break}}if(n==="keydown"){const l=e.createRowEvent(x.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(l)}}doGridOperations(e,n){if(!e.ctrlKey&&!e.metaKey||n||!this.mouseEventService.isEventFromThisGrid(e))return;const i=Kj(e);if(i===k.A)return this.onCtrlAndA(e);if(i===k.C)return this.onCtrlAndC(e);if(i===k.D)return this.onCtrlAndD(e);if(i===k.V)return this.onCtrlAndV(e);if(i===k.X)return this.onCtrlAndX(e);if(i===k.Y)return this.onCtrlAndY();if(i===k.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:n,paginationProxy:i,rangeService:r}=this;if(r&&i.isRowsToRender()){const[s,o]=[n.isEmpty("top"),n.isEmpty("bottom")],a=s?null:"top";let l,u;o?(l=null,u=this.paginationProxy.getRowCount()-1):(l="bottom",u=n.getPinnedBottomRowData().length-1);const c=this.columnModel.getAllDisplayedColumns();if(ls(c))return;r.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:u,rowEndPinned:l,columnStart:c[0],columnEnd:St(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection"))return;const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);n!=null&&n.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||this.gridOptionsService.is("suppressCutToClipboard"))return;const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);n!=null&&n.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);n!=null&&n.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gridOptionsService.is("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}}Ps([R("mouseEventService")],jr.prototype,"mouseEventService",void 0);Ps([R("valueService")],jr.prototype,"valueService",void 0);Ps([lt("contextMenuFactory")],jr.prototype,"contextMenuFactory",void 0);Ps([R("ctrlsService")],jr.prototype,"ctrlsService",void 0);Ps([R("navigationService")],jr.prototype,"navigationService",void 0);Ps([R("focusService")],jr.prototype,"focusService",void 0);Ps([R("undoRedoService")],jr.prototype,"undoRedoService",void 0);Ps([R("columnModel")],jr.prototype,"columnModel",void 0);Ps([R("paginationProxy")],jr.prototype,"paginationProxy",void 0);Ps([R("pinnedRowModel")],jr.prototype,"pinnedRowModel",void 0);Ps([lt("rangeService")],jr.prototype,"rangeService",void 0);Ps([lt("clipboardService")],jr.prototype,"clipboardService",void 0);Ps([Z],jr.prototype,"postConstruct",null);var P_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class U1 extends q{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.listenForResize()}),this.addManagedListener(this.eventService,x.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),n=D1(e);if(this.bodyHeight!==n){this.bodyHeight=n;const i={type:x.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),n=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,n)}}P_([R("ctrlsService")],U1.prototype,"ctrlsService",void 0);P_([R("columnModel")],U1.prototype,"columnModel",void 0);P_([R("scrollVisibleService")],U1.prototype,"scrollVisibleService",void 0);P_([Z],U1.prototype,"postConstruct",null);var AY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class AL extends q{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),n=e>0;Qe(this.element,n),Xs(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}}AY([R("pinnedWidthService")],AL.prototype,"pinnedWidthService",void 0);AY([Z],AL.prototype,"postConstruct",null);var DY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class DL extends q{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),n=e>0;Qe(this.element,n),Xs(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}}DY([R("pinnedWidthService")],DL.prototype,"pinnedWidthService",void 0);DY([Z],DL.prototype,"postConstruct",null);var OY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class F_ extends q{constructor(e,n){super(),this.eContainer=e,this.eWrapper=n}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),n=e!=null?`${e}px`:"";this.eContainer.style.height=n,this.eWrapper&&(this.eWrapper.style.height=n)}}OY([R("rowContainerHeightService")],F_.prototype,"maxDivHeightScaler",void 0);OY([Z],F_.prototype,"postConstruct",null);var OL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class M_ extends q{constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.gridOptionsService.isEnableRangeSelection()||Pe(this.rangeService))return;const e={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(e),this.addDestroyFunc(()=>this.dragService.removeDragSource(e))}}OL([lt("rangeService")],M_.prototype,"rangeService",void 0);OL([R("dragService")],M_.prototype,"dragService",void 0);OL([Z],M_.prototype,"postConstruct",null);var PL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class pm extends q{constructor(e,n=!1){super(),this.callback=e,this.addSpacer=n}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){const{columnModel:e}=this,n=this.gridOptionsService.isDomLayout("print"),i=e.getBodyContainerWidth(),r=e.getDisplayedColumnsLeftWidth(),s=e.getDisplayedColumnsRightWidth();let o;n?o=i+r+s:(o=i,this.addSpacer&&(this.gridOptionsService.is("enableRtl")?r:s)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(o+=this.gridOptionsService.getScrollbarWidth())),this.callback(o)}}PL([R("columnModel")],pm.prototype,"columnModel",void 0);PL([R("scrollVisibleService")],pm.prototype,"scrollVisibleService",void 0);PL([Z],pm.prototype,"postConstruct",null);var cd=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},$;(function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.FULL_WIDTH="fullWidth",t.TOP_LEFT="topLeft",t.TOP_RIGHT="topRight",t.TOP_CENTER="topCenter",t.TOP_FULL_WIDTH="topFullWidth",t.STICKY_TOP_LEFT="stickyTopLeft",t.STICKY_TOP_RIGHT="stickyTopRight",t.STICKY_TOP_CENTER="stickyTopCenter",t.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",t.BOTTOM_LEFT="bottomLeft",t.BOTTOM_RIGHT="bottomRight",t.BOTTOM_CENTER="bottomCenter",t.BOTTOM_FULL_WIDTH="bottomFullWidth"})($||($={}));var Fn;(function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.FULL_WIDTH="fullWidth"})(Fn||(Fn={}));function PY(t){switch(t){case $.CENTER:case $.TOP_CENTER:case $.STICKY_TOP_CENTER:case $.BOTTOM_CENTER:return Fn.CENTER;case $.LEFT:case $.TOP_LEFT:case $.STICKY_TOP_LEFT:case $.BOTTOM_LEFT:return Fn.LEFT;case $.RIGHT:case $.TOP_RIGHT:case $.STICKY_TOP_RIGHT:case $.BOTTOM_RIGHT:return Fn.RIGHT;case $.FULL_WIDTH:case $.TOP_FULL_WIDTH:case $.STICKY_TOP_FULL_WIDTH:case $.BOTTOM_FULL_WIDTH:return Fn.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}const Ihe=Hl([[$.CENTER,"ag-center-cols-container"],[$.LEFT,"ag-pinned-left-cols-container"],[$.RIGHT,"ag-pinned-right-cols-container"],[$.FULL_WIDTH,"ag-full-width-container"],[$.TOP_CENTER,"ag-floating-top-container"],[$.TOP_LEFT,"ag-pinned-left-floating-top"],[$.TOP_RIGHT,"ag-pinned-right-floating-top"],[$.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[$.STICKY_TOP_CENTER,"ag-sticky-top-container"],[$.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[$.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[$.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[$.BOTTOM_CENTER,"ag-floating-bottom-container"],[$.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[$.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[$.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),khe=Hl([[$.CENTER,"ag-center-cols-viewport"],[$.TOP_CENTER,"ag-floating-top-viewport"],[$.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[$.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),Ghe=Hl([[$.CENTER,"ag-center-cols-clipper"]]);class kr extends q{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name===$.TOP_FULL_WIDTH||this.name===$.STICKY_TOP_FULL_WIDTH||this.name===$.BOTTOM_FULL_WIDTH||this.name===$.FULL_WIDTH}static getRowContainerCssClasses(e){const n=Ihe.get(e),i=khe.get(e),r=Ghe.get(e);return{container:n,viewport:i,wrapper:r}}static getPinned(e){switch(e){case $.BOTTOM_LEFT:case $.TOP_LEFT:case $.STICKY_TOP_LEFT:case $.LEFT:return"left";case $.BOTTOM_RIGHT:case $.TOP_RIGHT:case $.STICKY_TOP_RIGHT:case $.RIGHT:return"right";default:return null}}postConstruct(){this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([$.CENTER],()=>this.viewportSizeFeature=this.createManagedBean(new U1(this)))}registerWithCtrlsService(){switch(this.name){case $.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case $.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case $.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case $.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case $.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case $.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case $.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case $.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case $.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case $.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case $.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case $.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}}forContainers(e,n){e.indexOf(this.name)>=0&&n()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,n,i,r){this.comp=e,this.eContainer=n,this.eViewport=i,this.eWrapper=r,this.createManagedBean(new jr(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const s=[$.TOP_CENTER,$.TOP_LEFT,$.TOP_RIGHT],o=[$.STICKY_TOP_CENTER,$.STICKY_TOP_LEFT,$.STICKY_TOP_RIGHT],a=[$.BOTTOM_CENTER,$.BOTTOM_LEFT,$.BOTTOM_RIGHT],l=[$.CENTER,$.LEFT,$.RIGHT],u=[...s,...a,...l,...o],c=[$.CENTER,$.LEFT,$.RIGHT,$.FULL_WIDTH],d=[$.CENTER,$.TOP_CENTER,$.STICKY_TOP_CENTER,$.BOTTOM_CENTER],h=[$.LEFT,$.BOTTOM_LEFT,$.TOP_LEFT,$.STICKY_TOP_LEFT],f=[$.RIGHT,$.BOTTOM_RIGHT,$.TOP_RIGHT,$.STICKY_TOP_RIGHT];this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new AL(this.eContainer)),this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(f,()=>{this.pinnedWidthFeature=this.createManagedBean(new DL(this.eContainer)),this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(c,()=>this.createManagedBean(new F_(this.eContainer,this.eWrapper))),this.forContainers(u,()=>this.createManagedBean(new M_(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new pm(p=>this.comp.setContainerWidth(`${p}px`)))),Bp()&&(this.forContainers([$.CENTER],()=>{const p=this.enableRtl?x.EVENT_LEFT_PINNED_WIDTH_CHANGED:x.EVENT_RIGHT_PINNED_WIDTH_CHANGED;this.addManagedListener(this.eventService,p,()=>this.refreshPaddingForFakeScrollbar())}),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()}refreshPaddingForFakeScrollbar(){const{enableRtl:e,columnModel:n,name:i,eWrapper:r,eContainer:s}=this,o=e?$.LEFT:$.RIGHT;this.forContainers([$.CENTER,o],()=>{const a=n.getContainerWidth(o),l=e?"marginLeft":"marginRight";i===$.CENTER?r.style[l]=a?"0px":"16px":s.style[l]=a?"16px":"0px"})}addListeners(){this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,()=>this.onScrollVisibilityChanged()),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onScrollVisibilityChanged(),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if([$.STICKY_TOP_CENTER,$.STICKY_TOP_LEFT,$.STICKY_TOP_RIGHT,$.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const i=()=>{const r=this.gridOptionsService.is("ensureDomOrder"),s=this.gridOptionsService.isDomLayout("print");this.comp.setDomOrder(r||s)};this.addManagedPropertyListener("domLayout",i),i()}stopHScrollOnPinnedRows(){this.forContainers([$.TOP_CENTER,$.STICKY_TOP_CENTER,$.BOTTOM_CENTER],()=>{const e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers([$.CENTER],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers([$.CENTER],()=>this.onHorizontalViewportChanged())}onScrollVisibilityChanged(){const e=this.gridOptionsService.getScrollbarWidth()||0;if(this.name===$.CENTER){const i=this.scrollVisibleService.isHorizontalScrollShowing()?e:0,r=i==0?"100%":`calc(100% + ${i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setViewportHeight(r))}if(this.name===$.FULL_WIDTH){const i=`calc(100% - ${Bp()?16:0}px)`;this.eContainer.style.setProperty("width",i)}}addPreventScrollWhileDragging(){const e=n=>{this.dragService.isDragging()&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(){const e=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,n)}getCenterWidth(){return x_(this.eViewport)}getCenterViewportScrollLeft(){return vv(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const n=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>n())}isViewportVisible(){return bu(this.eViewport)}getViewportScrollLeft(){return vv(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||Bj(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Cv(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!kr.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged()),Bp()&&this.refreshPaddingForFakeScrollbar()}onDisplayedRowsChanged(e=!1){if(this.visible){const n=this.gridOptionsService.isDomLayout("print"),i=s=>{const o=s.isFullWidth(),a=this.embedFullWidthRows||n;return this.isFullWithContainer?!a&&o:a||!o},r=this.getRowCtrls().filter(i);this.comp.setRowCtrls(r,e)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)}getRowCtrls(){switch(this.name){case $.TOP_CENTER:case $.TOP_LEFT:case $.TOP_RIGHT:case $.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case $.STICKY_TOP_CENTER:case $.STICKY_TOP_LEFT:case $.STICKY_TOP_RIGHT:case $.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case $.BOTTOM_CENTER:case $.BOTTOM_LEFT:case $.BOTTOM_RIGHT:case $.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}}cd([R("scrollVisibleService")],kr.prototype,"scrollVisibleService",void 0);cd([R("dragService")],kr.prototype,"dragService",void 0);cd([R("ctrlsService")],kr.prototype,"ctrlsService",void 0);cd([R("columnModel")],kr.prototype,"columnModel",void 0);cd([R("resizeObserverService")],kr.prototype,"resizeObserverService",void 0);cd([R("animationFrameService")],kr.prototype,"animationFrameService",void 0);cd([R("rowRenderer")],kr.prototype,"rowRenderer",void 0);cd([Z],kr.prototype,"postConstruct",null);var dl=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const $he=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="${$.TOP_LEFT}"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="${$.TOP_CENTER}"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="${$.TOP_RIGHT}"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="${$.TOP_FULL_WIDTH}"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-clipper" ref="eBodyClipper" role="presentation">
                <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                    <ag-row-container ref="leftContainer" name="${$.LEFT}"></ag-row-container>
                    <ag-row-container ref="centerContainer" name="${$.CENTER}"></ag-row-container>
                    <ag-row-container ref="rightContainer" name="${$.RIGHT}"></ag-row-container>
                    <ag-row-container ref="fullWidthContainer" name="${$.FULL_WIDTH}"></ag-row-container>
                </div>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="${$.STICKY_TOP_LEFT}"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="${$.STICKY_TOP_CENTER}"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="${$.STICKY_TOP_RIGHT}"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="${$.STICKY_TOP_FULL_WIDTH}"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="${$.BOTTOM_LEFT}"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="${$.BOTTOM_CENTER}"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="${$.BOTTOM_RIGHT}"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="${$.BOTTOM_FULL_WIDTH}"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`;let oa=class extends Le{constructor(){super($he)}init(){const e=(i,r)=>{const s=`${i}px`;r.style.minHeight=s,r.style.height=s},n={setRowAnimationCssOnBodyViewport:(i,r)=>this.setRowAnimationCssOnBodyViewport(i,r),setColumnCount:i=>Aj(this.getGui(),i),setRowCount:i=>Tj(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setColumnMovingCss:(i,r)=>this.addOrRemoveCssClass(i,r),updateLayoutClasses:(i,r)=>{[this.eBodyViewport.classList,this.eBodyClipper.classList,this.eBody.classList].forEach(o=>{o.toggle(mn.AUTO_HEIGHT,r.autoHeight),o.toggle(mn.NORMAL,r.normal),o.toggle(mn.PRINT,r.print)}),this.addOrRemoveCssClass(mn.AUTO_HEIGHT,r.autoHeight),this.addOrRemoveCssClass(mn.NORMAL,r.normal),this.addOrRemoveCssClass(mn.PRINT,r.print)},setAlwaysVerticalScrollClass:(i,r)=>this.eBodyViewport.classList.toggle(RY,r),registerBodyViewportResizeListener:i=>{const r=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>r())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,r)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(i,r))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new ki),this.ctrl.setComp(n,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||this.gridOptionsService.get("rowSelection")==="multiple")&&Rj(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,n){const i=this.eBodyViewport.classList;i.toggle(fg.ANIMATION_ON,n),i.toggle(fg.ANIMATION_OFF,!n)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};dl([R("resizeObserverService")],oa.prototype,"resizeObserverService",void 0);dl([lt("rangeService")],oa.prototype,"rangeService",void 0);dl([te("eBodyViewport")],oa.prototype,"eBodyViewport",void 0);dl([te("eStickyTop")],oa.prototype,"eStickyTop",void 0);dl([te("eTop")],oa.prototype,"eTop",void 0);dl([te("eBottom")],oa.prototype,"eBottom",void 0);dl([te("gridHeader")],oa.prototype,"headerRootComp",void 0);dl([te("eBodyClipper")],oa.prototype,"eBodyClipper",void 0);dl([te("eBody")],oa.prototype,"eBody",void 0);dl([Z],oa.prototype,"init",null);var FL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let bv=class extends q{postConstruct(){this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)}updateImpl(){const e=this.ctrlsService.getCenterRowContainerCtrl();if(!e)return;const n={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(n)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const i={type:x.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};FL([R("ctrlsService")],bv.prototype,"ctrlsService",void 0);FL([Z],bv.prototype,"postConstruct",null);bv=FL([me("scrollVisibleService")],bv);var FY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},qy;let pg=qy=class extends q{constructor(){super(...arguments),this.gridInstanceId=qy.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[qy.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return $E(this.gridOptionsService,e.target,Uo.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let n=e;for(;n;){const i=n[qy.GRID_DOM_KEY];if(B(i))return i===this.gridInstanceId;n=n.parentElement}return!1}getCellPositionForEvent(e){const n=this.getRenderedCellForEvent(e);return n?n.getCellPosition():null}getNormalisedPosition(e){const n=this.gridOptionsService.isDomLayout("normal"),i=e;let r,s;if(i.clientX!=null||i.clientY!=null?(r=i.clientX,s=i.clientY):(r=i.x,s=i.y),n){const o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();r+=l.left,s+=a.top}return{x:r,y:s}}};pg.gridInstanceSequence=new cL;pg.GRID_DOM_KEY="__ag_grid_instance";FY([R("ctrlsService")],pg.prototype,"ctrlsService",void 0);pg=qy=FY([me("mouseEventService")],pg);var Yr=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Mi=class extends q{constructor(){super(),this.onPageDown=z2(this.onPageDown,100),this.onPageUp=z2(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,n=!1){const i=e.key,r=e.altKey,s=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e);let l=!1;switch(i){case k.PAGE_HOME:case k.PAGE_END:!s&&!r&&(this.onHomeOrEndKey(i),l=!0);break;case k.LEFT:case k.RIGHT:case k.UP:case k.DOWN:if(!a)return!1;s&&!r&&!o&&(this.onCtrlUpDownLeftRight(i,a),l=!0);break;case k.PAGE_DOWN:case k.PAGE_UP:!s&&!r&&(l=this.handlePageUpDown(i,a,n));break}return l&&e.preventDefault(),l}handlePageUpDown(e,n,i){return i&&(n=this.focusService.getFocusedCell()),n?(e===k.PAGE_UP?this.onPageUp(n):this.onPageDown(n),!0):!1}navigateTo(e){const{scrollIndex:n,scrollType:i,scrollColumn:r,focusIndex:s,focusColumn:o}=e;if(B(r)&&!r.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(r),B(n)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(n,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){const a={rowIndex:s,rowPinned:null,column:o};this.rangeService.setRangeToCell(a)}}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.getViewportHeight(),s=this.paginationProxy.getPixelOffset(),o=i.top+r,a=this.paginationProxy.getRowIndexAtPixel(o+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a):this.navigateToNextPage(e,a)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.paginationProxy.getPixelOffset(),s=i.top,o=this.paginationProxy.getRowIndexAtPixel(s+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,n,i=!1){const r=this.getViewportHeight(),s=this.paginationProxy.getPageFirstRow(),o=this.paginationProxy.getPageLastRow(),a=this.paginationProxy.getPixelOffset(),l=this.paginationProxy.getRow(e.rowIndex),u=i?(l==null?void 0:l.rowHeight)-r-a:r-a,c=(l==null?void 0:l.rowTop)+u;let d=this.paginationProxy.getRowIndexAtPixel(c+a);if(d===e.rowIndex){const f=i?-1:1;n=d=e.rowIndex+f}let h;i?(h="bottom",d<s&&(d=s),n<s&&(n=s)):(h="top",d>o&&(d=o),n>o&&(n=o)),this.isRowTallerThanView(d)&&(n=d,h="top"),this.navigateTo({scrollIndex:n,scrollType:h,scrollColumn:null,focusIndex:d,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,n,i=!1){this.navigateTo({scrollIndex:n,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column}),setTimeout(()=>{const r=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:n,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,n=!1){var i;const r=n?-1:1,s=this.getViewportHeight(),o=this.paginationProxy.getPageLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=o;){const u=this.paginationProxy.getRow(l);if(u){const c=(i=u.rowHeight)!==null&&i!==void 0?i:0;if(a+c>s)break;a+=c}l+=r}return Math.max(0,Math.min(l,o))}getViewportHeight(){const n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.gridOptionsService.getScrollbarWidth();let r=n.bottom-n.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(r-=i),r}isRowTallerThanView(e){const n=this.paginationProxy.getRow(e);if(!n)return!1;const i=n.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,n){const i=this.cellNavigationService.getNextCellToFocus(e,n,!0),{rowIndex:r,column:s}=i;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:s,focusIndex:r,focusColumn:s})}onHomeOrEndKey(e){const n=e===k.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),r=n?i[0]:St(i),s=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:r,focusIndex:s,focusColumn:r})}onTabKeyDown(e,n){const i=n.shiftKey;if(this.tabToNextCellCommon(e,i,n)){n.preventDefault();return}if(i){const{rowIndex:s,rowPinned:o}=e.getRowPosition();(o?s===0:s===this.paginationProxy.getPageFirstRow())&&(this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusNextGridCoreContainer(!0,!0):(n.preventDefault(),this.focusService.focusPreviousFromFirstCell(n)))}else e instanceof Uo&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&n.preventDefault()}tabToNextCell(e,n){const i=this.focusService.getFocusedCell();if(!i)return!1;let r=this.getCellByPosition(i);return!r&&(r=this.rowRenderer.getRowByPosition(i),!r||!r.isFullWidth())?!1:this.tabToNextCellCommon(r,e,n)}tabToNextCellCommon(e,n,i){let r=e.isEditing();if(!r&&e instanceof Uo){const a=e.getRowCtrl();a&&(r=a.isEditing())}let s;return r?this.gridOptionsService.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,n,i):s=this.moveToNextEditingCell(e,n,i):s=this.moveToNextCellNotEditing(e,n),s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,n,i=null){const r=e.getCellPosition();e.getGui().focus(),e.stopEditing();const s=this.findNextCellToFocusOn(r,n,!0);return s==null?!1:(s.startEditing(null,!0,i),s.focusCell(!1),!0)}moveToNextEditingRow(e,n,i=null){const r=e.getCellPosition(),s=this.findNextCellToFocusOn(r,n,!0);if(s==null)return!1;const o=s.getCellPosition(),a=this.isCellEditable(r),l=this.isCellEditable(o),u=o&&r.rowIndex===o.rowIndex&&r.rowPinned===o.rowPinned;return a&&e.setFocusOutOnEditor(),u||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,i)),l?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,n){const i=this.columnModel.getAllDisplayedColumns();let r;e instanceof jo?r=Object.assign(Object.assign({},e.getRowPosition()),{column:n?i[0]:St(i)}):r=e.getCellPosition();const s=this.findNextCellToFocusOn(r,n,!1);if(s instanceof Uo)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),n);return B(s)}findNextCellToFocusOn(e,n,i){let r=e;for(;;){e!==r&&(e=r),n||(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextTabbedCell(r,n);const s=this.gridOptionsService.getCallback("tabToNextCell");if(B(s)){const u=s({backwards:n,editing:i,previousCellPosition:e,nextCellPosition:r||null});B(u)?(u.floating&&(et(()=>{console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),u.rowPinned=u.floating),r={rowIndex:u.rowIndex,column:u.column,rowPinned:u.rowPinned}):r=null}if(!r)return null;if(r.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+r.rowIndex,column:r.column},fromCell:!0}),null}const o=this.gridOptionsService.get("editType")==="fullRow";if(i&&!o&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);const a=this.getCellByPosition(r);if(!a){const l=this.rowRenderer.getRowByPosition(r);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(r),a}}isCellEditable(e){const n=this.lookupRowNodeForCell(e);return n?e.column.isCellEditable(n):!1}getCellByPosition(e){const n=this.rowRenderer.getRowByPosition(e);return n?n.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,n,i,r){let s=i,o=!1;for(;s&&(s===i||!this.isValidNavigateCell(s));)this.gridOptionsService.is("enableRtl")?n===k.LEFT&&(s=this.getLastCellOfColSpan(s)):n===k.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(n,s),o=Pe(s);if(o&&e&&e.key===k.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),r){const l=this.gridOptionsService.getCallback("navigateToNextCell");if(B(l)){const c=l({key:n,previousCellPosition:i,nextCellPosition:s||null,event:e});B(c)?(c.floating&&(et(()=>{console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),c.rowPinned=c.floating),s={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}):s=null}}if(!s)return;if(s.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+s.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const a=this.getNormalisedPosition(s);a?this.focusPosition(a):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);const n=this.getCellByPosition(e);return n?(e=n.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,n=!1){const i=this.columnModel.getAllDisplayedColumns(),r=this.rowRenderer.getRowByPosition(e);if(!r||!r.isFullWidth())return!1;const s=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(n?St(i):i[0])};this.focusPosition(o);const a=s!=null?this.rowPositionUtils.before(o,s):!1,l={type:x.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,floating:o.rowPinned,fromBelow:a};return this.eventService.dispatchEvent(l),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const n=this.getCellByPosition(e);if(!n)return e;const i=n.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:St(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const n=this.gridOptionsService.isGroupRowsSticky(),i=this.rowModel.getRow(e.rowIndex);!(n&&(i==null?void 0:i.sticky))&&Pe(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};Yr([R("mouseEventService")],Mi.prototype,"mouseEventService",void 0);Yr([R("paginationProxy")],Mi.prototype,"paginationProxy",void 0);Yr([R("focusService")],Mi.prototype,"focusService",void 0);Yr([lt("rangeService")],Mi.prototype,"rangeService",void 0);Yr([R("columnModel")],Mi.prototype,"columnModel",void 0);Yr([R("rowModel")],Mi.prototype,"rowModel",void 0);Yr([R("ctrlsService")],Mi.prototype,"ctrlsService",void 0);Yr([R("rowRenderer")],Mi.prototype,"rowRenderer",void 0);Yr([R("headerNavigationService")],Mi.prototype,"headerNavigationService",void 0);Yr([R("rowPositionUtils")],Mi.prototype,"rowPositionUtils",void 0);Yr([R("cellNavigationService")],Mi.prototype,"cellNavigationService",void 0);Yr([R("pinnedRowModel")],Mi.prototype,"pinnedRowModel",void 0);Yr([Z],Mi.prototype,"postConstruct",null);Mi=Yr([me("navigationService")],Mi);var Hhe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class gm extends Ef{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gridOptionsService.setDomData(this.getGui(),gm.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),n=this.params,i=r=>{BE(this.gridOptionsService,r,n.node,n.column,!0)||n.onKeyDown(r)};this.addManagedListener(e,"keydown",i)}}gm.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";Hhe([Z],gm.prototype,"postConstruct",null);let Whe=class extends Le{constructor(e,n,i,r,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=n.getColumn(),this.rowNode=n.getRowNode(),this.rowCtrl=n.getRowCtrl(),this.eRow=r,this.cellCtrl=n,this.setTemplate(`<div comp-id="${this.getCompId()}"/>`);const o=this.getGui();this.forceWrapper=n.isForceWrapper(),this.refreshWrapper(!1);const a=(c,d)=>{d!=null&&d!=""?o.setAttribute(c,d):o.removeAttribute(c)};zn(o,"gridcell"),a("col-id",n.getColumnIdSanitised());const l=n.getTabIndex();l!==void 0&&a("tabindex",l.toString());const u={addOrRemoveCssClass:(c,d)=>this.addOrRemoveCssClass(c,d),setUserStyles:c=>rL(o,c),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:c=>this.includeSelection=c,setIncludeRowDrag:c=>this.includeRowDrag=c,setIncludeDndSource:c=>this.includeDndSource=c,setRenderDetails:(c,d,h)=>this.setRenderDetails(c,d,h),setEditDetails:(c,d,h)=>this.setEditDetails(c,d,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};n.setComp(u,this.getGui(),this.eCellWrapper,i,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,n,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(n))}setEditDetails(e,n,i){e?this.createCellEditorInstance(e,n,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const n=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=n||this.forceWrapper,r=i&&this.eCellWrapper==null;r&&(this.eCellWrapper=Qn('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));const s=!i&&this.eCellWrapper!=null;s&&(zl(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);const o=!e&&i,a=o&&this.eCellValue==null;a&&(this.eCellValue=Qn('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));const l=!o&&this.eCellValue!=null;l&&(zl(this.eCellValue),this.eCellValue=void 0);const u=r||s||a||l;return u&&this.removeControls(),e||n&&this.addControls(),u}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,n,i){const r=this.editorVersion,s=e.newAgStackInstance();if(!s)return;const{params:o}=e;s.then(l=>this.afterCellEditorCreated(r,l,o,n,i)),Pe(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const n=this.getParentOfValue();Ti(n);const i=e!=null?bi(e):null;i!=null&&(n.innerHTML=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),zl(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),zl(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;const n=this.cellRenderer.refresh(e.params);return n===!0||n===void 0}createCellRendererInstance(e){const i=!this.beans.gridOptionsService.is("suppressAnimationFrame"),r=this.rendererVersion,{componentClass:s}=e,o=()=>{if(this.rendererVersion!==r||!this.isAlive())return;const l=e.newAgStackInstance(),u=this.afterCellRendererCreated.bind(this,r,s);l&&l.then(u)};i&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,n,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=n,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const s=this.getParentOfValue();Ti(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,n,i,r,s){if(e!==this.editorVersion){this.beans.context.destroyBean(n);return}if(n.isCancelBeforeStart&&n.isCancelBeforeStart()){this.beans.context.destroyBean(n),this.cellCtrl.stopEditing(!0);return}if(!n.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(n);return}this.cellEditor=n,this.cellEditorGui=n.getGui();const l=r||n.isPopup!==void 0&&n.isPopup();l?this.addPopupCellEditor(i,s):this.addInCellEditor(),this.refreshEditStyles(!0,l),n.afterGuiAttached&&n.afterGuiAttached()}refreshEditStyles(e,n){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!n),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!n),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!n),(i=this.rowCtrl)===null||i===void 0||i.setInlineEditingCss(e)}addInCellEditor(){const e=this.getGui(),n=this.beans.gridOptionsService.getDocument();e.contains(n.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,n){this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new gm(e));const r=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&r.appendChild(this.cellEditorGui);const s=this.beans.popupService,o=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),a=n??(i.getPopupPosition?i.getPopupPosition():"over"),l=this.beans.gridOptionsService.is("enableRtl"),u={ePopup:r,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:l?"right":"left",keepWithinBounds:!0},c=s.positionPopupByComponent.bind(s,u),d=this.beans.localeService.getLocaleTextFunc(),h=s.addPopup({modal:o,eChild:r,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:d("ariaLabelCellEditor","Cell Editor")});h&&(this.hideEditorPopup=h.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui(),n=this.beans.gridOptionsService.getDocument();e.contains(n.activeElement)&&b_()&&e.focus({preventScroll:!0}),Ti(this.getParentOfValue())}},Vhe=class extends Le{constructor(e,n,i){super(),this.cellComps={},this.beans=n,this.rowCtrl=e,this.setTemplate(`<div comp-id="${this.getCompId()}" style="${this.getInitialStyle(i)}"/>`);const r=this.getGui(),s=r.style;this.domOrder=this.rowCtrl.getDomOrder(),zn(r,"row");const o=this.rowCtrl.getTabIndex();o!=null&&r.setAttribute("tabindex",o.toString());const a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,u)=>this.addOrRemoveCssClass(l,u),setUserStyles:l=>rL(r,l),setTop:l=>s.top=l,setTransform:l=>s.transform=l,setRowIndex:l=>r.setAttribute("row-index",l),setRowId:l=>r.setAttribute("row-id",l),setRowBusinessKey:l=>r.setAttribute("row-business-key",l)};e.setComp(a,this.getGui(),i),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){const n=this.rowCtrl.getInitialTransform(e),i=this.rowCtrl.getInitialRowTop(e);return n?`transform: ${n}`:`top: ${i}`}showFullWidth(e){const n=r=>{if(this.isAlive()){const s=r.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(r)}else this.beans.context.destroyBean(r)},i=e.newAgStackInstance();i&&i.then(n)}setCellCtrls(e){const n=Object.assign({},this.cellComps);e.forEach(r=>{const s=r.getInstanceId();this.cellComps[s]==null?this.newCellComp(r):n[s]=null});const i=Ja(n).filter(r=>r!=null);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const n=[];e.forEach(i=>{const r=this.cellComps[i.getInstanceId()];r&&n.push(r.getGui())}),iL(this.getGui(),n)}newCellComp(e){const n=new Whe(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=n,this.getGui().appendChild(n.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=Ja(this.cellComps).filter(n=>n!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(n=>{if(!n)return;const i=n.getCtrl().getInstanceId();this.cellComps[i]===n&&(n.detach(),n.destroy(),this.cellComps[i]=null)})}};var mm=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};function Bhe(){const t=Le.elementGettingCreated.getAttribute("name"),e=kr.getRowContainerCssClasses(t);let n;const i=t===$.CENTER,r=t===$.TOP_CENTER||t===$.STICKY_TOP_CENTER||t===$.BOTTOM_CENTER;return i?n=`<div class="${e.wrapper}" ref="eWrapper" role="presentation">
                <div class="${e.viewport}" ref="eViewport" role="presentation">
                    <div class="${e.container}" ref="eContainer"></div>
                </div>
            </div>`:r?n=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:n=`<div class="${e.container}" ref="eContainer"></div>`,n}let Rf=class extends Le{constructor(){super(Bhe()),this.rowComps={},this.name=Le.elementGettingCreated.getAttribute("name"),this.type=PY(this.name)}postConstruct(){const e={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:i=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new kr(this.name)).setComp(e,this.eContainer,this.eViewport,this.eWrapper)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){const n=Object.assign({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const i=r=>{const s=r.getInstanceId(),o=n[s];if(o)this.rowComps[s]=o,delete n[s],this.ensureDomOrder(o.getGui());else{if(!r.getRowNode().displayed)return;const a=new Vhe(r,this.beans,this.type);this.rowComps[s]=a,this.appendRow(a.getGui())}};e.forEach(i),Ja(n).forEach(r=>{this.eContainer.removeChild(r.getGui()),r.destroy()}),zn(this.eContainer,e.length?"rowgroup":"presentation")}appendRow(e){this.domOrder?Vj(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(nL(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}};mm([R("beans")],Rf.prototype,"beans",void 0);mm([te("eViewport")],Rf.prototype,"eViewport",void 0);mm([te("eContainer")],Rf.prototype,"eContainer",void 0);mm([te("eWrapper")],Rf.prototype,"eWrapper",void 0);mm([Z],Rf.prototype,"postConstruct",null);mm([ur],Rf.prototype,"preDestroy",null);var MY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class ML{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gridOptionsService.is("functionsReadOnly"))return;const n=e.dragItem.columns;n&&n.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?st.ICON_PINNED:st.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}}MY([R("columnModel")],ML.prototype,"columnModel",void 0);MY([R("gridOptionsService")],ML.prototype,"gridOptionsService",void 0);var j1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class ym{constructor(e,n){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.eContainer=n,this.centerContainer=!B(e)}init(){this.ctrlsService.whenReady(()=>{this.gridBodyCon=this.ctrlsService.getGridBodyCtrl()})}getIconName(){return this.pinned?st.ICON_PINNED:st.ICON_MOVE}onDragEnter(e){const n=e.dragItem.columns;if(e.dragSource.type===er.ToolPanel)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const r=e.dragItem.visibleState,s=(n||[]).filter(o=>r[o.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.setColumnsPinned(n,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,n,i="api"){if(e){const r=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColumnsVisible(r,n,i)}}setColumnsPinned(e,n,i="api"){if(e){const r=e.filter(s=>!s.getColDef().lockPinned);this.columnModel.setColumnsPinned(r,n,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}normaliseX(e){return this.gridOptionsService.is("enableRtl")&&(e=this.eContainer.clientWidth-e),this.centerContainer&&(e+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),e}checkCenterForScrolling(e){if(this.centerContainer){const n=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=n+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=e<n+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<n+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,n=!1,i=!1,r=!1){var s;if(r){if(this.lastMovedInfo){const{columns:c,toIndex:d}=this.lastMovedInfo;this.moveColumns(c,d,"uiColumnMoved",!0)}return}if(this.lastDraggingEvent=e,Pe(e.hDirection))return;const o=this.normaliseX(e.x);n||this.checkCenterForScrolling(o);const a=this.normaliseDirection(e.hDirection),l=e.dragSource.type,u=((s=e.dragSource.getDragItem().columns)===null||s===void 0?void 0:s.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0))||[];this.attemptMoveColumns({dragSourceType:l,allMovingColumns:u,hDirection:a,mouseX:o,fromEnter:n,fakeEvent:i})}normaliseDirection(e){if(this.gridOptionsService.is("enableRtl"))switch(e){case Fa.Left:return Fa.Right;case Fa.Right:return Fa.Left;default:console.error(`AG Grid: Unknown direction ${e}`)}else return e}attemptMoveColumns(e){const{dragSourceType:n,hDirection:i,mouseX:r,fromEnter:s,fakeEvent:o}=e,a=i===Fa.Left,l=i===Fa.Right;let{allMovingColumns:u}=e;if(n===er.HeaderCell){let v=[];u.forEach(C=>{var w;let E=null,b=C.getParent();for(;b!=null&&b.getDisplayedLeafColumns().length===1;)E=b,b=b.getParent();E!=null?(!!(!((w=E.getColGroupDef())===null||w===void 0)&&w.marryChildren)?E.getProvidedColumnGroup().getLeafColumns():E.getLeafColumns()).forEach(A=>{v.includes(A)||v.push(A)}):v.includes(C)||v.push(C)}),u=v}const c=u.slice();this.columnModel.sortColumnsLikeGridColumns(c);const d=this.calculateValidMoves(c,l,r),h=this.calculateOldIndex(c);if(d.length===0)return;const f=d[0];let p=h!==null&&!s;if(n==er.HeaderCell&&(p=h!==null),p&&!o&&(a&&f>=h||l&&f<=h))return;const g=this.columnModel.getAllDisplayedColumns();let m=[],y=null;for(let v=0;v<d.length;v++){const C=d[v],w=this.columnModel.getProposedColumnOrder(c,C);if(!this.columnModel.doesOrderPassRules(w))continue;const E=w.filter(S=>g.includes(S));if(y===null)y=E;else if(!Ie.areEqual(E,y))break;const b=this.groupFragCount(w);m.push({move:C,fragCount:b})}m.length!==0&&(m.sort((v,C)=>v.fragCount-C.fragCount),this.moveColumns(u,m[0].move,"uiColumnMoved",!1))}calculateOldIndex(e){const n=this.columnModel.getAllGridColumns(),i=oj(e.map(l=>n.indexOf(l))),r=i[0];return St(i)-r!==i.length-1?null:r}moveColumns(e,n,i,r){this.columnModel.moveColumns(e,n,i,r),this.lastMovedInfo=r?null:{columns:e,toIndex:n}}groupFragCount(e){function n(r){let s=[],o=r.getOriginalParent();for(;o!=null;)s.push(o),o=o.getOriginalParent();return s}let i=0;for(let r=0;r<e.length-1;r++){let s=n(e[r]),o=n(e[r+1]);[s,o]=s.length>o.length?[s,o]:[o,s],s.forEach(a=>{o.indexOf(a)===-1&&i++})}return i}calculateValidMoves(e,n,i){if(this.gridOptionsService.is("suppressMovableColumns")||e.some(g=>g.getColDef().suppressMovable))return[];const s=this.columnModel.getDisplayedColumns(this.pinned),o=this.columnModel.getAllGridColumns(),a=s.filter(g=>qs(e,g)),l=s.filter(g=>!qs(e,g)),u=o.filter(g=>!qs(e,g));let c=0,d=i;if(n){let g=0;a.forEach(m=>g+=m.getActualWidth()),d-=g}if(d>0){for(let g=0;g<l.length;g++){const m=l[g];if(d-=m.getActualWidth(),d<0)break;c++}n&&c++}let h;if(c>0){const g=l[c-1];h=u.indexOf(g)+1}else h=u.indexOf(l[0]),h===-1&&(h=0);const f=[h],p=(g,m)=>g-m;if(n){let g=h+1;const m=o.length-1;for(;g<=m;)f.push(g),g++;f.sort(p)}else{let g=h;const m=o.length-1;let y=o[g];for(;g<=m&&this.isColumnHidden(s,y);)g++,f.push(g),y=o[g];g=h-1;const v=0;for(;g>=v;)f.push(g),g--;f.sort(p).reverse()}return f}isColumnHidden(e,n){return e.indexOf(n)<0}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(st.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(st.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(st.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let n=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?n=i.scrollHorizontally(-e):this.needToMoveRight&&(n=i.scrollHorizontally(e)),n!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const s=this.lastDraggingEvent.dragItem.columns.filter(o=>!o.getColDef().lockPinned);if(s.length>0&&(this.dragAndDropService.setGhostIcon(st.ICON_PINNED),this.failedMoveAttempts>7)){const o=this.needToMoveLeft?"left":"right";this.setColumnsPinned(s,o,"uiColumnDragged"),this.dragAndDropService.nudge()}}}}j1([R("columnModel")],ym.prototype,"columnModel",void 0);j1([R("dragAndDropService")],ym.prototype,"dragAndDropService",void 0);j1([R("gridOptionsService")],ym.prototype,"gridOptionsService",void 0);j1([R("ctrlsService")],ym.prototype,"ctrlsService",void 0);j1([Z],ym.prototype,"init",null);var Y1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class vm extends q{constructor(e,n){super(),this.pinned=e,this.eContainer=n}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]];break}})}isInterestedIn(e){return e===er.HeaderCell||e===er.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new ym(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new ML(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===er.ToolPanel}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}}Y1([R("dragAndDropService")],vm.prototype,"dragAndDropService",void 0);Y1([R("columnModel")],vm.prototype,"columnModel",void 0);Y1([R("ctrlsService")],vm.prototype,"ctrlsService",void 0);Y1([Z],vm.prototype,"postConstruct",null);Y1([Z],vm.prototype,"init",null);class NY{static getHeaderClassesFromColDef(e,n,i,r){return Pe(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,n,i,r)}static getToolPanelClassesFromColDef(e,n,i,r){return Pe(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,n,i,r)}static getClassParams(e,n,i,r){return{colDef:e,column:i,columnGroup:r,api:n.api,columnApi:n.columnApi,context:n.context}}static getColumnClassesFromCollDef(e,n,i,r,s){if(Pe(e))return[];let o;if(typeof e=="function"){const a=this.getClassParams(n,i,r,s);o=e(a)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}}var N_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Cm=class LY extends RL{constructor(e){super(LY.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();((s,o)=>{o!=null&&o!=""?e.setAttribute(s,o):e.removeAttribute(s)})("col-id",this.column.getColId());const i={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,o)=>this.addOrRemoveCssClass(s,o),setAriaDescription:s=>Sj(e,s),setAriaSort:s=>s?Oj(e,s):Pj(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper);const r=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",r)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const n=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(n,i))}afterCompCreated(e,n){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(n);return}this.destroyHeaderComp(),this.headerComp=n,this.headerCompGui=n.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};Cm.TEMPLATE=`<div class="ag-header-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;N_([te("eResize")],Cm.prototype,"eResize",void 0);N_([te("eHeaderCompWrapper")],Cm.prototype,"eHeaderCompWrapper",void 0);N_([Z],Cm.prototype,"postConstruct",null);N_([ur],Cm.prototype,"destroyHeaderComp",null);var NL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let q1=class IY extends RL{constructor(e){super(IY.TEMPLATE,e)}postConstruct(){const e=this.getGui(),n=(r,s)=>s!=null?e.setAttribute(r,s):e.removeAttribute(r);e.setAttribute("col-id",this.ctrl.getColId());const i={addOrRemoveCssClass:(r,s)=>this.addOrRemoveCssClass(r,s),setResizableDisplayed:r=>Qe(this.eResize,r),setWidth:r=>e.style.width=r,setAriaExpanded:r=>n("aria-expanded",r),setUserCompDetails:r=>this.setUserCompDetails(r)};this.ctrl.setComp(i,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(n=>this.afterHeaderCompCreated(n))}afterHeaderCompCreated(e){const n=()=>this.destroyBean(e);if(!this.isAlive()){n();return}const i=this.getGui(),r=e.getGui();i.appendChild(r),this.addDestroyFunc(n),this.ctrl.setDragSource(i)}};q1.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;NL([R("userComponentFactory")],q1.prototype,"userComponentFactory",void 0);NL([te("eResize")],q1.prototype,"eResize",void 0);NL([Z],q1.prototype,"postConstruct",null);var kY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},bn;(function(t){t.COLUMN_GROUP="group",t.COLUMN="column",t.FLOATING_FILTER="filter"})(bn||(bn={}));let LL=class extends Le{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){this.getGui().style.transform=this.ctrl.getTransform(),jN(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:n=>this.getGui().style.height=n,setTop:n=>this.getGui().style.top=n,setHeaderCtrls:(n,i)=>this.setHeaderCtrls(n,i),setWidth:n=>this.getGui().style.width=n};this.ctrl.setComp(e)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(e,n){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},e.forEach(r=>{const s=r.getInstanceId();let o=i[s];delete i[s],o==null&&(o=this.createHeaderComp(r),this.getGui().appendChild(o.getGui())),this.headerComps[s]=o}),qt(i,(r,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),n){const r=Ja(this.headerComps);r.sort((o,a)=>{const l=o.getCtrl().getColumnGroupChild().getLeft(),u=a.getCtrl().getColumnGroupChild().getLeft();return l-u});const s=r.map(o=>o.getGui());iL(this.getGui(),s)}}createHeaderComp(e){let n;switch(this.ctrl.getType()){case bn.COLUMN_GROUP:n=new q1(e);break;case bn.FLOATING_FILTER:n=new _f(e);break;default:n=new Cm(e);break}return this.createBean(n),n.setParentComponent(this),n}};kY([Z],LL.prototype,"init",null);kY([ur],LL.prototype,"destroyHeaderCtrls",null);var IL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let zhe=0;class hl extends q{constructor(e,n){super(),this.lastFocusEvent=null,this.columnGroupChild=e,this.parentRowCtrl=n,this.instanceId=e.getUniqueId()+"-"+zhe++}shouldStopEventPropagation(e){const{headerRowIndex:n,column:i}=this.focusService.getFocusedHeader();return qj(this.gridOptionsService,e,n,i)}getWrapperHasFocus(){return this.gridOptionsService.getDocument().activeElement===this.eGui}setGui(e){this.eGui=e,this.addDomData()}handleKeyDown(e){const n=this.getWrapperHasFocus();switch(e.key){case k.PAGE_DOWN:case k.PAGE_UP:case k.PAGE_HOME:case k.PAGE_END:n&&e.preventDefault()}}addDomData(){const e=hl.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gridOptionsService.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}}hl.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";IL([R("focusService")],hl.prototype,"focusService",void 0);IL([R("beans")],hl.prototype,"beans",void 0);IL([R("userComponentFactory")],hl.prototype,"userComponentFactory",void 0);var Uhe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class L_ extends q{constructor(e,n,i,r){super(),this.columnOrGroup=e,this.eCell=n,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=r,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?St(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,Ge.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const e=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),n=B(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&n&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),n=e.getLeft(),i=e.getOldLeft(),r=this.modifyLeftForPrintLayout(e,i),s=this.modifyLeftForPrintLayout(e,n);this.setLeft(r),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){const e=this.getColumnOrGroup(),n=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,n),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,n){if(!this.beans.gridOptionsService.isDomLayout("print")||e.getPinned()==="left")return n;const r=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){const s=this.beans.columnModel.getBodyContainerWidth();return r+s+n}return r+n}setLeft(e){B(e)&&(this.eCell.style.left=`${e}px`);let n;if(this.columnOrGroup instanceof Ge)n=this.columnOrGroup;else{const s=this.columnOrGroup.getLeafColumns();if(!s.length)return;s.length>1&&Dj(this.ariaEl,s.length),n=s[0]}const i=this.beans.columnModel.getAriaColumnIndex(n);YN(this.ariaEl,i)}}Uhe([Z],L_.prototype,"postConstruct",null);var GY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class K1 extends q{constructor(e,n){super(),this.columns=e,this.element=n}postConstruct(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}}GY([R("columnHoverService")],K1.prototype,"columnHoverService",void 0);GY([Z],K1.prototype,"postConstruct",null);var kL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class I_ extends hl{constructor(e,n){super(e,n),this.iconCreated=!1,this.column=e}setComp(e,n,i,r){super.setGui(n),this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=r,this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Ge.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}setupActive(){const e=this.column.getColDef(),n=!!e.filter,i=!!e.floatingFilter;this.active=n&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=pn("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new Ts(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();od(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gridOptionsService.getDocument().activeElement===this.eGui)return;const s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const n=this.beans.columnModel;let i=this.column;do if(i=e?n.getDisplayedColBefore(i):n.getDisplayedColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const n=this.getWrapperHasFocus();switch(e.key){case k.UP:case k.DOWN:n||e.preventDefault();case k.LEFT:case k.RIGHT:if(n)return;e.stopPropagation();case k.ENTER:n&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case k.ESCAPE:n||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),r=!!e.relatedTarget&&vh(e.relatedTarget,"ag-floating-filter");if(i&&r&&e.target===this.eGui){const o=this.lastFocusEvent,a=!!(o&&o.key===k.TAB);if(o&&a){const l=o.shiftKey;this.focusService.focusInto(this.eGui,l)}}const s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(){this.createManagedBean(new K1([this.column],this.eGui));const e=()=>{if(!this.gridOptionsService.is("columnHoverHighlight"))return;const n=this.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",n)};this.addManagedListener(this.eventService,x.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){const e=new L_(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){const e=this.column.getColDef();this.suppressFilterButton=e.floatingFilterComponentParams?!!e.floatingFilterComponentParams.suppressFilterButton:!1}setupUserComp(){if(!this.active)return;const e=this.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,e,"floatingFilter","filterMenuTab",["filterMenuTab"])}setupSyncWithFilter(){if(!this.active)return;const e=n=>{const i=this.comp.getFloatingFilterComp();i&&i.then(r=>{if(r){const s=this.filterManager.getCurrentFloatingFilterParentModel(this.column);r.onParentModelChanged(s,n)}})};this.destroySyncListener=this.addManagedListener(this.column,Ge.EVENT_FILTER_CHANGED,e),this.filterManager.isFilterActive(this.column)&&e(null)}setupWidth(){const e=()=>{const n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};this.addManagedListener(this.column,Ge.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Ge.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))}updateFilterButton(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))}onColDefChanged(){var e,n;const i=this.active;this.setupActive();const r=!i&&this.active;i&&!this.active&&((e=this.destroySyncListener)===null||e===void 0||e.call(this),(n=this.destroyFilterChangedListener)===null||n===void 0||n.call(this));const s=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!s?this.updateCompDetails(s,r):o.then(a=>{var l;!a||this.filterManager.areFilterCompsDifferent((l=this.userCompDetails)!==null&&l!==void 0?l:null,s)?this.updateCompDetails(s,r):this.updateFloatingFilterParams(s)})}updateCompDetails(e,n){this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())}updateFloatingFilterParams(e){var n;if(!e)return;const i=e.params;(n=this.comp.getFloatingFilterComp())===null||n===void 0||n.then(r=>{r!=null&&r.onParamsUpdated&&typeof r.onParamsUpdated=="function"&&r.onParamsUpdated(i)})}}kL([R("filterManager")],I_.prototype,"filterManager",void 0);kL([R("columnHoverService")],I_.prototype,"columnHoverService",void 0);kL([R("menuFactory")],I_.prototype,"menuFactory",void 0);var GL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class k_ extends q{constructor(e,n,i,r,s){super(),this.pinned=e,this.column=n,this.eResize=i,this.comp=r,this.ctrl=s}postConstruct(){const e=this.column.getColDef(),n=[];let i,r;const s=()=>{if(Qe(this.eResize,i),!i)return;const l=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(n.push(l),r){const u=this.gridOptionsService.is("skipHeaderOnAutoSize"),c=()=>{this.columnModel.autoSizeColumn(this.column,u,"uiColumnResized")};this.eResize.addEventListener("dblclick",c);const d=new ln(this.eResize);d.addEventListener(ln.EVENT_DOUBLE_TAP,c),this.addDestroyFunc(()=>{this.eResize.removeEventListener("dblclick",c),d.removeEventListener(ln.EVENT_DOUBLE_TAP,c),d.destroy()})}},o=()=>{n.forEach(l=>l()),n.length=0},a=()=>{const l=this.column.isResizable(),u=!this.gridOptionsService.is("suppressAutoSize")&&!e.suppressAutoSize;(l!==i||u!==r)&&(i=l,r=u,o(),s())};a(),this.addDestroyFunc(o),this.ctrl.addRefreshFunction(a)}onResizing(e,n){const i=this.normaliseResizeAmount(n),r=[{key:this.column,newWidth:this.resizeStartWidth+i}];this.columnModel.setColumnWidths(r,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)}normaliseResizeAmount(e){let n=e;const i=this.pinned!=="left",r=this.pinned==="right";return this.gridOptionsService.is("enableRtl")?i&&(n*=-1):r&&(n*=-1),n}}GL([R("horizontalResizeService")],k_.prototype,"horizontalResizeService",void 0);GL([R("columnModel")],k_.prototype,"columnModel",void 0);GL([Z],k_.prototype,"postConstruct",null);var G_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class X1 extends q{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e;const n=e.getColDef();this.filteredOnly=!!(n!=null&&n.headerCheckboxSelectionFilteredOnly),this.currentPageOnly=!!(n!=null&&n.headerCheckboxSelectionCurrentPageOnly)}onSpaceKeyDown(e){const n=this.cbSelectAll,i=this.gridOptionsService.getDocument();n.isDisplayed()&&!n.getGui().contains(i.activeElement)&&(e.preventDefault(),n.setValue(!n.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new T_),this.cbSelectAll.addCssClass("ag-header-select-all"),zn(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,x.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),w_(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.filteredOnly,this.currentPageOnly);this.cbSelectAll.setValue(e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),r=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${r} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${r} (${i})`),this.headerCellCtrl.refreshAriaDescription()}checkRightRowModelType(e){const n=this.rowModel.getType();return n==="clientSide"||n==="serverSide"?!0:(console.warn(`AG Grid: ${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${n}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue();let n="uiSelectAll";this.currentPageOnly?n="uiSelectAllCurrentPage":this.filteredOnly&&(n="uiSelectAllFiltered");const i={source:n,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};e?this.selectionService.selectAllRowNodes(i):this.selectionService.deselectAllRowNodes(i)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){const n=e,i={column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context};e=n(i)}return e?this.checkRightRowModelType("headerCheckboxSelection"):!1}}G_([R("gridApi")],X1.prototype,"gridApi",void 0);G_([R("columnApi")],X1.prototype,"columnApi",void 0);G_([R("rowModel")],X1.prototype,"rowModel",void 0);G_([R("selectionService")],X1.prototype,"selectionService",void 0);var $Y=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},eu;(function(t){t.TAB_GUARD="ag-tab-guard",t.TAB_GUARD_TOP="ag-tab-guard-top",t.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"})(eu||(eu={}));class $_ extends q{constructor(e){super(),this.skipTabGuardFocus=!1;const{comp:n,eTopGuard:i,eBottomGuard:r,focusInnerElement:s,onFocusIn:o,onFocusOut:a,shouldStopEventPropagation:l,onTabKeyDown:u,handleKeyDown:c,eFocusableElement:d}=e;this.comp=n,this.eTopGuard=i,this.eBottomGuard=r,this.providedFocusInnerElement=s,this.eFocusableElement=d,this.providedFocusIn=o,this.providedFocusOut=a,this.providedShouldStopEventPropagation=l,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=c}postConstruct(){this.createManagedBean(new Ts(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedListener(e,"focus",this.onFocus.bind(this)))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){const e=this.gridOptionsService.getNum("tabIndex")||0;this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}const n=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(n):this.focusInnerElement(n)}onFocusIn(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()}onFocusOut(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(e.defaultPrevented)return;const n=this.tabGuardsAreActive();n&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);n&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const n=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(n.splice(0,1),n.splice(n.length-1,1)),n.length&&n[e?n.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){const n=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,n.focus()}}$Y([R("focusService")],$_.prototype,"focusService",void 0);$Y([Z],$_.prototype,"postConstruct",null);var Fs=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},gi;let Xt=gi=class extends q{static addKeyboardModeEvents(e,n){const i=gi.instancesMonitored.get(e);i&&i.length>0?i.indexOf(n)===-1&&i.push(n):(gi.instancesMonitored.set(e,[n]),e.addEventListener("keydown",gi.toggleKeyboardMode),e.addEventListener("mousedown",gi.toggleKeyboardMode))}static removeKeyboardModeEvents(e,n){const i=gi.instancesMonitored.get(e);let r=[];i&&i.length&&(r=[...i].filter(s=>s!==n),gi.instancesMonitored.set(e,r)),r.length===0&&(e.removeEventListener("keydown",gi.toggleKeyboardMode),e.removeEventListener("mousedown",gi.toggleKeyboardMode))}static toggleKeyboardMode(e){const n=gi.keyboardModeActive,i=e.type==="keydown";if(i&&(e.ctrlKey||e.metaKey||e.altKey)||n&&i||!n&&!i)return;gi.keyboardModeActive=i;const r=e.target.ownerDocument;if(!r)return;const s=gi.instancesMonitored.get(r);s&&s.forEach(o=>{o.dispatchEvent({type:i?x.EVENT_KEYBOARD_FOCUS:x.EVENT_MOUSE_FOCUS})})}init(){const e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.ctrlsService.whenReady(n=>{this.gridCtrl=n.gridCtrl;const i=this.gridOptionsService.getDocument();gi.addKeyboardModeEvents(i,this.gridCtrl),this.addDestroyFunc(()=>this.unregisterGridCompController(this.gridCtrl))})}unregisterGridCompController(e){const n=this.gridOptionsService.getDocument();gi.removeKeyboardModeEvents(n,e)}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,n=this.columnModel.getGridColumn(e.getId());e!==n&&this.clearFocusedCell()}isKeyboardMode(){return gi.keyboardModeActive}getFocusCellToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(e.activeElement,jo.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(e.activeElement,hl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,n){let i=e;for(;i;){if(this.gridOptionsService.getDomData(i,n))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(e){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){const{rowIndex:e,rowPinned:n,column:i}=this.focusedCellPosition,r={rowIndex:e,rowPinned:n,column:i,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:n});return s&&(r.isFullWidthCell=s.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const e=Object.assign({type:x.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:n,rowIndex:i,rowPinned:r,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1}=e,a=this.columnModel.getGridColumn(n);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition=a?{rowIndex:i,rowPinned:Ba(r),column:a}:null;const l=Object.assign(Object.assign({type:x.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:s,preventScrollOnBrowserFocus:o,floating:null});this.eventService.dispatchEvent(l)}isCellFocused(e){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeaderPosition==null)return!1;const n=e.getColumnGroupChild(),i=e.getRowIndex(),r=e.getPinned(),{column:s,headerRowIndex:o}=this.focusedHeaderPosition;return n===s&&i===o&&r==s.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,n){this.focusedHeaderPosition={headerRowIndex:e,column:n}}focusHeaderPosition(e){const{direction:n,fromTab:i,allowUserOverride:r,event:s,fromCell:o}=e;let{headerPosition:a}=e;if(o&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(r){const c=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(i){const h=this.gridOptionsService.getCallback("tabToNextHeader");h&&(a=h({backwards:n==="Before",previousHeaderPosition:c,nextHeaderPosition:a,headerRowCount:d}))}else{const h=this.gridOptionsService.getCallback("navigateToNextHeader");if(h&&s){const f={key:s.key,previousHeaderPosition:c,nextHeaderPosition:a,headerRowCount:d,event:s};a=h(f)}}}return a?a.headerRowIndex===-1?this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(a):this.focusGridView(a.column):(this.headerNavigationService.scrollToColumn(a.column,n),this.ctrlsService.getHeaderRowContainerCtrl(a.column.getPinned()).focusHeader(a.headerRowIndex,a.column,s)):!1}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];return e?(e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:e}})):!1}focusLastHeader(e){const n=this.headerNavigationService.getHeaderRowCount()-1,i=St(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:i},event:e})}focusPreviousFromFirstCell(e){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===Ba(n)}findFocusableElements(e,n,i=!1){const r=Hj;let s=JN;n&&(s+=", "+n),i&&(s+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(r)),a=Array.prototype.slice.apply(e.querySelectorAll(s));return a.length?((u,c)=>u.filter(d=>c.indexOf(d)===-1))(o,a):o}focusInto(e,n=!1,i=!1){const r=this.findFocusableElements(e,null,i),s=n?St(r):r[0];return s?(s.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(e,n){if(!n)return null;const i=this.findFocusableElements(e),r=i.indexOf(n);if(r===-1)return null;let s=-1;for(let o=r-1;o>=0;o--)if(i[o].classList.contains(eu.TAB_GUARD_TOP)){s=o;break}return s<=0?null:i[s-1]}findNextFocusableElement(e=this.eGridDiv,n,i){const r=this.findFocusableElements(e,n?':not([tabindex="-1"])':null),o=this.gridOptionsService.getDocument().activeElement;let a;n?a=r.findIndex(u=>u.contains(o)):a=r.indexOf(o);const l=a+(i?-1:1);return l<0||l>=r.length?null:r[l]}isTargetUnderManagedComponent(e,n){if(!n)return!1;const i=e.querySelectorAll(`.${Ts.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let r=0;r<i.length;r++)if(i[r].contains(n))return!0;return!1}findTabbableParent(e,n=5){let i=0;for(;e&&VE(e)===null&&++i<=n;)e=e.parentElement;return VE(e)===null?null:e}focusGridView(e,n){if(this.gridOptionsService.is("suppressCellFocus"))return n?this.focusLastHeader():this.focusNextGridCoreContainer(!1);const i=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;const{rowIndex:r,rowPinned:s}=i,o=this.getFocusedHeader();if(!e&&o&&(e=o.column),r==null||!e)return!1;if(this.navigationService.ensureCellVisible({rowIndex:r,column:e,rowPinned:s}),this.setFocusedCell({rowIndex:r,column:e,rowPinned:Ba(s),forceBrowserFocus:!0}),this.rangeService){const a={rowIndex:r,rowPinned:s,column:e};this.rangeService.setRangeToCell(a)}return!0}focusNextGridCoreContainer(e,n=!1){return!n&&this.gridCtrl.focusNextInnerContainer(e)?!0:((n||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e==null?void 0:e.column,this.advancedFilterService.getCtrl().focusHeaderComp()}focusNextFromAdvancedFilter(e,n){var i,r;const s=(i=n?void 0:this.advancedFilterFocusColumn)!==null&&i!==void 0?i:(r=this.columnModel.getAllDisplayedColumns())===null||r===void 0?void 0:r[0];return e?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};Xt.AG_KEYBOARD_FOCUS="ag-keyboard-focus";Xt.keyboardModeActive=!1;Xt.instancesMonitored=new Map;Fs([R("eGridDiv")],Xt.prototype,"eGridDiv",void 0);Fs([R("columnModel")],Xt.prototype,"columnModel",void 0);Fs([R("headerNavigationService")],Xt.prototype,"headerNavigationService",void 0);Fs([R("rowRenderer")],Xt.prototype,"rowRenderer",void 0);Fs([R("rowPositionUtils")],Xt.prototype,"rowPositionUtils",void 0);Fs([R("cellPositionUtils")],Xt.prototype,"cellPositionUtils",void 0);Fs([lt("rangeService")],Xt.prototype,"rangeService",void 0);Fs([R("navigationService")],Xt.prototype,"navigationService",void 0);Fs([R("ctrlsService")],Xt.prototype,"ctrlsService",void 0);Fs([R("filterManager")],Xt.prototype,"filterManager",void 0);Fs([lt("advancedFilterService")],Xt.prototype,"advancedFilterService",void 0);Fs([Z],Xt.prototype,"init",null);Xt=gi=Fs([me("focusService")],Xt);var Ru=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class fl extends hl{constructor(e,n){super(e,n),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,n,i,r){super.setGui(n),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(r),this.addColumnHoverListener(),this.setupFilterCss(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new k_(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new K1([this.column],n)),this.createManagedBean(new L_(this.column,n,this.beans)),this.createManagedBean(new Ts(n,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addMouseDownListenerIfNeeded(n),this.addManagedListener(this.column,Ge.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onHeaderHeightChanged.bind(this))}addMouseDownListenerIfNeeded(e){if(!to())return;const n=["mousedown","touchstart"],i=this.gridOptionsService.getDocument();n.forEach(r=>{this.addManagedListener(e,r,s=>{const o=i.activeElement;o!==e&&!e.contains(o)&&(e.focus(),Xt.toggleKeyboardMode(s))})})}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),n=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(n,e)}createParams(){const e=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:e.sortable,enableMenu:this.menuEnabled,showColumnMenu:i=>{this.gridApi.showColumnMenuAfterButtonClick(this.column,i)},progressSort:i=>{this.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,r)=>{this.sortController.setSortForColumn(this.column,i,!!r,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()}}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new X1(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===k.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===k.ENTER&&this.onEnterKeyDown(e)}onEnterKeyDown(e){const n=this.comp.getUserCompInstance();if(n){if(e.ctrlKey||e.metaKey)this.menuEnabled&&n.showMenu&&(e.preventDefault(),n.showMenu());else if(this.sortable){const i=e.shiftKey;this.sortController.progressSort(this.column,i,"uiColumnSorted")}}}isMenuEnabled(){return this.menuEnabled}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const n=this.getRowIndex();this.focusService.setFocusedHeader(n,this.column)}this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(){const e={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>this.eGui,getLocation:()=>"header",getTooltipValue:()=>this.column.getColDef().headerTooltip},n=this.createManagedBean(new TL(e,this.beans));n.setComp(this.eGui),this.refreshFunctions.push(()=>n.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const n=this.column.getColDef(),i=NY.getHeaderClassesFromColDef(n,this.gridOptionsService,this.column,null),r=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(s=>{r.has(s)?r.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),r.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const n=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:er.HeaderCell,eElement:e,defaultIconName:n?st.ICON_HIDE:st.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),dragItemName:this.displayName,onDragStarted:()=>this.column.setMoving(!0,"uiColumnMoved"),onDragStopped:()=>this.column.setMoving(!1,"uiColumnMoved"),onGridEnter:i=>{var r;if(n){const s=((r=i==null?void 0:i.columns)===null||r===void 0?void 0:r.filter(o=>!o.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(s,!0,"uiColumnMoved")}},onGridExit:i=>{var r;if(n){const s=((r=i==null?void 0:i.columns)===null||r===void 0?void 0:r.filter(o=>!o.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(s,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}createDragItem(){const e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}}removeDragSource(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)}onColDefChanged(){this.refresh()}updateState(){const e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const n=this.comp.getUserCompInstance();return!n||!n.refresh?!1:n.refresh(e)}calculateDisplayName(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gridOptionsService.is("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};this.addManagedListener(this.column,Ge.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,Ge.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,Ge.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,Ge.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupWrapTextClass(){const e=()=>{const n=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",n)};e(),this.addRefreshFunction(e)}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:n,comp:i,columnModel:r,gridOptionsService:s}=this;if(!n.isSpanHeaderHeight())return;const{numberOfParents:o,isSpanningTotal:a}=this.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",o>0);const l=r.getColumnHeaderRowHeight();if(o===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}i.addOrRemoveCssClass("ag-header-span-total",a);const c=s.is("pivotMode")?r.getPivotGroupHeaderHeight():r.getGroupHeaderHeight(),d=o*c;e.style.setProperty("top",`${-d}px`),e.style.setProperty("height",`${l+d}px`)}getColumnGroupPaddingInfo(){let e=this.column.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const n=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:n,isSpanningTotal:i}}setupAutoHeight(e){const n=l=>{if(!this.isAlive())return;const{paddingTop:u,paddingBottom:c,borderBottomWidth:d,borderTopWidth:h}=ld(this.getGui()),f=u+c+d+h,g=e.offsetHeight+f;if(l<5){const m=this.beans.gridOptionsService.getDocument(),y=!m||!m.contains(e),v=g==0;if(y||v){this.beans.frameworkOverrides.setTimeout(()=>n(l+1),0);return}}this.columnModel.setColumnHeaderHeight(this.column,g)};let i=!1,r;const s=()=>{const l=this.column.isAutoHeaderHeight();l&&!i&&o(),!l&&i&&a()},o=()=>{i=!0,n(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),r=this.resizeObserverService.observeResize(e,()=>n(0))},a=()=>{i=!1,r&&r(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),r=void 0};s(),this.addDestroyFunc(()=>a()),this.addManagedListener(this.column,Ge.EVENT_WIDTH_CHANGED,()=>i&&n(0)),this.addManagedListener(this.eventService,Ge.EVENT_SORT_CHANGED,()=>{i&&this.beans.frameworkOverrides.setTimeout(()=>n(0))}),this.addRefreshFunction(s)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),n=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(vj(n)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)}setAriaDescriptionProperty(e,n){n!=null?this.ariaDescriptionProperties.set(e,n):this.ariaDescriptionProperties.delete(e)}refreshAriaDescription(){const e=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(e.length?e.join(" "):void 0)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()}addColumnHoverListener(){const e=()=>{if(!this.gridOptionsService.is("columnHoverHighlight"))return;const n=this.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",n)};this.addManagedListener(this.eventService,x.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupFilterCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-filtered",this.column.isFilterActive())};this.addManagedListener(this.column,Ge.EVENT_FILTER_ACTIVE_CHANGED,e),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=n=>this.setActiveHeader(n.type==="mouseenter");this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}}Ru([R("columnModel")],fl.prototype,"columnModel",void 0);Ru([R("columnHoverService")],fl.prototype,"columnHoverService",void 0);Ru([R("sortController")],fl.prototype,"sortController",void 0);Ru([R("menuFactory")],fl.prototype,"menuFactory",void 0);Ru([R("dragAndDropService")],fl.prototype,"dragAndDropService",void 0);Ru([R("resizeObserverService")],fl.prototype,"resizeObserverService",void 0);Ru([R("gridApi")],fl.prototype,"gridApi",void 0);Ru([R("columnApi")],fl.prototype,"columnApi",void 0);Ru([ur],fl.prototype,"removeDragSource",null);var H_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Q1 extends q{constructor(e,n,i,r){super(),this.eResize=n,this.comp=e,this.pinned=i,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.is("suppressAutoSize")){const n=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||i.push(s.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:n,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){this.calculateInitialValues();let n=null;if(e&&(n=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),n){const i=n.getDisplayedLeafColumns();this.resizeTakeFromCols=i.filter(r=>r.isResizable()),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(r=>this.resizeTakeFromStartWidth+=r.getActualWidth()),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(r=>this.resizeTakeFromRatios.push(r.getActualWidth()/this.resizeTakeFromStartWidth))}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)}onResizing(e,n,i="uiColumnResized"){const r=this.normaliseDragChange(n),s=this.resizeStartWidth+r;this.resizeColumns(s,i,e)}resizeLeafColumnsToFit(e){const n=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),n>this.resizeStartWidth&&this.resizeColumns(n,e,!0)}resizeColumns(e,n,i=!0){const r=[];if(r.push({columns:this.resizeCols,ratios:this.resizeRatios,width:e}),this.resizeTakeFromCols){const s=e-this.resizeStartWidth;r.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-s})}this.columnModel.resizeColumnSets({resizeSets:r,finished:i,source:n}),i&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)}calculateInitialValues(){const e=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=e.filter(n=>n.isResizable()),this.resizeStartWidth=0,this.resizeCols.forEach(n=>this.resizeStartWidth+=n.getActualWidth()),this.resizeRatios=[],this.resizeCols.forEach(n=>this.resizeRatios.push(n.getActualWidth()/this.resizeStartWidth))}normaliseDragChange(e){let n=e;return this.gridOptionsService.is("enableRtl")?this.pinned!=="left"&&(n*=-1):this.pinned==="right"&&(n*=-1),n}}H_([R("horizontalResizeService")],Q1.prototype,"horizontalResizeService",void 0);H_([R("autoWidthCalculator")],Q1.prototype,"autoWidthCalculator",void 0);H_([R("columnModel")],Q1.prototype,"columnModel",void 0);H_([Z],Q1.prototype,"postConstruct",null);var jhe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class HY extends q{constructor(e,n){super(),this.removeChildListenersFuncs=[],this.columnGroup=n,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,xt.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(n=>{n.addEventListener("widthChanged",e),n.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{n.removeEventListener("widthChanged",e),n.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}}jhe([Z],HY.prototype,"postConstruct",null);var W_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class J1 extends hl{constructor(e,n){super(e,n),this.columnGroup=e}setComp(e,n,i){super.setGui(n),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();const r=this.getParentRowCtrl().getPinned(),s=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new K1(s,n)),this.createManagedBean(new L_(this.columnGroup,n,this.beans)),this.createManagedBean(new HY(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new Q1(e,i,r,this.columnGroup)),this.createManagedBean(new Ts(n,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}resizeLeafColumnsToFit(e){this.groupResizeFeature&&this.groupResizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){let e=this.displayName;const n={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:r=>{this.columnModel.setColumnGroupOpened(this.columnGroup.getProvidedColumnGroup(),r,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!e){let r=this.columnGroup;const s=r.getLeafColumns();for(;r.getParent()&&r.getParent().getLeafColumns().length===s.length;)r=r.getParent();const o=r.getColGroupDef();o&&(e=o.headerName),e||(e=s?this.columnModel.getDisplayNameForColumn(s[0],"header",!0):"")}const i=this.userComponentFactory.getHeaderGroupCompDetails(n);this.comp.setUserCompDetails(i)}setupTooltip(){const e=this.columnGroup.getColGroupDef(),n={getColumn:()=>this.columnGroup,getGui:()=>this.eGui,getLocation:()=>"headerGroup",getTooltipValue:()=>e&&e.headerTooltip};e&&(n.getColDef=()=>e),this.createManagedBean(new TL(n,this.beans)).setComp(this.eGui)}setupExpandable(){const e=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,bt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,bt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const e=this.columnGroup;this.expandable=e.isExpandable();const n=e.isExpanded();this.expandable?this.comp.setAriaExpanded(n?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.columnGroup.getUniqueId()}addClasses(){const e=this.columnGroup.getColGroupDef(),n=NY.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.columnGroup);this.columnGroup.isPadding()?(n.push("ag-header-group-cell-no-group"),this.columnGroup.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&n.push("ag-header-span-height")):n.push("ag-header-group-cell-with-group"),n.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){const n=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.columnGroup.isMoving());n.forEach(r=>{this.addManagedListener(r,Ge.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.columnGroup)}}handleKeyDown(e){super.handleKeyDown(e);const n=this.getWrapperHasFocus();if(!(!this.expandable||!n)&&e.key===k.ENTER){const i=this.columnGroup,r=!i.isExpanded();this.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),r,"uiColumnExpanded")}}setDragSource(e){if(this.isSuppressMoving())return;const n=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),r={type:er.HeaderCell,eElement:e,defaultIconName:i?st.ICON_HIDE:st.ICON_NOT_ALLOWED,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:()=>n.forEach(s=>s.setMoving(!0,"uiColumnDragged")),onDragStopped:()=>n.forEach(s=>s.setMoving(!1,"uiColumnDragged")),onGridEnter:s=>{var o;if(i){const a=((o=s==null?void 0:s.columns)===null||o===void 0?void 0:o.filter(l=>!l.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(a,!0,"uiColumnMoved")}},onGridExit:s=>{var o;if(i){const a=((o=s==null?void 0:s.columns)===null||o===void 0?void 0:o.filter(l=>!l.getColDef().lockVisible))||[];this.columnModel.setColumnsVisible(a,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(r))}getDragItemForGroup(){const e=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),n={};e.forEach(r=>n[r.getId()]=r.isVisible());const i=[];return this.columnModel.getAllDisplayedColumns().forEach(r=>{e.indexOf(r)>=0&&(i.push(r),zi(e,r))}),e.forEach(r=>i.push(r)),{columns:i,visibleState:n}}isSuppressMoving(){let e=!1;return this.columnGroup.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.is("suppressMovableColumns")}}W_([R("columnModel")],J1.prototype,"columnModel",void 0);W_([R("dragAndDropService")],J1.prototype,"dragAndDropService",void 0);W_([R("gridApi")],J1.prototype,"gridApi",void 0);W_([R("columnApi")],J1.prototype,"columnApi",void 0);var V_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Yhe=0;class wh extends q{constructor(e,n,i){super(),this.instanceId=Yhe++,this.headerCellCtrls={},this.rowIndex=e,this.pinned=n,this.type=i;const r=i==bn.COLUMN_GROUP?"ag-header-row-column-group":i==bn.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${r}`}postConstruct(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(e,n=!0){this.comp=e,n&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}getTransform(){if(to())return"translateZ(0)"}addEventListeners(){this.addManagedListener(this.eventService,x.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){return yh(this.headerCellCtrls).find(n=>n.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){return this.isPrintLayout?this.pinned!=null?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:e,rowHeight:n}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(n+"px")}getTopAndHeight(){let e=this.columnModel.getHeaderRowCount();const n=[];let i=0;this.filterManager.hasFloatingFilters()&&(e++,i=1);const r=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),o=1+i,a=e-o;for(let c=0;c<a;c++)n.push(r);n.push(s);for(let c=0;c<i;c++)n.push(this.columnModel.getFloatingFiltersHeight());let l=0;for(let c=0;c<this.rowIndex;c++)l+=n[c];const u=n[this.rowIndex];return{topOffset:l,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(){const e=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,n)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(s=>{if(s.isEmptyGroup())return;const o=s.getUniqueId();let a=e[o];if(delete e[o],a&&a.getColumnGroupChild()!=s&&(this.destroyBean(a),a=void 0),a==null)switch(this.type){case bn.FLOATING_FILTER:a=this.createBean(new I_(s,this));break;case bn.COLUMN_GROUP:a=this.createBean(new J1(s,this));break;default:a=this.createBean(new fl(s,this));break}this.headerCellCtrls[o]=a});const i=s=>this.focusService.isHeaderWrapperFocused(s)?this.columnModel.isDisplayed(s.getColumnGroupChild()):!1;return qt(e,(s,o)=>{i(o)?this.headerCellCtrls[s]=o:this.destroyBean(o)}),Ja(this.headerCellCtrls)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const n=this.getActualDepth();return["left",null,"right"].forEach(i=>{const r=this.columnModel.getVirtualHeaderGroupRow(i,n);e=e.concat(r)}),e}getActualDepth(){return this.type==bn.FLOATING_FILTER?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,n){const r=Ja(this.headerCellCtrls).find(s=>s.getColumnGroupChild()==e);return r?(r.focus(n),!0):!1}destroy(){qt(this.headerCellCtrls,(e,n)=>{this.destroyBean(n)}),this.headerCellCtrls={},super.destroy()}}V_([R("columnModel")],wh.prototype,"columnModel",void 0);V_([R("focusService")],wh.prototype,"focusService",void 0);V_([R("filterManager")],wh.prototype,"filterManager",void 0);V_([Z],wh.prototype,"postConstruct",null);var wm=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class dd extends q{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,n){this.comp=e,this.eViewport=n,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){const n=new vm(this.pinned,e);this.createManagedBean(n)}refresh(e=!1){const n=new cL,i=this.focusService.getFocusHeaderToUseAfterRefresh(),r=()=>{const l=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let u=0;u<l;u++){const c=this.createBean(new wh(n.next(),this.pinned,bn.COLUMN_GROUP));this.groupsRowCtrls.push(c)}},s=()=>{const l=n.next(),u=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==l);(u||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),u&&(this.columnsRowCtrl=this.createBean(new wh(l,this.pinned,bn.COLUMN)))},o=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const l=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){l();return}const u=n.next();if(this.filtersRowCtrl){const c=this.filtersRowCtrl.getRowIndex()!==u;(!e||c)&&l()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new wh(u,this.pinned,bn.FLOATING_FILTER)))};r(),s(),o();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new pm(e=>this.comp.setCenterWidth(`${e}px`),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",n=this.pinned==="right";this.hidden=!0;const i=()=>{const r=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(r==null)return;const s=r==0,o=this.hidden!==s,a=this.gridOptionsService.is("enableRtl"),l=this.gridOptionsService.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&n)?r+l:r;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!s),o&&(this.hidden=s,this.refresh())};this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,x.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(e){if(e instanceof Ge)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const i=this.groupsRowCtrls[n].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const n=this.getHeaderCtrlForColumn(e);return n?n.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,n,i){const s=this.getAllCtrls()[e];return s?s.focusHeader(n,i):!1}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}}wm([R("ctrlsService")],dd.prototype,"ctrlsService",void 0);wm([R("scrollVisibleService")],dd.prototype,"scrollVisibleService",void 0);wm([R("pinnedWidthService")],dd.prototype,"pinnedWidthService",void 0);wm([R("columnModel")],dd.prototype,"columnModel",void 0);wm([R("focusService")],dd.prototype,"focusService",void 0);wm([R("filterManager")],dd.prototype,"filterManager",void 0);var $L=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let tu=class OS extends Le{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{const r=this.getGui();r.style.width=i,r.style.maxWidth=i,r.style.minWidth=i}};this.createManagedBean(new dd(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",n=this.pinned=="right",i=e?OS.PINNED_LEFT_TEMPLATE:n?OS.PINNED_RIGHT_TEMPLATE:OS.CENTER_TEMPLATE;this.setTemplate(i),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const n=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let i;const r=s=>{const o=s.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),i&&nL(this.eRowContainer,o,i),i=o};e.forEach(s=>{const o=s.getInstanceId(),a=n[o];delete n[o];const l=a||this.createBean(new LL(s));this.headerRowComps[o]=l,this.rowCompsList.push(l),r(l)}),Ja(n).forEach(s=>this.destroyRowComp(s))}};tu.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>';tu.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>';tu.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;$L([te("eCenterContainer")],tu.prototype,"eCenterContainer",void 0);$L([Z],tu.prototype,"init",null);$L([ur],tu.prototype,"destroyRowComps",null);var Z1=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Ma;(function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"})(Ma||(Ma={}));let Hh=class extends q{postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,n,i){if(n||(n=this.focusService.getFocusedHeader()),!n)return!1;const{headerRowIndex:r,column:s}=n,o=this.getHeaderRowCount(),a=e===Ma.UP;let{nextRow:l,nextFocusColumn:u}=a?this.headerPositionUtils.getColumnVisibleParent(s,r):this.headerPositionUtils.getColumnVisibleChild(s,r),c=!1;return l<0&&(l=0,u=s,c=!0),l>=o&&(l=-1),!c&&!u?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:u},allowUserOverride:!0,event:i})}navigateHorizontally(e,n=!1,i){const r=this.focusService.getFocusedHeader(),s=e===Ma.LEFT,o=this.gridOptionsService.is("enableRtl");let a,l;return s!==o?(l="Before",a=this.headerPositionUtils.findHeader(r,l)):(l="After",a=this.headerPositionUtils.findHeader(r,l)),a||!n?this.focusService.focusHeaderPosition({headerPosition:a,direction:l,fromTab:n,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(r,l,i)}focusNextHeaderRow(e,n,i){const r=e.headerRowIndex;let s=null,o;return n==="Before"?r>0&&(o=r-1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=r+1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),this.focusService.focusHeaderPosition({headerPosition:s,direction:n,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,n="After"){if(e.getPinned())return;let i;if(e instanceof xt){const r=e.getDisplayedLeafColumns();i=n==="Before"?St(r):r[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};Z1([R("focusService")],Hh.prototype,"focusService",void 0);Z1([R("headerPositionUtils")],Hh.prototype,"headerPositionUtils",void 0);Z1([R("ctrlsService")],Hh.prototype,"ctrlsService",void 0);Z1([Z],Hh.prototype,"postConstruct",null);Hh=Z1([me("headerNavigationService")],Hh);var eC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Tf extends q{setComp(e,n,i){this.comp=e,this.eGui=n,this.createManagedBean(new Ts(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let n=0,i=e.getHeaderRowCount(),r;this.filterManager.hasFloatingFilters()&&(i++,n=1);const o=this.columnModel.getColumnGroupHeaderRowHeight(),a=this.columnModel.getColumnHeaderRowHeight(),l=1+n,u=i-l;if(r=n*e.getFloatingFiltersHeight(),r+=u*o,r+=a,this.headerHeight===r)return;this.headerHeight=r;const c=`${r+1}px`;this.comp.setHeightAndMinHeight(c),this.eventService.dispatchEvent({type:x.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const n=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",n)}onTabKeyDown(e){const n=this.gridOptionsService.is("enableRtl"),i=e.shiftKey!==n?Ma.LEFT:Ma.RIGHT;(this.headerNavigationService.navigateHorizontally(i,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let n=null;switch(e.key){case k.LEFT:n=Ma.LEFT;case k.RIGHT:B(n)||(n=Ma.RIGHT),this.headerNavigationService.navigateHorizontally(n,!1,e);break;case k.UP:n=Ma.UP;case k.DOWN:B(n)||(n=Ma.DOWN),this.headerNavigationService.navigateVertically(n,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const n=this.gridOptionsService.getDocument(),{relatedTarget:i}=e;!i&&this.eGui.contains(n.activeElement)||this.eGui.contains(i)||this.focusService.clearFocusedHeader()}}eC([R("headerNavigationService")],Tf.prototype,"headerNavigationService",void 0);eC([R("focusService")],Tf.prototype,"focusService",void 0);eC([R("columnModel")],Tf.prototype,"columnModel",void 0);eC([R("ctrlsService")],Tf.prototype,"ctrlsService",void 0);eC([R("filterManager")],Tf.prototype,"filterManager",void 0);var qhe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let HL=class WY extends Le{constructor(){super(WY.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(r,s)=>this.addOrRemoveCssClass(r,s),setHeightAndMinHeight:r=>{this.getGui().style.height=r,this.getGui().style.minHeight=r}};this.createManagedBean(new Tf).setComp(e,this.getGui(),this.getFocusableElement());const i=r=>{this.createManagedBean(r),this.appendChild(r)};i(new tu("left")),i(new tu(null)),i(new tu("right"))}};HL.TEMPLATE='<div class="ag-header" role="presentation"/>';qhe([Z],HL.prototype,"postConstruct",null);var WL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let xv=class extends q{addResizeBar(e){const n={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(n),()=>this.dragService.removeDragSource(n)}onDragStart(e,n){this.dragStartX=n.clientX,this.setResizeIcons();const i=n instanceof MouseEvent&&n.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,n){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,n){this.resizeAmount=n.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};WL([R("dragService")],xv.prototype,"dragService",void 0);WL([R("ctrlsService")],xv.prototype,"ctrlsService",void 0);xv=WL([me("horizontalResizeService")],xv);var tC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Wh=class extends q{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,n){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:n,ePopup:i})},"columnMenu",n.target)}showMenuAfterButtonClick(e,n,i){this.showPopup(e,r=>{this.popupService.positionPopupByComponent({type:i,eventSource:n,ePopup:r,keepWithinBounds:!0,position:"under",column:e})},i,n)}showPopup(e,n,i,r){const s=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!s)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");zn(o,"presentation"),o.classList.add("ag-menu"),this.tabListener=this.addManagedListener(o,"keydown",f=>this.trapFocusWithin(f,o)),s.guiPromise.then(f=>o.appendChild(f));let a;const l=()=>{var f;return(f=s.filterPromise)===null||f===void 0?void 0:f.then(p=>{var g;return(g=p==null?void 0:p.afterGuiDetached)===null||g===void 0?void 0:g.call(p)})},u=r||this.ctrlsService.getGridBodyCtrl().getGui(),c=f=>{e.setMenuVisible(!1,"contextMenu");const p=f instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),p&&r&&bu(r)){const g=this.focusService.findTabbableParent(r);g&&g.focus()}l()},d=this.localeService.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:c,positionCallback:()=>n(o),anchorToElement:u,ariaLabel:d("ariaLabelColumnMenu","Column Menu")});h&&(this.hidePopup=a=h.hideFunc),s.filterPromise.then(f=>{n(o),f.afterGuiAttached&&f.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu")}trapFocusWithin(e,n){e.key!==k.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(n,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(n,e.shiftKey))}isMenuEnabled(e){return e.isFilterAllowed()&&e.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")}};tC([R("filterManager")],Wh.prototype,"filterManager",void 0);tC([R("popupService")],Wh.prototype,"popupService",void 0);tC([R("focusService")],Wh.prototype,"focusService",void 0);tC([R("ctrlsService")],Wh.prototype,"ctrlsService",void 0);Wh=tC([me("menuFactory")],Wh);var B_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Sm extends Le{constructor(e){super(Sm.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e,e.items&&e.items.forEach(n=>this.addItem(n))}postConstruct(){this.createManagedBean(new Ts(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(()=>{var e,n,i;return(i=(n=(e=this.activeItem)===null||e===void 0?void 0:e.tabbedItem)===null||n===void 0?void 0:n.afterDetachedCallback)===null||i===void 0?void 0:i.call(n)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader" role="tablist" class="ag-tabs-header ${e?`${e}-header`:""}"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}handleKeyDown(e){const n=this.gridOptionsService.getDocument();switch(e.key){case k.RIGHT:case k.LEFT:if(!this.eHeader.contains(n.activeElement))return;const i=e.key===k.RIGHT,r=this.gridOptionsService.is("enableRtl"),s=this.items.indexOf(this.activeItem),o=i!==r?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===o)return;e.preventDefault();const a=this.items[o];this.showItemWrapper(a),a.eHeaderButton.focus();break;case k.UP:case k.DOWN:e.stopPropagation();break}}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:n,eHeader:i,eBody:r,activeItem:s}=this,a=this.gridOptionsService.getDocument().activeElement,l=e.target;if(e.preventDefault(),i.contains(a)){n.focusInto(r,e.shiftKey);return}let u=null;n.isTargetUnderManagedComponent(r,l)&&(e.shiftKey&&(u=this.focusService.findFocusableElementBeforeTabGuard(r,l)),u||(u=s.eHeaderButton)),!u&&r.contains(a)&&(u=n.findNextFocusableElement(r,!1,e.shiftKey),u||(u=s.eHeaderButton)),u&&u.focus()}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const n=document.createElement("span");zn(n,"tab"),n.setAttribute("tabindex","-1"),n.appendChild(e.title),n.classList.add("ag-tab"),this.eHeader.appendChild(n),od(n,e.titleLabel);const i={tabbedItem:e,eHeaderButton:n};this.items.push(i),n.addEventListener("click",this.showItemWrapper.bind(this,i))}showItem(e){const n=this.items.find(i=>i.tabbedItem===e);n&&this.showItemWrapper(n)}showItemWrapper(e){var n,i;const{tabbedItem:r,eHeaderButton:s}=e;if(this.params.onItemClicked&&this.params.onItemClicked({item:r}),this.activeItem===e){ZU(this.params.onActiveItemClicked);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Ti(this.eBody),r.bodyPromise.then(o=>{this.eBody.appendChild(o);const a=!this.focusService.isKeyboardMode();if(this.focusService.focusInto(this.eBody,!1,a),r.afterAttachedCallback&&r.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const l=r.getScrollableContainer&&r.getScrollableContainer()||o;this.lastScrollListener=this.addManagedListener(l,"scroll",()=>{this.tabbedItemScrollMap.set(r.name,l.scrollTop)});const u=this.tabbedItemScrollMap.get(r.name);u!==void 0&&setTimeout(()=>{l.scrollTop=u},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(i=(n=this.activeItem.tabbedItem).afterDetachedCallback)===null||i===void 0||i.call(n)),s.classList.add("ag-tab-selected"),this.activeItem=e}}B_([R("focusService")],Sm.prototype,"focusService",void 0);B_([te("eHeader")],Sm.prototype,"eHeader",void 0);B_([te("eBody")],Sm.prototype,"eBody",void 0);B_([Z],Sm.prototype,"postConstruct",null);var Khe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const Xhe=50;let rP=class extends q{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,n){const i=this.gridOptionsService.getWindow(),r=()=>{const l=new i.ResizeObserver(n);return l.observe(e),()=>l.disconnect()},s=()=>{let l=eP(e),u=Z2(e),c=!0;const d=()=>{if(c){const h=eP(e),f=Z2(e);(h!==l||f!==u)&&(l=h,u=f,n()),this.doNextPolyfillTurn(d)}};return d(),()=>c=!1},o=this.gridOptionsService.is("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!o?r():s()}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const e=()=>{const n=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],n.forEach(i=>i())};this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(e,Xhe)}};rP=Khe([me("resizeObserverService")],rP);var z_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let gg=class extends q{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const n=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,n&&e===0){const i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${e} called but animation frames are off`)}createTask(e,n,i){this.verifyAnimationFrameOn(i);const r={task:e,index:n,createOrder:++this.taskCount};this.addTaskToList(this[i],r),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,n){e.list.push(n),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const n=this.scrollGoingDown?1:-1;e.list.sort((i,r)=>i.index!==r.index?n*(r.index-i.index):r.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const n=this.createTasksP1,i=n.list,r=this.createTasksP2,s=r.list,o=this.destroyTasks,a=new Date().getTime();let l=new Date().getTime()-a;const u=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;u||l<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let h;if(i.length)this.sortTaskList(n),h=i.pop().task;else if(s.length)this.sortTaskList(r),h=s.pop().task;else if(o.length)h=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(h)||h()}l=new Date().getTime()-a}i.length||s.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const n=this.gridOptionsService.getWindow();n.requestAnimationFrame?n.requestAnimationFrame(e):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(e):n.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let n=!1;return()=>{if(!this.isOn()){this.getFrameworkOverrides().setTimeout(e,0);return}n||(n=!0,this.addDestroyTask(()=>{n=!1,e()}))}}};z_([R("ctrlsService")],gg.prototype,"ctrlsService",void 0);z_([R("paginationProxy")],gg.prototype,"paginationProxy",void 0);z_([Z],gg.prototype,"init",null);gg=z_([me("animationFrameService")],gg);var nC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Vh=class extends q{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl})}getPreferredWidthForColumn(e,n){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const r=this.rowRenderer.getAllCellsForColumn(e);return n||r.push(i),this.addElementsToContainerAndGetWidth(r)}getPreferredWidthForColumnGroup(e){const n=this.getHeaderCellForColumn(e);return n?this.addElementsToContainerAndGetWidth([n]):-1}addElementsToContainerAndGetWidth(e){const n=document.createElement("form");n.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,n)),i.appendChild(n);const r=n.offsetWidth;i.removeChild(n);const s=this.getAutoSizePadding();return r+s}getAutoSizePadding(){const e=this.gridOptionsService.getNum("autoSizePadding");return e!=null&&e>=0?e:20}getHeaderCellForColumn(e){let n=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const r=i.getHtmlElementForColumnHeader(e);r!=null&&(n=r)}),n}cloneItemIntoDummy(e,n){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const r=document.createElement("div"),s=r.classList;["ag-header-cell","ag-header-group-cell"].some(l=>i.classList.contains(l))?(s.add("ag-header","ag-header-row"),r.style.position="static"):s.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(u=>a.classList.contains(u))){for(let u=0;u<a.classList.length;u++){const c=a.classList[u];c!="ag-row-position-absolute"&&s.add(c)}break}a=a.parentElement}r.appendChild(i),n.appendChild(r)}};nC([R("rowRenderer")],Vh.prototype,"rowRenderer",void 0);nC([R("ctrlsService")],Vh.prototype,"ctrlsService",void 0);nC([R("rowCssClassCalculator")],Vh.prototype,"rowCssClassCalculator",void 0);nC([Z],Vh.prototype,"postConstruct",null);Vh=nC([me("autoWidthCalculator")],Vh);var U_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class iC extends q{constructor(e,n){super(),this.createRowCon=e,this.destroyRowCtrls=n,this.stickyRowCtrls=[],this.containerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyRowCtrls(){return this.stickyRowCtrls}checkStickyRows(){let e=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],e);const n=[],i=this.rowRenderer.getFirstVisibleVerticalPixel(),r=s=>{var o,a,l;n.push(s);let u;if(this.isClientSide){let d=s;for(;d.expanded;)if(d.master)d=d.detailNode;else if(d.childrenAfterSort){if(d.childrenAfterSort.length===0)break;d=St(d.childrenAfterSort)}u=d.rowTop+d.rowHeight}else if(s.master)u=s.detailNode.rowTop+s.detailNode.rowHeight;else{const d=(o=s.childStore)===null||o===void 0?void 0:o.getStoreBounds();u=((a=d==null?void 0:d.heightPx)!==null&&a!==void 0?a:0)+((l=d==null?void 0:d.topPx)!==null&&l!==void 0?l:0)}const c=i+e+s.rowHeight;u<c?s.stickyRowTop=e+(u-c):s.stickyRowTop=e,e=0,n.forEach(d=>{const h=d.stickyRowTop+d.rowHeight;e<h&&(e=h)})};for(;;){const s=i+e,o=this.rowModel.getRowIndexAtPixel(s),a=this.rowModel.getRow(o);if(a==null||a.level<0)break;const l=[];let u=a.parent;for(;u.level>=0;)l.push(u),u=u.parent;const c=l.reverse().find(d=>n.indexOf(d)<0&&d.displayed);if(c){r(c);continue}if(a.isExpandable()&&a.expanded&&a.rowTop<s){r(a);continue}break}return this.refreshNodesAndContainerHeight(n,e)}refreshStickyNode(e){const n=[];for(let i=0;i<this.stickyRowCtrls.length;i++){const r=this.stickyRowCtrls[i].getRowNode();r!==e&&n.push(r)}this.refreshNodesAndContainerHeight(n,this.containerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,n){let i=!1;const r=this.stickyRowCtrls.filter(l=>e.indexOf(l.getRowNode())===-1),s=e.filter(l=>this.stickyRowCtrls.findIndex(u=>u.getRowNode()===l)===-1);(r.length||s.length)&&(i=!0);const o={};r.forEach(l=>{o[l.getRowNode().id]=l,this.stickyRowCtrls=this.stickyRowCtrls.filter(u=>u!==l)});for(const l of Object.values(o))l.getRowNode().sticky=!1;this.destroyRowCtrls(o,!1);const a=s.map(l=>(l.sticky=!0,this.createRowCon(l,!1,!1)));return this.stickyRowCtrls.push(...a),this.stickyRowCtrls.forEach(l=>l.setRowTop(l.getRowNode().stickyRowTop)),this.stickyRowCtrls.sort((l,u)=>u.getRowNode().rowIndex-l.getRowNode().rowIndex),this.containerHeight!==n&&(this.containerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),i=!0),i}}U_([R("rowModel")],iC.prototype,"rowModel",void 0);U_([R("rowRenderer")],iC.prototype,"rowRenderer",void 0);U_([R("ctrlsService")],iC.prototype,"ctrlsService",void 0);U_([Z],iC.prototype,"postConstruct",null);var aa=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const Qhe=10;let Cs=class extends q{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,x.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,x.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.isGroupRowsSticky()){const e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new iC(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gridOptionsService.is("keepDetailRows")){const e=this.getKeepDetailRowsCount(),n=e??3;this.cachedRowCtrls=new Jhe(n)}}getKeepDetailRowsCount(){const e=this.gridOptionsService.getNum("keepDetailRowsCount");return B(e)&&e>0?e:Qhe}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]}updateAllRowCtrls(){const e=Ja(this.rowCtrlsByRowIndex),n=this.gridOptionsService.is("ensureDomOrder"),i=this.gridOptionsService.isDomLayout("print");(n||i)&&e.sort((o,a)=>o.getRowNode().rowIndex-a.getRowNode.rowIndex);const r=Ja(this.zombieRowCtrls),s=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];r.length>0||s.length>0?this.allRowCtrls=[...e,...r,...s]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(n=>n.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(n=>n.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedListener(this.eventService,x.EVENT_CELL_FOCUSED,n=>{this.onCellFocusChanged(n)}),this.addManagedListener(this.eventService,x.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,x.EVENT_FLASH_CELLS,n=>{this.getAllCellCtrls().forEach(i=>i.onFlashCells(n))}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(n=>n.onColumnHover())}),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(n=>n.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(n=>n.onLeftChanged())}),this.gridOptionsService.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,x.EVENT_RANGE_SELECTION_CHANGED,()=>{this.getAllCellCtrls().forEach(n=>n.onRangeSelectionChanged())}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PINNED,()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.columnModel.getAllGridColumns();e&&e.forEach(n=>{const i=u=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===n&&u(c)})},r=()=>{i(u=>u.onLeftChanged())},s=()=>{i(u=>u.onWidthChanged())},o=()=>{i(u=>u.onFirstRightPinnedChanged())},a=()=>{i(u=>u.onLastLeftPinnedChanged())},l=()=>{i(u=>u.onColDefChanged())};n.addEventListener("leftChanged",r),n.addEventListener("widthChanged",s),n.addEventListener("firstRightPinnedChanged",o),n.addEventListener("lastLeftPinnedChanged",a),n.addEventListener("colDefChanged",l),this.destroyFuncsForColumnListeners.push(()=>{n.removeEventListener("leftChanged",r),n.removeEventListener("widthChanged",s),n.removeEventListener("firstRightPinnedChanged",o),n.removeEventListener("lastLeftPinnedChanged",a),n.removeEventListener("colDefChanged",l)})})}onDomLayoutChanged(){const e=this.gridOptionsService.isDomLayout("print"),n=e||this.gridOptionsService.is("embedFullWidthRows"),i=n!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=n,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const n={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(n)}getAllCellsForColumn(e){const n=[];return this.getAllRowCtrls().forEach(i=>{const r=i.getCellElement(e);r&&n.push(r)}),n}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,n){e.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),e.length=0,n&&n.forEach(i=>{const r=new jo(i,this.beans,!1,!1,this.printLayout);e.push(r)})}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,n=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{const i=r=>{const s=r[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),r[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);case"bottom":i(this.bottomRowCtrls);default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}n||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const n=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(n==null)return null;const r=this.gridOptionsService.getDocument().activeElement,s=this.gridOptionsService.getDomData(r,Uo.DOM_DATA_KEY_CELL_CTRL),o=this.gridOptionsService.getDomData(r,jo.DOM_DATA_KEY_ROW_CTRL);return s||o?n:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const n=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,r=e.animate&&this.gridOptionsService.isAnimateRows(),s=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(s,r),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),n!=null&&this.restoreFocusedCell(n),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const n=e.newData||e.newPage,i=this.gridOptionsService.is("suppressScrollOnNewData");n&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"}))}stopEditing(e=!1){this.getAllRowCtrls().forEach(n=>{n.stopEditing(e)})}getAllCellCtrls(){const e=[],n=this.getAllRowCtrls(),i=n.length;for(let r=0;r<i;r++){const s=n[r].getAllCellCtrls(),o=s.length;for(let a=0;a<o;a++)e.push(s[a])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...e];for(const i of Object.keys(this.rowCtrlsByRowIndex))n.push(this.rowCtrlsByRowIndex[i]);return n}addRenderedRowListener(e,n,i){const r=this.rowCtrlsByRowIndex[n];r&&r.addEventListener(e,i)}flashCells(e={}){const{flashDelay:n,fadeDelay:i}=e;this.getCellCtrls(e.rowNodes,e.columns).forEach(r=>r.flashCell({flashDelay:n,fadeDelay:i}))}refreshCells(e={}){const n={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{if(i.refreshShouldDestroy()){const r=i.getRowCtrl();r&&r.refreshCell(i)}else i.refreshCell(n)}),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(i=>{if(!i.isFullWidth())return;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(e){var n;const i=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if(!((n=e.columns)===null||n===void 0)&&n.length)return i;const r=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(s&&!this.isRowInMap(o.getRowNode(),s)||!o.isFullWidth())return;const a=o.getFullWidthCellRenderer();a&&r.push(a)}),[...r,...i]}getCellEditorInstances(e){const n=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const r=i.getCellEditor();r&&n.push(r)}),n}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(n=>{if(n.isEditing()){const i=n.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const n={top:{},bottom:{},normal:{}};return e.forEach(i=>{const r=i.id;i.rowPinned==="top"?n.top[r]=i:i.rowPinned==="bottom"?n.bottom[r]=i:n.normal[r]=i}),n}isRowInMap(e,n){const i=e.id,r=e.rowPinned;return r==="bottom"?n.bottom[i]!=null:r==="top"?n.top[i]!=null:n.normal[i]!=null}getRowCtrls(e){const n=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!n?i:i.filter(r=>{const s=r.getRowNode();return this.isRowInMap(s,n)})}getCellCtrls(e,n){let i;B(n)&&(i={},n.forEach(s=>{const o=this.columnModel.getGridColumn(s);B(o)&&(i[o.getId()]=!0)}));const r=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(o=>{const a=o.getColumn().getId();i&&!i[a]||r.push(o)})}),r}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}getRowsToRecycle(){const e=[];qt(this.rowCtrlsByRowIndex,(i,r)=>{r.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const n={};return qt(this.rowCtrlsByRowIndex,(i,r)=>{const s=r.getRowNode();n[s.id]=r}),this.rowCtrlsByRowIndex={},n}removeRowCtrls(e){e.forEach(n=>{const i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:n}=e;let i;this.stickyRowFeature&&b_()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const r=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;this.stickyRowFeature&&(o=this.stickyRowFeature.checkStickyRows());const a=this.firstRenderedRow!==r||this.lastRenderedRow!==s;if(!(n&&!o&&!a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,n),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(n),i!=null)){const l=this.getCellToRestoreFocusToAfterRefresh();i!=null&&l==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e){const n={};e.forEach(s=>n[s]=!0);const r=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!n[s]);this.removeRowCtrls(r)}calculateIndexesToDraw(e){let n=$j(this.firstRenderedRow,this.lastRenderedRow);const i=(s,o)=>{const a=o.getRowNode().rowIndex;a!=null&&(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&n.push(a)};qt(this.rowCtrlsByRowIndex,i),qt(e,i),n.sort((s,o)=>s-o);const r=[];for(let s=0;s<n.length;s++){const o=n[s],a=this.paginationProxy.getRow(o);a&&!a.sticky&&r.push(o)}return r}recycleRows(e,n=!1,i=!1){const r=this.calculateIndexesToDraw(e);this.removeRowCompsNotToDraw(r),this.printLayout&&(n=!1),r.forEach(s=>{this.createOrUpdateRowCtrl(s,e,n,i)}),e&&(i&&!this.gridOptionsService.is("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,n),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,n)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){const n={type:x.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(n)}onDisplayedColumnsChanged(){const e=this.columnModel.isPinningLeft(),n=this.columnModel.isPinningRight();(this.pinningLeft!==e||n!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(n=>{const i=n.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const n=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const r=i.getRowNode();return!(n!=null&&!this.isRowInMap(r,n))})}createOrUpdateRowCtrl(e,n,i,r){let s,o=this.rowCtrlsByRowIndex[e];if(o||(s=this.paginationProxy.getRow(e),B(s)&&B(n)&&n[s.id]&&s.alreadyRendered&&(o=n[s.id],n[s.id]=null)),!o)if(s||(s=this.paginationProxy.getRow(e)),B(s))o=this.createRowCon(s,i,r);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,n){const i=[];qt(e,(r,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);return}s.destroyFirstPass(),n?(this.zombieRowCtrls[s.getInstanceId()]=s,i.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[s.getInstanceId()]})):s.destroySecondPass()}}),n&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),QU(i))}getRowBuffer(){let e=this.gridOptionsService.getNum("rowBuffer");return typeof e=="number"?e<0&&(et(()=>console.warn("AG Grid: rowBuffer should not be negative"),"warn rowBuffer negative"),e=0,this.gridOptionsService.set("rowBuffer",0)):e=10,e}getRowBufferInPixels(){const e=this.getRowBuffer(),n=this.gridOptionsService.getRowHeightAsNumber();return e*n}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,n;if(!this.paginationProxy.isRowsToRender())e=0,n=-1;else if(this.printLayout)e=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow();else{const l=this.getRowBufferInPixels(),u=this.ctrlsService.getGridBodyCtrl(),c=this.gridOptionsService.is("suppressRowVirtualisation");let d=!1,h,f;do{const v=this.paginationProxy.getPixelOffset(),{pageFirstPixel:C,pageLastPixel:w}=this.paginationProxy.getCurrentPagePixelRange(),E=this.rowContainerHeightService.getDivStretchOffset(),b=u.getScrollFeature().getVScrollPosition(),S=b.top,_=b.bottom;c?(h=C+E,f=w+E):(h=Math.max(S+v-l,C)+E,f=Math.min(_+v+l,w)+E),this.firstVisibleVPixel=Math.max(S+v,C)+E,d=this.ensureAllRowsInRangeHaveHeightsCalculated(h,f)}while(d);let p=this.paginationProxy.getRowIndexAtPixel(h),g=this.paginationProxy.getRowIndexAtPixel(f);const m=this.paginationProxy.getPageFirstRow(),y=this.paginationProxy.getPageLastRow();p<m&&(p=m),g>y&&(g=y),e=p,n=g}const i=this.gridOptionsService.isDomLayout("normal"),r=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);i&&!r&&n-e>s&&(n=e+s);const o=e!==this.firstRenderedRow,a=n!==this.lastRenderedRow;if(o||a){this.firstRenderedRow=e,this.lastRenderedRow=n;const l={type:x.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:n};this.eventService.dispatchEvent(l)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:x.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,n){const i=this.paginationProxy.ensureRowHeightsValid(e,n,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const r=e.getRowNode(),s=this.focusService.isRowNodeFocused(r),o=e.isEditing(),a=r.detail;return s||o||a?!!this.paginationProxy.isRowPresent(r):!1}createRowCon(e,n,i){const r=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(r)return r;const s=this.gridOptionsService.is("suppressAnimationFrame"),o=i&&!s&&!this.printLayout;return new jo(e,this.beans,n,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.keys(e).map(n=>e[n].getRowNode())}getRowByPosition(e){let n;const{rowIndex:i}=e;switch(e.rowPinned){case"top":n=this.topRowCtrls[i];break;case"bottom":n=this.bottomRowCtrls[i];break;default:n=this.rowCtrlsByRowIndex[i],n||(n=this.getStickyTopRowCtrls().find(r=>r.getRowNode().rowIndex===i)||null);break}return n}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}isRangeInRenderedViewport(e,n){if(e==null||n==null)return!1;const r=e>this.lastRenderedRow;return!(n<this.firstRenderedRow)&&!r}};aa([R("animationFrameService")],Cs.prototype,"animationFrameService",void 0);aa([R("paginationProxy")],Cs.prototype,"paginationProxy",void 0);aa([R("columnModel")],Cs.prototype,"columnModel",void 0);aa([R("pinnedRowModel")],Cs.prototype,"pinnedRowModel",void 0);aa([R("rowModel")],Cs.prototype,"rowModel",void 0);aa([R("focusService")],Cs.prototype,"focusService",void 0);aa([R("beans")],Cs.prototype,"beans",void 0);aa([R("rowContainerHeightService")],Cs.prototype,"rowContainerHeightService",void 0);aa([R("ctrlsService")],Cs.prototype,"ctrlsService",void 0);aa([Z],Cs.prototype,"postConstruct",null);Cs=aa([me("rowRenderer")],Cs);class Jhe{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const n=this.entriesList[0];n.destroyFirstPass(),n.destroySecondPass(),this.removeFromCache(n)}}getRow(e){if(e==null||e.id==null)return null;const n=this.entriesMap[e.id];return n?(this.removeFromCache(n),n.setCached(!1),n.getRowNode()!=e?null:n):null}removeFromCache(e){const n=e.getRowNode().id;delete this.entriesMap[n],zi(this.entriesList,e)}getEntries(){return this.entriesList}}var VY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let jE=class extends q{formatValue(e,n,i,r,s=!0){let o=null,a;const l=e.getColDef();if(r?a=r:s&&(a=l.valueFormatter),a){const u={value:i,node:n,data:n?n.data:null,colDef:l,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};typeof a=="function"?o=a(u):o=this.expressionService.evaluate(a,u)}else if(l.refData)return l.refData[i]||"";return o==null&&Array.isArray(i)&&(o=i.join(", ")),o}};VY([R("expressionService")],jE.prototype,"expressionService",void 0);jE=VY([me("valueFormatterService")],jE);var VL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let _v=class extends q{init(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))}isEmpty(e){const n=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return ls(n)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,n){const i=n==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(ls(i))return 0;for(let r=0;r<i.length;r++){const s=i[r];if(s.rowTop+s.rowHeight-1>=e)return r}return i.length-1}setPinnedTopRowData(e){this.pinnedTopRows=this.createNodesFromData(e,!0);const n={type:x.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(n)}setPinnedBottomRowData(e){this.pinnedBottomRows=this.createNodesFromData(e,!1);const n={type:x.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(n)}createNodesFromData(e,n){const i=[];if(e){let r=0;e.forEach((s,o)=>{const a=new re(this.beans);a.data=s;const l=n?re.ID_PREFIX_TOP_PINNED:re.ID_PREFIX_BOTTOM_PINNED;a.id=l+o,a.rowPinned=n?"top":"bottom",a.setRowTop(r),a.setRowHeight(this.gridOptionsService.getRowHeightForNode(a).height),a.setRowIndex(o),r+=a.rowHeight,i.push(a)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){ls(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){ls(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;const n=St(e);return n.rowTop+n.rowHeight}};VL([R("beans")],_v.prototype,"beans",void 0);VL([Z],_v.prototype,"init",null);_v=VL([me("pinnedRowModel")],_v);var R4;(function(t){t.Applied="Applied",t.StoreNotFound="StoreNotFound",t.StoreLoading="StoreLoading",t.StoreWaitingToLoad="StoreWaitingToLoad",t.StoreLoadingFailed="StoreLoadingFailed",t.StoreWrongType="StoreWrongType",t.Cancelled="Cancelled"})(R4||(R4={}));class BL{constructor(e,n){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:n,children:null},this.mapToItems[n.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,n){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],n);n(e.rowNode)}depthFirstSearchEverything(e,n,i){if(e.childrenAfterGroup)for(let r=0;r<e.childrenAfterGroup.length;r++){const s=e.childrenAfterGroup[r];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[r],n,i):i&&n(s)}n(e)}forEachChangedNodeDepthFirst(e,n=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,n)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let n=e,i=0;for(;!this.mapToItems[n.id];){const r={rowNode:n,children:null};this.mapToItems[n.id]=r,i++,n=n.parent}return i}populateColumnsMap(e,n){if(!this.keepingColumns||!n)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),n.forEach(r=>this.nodeIdsToColumns[i.id][r.getId()]=!0),i=i.parent}linkPathItems(e,n){let i=e;for(let r=0;r<n;r++){const s=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(s),i=i.parent}}addParentNode(e,n){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,n)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,n){if(!this.keepingColumns)return n;const i=this.nodeIdsToColumns[e.id];return n.filter(s=>i[s.getId()])}getNotValueColumnsForNode(e,n){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return n.filter(s=>!i[s.getId()])}}class Er extends q{constructor(e){super(),this.state=Er.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=Er.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=Er.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=Er.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,n){this.successCommon(e,n)}pageLoaded(e,n,i){this.successCommon(e,{rowData:n,rowCount:i})}isRequestMostRecentAndLive(e){const n=e===this.version,i=this.isAlive();return n&&i}successCommon(e,n){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=Er.STATE_LOADED,this.processServerResult(n))}dispatchLoadCompleted(e=!0){const n={type:Er.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(n)}}Er.EVENT_LOAD_COMPLETE="loadComplete";Er.STATE_WAITING_TO_LOAD="needsLoading";Er.STATE_LOADING="loading";Er.STATE_LOADED="loaded";Er.STATE_FAILED="failed";var j_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Zhe=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}},PS;let kc=PS=class extends q{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gridOptionsService.getNum("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Ie.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const e=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener(Er.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Ie.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:PS.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:PS.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),n=this.blocks.filter(i=>i.getState()===Er.STATE_WAITING_TO_LOAD).slice(0,e);this.registerLoads(n.length),n.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(n=>{const{id:i,state:r}=n.getBlockStateJson();e[i]=r}),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};kc.BLOCK_LOADED_EVENT="blockLoaded";kc.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";j_([R("rowModel")],kc.prototype,"rowModel",void 0);j_([Z],kc.prototype,"postConstruct",null);j_([Zhe(0,Ar("loggerFactory"))],kc.prototype,"setBeans",null);kc=PS=j_([me("rowNodeBlockLoader")],kc);var zL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Rv=class extends q{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,x.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,n,i,r){const s=this.rowModel.ensureRowHeightsValid(e,n,this.getPageFirstRow(),this.getPageLastRow());return s&&this.calculatePages(),s}isPaginateChildRows(){return this.gridOptionsService.is("groupRemoveSingleChildren")||this.gridOptionsService.is("groupRemoveLowestSingleChildren")?!0:this.gridOptionsService.is("paginateChildRows")}onModelUpdated(e){this.calculatePages();const n={type:x.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(n)}onPaginationPageSizeChanged(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages();const e={type:x.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}goToPage(e){if(!this.active||this.currentPage===e||typeof this.currentPage!="number")return;this.currentPage=e;const n={type:x.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(n)}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return Pe(this.topRowBounds)||Pe(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,n=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:n}}isRowPresent(e){return this.rowModel.isRowPresent(e)?e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){const n=this.getPageFirstRow(),i=this.getPageLastRow();for(let r=n;r<=i;r++){const s=this.getRow(r);s&&e(s)}}getType(){return this.rowModel.getType()}getRowBounds(e){const n=this.rowModel.getRowBounds(e);return n.rowIndex=e,n}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const n=this.getPageForIndex(e);this.goToPage(n)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),n=Math.floor(e/this.pageSize);this.goToPage(n)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPageSize(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(this.pageSize==null||this.pageSize<1)&&(this.pageSize=100)}calculatePages(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(B(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const n=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(n),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const r=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=r-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};zL([R("rowModel")],Rv.prototype,"rowModel",void 0);zL([Z],Rv.prototype,"postConstruct",null);Rv=zL([me("paginationProxy")],Rv);var BY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let YE=class extends q{processAllCellClasses(e,n,i,r){this.processClassRules(e.cellClassRules,n,i,r),this.processStaticCellClasses(e,n,i)}processClassRules(e,n,i,r){if(e==null)return;const s=Object.keys(e),o={},a={};for(let l=0;l<s.length;l++){const u=s[l],c=e[u];let d;typeof c=="string"?d=this.expressionService.evaluate(c,n):typeof c=="function"&&(d=c(n)),u.split(" ").forEach(h=>{h==null||h.trim()==""||(d?o[h]=!0:a[h]=!0)})}r&&Object.keys(a).forEach(r),Object.keys(o).forEach(i)}getStaticCellClasses(e,n){const{cellClass:i}=e;if(!i)return[];let r;return typeof i=="function"?r=i(n):r=i,typeof r=="string"&&(r=[r]),r||[]}processStaticCellClasses(e,n,i){this.getStaticCellClasses(e,n).forEach(s=>{i(s)})}};BY([R("expressionService")],YE.prototype,"expressionService",void 0);YE=BY([me("stylingService")],YE);class efe extends T_{constructor(e){super(e,"ag-toggle-button")}setValue(e,n){return super.setValue(e,n),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}}class tfe extends Io{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,n){const i=super.setValue(e,n);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}class nfe extends Cf{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const e=to();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||e||this.eInput.focus()}),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}setMin(e){var n;const i=e instanceof Date?(n=Ks(e??null,!1))!==null&&n!==void 0?n:void 0:e;return this.min===i?this:(this.min=i,Ua(this.eInput,"min",i),this)}setMax(e){var n;const i=e instanceof Date?(n=Ks(e??null,!1))!==null&&n!==void 0?n:void 0:e;return this.max===i?this:(this.max=i,Ua(this.eInput,"max",i),this)}setStep(e){return this.step===e?this:(this.step=e,Ua(this.eInput,"step",e),this)}getDate(){var e;if(this.eInput.validity.valid)return(e=Zo(this.getValue()))!==null&&e!==void 0?e:void 0}setDate(e,n){this.setValue(Ks(e??null,!1),n)}}class ife extends Io{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:n,step:i}=this.config;e!=null&&this.setMinValue(e),n!=null&&this.setMaxValue(n),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>{const n=e.target.value;this.setValue(n)})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,n){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());const i=super.setValue(e,n);return this.eInput.value=e,i}}var zY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class UL extends Le{constructor(e,n){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e,this.wrapperEl=n}postConstruct(){this.addManagedListener(this.getGui(),"mouseup",this.onMouseUp.bind(this))}setState(e,n){let i="";this.params.valueFormatter&&(i=this.params.valueFormatter(e)),this.populateWithRenderer(e,i)||this.populateWithoutRenderer(e,i),this.value=e}updateHighlighted(e){var n;const i=this.getGui(),r=`ag-rich-select-row-${this.getCompId()}`;(n=i.parentElement)===null||n===void 0||n.setAttribute("id",r),e&&(this.getParentComponent().getAriaElement().setAttribute("aria-activedescendant",r),this.wrapperEl.setAttribute("data-active-option",r)),Gh(i.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,n){const i=this.gridOptionsService.getDocument(),r=this.getGui(),s=i.createElement("span");s.style.overflow="hidden",s.style.textOverflow="ellipsis";const o=bi(B(n)?n:e);s.textContent=B(o)?o:"&nbsp;",r.appendChild(s)}populateWithRenderer(e,n){let i,r;return this.params.cellRenderer&&(r=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:n,api:this.gridOptionsService.api})),r&&(i=r.newAgStackInstance()),i&&aL(i,this.getGui()),i?(i.then(s=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(s)})}),!0):!1}onMouseUp(){const e=this.getParentComponent(),n={type:x.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e==null||e.dispatchEvent(n)}}zY([R("userComponentFactory")],UL.prototype,"userComponentFactory",void 0);zY([Z],UL.prototype,"postConstruct",null);let Y_=class extends Le{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const n=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:r=>{n.forEach(s=>r!=null?s.setAttribute("tabindex",r):s.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new $_({comp:i,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))}createTabGuard(e){const n=document.createElement("div"),i=e==="top"?eu.TAB_GUARD_TOP:eu.TAB_GUARD_BOTTOM;return n.classList.add(eu.TAB_GUARD,i),zn(n,"presentation"),n}addTabGuards(e,n){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",n)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Ti(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,n){O1(e)||(e=e.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",e):super.appendChild(e,n)}};var jL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Af extends Y_{constructor(e){super(Af.getTemplate((e==null?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20;const{cssIdentifier:n="default",ariaRole:i="listbox",listName:r}=e||{};this.cssIdentifier=n,this.ariaRole=i,this.listName=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const n=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),i=this.eContainer;zn(i,this.ariaRole),od(i,n)}addResizeObserver(){const e=()=>this.drawVirtualRows(),n=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(n)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const n=e.target;return n.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=wj(n)-1),!1}onFocusOut(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1}handleKeyDown(e){switch(e.key){case k.UP:case k.DOWN:this.navigate(e.key===k.UP)&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(fu(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;const n=this.lastFocusedRowIndex+(e?-1:1);return n<0||n>=this.model.getRowCount()?!1:(this.focusRow(n),!0)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.ensureIndexVisible(e),window.setTimeout(()=>{if(!this.isAlive())return;const n=this.renderedRows.get(e);n&&n.eDiv.focus()},10)}getComponentAt(e){const n=this.renderedRows.get(e);return n&&n.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((n,i)=>e(n.rowComponent,i))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.environment.getListItemHeight()}ensureIndexVisible(e){const n=this.model.getRowCount();if(typeof e!="number"||e<0||e>=n){console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e);return}const i=e*this.rowHeight,r=i+this.rowHeight,s=this.getGui(),o=s.scrollTop,a=s.offsetHeight,l=o+a,u=o>i,c=l<r;if(u)s.scrollTop=i;else if(c){const d=r-a;s.scrollTop=d}}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;const n=this.model.getRowCount();this.eContainer.style.height=`${n*this.rowHeight}px`,GN(()=>this.eContainer.clientHeight>=n*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,n)=>this.removeRow(n))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const n=this.getGui(),i=n.scrollTop,r=i+n.offsetHeight,s=Math.floor(i/this.rowHeight),o=Math.floor(r/this.rowHeight);this.ensureRowsRendered(s,o,e)}ensureRowsRendered(e,n,i){this.renderedRows.forEach((r,s)=>{(s<e||s>n)&&s!==this.lastFocusedRowIndex&&this.removeRow(s)}),i&&this.refreshRows();for(let r=e;r<=n;r++)this.renderedRows.has(r)||r<this.model.getRowCount()&&this.insertRow(r)}insertRow(e){const n=this.model.getRow(e),i=document.createElement("div");if(i.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),zn(i,this.ariaRole==="tree"?"treeitem":"option"),zN(i,this.model.getRowCount()),UN(i,e+1),i.setAttribute("tabindex","-1"),typeof this.model.isRowSelected=="function"){const s=this.model.isRowSelected(e);Gh(i,!!s),Fj(i,s)}i.style.height=`${this.rowHeight}px`,i.style.top=`${this.rowHeight*e}px`;const r=this.componentCreator(n,i);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),i.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:r,eDiv:i,value:n})}removeRow(e){const n=this.renderedRows.get(e);this.eContainer.removeChild(n.eDiv),this.destroyBean(n.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((n,i)=>{var r,s;if(i>=e)this.removeRow(i);else{const o=this.model.getRow(i);!((s=(r=this.model).areRowsEqual)===null||s===void 0)&&s.call(r,n.value,o)?this.componentUpdater(o,n.rowComponent):this.removeRow(i)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}}jL([R("resizeObserverService")],Af.prototype,"resizeObserverService",void 0);jL([te("eContainer")],Af.prototype,"eContainer",void 0);jL([Z],Af.prototype,"postConstruct",null);var rfe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class UY extends vf{constructor(e){super(Object.assign({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list"},e),"ag-rich-select","smallDown","combobox"),this.searchString="",this.highlightedItem=-1;const{cellRowHeight:n,value:i,valueList:r,searchDebounceDelay:s}=e||{};n&&(this.cellRowHeight=n),i!=null&&(this.value=i),r!=null&&this.setValueList(r),s!=null&&(this.searchDebounceDelay=s)}postConstruct(){var e,n;super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=(e=this.gridOptionsService.getNum("tabIndex"))!==null&&e!==void 0?e:0,this.eWrapper.classList.add("ag-rich-select-value");const i=(n=this.searchDebounceDelay)!==null&&n!==void 0?n:300;this.clearSearchString=Lo(this.clearSearchString,i),this.renderSelectedValue()}createListComponent(){this.listComponent=this.createManagedBean(new Af({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,x.EVENT_FIELD_PICKER_VALUE_SELECTED,r=>{this.onListValueSelected(r.value,r.fromEnterKey)}),this.cellRowHeight&&this.listComponent.setRowHeight(this.cellRowHeight);const e=this.listComponent.getGui(),n=this.listComponent.getAriaElement();this.addManagedListener(e,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(e,"mousedown",r=>r.preventDefault()),e.classList.add("ag-rich-select-list");const i=`ag-rich-select-list-${this.listComponent.getCompId()}`;n.setAttribute("id",i),Mj(this.eWrapper,n)}renderSelectedValue(){const{value:e,eDisplayField:n,config:i}=this,r=this.config.valueFormatter?this.config.valueFormatter(e):e;let s;i.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.config,{value:e,valueFormatted:r,api:this.gridOptionsService.api}));let o;s&&(o=s.newAgStackInstance()),o?(Ti(n),aL(o,n),o.then(a=>{this.addDestroyFunc(()=>this.getContext().destroyBean(a))})):B(this.value)?n.innerText=r:Ti(n)}setValueList(e){this.values=e,this.highlightSelectedValue()}getCurrentValueIndex(){const{values:e,value:n}=this;if(n==null)return-1;for(let i=0;i<e.length;i++)if(e[i]===n)return i;return-1}highlightSelectedValue(e){e==null&&(e=this.getCurrentValueIndex()),e!==-1&&(this.highlightedItem=e,this.listComponent&&this.listComponent.forEachRenderedRow((n,i)=>{n.updateHighlighted(this.highlightedItem===i)}))}setRowHeight(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)}createPickerComponent(){const{values:e}=this;return this.listComponent.setModel({getRowCount:()=>e.length,getRow:n=>e[n]}),this.listComponent}showPicker(){var e,n,i;super.showPicker();const r=this.getCurrentValueIndex();r!==-1?((e=this.listComponent)===null||e===void 0||e.refresh(),(n=this.listComponent)===null||n===void 0||n.ensureIndexVisible(r),this.highlightSelectedValue(r)):(i=this.listComponent)===null||i===void 0||i.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}searchText(e){if(typeof e!="string"){let{key:n}=e;if(n===k.BACKSPACE)this.searchString=this.searchString.slice(0,-1),n="";else if(!R_(e))return;e.preventDefault(),this.searchText(n);return}this.searchString+=e,this.runSearch(),this.clearSearchString()}runSearch(){const e=this.values;let n;const{valueFormatter:i=a=>a,searchStringCreator:r}=this.config;if(typeof e[0]=="number"||typeof e[0]=="string"?n=e.map(a=>i(a)):typeof e[0]=="object"&&r&&(n=r(e)),!n)return;const s=A1(this.searchString,n,!0)[0];if(!s)return;const o=n.indexOf(s);this.selectListItem(o)}clearSearchString(){this.searchString=""}selectListItem(e){!this.isPickerDisplayed||!this.listComponent||e<0||e>=this.values.length||(this.listComponent.ensureIndexVisible(e),this.highlightSelectedValue(e))}setValue(e,n,i){const r=this.values.indexOf(e);return r===-1?this:(this.value=e,i||this.selectListItem(r),this.renderSelectedValue(),super.setValue(e,n))}createRowComponent(e){const n=new UL(this.config,this.eWrapper);return n.setParentComponent(this.listComponent),this.getContext().createBean(n),n.setState(e,e===this.value),n}getRowForMouseEvent(e){const{listComponent:n}=this;if(!n)return-1;const r=(n==null?void 0:n.getGui()).getBoundingClientRect(),s=n.getScrollTop(),o=e.clientY-r.top+s;return Math.floor(o/n.getRowHeight())}onPickerMouseMove(e){if(!this.listComponent)return;const n=this.getRowForMouseEvent(e);n!==-1&&this.selectListItem(n)}onNavigationKeyDown(e,n){e.preventDefault();const i=n===k.DOWN;if(!this.isPickerDisplayed&&i){this.showPicker();return}const r=this.highlightedItem,o=r===-1?0:r+(i?1:-1);this.selectListItem(o)}onEnterKeyDown(e){this.isPickerDisplayed&&(e.preventDefault(),this.onListValueSelected(this.values[this.highlightedItem],!0))}onListValueSelected(e,n){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,n),this.hidePicker()}dispatchPickerEvent(e,n){const i={type:x.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:n,value:e};this.dispatchEvent(i)}onKeyDown(e){const n=e.key;switch(n){case k.LEFT:case k.RIGHT:e.preventDefault();break;case k.DOWN:case k.UP:this.onNavigationKeyDown(e,n);break;case k.ESCAPE:this.isPickerDisplayed&&this.hidePicker();break;case k.ENTER:this.onEnterKeyDown(e);break;default:this.searchText(e)}}}rfe([R("userComponentFactory")],UY.prototype,"userComponentFactory",void 0);var q_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class hd extends mL{constructor(e){super(e,hd.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field")}onValueChange(e){const n=x.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,n,()=>{const i=parseFloat(this.eText.getValue());this.eSlider.setValue(i.toString(),!0),e(i||0)}),this.addManagedListener(this.eSlider,n,()=>{const i=this.eSlider.getValue();this.eText.setValue(i,!0),e(parseFloat(i))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}}hd.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;q_([te("eLabel")],hd.prototype,"eLabel",void 0);q_([te("eSlider")],hd.prototype,"eSlider",void 0);q_([te("eText")],hd.prototype,"eText",void 0);q_([Z],hd.prototype,"init",null);var fd=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class tr extends Le{constructor(e={}){super(tr.getTemplate(e)),this.suppressEnabledCheckbox=!0,this.suppressOpenCloseIcons=!1;const{title:n,enabled:i,items:r,suppressEnabledCheckbox:s,suppressOpenCloseIcons:o}=e;this.title=n,this.cssIdentifier=e.cssIdentifier||"default",this.enabled=i??!0,this.items=r||[],this.alignItems=e.alignItems||"center",s!=null&&(this.suppressEnabledCheckbox=s),o!=null&&(this.suppressOpenCloseIcons=o)}static getTemplate(e){const n=e.cssIdentifier||"default",i=e.direction||"vertical";return`<div class="ag-group ag-${n}-group" role="presentation">
            <div class="ag-group-title-bar ag-${n}-group-title-bar ag-unselectable" ref="eTitleBar" role="button">
                <span class="ag-group-title-bar-icon ag-${n}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${n}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${n}-group-title"></span>
            </div>
            <div ref="eToolbar" class="ag-group-toolbar ag-${n}-group-toolbar">
                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
            </div>
            <div ref="eContainer" class="ag-group-container ag-group-container-${i} ag-${n}-group-container"></div>
        </div>`}postConstruct(){if(this.items.length){const n=this.items;this.items=[],this.addItems(n)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Is("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Is("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",()=>this.toggleGroupExpand()),this.addManagedListener(this.eTitleBar,"keydown",e=>{switch(e.key){case k.ENTER:case k.SPACE:e.preventDefault(),this.toggleGroupExpand();break;case k.RIGHT:case k.LEFT:e.preventDefault(),this.toggleGroupExpand(e.key===k.RIGHT);break}})}refreshAriaStatus(){this.suppressOpenCloseIcons||$a(this.eTitleBar,this.expanded)}refreshChildDisplay(){const e=!this.suppressOpenCloseIcons;Qe(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Qe(this.eGroupOpenedIcon,e&&this.expanded),Qe(this.eGroupClosedIcon,e&&!this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;const n=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(n),this}toggleGroupExpand(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Qe(this.eContainer,!0),this):(e=e??!this.expanded,this.expanded===e?this:(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),Qe(this.eContainer,e),this.dispatchEvent({type:this.expanded?tr.EVENT_EXPANDED:tr.EVENT_COLLAPSED}),this))}addItems(e){e.forEach(n=>this.addItem(n))}addItem(e){const n=this.eContainer,i=e instanceof Le?e.getGui():e;i.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),n.appendChild(i),this.items.push(i)}hideItem(e,n){const i=this.items[n];Qe(i,!e)}setTitle(e){return this.eTitle.innerText=e,this}addCssClassToTitleBar(e){this.eTitleBar.classList.add(e)}setEnabled(e,n){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),n||this.cbGroupEnabled.setValue(e),this}isEnabled(){return this.enabled}onEnableChange(e){return this.cbGroupEnabled.onValueChange(n=>{this.setEnabled(n,!0),e(n)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this}refreshDisabledStyles(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)}}tr.EVENT_EXPANDED="expanded";tr.EVENT_COLLAPSED="collapsed";fd([te("eTitleBar")],tr.prototype,"eTitleBar",void 0);fd([te("eGroupOpenedIcon")],tr.prototype,"eGroupOpenedIcon",void 0);fd([te("eGroupClosedIcon")],tr.prototype,"eGroupClosedIcon",void 0);fd([te("eToolbar")],tr.prototype,"eToolbar",void 0);fd([te("cbGroupEnabled")],tr.prototype,"cbGroupEnabled",void 0);fd([te("eTitle")],tr.prototype,"eTitle",void 0);fd([te("eContainer")],tr.prototype,"eContainer",void 0);fd([Z],tr.prototype,"postConstruct",null);var jY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Sh extends Y_{constructor(e=1){super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[]}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}onTabKeyDown(e){const n=this.getParentComponent(),i=n&&n.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case k.UP:case k.RIGHT:case k.DOWN:case k.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case k.ESCAPE:const n=this.findTopMenu();n&&this.focusService.focusInto(n.getGui());break}}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&e.forEach(n=>{n==="separator"?this.addSeparator():typeof n=="string"?console.warn(`AG Grid: unrecognised menu item ${n}`):this.addItem(n)})}addItem(e){const n=this.createManagedBean(new Si(Object.assign(Object.assign({},e),{isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen())})));n.setParentComponent(this),xj(n.getGui(),this.level),this.menuItems.push(n),this.appendChild(n.getGui()),this.addManagedListener(n,Si.EVENT_MENU_ITEM_SELECTED,i=>{this.dispatchEvent(i)}),this.addManagedListener(n,Si.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem})}activateFirstItem(){const e=this.menuItems.filter(n=>!n.isDisabled())[0];e&&e.activate()}addSeparator(){const e=`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`;this.appendChild(Qn(e))}findTopMenu(){let e=this.getParentComponent();if(!e&&this instanceof Sh)return this;for(;;){const n=e&&e.getParentComponent&&e.getParentComponent();if(!n||!(n instanceof Sh||n instanceof Si))break;e=n}return e instanceof Sh?e:void 0}handleNavKey(e){switch(e){case k.UP:case k.DOWN:const i=this.findNextItem(e===k.UP);i&&i!==this.activeMenuItem&&i.activate();return}const n=this.gridOptionsService.is("enableRtl")?k.RIGHT:k.LEFT;e===n?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const n=this.getParentComponent();n&&n instanceof Si&&(e&&e.preventDefault(),n.closeSubMenu(),n.getGui().focus())}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const n=this.menuItems.filter(s=>!s.isDisabled());if(!n.length)return;if(!this.activeMenuItem)return e?St(n):n[0];e&&n.reverse();let i,r=!1;for(let s=0;s<n.length;s++){const o=n[s];if(!r){o===this.activeMenuItem&&(r=!0);continue}i=o;break}return i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}}jY([R("focusService")],Sh.prototype,"focusService",void 0);jY([Z],Sh.prototype,"postConstruct",null);var sfe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class YY extends Y_{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===k.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}}sfe([Z],YY.prototype,"postConstruct",null);var qY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Si extends Le{constructor(e){super(),this.params=e,this.isActive=!1,this.subMenuIsOpen=!1,this.setTemplate(`<div class="${this.getClassName()}" tabindex="-1" role="treeitem"></div>`)}init(){this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();const e=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),BN(e,!0)):(this.addGuiEventListener("click",n=>this.onItemSelected(n)),this.addGuiEventListener("keydown",n=>{(n.key===k.ENTER||n.key===k.SPACE)&&(n.preventDefault(),this.onItemSelected(n))}),this.addGuiEventListener("mousedown",n=>{n.stopPropagation(),n.preventDefault()}),this.addGuiEventListener("mouseenter",()=>this.onMouseEnter()),this.addGuiEventListener("mouseleave",()=>this.onMouseLeave())),this.params.cssClasses&&this.params.cssClasses.forEach(n=>this.addCssClass(n))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){if(this.closeSubMenu(),!this.params.subMenu)return;const n=Qn('<div class="ag-menu" role="presentation"></div>');let i;if(this.params.subMenu instanceof Array){const l=Cj(this.getGui()),u=isNaN(l)?1:l+1,c=this.createBean(new Sh(u));c.setParentComponent(this),c.addMenuItems(this.params.subMenu),n.appendChild(c.getGui()),this.addManagedListener(c,Si.EVENT_MENU_ITEM_SELECTED,d=>this.dispatchEvent(d)),c.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),i=()=>this.destroyBean(c),e&&setTimeout(()=>c.activateFirstItem(),0)}else{const{subMenu:l}=this.params,u=this.createBean(new YY(l));u.setParentComponent(this);const c=u.getGui(),d="mouseenter",h=()=>this.cancelDeactivate();c.addEventListener(d,h),i=()=>c.removeEventListener(d,h),n.appendChild(c),l.afterGuiAttached&&setTimeout(()=>l.afterGuiAttached(),0)}const r=this.getGui(),s=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:r,ePopup:n}),o=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({modal:!0,eChild:n,positionCallback:s,anchorToElement:r,ariaLabel:o("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,$a(r,!0),this.hideSubMenu=()=>{a&&a.hideFunc(),this.subMenuIsOpen=!1,$a(r,!1),i()}}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,$a(this.getGui(),!1))}isSubMenuOpen(){return this.subMenuIsOpen}activate(e){this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}addIcon(){if(!this.params.checked&&!this.params.icon&&this.params.isCompact)return;const e=Qn(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?e.appendChild(pn("check",this.gridOptionsService)):this.params.icon&&(O1(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){if(!this.params.name&&this.params.isCompact)return;const e=Qn(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addTooltip(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new Sr(this)))}getTooltipParams(){return{location:"menu",value:this.tooltip}}addShortcut(){if(!this.params.shortcut&&this.params.isCompact)return;const e=Qn(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){if(!this.params.subMenu&&this.params.isCompact)return;const e=Qn(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),n=this.getGui();if(this.params.subMenu){const i=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";$a(n,!1),e.appendChild(pn(i,this.gridOptionsService))}n.appendChild(e)}onItemSelected(e){if(this.params.action?this.params.action():this.openSubMenu(e&&e.type==="keydown"),this.params.subMenu&&!this.params.action)return;const n={type:Si.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e};this.dispatchEvent(n)}onItemActivated(){const e={type:Si.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),Si.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),Si.ACTIVATION_DELAY):this.deactivate()}getClassName(e){const n=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?`${n}-${e}`:n}}Si.EVENT_MENU_ITEM_SELECTED="menuItemSelected";Si.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Si.ACTIVATION_DELAY=80;qY([R("popupService")],Si.prototype,"popupService",void 0);qY([Z],Si.prototype,"init",null);var rC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class ea extends Le{constructor(e){super(ea.getTemplate(e)),this.closable=!0,this.config=e}static getTemplate(e){const n=e&&e.cssIdentifier||"default";return`<div class="ag-panel ag-${n}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${n}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${n}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${n}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${n}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:e,closable:n,hideTitleBar:i,title:r,minWidth:s=250,width:o,minHeight:a=250,height:l,centered:u,popup:c,x:d,y:h}=this.config;this.positionableFeature=new F1(this.getGui(),{minWidth:s,width:o,minHeight:a,height:l,centered:u,x:d,y:h,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const f=this.getGui();e&&this.setBodyComponent(e),i?Qe(this.eTitleBar,!1):(r&&this.setTitle(r),this.setClosable(n??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",p=>{const g=this.gridOptionsService.getDocument();if(f.contains(p.relatedTarget)||f.contains(g.activeElement)||this.eTitleBarButtons.contains(p.target)){p.preventDefault();return}const m=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");m&&m.focus()}),!(c&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const n=this.closeButtonComp=new Le(ea.CLOSE_BTN_TEMPLATE);this.getContext().createBean(n);const i=n.getGui(),r=pn("close",this.gridOptionsService);r.classList.add("ag-panel-title-bar-button-icon"),i.appendChild(r),this.addTitleBarButton(n),n.addManagedListener(i,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const n=this.closeButtonComp.getGui();n.parentElement.removeChild(n),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,n){const i=this.eTitleBarButtons,r=i.children,s=r.length;n==null&&(n=s),n=Math.max(0,Math.min(n,s)),e.addCssClass("ag-panel-title-bar-button");const o=e.getGui();n===0?i.insertAdjacentElement("afterbegin",o):n===s?i.insertAdjacentElement("beforeend",o):r[n-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return D1(this.eContentWrapper)}getBodyWidth(){return x_(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&e.offsetParent&&this.close(),super.destroy()}}ea.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';rC([te("eContentWrapper")],ea.prototype,"eContentWrapper",void 0);rC([te("eTitleBar")],ea.prototype,"eTitleBar",void 0);rC([te("eTitleBarButtons")],ea.prototype,"eTitleBarButtons",void 0);rC([te("eTitle")],ea.prototype,"eTitle",void 0);rC([Z],ea.prototype,"postConstruct",null);var ofe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class KY extends ea{constructor(e){super(Object.assign(Object.assign({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const e=this.getGui(),{movable:n,resizable:i,maximizable:r}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",s=>{e.contains(s.relatedTarget)||this.popupService.bringPopupToFront(e)}),n&&this.setMovable(n),r&&this.setMaximizable(r),i&&this.setResizable(i)}renderComponent(){const e=this.getGui(),{alwaysOnTop:n,modal:i,title:r}=this.config,s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:i,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:n,ariaLabel:r||s("ariaLabelDialog","Dialog")});o&&(this.close=o.hideFunc)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:n,y:i,width:r,height:s}=this.lastPosition;this.setWidth(r),this.setHeight(s),this.positionableFeature.offsetElement(n,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){Qe(this.maximizeIcon,!this.isMaximized),Qe(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const n=this.eTitleBar;if(!n||e===this.isMaximizable)return;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(n,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new Le('<div class="ag-dialog-button"></span>')),n=e.getGui();return this.maximizeIcon=pn("maximize",this.gridOptionsService),n.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=pn("minimize",this.gridOptionsService),n.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}}ofe([R("popupService")],KY.prototype,"popupService",void 0);var sC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},sP,Yu;(function(t){t[t.vertical=0]="vertical",t[t.horizontal=1]="horizontal"})(Yu||(Yu={}));let afe=0,Gc=sP=class extends q{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl,this.addManagedListener(this.gridCtrl,x.EVENT_KEYBOARD_FOCUS,()=>{this.popupList.forEach(n=>n.element.classList.add(Xt.AG_KEYBOARD_FOCUS))}),this.addManagedListener(this.gridCtrl,x.EVENT_MOUSE_FOCUS,()=>{this.popupList.forEach(n=>n.element.classList.remove(Xt.AG_KEYBOARD_FOCUS))})})}getPopupParent(){const e=this.gridOptionsService.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:n,ePopup:i}=e,r=this.getPopupIndex(i);if(r!==-1){const p=this.popupList[r];p.alignedToElement=n}const s=n.getBoundingClientRect(),o=this.getParentRect(),a=this.keepXYWithinBounds(i,s.top-o.top,Yu.vertical),l=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${l}px`;const c=o.right-o.left-l;let d;this.gridOptionsService.is("enableRtl")?(d=f(),d<0&&(d=h(),this.setAlignedStyles(i,"left")),d>c&&(d=0,this.setAlignedStyles(i,"right"))):(d=h(),d>c&&(d=f(),this.setAlignedStyles(i,"right")),d<0&&(d=0,this.setAlignedStyles(i,"left"))),i.style.left=`${d}px`,i.style.top=`${a}px`;function h(){return s.right-o.left-2}function f(){return s.left-o.left-l}}positionPopupUnderMouseEvent(e){const{ePopup:n,nudgeX:i,nudgeY:r,skipObserver:s}=e;this.positionPopup({ePopup:n,nudgeX:i,nudgeY:r,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const n=this.getParentRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}positionPopupByComponent(e){const{ePopup:n,nudgeX:i,nudgeY:r,keepWithinBounds:s,eventSource:o,alignSide:a="left",position:l="over",column:u,rowNode:c,type:d}=e,h=o.getBoundingClientRect(),f=this.getParentRect(),p=this.getPopupIndex(n);if(p!==-1){const m=this.popupList[p];m.alignedToElement=o}const g=()=>{let m=h.left-f.left;a==="right"&&(m-=n.offsetWidth-h.width);let y;return l==="over"?(y=h.top-f.top,this.setAlignedStyles(n,"over")):(this.setAlignedStyles(n,"under"),this.shouldRenderUnderOrAbove(n,h,f,e.nudgeY||0)==="under"?y=h.top-f.top+h.height:y=h.top-n.offsetHeight-(r||0)*2-f.top),{x:m,y}};this.positionPopup({ePopup:n,nudgeX:i,nudgeY:r,keepWithinBounds:s,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(d,n,o,null,u,c)})}shouldRenderUnderOrAbove(e,n,i,r){const s=i.bottom-n.bottom,o=n.top-i.top,a=e.offsetHeight+r;return s>a?"under":o>a||o>s?"above":"under"}setAlignedStyles(e,n){const i=this.getPopupIndex(e);if(i===-1)return;const r=this.popupList[i],{alignedToElement:s}=r;!s||(["right","left","over","above","under"].forEach(a=>{s.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!n)||(s.classList.add(`ag-has-popup-positioned-${n}`),e.classList.add(`ag-popup-positioned-${n}`))}callPostProcessPopup(e,n,i,r,s,o){const a=this.gridOptionsService.getCallback("postProcessPopup");a&&a({column:s,rowNode:o,ePopup:n,type:e,eventSource:i,mouseEvent:r})}positionPopup(e){const{ePopup:n,keepWithinBounds:i,nudgeX:r,nudgeY:s,skipObserver:o,updatePosition:a}=e,l={width:0,height:0},u=(c=!1)=>{let{x:d,y:h}=a();c&&n.clientWidth===l.width&&n.clientHeight===l.height||(l.width=n.clientWidth,l.height=n.clientHeight,r&&(d+=r),s&&(h+=s),i&&(d=this.keepXYWithinBounds(n,d,Yu.horizontal),h=this.keepXYWithinBounds(n,h,Yu.vertical)),n.style.left=`${d}px`,n.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(u(),!o){const c=this.resizeObserverService.observeResize(n,()=>u(!0));setTimeout(()=>c(),sP.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=this.gridOptionsService.getDocument();let n=this.getPopupParent();return n===e.body?n=e.documentElement:getComputedStyle(n).position==="static"&&(n=n.offsetParent),tL(n)}keepXYWithinBounds(e,n,i){const r=i===Yu.vertical,s=r?"clientHeight":"clientWidth",o=r?"top":"left",a=r?"offsetHeight":"offsetWidth",l=r?"scrollTop":"scrollLeft",u=this.gridOptionsService.getDocument(),c=u.documentElement,d=this.getPopupParent(),h=d.getBoundingClientRect(),f=u.documentElement.getBoundingClientRect(),p=d===u.body,g=e[a];let y=p?(r?eL:__)(c)+c[l]:d[s];p&&(y-=Math.abs(f[o]-h[o]));const v=y-g;return Math.min(Math.max(n,0),Math.abs(v))}addPopup(e){const n=this.gridOptionsService.getDocument(),{eChild:i,ariaLabel:r,alwaysOnTop:s,positionCallback:o,anchorToElement:a}=e;if(!n)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const l=this.getPopupIndex(i);if(l!==-1)return{hideFunc:this.popupList[l].hideFunc};this.initialisePopupPosition(i);const u=this.createPopupWrapper(i,r,!!s),c=this.addEventListenersToPopup(Object.assign(Object.assign({},e),{wrapperEl:u}));return o&&o(),this.addPopupToPopupList(i,u,c,a),{hideFunc:c}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();B(e.style.top)||(e.style.top=`${i.top*-1}px`),B(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,n,i){const r=this.getPopupParent(),s=document.createElement("div"),{allThemes:o}=this.environment.getTheme();return o.length&&s.classList.add(...o),s.classList.add("ag-popup"),e.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||zn(e,"dialog"),od(e,n),this.focusService.isKeyboardMode()&&e.classList.add(Xt.AG_KEYBOARD_FOCUS),s.appendChild(e),r.appendChild(s),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}addEventListenersToPopup(e){const n=this.gridOptionsService.getDocument(),i=this.getPopupParent(),{wrapperEl:r,eChild:s,click:o,closedCallback:a,afterGuiAttached:l,closeOnEsc:u,modal:c}=e;let d=!1;const h=m=>{if(!r.contains(n.activeElement))return;m.key===k.ESCAPE&&g({keyboardEvent:m})},f=m=>g({mouseEvent:m}),p=m=>g({touchEvent:m}),g=(m={})=>{const{mouseEvent:y,touchEvent:v,keyboardEvent:C}=m;this.isEventFromCurrentPopup({mouseEvent:y,touchEvent:v},s)||this.isEventSameChainAsOriginalEvent({originalMouseEvent:o,mouseEvent:y,touchEvent:v})||d||(d=!0,i.removeChild(r),n.removeEventListener("keydown",h),n.removeEventListener("mousedown",f),n.removeEventListener("touchstart",p),n.removeEventListener("contextmenu",f),this.eventService.removeEventListener(x.EVENT_DRAG_STARTED,f),a&&a(y||v||C),this.removePopupFromPopupList(s))};return l&&l({hidePopup:g}),window.setTimeout(()=>{u&&n.addEventListener("keydown",h),c&&(n.addEventListener("mousedown",f),this.eventService.addEventListener(x.EVENT_DRAG_STARTED,f),n.addEventListener("touchstart",p),n.addEventListener("contextmenu",f))},0),g}addPopupToPopupList(e,n,i,r){this.popupList.push({element:e,wrapper:n,hideFunc:i,instanceId:afe++,isAnchored:!!r}),r&&this.setPopupPositionRelatedToElement(e,r)}getPopupIndex(e){return this.popupList.findIndex(n=>n.element===e)}setPopupPositionRelatedToElement(e,n){const i=this.getPopupIndex(e);if(i===-1)return;const r=this.popupList[i];if(r.stopAnchoringPromise&&r.stopAnchoringPromise.then(o=>o&&o()),r.stopAnchoringPromise=void 0,r.isAnchored=!1,!n)return;const s=this.keepPopupPositionedRelativeTo({element:n,ePopup:e,hidePopup:r.hideFunc});return r.stopAnchoringPromise=s,r.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(n=>n.element!==e)}keepPopupPositionedRelativeTo(e){const n=this.getPopupParent(),i=n.getBoundingClientRect(),{element:r,ePopup:s}=e,o=r.getBoundingClientRect(),a=i.top-o.top,l=i.left-o.left;let u=a,c=l;const d=s.style.top,h=parseInt(d.substring(0,d.length-1),10),f=s.style.left,p=parseInt(f.substring(0,f.length-1),10);return new Nn(g=>{this.getFrameworkOverrides().setInterval(()=>{const m=n.getBoundingClientRect(),y=r.getBoundingClientRect();if(y.top==0&&y.left==0&&y.height==0&&y.width==0){e.hidePopup();return}const C=m.top-y.top;if(C!=u){const E=this.keepXYWithinBounds(s,h+a-C,Yu.vertical);s.style.top=`${E}px`}u=C;const w=m.left-y.left;if(w!=c){const E=this.keepXYWithinBounds(s,p+l-w,Yu.horizontal);s.style.left=`${E}px`}c=w},200).then(m=>{g(()=>{m!=null&&window.clearInterval(m)})})})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,n){const{mouseEvent:i,touchEvent:r}=e,s=i||r;if(!s)return!1;const o=this.getPopupIndex(n);if(o===-1)return!1;for(let a=o;a<this.popupList.length;a++){const l=this.popupList[a];if(HE(l.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){const n=this.gridOptionsService.getDocument();for(;e&&e!==n.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}isEventSameChainAsOriginalEvent(e){const{originalMouseEvent:n,mouseEvent:i,touchEvent:r}=e;let s=null;if(i?s=i:r&&(s=r.touches[0]),s&&n){const o=i?i.screenX:0,a=i?i.screenY:0,l=Math.abs(n.screenX-o)<5,u=Math.abs(n.screenY-a)<5;if(l&&u)return!0}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,n){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!n),n&&this.bringPopupToFront(i))}bringPopupToFront(e){const n=this.getPopupParent(),i=Array.prototype.slice.call(n.querySelectorAll(".ag-popup")),r=i.length,s=Array.prototype.slice.call(n.querySelectorAll(".ag-popup.ag-always-on-top")),o=s.length,a=this.getWrapper(e);if(!a||r<=1||!n.contains(e))return;const l=i.indexOf(a),u=a.querySelectorAll("div"),c=[];for(u.forEach(h=>{h.scrollTop!==0&&c.push([h,h.scrollTop])}),o?a.classList.contains("ag-always-on-top")?l!==r-1&&St(s).insertAdjacentElement("afterend",a):l!==r-o-1&&s[0].insertAdjacentElement("beforebegin",a):l!==r-1&&St(i).insertAdjacentElement("afterend",a);c.length;){const h=c.pop();h[0].scrollTop=h[1]}const d={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:a};this.eventService.dispatchEvent(d)}};Gc.WAIT_FOR_POPUP_CONTENT_RESIZE=200;sC([R("focusService")],Gc.prototype,"focusService",void 0);sC([R("ctrlsService")],Gc.prototype,"ctrlsService",void 0);sC([R("resizeObserverService")],Gc.prototype,"resizeObserverService",void 0);sC([Z],Gc.prototype,"postConstruct",null);Gc=sP=sC([me("popupService")],Gc);class lfe extends Le{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(e,n){this.value=e,this.render(),this.updateSelected(n)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){var n;let i=!1;if(B(e)){const r=(n=this.value)===null||n===void 0?void 0:n.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(r>=0){i=!0,this.hasHighlighting=!0;const s=r+e.length,o=bi(this.value.slice(0,r)),a=bi(this.value.slice(r,s)),l=bi(this.value.slice(s));this.getGui().lastElementChild.innerHTML=`${o}<b>${a}</b>${l}`}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=(e=bi(this.value))!==null&&e!==void 0?e:"&nbsp;"}}var XY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Em extends Ef{constructor(e){super(Em.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new Af({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:n=>this.autocompleteEntries[n]});const e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",n=>n.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,n){e.preventDefault();const i=this.autocompleteEntries.indexOf(this.selectedValue),r=n===k.UP?i-1:i+1;this.checkSetSelectedValue(r)}setSearch(e){this.searchString=e,B(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,n){let i,r=!1;const s=e.toLocaleLowerCase(),o=n.filter(a=>{const u=a.toLocaleLowerCase().indexOf(s),c=u===0,d=u>=0;return d&&(!i||!r&&c||r===c&&a.length<i.length)&&(i=a,r=c),d});return!i&&o.length&&(i=o[0]),{topMatch:i,allMatches:o}}runSearch(){var e,n;const{autocompleteEntries:i}=this.params,r=i.map(u=>{var c;return(c=u.displayValue)!==null&&c!==void 0?c:u.key});let s,o;if(this.params.useFuzzySearch)s=A1(this.searchString,r,!0),o=s.length?s[0]:void 0;else{const u=this.runContainsSearch(this.searchString,r);s=u.allMatches,o=u.topMatch}let a=i.filter(({key:u,displayValue:c})=>s.includes(c??u));if(!a.length&&this.selectedValue&&(!((n=(e=this.params)===null||e===void 0?void 0:e.forceLastSelection)===null||n===void 0)&&n.call(e,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!o)return;const l=s.indexOf(o);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const n=this.autocompleteEntries[e];this.selectedValue!==n&&(this.selectedValue=n,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((i,r)=>{i.updateSelected(e===r)}))}createRowComponent(e){var n;const i=new lfe;return this.getContext().createBean(i),i.setState((n=e.displayValue)!==null&&n!==void 0?n:e.key,e===this.selectedValue),i}onMouseMove(e){const n=this.virtualList.getGui().getBoundingClientRect(),i=this.virtualList.getScrollTop(),r=e.clientY-n.top+i,s=Math.floor(r/this.virtualList.getRowHeight());this.checkSetSelectedValue(s)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!==null&&e!==void 0?e:null}}Em.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;XY([te("eList")],Em.prototype,"eList",void 0);XY([Z],Em.prototype,"init",null);var YL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class hs extends Le{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){const n=Ba(e);this.updateValue(n),this.updateAutocompleteList(n)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:hs.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var n,i,r,s;const o=(i=(n=this.listGenerator)===null||n===void 0?void 0:n.call(this,e,this.lastPosition))!==null&&i!==void 0?i:{enabled:!1};if((!o.type||o.type!==((r=this.autocompleteListParams)===null||r===void 0?void 0:r.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=o,!((s=this.autocompleteListParams)===null||s===void 0)&&s.enabled){this.isListOpen||this.openList();const{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){const n=e.key;switch(this.updateLastPosition(),n){case k.ENTER:this.onEnterKeyDown(e);break;case k.TAB:this.onTabKeyDown(e);break;case k.DOWN:case k.UP:this.onUpDownKeyDown(e,n);break;case k.LEFT:case k.RIGHT:case k.PAGE_HOME:case k.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case k.ESCAPE:this.onEscapeKeyDown(e);break;case k.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;const n=(e=this.autocompleteList)===null||e===void 0?void 0:e.getSelectedValue();n&&(this.closeList(),this.dispatchEvent({type:hs.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:n,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,n){var i;e.preventDefault(),this.isListOpen?(i=this.autocompleteList)===null||i===void 0||i.onNavigationKeyDown(e,n):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!==null&&e!==void 0?e:null)}setCaret(e,n){const i=this.gridOptionsService.getDocument();n&&i.activeElement===i.body&&this.eAutocompleteInput.getFocusableElement().focus(),this.eAutocompleteInput.getInputElement().setSelectionRange(e,e)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!==null&&e!==void 0?e:0}validate(e){var n;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((n=this.validationMessage)!==null&&n!==void 0?n:""),this.valid=!this.validationMessage,this.dispatchEvent({type:hs.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new Em({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),n={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.is("enableRtl")?"right":"left",keepWithinBounds:!0},i=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(n),ariaLabel:this.listAriaLabel});this.hidePopup=i.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:hs.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return Ba(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:n,position:i,silent:r,updateListOnlyIfOpen:s,restoreFocus:o}=e;this.eAutocompleteInput.setValue(n,!0),this.setCaret(i??this.lastPosition,o),r||this.updateValue(n),(!s||this.isListOpen)&&this.updateAutocompleteList(n)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}}hs.EVENT_VALUE_CHANGED="eventValueChanged";hs.EVENT_VALUE_CONFIRMED="eventValueConfirmed";hs.EVENT_OPTION_SELECTED="eventOptionSelected";hs.EVENT_VALID_CHANGED="eventValidChanged";YL([R("popupService")],hs.prototype,"popupService",void 0);YL([te("eAutocompleteInput")],hs.prototype,"eAutocompleteInput",void 0);YL([Z],hs.prototype,"postConstruct",null);const ufe=["mouseover","mouseout","mouseenter","mouseleave","mousemove"],cfe=["touchstart","touchend","touchmove","touchcancel"];class QY{constructor(){this.renderingEngine="vanilla",this.isOutsideAngular=e=>qs(ufe,e)}setTimeout(e,n){window.setTimeout(e,n)}setInterval(e,n){return new Nn(i=>{i(window.setInterval(e,n))})}addEventListener(e,n,i,r){const s=qs(cfe,n);e.addEventListener(n,i,{capture:!!r,passive:s})}dispatchEvent(e,n,i=!1){n()}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}}var bm=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let $c=class extends q{getNextCellToFocus(e,n,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,n):this.getNextCellToFocusWithoutCtrlPressed(e,n)}getNextCellToFocusWithCtrlPressed(e,n){const i=e===k.UP,r=e===k.DOWN,s=e===k.LEFT;let o,a;if(i||r)a=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),o=n.column;else{const l=this.columnModel.getAllDisplayedColumns(),u=this.gridOptionsService.is("enableRtl");a=n.rowIndex,o=s!==u?l[0]:St(l)}return{rowIndex:a,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,n){let i=n,r=!1;for(;!r;){switch(e){case k.UP:i=this.getCellAbove(i);break;case k.DOWN:i=this.getCellBelow(i);break;case k.RIGHT:this.gridOptionsService.is("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case k.LEFT:this.gridOptionsService.is("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+e);break}i?r=this.isCellGoodToFocusOn(i):r=!0}return i}isCellGoodToFocusOn(e){const n=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!n.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const n=this.columnModel.getDisplayedColBefore(e.column);return n?{rowIndex:e.rowIndex,column:n,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const n=this.columnModel.getDisplayedColAfter(e.column);return n?{rowIndex:e.rowIndex,column:n,rowPinned:e.rowPinned}:null}getRowBelow(e){const n=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const r=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(r);return s||{rowIndex:n+1,rowPinned:i}}getNextStickyPosition(e,n){if(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)return;const i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex),r=n?-1:1,s=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=i[s+r];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const n=this.getRowBelow(e);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}isLastRowInContainer(e){const n=e.rowPinned,i=e.rowIndex;return n==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:n==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(e){const n=e.rowIndex,i=e.rowPinned;if(i?n===0:n===this.paginationProxy.getPageFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const s=this.rowModel.getRow(e.rowIndex),o=this.getNextStickyPosition(s,!0);return o||{rowIndex:n-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const n=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,n){return n?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const n=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,r=e.rowPinned,s=this.columnModel.getDisplayedColAfter(e.column);if(!s){s=n[0];const o=this.getRowBelow(e);if(Pe(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,r=o?o.rowPinned:null}return{rowIndex:i,column:s,rowPinned:r}}getNextTabbedCellBackwards(e){const n=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,r=e.rowPinned,s=this.columnModel.getDisplayedColBefore(e.column);if(!s){s=St(n);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Pe(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,r=o?o.rowPinned:null}return{rowIndex:i,column:s,rowPinned:r}}};bm([R("columnModel")],$c.prototype,"columnModel",void 0);bm([R("rowModel")],$c.prototype,"rowModel",void 0);bm([R("rowRenderer")],$c.prototype,"rowRenderer",void 0);bm([R("pinnedRowModel")],$c.prototype,"pinnedRowModel",void 0);bm([R("paginationProxy")],$c.prototype,"paginationProxy",void 0);$c=bm([me("cellNavigationService")],$c);var oC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},dfe=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};let Bh=class extends q{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}init(){this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){if(this.consuming)return;const n=this.gridOptionsService.get("alignedGrids");n&&n.forEach(i=>{if(i.api){const r=i.api.__getAlignedGridService();e(r)}})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent(n=>{n.onColumnEvent(e)})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent(n=>{n.onScrollEvent(e)})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){const n=[];return e.columns?e.columns.forEach(i=>{n.push(i)}):e.column&&n.push(e.column),n}getColumnIds(e){const n=[];return e.columns?e.columns.forEach(i=>{n.push(i.getColId())}):e.column&&n.push(e.column.getColId()),n}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case x.EVENT_COLUMN_MOVED:case x.EVENT_COLUMN_VISIBLE:case x.EVENT_COLUMN_PINNED:case x.EVENT_COLUMN_RESIZED:const n=e;this.processColumnEvent(n);break;case x.EVENT_COLUMN_GROUP_OPENED:const i=e;this.processGroupOpenedEvent(i);break;case x.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const n=e.columnGroup;let i=null;if(n){const r=n.getGroupId();i=this.columnModel.getProvidedColumnGroup(r)}n&&!i||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+n.isExpanded()),this.columnModel.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged"))}processColumnEvent(e){var n;const i=e.column;let r=null;if(i&&(r=this.columnModel.getPrimaryColumn(i.getColId())),i&&!r)return;const s=this.getMasterColumns(e);switch(e.type){case x.EVENT_COLUMN_MOVED:{const d=e,f=e.columnApi.getColumnState().map(p=>({colId:p.colId}));this.columnModel.applyColumnState({state:f,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} toIndex = ${d.toIndex}`)}break;case x.EVENT_COLUMN_VISIBLE:{const d=e,f=e.columnApi.getColumnState().map(p=>({colId:p.colId,hide:p.hide}));this.columnModel.applyColumnState({state:f},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} visible = ${d.visible}`)}break;case x.EVENT_COLUMN_PINNED:{const d=e,f=e.columnApi.getColumnState().map(p=>({colId:p.colId,pinned:p.pinned}));this.columnModel.applyColumnState({state:f},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} pinned = ${d.pinned}`)}break;case x.EVENT_COLUMN_RESIZED:const u=e,c={};s.forEach(d=>{this.logger.log(`onColumnEvent-> processing ${e.type} actualWidth = ${d.getActualWidth()}`),c[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),(n=u.flexColumns)===null||n===void 0||n.forEach(d=>{c[d.getId()]&&delete c[d.getId()]}),this.columnModel.setColumnWidths(Object.values(c),!1,u.finished,"alignedGridChanged");break}const a=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),l=this.gridOptionsService.get("alignedGrids");l&&l.forEach(u=>{u.api&&u.api.setAlwaysShowVerticalScroll(a)})}};oC([R("columnModel")],Bh.prototype,"columnModel",void 0);oC([R("ctrlsService")],Bh.prototype,"ctrlsService",void 0);oC([dfe(0,Ar("loggerFactory"))],Bh.prototype,"setBeans",null);oC([Z],Bh.prototype,"init",null);Bh=oC([me("alignedGridsService")],Bh);var aC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},hfe=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};let zh=class extends q{setBeans(e){this.logger=e.create("selectionService"),this.reset()}init(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",e=>this.groupSelectsChildren=e.currentValue),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",e=>this.rowSelection=e.currentValue),this.addManagedListener(this.eventService,x.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(e){var n;if(e.nodes.length===0)return 0;const{newValue:i,clearSelection:r,suppressFinishActions:s,rangeSelect:o,event:a,source:l="api"}=e;if(e.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const u=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=e.nodes.map(h=>h.footer?h.sibling:h);if(o){if(e.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;const h=this.getLastSelectedNode();if(h){const f=c[0];if(h!==f&&this.isMultiselect()){const g=this.selectRange(f,h,e.newValue,l);return this.setLastSelectedNode(f),g}}}let d=0;for(let h=0;h<c.length;h++){const f=c[h];u&&f.group||f.selectThisNode(i,e.event,l)&&d++,this.groupSelectsChildren&&(!((n=f.childrenAfterGroup)===null||n===void 0)&&n.length)&&(d+=this.selectChildren(f,i,u,l))}if(!s){if(i&&(r||!this.isMultiselect())&&(d+=this.clearOtherNodes(c[0],l)),d>0){this.updateGroupsFromChildrenSelections(l);const f={type:x.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(f)}i&&this.setLastSelectedNode(c[c.length-1])}return d}selectRange(e,n,i=!0,r){const s=this.rowModel.getNodesInRangeForSelection(e,n);let o=0;s.forEach(l=>{if(l.group&&this.groupSelectsChildren||i===!1&&e===l)return;l.selectThisNode(i,void 0,r)&&o++}),this.updateGroupsFromChildrenSelections(r);const a={type:x.EVENT_SELECTION_CHANGED,source:r};return this.eventService.dispatchEvent(a),o}selectChildren(e,n,i,r){const s=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return Ie.missing(s)?0:this.setNodesSelected({newValue:n,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:r,nodes:s})}setLastSelectedNode(e){this.lastSelectedNode=e}getLastSelectedNode(){return this.lastSelectedNode}getSelectedNodes(){const e=[];return qt(this.selectedNodes,(n,i)=>{i&&e.push(i)}),e}getSelectedRows(){const e=[];return qt(this.selectedNodes,(n,i)=>{i&&i.data&&e.push(i.data)}),e}getSelectionCount(){return Object.values(this.selectedNodes).length}filterFromSelection(e){const n={};Object.entries(this.selectedNodes).forEach(([i,r])=>{r&&e(r)&&(n[i]=r)}),this.selectedNodes=n}updateGroupsFromChildrenSelections(e,n){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const r=this.rowModel.getRootNode();n||(n=new BL(!0,r),n.setInactive());let s=!1;return n.forEachChangedNodeDepthFirst(o=>{if(o!==r){const a=o.calculateSelectedFromChildren();s=o.selectThisNode(a===null?!1:a,void 0,e)||s}}),s}clearOtherNodes(e,n){const i={};let r=0;return qt(this.selectedNodes,(s,o)=>{if(o&&o.id!==e.id){const a=this.selectedNodes[o.id];r+=a.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsChildren&&o.parent&&(i[o.parent.id]=o.parent)}}),qt(i,(s,o)=>{const a=o.calculateSelectedFromChildren();o.selectThisNode(a===null?!1:a,void 0,n)}),r}onRowSelected(e){const n=e.node;this.groupSelectsChildren&&n.group||(n.isSelected()?this.selectedNodes[n.id]=n:delete this.selectedNodes[n.id])}syncInRowNode(e,n){this.syncInOldRowNode(e,n),this.syncInNewRowNode(e)}syncInOldRowNode(e,n){if(B(n)&&e.id!==n.id&&n){const r=n.id;this.selectedNodes[r]==e&&(this.selectedNodes[n.id]=n)}}syncInNewRowNode(e){B(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)}reset(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const n=this.rowModel.getTopLevelNodes();if(n===null)return;const i=[];function r(s){for(let o=0,a=s.length;o<a;o++){const l=s[o];if(l.isSelected())i.push(l);else{const u=l;u.group&&u.children&&r(u.children)}}}return r(n),i}isEmpty(){let e=0;return qt(this.selectedNodes,(n,i)=>{i&&e++}),e===0}deselectAllRowNodes(e){const n=l=>l.selectThisNode(!1,void 0,r),i=this.rowModel.getType()==="clientSide",{source:r,justFiltered:s,justCurrentPage:o}=e;if(o||s){if(!i){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,o).forEach(n)}else qt(this.selectedNodes,(l,u)=>{u&&n(u)}),this.reset();i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(r);const a={type:x.EVENT_SELECTION_CHANGED,source:r};this.eventService.dispatchEvent(a)}getSelectAllState(e,n){let i=0,r=0;const s=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?i++:o.selectable&&r++)};return this.getNodesToSelect(e,n).forEach(s),i===0&&r===0?!1:i>0&&r>0?null:i>0}getNodesToSelect(e=!1,n=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const i=[];if(n)return this.paginationProxy.forEachNodeOnPage(s=>{if(!s.group){i.push(s);return}if(!s.expanded){const o=a=>{var l;i.push(a),!((l=a.childrenAfterFilter)===null||l===void 0)&&l.length&&a.childrenAfterFilter.forEach(o)};o(s);return}this.groupSelectsChildren||i.push(s)}),i;const r=this.rowModel;return e?(r.forEachNodeAfterFilter(s=>{i.push(s)}),i):(r.forEachNode(s=>{i.push(s)}),i)}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:n,justFiltered:i,justCurrentPage:r}=e,s=a=>a.selectThisNode(!0,void 0,n);this.getNodesToSelect(i,r).forEach(s),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n);const o={type:x.EVENT_SELECTION_CHANGED,source:n};this.eventService.dispatchEvent(o)}getServerSideSelectionState(){return null}setServerSideSelectionState(e){}};aC([R("rowModel")],zh.prototype,"rowModel",void 0);aC([R("paginationProxy")],zh.prototype,"paginationProxy",void 0);aC([hfe(0,Ar("loggerFactory"))],zh.prototype,"setBeans",null);aC([Z],zh.prototype,"init",null);zh=aC([me("selectionService")],zh);var qL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Tv=class{sizeColumnsToFit(e){typeof e>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(e,"api")}setColumnGroupOpened(e,n){this.columnModel.setColumnGroupOpened(e,n,"api")}getColumnGroup(e,n){return this.columnModel.getColumnGroup(e,n)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,n){return this.columnModel.getDisplayNameForColumn(e,n)||""}getDisplayNameForColumnGroup(e,n){return this.columnModel.getDisplayNameForColumnGroup(e,n)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,n){this.columnModel.setColumnVisible(e,n,"api")}setColumnsVisible(e,n){this.columnModel.setColumnsVisible(e,n,"api")}setColumnPinned(e,n){this.columnModel.setColumnPinned(e,n,"api")}setColumnsPinned(e,n){this.columnModel.setColumnsPinned(e,n,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,n){this.columnModel.moveColumn(e,n,"api")}moveColumnByIndex(e,n){this.columnModel.moveColumnByIndex(e,n,"api")}moveColumns(e,n){this.columnModel.moveColumns(e,n,"api")}moveRowGroupColumn(e,n){this.columnModel.moveRowGroupColumn(e,n)}setColumnAggFunc(e,n){this.columnModel.setColumnAggFunc(e,n)}setColumnWidth(e,n,i=!0,r){this.columnModel.setColumnWidths([{key:e,newWidth:n}],!1,i,r)}setColumnWidths(e,n=!0,i){this.columnModel.setColumnWidths(e,!1,n,i)}setPivotMode(e){this.columnModel.setPivotMode(e)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,n){return this.columnModel.getSecondaryPivotColumn(e,n)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.columnModel.removeValueColumn(e,"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.columnModel.addValueColumn(e,"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.columnModel.removeRowGroupColumn(e,"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.columnModel.addRowGroupColumn(e,"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.columnModel.removePivotColumn(e,"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.columnModel.addPivotColumn(e,"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,n){return this.columnModel.autoSizeColumn(e,n,"api")}autoSizeColumns(e,n){this.columnModel.autoSizeColumns({columns:e,skipHeader:n})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns(e,"api")}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid(){setTimeout(Ie.removeAllReferences.bind(window,this,"Column API"),100)}getAllColumns(){return Hs("28.0","getAllColumns","getColumns"),this.getColumns()}getPrimaryColumns(){return Hs("28.0","getPrimaryColumns","getColumns"),this.getColumns()}getSecondaryColumns(){return Hs("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()}setSecondaryColumns(e){Hs("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(e)}getSecondaryPivotColumn(e,n){return Hs("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(e,n)}};qL([R("columnModel")],Tv.prototype,"columnModel",void 0);qL([ur],Tv.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null);Tv=qL([me("columnApi")],Tv);var xm=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Hc=class extends q{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(x.EVENT_CELL_VALUE_CHANGED,e=>this.callColumnCellValueChangedHandler(e),this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValue(e,n,i=!1,r=!1){if(this.initialised||this.init(),!n)return;const s=e.getColDef(),o=s.field,a=e.getColId(),l=n.data;let u;const c=n.groupData&&n.groupData[a]!==void 0,d=!r&&n.aggData&&n.aggData[a]!==void 0,h=this.isSsrm&&r&&!!e.getColDef().aggFunc,f=this.isSsrm&&n.footer&&n.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===n.field);if(i&&s.filterValueGetter?u=this.executeFilterValueGetter(s.filterValueGetter,l,e,n):this.isTreeData&&d?u=n.aggData[a]:this.isTreeData&&s.valueGetter?u=this.executeValueGetter(s.valueGetter,l,e,n):this.isTreeData&&o&&l?u=Vp(l,o,e.isFieldContainsDots()):c?u=n.groupData[a]:d?u=n.aggData[a]:s.valueGetter?u=this.executeValueGetter(s.valueGetter,l,e,n):f?u=Vp(l,n.field,e.isFieldContainsDots()):o&&l&&!h&&(u=Vp(l,o,e.isFieldContainsDots())),this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){const p=u.substring(1);u=this.executeValueGetter(p,l,e,n)}if(u==null){const p=this.getOpenedGroup(n,e);if(p!=null)return p}return u}getOpenedGroup(e,n){if(!this.gridOptionsService.is("showOpenedGroup")||!n.getColDef().showRowGroup)return;const r=n.getColDef().showRowGroup;let s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(r===!0||r===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,n,i,r){const s=this.columnModel.getPrimaryColumn(n);if(!e||!s)return!1;Pe(e.data)&&(e.data={});const{field:o,valueSetter:a}=s.getColDef();if(Pe(o)&&Pe(a))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(s,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const l={node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};l.newValue=i;let u;if(B(a)?typeof a=="function"?u=a(l):u=this.expressionService.evaluate(a,l):u=this.setValueUsingField(e.data,o,i,s.isFieldContainsDots()),u===void 0&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),l.newValue=this.getValue(s,e);const c={type:x.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:l.column,api:l.api,columnApi:l.columnApi,colDef:l.colDef,context:l.context,data:e.data,node:e,oldValue:l.oldValue,newValue:l.newValue,value:l.newValue,source:r};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(e){const n=e.colDef.onCellValueChanged;typeof n=="function"&&n({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})}setValueUsingField(e,n,i,r){if(!n)return!1;let s=!1;if(!r)s=e[n]==i,s||(e[n]=i);else{const o=n.split(".");let a=e;for(;o.length>0&&a;){const l=o.shift();o.length===0?(s=a[l]==i,s||(a[l]=i)):a=a[l]}}return!s}executeFilterValueGetter(e,n,i,r){const s={data:n,node:r,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,r)};return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,n,i,r){const s=i.getColId(),o=this.valueCache.getValue(r,s);if(o!==void 0)return o;const a={data:n,node:r,column:i,colDef:i.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,r)};let l;return typeof e=="function"?l=e(a):l=this.expressionService.evaluate(e,a),this.valueCache.setValue(r,s,l),l}getValueCallback(e,n){const i=this.columnModel.getPrimaryColumn(n);return i?this.getValue(i,e):null}getKeyForNode(e,n){const i=this.getValue(e,n),r=e.getColDef().keyCreator;let s=i;if(r){const o={value:i,colDef:e.getColDef(),column:e,node:n,data:n.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};s=r(o)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&et(()=>{console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]")),s}};xm([R("expressionService")],Hc.prototype,"expressionService",void 0);xm([R("columnModel")],Hc.prototype,"columnModel",void 0);xm([R("valueCache")],Hc.prototype,"valueCache",void 0);xm([R("dataTypeService")],Hc.prototype,"dataTypeService",void 0);xm([Z],Hc.prototype,"init",null);Hc=xm([me("valueService")],Hc);var JY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},ffe=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};let qE=class extends q{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,n){if(typeof e=="string")return this.evaluateExpression(e,n);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,n){try{return this.createExpressionFunction(e)(n.value,n.context,n.oldValue,n.newValue,n.value,n.node,n.data,n.colDef,n.rowIndex,n.api,n.columnApi,n.getValue,n.column,n.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",n),console.log("Exception = "+i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const n=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",n);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};JY([ffe(0,Ar("loggerFactory"))],qE.prototype,"setBeans",null);qE=JY([me("expressionService")],qE);var pfe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let oP=class extends q{constructor(){super(...arguments),this.templateCache={},this.waitingCallbacks={}}getTemplate(e,n){const i=this.templateCache[e];if(i)return i;let r=this.waitingCallbacks[e];const s=this;if(!r){r=[],this.waitingCallbacks[e]=r;const o=new XMLHttpRequest;o.onload=function(){s.handleHttpResult(this,e)},o.open("GET",e),o.send()}return n&&r.push(n),null}handleHttpResult(e,n){if(e.status!==200||e.response===null){console.warn(`AG Grid: Unable to get template error ${e.status} - ${n}`);return}this.templateCache[n]=e.response||e.responseText;const i=this.waitingCallbacks[n];for(let r=0;r<i.length;r++){const s=i[r];s()}}};oP=pfe([me("templateService")],oP);var ZY=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},gfe=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};let KE=class extends q{setBeans(e){this.logging=e.is("debug")}create(e){return new aP(e,this.isLogging.bind(this))}isLogging(){return this.logging}};ZY([gfe(0,Ar("gridOptionsService"))],KE.prototype,"setBeans",null);KE=ZY([me("loggerFactory")],KE);class aP{constructor(e,n){this.name=e,this.isLoggingFunc=n}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}}var _m=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class pd extends q{setComp(e,n,i){this.view=e,this.eGridHostDiv=n,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:s=>s===er.HeaderCell||s===er.ToolPanel,getIconName:()=>st.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(n),this.createManagedBean(new O_(this.view)),this.addRtlSupport(),this.addManagedListener(this,x.EVENT_KEYBOARD_FOCUS,()=>{this.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,x.EVENT_MOUSE_FOCUS,()=>{this.view.addOrRemoveKeyboardFocusClass(!1)});const r=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>r()),this.ctrlsService.registerGridCtrl(this)}isDetailGrid(){var e;const n=this.focusService.findTabbableParent(this.getGui());return((e=n==null?void 0:n.getAttribute("row-id"))===null||e===void 0?void 0:e.startsWith("detail"))||!1}showDropZones(){return oe.__isRegistered(pe.RowGroupingModule,this.context.getGridId())}showSideBar(){return oe.__isRegistered(pe.SideBarModule,this.context.getGridId())}showStatusBar(){return oe.__isRegistered(pe.StatusBarModule,this.context.getGridId())}showWatermark(){return oe.__isRegistered(pe.EnterpriseCoreModule,this.context.getGridId())}onGridSizeChanged(){const e={type:x.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const n=this.gridOptionsService.getDocument(),i=this.view.getFocusableContainers(),s=i.findIndex(o=>o.contains(n.activeElement))+(e?-1:1);return s<=0||s>=i.length?!1:this.focusService.focusInto(i[s])}focusInnerElement(e){const n=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(e){if(n.length>1)return this.focusService.focusInto(St(n),!0);const r=St(i);if(this.focusService.focusGridView(r,!0))return!0}return this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusGridView(i[0]):this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}}_m([R("focusService")],pd.prototype,"focusService",void 0);_m([R("resizeObserverService")],pd.prototype,"resizeObserverService",void 0);_m([R("columnModel")],pd.prototype,"columnModel",void 0);_m([R("ctrlsService")],pd.prototype,"ctrlsService",void 0);_m([R("mouseEventService")],pd.prototype,"mouseEventService",void 0);_m([R("dragAndDropService")],pd.prototype,"dragAndDropService",void 0);var lC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Rm=class extends Y_{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),addOrRemoveKeyboardFocusClass:i=>this.addOrRemoveCssClass(Xt.AG_KEYBOARD_FOCUS,i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new pd);const n=this.createTemplate();this.setTemplate(n),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i)})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(e,n){const i=this.eRootWrapperBody.classList;i.toggle(mn.AUTO_HEIGHT,n.autoHeight),i.toggle(mn.NORMAL,n.normal),i.toggle(mn.PRINT,n.print),this.addOrRemoveCssClass(mn.AUTO_HEIGHT,n.autoHeight),this.addOrRemoveCssClass(mn.NORMAL,n.normal),this.addOrRemoveCssClass(mn.PRINT,n.print)}createTemplate(){const e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",r=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${e}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${i}
                <ag-pagination></ag-pagination>
                ${r}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(n=>bu(n))}};lC([R("loggerFactory")],Rm.prototype,"loggerFactory",void 0);lC([te("gridBody")],Rm.prototype,"gridBodyComp",void 0);lC([te("sideBar")],Rm.prototype,"sideBarComp",void 0);lC([te("rootWrapperBody")],Rm.prototype,"eRootWrapperBody",void 0);lC([Z],Rm.prototype,"postConstruct",null);var eq=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},FS;let Av=FS=class extends q{progressSort(e,n,i){const r=this.getNextSortDirection(e);this.setSortForColumn(e,r,n,i)}setSortForColumn(e,n,i,r){n!=="asc"&&n!=="desc"&&(n=null);const s=this.gridOptionsService.isColumnsSortingCoupledToGroup();let o=[e];if(s&&e.getColDef().showRowGroup){const l=this.columnModel.getSourceColumnsForGroupColumn(e),u=l==null?void 0:l.filter(c=>c.getColDef().sortable);u&&(o=[e,...u])}o.forEach(l=>l.setSort(n,r)),(i||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort")||this.clearSortBarTheseColumns(o,r),this.updateSortIndex(e),this.dispatchSortChangedEvents(r)}updateSortIndex(e){const n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),r=n&&i||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(l=>l.setSortIndex(null));const o=s.filter(l=>l!==r);(r.getSort()?[...o,r]:o).forEach((l,u)=>l.setSortIndex(u))}onSortChanged(e){this.dispatchSortChangedEvents(e)}isSortActive(){const n=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return n&&n.length>0}dispatchSortChangedEvents(e){const n={type:x.EVENT_SORT_CHANGED,source:e};this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(e,n){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(i=>{e.includes(i)||i.setSort(void 0,n)})}getNextSortDirection(e){let n;if(e.getColDef().sortingOrder?n=e.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?n=this.gridOptionsService.get("sortingOrder"):n=FS.DEFAULT_SORTING_ORDER,!Array.isArray(n)||n.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${n}`),null;const i=n.indexOf(e.getSort()),r=i<0,s=i==n.length-1;let o;return r||s?o=n[0]:o=n[i+1],FS.DEFAULT_SORTING_ORDER.indexOf(o)<0?(console.warn("AG Grid: invalid sort type "+o),null):o}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){const o=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter(a=>{const l=!!a.getAggFunc(),u=!a.isPrimary(),c=o?this.columnModel.getGroupDisplayColumnForGroup(a.getId()):a.getColDef().showRowGroup;return l||u||c})}const n=this.columnModel.getRowGroupColumns().filter(o=>!!o.getSort()),i=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!n.length;i&&(e=[...new Set(e.map(o=>{var a;return(a=this.columnModel.getGroupDisplayColumnForGroup(o.getId()))!==null&&a!==void 0?a:o}))]);const r={};e.forEach((o,a)=>r[o.getId()]=a),e.sort((o,a)=>{const l=o.getSortIndex(),u=a.getSortIndex();if(l!=null&&u!=null)return l-u;if(l==null&&u==null){const c=r[o.getId()],d=r[a.getId()];return c>d?1:-1}else return u==null?-1:1});const s=new Map;return e.forEach((o,a)=>s.set(o,a)),i&&n.forEach(o=>{const a=this.columnModel.getGroupDisplayColumnForGroup(o.getId());s.set(o,s.get(a))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,n],[i,r])=>n-r).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=!!e.getColDef().showRowGroup;return n&&i}getDisplaySortForColumn(e){const n=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(n!=null&&n.length))return e.getSort();const r=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...n]:n,s=r[0].getSort();return r.every(a=>a.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};Av.DEFAULT_SORTING_ORDER=["asc","desc",null];eq([R("columnModel")],Av.prototype,"columnModel",void 0);Av=FS=eq([me("sortController")],Av);var mfe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let lP=class extends q{setMouseOver(e){this.selectedColumns=e;const n={type:x.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(n)}clearMouseOver(){this.selectedColumns=null;const e={type:x.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};lP=mfe([me("columnHoverService")],lP);var KL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Dv=class extends q{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active}start(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&(this.flush(),this.active=!1)}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(){const e=this.executeNextFuncs;this.executeNextFuncs=[];const n=this.executeLaterFuncs;this.executeLaterFuncs=[],!(e.length===0&&n.length===0)&&(window.setTimeout(()=>e.forEach(i=>i()),0),window.setTimeout(()=>n.forEach(i=>i()),300))}};KL([R("ctrlsService")],Dv.prototype,"ctrlsService",void 0);KL([Z],Dv.prototype,"postConstruct",null);Dv=KL([me("columnAnimationService")],Dv);var XL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Ov=class extends q{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCon=e.centerRowContainerCtrl,this.addManagedListener(this.eventService,x.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.checkPageSize()})}notActive(){return!this.gridOptionsService.is("paginationAutoPageSize")||this.centerRowContainerCon==null}checkPageSize(){if(this.notActive())return;const e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){const n=()=>{const i=this.gridOptionsService.getRowHeightAsNumber(),r=Math.floor(e/i);this.gridOptionsService.set("paginationPageSize",r)};this.isBodyRendered?Lo(()=>n(),50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};XL([R("ctrlsService")],Ov.prototype,"ctrlsService",void 0);XL([Z],Ov.prototype,"postConstruct",null);Ov=XL([me("paginationAutoPageSizeService")],Ov);var tq=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let XE=class extends q{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,n,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[n]=i)}getValue(e,n){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[n]}};tq([Z],XE.prototype,"init",null);XE=tq([me("valueCache")],XE);var K_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const yfe="paste";let mg=class extends q{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,x.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){e.source!==yfe&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,n){if(this.gridOptionsService.is("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const r=this.gridOptionsService.is("aggregateOnlyChangedColumns"),s=new BL(r,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[n]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(o=>{i.push(o)})}this.rowRenderer.refreshCells({rowNodes:i})}};K_([R("rowModel")],mg.prototype,"rowModel",void 0);K_([R("rowRenderer")],mg.prototype,"rowRenderer",void 0);K_([Z],mg.prototype,"init",null);mg=K_([me("changeDetectionService")],mg);var nq=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let QE=class extends q{adaptFunction(e,n){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(n):null}adaptCellRendererFunction(e){class n{refresh(r){return!1}getGui(){return this.eGui}init(r){const s=e(r),o=typeof s;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Qn("<span>"+s+"</span>");return}if(s==null){this.eGui=Qn("<span></span>");return}this.eGui=s}}return n}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}};nq([R("componentMetadataProvider")],QE.prototype,"componentMetadataProvider",void 0);QE=nq([me("agComponentUtils")],QE);var QL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Pv=class extends q{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}}retrieve(e){return this.componentMetaData[e]}};QL([R("agComponentUtils")],Pv.prototype,"agComponentUtils",void 0);QL([Z],Pv.prototype,"postConstruct",null);Pv=QL([me("componentMetadataProvider")],Pv);var JL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const vfe=25,T4=10,rD=8,Cfe=4,sD=4,oD=6,wfe={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:Cfe*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:rD*7,headerCellMinWidth:48,listItemHeight:rD*4,rowHeight:rD*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:sD*8,headerCellMinWidth:24,listItemHeight:sD*6,rowHeight:sD*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:oD*8,headerCellMinWidth:36,listItemHeight:oD*4,rowHeight:oD*7,chartMenuPanelWidth:240}},A4={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]};let Fv=class extends q{constructor(){super(...arguments),this.calculatedSizes={}}postConstruct(){var e;const n=(e=this.getTheme().el)!==null&&e!==void 0?e:this.eGridDiv;this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(n||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const e={type:x.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)}getSassVariable(e){const{themeFamily:n,el:i}=this.getTheme();if(!n||n.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[n]||(this.calculatedSizes[n]={});const r=this.calculatedSizes[n][e];return r??(this.calculatedSizes[n][e]=this.calculateValueForSassProperty(e,n,i),this.calculatedSizes[n][e])}calculateValueForSassProperty(e,n,i){const r="ag-theme-"+(n.match("material")?"material":n.match("balham")?"balham":n.match("alpine")?"alpine":"custom"),s=wfe[r][e],o=this.gridOptionsService.getDocument();if(i||(i=this.eGridDiv),!A4[e])return s;const a=A4[e],l=o.createElement("div"),u=Array.from(i.classList);l.classList.add(n,...u),l.style.position="absolute";const c=a.reduce((h,f)=>{const p=o.createElement("div");return p.style.position="static",p.classList.add(f),h.appendChild(p),p},l);let d=0;if(o.body){o.body.appendChild(l);const h=e.toLowerCase().indexOf("height")!==-1?"height":"width";d=parseInt(window.getComputedStyle(c)[h],10),o.body.removeChild(l)}return d||s}isThemeDark(){const{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){const e=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let n=this.eGridDiv,i=null,r=[];for(;n;)if(i=e.exec(n.className),!i)n=n.parentElement||void 0;else{const o=n.className.match(e);o&&(r=o);break}if(!i)return{allThemes:r};const s=i[0];return{theme:s,el:n,themeFamily:s.replace(/-dark$/,""),allThemes:r}}getFromTheme(e,n){var i;return(i=this.getSassVariable(n))!==null&&i!==void 0?i:e}getDefaultRowHeight(){return this.getFromTheme(vfe,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}setRowHeightVariable(e){const n=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),i=`${e}px`;n!=i&&this.eGridDiv.style.setProperty("--ag-line-height",i)}getMinColWidth(){const e=this.getFromTheme(null,"headerCellMinWidth");return B(e)?Math.max(e,T4):T4}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};JL([R("eGridDiv")],Fv.prototype,"eGridDiv",void 0);JL([Z],Fv.prototype,"postConstruct",null);Fv=JL([me("environment")],Fv);var X_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Sfe=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};let yg=class extends q{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=Nj(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(n!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=n,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,n=e*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${n} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(n)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const n=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==n&&(this.divStretchOffset=n,this.eventService.dispatchEvent({type:x.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return n.bottom-n.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const n=this.modelHeight-this.getUiBodyHeight(),i=e/n;return this.maxScrollY*i}};X_([R("ctrlsService")],yg.prototype,"ctrlsService",void 0);X_([Sfe(0,Ar("loggerFactory"))],yg.prototype,"agWire",null);X_([Z],yg.prototype,"postConstruct",null);yg=X_([me("rowContainerHeightService")],yg);var iq=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let JE=class extends q{init(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")}updateSelectableAfterGrouping(e){if(this.isRowSelectableFunc){const n=i=>i.childrenAfterGroup;this.recurseDown(e.childrenAfterGroup,n)}}recurseDown(e,n){e&&e.forEach(i=>{if(!i.group)return;i.hasChildren()&&this.recurseDown(n(i),n);let r;if(this.groupSelectsChildren){const s=(n(i)||[]).find(o=>o.selectable===!0);r=B(s)}else r=this.isRowSelectableFunc?this.isRowSelectableFunc(i):!1;i.setRowSelectable(r)})}};iq([Z],JE.prototype,"init",null);JE=iq([me("selectableService")],JE);var fo=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Ms extends Le{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const e=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:n,btPrevious:i,btNext:r,btLast:s}=this;this.activateTabIndex([n,i,r,s]),n.insertAdjacentElement("afterbegin",pn(e?"last":"first",this.gridOptionsService)),i.insertAdjacentElement("afterbegin",pn(e?"next":"previous",this.gridOptionsService)),r.insertAdjacentElement("afterbegin",pn(e?"previous":"next",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",pn(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()}onPaginationChanged(){const n=this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(n),n&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:n,fn:i}=e;this.addManagedListener(n,"click",i),this.addManagedListener(n,"keydown",r=>{(r.key===k.ENTER||r.key===k.SPACE)&&(r.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationProxy.getTotalPages()>0,n=this.paginationProxy.getCurrentPage(),i=e?n+1:0;this.lbCurrent.innerHTML=this.formatNumber(i)}formatNumber(e){const n=this.gridOptionsService.getCallback("paginationNumberFormatter");if(n)return n({value:e});const i=this.localeService.getLocaleTextFunc(),r=i("thousandSeparator",","),s=i("decimalSeparator",".");return QN(e,r,s)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),n=e("page","Page"),i=e("to","to"),r=e("of","of"),s=e("firstPage","First Page"),o=e("previousPage","Previous Page"),a=e("nextPage","Next Page"),l=e("lastPage","Last Page"),u=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${u}">
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${u}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${u}-to">${i}</span>
                    <span id="ag-${u}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${u}-of">${r}</span>
                    <span id="ag-${u}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${u}-start-page">${n}</span>
                        <span id="ag-${u}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${u}-of-page">${r}</span>
                        <span id="ag-${u}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${l}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const e=this.paginationProxy.getCurrentPage(),n=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const r=this.isZeroPagesToDisplay(),s=n&&e===i-1;this.nextButtonDisabled=s||r,this.lastButtonDisabled=!n||r||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,n){BN(e,n),e.classList.toggle("ag-disabled",n)}updateRowLabels(){const e=this.paginationProxy.getCurrentPage(),n=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let s,o;if(this.isZeroPagesToDisplay()?s=o=0:(s=n*e+1,o=s+n-1,i&&o>r&&(o=r)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(s),this.rowNodeBlockLoader.isLoading()){const a=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=a("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(o)}isZeroPagesToDisplay(){const e=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages();return e&&n===0}setTotalLabels(){const e=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages(),i=e?this.paginationProxy.getMasterRowCount():null;if(i===1){const r=this.paginationProxy.getRow(0);if(r&&r.group&&!(r.groupData||r.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.innerHTML=this.formatNumber(n),this.lbRecordCount.innerHTML=this.formatNumber(i);else{const r=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=r,this.lbRecordCount.innerHTML=r}}setTotalLabelsToZero(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)}}fo([R("paginationProxy")],Ms.prototype,"paginationProxy",void 0);fo([R("rowNodeBlockLoader")],Ms.prototype,"rowNodeBlockLoader",void 0);fo([te("btFirst")],Ms.prototype,"btFirst",void 0);fo([te("btPrevious")],Ms.prototype,"btPrevious",void 0);fo([te("btNext")],Ms.prototype,"btNext",void 0);fo([te("btLast")],Ms.prototype,"btLast",void 0);fo([te("lbRecordCount")],Ms.prototype,"lbRecordCount",void 0);fo([te("lbFirstRowOnPage")],Ms.prototype,"lbFirstRowOnPage",void 0);fo([te("lbLastRowOnPage")],Ms.prototype,"lbLastRowOnPage",void 0);fo([te("lbCurrent")],Ms.prototype,"lbCurrent",void 0);fo([te("lbTotal")],Ms.prototype,"lbTotal",void 0);fo([Z],Ms.prototype,"postConstruct",null);var Tm=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Ap;(function(t){t[t.Loading=0]="Loading",t[t.NoRows=1]="NoRows"})(Ap||(Ap={}));class pl extends Le{constructor(){super(pl.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1,this.manuallyDisplayed=!1}updateLayoutClasses(e,n){const i=this.eOverlayWrapper.classList;i.toggle(mn.AUTO_HEIGHT,n.autoHeight),i.toggle(mn.NORMAL,n.normal),i.toggle(mn.PRINT,n.print)}postConstruct(){this.createManagedBean(new O_(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,x.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const n=this.eOverlayWrapper.classList;n.toggle("ag-overlay-loading-wrapper",e===Ap.Loading),n.toggle("ag-overlay-no-rows-wrapper",e===Ap.NoRows)}showLoadingOverlay(){if(this.gridOptionsService.is("suppressLoadingOverlay"))return;const e={},i=this.userComponentFactory.getLoadingOverlayCompDetails(e).newAgStackInstance();this.showOverlay(i,Ap.Loading)}showNoRowsOverlay(){if(this.gridOptionsService.is("suppressNoRowsOverlay"))return;const e={},i=this.userComponentFactory.getNoRowsOverlayCompDetails(e).newAgStackInstance();this.showOverlay(i,Ap.NoRows)}showOverlay(e,n){this.inProgress||(this.setWrapperTypeClass(n),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(i=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),Ti(this.eOverlayWrapper))}hideOverlay(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}showOrHideOverlay(){const e=this.paginationProxy.isEmpty(),n=this.gridOptionsService.is("suppressNoRowsOverlay");e&&!n?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}}pl.TEMPLATE=`
        <div class="ag-overlay" aria-hidden="true">
            <div class="ag-overlay-panel">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>
            </div>
        </div>`;Tm([R("userComponentFactory")],pl.prototype,"userComponentFactory",void 0);Tm([R("paginationProxy")],pl.prototype,"paginationProxy",void 0);Tm([R("gridApi")],pl.prototype,"gridApi",void 0);Tm([R("columnModel")],pl.prototype,"columnModel",void 0);Tm([te("eOverlayWrapper")],pl.prototype,"eOverlayWrapper",void 0);Tm([Z],pl.prototype,"postConstruct",null);var Q_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let vg=class extends q{getFirstRow(){let e=0,n;return this.pinnedRowModel.getPinnedTopRowCount()?n="top":this.rowModel.getRowCount()?(n=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:e,rowPinned:n}}getLastRow(){let e,n=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),r=this.pinnedRowModel.getPinnedTopRowCount();return i?(n="bottom",e=i-1):this.rowModel.getRowCount()?(n=null,e=this.paginationProxy.getPageLastRow()):r&&(n="top",e=r-1),e===void 0?null:{rowIndex:e,rowPinned:n}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,n){return!e&&!n?!0:e&&!n||!e&&n?!1:e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned}before(e,n){switch(e.rowPinned){case"top":if(n.rowPinned!=="top")return!0;break;case"bottom":if(n.rowPinned!=="bottom")return!1;break;default:if(B(n.rowPinned))return n.rowPinned!=="top";break}return e.rowIndex<n.rowIndex}rowMax(e){let n;return e.forEach(i=>{(n===void 0||this.before(n,i))&&(n=i)}),n}rowMin(e){let n;return e.forEach(i=>{(n===void 0||this.before(i,n))&&(n=i)}),n}};Q_([R("rowModel")],vg.prototype,"rowModel",void 0);Q_([R("pinnedRowModel")],vg.prototype,"pinnedRowModel",void 0);Q_([R("paginationProxy")],vg.prototype,"paginationProxy",void 0);vg=Q_([me("rowPositionUtils")],vg);var Efe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let uP=class extends q{createId(e){const{rowIndex:n,rowPinned:i,column:r}=e;return this.createIdFromValues({rowIndex:n,column:r,rowPinned:i})}createIdFromValues(e){const{rowIndex:n,rowPinned:i,column:r}=e;return`${n}.${i??"null"}.${r.getId()}`}equals(e,n){const i=e.column===n.column,r=e.rowPinned===n.rowPinned,s=e.rowIndex===n.rowIndex;return i&&r&&s}};uP=Efe([me("cellPositionUtils")],uP);class Ky{constructor(e){this.cellValueChanges=e}}class aD extends Ky{constructor(e,n,i,r){super(e),this.initialRange=n,this.finalRange=i,this.ranges=r}}class Mv{constructor(e){this.actionStack=[],this.maxStackSize=e||Mv.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}}Mv.DEFAULT_STACK_SIZE=10;var gl=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let io=class extends q{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const n={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,n),r=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,n);if(!(i||r||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:a,column:l,oldValue:u,value:c}=e,d={rowPinned:o,rowIndex:a,columnId:l.getColId(),newValue:c,oldValue:u};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gridOptionsService.is("undoRedoCellEditing"))return;const e=this.gridOptionsService.getNum("undoRedoCellEditingLimit");e<=0||(this.undoStack=new Mv(e),this.redoStack=new Mv(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,x.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,x.EVENT_MODEL_UPDATED,n=>{n.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const n={type:x.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(n);const i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),r={type:x.EVENT_UNDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(r)}redo(e){const n={type:x.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(n);const i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),r={type:x.EVENT_REDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(r)}undoRedo(e,n,i,r,s){if(!e)return!1;const o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,a=>a[r],s),o instanceof aD?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),n.push(o),!0)}processAction(e,n,i){e.cellValueChanges.forEach(r=>{const{rowIndex:s,rowPinned:o,columnId:a}=r,l={rowIndex:s,rowPinned:o},u=this.getRowNode(l);u.displayed&&u.setDataValue(a,n(r),i)})}processRange(e){let n;this.rangeService.removeAllCellRanges(!0),e.forEach((i,r)=>{if(!i)return;const s=i.startRow,o=i.endRow;r===e.length-1&&(n={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(n));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};this.rangeService.addCellRange(a)})}processCell(e){const n=e[0],{rowIndex:i,rowPinned:r}=n,s={rowIndex:i,rowPinned:r},o=this.getRowNode(s),a={rowPinned:n.rowPinned,rowIndex:o.rowIndex,columnId:n.columnId};this.setLastFocusedCell(a,!!this.rangeService)}setLastFocusedCell(e,n){const{rowIndex:i,columnId:r,rowPinned:s}=e,o=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getGridColumn(r);if(!a)return;o.ensureIndexVisible(i),o.ensureColumnVisible(a);const l={rowIndex:i,column:a,rowPinned:s};this.focusService.setFocusedCell(Object.assign(Object.assign({},l),{forceBrowserFocus:!0})),n&&this.rangeService.setRangeToCell(l)}addRowEditingListeners(){this.addManagedListener(this.eventService,x.EVENT_ROW_EDITING_STARTED,e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,x.EVENT_ROW_EDITING_STOPPED,()=>{const e=new Ky(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,x.EVENT_CELL_EDITING_STARTED,e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,x.EVENT_CELL_EDITING_STOPPED,e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new Ky(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,x.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,x.EVENT_PASTE_END,()=>{const e=new Ky(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,x.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,x.EVENT_FILL_END,e=>{const n=new aD(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(n),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let e;this.rangeService&&this.gridOptionsService.isEnableRangeSelection()?e=new aD(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Ky(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}};gl([R("focusService")],io.prototype,"focusService",void 0);gl([R("ctrlsService")],io.prototype,"ctrlsService",void 0);gl([R("rowModel")],io.prototype,"rowModel",void 0);gl([R("pinnedRowModel")],io.prototype,"pinnedRowModel",void 0);gl([R("cellPositionUtils")],io.prototype,"cellPositionUtils",void 0);gl([R("rowPositionUtils")],io.prototype,"rowPositionUtils",void 0);gl([R("columnModel")],io.prototype,"columnModel",void 0);gl([lt("rangeService")],io.prototype,"rangeService",void 0);gl([Z],io.prototype,"init",null);io=gl([me("undoRedoService")],io);var ZL=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Nv=class extends q{findHeader(e,n){let i,r,s;if(e.column instanceof xt?(r=`getDisplayedGroup${n}`,i=this.columnModel[r](e.column)):(s=`getDisplayedCol${n}`,i=this.columnModel[s](e.column)),!i)return;let{headerRowIndex:o}=e;if(this.getHeaderRowType(o)===bn.COLUMN_GROUP){const l=i;if(l.isPadding()&&this.isAnyChildSpanningHeaderHeight(l)){const{nextFocusColumn:u,nextRow:c}=this.getColumnVisibleChild(l,o,n);u&&(i=u,o=c)}}return{column:i,headerRowIndex:o}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(n=>n.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,n){const i=this.getHeaderRowType(n),r=i===bn.FLOATING_FILTER,s=i===bn.COLUMN;let o=r?e:e.getParent(),a=n-1;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),a--;a<0&&(o=e,a=n)}return{nextFocusColumn:o,nextRow:a}}getColumnVisibleChild(e,n,i="After"){const r=this.getHeaderRowType(n);let s=e,o=n+1;if(r===bn.COLUMN_GROUP){const a=e.getLeafColumns(),l=i==="After"?a[0]:St(a);if(this.isAnyChildSpanningHeaderHeight(l.getParent())){s=l;let u=l.getParent();for(;u&&u!==e;)u=u.getParent(),o++}else s=e.getDisplayedChildren()[0]}return{nextFocusColumn:s,nextRow:o}}getHeaderRowType(e){const n=this.ctrlsService.getHeaderRowContainerCtrl();if(n)return n.getRowType(e)}findColAtEdgeForHeaderRow(e,n){const i=this.columnModel.getAllDisplayedColumns(),r=i[n==="start"?0:i.length-1];if(!r)return;const o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getRowType(e);if(o==bn.COLUMN_GROUP){const a=this.columnModel.getColumnGroupAtLevel(r,e);return{headerRowIndex:e,column:a}}return{headerRowIndex:o==null?-1:e,column:r}}};ZL([R("columnModel")],Nv.prototype,"columnModel",void 0);ZL([R("ctrlsService")],Nv.prototype,"ctrlsService",void 0);Nv=ZL([me("headerPositionUtils")],Nv);var bfe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let cP=class{buildColumnDefs(e,n,i){const r=[],s={};return e.forEach(o=>{const a=this.createDefFromColumn(o,n,i);let l=!0,u=a,c=o.getOriginalParent(),d=null;for(;c;){let h=null;if(c.isPadding()){c=c.getOriginalParent();continue}const f=s[c.getGroupId()];if(f){f.children.push(u),l=!1;break}if(h=this.createDefFromGroup(c),h&&(h.children=[u],s[h.groupId]=h,u=h,c=c.getOriginalParent()),c!=null&&d===c){l=!1;break}d=c}l&&r.push(u)}),r}createDefFromGroup(e){const n=kE(e.getColGroupDef(),["children"]);return n&&(n.groupId=e.getGroupId()),n}createDefFromColumn(e,n,i){const r=kE(e.getColDef());return r.colId=e.getColId(),r.width=e.getActualWidth(),r.rowGroup=e.isRowGroupActive(),r.rowGroupIndex=e.isRowGroupActive()?n.indexOf(e):null,r.pivot=e.isPivotActive(),r.pivotIndex=e.isPivotActive()?i.indexOf(e):null,r.aggFunc=e.isValueActive()?e.getAggFunc():null,r.hide=e.isVisible()?void 0:!0,r.pinned=e.isPinned()?e.getPinned():null,r.sort=e.getSort()?e.getSort():null,r.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,r}};cP=bfe([me("columnDefFactory")],cP);var eI=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Lv=class{getInitialRowClasses(e){const n=[];return B(e.extraCssClass)&&n.push(e.extraCssClass),n.push("ag-row"),n.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&n.push("ag-opacity-zero"),n.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&n.push("ag-row-pinned"),e.rowNode.isSelected()&&n.push("ag-row-selected"),e.rowNode.footer&&n.push("ag-row-footer"),n.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&n.push("ag-row-loading"),e.fullWidthRow&&n.push("ag-full-width-row"),e.expandable&&(n.push("ag-row-group"),n.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&n.push("ag-row-dragging"),j2(n,this.processClassesFromGridOptions(e.rowNode)),j2(n,this.preProcessRowClassRules(e.rowNode)),n.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&n.push("ag-row-first"),e.lastRowOnPage&&n.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&n.push("ag-cell-last-left-pinned"),e.pinned==="right"&&n.push("ag-cell-first-right-pinned")),n}processClassesFromGridOptions(e){const n=[],i=o=>{typeof o=="string"?n.push(o):Array.isArray(o)&&o.forEach(a=>n.push(a))},r=this.gridOptionsService.get("rowClass");if(r){if(typeof r=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(r)}const s=this.gridOptionsService.getCallback("getRowClass");if(s){const o={data:e.data,node:e,rowIndex:e.rowIndex},a=s(o);i(a)}return n}preProcessRowClassRules(e){const n=[];return this.processRowClassRules(e,i=>{n.push(i)},i=>{}),n}processRowClassRules(e,n,i){const r={data:e.data,node:e,rowIndex:e.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),r,n,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};eI([R("stylingService")],Lv.prototype,"stylingService",void 0);eI([R("gridOptionsService")],Lv.prototype,"gridOptionsService",void 0);Lv=eI([me("rowCssClassCalculator")],Lv);var J_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Cg=class extends q{init(){this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup())}doFullSort(e,n){const i=(s,o)=>({currentPos:o,rowNode:s}),r=e.map(i);return r.sort(this.compareRowNodes.bind(this,n)),r.map(s=>s.rowNode)}compareRowNodes(e,n,i){const r=n.rowNode,s=i.rowNode;for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.sort==="desc",c=this.getValue(r,l.column),d=this.getValue(s,l.column);let h;const f=this.getComparator(l,r);if(f?h=f(c,d,r,s,u):h=Ie.defaultComparator(c,d,this.isAccentedSort),!isNaN(h)&&h!==0)return l.sort==="asc"?h:h*-1}return n.currentPos-i.currentPos}getComparator(e,n){const i=e.column,r=i.getColDef().comparator;if(r!=null)return r;if(!i.getColDef().showRowGroup)return;const s=!n.group&&i.getColDef().field;if(!s)return;const o=this.columnModel.getPrimaryColumn(s);if(o)return o.getColDef().comparator}getValue(e,n){var i,r;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(n,e,!1,!1);if(e.rowGroupColumn===n){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){if(n.getColDef().keyCreator)return e.key;const u=(i=e.allLeafChildren)===null||i===void 0?void 0:i[0];return u?this.valueService.getValue(n,u,!1,!1):void 0}const a=this.columnModel.getGroupDisplayColumnForGroup(n.getId());return a?(r=e.groupData)===null||r===void 0?void 0:r[a.getId()]:void 0}if(!(e.group&&n.getColDef().showRowGroup))return this.valueService.getValue(n,e,!1,!1)}};J_([R("valueService")],Cg.prototype,"valueService",void 0);J_([R("columnModel")],Cg.prototype,"columnModel",void 0);J_([Z],Cg.prototype,"init",null);Cg=J_([me("rowNodeSorter")],Cg);var xfe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},dP;let wg=dP=class extends q{constructor(){super(...arguments),this.ready=!1,this.readyCallbacks=[]}checkReady(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){const e=this.createReadyParams();this.readyCallbacks.forEach(n=>n(e)),this.readyCallbacks.length=0}}whenReady(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)}createReadyParams(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}}registerFakeHScrollComp(e){this.fakeHScrollComp=e,this.checkReady()}registerFakeVScrollComp(e){this.fakeVScrollComp=e,this.checkReady()}registerGridHeaderCtrl(e){this.gridHeaderCtrl=e,this.checkReady()}registerCenterRowContainerCtrl(e){this.centerRowContainerCtrl=e,this.checkReady()}registerLeftRowContainerCtrl(e){this.leftRowContainerCtrl=e,this.checkReady()}registerRightRowContainerCtrl(e){this.rightRowContainerCtrl=e,this.checkReady()}registerTopCenterRowContainerCtrl(e){this.topCenterRowContainerCtrl=e,this.checkReady()}registerTopLeftRowContainerCon(e){this.topLeftRowContainerCtrl=e,this.checkReady()}registerTopRightRowContainerCtrl(e){this.topRightRowContainerCtrl=e,this.checkReady()}registerStickyTopCenterRowContainerCtrl(e){this.stickyTopCenterRowContainerCtrl=e,this.checkReady()}registerStickyTopLeftRowContainerCon(e){this.stickyTopLeftRowContainerCtrl=e,this.checkReady()}registerStickyTopRightRowContainerCtrl(e){this.stickyTopRightRowContainerCtrl=e,this.checkReady()}registerBottomCenterRowContainerCtrl(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()}registerBottomLeftRowContainerCtrl(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()}registerBottomRightRowContainerCtrl(e){this.bottomRightRowContainerCtrl=e,this.checkReady()}registerHeaderContainer(e,n){switch(n){case"left":this.leftHeaderRowContainerCtrl=e;break;case"right":this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e;break}this.checkReady()}registerGridBodyCtrl(e){this.gridBodyCtrl=e,this.checkReady()}registerGridCtrl(e){this.gridCtrl=e,this.checkReady()}getFakeHScrollComp(){return this.fakeHScrollComp}getFakeVScrollComp(){return this.fakeVScrollComp}getGridHeaderCtrl(){return this.gridHeaderCtrl}getGridCtrl(){return this.gridCtrl}getCenterRowContainerCtrl(){return this.centerRowContainerCtrl}getTopCenterRowContainerCtrl(){return this.topCenterRowContainerCtrl}getBottomCenterRowContainerCtrl(){return this.bottomCenterRowContainerCtrl}getStickyTopCenterRowContainerCtrl(){return this.stickyTopCenterRowContainerCtrl}getGridBodyCtrl(){return this.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}}};wg.NAME="ctrlsService";wg=dP=xfe([me(dP.NAME)],wg);var _fe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let hP=class extends q{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){const n=this.registry[e];if(n!=null)return new n}};hP=_fe([me("ctrlsFactory")],hP);var uC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Df extends Le{constructor(e,n){super(e),this.direction=n,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",XN()||ad())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Bp(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=["mouseenter","mousedown","touchstart"],n=["mouseleave","touchend"],i=this.getGui();e.forEach(r=>this.addManagedListener(i,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),n.forEach(r=>this.addManagedListener(i,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(e){const n=this.getViewport();GN(()=>bu(n),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedListener(this.getViewport(),"scroll",e)}}uC([te("eViewport")],Df.prototype,"eViewport",void 0);uC([te("eContainer")],Df.prototype,"eContainer",void 0);uC([R("scrollVisibleService")],Df.prototype,"scrollVisibleService",void 0);uC([R("ctrlsService")],Df.prototype,"ctrlsService",void 0);uC([R("animationFrameService")],Df.prototype,"animationFrameService",void 0);var cC=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class Tu extends Df{constructor(){super(Tu.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new pm(n=>this.eContainer.style.width=`${n}px`))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let n=this.columnModel.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,r=this.gridOptionsService.getScrollbarWidth();i&&(n+=r),Xs(this.eRightSpacer,n),this.eRightSpacer.classList.toggle("ag-scroller-corner",n<=r);let s=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(s+=r),Xs(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=r)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),n=this.invisibleScrollbar,i=this.gridOptionsService.is("suppressHorizontalScroll"),r=e&&this.gridOptionsService.getScrollbarWidth()||0,o=i?0:r===0&&n?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),Ch(this.getGui(),o),Ch(this.eViewport,o),Ch(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return vv(this.getViewport(),this.enableRtl)}setScrollPosition(e){bu(this.getViewport())||this.attemptSettingScrollPosition(e),Cv(this.getViewport(),e,this.enableRtl)}}Tu.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;cC([te("eLeftSpacer")],Tu.prototype,"eLeftSpacer",void 0);cC([te("eRightSpacer")],Tu.prototype,"eRightSpacer",void 0);cC([R("columnModel")],Tu.prototype,"columnModel",void 0);cC([R("pinnedRowModel")],Tu.prototype,"pinnedRowModel",void 0);cC([Z],Tu.prototype,"postConstruct",null);var tI=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Iv=class extends q{postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gridOptionsService.isDomLayout("print"),n=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=e?0:this.columnModel.getDisplayedColumnsRightWidth();n!=this.leftWidth&&(this.leftWidth=n,this.eventService.dispatchEvent({type:x.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:x.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};tI([R("columnModel")],Iv.prototype,"columnModel",void 0);tI([Z],Iv.prototype,"postConstruct",null);Iv=tI([me("pinnedWidthService")],Iv);var Z_=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Sg=class extends q{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced()}};Z_([R("animationFrameService")],Sg.prototype,"animationFrameService",void 0);Z_([R("rowModel")],Sg.prototype,"rowModel",void 0);Z_([Z],Sg.prototype,"postConstruct",null);Sg=Z_([me("rowNodeEventThrottle")],Sg);var gd=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},D4=globalThis&&globalThis.__param||function(t,e){return function(n,i){e(n,i,t)}};function Rfe(t){if(typeof t=="number")return t;if(typeof t=="string")return parseInt(t,10)}function O4(t){return t===!0||t==="true"}let Za=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Jo}get context(){return this.gridOptions.context}agWire(e,n){this.gridOptions.api=e,this.gridOptions.columnApi=n,this.api=e,this.columnApi=n}init(){this.gridOptionLookup=new Set([...Fe.ALL_PROPERTIES,...Fe.EVENT_CALLBACKS]);const e=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandler.bind(this),e),this.getScrollbarWidth()}destroy(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0}is(e){return O4(this.gridOptions[e])}get(e){return this.gridOptions[e]}getNum(e){return Rfe(this.gridOptions[e])}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return B(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>{const r=i;return r.api=this.api,r.columnApi=this.columnApi,r.context=this.context,e(r)})}set(e,n,i=!1,r={}){if(this.gridOptionLookup.has(e)){const s=this.gridOptions[e];if(i||s!==n){this.gridOptions[e]=n;const o=Object.assign({type:e,currentValue:n,previousValue:s},r);this.propertyEventService.dispatchEvent(o)}}}addEventListener(e,n){this.propertyEventService.addEventListener(e,n)}removeEventListener(e,n){this.propertyEventService.removeEventListener(e,n)}globalEventHandler(e,n){if(this.destroyed)return;const i=Fe.getCallbackForEvent(e);typeof this.gridOptions[i]=="function"&&this.gridOptions[i](n)}getGridId(){return this.api.getGridId()}getScrollbarWidth(){if(this.scrollbarWidth==null){const n=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:kj();n!=null&&(this.scrollbarWidth=n,this.eventService.dispatchEvent({type:x.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&Pe(this.gridOptions.rowModelType)}isDomLayout(e){var n;return((n=this.gridOptions.domLayout)!==null&&n!==void 0?n:"normal")===e}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.is("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(e,n=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(n)return{height:i,estimated:!0};const s={node:e,data:e.data},o=this.getCallback("getRowHeight")(s);if(this.isNumeric(o))return o===0&&et(()=>console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),"invalidRowHeight"),{height:Math.max(1,o),estimated:!1}}return e.detail&&this.is("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Pe(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.gridOptions.rowHeight;return e&&this.isNumeric(e)?(this.environment.setRowHeightVariable(e),e):(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,n){const i=e[this.getDomDataKey()];return i?i[n]:void 0}setDomData(e,n,i){const r=this.getDomDataKey();let s=e[r];Pe(s)&&(s={},e[r]=s),s[n]=i}getDocument(){let e=null;return this.gridOptions.getDocument&&B(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&B(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getAsyncTransactionWaitMillis(){return B(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.is("ensureDomOrder")?!1:this.is("animateRows")}isGroupRowsSticky(){return!(this.is("suppressGroupRowsSticky")||this.is("paginateChildRows")||this.is("groupHideOpenParents"))}isTreeData(){return this.is("treeData")&&oe.__assertRegistered(pe.RowGroupingModule,"Tree Data",this.api.getGridId())}isMasterDetail(){return this.is("masterDetail")&&oe.__assertRegistered(pe.MasterDetailModule,"masterDetail",this.api.getGridId())}isEnableRangeSelection(){return this.is("enableRangeSelection")&&oe.__isRegistered(pe.RangeSelectionModule,this.api.getGridId())}isColumnsSortingCoupledToGroup(){const e=this.gridOptions.autoGroupColumnDef;return this.isRowModelType("clientSide")&&!(e!=null&&e.comparator)&&!this.isTreeData()}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(O4(e))return()=>!0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?Y2("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")}isGroupUseEntireRow(e){return e?!1:this.gridOptions.groupDisplayType?Y2("groupRows",this.gridOptions.groupDisplayType):!1}};gd([R("gridOptions")],Za.prototype,"gridOptions",void 0);gd([R("eventService")],Za.prototype,"eventService",void 0);gd([R("environment")],Za.prototype,"environment",void 0);gd([R("eGridDiv")],Za.prototype,"eGridDiv",void 0);gd([D4(0,Ar("gridApi")),D4(1,Ar("columnApi"))],Za.prototype,"agWire",null);gd([Z],Za.prototype,"init",null);gd([ur],Za.prototype,"destroy",null);Za=gd([me("gridOptionsService")],Za);var Tfe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let fP=class extends q{getLocaleTextFunc(){const e=this.gridOptionsService.getCallback("getLocaleText");if(e)return(i,r,s)=>e({key:i,defaultValue:r,variableValues:s});const n=this.gridOptionsService.get("localeText");return(i,r,s)=>{let o=n&&n[i];if(o&&s&&s.length){let a=0;for(;!(a>=s.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",s[a++])}return o??r}}};fP=Tfe([me("localeService")],fP);var Afe=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};class dC extends Df{constructor(){super(dC.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new F_(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),n=this.invisibleScrollbar,i=e&&this.gridOptionsService.getScrollbarWidth()||0,r=i===0&&n?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),Xs(this.getGui(),r),Xs(this.eViewport,r),Xs(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const n=this.ctrlsService.getGridBodyCtrl().getBodyViewportElement();this.eViewport.scrollTop!=n.scrollTop&&(this.eViewport.scrollTop=n.scrollTop)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e){bu(this.getViewport())||this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}}dC.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;Afe([Z],dC.prototype,"postConstruct",null);var Of=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};const P4={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},F4=["january","february","march","april","may","june","july","august","september","october","november","december"];let pu=class extends q{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",()=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs("gridOptionsChanged")})}processDataTypeDefinitions(){var e;const n=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(n).forEach(([r,s])=>{this.dataTypeDefinitions[r]=Object.assign(Object.assign({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})});const i=(e=this.gridOptionsService.get("dataTypeDefinitions"))!==null&&e!==void 0?e:{};this.dataTypeMatchers={},Object.entries(i).forEach(([r,s])=>{const o=this.processDataTypeDefinition(s,i,[r],n);o&&(this.dataTypeDefinitions[r]=o,s.dataTypeMatcher&&(this.dataTypeMatchers[r]=s.dataTypeMatcher))}),this.checkObjectValueHandlers(n),["dateString","text","number","boolean","date"].forEach(r=>{const s=this.dataTypeMatchers[r];s&&delete this.dataTypeMatchers[r],this.dataTypeMatchers[r]=s??n[r].dataTypeMatcher})}mergeDataTypeDefinitions(e,n){const i=Object.assign(Object.assign({},e),n);return e.columnTypes&&n.columnTypes&&n.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(n.columnTypes)]),i}processDataTypeDefinition(e,n,i,r){let s;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){const a=r[o];if(!this.validateDataTypeDefinition(e,a,o))return;s=this.mergeDataTypeDefinitions(a,e)}else{if(i.includes(o)){et(()=>console.warn('AG Grid: Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.'),"dataTypeExtendsCircularRef");return}const a=n[o];if(!this.validateDataTypeDefinition(e,a,o))return;const l=this.processDataTypeDefinition(a,n,[...i,o],r);if(!l)return;s=this.mergeDataTypeDefinitions(l,e)}return Object.assign(Object.assign({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})}validateDataTypeDefinition(e,n,i){return n?n.baseDataType!==e.baseDataType?(et(()=>console.warn('AG Grid: The "baseDataType" property of a data type definition must match that of its parent.'),"dataTypeBaseTypesMatch"),!1):!0:(et(()=>console.warn(`AG Grid: The data type definition ${i} does not exist.`),"dataTypeDefMissing"+i),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return n=>{var i,r;if(!((i=n.node)===null||i===void 0)&&i.group){const s=n.column.getAggFunc();if(s){if(s==="first"||s==="last")return e.valueFormatter(n);if(e.baseDataType==="number"&&s!=="count"){if(typeof n.value=="number")return e.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter(Object.assign(Object.assign({},n),{value:n.value.toNumber()}));if("value"in n.value)return e.valueFormatter(Object.assign(Object.assign({},n),{value:n.value.value}))}}}return}else if(this.groupHideOpenParents&&n.column.isRowGroupActive())return typeof n.value!="string"||!((r=e.dataTypeMatcher)===null||r===void 0)&&r.call(e,n.value)?e.valueFormatter(n):void 0;return e.valueFormatter(n)}}updateColDefAndGetDataTypeDefinitionColumnType(e,n,i){let{cellDataType:r}=n;const{field:s}=n;if(r===void 0&&(r=e.cellDataType),(r==null||r===!0)&&(r=this.canInferCellDataType(e,n)?this.inferCellDataType(s,i):!1),!r){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[r];if(!o){et(()=>console.warn(`AG Grid: Missing data type definition - "${r}"`),"dataTypeMissing"+r);return}return e.cellDataType=r,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,i),o.columnTypes}updateColDefAndGetColumnType(e,n,i){var r,s;const o=this.updateColDefAndGetDataTypeDefinitionColumnType(e,n,i),a=(s=(r=n.type)!==null&&r!==void 0?r:o)!==null&&s!==void 0?s:e.type;return e.type=a,a?this.convertColumnTypes(a):void 0}addColumnListeners(e){if(!this.isWaitingForRowData)return;const n=this.columnStateUpdatesPendingInference[e.getColId()];if(!n)return;const i=r=>{n.add(r.key)};e.addEventListener(Ge.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener(Ge.EVENT_STATE_UPDATED,i))}canInferCellDataType(e,n){var i;if(this.rowModel.getType()!=="clientSide")return!1;const r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(n,r))return!1;const s=n.type===null?e.type:n.type;if(s){const o=(i=this.gridOptionsService.get("columnTypes"))!==null&&i!==void 0?i:{};if(this.convertColumnTypes(s).some(l=>{const u=o[l.trim()];return u&&this.doColDefPropsPreventInference(u,r)}))return!1}return!this.doColDefPropsPreventInference(e,r)}doColDefPropsPreventInference(e,n){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,r])=>this.doesColDefPropPreventInference(e,n,i,r))}doesColDefPropPreventInference(e,n,i,r){if(!n[i])return!1;const s=e[i];return s===null?(n[i]=!1,!1):r===void 0?!!s:s===r}inferCellDataType(e,n){var i;if(!e)return;let r;const s=this.getInitialData();if(s){const a=e.indexOf(".")>=0&&!this.gridOptionsService.is("suppressFieldDotNotation");r=Vp(s,e,a)}else this.initWaitForRowData(n);if(r==null)return;const[o]=(i=Object.entries(this.dataTypeMatchers).find(([a,l])=>l(r)))!==null&&i!==void 0?i:["object"];return o}getInitialData(){const e=this.gridOptionsService.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const n=this.rowModel.getRootNode().allLeafChildren;if(n!=null&&n.length)return n[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const n=this.isColumnTypeOverrideInDataTypeDefinitions;n&&this.columnModel.queueResizeOperations();const i=this.addManagedListener(this.eventService,x.EVENT_ROW_DATA_UPDATE_STARTED,r=>{const{firstRowData:s}=r;if(!s)return;i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,n),this.columnStateUpdatesPendingInference={},n&&this.columnModel.processResizeOperations();const o={type:x.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(o)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,n){this.initialData=e;const i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(o=>o()),this.columnStateUpdateListenerDestroyFuncs=[];const r={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,a])=>{const l=this.columnModel.getGridColumn(o);if(!l)return;const u=l.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(l))return;const c=l.getColDef();if(n&&c.type&&c.type!==u.type){const d=this.getUpdatedColumnState(l,a);d.rowGroup&&d.rowGroupIndex==null&&(r[o]=d),d.pivot&&d.pivotIndex==null&&(s[o]=d),i.push(d)}}),n&&i.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(r,s)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,n){const i=this.columnModel.getColumnStateFromColDef(e);return n.forEach(r=>{delete i[r],r==="rowGroup"?delete i.rowGroupIndex:r==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const n=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=n.valueParser!==i.valueParser,this.hasObjectValueFormatter=n.valueFormatter!==i.valueFormatter}convertColumnTypes(e){let n=[];return e instanceof Array?e.some(r=>typeof r!="string")?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):n=e:typeof e=="string"?n=e.split(","):console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'"),n}getDateStringTypeDefinition(){return this.dataTypeDefinitions.dateString}getDateParserFunction(){return this.getDateStringTypeDefinition().dateParser}getDateFormatterFunction(){return this.getDateStringTypeDefinition().dateFormatter}getDataTypeDefinition(e){const n=e.getColDef();if(n.cellDataType)return this.dataTypeDefinitions[n.cellDataType]}getBaseDataType(e){var n;return(n=this.getDataTypeDefinition(e))===null||n===void 0?void 0:n.baseDataType}checkType(e,n){var i;if(n==null)return!0;const r=(i=this.getDataTypeDefinition(e))===null||i===void 0?void 0:i.dataTypeMatcher;return r?r(n):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&et(()=>console.warn('AG Grid: Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),"dataTypeObjectValueFormatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&et(()=>console.warn('AG Grid: Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'),"dataTypeObjectValueParser"))}setColDefPropertiesForBaseDataType(e,n,i){const r=(l,u,c)=>{let d=l.getColDef().valueFormatter;return d===n.groupSafeValueFormatter&&(d=n.valueFormatter),this.valueFormatterService.formatValue(l,u,c,d)},s=oe.__isRegistered(pe.SetFilterModule,this.context.getGridId()),o=this.localeService.getLocaleTextFunc(),a=l=>{const{filterParams:u}=e;e.filterParams=typeof u=="object"?Object.assign(Object.assign({},u),l):l};switch(e.useValueFormatterForExport=!0,e.useValueParserForImport=!0,n.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",s&&a({comparator:(l,u)=>{const c=l==null?0:parseInt(l),d=u==null?0:parseInt(u);return c===d?0:c>d?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=l=>!!l.colDef.editable&&l.event.key===k.SPACE,a(s?{valueFormatter:l=>B(l.value)?o(String(l.value),l.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(l,u)=>u,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(l,u)=>u===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=l=>r(l.column,l.node,l.value),s&&a({valueFormatter:l=>{const u=r(l.column,l.node,l.value);return B(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(l,u)=>{if(u===1&&l!=null){const c=F4[Number(l)-1];return o(c,P4[c])}return l??o("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=u=>r(u.column,u.node,u.value);const l=this.getDateParserFunction();a(s?{valueFormatter:u=>{const c=r(u.column,u.node,u.value);return B(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:u=>{const c=l(u??void 0);return c?[String(c.getFullYear()),String(c.getMonth()+1),String(c.getDate())]:null},treeListFormatter:(u,c)=>{if(c===1&&u!=null){const d=F4[Number(u)-1];return o(d,P4[d])}return u??o("blanks","(Blanks)")}}:{comparator:(u,c)=>{const d=l(c);return c==null||d<u?-1:d>u?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(l,u)=>{const c=this.columnModel.getPrimaryColumn(i),d=c==null?void 0:c.getColDef();if(!c||!d)return 0;const h=l==null?"":r(c,null,l),f=u==null?"":r(c,null,u);return h===f?0:h>f?1:-1},e.keyCreator=l=>r(l.column,l.node,l.value),s?a({valueFormatter:l=>{const u=r(l.column,l.node,l.value);return B(u)?u:o("blanks","(Blanks)")}}):e.filterValueGetter=l=>r(l.column,l.node,this.valueService.getValue(l.column,l.node));break}}}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),n=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>i.newValue===""?null:Number(i.newValue),valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?n("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:fv(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>i.newValue===""?null:String(i.newValue).toLowerCase()==="true",valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Zo(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>{var r;return i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?n("invalidDate","Invalid Date"):(r=Ks(i.value,!1))!==null&&r!==void 0?r:""},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var r;return(r=Zo(i))!==null&&r!==void 0?r:void 0},dateFormatter:i=>{var r;return(r=Ks(i??null,!1))!==null&&r!==void 0?r:void 0},valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var r;return(r=fv(i.value))!==null&&r!==void 0?r:""}}}}};Of([R("rowModel")],pu.prototype,"rowModel",void 0);Of([R("columnModel")],pu.prototype,"columnModel",void 0);Of([R("columnUtils")],pu.prototype,"columnUtils",void 0);Of([R("valueService")],pu.prototype,"valueService",void 0);Of([R("valueFormatterService")],pu.prototype,"valueFormatterService",void 0);Of([Z],pu.prototype,"init",null);pu=Of([me("dataTypeService")],pu);var rq=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let ZE=class extends q{parseValue(e,n,i,r){const s=e.getColDef(),o={node:n,data:n==null?void 0:n.data,oldValue:r,newValue:i,colDef:s,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},a=s.valueParser;return B(a)?typeof a=="function"?a(o):this.expressionService.evaluate(a,o):i}};rq([R("expressionService")],ZE.prototype,"expressionService",void 0);ZE=rq([me("valueParserService")],ZE);class Dfe{constructor(e,n,i){if(!n){console.error("AG Grid: no gridOptions provided to the grid");return}this.gridOptions=n,new sq().create(e,n,r=>{const s=new Rm(e);r.createBean(s)},void 0,i)}destroy(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()}}let Ofe=1;class sq{create(e,n,i,r,s){var o;const a=!!n.debug,l=(o=n.gridId)!==null&&o!==void 0?o:String(Ofe++),u=this.getRegisteredModules(s,l),c=this.createBeansList(n.rowModelType,u,l),d=this.createProvidedBeans(e,n,s);if(!c)return;const h={providedBeanInstances:d,beanClasses:c,debug:a,gridId:l},f=new aP("AG Grid",()=>n.debug),p=new aP("Context",()=>h.debug),g=new uce(h,p),m=g.getBean("beans");this.registerModuleUserComponents(m,u),this.registerStackComponents(m,u),this.registerControllers(m,u),i(g),m.ctrlsService.whenReady(()=>{this.setColumnsAndData(m),this.dispatchGridReadyEvent(m);const y=oe.__isRegistered(pe.EnterpriseCoreModule,l);f.log(`initialised successfully, enterprise = ${y}`)}),r&&r(g)}registerControllers(e,n){n.forEach(i=>{i.controllers&&i.controllers.forEach(r=>e.ctrlsFactory.register(r))})}registerStackComponents(e,n){const i=this.createAgStackComponentsList(n);e.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(e,n){const i=e?e.modules:null,r=oe.__getRegisteredModules(n),s=[],o={},a=(l,u,c)=>{(h=>{o[h.moduleName]||(o[h.moduleName]=!0,s.push(h),oe.__register(h,l,c))})(u),u.dependantModules&&u.dependantModules.forEach(h=>a(l,h,c))};return i&&i.forEach(l=>a(!0,l,n)),r&&r.forEach(l=>a(!oe.__isPackageBased(),l,void 0)),s}registerModuleUserComponents(e,n){this.extractModuleEntity(n,r=>r.userComponents?r.userComponents:[]).forEach(r=>{e.userComponentRegistry.registerDefaultComponent(r.componentName,r.componentClass)})}createProvidedBeans(e,n,i){let r=i?i.frameworkOverrides:null;Pe(r)&&(r=new QY);const s={gridOptions:n,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,frameworkOverrides:r};return i&&i.providedBeanInstances&&Object.assign(s,i.providedBeanInstances),s}createAgStackComponentsList(e){let n=[{componentName:"AgCheckbox",componentClass:T_},{componentName:"AgRadioButton",componentClass:rY},{componentName:"AgToggleButton",componentClass:efe},{componentName:"AgInputTextField",componentClass:Cf},{componentName:"AgInputTextArea",componentClass:tfe},{componentName:"AgInputNumberField",componentClass:wL},{componentName:"AgInputDateField",componentClass:nfe},{componentName:"AgInputRange",componentClass:ife},{componentName:"AgRichSelect",componentClass:UY},{componentName:"AgSelect",componentClass:cm},{componentName:"AgSlider",componentClass:hd},{componentName:"AgGridBody",componentClass:oa},{componentName:"AgHeaderRoot",componentClass:HL},{componentName:"AgSortIndicator",componentClass:As},{componentName:"AgPagination",componentClass:Ms},{componentName:"AgOverlayWrapper",componentClass:pl},{componentName:"AgGroupComponent",componentClass:tr},{componentName:"AgPanel",componentClass:ea},{componentName:"AgDialog",componentClass:KY},{componentName:"AgRowContainer",componentClass:Rf},{componentName:"AgFakeHorizontalScroll",componentClass:Tu},{componentName:"AgFakeVerticalScroll",componentClass:dC},{componentName:"AgAutocomplete",componentClass:hs}];const i=this.extractModuleEntity(e,r=>r.agStackComponents?r.agStackComponents:[]);return n=n.concat(i),n}createBeansList(e="clientSide",n,i){const r=n.filter(u=>!u.rowModel||u.rowModel===e),s={clientSide:pe.ClientSideRowModelModule,infinite:pe.InfiniteRowModelModule,serverSide:pe.ServerSideRowModelModule,viewport:pe.ViewportRowModelModule};if(!s[e]){console.error("AG Grid: could not find row model for rowModelType = "+e);return}if(!oe.__assertRegistered(s[e],`rowModelType = '${e}'`,i))return;const o=[ke,vg,uP,Nv,Ov,Je,Sv,QE,Pv,rP,Ic,yg,xv,fP,cg,_v,Ev,K2,Jo,Za,Gc,zh,no,An,Hh,Rv,Cs,qE,ug,oP,Bh,Mi,XE,Hc,KE,q2,Vh,Wh,st,Tv,Xt,pg,Fv,$c,jE,YE,bv,Av,lP,Dv,JE,mv,mg,gg,io,X2,cP,Lv,kc,Cg,wg,Iv,Sg,hP,pu,ZE],a=this.extractModuleEntity(r,u=>u.beans?u.beans:[]);o.push(...a);const l=[];return o.forEach(u=>{l.indexOf(u)<0&&l.push(u)}),l}extractModuleEntity(e,n){return[].concat(...e.map(n))}setColumnsAndData(e){const n=e.gridOptionsService.get("columnDefs");e.columnModel.setColumnDefs(n||[],"gridInitializing"),e.rowModel.start()}dispatchGridReadyEvent(e){const n={type:x.EVENT_GRID_READY};e.eventService.dispatchEvent(n)}}class oq{wrap(e,n,i=[],r){const s=this.createWrapper(e,r);return n.forEach(o=>{this.createMethod(s,o,!0)}),i.forEach(o=>{this.createMethod(s,o,!1)}),s}unwrap(e){return e}createMethod(e,n,i){e.addMethod(n,this.createMethodProxy(e,n,i))}createMethodProxy(e,n,i){return function(){return e.hasMethod(n)?e.callMethod(n,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+n+"()"),null)}}}var M4;(function(t){t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd"})(M4||(M4={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.1.0
 * @link https://www.ag-grid.com/
 * @license MIT
 */const Am=typeof global>"u"?{}:global;Am.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Am.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Am.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Am.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Am.Node=typeof Node>"u"?{}:Node;Am.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var aq={exports:{}},Pfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ffe=Pfe,Mfe=Ffe;function lq(){}function uq(){}uq.resetWarningCache=lq;var Nfe=function(){function t(i,r,s,o,a,l){if(l!==Mfe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:uq,resetWarningCache:lq};return n.PropTypes=n,n};aq.exports=Nfe();var Lfe=aq.exports;const el=pf(Lfe);class Ife{}class cq extends Ife{constructor(e,n,i){super(),this.portal=null,this.reactComponent=e,this.portalManager=n,this.componentType=i,this.statelessComponent=this.isStateless(this.reactComponent)}getGui(){return this.eParentElement}destroy(){return this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy(),this.portalManager.destroyPortal(this.portal)}createParentElement(e){const n=this.portalManager.getComponentWrappingElement(),i=document.createElement(n||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle()),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&this.componentInstance.getReactContainerClasses().forEach(n=>this.eParentElement.classList.add(n)))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const n=this.getFrameworkComponentInstance();return!!n&&n[e]!==null||this.fallbackMethodAvailable(e)}callMethod(e,n){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,n&&n[0]?n[0]:{});if(!i){setTimeout(()=>this.callMethod(e,n));return}const r=i[e];if(r)return r.apply(i,n);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,n&&n[0]?n[0]:{})}addMethod(e,n){this[e]=n}}var Dm={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dq=T;function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yr=Object.prototype.hasOwnProperty,kfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N4={},L4={};function hq(t){return yr.call(L4,t)?!0:yr.call(N4,t)?!1:kfe.test(t)?L4[t]=!0:(N4[t]=!0,!1)}function cr(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){si[t]=new cr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];si[e]=new cr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){si[t]=new cr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){si[t]=new cr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){si[t]=new cr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){si[t]=new cr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){si[t]=new cr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){si[t]=new cr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){si[t]=new cr(t,5,!1,t.toLowerCase(),null,!1,!1)});var nI=/[\-:]([a-z])/g;function iI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nI,iI);si[e]=new cr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nI,iI);si[e]=new cr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nI,iI);si[e]=new cr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){si[t]=new cr(t,1,!1,t.toLowerCase(),null,!1,!1)});si.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){si[t]=new cr(t,1,!1,t.toLowerCase(),null,!0,!0)});var MS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gfe=["Webkit","ms","Moz","O"];Object.keys(MS).forEach(function(t){Gfe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),MS[e]=MS[t]})});var $fe=/["'&<>]/;function Ki(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=$fe.exec(t);if(e){var n="",i,r=0;for(i=e.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}r!==i&&(n+=t.substring(r,i)),r=i+1,n+=e}t=r!==i?n+t.substring(r,i):n}return t}var Hfe=/([A-Z])/g,Wfe=/^ms-/,pP=Array.isArray;function Al(t,e){return{insertionMode:t,selectedValue:e}}function Vfe(t,e,n){switch(e){case"select":return Al(1,n.value!=null?n.value:n.defaultValue);case"svg":return Al(2,null);case"math":return Al(3,null);case"foreignObject":return Al(1,null);case"table":return Al(4,null);case"thead":case"tbody":case"tfoot":return Al(5,null);case"colgroup":return Al(7,null);case"tr":return Al(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Al(1,null):t}var I4=new Map;function fq(t,e,n){if(typeof n!="object")throw Error(Be(62));e=!0;for(var i in n)if(yr.call(n,i)){var r=n[i];if(r!=null&&typeof r!="boolean"&&r!==""){if(i.indexOf("--")===0){var s=Ki(i);r=Ki((""+r).trim())}else{s=i;var o=I4.get(s);o!==void 0||(o=Ki(s.replace(Hfe,"-$1").toLowerCase().replace(Wfe,"-ms-")),I4.set(s,o)),s=o,r=typeof r=="number"?r===0||yr.call(MS,i)?""+r:r+"px":Ki((""+r).trim())}e?(e=!1,t.push(' style="',s,":",r)):t.push(";",s,":",r)}}e||t.push('"')}function Jr(t,e,n,i){switch(n){case"style":fq(t,e,i);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=si.hasOwnProperty(n)?si[n]:null,e!==null){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:i&&t.push(" ",n,'=""');break;case 4:i===!0?t.push(" ",n,'=""'):i!==!1&&t.push(" ",n,'="',Ki(i),'"');break;case 5:isNaN(i)||t.push(" ",n,'="',Ki(i),'"');break;case 6:!isNaN(i)&&1<=i&&t.push(" ",n,'="',Ki(i),'"');break;default:e.sanitizeURL&&(i=""+i),t.push(" ",n,'="',Ki(i),'"')}}else if(hq(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',Ki(i),'"')}}}function NS(t,e,n){if(e!=null){if(n!=null)throw Error(Be(60));if(typeof e!="object"||!("__html"in e))throw Error(Be(61));e=e.__html,e!=null&&t.push(""+e)}}function Bfe(t){var e="";return dq.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function lD(t,e,n,i){t.push(Sa(n));var r=n=null,s;for(s in e)if(yr.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":r=o;break;default:Jr(t,i,s,o)}}return t.push(">"),NS(t,r,n),typeof n=="string"?(t.push(Ki(n)),null):n}var zfe=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,k4=new Map;function Sa(t){var e=k4.get(t);if(e===void 0){if(!zfe.test(t))throw Error(Be(65,t));e="<"+t,k4.set(t,e)}return e}function Ufe(t,e,n,i,r){switch(e){case"select":t.push(Sa("select"));var s=null,o=null;for(c in n)if(yr.call(n,c)){var a=n[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Jr(t,i,c,a)}}return t.push(">"),NS(t,o,s),s;case"option":o=r.selectedValue,t.push(Sa("option"));var l=a=null,u=null,c=null;for(s in n)if(yr.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":u=d;break;case"dangerouslySetInnerHTML":c=d;break;case"value":l=d;default:Jr(t,i,s,d)}}if(o!=null)if(n=l!==null?""+l:Bfe(a),pP(o)){for(i=0;i<o.length;i++)if(""+o[i]===n){t.push(' selected=""');break}}else""+o===n&&t.push(' selected=""');else u&&t.push(' selected=""');return t.push(">"),NS(t,c,a),a;case"textarea":t.push(Sa("textarea")),c=o=s=null;for(a in n)if(yr.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(Be(91));default:Jr(t,i,a,l)}if(s===null&&o!==null&&(s=o),t.push(">"),c!=null){if(s!=null)throw Error(Be(92));if(pP(c)&&1<c.length)throw Error(Be(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s!==null&&t.push(Ki(""+s)),null;case"input":t.push(Sa("input")),l=c=a=s=null;for(o in n)if(yr.call(n,o)&&(u=n[o],u!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Be(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:Jr(t,i,o,u)}return c!==null?Jr(t,i,"checked",c):l!==null&&Jr(t,i,"checked",l),s!==null?Jr(t,i,"value",s):a!==null&&Jr(t,i,"value",a),t.push("/>"),null;case"menuitem":t.push(Sa("menuitem"));for(var h in n)if(yr.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Be(400));default:Jr(t,i,h,s)}return t.push(">"),null;case"title":t.push(Sa("title")),s=null;for(d in n)if(yr.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Be(434));default:Jr(t,i,d,o)}return t.push(">"),s;case"listing":case"pre":t.push(Sa(e)),o=s=null;for(l in n)if(yr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Jr(t,i,l,a)}if(t.push(">"),o!=null){if(s!=null)throw Error(Be(60));if(typeof o!="object"||!("__html"in o))throw Error(Be(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Sa(e));for(var f in n)if(yr.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Be(399,e));default:Jr(t,i,f,s)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return lD(t,n,e,i);case"html":return r.insertionMode===0&&t.push("<!DOCTYPE html>"),lD(t,n,e,i);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return lD(t,n,e,i);t.push(Sa(e)),o=s=null;for(u in n)if(yr.call(n,u)&&(a=n[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":fq(t,i,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:hq(u)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",u,'="',Ki(a),'"')}return t.push(">"),NS(t,o,s),s}}function G4(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Be(395));return t.push(n),t.push('"></template>')}function jfe(t,e,n,i){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=i.toString(16),t.push(e),t.push('">');default:throw Error(Be(397))}}function Yfe(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Be(397))}}var qfe=/[<\u2028\u2029]/g;function uD(t){return JSON.stringify(t).replace(qfe,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Kfe(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function $4(t,e,n,i){return n.generateStaticMarkup?(t.push(Ki(e)),!1):(e===""?t=i:(i&&t.push("<!-- -->"),t.push(Ki(e)),t=!0),t)}var M0=Object.assign,Xfe=Symbol.for("react.element"),pq=Symbol.for("react.portal"),gq=Symbol.for("react.fragment"),mq=Symbol.for("react.strict_mode"),yq=Symbol.for("react.profiler"),vq=Symbol.for("react.provider"),Cq=Symbol.for("react.context"),wq=Symbol.for("react.forward_ref"),Sq=Symbol.for("react.suspense"),Eq=Symbol.for("react.suspense_list"),bq=Symbol.for("react.memo"),rI=Symbol.for("react.lazy"),Qfe=Symbol.for("react.scope"),Jfe=Symbol.for("react.debug_trace_mode"),Zfe=Symbol.for("react.legacy_hidden"),epe=Symbol.for("react.default_value"),H4=Symbol.iterator;function gP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gq:return"Fragment";case pq:return"Portal";case yq:return"Profiler";case mq:return"StrictMode";case Sq:return"Suspense";case Eq:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cq:return(t.displayName||"Context")+".Consumer";case vq:return(t._context.displayName||"Context")+".Provider";case wq:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bq:return e=t.displayName||null,e!==null?e:gP(t.type)||"Memo";case rI:e=t._payload,t=t._init;try{return gP(t(e))}catch{}}return null}var xq={};function W4(t,e){if(t=t.contextTypes,!t)return xq;var n={},i;for(i in t)n[i]=e[i];return n}var lh=null;function eR(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Be(401))}else{if(n===null)throw Error(Be(401));eR(t,n)}e.context._currentValue2=e.value}}function _q(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&_q(t)}function Rq(t){var e=t.parent;e!==null&&Rq(e),t.context._currentValue2=t.value}function Tq(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Be(402));t.depth===e.depth?eR(t,e):Tq(t,e)}function Aq(t,e){var n=e.parent;if(n===null)throw Error(Be(402));t.depth===n.depth?eR(t,n):Aq(t,n),e.context._currentValue2=e.value}function eb(t){var e=lh;e!==t&&(e===null?Rq(t):t===null?_q(e):e.depth===t.depth?eR(e,t):e.depth>t.depth?Tq(e,t):Aq(e,t),lh=t)}var V4={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function B4(t,e,n,i){var r=t.state!==void 0?t.state:null;t.updater=V4,t.props=n,t.state=r;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue2:i,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,r),r=o==null?r:M0({},r,o),t.state=r),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&V4.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,r=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,i):a,a!=null&&(r?(r=!1,s=M0({},s,a)):M0(s,a))}t.state=s}else s.queue=null}var tpe={id:1,overflow:""};function mP(t,e,n){var i=t.id;t=t.overflow;var r=32-LS(i)-1;i&=~(1<<r),n+=1;var s=32-LS(e)+r;if(30<s){var o=r-r%5;return s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,{id:1<<32-LS(e)+r|n<<r|i,overflow:s+t}}return{id:1<<s|n<<r|i,overflow:t}}var LS=Math.clz32?Math.clz32:rpe,npe=Math.log,ipe=Math.LN2;function rpe(t){return t>>>=0,t===0?32:31-(npe(t)/ipe|0)|0}function spe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ope=typeof Object.is=="function"?Object.is:spe,gu=null,sI=null,IS=null,Mt=null,Xy=!1,tb=!1,kv=0,oc=null,tR=0;function qd(){if(gu===null)throw Error(Be(321));return gu}function z4(){if(0<tR)throw Error(Be(312));return{memoizedState:null,queue:null,next:null}}function oI(){return Mt===null?IS===null?(Xy=!1,IS=Mt=z4()):(Xy=!0,Mt=IS):Mt.next===null?(Xy=!1,Mt=Mt.next=z4()):(Xy=!0,Mt=Mt.next),Mt}function aI(){sI=gu=null,tb=!1,IS=null,tR=0,Mt=oc=null}function Dq(t,e){return typeof e=="function"?e(t):e}function U4(t,e,n){if(gu=qd(),Mt=oI(),Xy){var i=Mt.queue;if(e=i.dispatch,oc!==null&&(n=oc.get(i),n!==void 0)){oc.delete(i),i=Mt.memoizedState;do i=t(i,n.action),n=n.next;while(n!==null);return Mt.memoizedState=i,[i,e]}return[Mt.memoizedState,e]}return t=t===Dq?typeof e=="function"?e():e:n!==void 0?n(e):e,Mt.memoizedState=t,t=Mt.queue={last:null,dispatch:null},t=t.dispatch=ape.bind(null,gu,t),[Mt.memoizedState,t]}function j4(t,e){if(gu=qd(),Mt=oI(),e=e===void 0?null:e,Mt!==null){var n=Mt.memoizedState;if(n!==null&&e!==null){var i=n[1];e:if(i===null)i=!1;else{for(var r=0;r<i.length&&r<e.length;r++)if(!ope(e[r],i[r])){i=!1;break e}i=!0}if(i)return n[0]}}return t=t(),Mt.memoizedState=[t,e],t}function ape(t,e,n){if(25<=tR)throw Error(Be(301));if(t===gu)if(tb=!0,t={action:n,next:null},oc===null&&(oc=new Map),n=oc.get(e),n===void 0)oc.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function lpe(){throw Error(Be(394))}function Tw(){}var Y4={readContext:function(t){return t._currentValue2},useContext:function(t){return qd(),t._currentValue2},useMemo:j4,useReducer:U4,useRef:function(t){gu=qd(),Mt=oI();var e=Mt.memoizedState;return e===null?(t={current:t},Mt.memoizedState=t):e},useState:function(t){return U4(Dq,t)},useInsertionEffect:Tw,useLayoutEffect:function(){},useCallback:function(t,e){return j4(function(){return t},e)},useImperativeHandle:Tw,useEffect:Tw,useDebugValue:Tw,useDeferredValue:function(t){return qd(),t},useTransition:function(){return qd(),[!1,lpe]},useId:function(){var t=sI.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-LS(t)-1)).toString(32)+e;var n=kS;if(n===null)throw Error(Be(404));return e=kv++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return qd(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Be(407));return n()}},kS=null,cD=dq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function upe(t){return console.error(t),null}function Qy(){}function cpe(t,e,n,i,r,s,o,a,l){var u=[],c=new Set;return e={destination:null,responseState:e,progressiveChunkSize:i===void 0?12800:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:r===void 0?upe:r,onAllReady:s===void 0?Qy:s,onShellReady:o===void 0?Qy:o,onShellError:a===void 0?Qy:a,onFatalError:l===void 0?Qy:l},n=nb(e,0,null,n,!1,!1),n.parentFlushed=!0,t=lI(e,t,null,n,c,xq,null,tpe),u.push(t),e}function lI(t,e,n,i,r,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var u=t.pingedTasks;u.push(l),u.length===1&&Fq(t)},blockedBoundary:n,blockedSegment:i,abortSet:r,legacyContext:s,context:o,treeContext:a};return r.add(l),l}function nb(t,e,n,i,r,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:r,textEmbedded:s}}function Gv(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function ib(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function q4(t,e,n,i,r){for(gu={},sI=e,kv=0,t=n(i,r);tb;)tb=!1,kv=0,tR+=1,Mt=null,t=n(i,r);return aI(),t}function K4(t,e,n,i){var r=n.render(),s=i.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")i=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Be(108,gP(i)||"Unknown",a));i=M0({},o,n)}e.legacyContext=i,ns(t,e,r),e.legacyContext=o}else ns(t,e,r)}function X4(t,e){if(t&&t.defaultProps){e=M0({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yP(t,e,n,i,r){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){r=W4(n,e.legacyContext);var s=n.contextType;s=new n(i,typeof s=="object"&&s!==null?s._currentValue2:r),B4(s,n,i,r),K4(t,e,s,n)}else{s=W4(n,e.legacyContext),r=q4(t,e,n,i,s);var o=kv!==0;if(typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0)B4(r,n,i,s),K4(t,e,r,n);else if(o){i=e.treeContext,e.treeContext=mP(i,1,0);try{ns(t,e,r)}finally{e.treeContext=i}}else ns(t,e,r)}else if(typeof n=="string"){switch(r=e.blockedSegment,s=Ufe(r.chunks,n,i,t.responseState,r.formatContext),r.lastPushedText=!1,o=r.formatContext,r.formatContext=Vfe(o,n,i),vP(t,e,s),r.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:r.chunks.push("</",n,">")}r.lastPushedText=!1}else{switch(n){case Zfe:case Jfe:case mq:case yq:case gq:ns(t,e,i.children);return;case Eq:ns(t,e,i.children);return;case Qfe:throw Error(Be(343));case Sq:e:{n=e.blockedBoundary,r=e.blockedSegment,s=i.fallback,i=i.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=nb(t,r.chunks.length,a,r.formatContext,!1,!1);r.children.push(l),r.lastPushedText=!1;var u=nb(t,0,null,r.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=u;try{if(vP(t,e,i),t.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("<!-- -->"),u.status=1,rb(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=Gv(t,c)}finally{e.blockedBoundary=n,e.blockedSegment=r}e=lI(t,s,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case wq:if(i=q4(t,e,n.render,i,r),kv!==0){n=e.treeContext,e.treeContext=mP(n,1,0);try{ns(t,e,i)}finally{e.treeContext=n}}else ns(t,e,i);return;case bq:n=n.type,i=X4(n,i),yP(t,e,n,i,r);return;case vq:if(r=i.children,n=n._context,i=i.value,s=n._currentValue2,n._currentValue2=i,o=lh,lh=i={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:i},e.context=i,ns(t,e,r),t=lh,t===null)throw Error(Be(403));i=t.parentValue,t.context._currentValue2=i===epe?t.context._defaultValue:i,t=lh=t.parent,e.context=t;return;case Cq:i=i.children,i=i(n._currentValue2),ns(t,e,i);return;case rI:r=n._init,n=r(n._payload),i=X4(n,i),yP(t,e,n,i,void 0);return}throw Error(Be(130,n==null?n:typeof n,""))}}function ns(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case Xfe:yP(t,e,n.type,n.props,n.ref);return;case pq:throw Error(Be(257));case rI:var i=n._init;n=i(n._payload),ns(t,e,n);return}if(pP(n)){Q4(t,e,n);return}if(n===null||typeof n!="object"?i=null:(i=H4&&n[H4]||n["@@iterator"],i=typeof i=="function"?i:null),i&&(i=i.call(n))){if(n=i.next(),!n.done){var r=[];do r.push(n.value),n=i.next();while(!n.done);Q4(t,e,r)}return}throw t=Object.prototype.toString.call(n),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(i=e.blockedSegment,i.lastPushedText=$4(e.blockedSegment.chunks,n,t.responseState,i.lastPushedText)):typeof n=="number"&&(i=e.blockedSegment,i.lastPushedText=$4(e.blockedSegment.chunks,""+n,t.responseState,i.lastPushedText))}function Q4(t,e,n){for(var i=n.length,r=0;r<i;r++){var s=e.treeContext;e.treeContext=mP(s,i,r);try{vP(t,e,n[r])}finally{e.treeContext=s}}}function vP(t,e,n){var i=e.blockedSegment.formatContext,r=e.legacyContext,s=e.context;try{return ns(t,e,n)}catch(l){if(aI(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=nb(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=lI(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=i,e.legacyContext=r,e.context=s,eb(s)}else throw e.blockedSegment.formatContext=i,e.legacyContext=r,e.context=s,eb(s),l}}function dpe(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,Pq(this,e,t)}function Oq(t,e,n){var i=t.blockedBoundary;t.blockedSegment.status=3,i===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(i.pendingTasks--,i.forceClientRender||(i.forceClientRender=!0,t=n===void 0?Error(Be(432)):n,i.errorDigest=e.onError(t),i.parentFlushed&&e.clientRenderedBoundaries.push(i)),i.fallbackAbortableTasks.forEach(function(r){return Oq(r,e,n)}),i.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(i=e.onAllReady,i()))}function rb(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&rb(t,n)}else t.completedSegments.push(e)}function Pq(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Be(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Qy,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&rb(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(dpe,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(rb(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function Fq(t){if(t.status!==2){var e=lh,n=cD.current;cD.current=Y4;var i=kS;kS=t.responseState;try{var r=t.pingedTasks,s;for(s=0;s<r.length;s++){var o=r[s],a=t,l=o.blockedSegment;if(l.status===0){eb(o.context);try{ns(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),o.abortSet.delete(o),l.status=1,Pq(a,o.blockedBoundary,l)}catch(p){if(aI(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var u=o.ping;p.then(u,u)}else{o.abortSet.delete(o),l.status=4;var c=o.blockedBoundary,d=p,h=Gv(a,d);if(c===null?ib(a,d):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=h,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}r.splice(0,s),t.destination!==null&&uI(t,t.destination)}catch(p){Gv(t,p),ib(t,p)}finally{kS=i,cD.current=n,n===Y4&&eb(e)}}}function Aw(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var i=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=i.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var r=!0;i=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(r=n[o];s<r.index;s++)e.push(i[s]);r=nR(t,e,r)}for(;s<i.length-1;s++)e.push(i[s]);return s<i.length&&(r=e.push(i[s])),r;default:throw Error(Be(390))}}function nR(t,e,n){var i=n.boundary;if(i===null)return Aw(t,e,n);if(i.parentFlushed=!0,i.forceClientRender)return t.responseState.generateStaticMarkup||(i=i.errorDigest,e.push("<!--$!-->"),e.push("<template"),i&&(e.push(' data-dgst="'),i=Ki(i),e.push(i),e.push('"')),e.push("></template>")),Aw(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<i.pendingTasks){i.rootSegmentID=t.nextSegmentId++,0<i.completedSegments.length&&t.partialBoundaries.push(i);var r=t.responseState,s=r.nextSuspenseID++;return r=r.boundaryPrefix+s.toString(16),i=i.id=r,G4(e,t.responseState,i),Aw(t,e,n),e.push("<!--/$-->")}if(i.byteSize>t.progressiveChunkSize)return i.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(i),G4(e,t.responseState,i.id),Aw(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=i.completedSegments,n.length!==1)throw Error(Be(391));return nR(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function J4(t,e,n){return jfe(e,t.responseState,n.formatContext,n.id),nR(t,e,n),Yfe(e,n.formatContext)}function Z4(t,e,n){for(var i=n.completedSegments,r=0;r<i.length;r++)Mq(t,e,n,i[r]);if(i.length=0,t=t.responseState,i=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),i===null)throw Error(Be(395));return n=n.toString(16),e.push(i),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function Mq(t,e,n,i){if(i.status===2)return!0;var r=i.id;if(r===-1){if((i.id=n.rootSegmentID)===-1)throw Error(Be(392));return J4(t,e,i)}return J4(t,e,i),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),r=r.toString(16),e.push(r),e.push('","'),e.push(t.placeholderPrefix),e.push(r),e.push('")<\/script>')}function uI(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){nR(t,e,n),t.completedRootSegment=null;var i=t.responseState.bootstrapChunks;for(n=0;n<i.length-1;n++)e.push(i[n]);n<i.length&&e.push(i[n])}var r=t.clientRenderedBoundaries,s;for(s=0;s<r.length;s++){var o=r[s];i=e;var a=t.responseState,l=o.id,u=o.errorDigest,c=o.errorMessage,d=o.errorComponentStack;if(i.push(a.startInlineScript),a.sentClientRenderFunction?i.push('$RX("'):(a.sentClientRenderFunction=!0,i.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(Be(395));if(i.push(l),i.push('"'),u||c||d){i.push(",");var h=uD(u||"");i.push(h)}if(c||d){i.push(",");var f=uD(c||"");i.push(f)}if(d){i.push(",");var p=uD(d);i.push(p)}if(!i.push(")<\/script>")){t.destination=null,s++,r.splice(0,s);return}}r.splice(0,s);var g=t.completedBoundaries;for(s=0;s<g.length;s++)if(!Z4(t,e,g[s])){t.destination=null,s++,g.splice(0,s);return}g.splice(0,s);var m=t.partialBoundaries;for(s=0;s<m.length;s++){var y=m[s];e:{r=t,o=e;var v=y.completedSegments;for(a=0;a<v.length;a++)if(!Mq(r,o,y,v[a])){a++,v.splice(0,a);var C=!1;break e}v.splice(0,a),C=!0}if(!C){t.destination=null,s++,m.splice(0,s);return}}m.splice(0,s);var w=t.completedBoundaries;for(s=0;s<w.length;s++)if(!Z4(t,e,w[s])){t.destination=null,s++,w.splice(0,s);return}w.splice(0,s)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function hpe(t,e){try{var n=t.abortableTasks;n.forEach(function(i){return Oq(i,t,e)}),n.clear(),t.destination!==null&&uI(t,t.destination)}catch(i){Gv(t,i),ib(t,i)}}function fpe(){}function Nq(t,e,n,i){var r=!1,s=null,o="",a={push:function(u){return u!==null&&(o+=u),!0},destroy:function(u){r=!0,s=u}},l=!1;if(t=cpe(t,Kfe(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,fpe,void 0,function(){l=!0},void 0,void 0),Fq(t),hpe(t,i),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{uI(t,a)}catch(u){Gv(t,u),ib(t,u)}}if(r)throw s;if(!l)throw Error(Be(426));return o}Dm.renderToNodeStream=function(){throw Error(Be(207))};Dm.renderToStaticMarkup=function(t,e){return Nq(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Dm.renderToStaticNodeStream=function(){throw Error(Be(208))};Dm.renderToString=function(t,e){return Nq(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Dm.version="18.2.0";var cI={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lq=T;function je(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var is=null,rs=0;function be(t,e){if(e.length!==0)if(512<e.length)0<rs&&(t.enqueue(new Uint8Array(is.buffer,0,rs)),is=new Uint8Array(512),rs=0),t.enqueue(e);else{var n=is.length-rs;n<e.length&&(n===0?t.enqueue(is):(is.set(e.subarray(0,n),rs),t.enqueue(is),e=e.subarray(n)),is=new Uint8Array(512),rs=0),is.set(e,rs),rs+=e.length}}function Vt(t,e){return be(t,e),!0}function eH(t){is&&0<rs&&(t.enqueue(new Uint8Array(is.buffer,0,rs)),is=null,rs=0)}var Iq=new TextEncoder;function Ke(t){return Iq.encode(t)}function ge(t){return Iq.encode(t)}function kq(t,e){typeof t.error=="function"?t.error(e):t.close()}var vr=Object.prototype.hasOwnProperty,ppe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tH={},nH={};function Gq(t){return vr.call(nH,t)?!0:vr.call(tH,t)?!1:ppe.test(t)?nH[t]=!0:(tH[t]=!0,!1)}function dr(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){oi[t]=new dr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];oi[e]=new dr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){oi[t]=new dr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){oi[t]=new dr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){oi[t]=new dr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){oi[t]=new dr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){oi[t]=new dr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){oi[t]=new dr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){oi[t]=new dr(t,5,!1,t.toLowerCase(),null,!1,!1)});var dI=/[\-:]([a-z])/g;function hI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dI,hI);oi[e]=new dr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dI,hI);oi[e]=new dr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dI,hI);oi[e]=new dr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){oi[t]=new dr(t,1,!1,t.toLowerCase(),null,!1,!1)});oi.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){oi[t]=new dr(t,1,!1,t.toLowerCase(),null,!0,!0)});var GS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gpe=["Webkit","ms","Moz","O"];Object.keys(GS).forEach(function(t){gpe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),GS[e]=GS[t]})});var mpe=/["'&<>]/;function Jn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=mpe.exec(t);if(e){var n="",i,r=0;for(i=e.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}r!==i&&(n+=t.substring(r,i)),r=i+1,n+=e}t=r!==i?n+t.substring(r,i):n}return t}var ype=/([A-Z])/g,vpe=/^ms-/,CP=Array.isArray,Cpe=ge("<script>"),wpe=ge("<\/script>"),Spe=ge('<script src="'),Epe=ge('<script type="module" src="'),iH=ge('" async=""><\/script>'),bpe=/(<\/|<)(s)(cript)/gi;function xpe(t,e,n,i){return""+e+(n==="s"?"\\u0073":"\\u0053")+i}function _pe(t,e,n,i,r){t=t===void 0?"":t,e=e===void 0?Cpe:ge('<script nonce="'+Jn(e)+'">');var s=[];if(n!==void 0&&s.push(e,Ke((""+n).replace(bpe,xpe)),wpe),i!==void 0)for(n=0;n<i.length;n++)s.push(Spe,Ke(Jn(i[n])),iH);if(r!==void 0)for(i=0;i<r.length;i++)s.push(Epe,Ke(Jn(r[i])),iH);return{bootstrapChunks:s,startInlineScript:e,placeholderPrefix:ge(t+"P:"),segmentPrefix:ge(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Ea(t,e){return{insertionMode:t,selectedValue:e}}function Rpe(t){return Ea(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function Tpe(t,e,n){switch(e){case"select":return Ea(1,n.value!=null?n.value:n.defaultValue);case"svg":return Ea(2,null);case"math":return Ea(3,null);case"foreignObject":return Ea(1,null);case"table":return Ea(4,null);case"thead":case"tbody":case"tfoot":return Ea(5,null);case"colgroup":return Ea(7,null);case"tr":return Ea(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Ea(1,null):t}var fI=ge("<!-- -->");function rH(t,e,n,i){return e===""?i:(i&&t.push(fI),t.push(Ke(Jn(e))),!0)}var sH=new Map,Ape=ge(' style="'),oH=ge(":"),Dpe=ge(";");function $q(t,e,n){if(typeof n!="object")throw Error(je(62));e=!0;for(var i in n)if(vr.call(n,i)){var r=n[i];if(r!=null&&typeof r!="boolean"&&r!==""){if(i.indexOf("--")===0){var s=Ke(Jn(i));r=Ke(Jn((""+r).trim()))}else{s=i;var o=sH.get(s);o!==void 0||(o=ge(Jn(s.replace(ype,"-$1").toLowerCase().replace(vpe,"-ms-"))),sH.set(s,o)),s=o,r=typeof r=="number"?r===0||vr.call(GS,i)?Ke(""+r):Ke(r+"px"):Ke(Jn((""+r).trim()))}e?(e=!1,t.push(Ape,s,oH,r)):t.push(Dpe,s,oH,r)}}e||t.push(Kd)}var Hu=ge(" "),dp=ge('="'),Kd=ge('"'),aH=ge('=""');function Zr(t,e,n,i){switch(n){case"style":$q(t,e,i);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=oi.hasOwnProperty(n)?oi[n]:null,e!==null){switch(typeof i){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=Ke(e.attributeName),e.type){case 3:i&&t.push(Hu,n,aH);break;case 4:i===!0?t.push(Hu,n,aH):i!==!1&&t.push(Hu,n,dp,Ke(Jn(i)),Kd);break;case 5:isNaN(i)||t.push(Hu,n,dp,Ke(Jn(i)),Kd);break;case 6:!isNaN(i)&&1<=i&&t.push(Hu,n,dp,Ke(Jn(i)),Kd);break;default:e.sanitizeURL&&(i=""+i),t.push(Hu,n,dp,Ke(Jn(i)),Kd)}}else if(Gq(n)){switch(typeof i){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(Hu,Ke(n),dp,Ke(Jn(i)),Kd)}}}var Wu=ge(">"),lH=ge("/>");function $S(t,e,n){if(e!=null){if(n!=null)throw Error(je(60));if(typeof e!="object"||!("__html"in e))throw Error(je(61));e=e.__html,e!=null&&t.push(Ke(""+e))}}function Ope(t){var e="";return Lq.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var dD=ge(' selected=""');function hD(t,e,n,i){t.push(ba(n));var r=n=null,s;for(s in e)if(vr.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":r=o;break;default:Zr(t,i,s,o)}}return t.push(Wu),$S(t,r,n),typeof n=="string"?(t.push(Ke(Jn(n))),null):n}var fD=ge(`
`),Ppe=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,uH=new Map;function ba(t){var e=uH.get(t);if(e===void 0){if(!Ppe.test(t))throw Error(je(65,t));e=ge("<"+t),uH.set(t,e)}return e}var Fpe=ge("<!DOCTYPE html>");function Mpe(t,e,n,i,r){switch(e){case"select":t.push(ba("select"));var s=null,o=null;for(c in n)if(vr.call(n,c)){var a=n[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Zr(t,i,c,a)}}return t.push(Wu),$S(t,o,s),s;case"option":o=r.selectedValue,t.push(ba("option"));var l=a=null,u=null,c=null;for(s in n)if(vr.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":u=d;break;case"dangerouslySetInnerHTML":c=d;break;case"value":l=d;default:Zr(t,i,s,d)}}if(o!=null)if(n=l!==null?""+l:Ope(a),CP(o)){for(i=0;i<o.length;i++)if(""+o[i]===n){t.push(dD);break}}else""+o===n&&t.push(dD);else u&&t.push(dD);return t.push(Wu),$S(t,c,a),a;case"textarea":t.push(ba("textarea")),c=o=s=null;for(a in n)if(vr.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(je(91));default:Zr(t,i,a,l)}if(s===null&&o!==null&&(s=o),t.push(Wu),c!=null){if(s!=null)throw Error(je(92));if(CP(c)&&1<c.length)throw Error(je(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&t.push(fD),s!==null&&t.push(Ke(Jn(""+s))),null;case"input":t.push(ba("input")),l=c=a=s=null;for(o in n)if(vr.call(n,o)&&(u=n[o],u!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:Zr(t,i,o,u)}return c!==null?Zr(t,i,"checked",c):l!==null&&Zr(t,i,"checked",l),s!==null?Zr(t,i,"value",s):a!==null&&Zr(t,i,"value",a),t.push(lH),null;case"menuitem":t.push(ba("menuitem"));for(var h in n)if(vr.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(je(400));default:Zr(t,i,h,s)}return t.push(Wu),null;case"title":t.push(ba("title")),s=null;for(d in n)if(vr.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(je(434));default:Zr(t,i,d,o)}return t.push(Wu),s;case"listing":case"pre":t.push(ba(e)),o=s=null;for(l in n)if(vr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Zr(t,i,l,a)}if(t.push(Wu),o!=null){if(s!=null)throw Error(je(60));if(typeof o!="object"||!("__html"in o))throw Error(je(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(fD,Ke(n)):t.push(Ke(""+n)))}return typeof s=="string"&&s[0]===`
`&&t.push(fD),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(ba(e));for(var f in n)if(vr.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,e));default:Zr(t,i,f,s)}return t.push(lH),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return hD(t,n,e,i);case"html":return r.insertionMode===0&&t.push(Fpe),hD(t,n,e,i);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return hD(t,n,e,i);t.push(ba(e)),o=s=null;for(u in n)if(vr.call(n,u)&&(a=n[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":$q(t,i,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Gq(u)&&typeof a!="function"&&typeof a!="symbol"&&t.push(Hu,Ke(u),dp,Ke(Jn(a)),Kd)}return t.push(Wu),$S(t,o,s),s}}var Npe=ge("</"),Lpe=ge(">"),Ipe=ge('<template id="'),kpe=ge('"></template>'),Gpe=ge("<!--$-->"),$pe=ge('<!--$?--><template id="'),Hpe=ge('"></template>'),Wpe=ge("<!--$!-->"),Vpe=ge("<!--/$-->"),Bpe=ge("<template"),zpe=ge('"'),Upe=ge(' data-dgst="');ge(' data-msg="');ge(' data-stck="');var jpe=ge("></template>");function cH(t,e,n){if(be(t,$pe),n===null)throw Error(je(395));return be(t,n),Vt(t,Hpe)}var Ype=ge('<div hidden id="'),qpe=ge('">'),Kpe=ge("</div>"),Xpe=ge('<svg aria-hidden="true" style="display:none" id="'),Qpe=ge('">'),Jpe=ge("</svg>"),Zpe=ge('<math aria-hidden="true" style="display:none" id="'),ege=ge('">'),tge=ge("</math>"),nge=ge('<table hidden id="'),ige=ge('">'),rge=ge("</table>"),sge=ge('<table hidden><tbody id="'),oge=ge('">'),age=ge("</tbody></table>"),lge=ge('<table hidden><tr id="'),uge=ge('">'),cge=ge("</tr></table>"),dge=ge('<table hidden><colgroup id="'),hge=ge('">'),fge=ge("</colgroup></table>");function pge(t,e,n,i){switch(n.insertionMode){case 0:case 1:return be(t,Ype),be(t,e.segmentPrefix),be(t,Ke(i.toString(16))),Vt(t,qpe);case 2:return be(t,Xpe),be(t,e.segmentPrefix),be(t,Ke(i.toString(16))),Vt(t,Qpe);case 3:return be(t,Zpe),be(t,e.segmentPrefix),be(t,Ke(i.toString(16))),Vt(t,ege);case 4:return be(t,nge),be(t,e.segmentPrefix),be(t,Ke(i.toString(16))),Vt(t,ige);case 5:return be(t,sge),be(t,e.segmentPrefix),be(t,Ke(i.toString(16))),Vt(t,oge);case 6:return be(t,lge),be(t,e.segmentPrefix),be(t,Ke(i.toString(16))),Vt(t,uge);case 7:return be(t,dge),be(t,e.segmentPrefix),be(t,Ke(i.toString(16))),Vt(t,hge);default:throw Error(je(397))}}function gge(t,e){switch(e.insertionMode){case 0:case 1:return Vt(t,Kpe);case 2:return Vt(t,Jpe);case 3:return Vt(t,tge);case 4:return Vt(t,rge);case 5:return Vt(t,age);case 6:return Vt(t,cge);case 7:return Vt(t,fge);default:throw Error(je(397))}}var mge=ge('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),yge=ge('$RS("'),vge=ge('","'),Cge=ge('")<\/script>'),wge=ge('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Sge=ge('$RC("'),Ege=ge('","'),bge=ge('")<\/script>'),xge=ge('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),_ge=ge('$RX("'),Rge=ge('"'),Tge=ge(")<\/script>"),pD=ge(","),Age=/[<\u2028\u2029]/g;function gD(t){return JSON.stringify(t).replace(Age,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var N0=Object.assign,Dge=Symbol.for("react.element"),Hq=Symbol.for("react.portal"),Wq=Symbol.for("react.fragment"),Vq=Symbol.for("react.strict_mode"),Bq=Symbol.for("react.profiler"),zq=Symbol.for("react.provider"),Uq=Symbol.for("react.context"),jq=Symbol.for("react.forward_ref"),Yq=Symbol.for("react.suspense"),qq=Symbol.for("react.suspense_list"),Kq=Symbol.for("react.memo"),pI=Symbol.for("react.lazy"),Oge=Symbol.for("react.scope"),Pge=Symbol.for("react.debug_trace_mode"),Fge=Symbol.for("react.legacy_hidden"),Mge=Symbol.for("react.default_value"),dH=Symbol.iterator;function wP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wq:return"Fragment";case Hq:return"Portal";case Bq:return"Profiler";case Vq:return"StrictMode";case Yq:return"Suspense";case qq:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uq:return(t.displayName||"Context")+".Consumer";case zq:return(t._context.displayName||"Context")+".Provider";case jq:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kq:return e=t.displayName||null,e!==null?e:wP(t.type)||"Memo";case pI:e=t._payload,t=t._init;try{return wP(t(e))}catch{}}return null}var Xq={};function hH(t,e){if(t=t.contextTypes,!t)return Xq;var n={},i;for(i in t)n[i]=e[i];return n}var uh=null;function iR(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(je(401))}else{if(n===null)throw Error(je(401));iR(t,n)}e.context._currentValue=e.value}}function Qq(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&Qq(t)}function Jq(t){var e=t.parent;e!==null&&Jq(e),t.context._currentValue=t.value}function Zq(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(je(402));t.depth===e.depth?iR(t,e):Zq(t,e)}function eK(t,e){var n=e.parent;if(n===null)throw Error(je(402));t.depth===n.depth?iR(t,n):eK(t,n),e.context._currentValue=e.value}function sb(t){var e=uh;e!==t&&(e===null?Jq(t):t===null?Qq(e):e.depth===t.depth?iR(e,t):e.depth>t.depth?Zq(e,t):eK(e,t),uh=t)}var fH={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function pH(t,e,n,i){var r=t.state!==void 0?t.state:null;t.updater=fH,t.props=n,t.state=r;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue:i,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,r),r=o==null?r:N0({},r,o),t.state=r),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&fH.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,r=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,i):a,a!=null&&(r?(r=!1,s=N0({},s,a)):N0(s,a))}t.state=s}else s.queue=null}var Nge={id:1,overflow:""};function SP(t,e,n){var i=t.id;t=t.overflow;var r=32-HS(i)-1;i&=~(1<<r),n+=1;var s=32-HS(e)+r;if(30<s){var o=r-r%5;return s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,{id:1<<32-HS(e)+r|n<<r|i,overflow:s+t}}return{id:1<<s|n<<r|i,overflow:t}}var HS=Math.clz32?Math.clz32:kge,Lge=Math.log,Ige=Math.LN2;function kge(t){return t>>>=0,t===0?32:31-(Lge(t)/Ige|0)|0}function Gge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $ge=typeof Object.is=="function"?Object.is:Gge,mu=null,gI=null,WS=null,Nt=null,Jy=!1,ob=!1,$v=0,ac=null,rR=0;function Xd(){if(mu===null)throw Error(je(321));return mu}function gH(){if(0<rR)throw Error(je(312));return{memoizedState:null,queue:null,next:null}}function mI(){return Nt===null?WS===null?(Jy=!1,WS=Nt=gH()):(Jy=!0,Nt=WS):Nt.next===null?(Jy=!1,Nt=Nt.next=gH()):(Jy=!0,Nt=Nt.next),Nt}function yI(){gI=mu=null,ob=!1,WS=null,rR=0,Nt=ac=null}function tK(t,e){return typeof e=="function"?e(t):e}function mH(t,e,n){if(mu=Xd(),Nt=mI(),Jy){var i=Nt.queue;if(e=i.dispatch,ac!==null&&(n=ac.get(i),n!==void 0)){ac.delete(i),i=Nt.memoizedState;do i=t(i,n.action),n=n.next;while(n!==null);return Nt.memoizedState=i,[i,e]}return[Nt.memoizedState,e]}return t=t===tK?typeof e=="function"?e():e:n!==void 0?n(e):e,Nt.memoizedState=t,t=Nt.queue={last:null,dispatch:null},t=t.dispatch=Hge.bind(null,mu,t),[Nt.memoizedState,t]}function yH(t,e){if(mu=Xd(),Nt=mI(),e=e===void 0?null:e,Nt!==null){var n=Nt.memoizedState;if(n!==null&&e!==null){var i=n[1];e:if(i===null)i=!1;else{for(var r=0;r<i.length&&r<e.length;r++)if(!$ge(e[r],i[r])){i=!1;break e}i=!0}if(i)return n[0]}}return t=t(),Nt.memoizedState=[t,e],t}function Hge(t,e,n){if(25<=rR)throw Error(je(301));if(t===mu)if(ob=!0,t={action:n,next:null},ac===null&&(ac=new Map),n=ac.get(e),n===void 0)ac.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function Wge(){throw Error(je(394))}function Dw(){}var vH={readContext:function(t){return t._currentValue},useContext:function(t){return Xd(),t._currentValue},useMemo:yH,useReducer:mH,useRef:function(t){mu=Xd(),Nt=mI();var e=Nt.memoizedState;return e===null?(t={current:t},Nt.memoizedState=t):e},useState:function(t){return mH(tK,t)},useInsertionEffect:Dw,useLayoutEffect:function(){},useCallback:function(t,e){return yH(function(){return t},e)},useImperativeHandle:Dw,useEffect:Dw,useDebugValue:Dw,useDeferredValue:function(t){return Xd(),t},useTransition:function(){return Xd(),[!1,Wge]},useId:function(){var t=gI.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-HS(t)-1)).toString(32)+e;var n=VS;if(n===null)throw Error(je(404));return e=$v++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return Xd(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(je(407));return n()}},VS=null,mD=Lq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Vge(t){return console.error(t),null}function Zy(){}function Bge(t,e,n,i,r,s,o,a,l){var u=[],c=new Set;return e={destination:null,responseState:e,progressiveChunkSize:i===void 0?12800:i,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:r===void 0?Vge:r,onAllReady:s===void 0?Zy:s,onShellReady:o===void 0?Zy:o,onShellError:a===void 0?Zy:a,onFatalError:l===void 0?Zy:l},n=ab(e,0,null,n,!1,!1),n.parentFlushed=!0,t=vI(e,t,null,n,c,Xq,null,Nge),u.push(t),e}function vI(t,e,n,i,r,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var u=t.pingedTasks;u.push(l),u.length===1&&rK(t)},blockedBoundary:n,blockedSegment:i,abortSet:r,legacyContext:s,context:o,treeContext:a};return r.add(l),l}function ab(t,e,n,i,r,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:i,boundary:n,lastPushedText:r,textEmbedded:s}}function Hv(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function lb(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,kq(t.destination,e)):(t.status=1,t.fatalError=e)}function CH(t,e,n,i,r){for(mu={},gI=e,$v=0,t=n(i,r);ob;)ob=!1,$v=0,rR+=1,Nt=null,t=n(i,r);return yI(),t}function wH(t,e,n,i){var r=n.render(),s=i.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")i=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(je(108,wP(i)||"Unknown",a));i=N0({},o,n)}e.legacyContext=i,ss(t,e,r),e.legacyContext=o}else ss(t,e,r)}function SH(t,e){if(t&&t.defaultProps){e=N0({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function EP(t,e,n,i,r){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){r=hH(n,e.legacyContext);var s=n.contextType;s=new n(i,typeof s=="object"&&s!==null?s._currentValue:r),pH(s,n,i,r),wH(t,e,s,n)}else{s=hH(n,e.legacyContext),r=CH(t,e,n,i,s);var o=$v!==0;if(typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0)pH(r,n,i,s),wH(t,e,r,n);else if(o){i=e.treeContext,e.treeContext=SP(i,1,0);try{ss(t,e,r)}finally{e.treeContext=i}}else ss(t,e,r)}else if(typeof n=="string"){switch(r=e.blockedSegment,s=Mpe(r.chunks,n,i,t.responseState,r.formatContext),r.lastPushedText=!1,o=r.formatContext,r.formatContext=Tpe(o,n,i),bP(t,e,s),r.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:r.chunks.push(Npe,Ke(n),Lpe)}r.lastPushedText=!1}else{switch(n){case Fge:case Pge:case Vq:case Bq:case Wq:ss(t,e,i.children);return;case qq:ss(t,e,i.children);return;case Oge:throw Error(je(343));case Yq:e:{n=e.blockedBoundary,r=e.blockedSegment,s=i.fallback,i=i.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=ab(t,r.chunks.length,a,r.formatContext,!1,!1);r.children.push(l),r.lastPushedText=!1;var u=ab(t,0,null,r.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=u;try{if(bP(t,e,i),u.lastPushedText&&u.textEmbedded&&u.chunks.push(fI),u.status=1,ub(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=Hv(t,c)}finally{e.blockedBoundary=n,e.blockedSegment=r}e=vI(t,s,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case jq:if(i=CH(t,e,n.render,i,r),$v!==0){n=e.treeContext,e.treeContext=SP(n,1,0);try{ss(t,e,i)}finally{e.treeContext=n}}else ss(t,e,i);return;case Kq:n=n.type,i=SH(n,i),EP(t,e,n,i,r);return;case zq:if(r=i.children,n=n._context,i=i.value,s=n._currentValue,n._currentValue=i,o=uh,uh=i={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:i},e.context=i,ss(t,e,r),t=uh,t===null)throw Error(je(403));i=t.parentValue,t.context._currentValue=i===Mge?t.context._defaultValue:i,t=uh=t.parent,e.context=t;return;case Uq:i=i.children,i=i(n._currentValue),ss(t,e,i);return;case pI:r=n._init,n=r(n._payload),i=SH(n,i),EP(t,e,n,i,void 0);return}throw Error(je(130,n==null?n:typeof n,""))}}function ss(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case Dge:EP(t,e,n.type,n.props,n.ref);return;case Hq:throw Error(je(257));case pI:var i=n._init;n=i(n._payload),ss(t,e,n);return}if(CP(n)){EH(t,e,n);return}if(n===null||typeof n!="object"?i=null:(i=dH&&n[dH]||n["@@iterator"],i=typeof i=="function"?i:null),i&&(i=i.call(n))){if(n=i.next(),!n.done){var r=[];do r.push(n.value),n=i.next();while(!n.done);EH(t,e,r)}return}throw t=Object.prototype.toString.call(n),Error(je(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(i=e.blockedSegment,i.lastPushedText=rH(e.blockedSegment.chunks,n,t.responseState,i.lastPushedText)):typeof n=="number"&&(i=e.blockedSegment,i.lastPushedText=rH(e.blockedSegment.chunks,""+n,t.responseState,i.lastPushedText))}function EH(t,e,n){for(var i=n.length,r=0;r<i;r++){var s=e.treeContext;e.treeContext=SP(s,i,r);try{bP(t,e,n[r])}finally{e.treeContext=s}}}function bP(t,e,n){var i=e.blockedSegment.formatContext,r=e.legacyContext,s=e.context;try{return ss(t,e,n)}catch(l){if(yI(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=ab(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=vI(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=i,e.legacyContext=r,e.context=s,sb(s)}else throw e.blockedSegment.formatContext=i,e.legacyContext=r,e.context=s,sb(s),l}}function zge(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,iK(this,e,t)}function nK(t,e,n){var i=t.blockedBoundary;t.blockedSegment.status=3,i===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(i.pendingTasks--,i.forceClientRender||(i.forceClientRender=!0,t=n===void 0?Error(je(432)):n,i.errorDigest=e.onError(t),i.parentFlushed&&e.clientRenderedBoundaries.push(i)),i.fallbackAbortableTasks.forEach(function(r){return nK(r,e,n)}),i.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(i=e.onAllReady,i()))}function ub(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&ub(t,n)}else t.completedSegments.push(e)}function iK(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(je(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Zy,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&ub(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(zge,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(ub(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function rK(t){if(t.status!==2){var e=uh,n=mD.current;mD.current=vH;var i=VS;VS=t.responseState;try{var r=t.pingedTasks,s;for(s=0;s<r.length;s++){var o=r[s],a=t,l=o.blockedSegment;if(l.status===0){sb(o.context);try{ss(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(fI),o.abortSet.delete(o),l.status=1,iK(a,o.blockedBoundary,l)}catch(p){if(yI(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var u=o.ping;p.then(u,u)}else{o.abortSet.delete(o),l.status=4;var c=o.blockedBoundary,d=p,h=Hv(a,d);if(c===null?lb(a,d):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=h,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}r.splice(0,s),t.destination!==null&&CI(t,t.destination)}catch(p){Hv(t,p),lb(t,p)}finally{VS=i,mD.current=n,n===vH&&sb(e)}}}function Ow(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var i=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,be(e,Ipe),be(e,t.placeholderPrefix),t=Ke(i.toString(16)),be(e,t),Vt(e,kpe);case 1:n.status=2;var r=!0;i=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(r=n[o];s<r.index;s++)be(e,i[s]);r=sR(t,e,r)}for(;s<i.length-1;s++)be(e,i[s]);return s<i.length&&(r=Vt(e,i[s])),r;default:throw Error(je(390))}}function sR(t,e,n){var i=n.boundary;if(i===null)return Ow(t,e,n);if(i.parentFlushed=!0,i.forceClientRender)i=i.errorDigest,Vt(e,Wpe),be(e,Bpe),i&&(be(e,Upe),be(e,Ke(Jn(i))),be(e,zpe)),Vt(e,jpe),Ow(t,e,n);else if(0<i.pendingTasks){i.rootSegmentID=t.nextSegmentId++,0<i.completedSegments.length&&t.partialBoundaries.push(i);var r=t.responseState,s=r.nextSuspenseID++;r=ge(r.boundaryPrefix+s.toString(16)),i=i.id=r,cH(e,t.responseState,i),Ow(t,e,n)}else if(i.byteSize>t.progressiveChunkSize)i.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(i),cH(e,t.responseState,i.id),Ow(t,e,n);else{if(Vt(e,Gpe),n=i.completedSegments,n.length!==1)throw Error(je(391));sR(t,e,n[0])}return Vt(e,Vpe)}function bH(t,e,n){return pge(e,t.responseState,n.formatContext,n.id),sR(t,e,n),gge(e,n.formatContext)}function xH(t,e,n){for(var i=n.completedSegments,r=0;r<i.length;r++)sK(t,e,n,i[r]);if(i.length=0,t=t.responseState,i=n.id,n=n.rootSegmentID,be(e,t.startInlineScript),t.sentCompleteBoundaryFunction?be(e,Sge):(t.sentCompleteBoundaryFunction=!0,be(e,wge)),i===null)throw Error(je(395));return n=Ke(n.toString(16)),be(e,i),be(e,Ege),be(e,t.segmentPrefix),be(e,n),Vt(e,bge)}function sK(t,e,n,i){if(i.status===2)return!0;var r=i.id;if(r===-1){if((i.id=n.rootSegmentID)===-1)throw Error(je(392));return bH(t,e,i)}return bH(t,e,i),t=t.responseState,be(e,t.startInlineScript),t.sentCompleteSegmentFunction?be(e,yge):(t.sentCompleteSegmentFunction=!0,be(e,mge)),be(e,t.segmentPrefix),r=Ke(r.toString(16)),be(e,r),be(e,vge),be(e,t.placeholderPrefix),be(e,r),Vt(e,Cge)}function CI(t,e){is=new Uint8Array(512),rs=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){sR(t,e,n),t.completedRootSegment=null;var i=t.responseState.bootstrapChunks;for(n=0;n<i.length-1;n++)be(e,i[n]);n<i.length&&Vt(e,i[n])}var r=t.clientRenderedBoundaries,s;for(s=0;s<r.length;s++){var o=r[s];i=e;var a=t.responseState,l=o.id,u=o.errorDigest,c=o.errorMessage,d=o.errorComponentStack;if(be(i,a.startInlineScript),a.sentClientRenderFunction?be(i,_ge):(a.sentClientRenderFunction=!0,be(i,xge)),l===null)throw Error(je(395));be(i,l),be(i,Rge),(u||c||d)&&(be(i,pD),be(i,Ke(gD(u||"")))),(c||d)&&(be(i,pD),be(i,Ke(gD(c||"")))),d&&(be(i,pD),be(i,Ke(gD(d)))),Vt(i,Tge)}r.splice(0,s);var h=t.completedBoundaries;for(s=0;s<h.length;s++)xH(t,e,h[s]);h.splice(0,s),eH(e),is=new Uint8Array(512),rs=0;var f=t.partialBoundaries;for(s=0;s<f.length;s++){var p=f[s];e:{r=t,o=e;var g=p.completedSegments;for(a=0;a<g.length;a++)if(!sK(r,o,p,g[a])){a++,g.splice(0,a);var m=!1;break e}g.splice(0,a),m=!0}if(!m){t.destination=null,s++,f.splice(0,s);return}}f.splice(0,s);var y=t.completedBoundaries;for(s=0;s<y.length;s++)xH(t,e,y[s]);y.splice(0,s)}finally{eH(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function _H(t,e){try{var n=t.abortableTasks;n.forEach(function(i){return nK(i,t,e)}),n.clear(),t.destination!==null&&CI(t,t.destination)}catch(i){Hv(t,i),lb(t,i)}}cI.renderToReadableStream=function(t,e){return new Promise(function(n,i){var r,s,o=new Promise(function(c,d){s=c,r=d}),a=Bge(t,_pe(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),Rpe(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,s,function(){var c=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,kq(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{CI(a,d)}catch(h){Hv(a,h),lb(a,h)}}},cancel:function(){_H(a)}},{highWaterMark:0});c.allReady=o,n(c)},function(c){o.catch(function(){}),i(c)},r);if(e&&e.signal){var l=e.signal,u=function(){_H(a,l.reason),l.removeEventListener("abort",u)};l.addEventListener("abort",u)}rK(a)})};cI.version="18.2.0";var Om,oK;Om=Dm,oK=cI;Om.version;Om.renderToString;var aK=Om.renderToStaticMarkup;Om.renderToNodeStream;Om.renderToStaticNodeStream;oK.renderToReadableStream;let Uge=0;function xP(){return`agPortalKey_${++Uge}`}class oR extends cq{constructor(e,n,i,r){super(e,i,r),this.staticMarkup=null,this.staticRenderTime=0,this.parentComponent=n}init(e){return this.eParentElement=this.createParentElement(e),this.renderStaticMarkup(e),new Nn(n=>this.createReactComponent(e,n))}createReactComponent(e,n){this.isStatelessComponent()||(e.ref=s=>{this.componentInstance=s,this.addParentContainerStyleAndClasses(),this.removeStaticMarkup()});const i=T.createElement(this.reactComponent,e),r=T1.createPortal(i,this.eParentElement,xP());this.portal=r,this.portalManager.mountReactPortal(r,this,s=>{n(s),this.isStatelessComponent()&&(this.isSlowRenderer()&&this.removeStaticMarkup(),setTimeout(()=>{this.removeStaticMarkup()}))})}fallbackMethodAvailable(e){return!1}fallbackMethod(e,n){}isSlowRenderer(){return this.staticRenderTime>=oR.SLOW_RENDERING_THRESHOLD}isNullValue(){return this.staticMarkup===""}renderStaticMarkup(e){if(this.parentComponent.isDisableStaticMarkup()||!this.componentType.cellRenderer)return;const n=console.error,i=T.createElement(this.reactComponent,e);try{console.error=()=>{};const r=Date.now(),s=aK(i);this.staticRenderTime=Date.now()-r,console.error=n,s===""?this.staticMarkup=s:s&&(this.staticMarkup=document.createElement("span"),this.staticMarkup.innerHTML=s,this.eParentElement.appendChild(this.staticMarkup))}catch{}finally{console.error=n}}removeStaticMarkup(){this.parentComponent.isDisableStaticMarkup()||!this.componentType.cellRenderer||this.staticMarkup&&(this.staticMarkup.remove?(this.staticMarkup.remove(),this.staticMarkup=null):this.eParentElement.removeChild&&(this.eParentElement.removeChild(this.staticMarkup),this.staticMarkup=null))}rendered(){return this.isNullValue()||!!this.staticMarkup||this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}}oR.SLOW_RENDERING_THRESHOLD=3;class lK extends cq{constructor(e,n,i){super(e,n,i),this.oldPortal=null,this.key=xP(),this.portalKey=xP()}init(e){return this.eParentElement=this.createParentElement(e),this.params=e,this.createOrUpdatePortal(e),new Nn(n=>this.createReactComponent(n))}createOrUpdatePortal(e){this.isStatelessComponent()||(e.ref=n=>{this.componentInstance=n,this.addParentContainerStyleAndClasses()}),this.reactElement=T.createElement(this.reactComponent,Object.assign(Object.assign({},e),{key:this.key})),this.portal=T1.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,n=>{e(n)})}isNullValue(){return this.valueRenderedIsNull(this.params)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}valueRenderedIsNull(e){if(!this.componentType.cellRenderer)return!1;const n=console.error;try{return console.error=()=>{},aK(T.createElement(this.reactComponent,e))===""}catch{}finally{console.error=n}return!1}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,n){const i=this[`${e}Component`];if(i)return i.bind(this)(n)}fallbackMethodAvailable(e){return!!this[`${e}Component`]}}class aR{constructor(e,n,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=n||"div",this.parent=e,this.maxComponentCreationTimeMs=i||aR.MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(n=>n!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,n,i){this.portals=[...this.portals,e],this.waitForInstance(n,i),this.batchUpdate()}updateReactPortal(e,n){this.portals[this.portals.indexOf(e)]=n,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||this.parent.forceUpdate(()=>{this.hasPendingPortalUpdate=!1})}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,n,i=Date.now()){if(this.destroyed){n(null);return}if(e.rendered())n(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){if(e.isNullValue()){n(e);return}console.error(`AG Grid: React Component '${e.getReactComponentName()}' not created within ${this.maxComponentCreationTimeMs}ms`);return}window.setTimeout(()=>{this.waitForInstance(e,n,i)})}}}aR.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3;class lR{constructor(e,n,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=n||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||lR.MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(n=>n!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,n,i){this.portals=[...this.portals,e],this.waitForInstance(n,i),this.batchUpdate()}updateReactPortal(e,n){this.portals[this.portals.indexOf(e)]=n,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,n,i=Date.now()){if(this.destroyed){n(null);return}if(e.rendered())n(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){if(e.isNullValue()){n(e);return}console.error(`AG Grid: React Component '${e.getReactComponentName()}' not created within ${this.maxComponentCreationTimeMs}ms`);return}window.setTimeout(()=>{this.waitForInstance(e,n,i)})}}}lR.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3;const hr=Q.createContext({}),hC=(t,e,n,i)=>{if(!t||t.componentFromFramework||e.isDestroyed())return;const s=t.newAgStackInstance();if(!s)return;let o,a,l=!1;return s.then(u=>{if(l){e.destroyBean(u);return}o=u,a=o.getGui(),n.appendChild(a),RH(i,o)}),()=>{l=!0,o&&(a&&a.parentElement&&a.parentElement.removeChild(a),e.destroyBean(o),i&&RH(i,void 0))}},RH=(t,e)=>{if(t)if(t instanceof Function)t(e);else{const n=t;n.current=e}},jge=t=>{const e=t.newAgStackInstance();if(e)return e.resolveNow(null,n=>n)},ks=(...t)=>t.filter(n=>n!=null&&n!=="").join(" ");class Qi{constructor(...e){this.classesMap={},e.forEach(n=>{this.classesMap[n]=!0})}setClass(e,n){if(!!this.classesMap[e]==n)return this;const r=new Qi;return r.classesMap=Object.assign({},this.classesMap),r.classesMap[e]=n,r}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}}const uR=t=>{const e=()=>typeof Symbol=="function"&&Symbol.for,n=()=>e()?Symbol.for("react.memo"):60115;return typeof t=="function"&&!(t.prototype&&t.prototype.isReactComponent)||typeof t=="object"&&t.$$typeof===n()},Yge=V2.createRoot!=null&&V2.flushSync!=null,uK=(t,e)=>{Yge&&t?V2.flushSync(e):e()};function wI(t,e,n){if(e==null||t==null)return e;if(t===e||e.length===0&&t.length===0)return t;if(n||t.length===0&&e.length>0||t.length>0&&e.length===0)return e;const i=[],r=[],s=new Map,o=new Map;for(let a=0;a<e.length;a++){const l=e[a];o.set(l.getInstanceId(),l)}for(let a=0;a<t.length;a++){const l=t[a];s.set(l.getInstanceId(),l),o.has(l.getInstanceId())&&i.push(l)}for(let a=0;a<e.length;a++){const l=e[a],u=l.getInstanceId();s.has(u)||r.push(l)}return i.length===t.length&&r.length===0?t:i.length===0&&r.length===e.length?e:[...i,...r]}const _P=T.forwardRef((t,e)=>{const n=T.useContext(hr).context,i=T.useRef(null),r=T.useRef(null),s=T.useRef(null),o=T.useRef(null),a=T.useRef(null),l=T.useRef(),[u,c]=T.useState(),[d,h]=T.useState(),[f,p]=T.useState(),[g,m]=T.useState(()=>new Qi),[y,v]=T.useState(()=>new Qi("ag-hidden")),[C,w]=T.useState(()=>new Qi("ag-hidden")),[E,b]=T.useState(()=>new Qi("ag-invisible"));T.useImperativeHandle(e,()=>({refresh(){return!1}})),T.useLayoutEffect(()=>hC(u,n,r.current),[u]);const S=T.useCallback(I=>{if(i.current=I,!i.current){n.destroyBean(l.current),l.current=null;return}const H={setInnerRenderer:(N,G)=>{c(N),p(G)},setChildCount:N=>h(N),addOrRemoveCssClass:(N,G)=>m(W=>W.setClass(N,G)),setContractedDisplayed:N=>w(G=>G.setClass("ag-hidden",!N)),setExpandedDisplayed:N=>v(G=>G.setClass("ag-hidden",!N)),setCheckboxVisible:N=>b(G=>G.setClass("ag-invisible",!N))};l.current=n.createBean(new xf),l.current.init(H,i.current,s.current,o.current,a.current,_P,t)},[]),_=T.useMemo(()=>`ag-cell-wrapper ${g.toString()}`,[g]),A=T.useMemo(()=>`ag-group-expanded ${y.toString()}`,[y]),D=T.useMemo(()=>`ag-group-contracted ${C.toString()}`,[C]),P=T.useMemo(()=>`ag-group-checkbox ${E.toString()}`,[E]),L=u&&u.componentFromFramework,O=L?u.componentClass:void 0,M=u==null&&f!=null,F=Ie.escapeString(f,!0);return Q.createElement("span",Object.assign({className:_,ref:S},t.colDef?{}:{role:"gridcell"}),Q.createElement("span",{className:A,ref:o}),Q.createElement("span",{className:D,ref:a}),Q.createElement("span",{className:P,ref:s}),Q.createElement("span",{className:"ag-group-value",ref:r},M&&Q.createElement(Q.Fragment,null,F),L&&Q.createElement(O,Object.assign({},u.params))),Q.createElement("span",{className:"ag-group-child-count"},d))}),qge=t=>{const{ctrl:e}=t,{context:n}=T.useContext(hr),i=e.getColId(),[r,s]=T.useState(),o=T.useRef(null),a=T.useRef(null),l=T.useRef(null),u=T.useRef();let c=T.useRef();c.current||(c.current=new P1(()=>o.current));const d=T.useCallback(g=>{var m;if(o.current=g,!o.current)return;const y={setWidth:C=>{o.current&&(o.current.style.width=C)},addOrRemoveCssClass:(C,w)=>c.current.addOrRemoveCssClass(C,w),setAriaDescription:C=>{o.current&&Ie.setAriaDescription(o.current,C)},setAriaSort:C=>{o.current&&(C?Ie.setAriaSort(o.current,C):Ie.removeAriaSort(o.current))},setUserCompDetails:C=>s(C),getUserCompInstance:()=>u.current||void 0};e.setComp(y,o.current,a.current,l.current);const v=e.getSelectAllGui();(m=a.current)===null||m===void 0||m.insertAdjacentElement("afterend",v)},[]);T.useLayoutEffect(()=>hC(r,n,l.current,u),[r]),T.useEffect(()=>{e.setDragSource(o.current)},[r]);const h=T.useMemo(()=>!!((r==null?void 0:r.componentFromFramework)&&uR(r.componentClass)),[r]),f=r&&r.componentFromFramework,p=r&&r.componentClass;return Q.createElement("div",{ref:d,className:"ag-header-cell","col-id":i,role:"columnheader",tabIndex:-1},Q.createElement("div",{ref:a,className:"ag-header-cell-resize",role:"presentation"}),Q.createElement("div",{ref:l,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&h&&Q.createElement(p,Object.assign({},r.params)),f&&!h&&Q.createElement(p,Object.assign({},r.params,{ref:u}))))},Kge=T.memo(qge),Xge=t=>{const{context:e}=T.useContext(hr),{ctrl:n}=t,[i,r]=T.useState(()=>new Qi),[s,o]=T.useState(()=>new Qi),[a,l]=T.useState("false"),[u,c]=T.useState(),[d,h]=T.useState(),f=T.useMemo(()=>n.getColId(),[]),p=T.useRef(null),g=T.useRef(null),m=T.useCallback(E=>{if(p.current=E,!p.current)return;const b={setWidth:S=>{p.current&&(p.current.style.width=S)},addOrRemoveCssClass:(S,_)=>r(A=>A.setClass(S,_)),setUserCompDetails:S=>h(S),setResizableDisplayed:S=>{o(_=>_.setClass("ag-hidden",!S)),l(S?"false":"true")},setAriaExpanded:S=>c(S)};n.setComp(b,p.current,g.current)},[]);T.useLayoutEffect(()=>hC(d,e,p.current),[d]),T.useEffect(()=>{p.current&&n.setDragSource(p.current)},[d]);const y=T.useMemo(()=>"ag-header-group-cell "+i.toString(),[i]),v=T.useMemo(()=>"ag-header-cell-resize "+s.toString(),[s]),C=d&&d.componentFromFramework,w=d&&d.componentClass;return Q.createElement("div",{ref:m,className:y,"col-id":f,role:"columnheader",tabIndex:-1,"aria-expanded":u},C&&Q.createElement(w,Object.assign({},d.params)),Q.createElement("div",{ref:g,"aria-hidden":a,className:v}))},Qge=T.memo(Xge),Jge=t=>{const{context:e}=T.useContext(hr),[n,i]=T.useState(()=>new Qi("ag-header-cell","ag-floating-filter")),[r,s]=T.useState(()=>new Qi),[o,a]=T.useState(()=>new Qi("ag-floating-filter-button","ag-hidden")),[l,u]=T.useState("false"),[c,d]=T.useState(),h=T.useRef(null),f=T.useRef(null),p=T.useRef(null),g=T.useRef(null),m=T.useRef(),y=T.useRef(),v=P=>{P!=null&&m.current&&m.current(P)},{ctrl:C}=t,w=T.useCallback(P=>{if(h.current=P,!h.current)return;y.current=new Nn(O=>{m.current=O});const L={addOrRemoveCssClass:(O,M)=>i(F=>F.setClass(O,M)),addOrRemoveBodyCssClass:(O,M)=>s(F=>F.setClass(O,M)),setButtonWrapperDisplayed:O=>{a(M=>M.setClass("ag-hidden",!O)),u(O?"false":"true")},setWidth:O=>{h.current&&(h.current.style.width=O)},setCompDetails:O=>d(O),getFloatingFilterComp:()=>y.current?y.current:null,setMenuIcon:O=>{var M;return(M=g.current)===null||M===void 0?void 0:M.appendChild(O)}};C.setComp(L,h.current,g.current,f.current)},[]);T.useLayoutEffect(()=>hC(c,e,f.current,v),[c]);const E=T.useMemo(()=>n.toString(),[n]),b=T.useMemo(()=>r.toString(),[r]),S=T.useMemo(()=>o.toString(),[o]),_=T.useMemo(()=>!!(c&&c.componentFromFramework&&uR(c.componentClass)),[c]),A=c&&c.componentFromFramework,D=c&&c.componentClass;return Q.createElement("div",{ref:w,className:E,role:"gridcell",tabIndex:-1},Q.createElement("div",{ref:f,className:b,role:"presentation"},A&&_&&Q.createElement(D,Object.assign({},c.params)),A&&!_&&Q.createElement(D,Object.assign({},c.params,{ref:v}))),Q.createElement("div",{ref:p,"aria-hidden":l,className:S,role:"presentation"},Q.createElement("button",{ref:g,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Zge=T.memo(Jge),eme=t=>{const{ctrl:e}=t,{topOffset:n,rowHeight:i}=T.useMemo(()=>e.getTopAndHeight(),[]),r=e.getAriaRowIndex(),s=e.getHeaderRowClass(),o=T.useMemo(()=>e.getTransform(),[]),[a,l]=T.useState(()=>i+"px"),[u,c]=T.useState(()=>n+"px"),[d,h]=T.useState(()=>e.getHeaderCtrls()),f=T.useRef(null),p=T.useCallback(y=>{if(f.current=y,!y)return;const v={setHeight:C=>l(C),setTop:C=>c(C),setHeaderCtrls:(C,w)=>h(E=>wI(E,C,w)),setWidth:C=>{f.current&&(f.current.style.width=C)}};e.setComp(v,!1)},[]),g=T.useMemo(()=>({transform:o,height:a,top:u}),[o,a,u]),m=T.useCallback(y=>{switch(e.getType()){case bn.COLUMN_GROUP:return Q.createElement(Qge,{ctrl:y,key:y.getInstanceId()});case bn.FLOATING_FILTER:return Q.createElement(Zge,{ctrl:y,key:y.getInstanceId()});default:return Q.createElement(Kge,{ctrl:y,key:y.getInstanceId()})}},[]);return Q.createElement("div",{ref:p,className:s,role:"row",style:g,"aria-rowindex":r},d.map(m))},tme=T.memo(eme),nme=t=>{const[e,n]=T.useState(()=>new Qi),[i,r]=T.useState(!1),[s,o]=T.useState([]),{context:a}=T.useContext(hr),l=T.useRef(null),u=T.useRef(null),c=T.useRef(null),d=t.pinned==="left",h=t.pinned==="right",f=!d&&!h,p=T.useCallback(y=>{if(l.current=y,!l.current){a.destroyBean(c.current),c.current=null;return}const v={setDisplayed:C=>{n(w=>w.setClass("ag-hidden",!C)),r(!C)},setCtrls:C=>o(C),setCenterWidth:C=>{u.current&&(u.current.style.width=C)},setViewportScrollLeft:C=>{l.current&&(l.current.scrollLeft=C)},setPinnedContainerWidth:C=>{l.current&&(l.current.style.width=C,l.current.style.minWidth=C,l.current.style.maxWidth=C)}};c.current=a.createBean(new dd(t.pinned)),c.current.setComp(v,l.current)},[]),g=T.useMemo(()=>e.toString(),[e]),m=()=>s.map(y=>Q.createElement(tme,{ctrl:y,key:y.getInstanceId()}));return Q.createElement(Q.Fragment,null,d&&Q.createElement("div",{ref:p,className:"ag-pinned-left-header "+g,"aria-hidden":i,role:"presentation"},m()),h&&Q.createElement("div",{ref:p,className:"ag-pinned-right-header "+g,"aria-hidden":i,role:"presentation"},m()),f&&Q.createElement("div",{ref:p,className:"ag-header-viewport "+g,role:"presentation"},Q.createElement("div",{ref:u,className:"ag-header-container",role:"rowgroup"},m())))},yD=T.memo(nme),ime=()=>{const[t,e]=T.useState(()=>new Qi),[n,i]=T.useState(),{context:r}=T.useContext(hr),s=T.useRef(null),o=T.useRef(null),a=T.useCallback(c=>{if(s.current=c,!c){r.destroyBean(o.current),o.current=null;return}const d={addOrRemoveCssClass:(h,f)=>e(p=>p.setClass(h,f)),setHeightAndMinHeight:h=>i(h)};o.current=r.createBean(new Tf),o.current.setComp(d,s.current,s.current)},[]),l=T.useMemo(()=>"ag-header "+t.toString(),[t]),u=T.useMemo(()=>({height:n,minHeight:n}),[n]);return Q.createElement("div",{ref:a,className:l,style:u,role:"presentation"},Q.createElement(yD,{pinned:"left"}),Q.createElement(yD,{pinned:null}),Q.createElement(yD,{pinned:"right"}))},rme=T.memo(ime),Qd=(t,e)=>{T.useEffect(()=>{const n=e.current;if(n){const i=n.parentElement;if(i){const r=document.createComment(t);return i.insertBefore(r,n),()=>{i.removeChild(r)}}}},[t])},sme=t=>{const e=T.useRef(t),n=T.useRef(),i=T.useRef(!1),r=T.useRef(!1),[,s]=T.useState(0);i.current&&(r.current=!0),T.useEffect(()=>(i.current||(n.current=e.current(),i.current=!0),s(o=>o+1),()=>{r.current&&n.current&&n.current()}),[])},ome=t=>{const[e,n]=T.useState(),{context:i,popupService:r,localeService:s,gridOptionsService:o}=T.useContext(hr);return sme(()=>{const{editDetails:a,cellCtrl:l,eParentCell:u}=t,{compDetails:c}=a,d=o.is("stopEditingWhenCellsLoseFocus"),h=i.createBean(new gm(c.params)),f=h.getGui();if(t.jsChildComp){const C=t.jsChildComp.getGui();C&&f.appendChild(C)}const p={column:l.getColumn(),rowNode:l.getRowNode(),type:"popupCellEditor",eventSource:u,ePopup:f,position:a.popupPosition,keepWithinBounds:!0},g=r.positionPopupByComponent.bind(r,p),m=s.getLocaleTextFunc(),y=r.addPopup({modal:d,eChild:f,closeOnEsc:!0,closedCallback:()=>{l.onPopupEditorClosed()},anchorToElement:u,positionCallback:g,ariaLabel:m("ariaLabelCellEditor","Cell Editor")}),v=y?y.hideFunc:void 0;return n(h),t.jsChildComp&&t.jsChildComp.afterGuiAttached&&t.jsChildComp.afterGuiAttached(),()=>{v!=null&&v(),i.destroyBean(h)}}),Q.createElement(Q.Fragment,null,e&&t.wrappedContent&&T1.createPortal(t.wrappedContent,e.getGui()))},TH=T.memo(ome),ame=(t,e,n,i,r,s)=>{const{context:o}=T.useContext(hr),a=T.useCallback(()=>{const l=r.current;if(!l)return;const u=l.getGui();u&&u.parentElement&&u.parentElement.removeChild(u),o.destroyBean(l),r.current=void 0},[]);T.useEffect(()=>{const l=t!=null,u=t&&t.compDetails&&!t.compDetails.componentFromFramework,c=e&&n==null;if(!(l&&u&&!c)){a();return}const h=t.compDetails;if(r.current){const y=r.current,C=y.refresh!=null&&t.force==!1?y.refresh(h.params):!1;if(C===!0||C===void 0)return;a()}const f=h.newAgStackInstance();if(!f)return;const p=f.resolveNow(null,y=>y);if(!p)return;const g=p.getGui();if(!g)return;(e?n:s.current).appendChild(g),r.current=p},[t,e,i]),T.useEffect(()=>a,[])};var AH;(function(t){t[t.ShowValue=0]="ShowValue",t[t.EditValue=1]="EditValue"})(AH||(AH={}));const lme=(t,e,n)=>{const i=n.getColumn();if(!t&&e.isPopup&&e.isPopup()){const r=`AG Grid: Found an issue in column ${i.getColId()}. If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.`;Ie.doOnce(()=>console.warn(r),"jsEditorComp-isPopup-"+n.getColumn().getColId())}if(t&&e.getPopupPosition&&e.getPopupPosition()!=null){const r=`AG Grid: Found an issue in column ${i.getColId()}. If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.`;Ie.doOnce(()=>console.warn(r),"jsEditorComp-getPopupPosition-"+n.getColumn().getColId())}},ume=(t,e,n,i,r,s)=>{const o=t.compDetails,a=o.componentClass,l=o.componentFromFramework&&!t.popup,u=o.componentFromFramework&&t.popup,c=!o.componentFromFramework&&t.popup;return Q.createElement(Q.Fragment,null,l&&Q.createElement(a,Object.assign({},t.compDetails.params,{ref:e})),u&&Q.createElement(TH,{editDetails:t,cellCtrl:r,eParentCell:i,wrappedContent:Q.createElement(a,Object.assign({},t.compDetails.params,{ref:n}))}),c&&s&&Q.createElement(TH,{editDetails:t,cellCtrl:r,eParentCell:i,jsChildComp:s}))},cme=(t,e,n,i,r,s,o)=>{const{compDetails:a,value:l}=t,u=!a,c=a&&a.componentFromFramework,d=a&&a.componentClass,h=l!=null&&l.toString?l.toString():l,f=()=>Q.createElement(Q.Fragment,null,u&&Q.createElement(Q.Fragment,null,h),c&&!s&&Q.createElement(d,Object.assign({},a.params,{key:e,ref:i})),c&&s&&Q.createElement(d,Object.assign({},a.params,{key:e})));return Q.createElement(Q.Fragment,null,r?Q.createElement("span",{role:"presentation",id:`cell-${n}`,className:"ag-cell-value",ref:o},f()):f())},dme=t=>{const{context:e}=T.useContext(hr),{cellCtrl:n,printLayout:i,editingRow:r}=t,s=n.getTabIndex(),o=n.getColumnIdSanitised(),a=n.getInstanceId(),[l,u]=T.useState(()=>n.getIsCellRenderer()?void 0:{compDetails:void 0,value:n.getValueToDisplay(),force:!1}),[c,d]=T.useState(),[h,f]=T.useState(1),[p,g]=T.useState(),[m,y]=T.useState(!1),[v,C]=T.useState(!1),[w,E]=T.useState(!1),[b,S]=T.useState(),_=T.useMemo(()=>n.isForceWrapper(),[n]),A=T.useRef(null),D=T.useRef(null),P=T.useRef(),L=T.useRef(),O=T.useRef(),M=T.useRef([]),F=T.useRef(),[I,H]=T.useState(0),N=T.useCallback(ve=>{F.current=ve,H(Ee=>Ee+1)},[]),G=l!=null&&(m||w||v),W=_||G,X=T.useCallback((ve,Ee)=>{L.current=Ee,Ee&&(lme(ve,Ee,n),Ee.isCancelBeforeStart&&Ee.isCancelBeforeStart()&&setTimeout(()=>{n.stopEditing(!0),n.focusCell(!0)}))},[n]),ne=T.useCallback(ve=>X(!0,ve),[X]),Se=T.useCallback(ve=>X(!1,ve),[X]);let xe=T.useRef();xe.current||(xe.current=new P1(()=>A.current)),ame(l,W,F.current,I,P,A);const rt=T.useRef();T.useLayoutEffect(()=>{const ve=rt.current,Ee=l;if(rt.current=l,ve==null||ve.compDetails==null||Ee==null||Ee.compDetails==null)return;const Y=ve.compDetails,De=Ee.compDetails;if(Y.componentClass!=De.componentClass||D.current==null||D.current.refresh==null)return;D.current.refresh(De.params)!=!0&&f(Ze=>Ze+1)},[l]),T.useLayoutEffect(()=>{if(!(c&&!c.compDetails.componentFromFramework))return;const Ee=c.compDetails,Y=c.popup===!0,De=jge(Ee);if(!De)return;const Oe=De.getGui();if(X(Y,De),!Y){const Ze=(_?O:A).current;Ze==null||Ze.appendChild(Oe),De.afterGuiAttached&&De.afterGuiAttached()}return S(De),()=>{e.destroyBean(De),X(Y,void 0),S(void 0),Oe&&Oe.parentElement&&Oe.parentElement.removeChild(Oe)}},[c]);const cn=T.useCallback(ve=>{if(O.current=ve,!O.current){M.current.forEach(Y=>Y()),M.current=[];return}const Ee=Y=>{var De;if(Y){const Oe=Y.getGui();(De=O.current)===null||De===void 0||De.insertAdjacentElement("afterbegin",Oe),M.current.push(()=>{e.destroyBean(Y),Ie.removeFromParent(Oe)})}return Y};if(m){const Y=n.createSelectionCheckbox();Ee(Y)}w&&Ee(n.createDndSource()),v&&Ee(n.createRowDragComp())},[n,e,w,v,m]),Gi=T.useCallback(ve=>{if(A.current=ve,!A.current||!n)return;const Ee={addOrRemoveCssClass:(De,Oe)=>xe.current.addOrRemoveCssClass(De,Oe),setUserStyles:De=>g(De),getFocusableElement:()=>A.current,setIncludeSelection:De=>y(De),setIncludeRowDrag:De=>C(De),setIncludeDndSource:De=>E(De),getCellEditor:()=>L.current||null,getCellRenderer:()=>D.current?D.current:P.current,getParentOfValue:()=>F.current?F.current:O.current?O.current:A.current,setRenderDetails:(De,Oe,Ze)=>{u(Ct=>(Ct==null?void 0:Ct.compDetails)!==De||(Ct==null?void 0:Ct.value)!==Oe||(Ct==null?void 0:Ct.force)!==Ze?{value:Oe,compDetails:De,force:Ze}:Ct)},setEditDetails:(De,Oe,Ze)=>{De?(d({compDetails:De,popup:Oe,popupPosition:Ze}),Oe||u(void 0)):d(void 0)}},Y=O.current||void 0;n.setComp(Ee,A.current,Y,i,r)},[]),yo=T.useMemo(()=>!!(l&&l.compDetails&&l.compDetails.componentFromFramework&&uR(l.compDetails.componentClass)),[l]);T.useLayoutEffect(()=>{var ve;A.current&&(xe.current.addOrRemoveCssClass("ag-cell-value",!W),xe.current.addOrRemoveCssClass("ag-cell-inline-editing",!!c&&!c.popup),xe.current.addOrRemoveCssClass("ag-cell-popup-editing",!!c&&!!c.popup),xe.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!c||!!c.popup),(ve=n.getRowCtrl())===null||ve===void 0||ve.setInlineEditingCss(!!c),n.shouldRestoreFocus()&&!n.isEditing()&&A.current.focus({preventScroll:!0}))});const fe=()=>Q.createElement(Q.Fragment,null,l!=null&&cme(l,h,a,D,W,yo,N),c!=null&&ume(c,Se,ne,A.current,n,b));return Q.createElement("div",{ref:Gi,style:p,tabIndex:s,role:"gridcell","col-id":o},W?Q.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:cn},fe()):fe())},hme=T.memo(dme),fme=t=>{const{context:e}=T.useContext(hr),{rowCtrl:n,containerType:i}=t,r=n.getTabIndex(),s=T.useRef(n.getDomOrder()),o=n.isFullWidth(),[a,l]=T.useState(()=>n.getRowIndex()),[u,c]=T.useState(()=>n.getRowId()),[d,h]=T.useState(()=>n.getBusinessKey()),[f,p]=T.useState(()=>n.getRowStyles()),[g,m]=T.useState(()=>null),[y,v]=T.useState(),[C,w]=T.useState(()=>n.getInitialRowTop(i)),[E,b]=T.useState(()=>n.getInitialTransform(i)),S=T.useRef(null),_=T.useRef(),A=T.useRef(!1),[D,P]=T.useState(0);T.useEffect(()=>{var W;if(A.current||!y||D>10)return;const X=(W=S.current)===null||W===void 0?void 0:W.firstChild;X?(n.setupDetailRowAutoHeight(X),A.current=!0):P(ne=>ne+1)},[y,D]);let L=T.useRef();L.current||(L.current=new P1(()=>S.current));const O=T.useCallback(W=>{if(S.current=W,!n.isAlive())return;if(!S.current){n.unsetComp(i);return}const X={setTop:w,setTransform:b,addOrRemoveCssClass:(ne,Se)=>L.current.addOrRemoveCssClass(ne,Se),setDomOrder:ne=>s.current=ne,setRowIndex:l,setRowId:c,setRowBusinessKey:h,setUserStyles:p,setCellCtrls:(ne,Se)=>{uK(Se,()=>{m(xe=>wI(xe,ne,s.current))})},showFullWidth:ne=>v(ne),getFullWidthCellRenderer:()=>_.current};n.setComp(X,S.current,i)},[]);T.useLayoutEffect(()=>hC(y,e,S.current,_),[y]);const M=T.useMemo(()=>{const W={top:C,transform:E};return Object.assign(W,f),W},[C,E,f]),F=o&&y&&y.componentFromFramework,I=!o&&g!=null,H=T.useMemo(()=>!!((y==null?void 0:y.componentFromFramework)&&uR(y.componentClass)),[y]),N=()=>g==null?void 0:g.map(W=>Q.createElement(hme,{cellCtrl:W,editingRow:n.isEditing(),printLayout:n.isPrintLayout(),key:W.getInstanceId()})),G=()=>{const W=y.componentClass;return Q.createElement(Q.Fragment,null,H&&Q.createElement(W,Object.assign({},y.params)),!H&&Q.createElement(W,Object.assign({},y.params,{ref:_})))};return Q.createElement("div",{ref:O,role:"row",style:M,"row-index":a,"row-id":u,"row-business-key":d,tabIndex:r},I&&N(),F&&G())},pme=T.memo(fme),gme=t=>{const{context:e}=T.useContext(hr),{name:n}=t,i=T.useMemo(()=>PY(n),[n]),r=T.useRef(null),s=T.useRef(null),o=T.useRef(null),a=T.useRef([]),[l,u]=T.useState(()=>[]),c=T.useRef(!1),d=T.useRef(),h=T.useMemo(()=>kr.getRowContainerCssClasses(n),[n]),f=T.useMemo(()=>ks(h.wrapper),[h]),p=T.useMemo(()=>ks(h.viewport),[h]),g=T.useMemo(()=>ks(h.container),[h]),m=n===$.CENTER,y=n===$.TOP_CENTER||n===$.BOTTOM_CENTER||n===$.STICKY_TOP_CENTER,v=!m&&!y,C=m?r:y?s:o;Qd(" AG Row Container "+n+" ",C);const w=T.useCallback(()=>{if(m)return r.current!=null&&s.current!=null&&o.current!=null;if(y)return s.current!=null&&o.current!=null;if(v)return o.current!=null},[]),E=T.useCallback(()=>{if(m)return r.current==null&&s.current==null&&o.current==null;if(y)return s.current==null&&o.current==null;if(v)return o.current==null},[]),b=T.useCallback(()=>{if(E()&&(e.destroyBean(d.current),d.current=null),w()){const P=O=>{uK(O,()=>{u(M=>wI(M,a.current,c.current))})},L={setViewportHeight:O=>{s.current&&(s.current.style.height=O)},setRowCtrls:(O,M)=>{const F=M&&a.current.length>0&&O.length>0;a.current=O,P(F)},setDomOrder:O=>{c.current!=O&&(c.current=O,P(!1))},setContainerWidth:O=>{o.current&&(o.current.style.width=O)}};d.current=e.createBean(new kr(n)),d.current.setComp(L,o.current,s.current,r.current)}},[w,E]),S=T.useCallback(P=>{o.current=P,b()},[b]),_=T.useCallback(P=>{s.current=P,b()},[b]),A=T.useCallback(P=>{r.current=P,b()},[b]),D=()=>Q.createElement("div",{className:g,ref:S,role:l.length?"rowgroup":"presentation"},l.map(P=>Q.createElement(pme,{rowCtrl:P,containerType:i,key:P.getInstanceId()})));return Q.createElement(Q.Fragment,null,m&&Q.createElement("div",{className:f,ref:A,role:"presentation"},Q.createElement("div",{className:p,ref:_,role:"presentation"},D())),y&&Q.createElement("div",{className:p,ref:_,role:"presentation"},D()),v&&D())},mme=T.memo(gme),yme=()=>{const{context:t,agStackComponentsRegistry:e,resizeObserverService:n}=T.useContext(hr),[i,r]=T.useState(""),[s,o]=T.useState(0),[a,l]=T.useState(0),[u,c]=T.useState("0px"),[d,h]=T.useState("0px"),[f,p]=T.useState("100%"),[g,m]=T.useState(""),[y,v]=T.useState(""),[C,w]=T.useState(null),[E,b]=T.useState(""),[S,_]=T.useState(null),[A,D]=T.useState("ag-layout-normal");let P=T.useRef();P.current||(P.current=new P1(()=>L.current));const L=T.useRef(null),O=T.useRef(null),M=T.useRef(null),F=T.useRef(null),I=T.useRef(null),H=T.useRef(null),N=T.useRef([]),G=T.useRef([]);Qd(" AG Grid Body ",L),Qd(" AG Pinned Top ",O),Qd(" AG Sticky Top ",M),Qd(" AG Middle ",I),Qd(" AG Pinned Bottom ",H);const W=T.useCallback(De=>{if(L.current=De,!L.current){t.destroyBeans(N.current),G.current.forEach(dn=>dn()),N.current=[],G.current=[];return}if(!t)return;const Oe=dn=>{const ya=e.getComponentClass(dn),u$=t.createBean(new ya);return N.current.push(u$),u$},Ze=(dn,ya)=>{dn.appendChild(ya),G.current.push(()=>dn.removeChild(ya))};Ze(L.current,document.createComment(" AG Fake Horizontal Scroll ")),Ze(L.current,Oe("AG-FAKE-HORIZONTAL-SCROLL").getGui()),Ze(L.current,document.createComment(" AG Overlay Wrapper ")),Ze(L.current,Oe("AG-OVERLAY-WRAPPER").getGui()),F.current&&(Ze(F.current,document.createComment(" AG Fake Vertical Scroll ")),Ze(F.current,Oe("AG-FAKE-VERTICAL-SCROLL").getGui()));const Ct={setRowAnimationCssOnBodyViewport:r,setColumnCount:dn=>{L.current&&Ie.setAriaColCount(L.current,dn)},setRowCount:dn=>{L.current&&Ie.setAriaRowCount(L.current,dn)},setTopHeight:o,setBottomHeight:l,setStickyTopHeight:c,setStickyTopTop:h,setStickyTopWidth:p,setTopDisplay:m,setBottomDisplay:v,setColumnMovingCss:(dn,ya)=>P.current.addOrRemoveCssClass(dn,ya),updateLayoutClasses:D,setAlwaysVerticalScrollClass:w,setPinnedTopBottomOverflowY:b,setCellSelectableCss:(dn,ya)=>_(ya?dn:null),setBodyViewportWidth:dn=>{I.current&&(I.current.style.width=dn)},registerBodyViewportResizeListener:dn=>{if(I.current){const ya=n.observeResize(I.current,dn);G.current.push(()=>ya())}}},ma=t.createBean(new ki);N.current.push(ma),ma.setComp(Ct,L.current,I.current,O.current,H.current,M.current)},[]),X=T.useMemo(()=>ks("ag-root","ag-unselectable",A),[A]),ne=T.useMemo(()=>ks("ag-body-viewport",i,A,C,S),[i,A,C,S]),Se=T.useMemo(()=>ks("ag-body",A),[A]),xe=T.useMemo(()=>ks("ag-body-clipper",A),[A]),rt=T.useMemo(()=>ks("ag-floating-top",S),[S]),cn=T.useMemo(()=>ks("ag-sticky-top",S),[S]),Gi=T.useMemo(()=>ks("ag-floating-bottom",S),[S]),yo=T.useMemo(()=>({height:s,minHeight:s,display:g,overflowY:E}),[s,g,E]),fe=T.useMemo(()=>({height:u,top:d,width:f}),[u,d,f]),ve=T.useMemo(()=>({height:a,minHeight:a,display:y,overflowY:E}),[a,y,E]),Ee=De=>Q.createElement(mme,{name:De,key:`${De}-container`}),Y=({section:De,children:Oe,className:Ze,style:Ct})=>Q.createElement("div",{ref:De,className:Ze,role:"presentation",style:Ct},Oe.map(Ee));return Q.createElement("div",{ref:W,className:X,role:"treegrid"},Q.createElement(rme,null),Y({section:O,className:rt,style:yo,children:[$.TOP_LEFT,$.TOP_CENTER,$.TOP_RIGHT,$.TOP_FULL_WIDTH]}),Q.createElement("div",{className:Se,ref:F,role:"presentation"},Q.createElement("div",{className:xe,role:"presentation"},Y({section:I,className:ne,children:[$.LEFT,$.CENTER,$.RIGHT,$.FULL_WIDTH]}))),Y({section:M,className:cn,style:fe,children:[$.STICKY_TOP_LEFT,$.STICKY_TOP_CENTER,$.STICKY_TOP_RIGHT,$.STICKY_TOP_FULL_WIDTH]}),Y({section:H,className:Gi,style:ve,children:[$.BOTTOM_LEFT,$.BOTTOM_CENTER,$.BOTTOM_RIGHT,$.BOTTOM_FULL_WIDTH]}))},vme=T.memo(yme),Cme=(t,e)=>{const{children:n,eFocusableElement:i,onTabKeyDown:r,gridCtrl:s}=t,{context:o}=T.useContext(hr),a=T.useRef(null),l=T.useRef(null),u=T.useRef(),c=g=>{const m=g==null?void 0:parseInt(g,10).toString();[a,l].forEach(y=>{var v,C;m===void 0?(v=y.current)===null||v===void 0||v.removeAttribute("tabindex"):(C=y.current)===null||C===void 0||C.setAttribute("tabindex",m)})};T.useImperativeHandle(e,()=>({forceFocusOutOfContainer(){var g;(g=u.current)===null||g===void 0||g.forceFocusOutOfContainer()}}));const d=T.useCallback(()=>{if(!a.current&&!l.current){o.destroyBean(u.current),u.current=null;return}if(a.current&&l.current){const g={setTabIndex:c};u.current=o.createBean(new $_({comp:g,eTopGuard:a.current,eBottomGuard:l.current,eFocusableElement:i,onTabKeyDown:r,focusInnerElement:m=>s.focusInnerElement(m)}))}},[]),h=T.useCallback(g=>{a.current=g,d()},[d]),f=T.useCallback(g=>{l.current=g,d()},[d]),p=g=>{const m=g==="top"?eu.TAB_GUARD_TOP:eu.TAB_GUARD_BOTTOM;return Q.createElement("div",{className:`${eu.TAB_GUARD} ${m}`,role:"presentation",ref:g==="top"?h:f})};return Q.createElement(Q.Fragment,null,p("top"),n,p("bottom"))},wme=T.forwardRef(Cme),Sme=T.memo(wme),Eme=({context:t})=>{const[e,n]=T.useState(""),[i,r]=T.useState(""),[s,o]=T.useState(""),[a,l]=T.useState(null),[u,c]=T.useState(null),[d,h]=T.useState(!1),[f,p]=T.useState(),g=T.useRef(null),m=T.useRef(null),y=T.useRef(),[v,C]=T.useState(null),w=T.useRef(()=>{}),E=T.useCallback(()=>{},[]),b=T.useMemo(()=>t.isDestroyed()?null:t.getBean("beans"),[t]);Qd(" AG Grid ",m);const S=T.useCallback(L=>{if(m.current=L,!m.current){t.destroyBean(g.current),g.current=null;return}if(t.isDestroyed())return;g.current=t.createBean(new pd);const O=g.current;w.current=O.focusInnerElement.bind(O);const M={destroyGridUi:()=>{},setRtlClass:n,addOrRemoveKeyboardFocusClass:F=>r(F?Xt.AG_KEYBOARD_FOCUS:""),forceFocusOutOfContainer:()=>{var F;(F=y.current)===null||F===void 0||F.forceFocusOutOfContainer()},updateLayoutClasses:o,getFocusableContainers:()=>{var F,I;const H=[],N=(F=m.current)===null||F===void 0?void 0:F.querySelector(".ag-root"),G=(I=m.current)===null||I===void 0?void 0:I.querySelector(".ag-side-bar:not(.ag-hidden)");return N&&H.push(N),G&&H.push(G),H},setCursor:l,setUserSelect:c};O.setComp(M,m.current,m.current),h(!0)},[]);T.useEffect(()=>{if(!f||!b||!g.current||!v||!m.current)return;const L=g.current,O=[],{agStackComponentsRegistry:M}=b,F=M.getComponentClass("AG-GRID-HEADER-DROP-ZONES"),I=M.getComponentClass("AG-SIDE-BAR"),H=M.getComponentClass("AG-STATUS-BAR"),N=M.getComponentClass("AG-WATERMARK"),G=M.getComponentClass("AG-PAGINATION"),W=[],X=m.current;if(L.showDropZones()&&F){const ne=t.createBean(new F),Se=ne.getGui();X.insertAdjacentElement("afterbegin",Se),W.push(Se),O.push(ne)}if(L.showSideBar()&&I){const ne=t.createBean(new I),Se=ne.getGui(),xe=v.querySelector(".ag-tab-guard-bottom");xe&&(xe.insertAdjacentElement("beforebegin",Se),W.push(Se)),O.push(ne)}if(L.showStatusBar()&&H){const ne=t.createBean(new H),Se=ne.getGui();X.insertAdjacentElement("beforeend",Se),W.push(Se),O.push(ne)}if(G){const ne=t.createBean(new G),Se=ne.getGui();X.insertAdjacentElement("beforeend",Se),W.push(Se),O.push(ne)}if(L.showWatermark()&&N){const ne=t.createBean(new N),Se=ne.getGui();X.insertAdjacentElement("beforeend",Se),W.push(Se),O.push(ne)}return()=>{t.destroyBeans(O),W.forEach(ne=>{ne.parentElement&&ne.parentElement.removeChild(ne)})}},[f,v,b]);const _=T.useMemo(()=>ks("ag-root-wrapper",e,i,s),[e,i,s]),A=T.useMemo(()=>ks("ag-root-wrapper-body","ag-focus-managed",s),[s]),D=T.useMemo(()=>({userSelect:u??"",WebkitUserSelect:u??"",cursor:a??""}),[u,a]),P=T.useCallback(L=>{y.current=L,p(L!==null)},[]);return Q.createElement("div",{ref:S,className:_,style:D,role:"presentation"},Q.createElement("div",{className:A,ref:C,role:"presentation"},d&&v&&b&&Q.createElement(hr.Provider,{value:b},Q.createElement(Sme,{ref:P,eFocusableElement:v,onTabKeyDown:E,gridCtrl:g.current},Q.createElement(vme,null)))))},bme=T.memo(Eme),cK=t=>{var e,n;const i=T.useRef(null),r=T.useRef(null),s=T.useRef(null),o=T.useRef([]),a=T.useRef([]),l=T.useRef(t),u=T.useRef(!1),[c,d]=T.useState(void 0),h=T.useCallback(y=>{y.rowDataChangeDetectionStrategy&&Ie.doOnce(()=>console.warn("AG Grid: Since v29 rowDataChangeDetectionStrategy has been deprecated. Row data property changes will be compared by reference via triple equals ===. See https://ag-grid.com/react-data-grid/react-hooks/"),"rowDataChangeDetectionStrategy_Deprecation")},[]),[,f]=T.useState(0),p=T.useCallback(y=>{if(r.current=y,!r.current){o.current.forEach(S=>S()),o.current.length=0;return}const v=t.modules||[];s.current||(s.current=new lR(()=>f(S=>S+1),t.componentWrappingElement,t.maxComponentCreationTimeMs),o.current.push(()=>{var S;(S=s.current)===null||S===void 0||S.destroy(),s.current=null}));const C={providedBeanInstances:{frameworkComponentWrapper:new xme(s.current)},modules:v,frameworkOverrides:new dK(!0)};i.current=t.gridOptions||{},i.current=Fe.copyAttributesToGridOptions(i.current,t),h(t);const w=S=>{d(S),o.current.push(()=>{S.destroy()}),S.getBean(wg.NAME).whenReady(()=>{if(!S.isDestroyed()&&i.current){const A=i.current.api;A&&t.setGridApi&&t.setGridApi(A,i.current.columnApi)}})},E=S=>{S.getBean(wg.NAME).whenReady(()=>{a.current.forEach(A=>A()),a.current.length=0,u.current=!0})};new sq().create(r.current,i.current,w,E,C)},[]),g=T.useMemo(()=>Object.assign({height:"100%"},t.containerStyle||{}),[t.containerStyle]),m=T.useCallback(y=>{u.current?y():a.current.push(y)},[]);return T.useEffect(()=>{const y={};_me(l.current,t,y),l.current=t,m(()=>{var v;!((v=i.current)===null||v===void 0)&&v.api&&Fe.processOnChange(y,i.current.api)})},[t]),Q.createElement("div",{style:g,className:t.className,ref:p},c&&!c.isDestroyed()?Q.createElement(bme,{context:c}):null,(n=(e=s.current)===null||e===void 0?void 0:e.getPortals())!==null&&n!==void 0?n:null)};let xme=class extends oq{constructor(e){super(),this.parent=e}createWrapper(e,n){return new lK(e,this.parent,n)}};function _me(t,e,n){const i=!!e.debug;Object.keys(e).forEach(r=>{Fe.ALL_PROPERTIES_SET.has(r)&&t[r]!==e[r]&&(i&&console.log(` agGridReact: [${r}] property changed`),n[r]={previousValue:t[r],currentValue:e[r]})}),Fe.EVENT_CALLBACKS.forEach(r=>{t[r]!==e[r]&&(i&&console.log(`agGridReact: [${r}] event callback changed`),n[r]={previousValue:t[r],currentValue:e[r]})})}const Rme=(t,e)=>{const{ctrlsFactory:n,context:i,gridOptionsService:r,resizeObserverService:s,clientSideRowModel:o,serverSideRowModel:a}=T.useContext(hr),[l,u]=T.useState(()=>new Qi),[c,d]=T.useState(()=>new Qi),[h,f]=T.useState(),[p,g]=T.useState(),m=T.useRef(),y=T.useRef(null),v=T.useRef(),C=T.useMemo(()=>oe.__getGridRegisteredModules(t.api.getGridId()),[t]),w=T.useMemo(()=>l.toString()+" ag-details-row",[l]),E=T.useMemo(()=>c.toString()+" ag-details-grid",[c]);e&&T.useImperativeHandle(e,()=>({refresh(){var _,A;return(A=(_=m.current)===null||_===void 0?void 0:_.refresh())!==null&&A!==void 0?A:!1}})),t.template&&Ie.doOnce(()=>console.warn("AG Grid: detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/"),"React_detailCellRenderer.template");const b=T.useCallback(_=>{if(y.current=_,!y.current){i.destroyBean(m.current),v.current&&v.current();return}const A={addOrRemoveCssClass:(P,L)=>u(O=>O.setClass(P,L)),addOrRemoveDetailGridCssClass:(P,L)=>d(O=>O.setClass(P,L)),setDetailGrid:P=>f(P),setRowData:P=>g(P),getGui:()=>y.current},D=n.getInstance("detailCellRenderer");if(D&&(i.createBean(D),D.init(A,t),m.current=D,r.is("detailRowAutoHeight"))){const P=()=>{if(y.current==null)return;const L=y.current.clientHeight;L!=null&&L>0&&setTimeout(()=>{t.node.setRowHeight(L),o?o.onRowHeightChanged():a&&a.onRowHeightChanged()},0)};v.current=s.observeResize(y.current,P),P()}},[]),S=T.useCallback((_,A)=>{var D;(D=m.current)===null||D===void 0||D.registerDetailWithMaster(_,A)},[]);return Q.createElement("div",{className:w,ref:b},h&&Q.createElement(cK,Object.assign({className:E},h,{modules:C,rowData:p,setGridApi:S})))},Tme=T.forwardRef(Rme);class dK extends QY{constructor(e){super(),this.frameworkComponents={agGroupCellRenderer:_P,agGroupRowRenderer:_P,agDetailCellRenderer:Tme},this.reactUi=e,this.renderingEngine=e?"react":"vanilla"}frameworkComponent(e){if(this.reactUi)return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const n=e.prototype;return!(n&&"getGui"in n)}}class Eg extends T.Component{constructor(e){super(e),this.props=e,this.api=null,this.destroyed=!1,this.SYNCHRONOUS_CHANGE_PROPERTIES=["context"],this.portalManager=new aR(this,e.componentWrappingElement,e.maxComponentCreationTimeMs)}render(){return Q.createElement("div",{style:this.createStyleForDiv(),className:this.props.className,ref:e=>{this.eGridDiv=e}},this.portalManager.getPortals())}createStyleForDiv(){return Object.assign({height:"100%"},this.props.containerStyle||{})}componentDidMount(){const e=this.props.modules||[],n={providedBeanInstances:{agGridReact:this,frameworkComponentWrapper:new Ame(this,this.portalManager)},modules:e,frameworkOverrides:new dK(!1)},i=this.props.gridOptions||{};this.gridOptions=Fe.copyAttributesToGridOptions(i,this.props),this.checkForDeprecations(this.props),new Dfe(this.eGridDiv,this.gridOptions,n),this.api=this.gridOptions.api,this.columnApi=this.gridOptions.columnApi,this.props.setGridApi(this.api,this.columnApi)}checkForDeprecations(e){e.rowDataChangeDetectionStrategy&&Ie.doOnce(()=>console.warn("AG Grid: Since v29 rowDataChangeDetectionStrategy has been deprecated. Row data property changes will be compared by reference via triple equals ===. See https://ag-grid.com/react-data-grid/react-hooks/"),"rowDataChangeDetectionStrategy_Deprecation")}shouldComponentUpdate(e){return this.processPropsChanges(this.props,e),!1}componentDidUpdate(e){this.processPropsChanges(e,this.props)}processPropsChanges(e,n){const i={};this.extractGridPropertyChanges(e,n,i),this.processSynchronousChanges(i),this.processAsynchronousChanges(i)}extractGridPropertyChanges(e,n,i){const r=!!n.debug;Object.keys(n).forEach(s=>{Fe.ALL_PROPERTIES_SET.has(s)&&e[s]!==n[s]&&(r&&console.log(`agGridReact: [${s}] property changed`),i[s]={previousValue:e[s],currentValue:n[s]})}),Fe.EVENT_CALLBACKS.forEach(s=>{e[s]!==n[s]&&(r&&console.log(`agGridReact: [${s}] event callback changed`),i[s]={previousValue:e[s],currentValue:n[s]})})}componentWillUnmount(){this.api&&(this.api.destroy(),this.api=null),this.destroyed=!0,this.portalManager.destroy()}isDisableStaticMarkup(){return this.props.disableStaticMarkup===!0}isLegacyComponentRendering(){return this.props.legacyComponentRendering===!0}processSynchronousChanges(e){const n=Object.assign({},e);if(Object.keys(n).length>0){const i={};this.SYNCHRONOUS_CHANGE_PROPERTIES.forEach(r=>{n[r]&&(i[r]=n[r],delete n[r])}),Object.keys(i).length>0&&this.api&&Fe.processOnChange(i,this.api)}return n}processAsynchronousChanges(e){Object.keys(e).length>0&&window.setTimeout(()=>{this.api&&Fe.processOnChange(e,this.api)})}}Eg.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3;Eg.defaultProps={legacyComponentRendering:!1,disableStaticMarkup:!1,maxComponentCreationTimeMs:Eg.MAX_COMPONENT_CREATION_TIME_IN_MS};Eg.propTypes={gridOptions:el.object};Pf(Fe.EVENT_CALLBACKS,el.func);Pf(Fe.BOOLEAN_PROPERTIES,el.bool);Pf(Fe.STRING_PROPERTIES,el.string);Pf(Fe.OBJECT_PROPERTIES,el.object);Pf(Fe.ARRAY_PROPERTIES,el.array);Pf(Fe.NUMBER_PROPERTIES,el.number);Pf(Fe.FUNCTION_PROPERTIES,el.func);function Pf(t,e){t.forEach(n=>{Eg[n]=e})}class Ame extends oq{constructor(e,n){super(),this.agGridReact=e,this.portalManager=n}createWrapper(e,n){return this.agGridReact.isLegacyComponentRendering()?new oR(e,this.agGridReact,this.portalManager,n):new lK(e,this.portalManager,n)}}class Dme extends T.Component{constructor(){super(...arguments),this.setGridApi=(e,n)=>{this.api=e,this.columnApi=n}}render(){return this.props.suppressReactUi?Q.createElement(Eg,Object.assign({},this.props,{setGridApi:this.setGridApi})):Q.createElement(cK,Object.assign({},this.props,{setGridApi:this.setGridApi}))}}var DH;(function(t){t.IdentityCheck="IdentityCheck",t.DeepValueCheck="DeepValueCheck",t.NoCheck="NoCheck"})(DH||(DH={}));class lc{constructor(e,n,i,r,s,o){this.nextId=0,this.allNodesMap={},this.rootNode=e,this.gridOptionsService=n,this.eventService=i,this.columnModel=r,this.beans=o,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=lc.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}postConstruct(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingTreeData=this.gridOptionsService.isTreeData(),this.doingMasterDetail=this.gridOptionsService.isMasterDetail()}getCopyOfNodesMap(){return Ie.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.dispatchRowDataUpdateStartedEvent(e);const n=this.rootNode,i=this.rootNode.sibling;n.childrenAfterFilter=null,n.childrenAfterGroup=null,n.childrenAfterAggFilter=null,n.childrenAfterSort=null,n.childrenMapped=null,n.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?n.allLeafChildren=e.map(r=>this.createNode(r,this.rootNode,lc.TOP_LEVEL)):(n.allLeafChildren=[],n.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=n.childrenAfterFilter,i.childrenAfterGroup=n.childrenAfterGroup,i.childrenAfterAggFilter=n.childrenAfterAggFilter,i.childrenAfterSort=n.childrenAfterSort,i.childrenMapped=n.childrenMapped,i.allLeafChildren=n.allLeafChildren)}updateRowData(e,n){this.dispatchRowDataUpdateStartedEvent(e.add);const i={remove:[],update:[],add:[]},r=[];return this.executeRemove(e,i,r),this.executeUpdate(e,i,r),this.executeAdd(e,i),this.updateSelection(r,"rowDataChanged"),n&&Ie.sortRowNodesByOrder(this.rootNode.allLeafChildren,n),i}dispatchRowDataUpdateStartedEvent(e){const n={type:x.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e!=null&&e.length?e[0]:null};this.eventService.dispatchEvent(n)}updateSelection(e,n){const i=e.length>0;if(i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:n}),this.selectionService.updateGroupsFromChildrenSelections(n),i){const r={type:x.EVENT_SELECTION_CHANGED,source:n};this.eventService.dispatchEvent(r)}}executeAdd(e,n){var i;const{add:r,addIndex:s}=e;if(Ie.missingOrEmpty(r))return;const o=r.map(a=>this.createNode(a,this.rootNode,lc.TOP_LEVEL));if(typeof s=="number"&&s>=0){const{allLeafChildren:a}=this.rootNode,l=a.length;let u=s;if(this.doingTreeData&&s>0&&l>0){for(let h=0;h<l;h++)if(((i=a[h])===null||i===void 0?void 0:i.rowIndex)==s-1){u=h+1;break}}const c=a.slice(0,u),d=a.slice(u,a.length);this.rootNode.allLeafChildren=[...c,...o,...d]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...o];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),n.add=o}executeRemove(e,n,i){const{remove:r}=e;if(Ie.missingOrEmpty(r))return;const s={};r.forEach(o=>{const a=this.lookupRowNode(o);a&&(a.isSelected()&&i.push(a),a.clearRowTopAndRowIndex(),s[a.id]=!0,delete this.allNodesMap[a.id],n.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(o=>!s[o.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,n,i){const{update:r}=e;Ie.missingOrEmpty(r)||r.forEach(s=>{const o=this.lookupRowNode(s);o&&(o.updateData(s),!o.selectable&&o.isSelected()&&i.push(o),this.setMasterForRow(o,s,lc.TOP_LEVEL,!1),n.update.push(o))})}lookupRowNode(e){const n=this.gridOptionsService.getCallback("getRowId");let i;if(n){const r=n({data:e,level:0});if(i=this.allNodesMap[r],!i)return console.error(`AG Grid: could not find row id=${r}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren.find(r=>r.data===e),!i)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,n,i){const r=new re(this.beans);return r.group=!1,this.setMasterForRow(r,e,i,!0),n&&!this.suppressParentsInRowNodes&&(r.parent=n),r.level=i,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn(`AG Grid: duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,n,i,r){if(this.doingTreeData)e.setMaster(!1),r&&(e.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?e.setMaster(this.isRowMasterFunc(n)):e.setMaster(!0):e.setMaster(!1),r){const s=this.columnModel.getRowGroupColumns(),o=s?s.length:0,a=i+o;e.expanded=e.master?this.isExpanded(a):!1}}isExpanded(e){const n=this.gridOptionsService.getNum("groupDefaultExpanded");return n===-1?!0:e<n}}lc.TOP_LEVEL=0;lc.ROOT_NODE_ID="ROOT_NODE_ID";var qr=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},Aa;(function(t){t[t.Normal=0]="Normal",t[t.AfterFilter=1]="AfterFilter",t[t.AfterFilterAndSort=2]="AfterFilterAndSort",t[t.PivotNodes=3]="PivotNodes"})(Aa||(Aa={}));let Ni=class extends q{constructor(){super(...arguments),this.onRowHeightChanged_debounced=Ie.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[]}init(){const e=this.refreshModel.bind(this,{step:dt.EVERYTHING}),n=!this.gridOptionsService.is("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:dt.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:n});this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:dt.PIVOT})),this.addManagedListener(this.eventService,x.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this));const r=this.refreshModel.bind(this,{step:dt.MAP,keepRenderedRows:!0,animate:n});this.addManagedPropertyListener("groupRemoveSingleChildren",r),this.addManagedPropertyListener("groupRemoveLowestSingleChildren",r),this.rootNode=new re(this.beans),this.nodeManager=new lc(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)}start(){const e=this.gridOptionsService.get("rowData");e&&this.setRowData(e)}ensureRowHeightsValid(e,n,i,r){let s,o=!1;do{s=!1;const a=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(n),u=Math.max(a,i),c=Math.min(l,r);for(let d=u;d<=c;d++){const h=this.getRow(d);if(h.rowHeightEstimated){const f=this.gridOptionsService.getRowHeightForNode(h);h.setRowHeight(f.height),s=!0,o=!0}}s&&this.setRowTopAndRowIndex()}while(s);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let n=0;const i=new Set,r=this.gridOptionsService.isDomLayout("normal");for(let s=0;s<this.rowsToDisplay.length;s++){const o=this.rowsToDisplay[s];if(o.id!=null&&i.add(o.id),o.rowHeight==null){const a=this.gridOptionsService.getRowHeightForNode(o,r,e);o.setRowHeight(a.height,a.estimated)}o.setRowTop(n),o.setRowIndex(s),n+=o.rowHeight}return i}clearRowTopAndRowIndex(e,n){const i=e.isActive(),r=o=>{o&&o.id!=null&&!n.has(o.id)&&o.clearRowTopAndRowIndex()},s=o=>{if(r(o),r(o.detailNode),r(o.sibling),o.hasChildren()&&o.childrenAfterGroup){const a=o.level==-1;i&&!a&&!o.expanded||o.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,n,i=0){const r=this.getRowIndexAtPixel(n),s=this.getRow(r),o=!this.gridOptionsService.is("suppressAnimationFrame");return s===e[0]?!1:(e.forEach(a=>{Ie.removeFromArray(this.rootNode.allLeafChildren,a)}),e.forEach((a,l)=>{Ie.insertIntoArray(this.rootNode.allLeafChildren,a,Math.max(r+i,0)+l)}),this.refreshModel({step:dt.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),!0)}highlightRowAtPixel(e,n){const i=n!=null?this.getRowIndexAtPixel(n):null,r=i!=null?this.getRow(i):null;if(!r||!e||r===e||n==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const s=this.getHighlightPosition(n,r);this.lastHighlightedRow&&this.lastHighlightedRow!==r&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),r.setHighlighted(s),this.lastHighlightedRow=r}getHighlightPosition(e,n){if(!n){const s=this.getRowIndexAtPixel(e);if(n=this.getRow(s||0),!n)return Zl.Below}const{rowTop:i,rowHeight:r}=n;return e-i<r/2?Zl.Above:Zl.Below}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const n=this.rootNode.childrenAfterAggFilter;return n?n.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.is("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(Ie.missing(this.rowsToDisplay))return null;const n=this.rowsToDisplay[e];return n?{rowTop:n.rowTop,rowHeight:n.rowHeight}:null}onRowGroupOpened(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:dt.MAP,keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const n=this.gridOptionsService.isAnimateRows(),r=e.columns.length===0||e.columns.some(s=>s.isPrimary())?dt.FILTER:dt.FILTER_AGGREGATES;this.refreshModel({step:r,keepRenderedRows:!0,animate:n})}onSortChanged(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:dt.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:dt.PIVOT}):this.refreshModel({step:dt.AGGREGATE})}createChangePath(e){const n=Ie.missingOrEmpty(e),i=new BL(!1,this.rootNode);return(n||this.gridOptionsService.isTreeData())&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const n=e.rowNodeTransactions.filter(r=>r.add!=null&&r.add.length>0||r.remove!=null&&r.remove.length>0);return n==null||n.length==0}buildRefreshModelParams(e){let n=dt.EVERYTHING;const i={everything:dt.EVERYTHING,group:dt.EVERYTHING,filter:dt.FILTER,map:dt.MAP,aggregate:dt.AGGREGATE,sort:dt.SORT,pivot:dt.PIVOT};if(Ie.exists(e)&&(n=i[e]),Ie.missing(n)){console.error(`AG Grid: invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const r=!this.gridOptionsService.is("suppressAnimationFrame");return{step:n,keepRenderedRows:!0,keepEditingRows:!0,animate:r}}refreshModel(e){let n=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!n||this.isSuppressModelUpdateAfterUpdateTransaction(n))return;const i=this.createChangePath(n.rowNodeTransactions);switch(n.step){case dt.EVERYTHING:this.doRowGrouping(n.groupState,n.rowNodeTransactions,n.rowNodeOrder,i,!!n.afterColumnsChanged);case dt.FILTER:this.doFilter(i);case dt.PIVOT:this.doPivot(i);case dt.AGGREGATE:this.doAggregate(i);case dt.FILTER_AGGREGATES:this.doFilterAggregates(i);case dt.SORT:this.doSort(n.rowNodeTransactions,i);case dt.MAP:this.doRowsToDisplay()}const r=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,r);const s={type:x.EVENT_MODEL_UPDATED,animate:n.animate,keepRenderedRows:n.keepRenderedRows,newData:n.newData,newPage:!1,keepUndoRedoStack:n.keepUndoRedoStack};this.eventService.dispatchEvent(s)}isEmpty(){const e=Ie.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Ie.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return Ie.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,n){let i=!n,r=!1;const s=[],o=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(a=>{if(r)return;if(i&&(a===n||a===e)&&(r=!0,a.group&&o)){s.push(...a.allLeafChildren);return}if(!i){if(a!==n&&a!==e)return;i=!0}if(!a.group||!o){s.push(a);return}}),s}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let n=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(Ie.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,o=-1;for(;;){const a=Math.floor((n+i)/2),l=this.rowsToDisplay[a];if(this.isRowInPixel(l,e)||(l.rowTop<e?n=a+1:l.rowTop>e&&(i=a-1),s===n&&o===i))return a;s=n,o=i}}isRowInPixel(e,n){const i=e.rowTop,r=e.rowTop+e.rowHeight;return i<=n&&r>n}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((n,i)=>e(n,i))}forEachNode(e,n=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:Aa.Normal,index:0,includeFooterNodes:n})}forEachNodeAfterFilter(e,n=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:Aa.AfterFilter,index:0,includeFooterNodes:n})}forEachNodeAfterFilterAndSort(e,n=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:Aa.AfterFilterAndSort,index:0,includeFooterNodes:n})}forEachPivotNode(e,n=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:Aa.PivotNodes,index:0,includeFooterNodes:n})}recursivelyWalkNodesAndCallback(e){var n;const{nodes:i,callback:r,recursionType:s,includeFooterNodes:o}=e;let{index:a}=e;const l=i[0];o&&(!((n=l==null?void 0:l.parent)===null||n===void 0)&&n.sibling)&&i.push(l.parent.sibling);for(let u=0;u<i.length;u++){const c=i[u];if(r(c,a++),c.hasChildren()&&!c.footer){let d=null;switch(s){case Aa.Normal:d=c.childrenAfterGroup;break;case Aa.AfterFilter:d=c.childrenAfterAggFilter;break;case Aa.AfterFilterAndSort:d=c.childrenAfterSort;break;case Aa.PivotNodes:d=c.leafGroup?null:c.childrenAfterSort;break}d&&(a=this.recursivelyWalkNodesAndCallback({nodes:[...d],callback:r,recursionType:s,index:a,includeFooterNodes:o}))}}return a}doAggregate(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const n=this.gridOptionsService.isTreeData(),i=this.columnModel.isPivotActive(),r=a=>{a&&a.forEach(l=>{const u=()=>{l.expanded=e,r(l.childrenAfterGroup)};if(n){Ie.exists(l.childrenAfterGroup)&&u();return}if(i){!l.leafGroup&&u();return}l.group&&u()})};this.rootNode&&r(this.rootNode.childrenAfterGroup),this.refreshModel({step:dt.MAP});const s=e?"expandAll":"collapseAll",o={type:x.EVENT_EXPAND_COLLAPSE_ALL,source:s};this.eventService.dispatchEvent(o)}doSort(e,n){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:n})}doRowGrouping(e,n,i,r,s){if(this.groupStage){if(n?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:n,rowNodeOrder:i,changedPath:r}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:r,afterColumnsChanged:s}),this.restoreGroupState(e)),this.gridOptionsService.is("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",r)){const a={type:x.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(a)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()}restoreGroupState(e){e&&Ie.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(n,i)=>{typeof e[i]=="boolean"&&(n.expanded=e[i])})}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})}getGroupState(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;const e={};return Ie.traverseNodesWithKey(this.rootNode.childrenAfterGroup,(n,i)=>e[i]=n.expanded),e}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(re.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(r=>{r.id===e&&(i=r)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){const n=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");const i={type:x.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:dt.EVERYTHING,groupState:n,newData:!0})}batchUpdateRowData(e,n){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:n})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],n=[];let i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(r=>{const s=this.nodeManager.updateRowData(r.rowDataTransaction,void 0);n.push(s),r.callback&&e.push(r.callback.bind(null,s)),typeof r.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(n,void 0,i),e.length>0&&window.setTimeout(()=>{e.forEach(r=>r())},0),n.length>0){const r={type:x.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n};this.eventService.dispatchEvent(r)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,n){this.valueCache.onDataChanged();const i=this.nodeManager.updateRowData(e,n),r=typeof e.addIndex=="number";return this.commonUpdateRowData([i],n,r),i}createRowNodeOrder(){if(this.gridOptionsService.is("suppressMaintainUnsortedOrder"))return;const n={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){const r=this.rootNode.allLeafChildren[i];n[r.id]=i}return n}commonUpdateRowData(e,n,i){const r=!this.gridOptionsService.is("suppressAnimationFrame");i&&(n=this.createRowNodeOrder()),this.refreshModel({step:dt.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:n,keepRenderedRows:!0,keepEditingRows:!0,animate:r}),this.filterManager.onNewRowsLoaded("rowDataUpdated");const s={type:x.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(s)}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:dt.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(n=>{n.setRowHeight(n.rowHeight,!0);const i=n.detailNode;i&&i.setRowHeight(i.rowHeight,!0),n.sibling&&n.sibling.setRowHeight(n.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}};qr([R("columnModel")],Ni.prototype,"columnModel",void 0);qr([R("selectionService")],Ni.prototype,"selectionService",void 0);qr([R("filterManager")],Ni.prototype,"filterManager",void 0);qr([R("valueCache")],Ni.prototype,"valueCache",void 0);qr([R("beans")],Ni.prototype,"beans",void 0);qr([R("filterStage")],Ni.prototype,"filterStage",void 0);qr([R("sortStage")],Ni.prototype,"sortStage",void 0);qr([R("flattenStage")],Ni.prototype,"flattenStage",void 0);qr([lt("groupStage")],Ni.prototype,"groupStage",void 0);qr([lt("aggregationStage")],Ni.prototype,"aggregationStage",void 0);qr([lt("pivotStage")],Ni.prototype,"pivotStage",void 0);qr([lt("filterAggregatesStage")],Ni.prototype,"filterAggregatesStage",void 0);qr([Z],Ni.prototype,"init",null);Ni=qr([me("rowModel")],Ni);var hK=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let cb=class extends q{execute(e){const{changedPath:n}=e;this.filterService.filter(n)}};hK([R("filterService")],cb.prototype,"filterService",void 0);cb=hK([me("filterStage")],cb);var cR=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let bg=class extends q{execute(e){const n=this.sortController.getSortOptions(),i=Ie.exists(n)&&n.length>0,r=i&&Ie.exists(e.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),s=n.some(o=>!!this.columnModel.getGroupDisplayColumnForGroup(o.column.getId()));this.sortService.sort(n,i,r,e.rowNodeTransactions,e.changedPath,s)}};cR([R("sortService")],bg.prototype,"sortService",void 0);cR([R("sortController")],bg.prototype,"sortController",void 0);cR([R("columnModel")],bg.prototype,"columnModel",void 0);bg=cR([me("sortStage")],bg);var SI=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let Wv=class extends q{execute(e){const n=e.rowNode,i=[],r={value:0},s=this.columnModel.isPivotMode(),o=s&&n.leafGroup,a=o?[n]:n.childrenAfterSort;this.recursivelyAddToRowsToDisplay(a,i,r,s,0);const l=i.length>0;return!o&&l&&this.gridOptionsService.is("groupIncludeTotalFooter")&&(n.createFooter(),this.addRowNodeToRowsToDisplay(n.sibling,i,r,0)),i}recursivelyAddToRowsToDisplay(e,n,i,r,s){if(Ie.missingOrEmpty(e))return;const o=this.gridOptionsService.is("groupHideOpenParents"),a=this.gridOptionsService.is("groupRemoveSingleChildren"),l=!a&&this.gridOptionsService.is("groupRemoveLowestSingleChildren");for(let u=0;u<e.length;u++){const c=e[u],d=c.hasChildren(),h=r&&!d,f=a&&d&&c.childrenAfterGroup.length===1,p=l&&d&&c.leafGroup&&c.childrenAfterGroup.length===1,g=r&&c.leafGroup,m=o&&c.expanded&&!c.master&&!g;if(!h&&!m&&!f&&!p&&this.addRowNodeToRowsToDisplay(c,n,i,s),!(r&&c.leafGroup)){if(d){const v=f||p;if(c.expanded||v){const C=v?s:s+1;this.recursivelyAddToRowsToDisplay(c.childrenAfterSort,n,i,r,C),this.gridOptionsService.is("groupIncludeFooter")&&this.addRowNodeToRowsToDisplay(c.sibling,n,i,C)}}else if(c.master&&c.expanded){const v=this.createDetailNode(c);this.addRowNodeToRowsToDisplay(v,n,i,s)}}}}addRowNodeToRowsToDisplay(e,n,i,r){const s=this.gridOptionsService.isGroupMultiAutoColumn();n.push(e),e.setUiLevel(s?0:r)}createDetailNode(e){if(Ie.exists(e.detailNode))return e.detailNode;const n=new re(this.beans);return n.detail=!0,n.selectable=!1,n.parent=e,Ie.exists(e.id)&&(n.id="detail_"+e.id),n.data=e.data,n.level=e.level+1,e.detailNode=n,n}};SI([R("columnModel")],Wv.prototype,"columnModel",void 0);SI([R("beans")],Wv.prototype,"beans",void 0);Wv=SI([me("flattenStage")],Wv);var dR=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let xg=class extends q{init(){this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")}sort(e,n,i,r,s,o){const a=this.gridOptionsService.is("groupMaintainOrder"),l=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive());let u={};i&&r&&(u=this.calculateDirtyNodes(r));const c=this.columnModel.isPivotMode(),d=h=>{this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);const f=c&&h.leafGroup;if(a&&l&&!h.leafGroup&&!o){const g=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort){const m={};h.childrenAfterSort.forEach((y,v)=>{m[y.id]=v}),g.sort((y,v)=>{var C,w;return((C=m[y.id])!==null&&C!==void 0?C:0)-((w=m[v.id])!==null&&w!==void 0?w:0)})}h.childrenAfterSort=g}else!n||f?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):i?h.childrenAfterSort=this.doDeltaSort(h,u,s,e):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,e);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),this.postSortFunc){const g={nodes:h.childrenAfterSort};this.postSortFunc(g)}};s&&s.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){const n={},i=r=>{r&&r.forEach(s=>n[s.id]=!0)};return e&&e.forEach(r=>{i(r.add),i(r.update),i(r.remove)}),n}doDeltaSort(e,n,i,r){const s=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(s,r);const a={},l=[];s.forEach(h=>{n[h.id]||!i.canSkip(h)?l.push(h):a[h.id]=!0});const u=o.filter(h=>a[h.id]),c=(h,f)=>({currentPos:f,rowNode:h}),d=l.map(c).sort((h,f)=>this.rowNodeSorter.compareRowNodes(r,h,f));return this.mergeSortedArrays(r,d,u.map(c)).map(({rowNode:h})=>h)}mergeSortedArrays(e,n,i){const r=[];let s=0,o=0;for(;s<n.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,n[s],i[o])<0?r.push(n[s++]):r.push(i[o++]);for(;s<n.length;)r.push(n[s++]);for(;o<i.length;)r.push(i[o++]);return r}updateChildIndexes(e){if(Ie.missing(e.childrenAfterSort))return;const n=e.childrenAfterSort;for(let i=0;i<n.length;i++){const r=n[i],s=i===0,o=i===e.childrenAfterSort.length-1;r.setFirstChild(s),r.setLastChild(o),r.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gridOptionsService.is("groupHideOpenParents"))return;if(this.gridOptionsService.isTreeData()){const i="AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";return Ie.doOnce(()=>console.warn(i),"sortService.hideOpenParentsWithTreeData"),!1}const n=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(r=>{r.hasChildren()&&n(r)})};e&&e.executeFromRootNode(i=>n(i))}pullDownGroupDataForHideOpenParents(e,n){!this.gridOptionsService.is("groupHideOpenParents")||Ie.missing(e)||e.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(s=>{const o=s.getColDef().showRowGroup;if(typeof o!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const a=o,l=this.columnModel.getPrimaryColumn(a);if(l!==i.rowGroupColumn)if(n)i.setGroupValue(s.getId(),void 0);else{const c=i.getFirstChildOfFirstChild(l);c&&i.setGroupValue(s.getId(),c.key)}})})}};dR([R("columnModel")],xg.prototype,"columnModel",void 0);dR([R("rowNodeSorter")],xg.prototype,"rowNodeSorter",void 0);dR([Z],xg.prototype,"init",null);xg=dR([me("sortService")],xg);var fK=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let db=class extends q{filter(e){const n=this.filterManager.isChildFilterPresent();this.filterNodes(n,e)}filterNodes(e,n){const i=(r,s)=>{r.hasChildren()&&e&&!s?r.childrenAfterFilter=r.childrenAfterGroup.filter(o=>{const a=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,l=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return a||l}):r.childrenAfterFilter=r.childrenAfterGroup,r.sibling&&(r.sibling.childrenAfterFilter=r.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const r=(o,a)=>{if(o.childrenAfterGroup)for(let l=0;l<o.childrenAfterGroup.length;l++){const u=o.childrenAfterGroup[l],c=a||this.filterManager.doesRowPassFilter({rowNode:u});u.childrenAfterGroup?r(o.childrenAfterGroup[l],c):i(u,c)}i(o,a)},s=o=>r(o,!1);n.executeFromRootNode(s)}else{const r=s=>i(s,!1);n.forEachChangedNodeDepthFirst(r,!0)}}doingTreeDataFiltering(){return this.gridOptionsService.isTreeData()&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")}};fK([R("filterManager")],db.prototype,"filterManager",void 0);db=fK([me("filterService")],db);var hR=globalThis&&globalThis.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};let _g=class extends q{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel)}isActive(){const e=this.gridOptionsService.exists("getRowId");return this.gridOptionsService.is("resetRowDataOnUpdate")?!1:e}setRowData(e){const n=this.createTransactionForRowData(e);if(!n)return;const[i,r]=n;this.clientSideRowModel.updateRowData(i,r)}createTransactionForRowData(e){if(Ie.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const n=this.gridOptionsService.getCallback("getRowId");if(n==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const i={remove:[],update:[],add:[]},r=this.clientSideRowModel.getCopyOfNodesMap(),o=this.gridOptionsService.is("suppressMaintainUnsortedOrder")?void 0:{};return Ie.exists(e)&&e.forEach((a,l)=>{const u=n({data:a,level:0}),c=r[u];o&&(o[u]=l),c?(c.data!==a&&i.update.push(a),r[u]=void 0):i.add.push(a)}),Ie.iterateObject(r,(a,l)=>{l&&i.remove.push(l.data)}),[i,o]}};hR([R("rowModel")],_g.prototype,"rowModel",void 0);hR([R("rowRenderer")],_g.prototype,"rowRenderer",void 0);hR([Z],_g.prototype,"postConstruct",null);_g=hR([me("immutableService")],_g);const Ome="30.1.0",Pme={version:Ome,moduleName:pe.ClientSideRowModelModule,rowModel:"clientSide",beans:[Ni,cb,bg,Wv,xg,db,_g]};function Fme(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}var Mme=Fme;function Nme(t){return t!==t}var Lme=Nme;function Ime(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}var kme=Ime,Gme=Mme,$me=Lme,Hme=kme;function Wme(t,e,n){return e===e?Hme(t,e,n):Gme(t,$me,n)}var Vme=Wme,Bme=typeof ow=="object"&&ow&&ow.Object===Object&&ow,pK=Bme,zme=pK,Ume=typeof self=="object"&&self&&self.Object===Object&&self,jme=zme||Ume||Function("return this")(),Pm=jme,Yme=Pm,qme=Yme.Symbol,gK=qme,OH=gK,mK=Object.prototype,Kme=mK.hasOwnProperty,Xme=mK.toString,yy=OH?OH.toStringTag:void 0;function Qme(t){var e=Kme.call(t,yy),n=t[yy];try{t[yy]=void 0;var i=!0}catch{}var r=Xme.call(t);return i&&(e?t[yy]=n:delete t[yy]),r}var Jme=Qme,Zme=Object.prototype,eye=Zme.toString;function tye(t){return eye.call(t)}var nye=tye,PH=gK,iye=Jme,rye=nye,sye="[object Null]",oye="[object Undefined]",FH=PH?PH.toStringTag:void 0;function aye(t){return t==null?t===void 0?oye:sye:FH&&FH in Object(t)?iye(t):rye(t)}var Fm=aye;function lye(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var md=lye,uye=Fm,cye=md,dye="[object AsyncFunction]",hye="[object Function]",fye="[object GeneratorFunction]",pye="[object Proxy]";function gye(t){if(!cye(t))return!1;var e=uye(t);return e==hye||e==fye||e==dye||e==pye}var EI=gye,mye=9007199254740991;function yye(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=mye}var yK=yye,vye=EI,Cye=yK;function wye(t){return t!=null&&Cye(t.length)&&!vye(t)}var fC=wye,Sye=Array.isArray,bI=Sye;function Eye(t){return t!=null&&typeof t=="object"}var Ff=Eye,bye=Fm,xye=bI,_ye=Ff,Rye="[object String]";function Tye(t){return typeof t=="string"||!xye(t)&&_ye(t)&&bye(t)==Rye}var Aye=Tye,Dye=/\s/;function Oye(t){for(var e=t.length;e--&&Dye.test(t.charAt(e)););return e}var Pye=Oye,Fye=Pye,Mye=/^\s+/;function Nye(t){return t&&t.slice(0,Fye(t)+1).replace(Mye,"")}var Lye=Nye,Iye=Fm,kye=Ff,Gye="[object Symbol]";function $ye(t){return typeof t=="symbol"||kye(t)&&Iye(t)==Gye}var Hye=$ye,Wye=Lye,MH=md,Vye=Hye,NH=0/0,Bye=/^[-+]0x[0-9a-f]+$/i,zye=/^0b[01]+$/i,Uye=/^0o[0-7]+$/i,jye=parseInt;function Yye(t){if(typeof t=="number")return t;if(Vye(t))return NH;if(MH(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=MH(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Wye(t);var n=zye.test(t);return n||Uye.test(t)?jye(t.slice(2),n?2:8):Bye.test(t)?NH:+t}var qye=Yye,Kye=qye,LH=1/0,Xye=17976931348623157e292;function Qye(t){if(!t)return t===0?t:0;if(t=Kye(t),t===LH||t===-LH){var e=t<0?-1:1;return e*Xye}return t===t?t:0}var Jye=Qye,Zye=Jye;function e0e(t){var e=Zye(t),n=e%1;return e===e?n?e-n:e:0}var t0e=e0e;function n0e(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var i0e=n0e,r0e=i0e;function s0e(t,e){return r0e(e,function(n){return t[n]})}var o0e=s0e;function a0e(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var l0e=a0e,u0e=Fm,c0e=Ff,d0e="[object Arguments]";function h0e(t){return c0e(t)&&u0e(t)==d0e}var f0e=h0e,IH=f0e,p0e=Ff,vK=Object.prototype,g0e=vK.hasOwnProperty,m0e=vK.propertyIsEnumerable,y0e=IH(function(){return arguments}())?IH:function(t){return p0e(t)&&g0e.call(t,"callee")&&!m0e.call(t,"callee")},CK=y0e,hb={exports:{}};function v0e(){return!1}var C0e=v0e;hb.exports;(function(t,e){var n=Pm,i=C0e,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===r,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||i;t.exports=u})(hb,hb.exports);var wK=hb.exports,w0e=9007199254740991,S0e=/^(?:0|[1-9]\d*)$/;function E0e(t,e){var n=typeof t;return e=e??w0e,!!e&&(n=="number"||n!="symbol"&&S0e.test(t))&&t>-1&&t%1==0&&t<e}var SK=E0e,b0e=Fm,x0e=yK,_0e=Ff,R0e="[object Arguments]",T0e="[object Array]",A0e="[object Boolean]",D0e="[object Date]",O0e="[object Error]",P0e="[object Function]",F0e="[object Map]",M0e="[object Number]",N0e="[object Object]",L0e="[object RegExp]",I0e="[object Set]",k0e="[object String]",G0e="[object WeakMap]",$0e="[object ArrayBuffer]",H0e="[object DataView]",W0e="[object Float32Array]",V0e="[object Float64Array]",B0e="[object Int8Array]",z0e="[object Int16Array]",U0e="[object Int32Array]",j0e="[object Uint8Array]",Y0e="[object Uint8ClampedArray]",q0e="[object Uint16Array]",K0e="[object Uint32Array]",Ht={};Ht[W0e]=Ht[V0e]=Ht[B0e]=Ht[z0e]=Ht[U0e]=Ht[j0e]=Ht[Y0e]=Ht[q0e]=Ht[K0e]=!0;Ht[R0e]=Ht[T0e]=Ht[$0e]=Ht[A0e]=Ht[H0e]=Ht[D0e]=Ht[O0e]=Ht[P0e]=Ht[F0e]=Ht[M0e]=Ht[N0e]=Ht[L0e]=Ht[I0e]=Ht[k0e]=Ht[G0e]=!1;function X0e(t){return _0e(t)&&x0e(t.length)&&!!Ht[b0e(t)]}var Q0e=X0e;function J0e(t){return function(e){return t(e)}}var Z0e=J0e,fb={exports:{}};fb.exports;(function(t,e){var n=pK,i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===i,o=s&&n.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(fb,fb.exports);var eve=fb.exports,tve=Q0e,nve=Z0e,kH=eve,GH=kH&&kH.isTypedArray,ive=GH?nve(GH):tve,EK=ive,rve=l0e,sve=CK,ove=bI,ave=wK,lve=SK,uve=EK,cve=Object.prototype,dve=cve.hasOwnProperty;function hve(t,e){var n=ove(t),i=!n&&sve(t),r=!n&&!i&&ave(t),s=!n&&!i&&!r&&uve(t),o=n||i||r||s,a=o?rve(t.length,String):[],l=a.length;for(var u in t)(e||dve.call(t,u))&&!(o&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||lve(u,l)))&&a.push(u);return a}var bK=hve,fve=Object.prototype;function pve(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||fve;return t===n}var xI=pve;function gve(t,e){return function(n){return t(e(n))}}var xK=gve,mve=xK,yve=mve(Object.keys,Object),vve=yve,Cve=xI,wve=vve,Sve=Object.prototype,Eve=Sve.hasOwnProperty;function bve(t){if(!Cve(t))return wve(t);var e=[];for(var n in Object(t))Eve.call(t,n)&&n!="constructor"&&e.push(n);return e}var xve=bve,_ve=bK,Rve=xve,Tve=fC;function Ave(t){return Tve(t)?_ve(t):Rve(t)}var Dve=Ave,Ove=o0e,Pve=Dve;function Fve(t){return t==null?[]:Ove(t,Pve(t))}var Mve=Fve,Nve=Vme,Lve=fC,Ive=Aye,kve=t0e,Gve=Mve,$ve=Math.max;function Hve(t,e,n,i){t=Lve(t)?t:Gve(t),n=n&&!i?kve(n):0;var r=t.length;return n<0&&(n=$ve(r+n,0)),Ive(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Nve(t,e,n)>-1}var Wve=Hve;const Wt=pf(Wve),Vv="vlcb--random-values",Vve={Basic:{presets:!0,encoding:new Set(["x","y","theta","latitude","longitude","color"]),channelProperties:new Set(["field"]),else:!1},Advanced:{presets:!1}},Bve={Type:"type",Shape:"shape",Filled:"filled",Line:"line",Point:"point",Interpolate:"interpolate",Angle:"angle",Orient:"orient",Radius:"radius","Inner radius":"radius2",Size:"size",Opacity:"opacity",Tooltip:"tooltip"},zve={Text:"text",URL:"url",X:"x",Y:"y","Arc angle":"theta",Latitude:"latitude",Longitude:"longitude",Color:"color",Size:"size",Opacity:"opacity",Shape:"shape",Dash:"strokeDash",Angle:"angle","X 2":"x2","Y 2":"y2","Latitude 2":"latitude2","Longitude 2":"longitude2",Radius:"radius","Radius 2":"radius2","Arc angle 2":"theta2","X offset":"xOffset","Y offset":"yOffset",Facet:"facet",Column:"column",Row:"row"},Uve={Field:"field",Datum:"datum",Value:"value",Type:"type",Aggregate:"aggregate",Bin:"bin","Bin size":"binStep","Max bins":"maxBins",Scale:"scaleType",Palette:"scheme",Domain:"domain",Range:"range",Zero:"zero",Sort:"sort",Stack:"stack","Time unit":"timeUnit",Title:"title",Legend:"legend"},jve={type:{Point:"point",Line:"line",Area:"area",Bar:"bar",Arc:"arc","Box plot":"boxplot",Image:"image",Rect:"rect",Rule:"rule",Text:"text",Tick:"tick",Trail:"trail"},point:{Hide:null,Show:!0},interpolate:{Linear:"linear",Monotone:"monotone",Basis:"basis",Cardinal:"cardinal",Step:"step","Step after":"step-after","Step before":"step-before","Basis closed":"basis-closed","Basis open":"basis-open","Cardinal closed":"cardinal-closed","Cardinal open":"cardinal-open","Linear-closed":"linear-closed",Bundle:"bundle"},orient:{Vertical:null,Horizontal:"horizontal"},shape:{Circle:"circle",Square:"square",Cross:"cross",Diamond:"diamond",Stroke:"stroke",Arrow:"arrow",Wedge:"wedge",Triangle:"triangle"},filled:{Outlined:null,Filled:!0},tooltip:{Hidden:null,Visible:!0},line:{Hidden:null,Visible:!0}},Yve={type:{Auto:null,Nominal:"nominal",Ordinal:"ordinal",Quantitative:"quantitative",Temporal:"temporal"},aggregate:{Off:null,Count:"count",Sum:"sum",Mean:"mean","Std. deviation":"stdev",Variance:"variance",Min:"min",Max:"max","1st quartile":"q1",Median:"median","3rd quartile":"q3",Distinct:"distinct",Valid:"valid",Missing:"missing"},timeUnit:{Auto:null,Milliseconds:"milliseconds",Seconds:"seconds",Minutes:"minutes",Hours:"hours","Day of the month":"date","Day of year":"dayofyear","Day of week":"day",Week:"week",Month:"month",Quarter:"quarter",Year:"year","Year and quarter":"yearquarter","Year and month":"yearmonth","Year, month, date":"yearmonthdate"},scaleType:{Auto:null,Linear:"linear",Log:"log",Exponential:"pow","Square root":"sqrt",Symlog:"symlog",Identity:"identity",Sequential:"sequential",Time:"time",UTC:"utc",Quantile:"quantile",Quantize:"quantize",Threshold:"threshold","Bin-ordinal":"bin-ordinal",Ordinal:"ordinal",Point:"point",Band:"band"},stack:{Auto:null,Stack:!0,"Stack from center":"center",Normalized:"normalize","No stacking":!1},legend:{Off:!1,Top:null},sort:{Auto:null,Ascending:"ascending",Descending:"descending"},bin:{Off:null,On:!0,"Already binned":"binned"},zero:{Auto:null,"Always visible":!0,"Not always visible":!1},scheme:{Auto:null,accent:"accent",category10:"category10",category20:"category20",category20b:"category20b",category20c:"category20c",dark2:"dark2",paired:"paired",pastel1:"pastel1",pastel2:"pastel2",set1:"set1",set2:"set2",set3:"set3",tableau10:"tableau10",tableau20:"tableau20",blues:"blues",tealblues:"tealblues",teals:"teals",greens:"greens",browns:"browns",oranges:"oranges",reds:"reds",purples:"purples",warmgreys:"warmgreys",greys:"greys",viridis:"viridis",magma:"magma",inferno:"inferno",plasma:"plasma",cividis:"cividis",turbo:"turbo",bluegreen:"bluegreen",bluepurple:"bluepurple",goldgreen:"goldgreen",goldorange:"goldorange",goldred:"goldred",greenblue:"greenblue",orangered:"orangered",purplebluegreen:"purplebluegreen",purpleblue:"purpleblue",purplered:"purplered",redpurple:"redpurple",yellowgreenblue:"yellowgreenblue",yellowgreen:"yellowgreen",yelloworangebrown:"yelloworangebrown",yelloworangered:"yelloworangered",darkblue:"darkblue",darkgold:"darkgold",darkgreen:"darkgreen",darkmulti:"darkmulti",darkred:"darkred",lightgreyred:"lightgreyred",lightgreyteal:"lightgreyteal",lightmulti:"lightmulti",lightorange:"lightorange",lighttealblue:"lighttealblue",blueorange:"blueorange",brownbluegreen:"brownbluegreen",purplegreen:"purplegreen",pinkyellowgreen:"pinkyellowgreen",purpleorange:"purpleorange",redblue:"redblue",redgrey:"redgrey",redyellowblue:"redyellowblue",redyellowgreen:"redyellowgreen",spectral:"spectral",rainbow:"rainbow",sinebow:"sinebow"}};function qve(t,e){var i,r,s;const n=(i=e==null?void 0:e.mark)==null?void 0:i.type;switch(t){case"shape":return n=="point";case"filled":return n=="point"&&((r=e==null?void 0:e.mark)==null?void 0:r.shape)!="stroke";case"point":case"interpolate":return Wt(["line","area"],n);case"angle":return Wt(["text","image"],n)||n=="point"&&!Wt(["circle",null,void 0],(s=e==null?void 0:e.mark)==null?void 0:s.shape);case"size":return Wt(["point","text","image"],n);case"radius":case"radius2":return n=="arc";case"width":case"height":return n=="image";case"line":return n=="area";case"orient":return Wt(["bar","line","area","boxPlot"],n);default:return!0}}function Kve(t,e){var i,r,s,o,a;const n=(i=e==null?void 0:e.mark)==null?void 0:i.type;switch(t){case"x":case"y":return!Wt(["arc","geoshape"],n);case"xOffset":return Wt(["bar","point"],n)&&Wt(["ordinal","nominal"],(s=(r=e==null?void 0:e.encoding)==null?void 0:r.x)==null?void 0:s.type);case"yOffset":return Wt(["bar","point"],n)&&Wt(["ordinal","nominal"],(a=(o=e==null?void 0:e.encoding)==null?void 0:o.y)==null?void 0:a.type);case"x2":case"y2":return Wt(["area","bar","rect","rule"],n);case"latitude":case"latitude2":case"longitude":case"longitude2":return n=="geoshape";case"theta":case"theta2":case"radius":case"radius2":return n=="arc";case"text":return n=="text";case"url":return n=="image";case"size":return!Wt(["image","arc"],n);case"geojson":return n=="geoshape";case"shape":return Wt(["point","line","area"],n);case"strokeDash":return Wt(["line","area"],n);case"angle":return Wt(["text","image","point"],n);default:return!0}}function Xve(t,e,n){var a,l,u,c,d;const i=((a=n==null?void 0:n.encoding)==null?void 0:a[e])??{},r=Array.isArray(i.field)?i.field.length>0&&i.field.some(h=>h!=null):i.field!=null,s=!r&&(i.value!=null||i.datum!=null),o=e=="color"&&($H((u=(l=n==null?void 0:n.encoding)==null?void 0:l.x)==null?void 0:u.field)||$H((d=(c=n==null?void 0:n.encoding)==null?void 0:c.y)==null?void 0:d.field));switch(t){case"field":return!o&&!s;case"value":return!r&&!i.datum&&!o;case"datum":return!r&&!i.value&&!o;case"type":case"scaleType":return r&&!o;case"domain":return!o;case"sort":return r;case"title":return r&&!Wt(["theta","theta2","radius","radius2"],e);case"aggregate":return r&&!i.bin&&!o;case"bin":return r&&i.aggregate==null&&!o;case"binStep":return i.bin==!0&&!i.maxBins;case"maxBins":return i.bin==!0&&!i.binStep;case"scheme":return e=="color";case"stack":return r&&Wt(["x","y","theta","radius"],e);case"legend":return r&&Wt(["color","size","opacity","shape","strokeDash"],e);case"timeUnit":return r&&i.type=="temporal";case"sortBy":return r&&Wt(["nominal","ordinal"],i.type);case"zero":return r&&!Wt(["log","time","utc"],i.scaleType);default:return!0}}const Qve={xOffset:{extraCols:{"Random jitter":Vv}},yOffset:{extraCols:{"Random jitter":Vv}}};function $H(t){return!t||!Array.isArray(t)?!1:t.length>1}const Jve={Default:{mark:{type:"point",tooltip:!0},findColumns:{A:{type:[null]},B:{type:[null]},C1:{type:["nominal","ordinal"],maxUnique:10},C2:{type:["quantitative",null]}},encoding:{x:{field:"A",zero:!1},y:{field:"B",zero:!1}},ifColumn:{C1:{encoding:{color:{field:"C1"}}},C2:{encoding:{color:{field:"C2"}}}}}};function Zve(){this.__data__=[],this.size=0}var e1e=Zve;function t1e(t,e){return t===e||t!==t&&e!==e}var fR=t1e,n1e=fR;function i1e(t,e){for(var n=t.length;n--;)if(n1e(t[n][0],e))return n;return-1}var pR=i1e,r1e=pR,s1e=Array.prototype,o1e=s1e.splice;function a1e(t){var e=this.__data__,n=r1e(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():o1e.call(e,n,1),--this.size,!0}var l1e=a1e,u1e=pR;function c1e(t){var e=this.__data__,n=u1e(e,t);return n<0?void 0:e[n][1]}var d1e=c1e,h1e=pR;function f1e(t){return h1e(this.__data__,t)>-1}var p1e=f1e,g1e=pR;function m1e(t,e){var n=this.__data__,i=g1e(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var y1e=m1e,v1e=e1e,C1e=l1e,w1e=d1e,S1e=p1e,E1e=y1e;function Mm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Mm.prototype.clear=v1e;Mm.prototype.delete=C1e;Mm.prototype.get=w1e;Mm.prototype.has=S1e;Mm.prototype.set=E1e;var gR=Mm,b1e=gR;function x1e(){this.__data__=new b1e,this.size=0}var _1e=x1e;function R1e(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var T1e=R1e;function A1e(t){return this.__data__.get(t)}var D1e=A1e;function O1e(t){return this.__data__.has(t)}var P1e=O1e,F1e=Pm,M1e=F1e["__core-js_shared__"],N1e=M1e,vD=N1e,HH=function(){var t=/[^.]+$/.exec(vD&&vD.keys&&vD.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function L1e(t){return!!HH&&HH in t}var I1e=L1e,k1e=Function.prototype,G1e=k1e.toString;function $1e(t){if(t!=null){try{return G1e.call(t)}catch{}try{return t+""}catch{}}return""}var H1e=$1e,W1e=EI,V1e=I1e,B1e=md,z1e=H1e,U1e=/[\\^$.*+?()[\]{}|]/g,j1e=/^\[object .+?Constructor\]$/,Y1e=Function.prototype,q1e=Object.prototype,K1e=Y1e.toString,X1e=q1e.hasOwnProperty,Q1e=RegExp("^"+K1e.call(X1e).replace(U1e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function J1e(t){if(!B1e(t)||V1e(t))return!1;var e=W1e(t)?Q1e:j1e;return e.test(z1e(t))}var Z1e=J1e;function eCe(t,e){return t==null?void 0:t[e]}var tCe=eCe,nCe=Z1e,iCe=tCe;function rCe(t,e){var n=iCe(t,e);return nCe(n)?n:void 0}var _I=rCe,sCe=_I,oCe=Pm,aCe=sCe(oCe,"Map"),_K=aCe,lCe=_I,uCe=lCe(Object,"create"),mR=uCe,WH=mR;function cCe(){this.__data__=WH?WH(null):{},this.size=0}var dCe=cCe;function hCe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var fCe=hCe,pCe=mR,gCe="__lodash_hash_undefined__",mCe=Object.prototype,yCe=mCe.hasOwnProperty;function vCe(t){var e=this.__data__;if(pCe){var n=e[t];return n===gCe?void 0:n}return yCe.call(e,t)?e[t]:void 0}var CCe=vCe,wCe=mR,SCe=Object.prototype,ECe=SCe.hasOwnProperty;function bCe(t){var e=this.__data__;return wCe?e[t]!==void 0:ECe.call(e,t)}var xCe=bCe,_Ce=mR,RCe="__lodash_hash_undefined__";function TCe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_Ce&&e===void 0?RCe:e,this}var ACe=TCe,DCe=dCe,OCe=fCe,PCe=CCe,FCe=xCe,MCe=ACe;function Nm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Nm.prototype.clear=DCe;Nm.prototype.delete=OCe;Nm.prototype.get=PCe;Nm.prototype.has=FCe;Nm.prototype.set=MCe;var NCe=Nm,VH=NCe,LCe=gR,ICe=_K;function kCe(){this.size=0,this.__data__={hash:new VH,map:new(ICe||LCe),string:new VH}}var GCe=kCe;function $Ce(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var HCe=$Ce,WCe=HCe;function VCe(t,e){var n=t.__data__;return WCe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var yR=VCe,BCe=yR;function zCe(t){var e=BCe(this,t).delete(t);return this.size-=e?1:0,e}var UCe=zCe,jCe=yR;function YCe(t){return jCe(this,t).get(t)}var qCe=YCe,KCe=yR;function XCe(t){return KCe(this,t).has(t)}var QCe=XCe,JCe=yR;function ZCe(t,e){var n=JCe(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var ewe=ZCe,twe=GCe,nwe=UCe,iwe=qCe,rwe=QCe,swe=ewe;function Lm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Lm.prototype.clear=twe;Lm.prototype.delete=nwe;Lm.prototype.get=iwe;Lm.prototype.has=rwe;Lm.prototype.set=swe;var owe=Lm,awe=gR,lwe=_K,uwe=owe,cwe=200;function dwe(t,e){var n=this.__data__;if(n instanceof awe){var i=n.__data__;if(!lwe||i.length<cwe-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new uwe(i)}return n.set(t,e),this.size=n.size,this}var hwe=dwe,fwe=gR,pwe=_1e,gwe=T1e,mwe=D1e,ywe=P1e,vwe=hwe;function Im(t){var e=this.__data__=new fwe(t);this.size=e.size}Im.prototype.clear=pwe;Im.prototype.delete=gwe;Im.prototype.get=mwe;Im.prototype.has=ywe;Im.prototype.set=vwe;var Cwe=Im,wwe=_I,Swe=function(){try{var t=wwe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),RK=Swe,BH=RK;function Ewe(t,e,n){e=="__proto__"&&BH?BH(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var RI=Ewe,bwe=RI,xwe=fR;function _we(t,e,n){(n!==void 0&&!xwe(t[e],n)||n===void 0&&!(e in t))&&bwe(t,e,n)}var TK=_we;function Rwe(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(n(s[l],l,s)===!1)break}return e}}var Twe=Rwe,Awe=Twe,Dwe=Awe(),Owe=Dwe,pb={exports:{}};pb.exports;(function(t,e){var n=Pm,i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===i,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,h=a?a(d):new u.constructor(d);return u.copy(h),h}t.exports=l})(pb,pb.exports);var Pwe=pb.exports,Fwe=Pm,Mwe=Fwe.Uint8Array,Nwe=Mwe,zH=Nwe;function Lwe(t){var e=new t.constructor(t.byteLength);return new zH(e).set(new zH(t)),e}var Iwe=Lwe,kwe=Iwe;function Gwe(t,e){var n=e?kwe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var $we=Gwe;function Hwe(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var Wwe=Hwe,Vwe=md,UH=Object.create,Bwe=function(){function t(){}return function(e){if(!Vwe(e))return{};if(UH)return UH(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),zwe=Bwe,Uwe=xK,jwe=Uwe(Object.getPrototypeOf,Object),AK=jwe,Ywe=zwe,qwe=AK,Kwe=xI;function Xwe(t){return typeof t.constructor=="function"&&!Kwe(t)?Ywe(qwe(t)):{}}var Qwe=Xwe,Jwe=fC,Zwe=Ff;function eSe(t){return Zwe(t)&&Jwe(t)}var tSe=eSe,nSe=Fm,iSe=AK,rSe=Ff,sSe="[object Object]",oSe=Function.prototype,aSe=Object.prototype,DK=oSe.toString,lSe=aSe.hasOwnProperty,uSe=DK.call(Object);function cSe(t){if(!rSe(t)||nSe(t)!=sSe)return!1;var e=iSe(t);if(e===null)return!0;var n=lSe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&DK.call(n)==uSe}var dSe=cSe;function hSe(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var OK=hSe,fSe=RI,pSe=fR,gSe=Object.prototype,mSe=gSe.hasOwnProperty;function ySe(t,e,n){var i=t[e];(!(mSe.call(t,e)&&pSe(i,n))||n===void 0&&!(e in t))&&fSe(t,e,n)}var vSe=ySe,CSe=vSe,wSe=RI;function SSe(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?wSe(n,a,l):CSe(n,a,l)}return n}var ESe=SSe;function bSe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var xSe=bSe,_Se=md,RSe=xI,TSe=xSe,ASe=Object.prototype,DSe=ASe.hasOwnProperty;function OSe(t){if(!_Se(t))return TSe(t);var e=RSe(t),n=[];for(var i in t)i=="constructor"&&(e||!DSe.call(t,i))||n.push(i);return n}var PSe=OSe,FSe=bK,MSe=PSe,NSe=fC;function LSe(t){return NSe(t)?FSe(t,!0):MSe(t)}var PK=LSe,ISe=ESe,kSe=PK;function GSe(t){return ISe(t,kSe(t))}var $Se=GSe,jH=TK,HSe=Pwe,WSe=$we,VSe=Wwe,BSe=Qwe,YH=CK,qH=bI,zSe=tSe,USe=wK,jSe=EI,YSe=md,qSe=dSe,KSe=EK,KH=OK,XSe=$Se;function QSe(t,e,n,i,r,s,o){var a=KH(t,n),l=KH(e,n),u=o.get(l);if(u){jH(t,n,u);return}var c=s?s(a,l,n+"",t,e,o):void 0,d=c===void 0;if(d){var h=qH(l),f=!h&&USe(l),p=!h&&!f&&KSe(l);c=l,h||f||p?qH(a)?c=a:zSe(a)?c=VSe(a):f?(d=!1,c=HSe(l,!0)):p?(d=!1,c=WSe(l,!0)):c=[]:qSe(l)||YH(l)?(c=a,YH(a)?c=XSe(a):(!YSe(a)||jSe(a))&&(c=BSe(l))):d=!1}d&&(o.set(l,c),r(c,l,i,s,o),o.delete(l)),jH(t,n,c)}var JSe=QSe,ZSe=Cwe,eEe=TK,tEe=Owe,nEe=JSe,iEe=md,rEe=PK,sEe=OK;function FK(t,e,n,i,r){t!==e&&tEe(e,function(s,o){if(r||(r=new ZSe),iEe(s))nEe(t,e,o,n,FK,i,r);else{var a=i?i(sEe(t,o),s,o+"",t,e,r):void 0;a===void 0&&(a=s),eEe(t,o,a)}},rEe)}var oEe=FK;function aEe(t){return t}var MK=aEe;function lEe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var uEe=lEe,cEe=uEe,XH=Math.max;function dEe(t,e,n){return e=XH(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=XH(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),cEe(t,this,a)}}var hEe=dEe;function fEe(t){return function(){return t}}var pEe=fEe,gEe=pEe,QH=RK,mEe=MK,yEe=QH?function(t,e){return QH(t,"toString",{configurable:!0,enumerable:!1,value:gEe(e),writable:!0})}:mEe,vEe=yEe,CEe=800,wEe=16,SEe=Date.now;function EEe(t){var e=0,n=0;return function(){var i=SEe(),r=wEe-(i-n);if(n=i,r>0){if(++e>=CEe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var bEe=EEe,xEe=vEe,_Ee=bEe,REe=_Ee(xEe),TEe=REe,AEe=MK,DEe=hEe,OEe=TEe;function PEe(t,e){return OEe(DEe(t,e,AEe),t+"")}var FEe=PEe,MEe=fR,NEe=fC,LEe=SK,IEe=md;function kEe(t,e,n){if(!IEe(n))return!1;var i=typeof e;return(i=="number"?NEe(n)&&LEe(e,n.length):i=="string"&&e in n)?MEe(n[e],t):!1}var GEe=kEe,$Ee=FEe,HEe=GEe;function WEe(t){return $Ee(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(r--,s):void 0,o&&HEe(n[0],n[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,s)}return e})}var VEe=WEe,BEe=oEe,zEe=VEe,UEe=zEe(function(t,e,n){BEe(t,e,n)}),jEe=UEe;const NK=pf(jEe);function YEe(t,e){return t.some(n=>Wt(e,n))}function gb(t,e){if(!t)return{};if(!e)return Object.fromEntries(Object.entries(t));const n=Object.entries(t).map(e).filter(i=>!!i);return Object.fromEntries(n)}function qEe(t,e){return Object.fromEntries(Object.entries(t).filter(e))}function RP(t){return Array.isArray(t)?t.map(n=>RP(n)):t instanceof Object?gb(t,([n,i])=>[n,RP(i)]):t}function KEe(t,e,n){const i=Object.fromEntries(Object.entries(t.mark).filter(([l,u])=>u!=null).filter(([l])=>n.selectMarkProperty(l,t))),r=Object.fromEntries(Object.entries(t.encoding).filter(([l,u])=>u!=null).filter(([l])=>n.selectChannel(l,t)).map(([l])=>{const u=XEe(l,t,e,n);return u?[l,u]:[]}));QEe(r,t);const s={mark:{clip:!0,...i},encoding:r,params:[{name:"grid",select:"interval",bind:"scales"}],data:{name:"dataset1"}},o=[];ebe(r,o),nbe(r,o),o.length>0&&(s.transform=o);const a=NK({},s);return YEe(Object.keys(r),["row","column","facet"])&&(delete a.width,delete a.height),a}function XEe(t,e,n,i){var a;const r={},s=((a=e==null?void 0:e.encoding)==null?void 0:a[t])??{},o=Object.fromEntries(Object.entries(s).filter(([l])=>i.selectChannelProperty(l,t,e)));if(o.aggregate!=null&&(r.aggregate=o.aggregate),o.bin&&(o.bin=="binned"?r.bin="binned":o.binStep!=null?r.bin={step:o.binStep}:o.maxBins!=null?r.bin={maxbins:o.maxBins}:r.bin=!0),o.field!=null&&(r.field=o.field),o.legend!=null&&(r.legend=o.legend),(o.scaleType??o.scheme??o.domain??o.range??o.zero!=null)&&(r.scale={},o.scaleType!=null&&(r.scale.type=o.scaleType),o.scheme!=null&&(r.scale.scheme=o.scheme),o.domain!=null&&(r.scale.domain=o.domain),o.range!=null&&(r.scale.range=o.range),o.zero!=null&&(r.scale.zero=o.zero)),o.sortBy==null)o.sort!=null&&(r.sort=o.sort);else{const l=o.sort=="descending"?"-":"",u=o.sortBy??"";r.sort=`${l}${u}`}return o.stack!=null&&(r.stack=o.stack),o.type=="temporal"&&(r.timeUnit=o.timeUnit),o.title!=null&&(r.title=o.title),Array.isArray(o.field)?r.type=JH(o.type,o.field[0],n):o.field&&(r.type=JH(o.type,o.field,n)),o.value!=null&&(r.value=o.value),Object.keys(r).length>0?r:null}function QEe(t,e){var n,i,r,s,o;((n=t==null?void 0:t.color)==null?void 0:n.field)!=null&&(((i=t==null?void 0:t.x)==null?void 0:i.stack)==!1&&((r=e==null?void 0:e.mark)==null?void 0:r.type)=="bar"&&(Wt(["nominal","ordinal"],t.y.type)||(t.y.type="nominal"),t.yOffset==null&&(t.yOffset={}),t.yOffset.field==null&&(t.yOffset.field=t.color.field)),((s=t==null?void 0:t.y)==null?void 0:s.stack)==!1&&((o=e==null?void 0:e.mark)==null?void 0:o.type)=="bar"&&(Wt(["nominal","ordinal"],t.x.type)||(t.x.type="nominal"),t.xOffset==null&&(t.xOffset={}),t.xOffset.field==null&&(t.xOffset.field=t.color.field)))}function JH(t,e,n){var i;return t??(e==Vv?"quantitative":(i=n[e])==null?void 0:i.type)}const JEe="vlcb--folded-keys-",ZEe="vlcb--folded-values-";function ebe(t,e){Object.entries(t).forEach(([n,i])=>{Array.isArray(i==null?void 0:i.field)&&(i.field.length>1?tbe(n,i,i.field,t,e):i.field=i.field[0])})}function tbe(t,e,n,i,r){var l;const s=n.filter(u=>u!=null),o=ZEe+t,a=JEe+t;e.field=o,i!=null&&i.color||(i.color={}),i.color.field=a,i.color.type="nominal",e.title||(e.title="value"),(l=i==null?void 0:i.color)!=null&&l.title||(i.color.title="color"),r.push({fold:s,as:[a,o]})}function nbe(t,e){Object.values(t).some(i=>(i==null?void 0:i.field)==Vv)&&e.push({calculate:"random()",as:Vv})}function TP(t,e,n){if(e==null)return null;const i=RP(e),r=ibe(i.findColumns,n);sbe(i,r);const s=i.mark,o=gb(i.encoding,([a,l])=>[a,{...l,field:r[l.field]}]);t.setPreset(e),t.setMark({...s}),t.setEncoding({...o})}function ibe(t,e){if(!t)return{};const n={};for(const[i,r]of Object.entries(t)){const s=rbe(r,e,Object.values(n));s&&(n[i]=s)}return n}function rbe(t,e,n){var s;if(!t)return;let i=Object.entries(e).filter(([o,a])=>{let l=!0;return t.type&&(l=l&&Wt(t.type,a.type)),t.maxUnique&&(l=l&&(a.unique??0)<=t.maxUnique),l});return i.length==0&&((s=t.type)!=null&&s.some(o=>o==null))&&(i=Object.entries(e)),i.map(([o])=>o).find(o=>!Wt(n,o))}function sbe(t,e){const n=Object.entries(t.ifColumn??{}).filter(([i])=>e[i]!=null).map(([i,r])=>r);n&&NK(t,...n.reverse())}function obe(t,e){const n=T.useCallback(()=>{const f=gb(t==null?void 0:t.mark,([p,g])=>{var m;return[g,(m=e==null?void 0:e.mark)==null?void 0:m[g]]});return f.type||(f.type="point"),f},[]),i=T.useCallback(()=>gb(t==null?void 0:t.encoding,([f,p])=>{var g;return[p,(g=e==null?void 0:e.encoding)==null?void 0:g[p]]}),[]),[r,s]=T.useState({}),[o,a]=T.useState(n),[l,u]=T.useState(i),c=T.useCallback(()=>{a(n()),u(i())},[i,n,u,a]),d=T.useCallback(f=>p=>{a({...o,[f]:p})},[o,a]),h=T.useCallback(f=>p=>g=>{u({...l,[f]:{...l[f],[p]:g}})},[l,u]);return{reset:c,preset:r,setPreset:s,mark:o,encoding:l,setMark:a,setEncoding:u,getMarkSetter:d,getEncodingSetter:h}}function LK(t,e){if(!e)return!0;const n=e[1];return!!(n[t]??n.else!=!1)}function TI(t,e,n,i){let r;const s=e[t];if(n){const o=n[1],a=o[t]??o.else!=!1;if(!a)return null;r=a instanceof Set?a:new Set(Object.values(s))}else r=new Set(Object.values(s));return qEe(s,([o,a])=>r.has(a)&&i(a))}function abe({config:t,ui:e,state:n,makeSetter:i,namedViewMode:r,customState:s,setCustomState:o}){const a={align:{widgetHint:"select"},baseline:{widgetHint:"select"},filled:{widgetHint:"toggle"},interpolate:{widgetHint:"select"},line:{widgetHint:"toggle"},orient:{widgetHint:"select"},point:{widgetHint:"toggle"},shape:{widgetHint:"select"},type:{widgetHint:"select"},tooltip:{widgetHint:"toggle"}},l=TI("mark",t,r,c=>t.selectMarkProperty(c,n));if(!l)return null;const u=["mark"];return K.jsx(e.MarkContainer,{statePath:u,viewMode:r==null?void 0:r[0],customState:s,setCustomState:o,children:Object.entries(l).map(([c,d])=>{var h,f;return K.jsx(e.GenericPickerWidget,{statePath:[...u,d],widgetHint:((h=a[d])==null?void 0:h.widgetHint)??"json",label:c,value:n.mark[d],setValue:i(d),items:(f=t==null?void 0:t.markPropertyValues)==null?void 0:f[d],viewMode:r==null?void 0:r[0],customState:s,setCustomState:o},d)})})}function lbe({channelName:t,channelLabel:e,columns:n,config:i,makeSetter:r,state:s,statePath:o,ui:a,namedViewMode:l,customState:u,setCustomState:c}){var g;const d=((g=s==null?void 0:s.encoding)==null?void 0:g[t])??{},h=i.channelPropertyValues,f={aggregate:{widgetHint:"select"},bin:{widgetHint:"select"},binStep:{widgetHint:"number"},domain:{widgetHint:"2or3tuple"},field:{widgetHint:"multiselect",validValues:n},legend:{widgetHint:"toggle"},maxBins:{widgetHint:"number"},range:{widgetHint:"2tuple"},scaleType:{widgetHint:"select"},scheme:{widgetHint:"select"},sort:{widgetHint:"select"},stack:{widgetHint:"select"},timeUnit:{widgetHint:"select"},type:{widgetHint:"select"},value:{widgetHint:"json"},zero:{widgetHint:"select"}},p=TI("channelProperties",i,l,m=>i.selectChannelProperty(m,t,s));return p?K.jsx(a.ChannelContainer,{title:e,statePath:[...o,t],viewMode:l==null?void 0:l[0],customState:u,setCustomState:c,children:Object.entries(p).map(([m,y])=>{var v,C;return K.jsx(a.GenericPickerWidget,{statePath:[...o,t,y],widgetHint:((v=f[y])==null?void 0:v.widgetHint)??"json",label:m,value:d[y],setValue:r(y),items:((C=f[y])==null?void 0:C.validValues)??(h==null?void 0:h[y]),viewMode:l==null?void 0:l[0],customState:u,setCustomState:c},y)})}):null}function ube({columnTypes:t,config:e,state:n,ui:i,namedViewMode:r,customState:s,setCustomState:o}){const a={"":null,...Object.fromEntries(Object.keys(t).map(c=>[c,c]))};if(!LK("encoding",r))return null;const l=TI("encoding",e,r,c=>e.selectChannel(c,n));if(!l)return null;const u=["encoding"];return K.jsx(i.EncodingContainer,{statePath:u,viewMode:r==null?void 0:r[0],customState:s,setCustomState:o,children:Object.entries(l).map(([c,d])=>{var h;return K.jsx(lbe,{channelName:d,channelLabel:c,makeSetter:n.getEncodingSetter(d),config:e,state:n,statePath:u,ui:i,columns:{...a,...(h=Qve[d])==null?void 0:h.extraCols},namedViewMode:r,customState:s,setCustomState:o},d)})})}function cbe({columnTypes:t,config:e,state:n,ui:i,namedViewMode:r,customState:s,setCustomState:o}){return K.jsxs(i.LayerContainer,{children:[K.jsx(abe,{config:e,makeSetter:n.getMarkSetter,state:n,ui:i,namedViewMode:r,customState:s,setCustomState:o}),K.jsx(ube,{columnTypes:t,config:e,state:n,namedViewMode:r,ui:i,customState:s,setCustomState:o})]})}function dbe({columnTypes:t,presets:e,state:n,ui:i,namedViewMode:r,customState:s,setCustomState:o}){e||(e=Jve);const a=T.useCallback(u=>{TP(n,u,t)},[n.mark,n.encoding,t]);if(T.useEffect(()=>{Object.keys(e).length&&TP(n,Object.values(e)[0],t)},[e,t]),!e||Object.keys(e).length==0||!LK("presets",r))return null;const l=["presets"];return K.jsx(i.PresetsContainer,{statePath:l,viewMode:r==null?void 0:r[0],customState:s,setCustomState:o,children:K.jsx(i.GenericPickerWidget,{statePath:l,widgetHint:"select",label:"Preset",value:n.preset,setValue:a,items:e,viewMode:r==null?void 0:r[0],customState:s,setCustomState:o})})}function AI({columnTypes:t,initialState:e,presets:n,setGeneratedSpec:i,ui:r,modes:s,mark:o,encoding:a,channelProperties:l,markPropertyValues:u,channelPropertyValues:c,selectMarkProperty:d,selectChannel:h,selectChannelProperty:f}){var b;const p=T.useMemo(()=>({modes:s??Vve,mark:o??Bve,encoding:a??zve,channelProperties:l??Uve,markPropertyValues:u??jve,channelPropertyValues:c??Yve,selectMarkProperty:d??qve,selectChannel:h??Kve,selectChannelProperty:f??Xve}),[]),g=obe(p,e),[m,y]=T.useState({}),[v,C]=T.useState((b=Object.entries((p==null?void 0:p.modes)??{}))==null?void 0:b[0]),w=T.useCallback(S=>{var _;C([S,(_=p==null?void 0:p.modes)==null?void 0:_[S]])},[p==null?void 0:p.modes]),E=T.useCallback(()=>{g.reset(),TP(g,g.preset,t)},[t,g.preset]);return T.useEffect(()=>{const S=KEe(g,t,p);i(S)},[p,t,i,g.mark,g.encoding]),K.jsxs(r.BuilderContainer,{children:[K.jsx(dbe,{state:g,columnTypes:t,ui:r,presets:n,namedViewMode:v,customState:m,setCustomState:y}),K.jsx(cbe,{columnTypes:t,config:p,state:g,ui:r,namedViewMode:v,customState:m,setCustomState:y}),K.jsxs(r.ToolbarContainer,{children:[(p==null?void 0:p.modes)&&K.jsx(r.ModePicker,{items:Object.keys(p==null?void 0:p.modes),value:v[0],setValue:w}),K.jsx(r.ResetButton,{onClick:E})]})]})}function hbe(t){switch(fbe(t)){case"number":return"quantitative";case"date":return"temporal";default:return"nominal"}}function fbe(t){const e=typeof t;return e!="object"?e:t instanceof Date?"date":t instanceof Object?"object":"unknown"}const pbe="/assets/backspace_FILL0_wght300_GRAD0_opsz48-6b4a324b.svg",gbe="/assets/tune_FILL0_wght300_GRAD0_opsz48-4300a2ba.svg",mbe="_BuilderContainer_9zo3k_1",ybe="_LayerContainer_9zo3k_9",vbe="_EncodingContainer_9zo3k_20",Cbe="_ToolbarContainer_9zo3k_25",wbe="_ResetButton_9zo3k_36",Sbe="_ModePickerLabel_9zo3k_47",Ebe="_ModePickerSelectedLabel_9zo3k_48",bbe="_PresetsContainer_9zo3k_58",xbe="_GenericContainerChildrenWrapper_9zo3k_63",_be="_ModePicker_9zo3k_47",Rbe="_hidden_9zo3k_120",Tbe="_SelectBox_9zo3k_124",Abe="_MultiSelect_9zo3k_125",Dbe="_TextInputInput_9zo3k_126",Obe="_MultiSelectAddSeries_9zo3k_156",Pbe="_TextInput_9zo3k_126",Fbe="_TextInputOverlayButton_9zo3k_184",Mbe="_ToggleLabel_9zo3k_200",Nbe="_ToggleElement_9zo3k_207",Lbe="_ToggleInput_9zo3k_220",Ibe="_WidgetWrapperLabel_9zo3k_247",kbe="_WidgetWrapperWidget_9zo3k_256",Gbe="_GenericContainer_9zo3k_63",$be="_GenericContainerCollapsed_9zo3k_274",Hbe="_GenericContainerExpandable_9zo3k_287",Wbe="_GenericContainerTitle_9zo3k_291",Vbe="_GenericContainerLabel_9zo3k_303",Bbe="_GenericContainerToolbar_9zo3k_338",zbe="_GenericContainerAdvButton_9zo3k_345",At={BuilderContainer:mbe,LayerContainer:ybe,EncodingContainer:vbe,ToolbarContainer:Cbe,ResetButton:wbe,ModePickerLabel:Sbe,ModePickerSelectedLabel:Ebe,PresetsContainer:bbe,GenericContainerChildrenWrapper:xbe,ModePicker:_be,hidden:Rbe,SelectBox:Tbe,MultiSelect:Abe,TextInputInput:Dbe,MultiSelectAddSeries:Obe,TextInput:Pbe,TextInputOverlayButton:Fbe,ToggleLabel:Mbe,ToggleElement:Nbe,ToggleInput:Lbe,WidgetWrapperLabel:Ibe,WidgetWrapperWidget:kbe,GenericContainer:Gbe,GenericContainerCollapsed:$be,GenericContainerExpandable:Hbe,GenericContainerTitle:Wbe,GenericContainerLabel:Vbe,GenericContainerToolbar:Bbe,GenericContainerAdvButton:zbe},Ube="_HiddenInput_1xtp7_1",DI={HiddenInput:Ube},jbe=new Set(["text","url","x","y","theta","latitude","longitude","color"]),Ybe=new Set(["type"]),qbe=new Set(["field"]);function Kbe({children:t}){return K.jsx("div",{className:At.BuilderContainer,children:t})}function Xbe({children:t}){return K.jsx("div",{className:At.LayerContainer,children:t})}function Qbe({children:t}){return K.jsx("div",{className:At.EncodingContainer,children:t})}function Jbe({children:t}){return K.jsx("div",{className:At.ToolbarContainer,children:t})}function Zbe({onClick:t}){return K.jsx("button",{className:At.ResetButton,onClick:t,children:"Reset"})}function exe({items:t,value:e,setValue:n}){const[i,r]=T.useState(e),s=T.useCallback(o=>{const a=o.currentTarget.value;r(a),n(a)},[t,n,r]);return!t||Object.keys(t).length<=1?null:K.jsx("div",{className:At.ModePicker,children:t.map((o,a)=>K.jsxs("label",{className:i==o?At.ModePickerSelectedLabel:At.ModePickerLabel,children:[K.jsx("input",{type:"radio",className:DI.HiddenInput,value:o,onChange:s,checked:i==o,name:"modePicker"}),o]},a))})}function txe({children:t,statePath:e}){return K.jsx(vR,{title:"Chart type",expandable:!1,className:At.PresetsContainer,statePath:e,children:t})}function nxe({children:t,setCustomState:e,viewMode:n,statePath:i}){return K.jsx(vR,{title:"Mark",expandable:n=="Adv"||n=="Advanced",startsExpanded:!0,setCustomState:e,advOptionsAvailable:n=="Adv"||n=="Advanced"||n=="Default",statePath:i,children:t})}function ixe({title:t,children:e,statePath:n,setCustomState:i,viewMode:r}){const s=r=="Adv"||r=="Advanced";return K.jsx(vR,{title:t,expandable:s,startsExpanded:!s||jbe.has(n[1]),setCustomState:i,advOptionsAvailable:s||r=="Default",statePath:n,children:e})}function vR({title:t,children:e,className:n,expandable:i,startsExpanded:r,advShownByDefault:s,advOptionsAvailable:o,setCustomState:a,customState:l,statePath:u}){const[c,d]=T.useState(r??!i),[h,f]=T.useState(!!s),p=T.useCallback(v=>{f(v),a&&a({...l,[u.join(".")]:v})},[f,a,l]);T.useEffect(()=>{p(s)},[p,s]);const g=T.useCallback(()=>{p(!h)},[p,h]),m=T.useCallback(()=>{d(!c),c&&(f(!1),a&&a({...l,[u.join(".")]:!1}))},[c,d,f,a]),y=[c?At.GenericContainer:At.GenericContainerCollapsed,i?At.GenericContainerExpandable:null,n].join(" ");return!e||e.length==0?null:K.jsxs("div",{className:y,children:[t&&K.jsxs("div",{className:At.GenericContainerTitle,children:[K.jsx("label",{className:At.GenericContainerLabel,onClick:i?m:null,children:t.toUpperCase()}),c&&a&&o&&K.jsx("div",{className:At.GenericContainerToolbar,children:K.jsx("button",{className:At.GenericContainerAdvButton,onClick:g,children:K.jsx("img",{src:gbe,alt:"Advanced"})})})]}),(c||!t)&&K.jsx("div",{className:At.GenericContainerChildrenWrapper,children:e})]})}function rxe({widgetHint:t,label:e,value:n,setValue:i,items:r,statePath:s,customState:o,viewMode:a}){const l=s.slice(0,-1),u=(a=="Adv"||a=="Advanced"||a=="Default")&&!o[l.join(".")],c=s[0]=="encoding"&&!qbe.has(s[2]),d=s[0]=="mark"&&!Ybe.has(s[1]);if(u&&(d||c))return null;switch(t=="multiselect"&&s.length==3&&s[0]=="encoding"&&s[1]!="y"&&(t="select"),s[0]=="presets"&&(e=null),t){case"multiselect":return K.jsx(IK,{label:e,items:r,value:n,setValue:i});case"select":return K.jsx(OI,{label:e,items:r,value:n,setValue:i});case"toggle":return K.jsx(GK,{label:e,items:r,value:n,setValue:i});case"text":case"number":case"json":default:return K.jsx(kK,{label:e,value:n,setValue:i})}}function IK({label:t,items:e,value:n,setValue:i}){const r=Object.keys(e)[0],s=Array.isArray(n)?n:n==null?[]:[n],o=T.useCallback(d=>{var h;return(h=Object.entries(e??{}).find(([f,p])=>p==d))==null?void 0:h[0]},[e]),[a,l]=T.useState([]);T.useEffect(()=>{const d=s==null?void 0:s.map(h=>o(h));d&&((d==null?void 0:d.length)==a.length&&(d!=null&&d.every((h,f)=>h==a[f]))||l(d))},[n]);const u=T.useCallback(d=>{const h=d.currentTarget.value,f=parseInt(d.currentTarget.dataset.index,10);e[h],a.length>1&&h==r?a.splice(f,1):a[f]=h,l(a);const p=a.map(g=>e[g]);i(p)},[i,a,l]),c=T.useCallback(()=>{l([...a,r])},[a,l]);return K.jsxs(pC,{label:t,children:[a.map((d,h)=>K.jsx("select",{"data-index":h,className:At.MultiSelect,value:d,onChange:u,children:Object.keys(e).map(f=>K.jsx("option",{value:f,children:f},f))},h)),K.jsx("a",{className:At.MultiSelectAddSeries,onClick:c,children:"+ Add series"})]})}function OI({label:t,items:e,value:n,setValue:i}){const r=T.useCallback(l=>{var u;return(u=Object.entries(e??{}).find(([c,d])=>d==l))==null?void 0:u[0]},[e]),[s,o]=T.useState("");T.useEffect(()=>{const l=r(n);l!=s&&o(l)},[n]);const a=T.useCallback(l=>{const u=l.currentTarget.value;o(u);const c=e[u];i(c)},[i,o]);return K.jsx(pC,{label:t,children:K.jsx("select",{className:At.SelectBox,value:s,onChange:a,children:Object.keys(e).map(l=>K.jsx("option",{value:l,children:l},l))})})}function kK({label:t,value:e,setValue:n}){const i=T.useCallback(a=>{const l=a.currentTarget.value;try{n(JSON.parse(l))}catch{n(l==""?null:l)}},[n]),r=T.useCallback(()=>n(null),[n]),s=e!=null&&e!="",o=e==null?e="":typeof e=="string"?e:JSON.stringify(e);return K.jsxs(pC,{label:t,className:At.TextInput,children:[K.jsx("input",{className:At.TextInputInput,type:"text",value:o??"",onChange:i}),s?K.jsx("button",{className:At.TextInputOverlayButton,onClick:r,disabled:!s,children:K.jsx("img",{src:pbe,alt:"Delete"})}):null]})}function GK({label:t,items:e,value:n,setValue:i}){let r;Array.isArray(e)?r=e:r=Object.values(e);const s=T.useCallback(o=>{i(o.currentTarget.checked?r[1]:r[0])},[i,r]);return K.jsx(pC,{label:t,children:K.jsxs(PI,{className:At.ToggleLabel,children:[K.jsx("input",{type:"checkbox",defaultChecked:n==r[1],className:[At.ToggleInput,DI.HiddenInput].join(" "),onClick:s},n),K.jsx("div",{className:At.ToggleElement})]})})}function PI(t){return K.jsx("label",{...t})}function pC({label:t,className:e,children:n}){return K.jsxs(K.Fragment,{children:[t&&K.jsx(PI,{className:[At.WidgetWrapperLabel,e].join(" "),children:t}),K.jsx("div",{className:At.WidgetWrapperWidget,children:n})]})}const FI=Object.freeze(Object.defineProperty({__proto__:null,BuilderContainer:Kbe,ChannelContainer:ixe,EncodingContainer:Qbe,GenericContainer:vR,GenericPickerWidget:rxe,HtmlLabel:PI,LayerContainer:Xbe,MarkContainer:nxe,ModePicker:exe,MultiSelect:IK,PresetsContainer:txe,ResetButton:Zbe,SelectBox:OI,TextInput:kK,Toggle:GK,ToolbarContainer:Jbe,WidgetWrapper:pC},Symbol.toStringTag,{value:"Module"})),$K={"Scatter plot":{mark:{type:"point",filled:!0,tooltip:!0,size:100,opacity:.5},findColumns:{A:{type:["quantitative",null]},B:{type:["quantitative",null]},C1:{type:["nominal","ordinal"],maxUnique:10},C2:{type:["quantitative",null]}},encoding:{x:{field:"A",zero:!1},y:{field:"B",zero:!1}},ifColumn:{C1:{encoding:{color:{field:"C1"}}},C2:{encoding:{color:{field:"C2"}}}}},"Line chart":{mark:{type:"line",tooltip:!0},findColumns:{A:{type:["quantitative","temporal",null]},B:{type:["quantitative",null]},C:{type:["nominal","ordinal"],maxUnique:10}},encoding:{x:{field:"A"},y:{field:"B"},color:{field:"C"}}},"Area chart":{mark:{type:"area",tooltip:!0},findColumns:{A:{type:["quantitative",null]},B:{type:["quantitative",null]},C:{type:["nominal","ordinal"],maxUnique:10}},encoding:{x:{field:"A"},y:{field:"B",stack:!1},color:{field:"C"},opacity:{value:.75}}},"Stacked area chart":{mark:{type:"area",tooltip:!0},findColumns:{A:{type:["quantitative",null]},B:{type:["quantitative",null]},C:{type:["nominal","ordinal"],maxUnique:10}},encoding:{x:{field:"A"},y:{field:"B",aggregate:"max",stack:!0},color:{field:"C"}}},"Bar chart":{mark:{type:"bar",tooltip:!0},findColumns:{A1:{type:["quantitative"]},C1:{type:["nominal","ordinal"],maxUnique:10},A2:{},C2:{}},encoding:{},ifColumn:{A1:{encoding:{x:{field:"A1",bin:!0},y:{field:"A1",aggregate:"count",stack:!1}}},A2:{encoding:{x:{field:"A2",type:"nominal",sort:"ascending"},y:{field:"A2",aggregate:"count",stack:!1}}},C1:{encoding:{color:{field:"C1",bin:null}}},C2:{encoding:{color:{field:"C2",bin:!0}}}}},"Horizontal bar chart":{mark:{type:"bar",tooltip:!0},findColumns:{A1:{type:["quantitative"]},C1:{type:["nominal","ordinal"],maxUnique:10},A2:{},C2:{}},encoding:{},ifColumn:{A1:{encoding:{x:{field:"A1",aggregate:"count",stack:!1},y:{field:"A1",bin:!0}}},A2:{encoding:{x:{field:"A2",aggregate:"count",stack:!1},y:{field:"A2",type:"nominal",sort:"ascending"}}},C1:{encoding:{color:{field:"C1",bin:null},yOffset:{field:"C1",bin:null}}},C2:{encoding:{color:{field:"C2",bin:!0},yOffset:{field:"C2",bin:!0}}}}},"Stacked bar chart":{mark:{type:"bar",tooltip:!0},findColumns:{A1:{type:["quantitative"]},C1:{type:["nominal","ordinal"],maxUnique:10},A2:{},C2:{}},encoding:{},ifColumn:{A1:{encoding:{y:{field:"A1",aggregate:"count"},x:{field:"A1",bin:!0}}},A2:{encoding:{x:{field:"A2",type:"nominal",sort:"ascending"},y:{field:"A2",aggregate:"count"}}},C1:{encoding:{color:{field:"C1",bin:null}}},C2:{encoding:{color:{field:"C2",bin:!0}}}}},"Pie chart":{mark:{type:"arc",tooltip:!0},findColumns:{A1:{type:["quantitative",null]},B1:{type:["nominal","ordinal"],maxUnique:20},A2:{},B2:{}},ifColumn:{A1:{encoding:{theta:{field:"A1",aggregate:"sum"}}},B1:{encoding:{color:{field:"B1",bin:null}}},A2:{encoding:{theta:{field:"A2",aggregate:"count"}}},B2:{encoding:{color:{field:"B2",bin:!0}}}}},"Ring chart":{mark:{type:"arc",radius2:{expr:"min(containerSize()[0], containerSize()[1]) / 3"},tooltip:!0},findColumns:{A1:{type:["quantitative",null]},B1:{type:["nominal","ordinal"],maxUnique:20},A2:{},B2:{}},ifColumn:{A1:{encoding:{theta:{field:"A1",aggregate:"sum"}}},B1:{encoding:{color:{field:"B1",bin:null}}},A2:{encoding:{theta:{field:"A2",aggregate:"count"}}},B2:{encoding:{color:{field:"B2",bin:!0}}}}},"Heat map":{mark:{type:"rect",tooltip:!0},findColumns:{A:{},B:{},C:{type:["quantitative"]}},encoding:{x:{field:"A",bin:!0},y:{field:"B",bin:!0},color:{field:"A",aggregate:"count"}},ifColumn:{C:{encoding:{color:{field:"C",aggregate:"sum"}}}}}},sxe="_PageWrapper_8m8d5_19",oxe="_PreviewDatasetToggle_8m8d5_68",axe="_BuilderWrapper_8m8d5_87",lxe="_PreviewPane_8m8d5_98",uxe="_DemoInput_8m8d5_103",cxe="_DatasetPickerWrapper_8m8d5_109",dxe="_DatasetPickerLabel_8m8d5_113",hxe="_OutputCode_8m8d5_120",fxe="_DemoPicker_8m8d5_130",pxe="_DemoWrapper_8m8d5_176",gxe="_Note_8m8d5_182",mxe="_DemoInfo_8m8d5_187",Ln={PageWrapper:sxe,PreviewDatasetToggle:oxe,BuilderWrapper:axe,PreviewPane:lxe,DemoInput:uxe,DatasetPickerWrapper:cxe,DatasetPickerLabel:dxe,OutputCode:hxe,DemoPicker:fxe,DemoWrapper:pxe,Note:gxe,DemoInfo:mxe};function MI({demo:t}){return K.jsxs("div",{className:Ln.DemoInfo,children:[K.jsxs("h2",{children:["Selected demo: ",t.title]}),K.jsx("p",{children:t.description}),K.jsx("p",{className:Ln.Note,children:"Remember that the look-and-feel is completely configurable, since you can pass your own React components!"})]})}function NI({generatedSpec:t}){return K.jsxs("div",{styled:Ln.TitledContainer,children:[K.jsx("h2",{children:"Demo output"}),K.jsx("code",{className:Ln.OutputCode,children:JSON.stringify(t,void 0,4)})]})}const ZH={};function AP(t,e){t===void 0&&(t=ZH),e===void 0&&(e=ZH);const n=Object.keys(t),i=Object.keys(e);return t===e||n.length===i.length&&n.every(r=>t[r]===e[r])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var yxe=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),vxe=Object.prototype.hasOwnProperty;function DP(t,e){return vxe.call(t,e)}function OP(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var i=[];for(var r in t)DP(t,r)&&i.push(r);return i}function fs(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function PP(t){for(var e=0,n=t.length,i;e<n;){if(i=t.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function Ud(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function HK(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function FP(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(FP(t[e]))return!0}else if(typeof t=="object"){for(var i=OP(t),r=i.length,s=0;s<r;s++)if(FP(t[i[s]]))return!0}}return!1}function e6(t,e){var n=[t];for(var i in e){var r=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var WK=function(t){yxe(e,t);function e(n,i,r,s,o){var a=this.constructor,l=t.call(this,e6(n,{name:i,index:r,operation:s,tree:o}))||this;return l.name=i,l.index=r,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=e6(n,{name:i,index:r,operation:s,tree:o}),l}return e}(Error),rn=WK,Cxe=fs,Dp={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=mb(n,this.path);i&&(i=fs(i));var r=Eh(n,{op:"remove",path:this.from}).removed;return Eh(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=mb(n,this.from);return Eh(n,{op:"add",path:this.path,value:fs(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Bv(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},wxe={add:function(t,e,n){return PP(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var i=t.splice(e,1);return{newDocument:n,removed:i[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:Dp.move,copy:Dp.copy,test:Dp.test,_get:Dp._get};function mb(t,e){if(e=="")return t;var n={op:"_get",path:e};return Eh(t,n),n.value}function Eh(t,e,n,i,r,s){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(e,0,t,e.path):yb(e,0)),e.path===""){var o={newDocument:t};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=t,o;if(e.op==="move"||e.op==="copy")return o.newDocument=mb(t,e.from),e.op==="move"&&(o.removed=t),o;if(e.op==="test"){if(o.test=Bv(t,e.value),o.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o.newDocument=t,o}else{if(e.op==="remove")return o.removed=t,o.newDocument=null,o;if(e.op==="_get")return e.value=t,o;if(n)throw new rn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return o}}else{i||(t=fs(t));var a=e.path||"",l=a.split("/"),u=t,c=1,d=l.length,h=void 0,f=void 0,p=void 0;for(typeof n=="function"?p=n:p=yb;;){if(f=l[c],f&&f.indexOf("~")!=-1&&(f=HK(f)),r&&(f=="__proto__"||f=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(u[f]===void 0?h=l.slice(0,c).join("/"):c==d-1&&(h=e.path),h!==void 0&&p(e,0,t,h)),c++,Array.isArray(u)){if(f==="-")f=u.length;else{if(n&&!PP(f))throw new rn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);PP(f)&&(f=~~f)}if(c>=d){if(n&&e.op==="add"&&f>u.length)throw new rn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var o=wxe[e.op].call(e,u,f,t);if(o.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}}else if(c>=d){var o=Dp[e.op].call(e,u,f,t);if(o.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}if(u=u[f],n&&c<d&&(!u||typeof u!="object"))throw new rn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function CR(t,e,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(e))throw new rn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=fs(t));for(var s=new Array(e.length),o=0,a=e.length;o<a;o++)s[o]=Eh(t,e[o],n,!0,r,o),t=s[o].newDocument;return s.newDocument=t,s}function Sxe(t,e,n){var i=Eh(t,e);if(i.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function yb(t,e,n,i){if(typeof t!="object"||t===null||Array.isArray(t))throw new rn("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Dp[t.op]){if(typeof t.path!="string")throw new rn("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new rn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new rn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new rn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&FP(t.value))throw new rn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var r=t.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new rn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==i)throw new rn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var o={op:"_get",path:t.from,value:void 0},a=VK([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new rn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new rn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function VK(t,e,n){try{if(!Array.isArray(t))throw new rn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)CR(fs(e),fs(t),n||!0);else{n=n||yb;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(r){if(r instanceof rn)return r;throw r}}function Bv(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),i=Array.isArray(e),r,s,o;if(n&&i){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!Bv(t[r],e[r]))return!1;return!0}if(n!=i)return!1;var a=Object.keys(t);if(s=a.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!e.hasOwnProperty(a[r]))return!1;for(r=s;r--!==0;)if(o=a[r],!Bv(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}const Exe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:rn,_areEquals:Bv,applyOperation:Eh,applyPatch:CR,applyReducer:Sxe,deepClone:Cxe,getValueByPointer:mb,validate:VK,validator:yb},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var LI=new WeakMap,bxe=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),xxe=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function _xe(t){return LI.get(t)}function Rxe(t,e){return t.observers.get(e)}function Txe(t,e){t.observers.delete(e.callback)}function Axe(t,e){e.unobserve()}function Dxe(t,e){var n=[],i,r=_xe(t);if(!r)r=new bxe(t),LI.set(t,r);else{var s=Rxe(r,e);i=s&&s.observer}if(i)return i;if(i={},r.value=fs(t),e){i.callback=e,i.next=null;var o=function(){MP(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=n,i.object=t,i.unobserve=function(){MP(i),clearTimeout(i.next),Txe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(e,new xxe(e,i)),i}function MP(t,e){e===void 0&&(e=!1);var n=LI.get(t.object);II(n.value,t.object,t.patches,"",e),t.patches.length&&CR(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function II(t,e,n,i,r){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=OP(e),o=OP(t),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=t[u];if(DP(e,u)&&!(e[u]===void 0&&c!==void 0&&Array.isArray(e)===!1)){var d=e[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?II(c,d,n,i+"/"+Ud(u),r):c!==d&&(r&&n.push({op:"test",path:i+"/"+Ud(u),value:fs(c)}),n.push({op:"replace",path:i+"/"+Ud(u),value:fs(d)}))}else Array.isArray(t)===Array.isArray(e)?(r&&n.push({op:"test",path:i+"/"+Ud(u),value:fs(c)}),n.push({op:"remove",path:i+"/"+Ud(u)}),a=!0):(r&&n.push({op:"test",path:i,value:t}),n.push({op:"replace",path:i,value:e}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!DP(t,u)&&e[u]!==void 0&&n.push({op:"add",path:i+"/"+Ud(u),value:fs(e[u])})}}}function Oxe(t,e,n){n===void 0&&(n=!1);var i=[];return II(t,e,i,"",n),i}const Pxe=Object.freeze(Object.defineProperty({__proto__:null,compare:Oxe,generate:MP,observe:Dxe,unobserve:Axe},Symbol.toStringTag,{value:"Module"}));Object.assign({},Exe,Pxe,{JsonPatchError:WK,deepClone:fs,escapePathComponent:Ud,unescapePathComponent:HK});var Fxe=/("(?:[^\\"]|\\.)*")|[:,]/g,Mxe=function(e,n){var i,r,s;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),r=i===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,l,u){var c,d,h,f,p,g,m,y,v,C,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(m=r-l.length-u,w.length<=m&&(v=w.replace(Fxe,function(b,S){return S||b+" "}),v.length<=m))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=l+i,h=[],d=0,Array.isArray(a))for(C="[",c="]",m=a.length;d<m;d++)h.push(o(a[d],y,d===m-1?0:1)||"null");else for(C="{",c="}",g=Object.keys(a),m=g.length;d<m;d++)f=g[d],p=JSON.stringify(f)+": ",E=o(a[f],y,p.length+(d===m-1?0:1)),E!==void 0&&h.push(p+E);if(h.length>0)return[C,i+h.join(`,
`+y),c].join(`
`+l)}return w}(e,"",0)};const CD=pf(Mxe);function Kr(t,e,n){return t.fields=e||[],t.fname=n,t}function un(t){return t==null?null:t.fname}function Ai(t){return t==null?null:t.fields}function BK(t){return t.length===1?Nxe(t[0]):Lxe(t)}const Nxe=t=>function(e){return e[t]},Lxe=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function U(t){throw Error(t)}function ml(t){const e=[],n=t.length;let i=null,r=0,s="",o,a,l;t=t+"";function u(){e.push(s+t.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=t[a],l==="\\")s+=t.substring(o,a++),o=a;else if(l===i)u(),i=null,r=-1;else{if(i)continue;o===r&&l==='"'||o===r&&l==="'"?(o=a+1,i=l):l==="."&&!r?a>o?u():o=a+1:l==="["?(a>o&&u(),r=o=a+1):l==="]"&&(r||U("Access path missing open bracket: "+t),r>0&&u(),r=0,o=a+1)}return r&&U("Access path missing closing bracket: "+t),i&&U("Access path missing closing quote: "+t),a>o&&(a++,u()),e}function Gr(t,e,n){const i=ml(t);return t=i.length===1?i[0]:t,Kr((n&&n.get||BK)(i),[t],e||t)}const gC=Gr("id"),Li=Kr(t=>t,[],"identity"),tc=Kr(()=>0,[],"zero"),km=Kr(()=>1,[],"one"),ro=Kr(()=>!0,[],"true"),Vu=Kr(()=>!1,[],"false");function Ixe(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}const zK=0,kI=1,GI=2,UK=3,jK=4;function $I(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ixe,i=t||zK;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=kI&&n(e||"error","ERROR",arguments),this},warn(){return i>=GI&&n(e||"warn","WARN",arguments),this},info(){return i>=UK&&n(e||"log","INFO",arguments),this},debug(){return i>=jK&&n(e||"log","DEBUG",arguments),this}}}var j=Array.isArray;function he(t){return t===Object(t)}const t6=t=>t!=="__proto__";function Gm(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((i,r)=>{for(const s in r)if(s==="signals")i.signals=kxe(i.signals,r.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;$m(i,s,r[s],o)}return i},{})}function $m(t,e,n,i){if(!t6(e))return;let r,s;if(he(n)&&!j(n)){s=he(t[e])?t[e]:t[e]={};for(r in n)i&&(i===!0||i[r])?$m(s,r,n[r]):t6(r)&&(s[r]=n[r])}else t[e]=n}function kxe(t,e){if(t==null)return e;const n={},i=[];function r(s){n[s.name]||(n[s.name]=1,i.push(s))}return e.forEach(r),t.forEach(r),i}function at(t){return t[t.length-1]}function xi(t){return t==null||t===""?null:+t}const YK=t=>e=>t*Math.exp(e),qK=t=>e=>Math.log(t*e),KK=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),XK=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,vb=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function wR(t,e,n,i){const r=n(t[0]),s=n(at(t)),o=(s-r)*e;return[i(r-o),i(s-o)]}function QK(t,e){return wR(t,e,xi,Li)}function JK(t,e){var n=Math.sign(t[0]);return wR(t,e,qK(n),YK(n))}function ZK(t,e,n){return wR(t,e,vb(n),vb(1/n))}function eX(t,e,n){return wR(t,e,KK(n),XK(n))}function SR(t,e,n,i,r){const s=i(t[0]),o=i(at(t)),a=e!=null?i(e):(s+o)/2;return[r(a+(s-a)*n),r(a+(o-a)*n)]}function HI(t,e,n){return SR(t,e,n,xi,Li)}function WI(t,e,n){const i=Math.sign(t[0]);return SR(t,e,n,qK(i),YK(i))}function Cb(t,e,n,i){return SR(t,e,n,vb(i),vb(1/i))}function VI(t,e,n,i){return SR(t,e,n,KK(i),XK(i))}function tX(t){return 1+~~(new Date(t).getMonth()/3)}function nX(t){return 1+~~(new Date(t).getUTCMonth()/3)}function de(t){return t!=null?j(t)?t:[t]:[]}function iX(t,e,n){let i=t[0],r=t[1],s;return r<i&&(s=r,r=i,i=s),s=r-i,s>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-s),i+s]}function Ue(t){return typeof t=="function"}const Gxe="descending";function BI(t,e,n){n=n||{},e=de(e)||[];const i=[],r=[],s={},o=n.comparator||$xe;return de(t).forEach((a,l)=>{a!=null&&(i.push(e[l]===Gxe?-1:1),r.push(a=Ue(a)?a:Gr(a,null,n)),(Ai(a)||[]).forEach(u=>s[u]=1))}),r.length===0?null:Kr(o(r,i),Object.keys(s))}const ER=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),$xe=(t,e)=>t.length===1?Hxe(t[0],e[0]):Wxe(t,e,t.length),Hxe=(t,e)=>function(n,i){return ER(t(n),t(i))*e},Wxe=(t,e,n)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;o===0&&++a<n;)s=t[a],o=ER(s(i),s(r));return o*e[a]});function Ii(t){return Ue(t)?t:()=>t}function zI(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function ze(t){for(let e,n,i=1,r=arguments.length;i<r;++i){e=arguments[i];for(n in e)t[n]=e[n]}return t}function tl(t,e){let n=0,i,r,s,o;if(t&&(i=t.length))if(e==null){for(r=t[n];n<i&&(r==null||r!==r);r=t[++n]);for(s=o=r;n<i;++n)r=t[n],r!=null&&(r<s&&(s=r),r>o&&(o=r))}else{for(r=e(t[n]);n<i&&(r==null||r!==r);r=e(t[++n]));for(s=o=r;n<i;++n)r=e(t[n]),r!=null&&(r<s&&(s=r),r>o&&(o=r))}return[s,o]}function rX(t,e){const n=t.length;let i=-1,r,s,o,a,l;if(e==null){for(;++i<n;)if(s=t[i],s!=null&&s>=s){r=o=s;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)s=t[i],s!=null&&(r>s&&(r=s,a=i),o<s&&(o=s,l=i))}else{for(;++i<n;)if(s=e(t[i],i,t),s!=null&&s>=s){r=o=s;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)s=e(t[i],i,t),s!=null&&(r>s&&(r=s,a=i),o<s&&(o=s,l=i))}return[a,l]}const Vxe=Object.prototype.hasOwnProperty;function Ae(t,e){return Vxe.call(t,e)}const Pw={};function Hm(t){let e={},n;function i(s){return Ae(e,s)&&e[s]!==Pw}const r={size:0,empty:0,object:e,has:i,get(s){return i(s)?e[s]:void 0},set(s,o){return i(s)||(++r.size,e[s]===Pw&&--r.empty),e[s]=o,this},delete(s){return i(s)&&(--r.size,++r.empty,e[s]=Pw),this},clear(){r.size=r.empty=0,r.object=e={}},test(s){return arguments.length?(n=s,r):n},clean(){const s={};let o=0;for(const a in e){const l=e[a];l!==Pw&&(!n||!n(l))&&(s[a]=l,++o)}r.size=o,r.empty=0,r.object=e=s}};return t&&Object.keys(t).forEach(s=>{r.set(s,t[s])}),r}function sX(t,e,n,i,r,s){if(!n&&n!==0)return s;const o=+n;let a=t[0],l=at(t),u;l<a&&(u=a,a=l,l=u),u=Math.abs(e-a);const c=Math.abs(l-e);return u<c&&u<=o?i:c<=o?r:s}function le(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),ze(i,n)}function Op(t,e,n,i){let r=e[0],s=e[e.length-1],o;return r>s&&(o=r,r=s,s=o),n=n===void 0||n,i=i===void 0||i,(n?r<=t:r<t)&&(i?t<=s:t<s)}function yd(t){return typeof t=="boolean"}function Rc(t){return Object.prototype.toString.call(t)==="[object Date]"}function oX(t){return t&&Ue(t[Symbol.iterator])}function ft(t){return typeof t=="number"}function aX(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ce(t){return typeof t=="string"}function UI(t,e,n){t&&(t=e?de(t).map(a=>a.replace(/\\(.)/g,"$1")):de(t));const i=t&&t.length,r=n&&n.get||BK,s=a=>r(e?[a]:ml(a));let o;if(!i)o=function(){return""};else if(i===1){const a=s(t[0]);o=function(l){return""+a(l)}}else{const a=t.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<i;)u+="|"+a[c](l);return u}}return Kr(o,t,"key")}function lX(t,e){const n=t[0],i=at(t),r=+e;return r?r===1?i:n+r*(i-n):n}const Bxe=1e4;function uX(t){t=+t||Bxe;let e,n,i;const r=()=>{e={},n={},i=0},s=(o,a)=>(++i>t&&(n=e,e={},i=1),e[o]=a);return r(),{clear:r,has:o=>Ae(e,o)||Ae(n,o),get:o=>Ae(e,o)?e[o]:Ae(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ae(e,o)?e[o]=a:s(o,a)}}function cX(t,e,n,i){const r=e.length,s=n.length;if(!s)return e;if(!r)return n;const o=i||new e.constructor(r+s);let a=0,l=0,u=0;for(;a<r&&l<s;++u)o[u]=t(e[a],n[l])>0?n[l++]:e[a++];for(;a<r;++a,++u)o[u]=e[a];for(;l<s;++l,++u)o[u]=n[l];return o}function e0(t,e){let n="";for(;--e>=0;)n+=t;return n}function dX(t,e,n,i){const r=n||" ",s=t+"",o=e-s.length;return o<=0?s:i==="left"?e0(r,o)+s:i==="center"?e0(r,~~(o/2))+s+e0(r,Math.ceil(o/2)):s+e0(r,o)}function mC(t){return t&&at(t)-t[0]||0}function ae(t){return j(t)?"["+t.map(ae)+"]":he(t)||ce(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function jI(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const zxe=t=>ft(t)||Rc(t)?t:Date.parse(t);function YI(t,e){return e=e||zxe,t==null||t===""?null:e(t)}function qI(t){return t==null||t===""?null:t+""}function ta(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function hX(t,e,n,i){const r=i??"",s=t+"",o=s.length,a=Math.max(0,e-r.length);return o<=e?s:n==="left"?r+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+r+s.slice(o-~~(a/2)):s.slice(0,a)+r}function qu(t,e,n){if(t)if(e){const i=t.length;for(let r=0;r<i;++r){const s=e(t[r]);s&&n(s,r,t)}}else t.forEach(n)}var n6={},wD={},SD=34,vy=10,ED=13;function fX(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Uxe(t,e){var n=fX(t);return function(i,r){return e(n(i),r,t)}}function i6(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function mr(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function jxe(t){return t<0?"-"+mr(-t,6):t>9999?"+"+mr(t,6):mr(t,4)}function Yxe(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":jxe(t.getUTCFullYear())+"-"+mr(t.getUTCMonth()+1,2)+"-"+mr(t.getUTCDate(),2)+(r?"T"+mr(e,2)+":"+mr(n,2)+":"+mr(i,2)+"."+mr(r,3)+"Z":i?"T"+mr(e,2)+":"+mr(n,2)+":"+mr(i,2)+"Z":n||e?"T"+mr(e,2)+":"+mr(n,2)+"Z":"")}function qxe(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(d,h){var f,p,g=r(d,function(m,y){if(f)return f(m,y-1);p=m,f=h?Uxe(m,h):fX(m)});return g.columns=p||[],g}function r(d,h){var f=[],p=d.length,g=0,m=0,y,v=p<=0,C=!1;d.charCodeAt(p-1)===vy&&--p,d.charCodeAt(p-1)===ED&&--p;function w(){if(v)return wD;if(C)return C=!1,n6;var b,S=g,_;if(d.charCodeAt(S)===SD){for(;g++<p&&d.charCodeAt(g)!==SD||d.charCodeAt(++g)===SD;);return(b=g)>=p?v=!0:(_=d.charCodeAt(g++))===vy?C=!0:_===ED&&(C=!0,d.charCodeAt(g)===vy&&++g),d.slice(S+1,b-1).replace(/""/g,'"')}for(;g<p;){if((_=d.charCodeAt(b=g++))===vy)C=!0;else if(_===ED)C=!0,d.charCodeAt(g)===vy&&++g;else if(_!==n)continue;return d.slice(S,b)}return v=!0,d.slice(S,p)}for(;(y=w())!==wD;){for(var E=[];y!==n6&&y!==wD;)E.push(y),y=w();h&&(E=h(E,m++))==null||f.push(E)}return f}function s(d,h){return d.map(function(f){return h.map(function(p){return c(f[p])}).join(t)})}function o(d,h){return h==null&&(h=i6(d)),[h.map(c).join(t)].concat(s(d,h)).join(`
`)}function a(d,h){return h==null&&(h=i6(d)),s(d,h).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(t)}function c(d){return d==null?"":d instanceof Date?Yxe(d):e.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:i,parseRows:r,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function Kxe(t){return t}function Xxe(t){if(t==null)return Kxe;var e,n,i=t.scale[0],r=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(e+=a[0])*i+s,d[1]=(n+=a[1])*r+o;u<c;)d[u]=a[u],++u;return d}}function Qxe(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}function Jxe(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return r6(t,n)})}:r6(t,e)}function r6(t,e){var n=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=pX(t,e);return n==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function pX(t,e){var n=Xxe(t.transform),i=t.arcs;function r(c,d){d.length&&d.pop();for(var h=i[c<0?~c:c],f=0,p=h.length;f<p;++f)d.push(n(h[f],f));c<0&&Qxe(d,p)}function s(c){return n(c)}function o(c){for(var d=[],h=0,f=c.length;h<f;++h)r(c[h],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}function u(c){var d=c.type,h;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":h=s(c.coordinates);break;case"MultiPoint":h=c.coordinates.map(s);break;case"LineString":h=o(c.arcs);break;case"MultiLineString":h=c.arcs.map(o);break;case"Polygon":h=l(c.arcs);break;case"MultiPolygon":h=c.arcs.map(l);break;default:return null}return{type:d,coordinates:h}}return u(e)}function Zxe(t,e){var n={},i={},r={},s=[],o=-1;e.forEach(function(u,c){var d=t.arcs[u<0?~u:u],h;d.length<3&&!d[1][0]&&!d[1][1]&&(h=e[++o],e[o]=u,e[c]=h)}),e.forEach(function(u){var c=a(u),d=c[0],h=c[1],f,p;if(f=r[d])if(delete r[f.end],f.push(u),f.end=h,p=i[h]){delete i[p.start];var g=p===f?f:f.concat(p);i[g.start=f.start]=r[g.end=p.end]=g}else i[f.start]=r[f.end]=f;else if(f=i[h])if(delete i[f.start],f.unshift(u),f.start=d,p=r[d]){delete r[p.end];var m=p===f?f:p.concat(f);i[m.start=p.start]=r[m.end=f.end]=m}else i[f.start]=r[f.end]=f;else f=[u],i[f.start=d]=r[f.end=h]=f});function a(u){var c=t.arcs[u<0?~u:u],d=c[0],h;return t.transform?(h=[0,0],c.forEach(function(f){h[0]+=f[0],h[1]+=f[1]})):h=c[c.length-1],u<0?[h,d]:[d,h]}function l(u,c){for(var d in u){var h=u[d];delete c[h.start],delete h.start,delete h.end,h.forEach(function(f){n[f<0?~f:f]=1}),s.push(h)}}return l(r,i),l(i,r),e.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function e_e(t){return pX(t,t_e.apply(this,arguments))}function t_e(t,e,n){var i,r,s;if(arguments.length>1)i=n_e(t,e,n);else for(r=0,i=new Array(s=t.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:Zxe(t,i)}}function n_e(t,e,n){var i=[],r=[],s;function o(d){var h=d<0?~d:d;(r[h]||(r[h]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(e),r.forEach(n==null?function(d){i.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}function nu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i_e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yC(t){let e,n,i;t.length!==2?(e=nu,n=(a,l)=>nu(t(a),l),i=(a,l)=>t(a)-l):(e=t===nu||t===i_e?t:r_e,n=t,i=t);function r(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=r(a,l,u,c-1);return d>u&&i(a[d-1],l)>-i(a[d],l)?d-1:d}return{left:r,center:o,right:s}}function r_e(){return 0}function gX(t){return t===null?NaN:+t}function*s_e(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const mX=yC(nu),wb=mX.right,o_e=mX.left;yC(gX).center;const vC=wb;function a_e(t,e){let n=0,i,r=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function l_e(t,e){const n=a_e(t,e);return n&&Math.sqrt(n)}class nr{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[i++]=a),e=o}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=e[--n];n>0&&(i=o,r=e[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class s6 extends Map{constructor(e,n=CX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(NP(this,e))}has(e){return super.has(NP(this,e))}set(e,n){return super.set(yX(this,e),n)}delete(e){return super.delete(vX(this,e))}}class Sb extends Set{constructor(e,n=CX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(NP(this,e))}add(e){return super.add(yX(this,e))}delete(e){return super.delete(vX(this,e))}}function NP({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function yX({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function vX({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function CX(t){return t!==null&&typeof t=="object"?t.valueOf():t}function u_e(t,e){return Array.from(e,n=>t[n])}function c_e(t=nu){if(t===nu)return wX;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function wX(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const d_e=Math.sqrt(50),h_e=Math.sqrt(10),f_e=Math.sqrt(2);function Eb(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=d_e?10:s>=h_e?5:s>=f_e?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?Eb(t,e,n*2):[a,l,u]}function LP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,o]=i?Eb(e,t,n):Eb(t,e,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(r+u)/-o;else for(let u=0;u<a;++u)l[u]=(r+u)*o;return l}function IP(t,e,n){return e=+e,t=+t,n=+n,Eb(t,e,n)[2]}function Wc(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?IP(e,t,n):IP(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function bh(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function kP(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function SX(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?wX:c_e(r);i>n;){if(i-n>600){const l=i-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),f=Math.max(n,Math.floor(e-u*d/l+h)),p=Math.min(i,Math.floor(e+(l-u)*d/l+h));SX(t,e,f,p,r)}const s=t[e];let o=n,a=i;for(Cy(t,n,e),r(t[i],s)>0&&Cy(t,n,i);o<a;){for(Cy(t,o,a),++o,--a;r(t[o],s)<0;)++o;for(;r(t[a],s)>0;)--a}r(t[n],s)===0?Cy(t,n,a):(++a,Cy(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function Cy(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function GP(t,e,n){if(t=Float64Array.from(s_e(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return kP(t);if(e>=1)return bh(t);var i,r=(i-1)*e,s=Math.floor(r),o=bh(SX(t,s).subarray(0,s+1)),a=kP(t.subarray(s+1));return o+(a-o)*(r-s)}}function EX(t,e,n=gX){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(r-s)}}function p_e(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function bX(t,e){return GP(t,.5,e)}function*g_e(t){for(const e of t)yield*e}function xX(t){return Array.from(g_e(t))}function ps(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function _X(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function m_e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Rg(t){return t=bb(Math.abs(t)),t?t[1]:NaN}function y_e(t,e){return function(n,i){for(var r=n.length,s=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function v_e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var C_e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uh(t){if(!(e=C_e.exec(t)))throw new Error("invalid format: "+t);var e;return new KI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Uh.prototype=KI.prototype;function KI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function w_e(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var RX;function S_e(t,e){var n=bb(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(RX=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+bb(t,Math.max(0,e+s-1))[0]}function o6(t,e){var n=bb(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const a6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:m_e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>o6(t*100,e),r:o6,s:S_e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function l6(t){return t}var u6=Array.prototype.map,c6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function TX(t){var e=t.grouping===void 0||t.thousands===void 0?l6:y_e(u6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?l6:v_e(u6.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=Uh(d);var h=d.fill,f=d.align,p=d.sign,g=d.symbol,m=d.zero,y=d.width,v=d.comma,C=d.precision,w=d.trim,E=d.type;E==="n"?(v=!0,E="g"):a6[E]||(C===void 0&&(C=12),w=!0,E="g"),(m||h==="0"&&f==="=")&&(m=!0,h="0",f="=");var b=g==="$"?n:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=g==="$"?i:/[%p]/.test(E)?o:"",_=a6[E],A=/[defgprs%]/.test(E);C=C===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function D(P){var L=b,O=S,M,F,I;if(E==="c")O=_(P)+O,P="";else{P=+P;var H=P<0||1/P<0;if(P=isNaN(P)?l:_(Math.abs(P),C),w&&(P=w_e(P)),H&&+P==0&&p!=="+"&&(H=!1),L=(H?p==="("?p:a:p==="-"||p==="("?"":p)+L,O=(E==="s"?c6[8+RX/3]:"")+O+(H&&p==="("?")":""),A){for(M=-1,F=P.length;++M<F;)if(I=P.charCodeAt(M),48>I||I>57){O=(I===46?r+P.slice(M+1):P.slice(M))+O,P=P.slice(0,M);break}}}v&&!m&&(P=e(P,1/0));var N=L.length+P.length+O.length,G=N<y?new Array(y-N+1).join(h):"";switch(v&&m&&(P=e(G+P,G.length?y-O.length:1/0),G=""),f){case"<":P=L+P+O+G;break;case"=":P=L+G+P+O;break;case"^":P=G.slice(0,N=G.length>>1)+L+P+O+G.slice(N);break;default:P=G+L+P+O;break}return s(P)}return D.toString=function(){return d+""},D}function c(d,h){var f=u((d=Uh(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(Rg(h)/3)))*3,g=Math.pow(10,-p),m=c6[8+p/3];return function(y){return f(g*y)+m}}return{format:u,formatPrefix:c}}var Fw,bR,XI;E_e({thousands:",",grouping:[3],currency:["$",""]});function E_e(t){return Fw=TX(t),bR=Fw.format,XI=Fw.formatPrefix,Fw}function AX(t){return Math.max(0,-Rg(Math.abs(t)))}function DX(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rg(e)/3)))*3-Rg(Math.abs(t)))}function OX(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rg(e)-Rg(t))+1}const bD=new Date,xD=new Date;function Dn(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},r.filter=s=>Dn(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(r.count=(s,o)=>(bD.setTime(+s),xD.setTime(+o),t(bD),t(xD),Math.floor(n(bD,xD))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const Tg=Dn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Tg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Dn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Tg);Tg.range;const Ul=1e3,Bs=Ul*60,jl=Bs*60,yu=jl*24,QI=yu*7,d6=yu*30,_D=yu*365,Yl=Dn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ul)},(t,e)=>(e-t)/Ul,t=>t.getUTCSeconds());Yl.range;const xR=Dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ul)},(t,e)=>{t.setTime(+t+e*Bs)},(t,e)=>(e-t)/Bs,t=>t.getMinutes());xR.range;const _R=Dn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Bs)},(t,e)=>(e-t)/Bs,t=>t.getUTCMinutes());_R.range;const RR=Dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ul-t.getMinutes()*Bs)},(t,e)=>{t.setTime(+t+e*jl)},(t,e)=>(e-t)/jl,t=>t.getHours());RR.range;const TR=Dn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*jl)},(t,e)=>(e-t)/jl,t=>t.getUTCHours());TR.range;const iu=Dn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Bs)/yu,t=>t.getDate()-1);iu.range;const Tc=Dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/yu,t=>t.getUTCDate()-1);Tc.range;const PX=Dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/yu,t=>Math.floor(t/yu));PX.range;function Mf(t){return Dn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Bs)/QI)}const Wm=Mf(0),xb=Mf(1),b_e=Mf(2),x_e=Mf(3),Ag=Mf(4),__e=Mf(5),R_e=Mf(6);Wm.range;xb.range;b_e.range;x_e.range;Ag.range;__e.range;R_e.range;function Nf(t){return Dn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/QI)}const Vm=Nf(0),_b=Nf(1),T_e=Nf(2),A_e=Nf(3),Dg=Nf(4),D_e=Nf(5),O_e=Nf(6);Vm.range;_b.range;T_e.range;A_e.range;Dg.range;D_e.range;O_e.range;const zv=Dn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());zv.range;const Uv=Dn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Uv.range;const nl=Dn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());nl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});nl.range;const il=Dn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());il.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});il.range;function FX(t,e,n,i,r,s){const o=[[Yl,1,Ul],[Yl,5,5*Ul],[Yl,15,15*Ul],[Yl,30,30*Ul],[s,1,Bs],[s,5,5*Bs],[s,15,15*Bs],[s,30,30*Bs],[r,1,jl],[r,3,3*jl],[r,6,6*jl],[r,12,12*jl],[i,1,yu],[i,2,2*yu],[n,1,QI],[e,1,d6],[e,3,3*d6],[t,1,_D]];function a(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const f=d&&typeof d.range=="function"?d:l(u,c,d),p=f?f.range(u,+c+1):[];return h?p.reverse():p}function l(u,c,d){const h=Math.abs(c-u)/d,f=yC(([,,m])=>m).right(o,h);if(f===o.length)return t.every(Wc(u/_D,c/_D,d));if(f===0)return Tg.every(Math.max(Wc(u,c,d),1));const[p,g]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return p.every(g)}return[a,l]}const[P_e,F_e]=FX(il,Uv,Vm,PX,TR,_R),[M_e,N_e]=FX(nl,zv,Wm,iu,RR,xR),ni="year",$r="quarter",Di="month",_n="week",Hr="date",Ei="day",rl="dayofyear",ws="hours",Ss="minutes",so="seconds",na="milliseconds",JI=[ni,$r,Di,_n,Hr,Ei,rl,ws,Ss,so,na],RD=JI.reduce((t,e,n)=>(t[e]=1+n,t),{});function ZI(t){const e=de(t).slice(),n={};return e.length||U("Missing time unit."),e.forEach(r=>{Ae(RD,r)?n[r]=1:U(`Invalid time unit: ${r}.`)}),(n[_n]||n[Ei]?1:0)+(n[$r]||n[Di]||n[Hr]?1:0)+(n[rl]?1:0)>1&&U(`Incompatible time units: ${t}`),e.sort((r,s)=>RD[r]-RD[s]),e}const L_e={[ni]:"%Y ",[$r]:"Q%q ",[Di]:"%b ",[Hr]:"%d ",[_n]:"W%U ",[Ei]:"%a ",[rl]:"%j ",[ws]:"%H:00",[Ss]:"00:%M",[so]:":%S",[na]:".%L",[`${ni}-${Di}`]:"%Y-%m ",[`${ni}-${Di}-${Hr}`]:"%Y-%m-%d ",[`${ws}-${Ss}`]:"%H:%M"};function MX(t,e){const n=ze({},L_e,e),i=ZI(t),r=i.length;let s="",o=0,a,l;for(o=0;o<r;)for(a=i.length;a>o;--a)if(l=i.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const Jd=new Date;function e3(t){return Jd.setFullYear(t),Jd.setMonth(0),Jd.setDate(1),Jd.setHours(0,0,0,0),Jd}function NX(t){return IX(new Date(t))}function LX(t){return $P(new Date(t))}function IX(t){return iu.count(e3(t.getFullYear())-1,t)}function $P(t){return Wm.count(e3(t.getFullYear())-1,t)}function HP(t){return e3(t).getDay()}function I_e(t,e,n,i,r,s,o){if(0<=t&&t<100){const a=new Date(-1,e,n,i,r,s,o);return a.setFullYear(t),a}return new Date(t,e,n,i,r,s,o)}function kX(t){return $X(new Date(t))}function GX(t){return WP(new Date(t))}function $X(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Tc.count(e-1,t)}function WP(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Vm.count(e-1,t)}function VP(t){return Jd.setTime(Date.UTC(t,0,1)),Jd.getUTCDay()}function k_e(t,e,n,i,r,s,o){if(0<=t&&t<100){const a=new Date(Date.UTC(-1,e,n,i,r,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(t,e,n,i,r,s,o))}function HX(t,e,n,i,r){const s=e||1,o=at(t),a=(y,v,C)=>(C=C||y,G_e(n[C],i[C],y===o&&s,v)),l=new Date,u=ta(t),c=u[ni]?a(ni):Ii(2012),d=u[Di]?a(Di):u[$r]?a($r):tc,h=u[_n]&&u[Ei]?a(Ei,1,_n+Ei):u[_n]?a(_n,1):u[Ei]?a(Ei,1):u[Hr]?a(Hr,1):u[rl]?a(rl,1):km,f=u[ws]?a(ws):tc,p=u[Ss]?a(Ss):tc,g=u[so]?a(so):tc,m=u[na]?a(na):tc;return function(y){l.setTime(+y);const v=c(l);return r(v,d(l),h(l,v),f(l),p(l),g(l),m(l))}}function G_e(t,e,n,i){const r=n<=1?t:i?(s,o)=>i+n*Math.floor((t(s,o)-i)/n):(s,o)=>n*Math.floor(t(s,o)/n);return e?(s,o)=>e(r(s,o),o):r}function Og(t,e,n){return e+t*7-(n+6)%7}const $_e={[ni]:t=>t.getFullYear(),[$r]:t=>Math.floor(t.getMonth()/3),[Di]:t=>t.getMonth(),[Hr]:t=>t.getDate(),[ws]:t=>t.getHours(),[Ss]:t=>t.getMinutes(),[so]:t=>t.getSeconds(),[na]:t=>t.getMilliseconds(),[rl]:t=>IX(t),[_n]:t=>$P(t),[_n+Ei]:(t,e)=>Og($P(t),t.getDay(),HP(e)),[Ei]:(t,e)=>Og(1,t.getDay(),HP(e))},H_e={[$r]:t=>3*t,[_n]:(t,e)=>Og(t,0,HP(e))};function WX(t,e){return HX(t,e||1,$_e,H_e,I_e)}const W_e={[ni]:t=>t.getUTCFullYear(),[$r]:t=>Math.floor(t.getUTCMonth()/3),[Di]:t=>t.getUTCMonth(),[Hr]:t=>t.getUTCDate(),[ws]:t=>t.getUTCHours(),[Ss]:t=>t.getUTCMinutes(),[so]:t=>t.getUTCSeconds(),[na]:t=>t.getUTCMilliseconds(),[rl]:t=>$X(t),[_n]:t=>WP(t),[Ei]:(t,e)=>Og(1,t.getUTCDay(),VP(e)),[_n+Ei]:(t,e)=>Og(WP(t),t.getUTCDay(),VP(e))},V_e={[$r]:t=>3*t,[_n]:(t,e)=>Og(t,0,VP(e))};function VX(t,e){return HX(t,e||1,W_e,V_e,k_e)}const B_e={[ni]:nl,[$r]:zv.every(3),[Di]:zv,[_n]:Wm,[Hr]:iu,[Ei]:iu,[rl]:iu,[ws]:RR,[Ss]:xR,[so]:Yl,[na]:Tg},z_e={[ni]:il,[$r]:Uv.every(3),[Di]:Uv,[_n]:Vm,[Hr]:Tc,[Ei]:Tc,[rl]:Tc,[ws]:TR,[Ss]:_R,[so]:Yl,[na]:Tg};function Bm(t){return B_e[t]}function zm(t){return z_e[t]}function BX(t,e,n){return t?t.offset(e,n):void 0}function zX(t,e,n){return BX(Bm(t),e,n)}function UX(t,e,n){return BX(zm(t),e,n)}function jX(t,e,n,i){return t?t.range(e,n,i):void 0}function YX(t,e,n,i){return jX(Bm(t),e,n,i)}function qX(t,e,n,i){return jX(zm(t),e,n,i)}const t0=1e3,n0=t0*60,i0=n0*60,AR=i0*24,U_e=AR*7,h6=AR*30,BP=AR*365,KX=[ni,Di,Hr,ws,Ss,so,na],r0=KX.slice(0,-1),s0=r0.slice(0,-1),o0=s0.slice(0,-1),j_e=o0.slice(0,-1),Y_e=[ni,_n],f6=[ni,Di],XX=[ni],wy=[[r0,1,t0],[r0,5,5*t0],[r0,15,15*t0],[r0,30,30*t0],[s0,1,n0],[s0,5,5*n0],[s0,15,15*n0],[s0,30,30*n0],[o0,1,i0],[o0,3,3*i0],[o0,6,6*i0],[o0,12,12*i0],[j_e,1,AR],[Y_e,1,U_e],[f6,1,h6],[f6,3,3*h6],[XX,1,BP]];function QX(t){const e=t.extent,n=t.maxbins||40,i=Math.abs(mC(e))/n;let r=yC(a=>a[2]).right(wy,i),s,o;return r===wy.length?(s=XX,o=Wc(e[0]/BP,e[1]/BP,n)):r?(r=wy[i/wy[r-1][2]<wy[r][2]/i?r-1:r],s=r[0],o=r[1]):(s=KX,o=Math.max(Wc(e[0],e[1],n),1)),{units:s,step:o}}function TD(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function AD(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sy(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function JX(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=Ey(r),c=by(r),d=Ey(s),h=by(s),f=Ey(o),p=by(o),g=Ey(a),m=by(a),y=Ey(l),v=by(l),C={a:H,A:N,b:G,B:W,c:null,d:C6,e:C6,f:mRe,g:RRe,G:ARe,H:fRe,I:pRe,j:gRe,L:ZX,m:yRe,M:vRe,p:X,q:ne,Q:E6,s:b6,S:CRe,u:wRe,U:SRe,V:ERe,w:bRe,W:xRe,x:null,X:null,y:_Re,Y:TRe,Z:DRe,"%":S6},w={a:Se,A:xe,b:rt,B:cn,c:null,d:w6,e:w6,f:MRe,g:BRe,G:URe,H:ORe,I:PRe,j:FRe,L:tQ,m:NRe,M:LRe,p:Gi,q:yo,Q:E6,s:b6,S:IRe,u:kRe,U:GRe,V:$Re,w:HRe,W:WRe,x:null,X:null,y:VRe,Y:zRe,Z:jRe,"%":S6},E={a:D,A:P,b:L,B:O,c:M,d:y6,e:y6,f:uRe,g:m6,G:g6,H:v6,I:v6,j:sRe,L:lRe,m:rRe,M:oRe,p:A,q:iRe,Q:dRe,s:hRe,S:aRe,u:J_e,U:Z_e,V:eRe,w:Q_e,W:tRe,x:F,X:I,y:m6,Y:g6,Z:nRe,"%":cRe};C.x=b(n,C),C.X=b(i,C),C.c=b(e,C),w.x=b(n,w),w.X=b(i,w),w.c=b(e,w);function b(fe,ve){return function(Ee){var Y=[],De=-1,Oe=0,Ze=fe.length,Ct,ma,dn;for(Ee instanceof Date||(Ee=new Date(+Ee));++De<Ze;)fe.charCodeAt(De)===37&&(Y.push(fe.slice(Oe,De)),(ma=p6[Ct=fe.charAt(++De)])!=null?Ct=fe.charAt(++De):ma=Ct==="e"?" ":"0",(dn=ve[Ct])&&(Ct=dn(Ee,ma)),Y.push(Ct),Oe=De+1);return Y.push(fe.slice(Oe,De)),Y.join("")}}function S(fe,ve){return function(Ee){var Y=Sy(1900,void 0,1),De=_(Y,fe,Ee+="",0),Oe,Ze;if(De!=Ee.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(ve&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(Oe=AD(Sy(Y.y,0,1)),Ze=Oe.getUTCDay(),Oe=Ze>4||Ze===0?_b.ceil(Oe):_b(Oe),Oe=Tc.offset(Oe,(Y.V-1)*7),Y.y=Oe.getUTCFullYear(),Y.m=Oe.getUTCMonth(),Y.d=Oe.getUTCDate()+(Y.w+6)%7):(Oe=TD(Sy(Y.y,0,1)),Ze=Oe.getDay(),Oe=Ze>4||Ze===0?xb.ceil(Oe):xb(Oe),Oe=iu.offset(Oe,(Y.V-1)*7),Y.y=Oe.getFullYear(),Y.m=Oe.getMonth(),Y.d=Oe.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),Ze="Z"in Y?AD(Sy(Y.y,0,1)).getUTCDay():TD(Sy(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(Ze+5)%7:Y.w+Y.U*7-(Ze+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,AD(Y)):TD(Y)}}function _(fe,ve,Ee,Y){for(var De=0,Oe=ve.length,Ze=Ee.length,Ct,ma;De<Oe;){if(Y>=Ze)return-1;if(Ct=ve.charCodeAt(De++),Ct===37){if(Ct=ve.charAt(De++),ma=E[Ct in p6?ve.charAt(De++):Ct],!ma||(Y=ma(fe,Ee,Y))<0)return-1}else if(Ct!=Ee.charCodeAt(Y++))return-1}return Y}function A(fe,ve,Ee){var Y=u.exec(ve.slice(Ee));return Y?(fe.p=c.get(Y[0].toLowerCase()),Ee+Y[0].length):-1}function D(fe,ve,Ee){var Y=f.exec(ve.slice(Ee));return Y?(fe.w=p.get(Y[0].toLowerCase()),Ee+Y[0].length):-1}function P(fe,ve,Ee){var Y=d.exec(ve.slice(Ee));return Y?(fe.w=h.get(Y[0].toLowerCase()),Ee+Y[0].length):-1}function L(fe,ve,Ee){var Y=y.exec(ve.slice(Ee));return Y?(fe.m=v.get(Y[0].toLowerCase()),Ee+Y[0].length):-1}function O(fe,ve,Ee){var Y=g.exec(ve.slice(Ee));return Y?(fe.m=m.get(Y[0].toLowerCase()),Ee+Y[0].length):-1}function M(fe,ve,Ee){return _(fe,e,ve,Ee)}function F(fe,ve,Ee){return _(fe,n,ve,Ee)}function I(fe,ve,Ee){return _(fe,i,ve,Ee)}function H(fe){return o[fe.getDay()]}function N(fe){return s[fe.getDay()]}function G(fe){return l[fe.getMonth()]}function W(fe){return a[fe.getMonth()]}function X(fe){return r[+(fe.getHours()>=12)]}function ne(fe){return 1+~~(fe.getMonth()/3)}function Se(fe){return o[fe.getUTCDay()]}function xe(fe){return s[fe.getUTCDay()]}function rt(fe){return l[fe.getUTCMonth()]}function cn(fe){return a[fe.getUTCMonth()]}function Gi(fe){return r[+(fe.getUTCHours()>=12)]}function yo(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var ve=b(fe+="",C);return ve.toString=function(){return fe},ve},parse:function(fe){var ve=S(fe+="",!1);return ve.toString=function(){return fe},ve},utcFormat:function(fe){var ve=b(fe+="",w);return ve.toString=function(){return fe},ve},utcParse:function(fe){var ve=S(fe+="",!0);return ve.toString=function(){return fe},ve}}}var p6={"-":"",_:" ",0:"0"},qn=/^\s*\d+/,q_e=/^%/,K_e=/[\\^$*+?|[\]().{}]/g;function gt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function X_e(t){return t.replace(K_e,"\\$&")}function Ey(t){return new RegExp("^(?:"+t.map(X_e).join("|")+")","i")}function by(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Q_e(t,e,n){var i=qn.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function J_e(t,e,n){var i=qn.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Z_e(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function eRe(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function tRe(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function g6(t,e,n){var i=qn.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function m6(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function nRe(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function iRe(t,e,n){var i=qn.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function rRe(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function y6(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function sRe(t,e,n){var i=qn.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function v6(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function oRe(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function aRe(t,e,n){var i=qn.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function lRe(t,e,n){var i=qn.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function uRe(t,e,n){var i=qn.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function cRe(t,e,n){var i=q_e.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function dRe(t,e,n){var i=qn.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function hRe(t,e,n){var i=qn.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function C6(t,e){return gt(t.getDate(),e,2)}function fRe(t,e){return gt(t.getHours(),e,2)}function pRe(t,e){return gt(t.getHours()%12||12,e,2)}function gRe(t,e){return gt(1+iu.count(nl(t),t),e,3)}function ZX(t,e){return gt(t.getMilliseconds(),e,3)}function mRe(t,e){return ZX(t,e)+"000"}function yRe(t,e){return gt(t.getMonth()+1,e,2)}function vRe(t,e){return gt(t.getMinutes(),e,2)}function CRe(t,e){return gt(t.getSeconds(),e,2)}function wRe(t){var e=t.getDay();return e===0?7:e}function SRe(t,e){return gt(Wm.count(nl(t)-1,t),e,2)}function eQ(t){var e=t.getDay();return e>=4||e===0?Ag(t):Ag.ceil(t)}function ERe(t,e){return t=eQ(t),gt(Ag.count(nl(t),t)+(nl(t).getDay()===4),e,2)}function bRe(t){return t.getDay()}function xRe(t,e){return gt(xb.count(nl(t)-1,t),e,2)}function _Re(t,e){return gt(t.getFullYear()%100,e,2)}function RRe(t,e){return t=eQ(t),gt(t.getFullYear()%100,e,2)}function TRe(t,e){return gt(t.getFullYear()%1e4,e,4)}function ARe(t,e){var n=t.getDay();return t=n>=4||n===0?Ag(t):Ag.ceil(t),gt(t.getFullYear()%1e4,e,4)}function DRe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gt(e/60|0,"0",2)+gt(e%60,"0",2)}function w6(t,e){return gt(t.getUTCDate(),e,2)}function ORe(t,e){return gt(t.getUTCHours(),e,2)}function PRe(t,e){return gt(t.getUTCHours()%12||12,e,2)}function FRe(t,e){return gt(1+Tc.count(il(t),t),e,3)}function tQ(t,e){return gt(t.getUTCMilliseconds(),e,3)}function MRe(t,e){return tQ(t,e)+"000"}function NRe(t,e){return gt(t.getUTCMonth()+1,e,2)}function LRe(t,e){return gt(t.getUTCMinutes(),e,2)}function IRe(t,e){return gt(t.getUTCSeconds(),e,2)}function kRe(t){var e=t.getUTCDay();return e===0?7:e}function GRe(t,e){return gt(Vm.count(il(t)-1,t),e,2)}function nQ(t){var e=t.getUTCDay();return e>=4||e===0?Dg(t):Dg.ceil(t)}function $Re(t,e){return t=nQ(t),gt(Dg.count(il(t),t)+(il(t).getUTCDay()===4),e,2)}function HRe(t){return t.getUTCDay()}function WRe(t,e){return gt(_b.count(il(t)-1,t),e,2)}function VRe(t,e){return gt(t.getUTCFullYear()%100,e,2)}function BRe(t,e){return t=nQ(t),gt(t.getUTCFullYear()%100,e,2)}function zRe(t,e){return gt(t.getUTCFullYear()%1e4,e,4)}function URe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Dg(t):Dg.ceil(t),gt(t.getUTCFullYear()%1e4,e,4)}function jRe(){return"+0000"}function S6(){return"%"}function E6(t){return+t}function b6(t){return Math.floor(+t/1e3)}var Qf,t3,iQ,n3,rQ;YRe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function YRe(t){return Qf=JX(t),t3=Qf.format,iQ=Qf.parse,n3=Qf.utcFormat,rQ=Qf.utcParse,Qf}function a0(t){const e={};return n=>e[n]||(e[n]=t(n))}function qRe(t,e){return n=>{const i=t(n),r=i.indexOf(e);if(r<0)return i;let s=KRe(i,r);const o=s<i.length?i.slice(s):"";for(;--s>r;)if(i[s]!=="0"){++s;break}return i.slice(0,s)+o}}function KRe(t,e){let n=t.lastIndexOf("e"),i;if(n>0)return n;for(n=t.length;--n>e;)if(i=t.charCodeAt(n),i>=48&&i<=57)return n+1}function sQ(t){const e=a0(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(i){const r=Uh(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return qRe(e(r),e(".1f")(1)[1])}else return e(r)},formatSpan(i,r,s,o){o=Uh(o??",f");const a=Wc(i,r,s),l=Math.max(Math.abs(i),Math.abs(r));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=DX(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=OX(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=AX(a))||(o.precision=u-(o.type==="%")*2);break}}return e(o)}}}let zP;oQ();function oQ(){return zP=sQ({format:bR,formatPrefix:XI})}function aQ(t){return sQ(TX(t))}function Rb(t){return arguments.length?zP=aQ(t):zP}function x6(t,e,n){n=n||{},he(n)||U(`Invalid time multi-format specifier: ${n}`);const i=e(so),r=e(Ss),s=e(ws),o=e(Hr),a=e(_n),l=e(Di),u=e($r),c=e(ni),d=t(n[na]||".%L"),h=t(n[so]||":%S"),f=t(n[Ss]||"%I:%M"),p=t(n[ws]||"%I %p"),g=t(n[Hr]||n[Ei]||"%a %d"),m=t(n[_n]||"%b %d"),y=t(n[Di]||"%B"),v=t(n[$r]||"%B"),C=t(n[ni]||"%Y");return w=>(i(w)<w?d:r(w)<w?h:s(w)<w?f:o(w)<w?p:l(w)<w?a(w)<w?g:m:c(w)<w?u(w)<w?y:v:C)(w)}function lQ(t){const e=a0(t.format),n=a0(t.utcFormat);return{timeFormat:i=>ce(i)?e(i):x6(e,Bm,i),utcFormat:i=>ce(i)?n(i):x6(n,zm,i),timeParse:a0(t.parse),utcParse:a0(t.utcParse)}}let UP;uQ();function uQ(){return UP=lQ({format:t3,parse:iQ,utcFormat:n3,utcParse:rQ})}function cQ(t){return lQ(JX(t))}function jv(t){return arguments.length?UP=cQ(t):UP}const jP=(t,e)=>ze({},t,e);function dQ(t,e){const n=t?aQ(t):Rb(),i=e?cQ(e):jv();return jP(n,i)}function i3(t,e){const n=arguments.length;return n&&n!==2&&U("defaultLocale expects either zero or two arguments."),n?jP(Rb(t),jv(e)):jP(Rb(),jv())}function XRe(){return oQ(),uQ(),i3()}const QRe=/^(data:|([A-Za-z]+:)?\/\/)/,JRe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ZRe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,_6="file://";function eTe(t,e){return n=>({options:n||{},sanitize:nTe,load:tTe,fileAccess:!!e,file:iTe(e),http:sTe(t)})}async function tTe(t,e){const n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function nTe(t,e){e=ze({},this.options,e);const n=this.fileAccess,i={href:null};let r,s,o;const a=JRe.test(t.replace(ZRe,""));(t==null||typeof t!="string"||!a)&&U("Sanitize failure, invalid URI: "+ae(t));const l=QRe.test(t);return(o=e.baseURL)&&!l&&(!t.startsWith("/")&&!o.endsWith("/")&&(t="/"+t),t=o+t),s=(r=t.startsWith(_6))||e.mode==="file"||e.mode!=="http"&&!l&&n,r?t=t.slice(_6.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!s}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function iTe(t){return t?e=>new Promise((n,i)=>{t.readFile(e,(r,s)=>{r?i(r):n(s)})}):rTe}async function rTe(){U("No file system access.")}function sTe(t){return t?async function(e,n){const i=ze({},this.options.http,n),r=n&&n.response,s=await t(e,i);return s.ok?Ue(s[r])?s[r]():s.text():U(s.status+""+s.statusText)}:oTe}async function oTe(){U("No HTTP fetch method available.")}const aTe=t=>t!=null&&t===t,lTe=t=>t==="true"||t==="false"||t===!0||t===!1,uTe=t=>!Number.isNaN(Date.parse(t)),hQ=t=>!Number.isNaN(+t)&&!(t instanceof Date),cTe=t=>hQ(t)&&Number.isInteger(+t),YP={boolean:jI,integer:xi,number:xi,date:YI,string:qI,unknown:Li},Mw=[lTe,cTe,hQ,uTe],dTe=["boolean","integer","number","date"];function fQ(t,e){if(!t||!t.length)return"unknown";const n=t.length,i=Mw.length,r=Mw.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=e?t[s][e]:t[s],a=0;a<i;++a)if(r[a]&&aTe(l)&&!Mw[a](l)&&(r[a]=0,++o,o===Mw.length))return"string";return dTe[r.reduce((s,o)=>s===0?o:s,0)-1]}function pQ(t,e){return e.reduce((n,i)=>(n[i]=fQ(t,i),n),{})}function R6(t){const e=function(n,i){const r={delimiter:t};return r3(n,i?ze(i,r):r)};return e.responseType="text",e}function r3(t,e){return e.header&&(t=e.header.map(ae).join(e.delimiter)+`
`+t),qxe(e.delimiter).parse(t+"")}r3.responseType="text";function hTe(t){return typeof Buffer=="function"&&Ue(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function s3(t,e){const n=e&&e.property?Gr(e.property):Li;return he(t)&&!hTe(t)?fTe(n(t),e):n(JSON.parse(t))}s3.responseType="json";function fTe(t,e){return!j(t)&&oX(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const pTe={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function gQ(t,e){let n,i,r,s;return t=s3(t,e),e&&e.feature?(n=Jxe,r=e.feature):e&&e.mesh?(n=e_e,r=e.mesh,s=pTe[e.filter]):U("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[r])?n(t,i,s):U("Invalid TopoJSON object: "+r),i&&i.features||[i]}gQ.responseType="json";const BS={dsv:r3,csv:R6(","),tsv:R6("	"),json:s3,topojson:gQ};function o3(t,e){return arguments.length>1?(BS[t]=e,this):Ae(BS,t)?BS[t]:null}function mQ(t){const e=o3(t);return e&&e.responseType||"text"}function yQ(t,e,n,i){e=e||{};const r=o3(e.type||"json");return r||U("Unknown data format type: "+e.type),t=r(t,e),e.parse&&gTe(t,e.parse,n,i),Ae(t,"columns")&&delete t.columns,t}function gTe(t,e,n,i){if(!t.length)return;const r=jv();n=n||r.timeParse,i=i||r.utcParse;let s=t.columns||Object.keys(t[0]),o,a,l,u,c,d;e==="auto"&&(e=pQ(t,s)),s=Object.keys(e);const h=s.map(f=>{const p=e[f];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?i:n)(m);if(!YP[p])throw Error("Illegal format pattern: "+f+":"+p);return YP[p]});for(l=0,c=t.length,d=s.length;l<c;++l)for(o=t[l],u=0;u<d;++u)a=s[u],o[a]=h[u](o[a])}const DR=eTe(typeof fetch<"u"&&fetch,null);function OR(t){const e=t||Li,n=[],i={};return n.add=r=>{const s=e(r);return i[s]||(i[s]=1,n.push(r)),n},n.remove=r=>{const s=e(r);if(i[s]){i[s]=0;const o=n.indexOf(r);o>=0&&n.splice(o,1)}return n},n}async function zS(t,e){try{await e(t)}catch(n){t.error(n)}}const vQ=Symbol("vega_id");let mTe=1;function PR(t){return!!(t&&Re(t))}function Re(t){return t[vQ]}function CQ(t,e){return t[vQ]=e,t}function vt(t){const e=t===Object(t)?t:{data:t};return Re(e)?e:CQ(e,mTe++)}function a3(t){return FR(t,vt({}))}function FR(t,e){for(const n in t)e[n]=t[n];return e}function wQ(t,e){return CQ(e,Re(t))}function Lf(t,e){return t?e?(n,i)=>t(n,i)||Re(e(n))-Re(e(i)):(n,i)=>t(n,i)||Re(n)-Re(i):null}function SQ(t){return t&&t.constructor===If}function If(){const t=[],e=[],n=[],i=[],r=[];let s=null,o=!1;return{constructor:If,insert(a){const l=de(a),u=l.length;for(let c=0;c<u;++c)t.push(l[c]);return this},remove(a){const l=Ue(a)?i:e,u=de(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:Ii(u)};return Ue(a)?(c.filter=a,r.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return Ue(a)?r.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let d,h,f,p,g,m;for(d=0,h=l.length;d<h;++d)u[Re(l[d])]=1;for(d=0,h=e.length;d<h;++d)g=e[d],u[Re(g)]=-1;for(d=0,h=i.length;d<h;++d)p=i[d],l.forEach(v=>{p(v)&&(u[Re(v)]=-1)});for(d=0,h=t.length;d<h;++d)g=t[d],m=Re(g),u[m]?u[m]=1:a.add.push(vt(t[d]));for(d=0,h=l.length;d<h;++d)g=l[d],u[Re(g)]<0&&a.rem.push(g);function y(v,C,w){w?v[C]=w(v):a.encode=C,o||(c[Re(v)]=v)}for(d=0,h=n.length;d<h;++d)f=n[d],g=f.tuple,p=f.field,m=u[Re(g)],m>0&&(y(g,p,f.value),a.modifies(p));for(d=0,h=r.length;d<h;++d)f=r[d],p=f.filter,l.forEach(v=>{p(v)&&u[Re(v)]>0&&y(v,f.field,f.value)}),a.modifies(f.field);if(o)a.mod=e.length||i.length?l.filter(v=>u[Re(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(s||s==null&&(e.length||i.length))&&a.clean(!0),a}}}const US="_:mod:_";function MR(){Object.defineProperty(this,US,{writable:!0,value:{}})}MR.prototype={set(t,e,n,i){const r=this,s=r[t],o=r[US];return e!=null&&e>=0?(s[e]!==n||i)&&(s[e]=n,o[e+":"+t]=-1,o[t]=-1):(s!==n||i)&&(r[t]=n,o[t]=j(n)?1+n.length:-1),r},modified(t,e){const n=this[US];if(arguments.length){if(j(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[US]={},this}};let yTe=0;const vTe="pulse",CTe=new MR,wTe=1,STe=2;function Ft(t,e,n,i){this.id=++yTe,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function T6(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}Ft.prototype={targets(){return this._targets||(this._targets=OR(gC))},set(t){return this.value!==t?(this.value=t,1):0},skip:T6(wTe),modified:T6(STe),parameters(t,e,n){e=e!==!1;const i=this._argval=this._argval||new MR,r=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(d,h,f)=>{f instanceof Ft?(f!==this&&(e&&f.targets().add(this),s.push(f)),r.push({op:f,name:d,index:h})):i.set(d,h,f)};for(o in t)if(a=t[o],o===vTe)de(a).forEach(d=>{d instanceof Ft?d!==this&&(d.targets().add(this),s.push(d)):U("Pulse parameters must be operator instances.")}),this.source=a;else if(j(a))for(i.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),s},marshall(t){const e=this._argval||CTe,n=this._argops;let i,r,s,o;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],s=i.op,o=s.modified()&&s.stamp===t,e.set(i.name,i.index,s.value,o);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,i,r;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function ETe(t,e,n,i){let r=1,s;return t instanceof Ft?s=t:t&&t.prototype instanceof Ft?s=new t:Ue(t)?s=new Ft(null,t):(r=0,s=new Ft(t,e)),this.rank(s),r&&(i=n,n=e),n&&this.connect(s,s.parameters(n,i)),this.touch(s),s}function bTe(t,e){const n=t.rank,i=e.length;for(let r=0;r<i;++r)if(n<e[r].rank){this.rerank(t);return}}let xTe=0;function NR(t,e,n){this.id=++xTe,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function Bu(t,e,n){return new NR(t,e,n)}NR.prototype={_filter:ro,_apply:Li,targets(){return this._targets||(this._targets=OR(gC))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=Bu(t);return this.targets().add(e),e},apply(t){const e=Bu(null,t);return this.targets().add(e),e},merge(){const t=Bu();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=Bu();return this.targets().add(Bu(null,null,zI(t,n=>{const i=n.dataflow;e.receive(n),i&&i.run&&i.run()}))),e},between(t,e){let n=!1;return t.targets().add(Bu(null,null,()=>n=!0)),e.targets().add(Bu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ro,this._targets=null}};function _Te(t,e,n,i){const r=this,s=Bu(n,i),o=function(u){u.dataflow=r;try{s.receive(u)}catch(c){r.error(c)}finally{r.run()}};let a;typeof t=="string"&&typeof document<"u"?a=document.querySelectorAll(t):a=de(t);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(e,o);return s}function RTe(t,e){const n=this.locale();return yQ(t,e,n.timeParse,n.utcParse)}function TTe(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function ATe(t,e){const n=this;let i=0,r;try{r=await n.loader().load(t,{context:"dataflow",response:mQ(e&&e.type)});try{r=n.parse(r,e)}catch(s){i=-2,n.warn("Data ingestion failed",t,s)}}catch(s){i=-1,n.warn("Loading failed",t,s)}return{data:r,status:i}}async function DTe(t,e,n){const i=this,r=i._pending||OTe(i);r.requests+=1;const s=await i.request(e,n);return i.pulse(t,i.changeset().remove(ro).insert(s.data||[])),r.done(),s}function OTe(t){let e;const n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t))},t._pending=n}const PTe={skip:!0};function FTe(t,e,n,i,r){return(t instanceof Ft?NTe:MTe)(this,t,e,n,i,r),this}function MTe(t,e,n,i,r,s){const o=ze({},s,PTe);let a,l;Ue(n)||(n=Ii(n)),i===void 0?a=u=>t.touch(n(u)):Ue(i)?(l=new Ft(null,i,r,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;SQ(d)?t.pulse(c,d,s):t.update(c,d,o)}):a=u=>t.update(n(u),i,o),e.apply(a)}function NTe(t,e,n,i,r,s){if(i===void 0)e.targets().add(n);else{const o=s||{},a=new Ft(null,LTe(n,i),r,!1);a.modified(o.force),a.rank=e.rank,e.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),t.connect(n,[a]))}}function LTe(t,e){return e=Ue(e)?e:Ii(e),t?function(n,i){const r=e(n,i);return t.skip()||(t.skip(r!==this.value).value=r),r}:e}function ITe(t){t.rank=++this._rank}function kTe(t){const e=[t];let n,i,r;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(r=i.length;--r>=0;)e.push(n=i[r]),n===t&&U("Cycle detected in dataflow graph.")}const Tb={},Da=1,Ku=2,Nl=4,GTe=Da|Ku,A6=Da|Nl,Jf=Da|Ku|Nl,D6=8,xy=16,O6=32,P6=64;function Ac(t,e,n){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function DD(t,e){const n=[];return qu(t,e,i=>n.push(i)),n}function F6(t,e){const n={};return t.visit(e,i=>{n[Re(i)]=1}),i=>n[Re(i)]?null:i}function Nw(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}Ac.prototype={StopPropagation:Tb,ADD:Da,REM:Ku,MOD:Nl,ADD_REM:GTe,ADD_MOD:A6,ALL:Jf,REFLOW:D6,SOURCE:xy,NO_SOURCE:O6,NO_FIELDS:P6,fork(t){return new Ac(this.dataflow).init(this,t)},clone(){const t=this.fork(Jf);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(Jf|xy)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new Ac(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&P6)&&(n.fields=t.fields),e&Da?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&Ku?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&Nl?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&O6?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||Jf;return e&Da&&this.add.length||e&Ku&&this.rem.length||e&Nl&&this.mod.length},reflow(t){if(t)return this.fork(Jf).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(Nl,F6(this,Da))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return j(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?j(t)?t.some(i=>n[i]):n[t]:!!n:!1},filter(t,e){const n=this;return t&Da&&(n.addF=Nw(n.addF,e)),t&Ku&&(n.remF=Nw(n.remF,e)),t&Nl&&(n.modF=Nw(n.modF,e)),t&xy&&(n.srcF=Nw(n.srcF,e)),n},materialize(t){t=t||Jf;const e=this;return t&Da&&e.addF&&(e.add=DD(e.add,e.addF),e.addF=null),t&Ku&&e.remF&&(e.rem=DD(e.rem,e.remF),e.remF=null),t&Nl&&e.modF&&(e.mod=DD(e.mod,e.modF),e.modF=null),t&xy&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,i=e;if(t&xy)return qu(n.source,n.srcF,i),n;t&Da&&qu(n.add,n.addF,i),t&Ku&&qu(n.rem,n.remF,i),t&Nl&&qu(n.mod,n.modF,i);const r=n.source;if(t&D6&&r){const s=n.add.length+n.mod.length;s===r.length||(s?qu(r,F6(n,A6),i):qu(r,n.srcF,i))}return n}};function l3(t,e,n,i){const r=this;let s=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(const o of n)if(o.stamp===e){if(o.fields){const a=r.fields||(r.fields={});for(const l in o.fields)a[l]=1}o.changed(r.ADD)&&(s|=r.ADD),o.changed(r.REM)&&(s|=r.REM),o.changed(r.MOD)&&(s|=r.MOD)}this.changes=s}le(l3,Ac,{fork(t){const e=new Ac(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?j(t)?t.some(i=>n[i]):n[t]:0},filter(){U("MultiPulse does not support filtering.")},materialize(){U("MultiPulse does not support materialization.")},visit(t,e){const n=this,i=n.pulses,r=i.length;let s=0;if(t&n.SOURCE)for(;s<r;++s)i[s].visit(t,e);else for(;s<r;++s)i[s].stamp===n.stamp&&i[s].visit(t,e);return n}});async function $Te(t,e,n){const i=this,r=[];if(i._pulse)return EQ(i);if(i._pending&&await i._pending,e&&await zS(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const s=++i._clock;i._pulse=new Ac(i,s,t),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=OR(gC);let o=0,a,l,u;try{for(;i._heap.size()>0;){if(a=i._heap.pop(),a.rank!==a.qrank){i._enqueue(a,!0);continue}l=a.run(i._getPulse(a,t)),l.then?l=await l:l.async&&(r.push(l.async),l=Tb),l!==Tb&&a._targets&&a._targets.forEach(c=>i._enqueue(c)),++o}}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${s}: ${o} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((d,h)=>h.priority-d.priority);i._postrun=[];for(let d=0;d<c.length;++d)await zS(i,c[d].callback)}return n&&await zS(i,n),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(d=>{try{d(i)}catch(h){i.error(h)}})})),i}async function HTe(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running}function WTe(t,e,n){return this._pulse?EQ(this):(this.evaluate(t,e,n),this)}function VTe(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(i){this.error(i)}}function EQ(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function BTe(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function zTe(t,e){const n=t.source,i=this._clock;return n&&j(n)?new l3(this,i,n.map(r=>r.pulse),e):this._input[t.id]||UTe(this._pulse,n&&n.pulse)}function UTe(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==Tb&&(t.source=e.source),t)}const u3={skip:!1,force:!1};function jTe(t,e){const n=e||u3;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function YTe(t,e,n){const i=n||u3;return(t.set(e)||i.force)&&this.touch(t,i),this}function qTe(t,e,n){this.touch(t,n||u3);const i=new Ac(this,this._clock+(this._pulse?0:1)),r=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,r),this}function KTe(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),bQ(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,XTe(e,0,t)):i=n,i}}}function bQ(t,e,n,i){let r,s;const o=t[n];for(;n>e;){if(s=n-1>>1,r=t[s],i(o,r)<0){t[n]=r,n=s;continue}break}return t[n]=o}function XTe(t,e,n){const i=e,r=t.length,s=t[e];let o=(e<<1)+1,a;for(;o<r;)a=o+1,a<r&&n(t[o],t[a])>=0&&(o=a),t[e]=t[o],e=o,o=(e<<1)+1;return t[e]=s,bQ(t,i,e,n)}function Up(){this.logger($I()),this.logLevel(kI),this._clock=0,this._rank=0,this._locale=i3();try{this._loader=DR()}catch{}this._touched=OR(gC),this._input={},this._pulse=null,this._heap=KTe((t,e)=>t.qrank-e.qrank),this._postrun=[]}function _y(t){return function(){return this._log[t].apply(this,arguments)}}Up.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:_y("error"),warn:_y("warn"),info:_y("info"),debug:_y("debug"),logLevel:_y("level"),cleanThreshold:1e4,add:ETe,connect:bTe,rank:ITe,rerank:kTe,pulse:qTe,touch:jTe,update:YTe,changeset:If,ingest:TTe,parse:RTe,preload:DTe,request:ATe,events:_Te,on:FTe,evaluate:$Te,run:WTe,runAsync:HTe,runAfter:VTe,_enqueue:BTe,_getPulse:zTe};function V(t,e){Ft.call(this,t,null,e)}le(V,Ft,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const Pg={};function xQ(t){const e=_Q(t);return e&&e.Definition||null}function _Q(t){return t=t&&t.toLowerCase(),Ae(Pg,t)?Pg[t]:null}function*RQ(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)i=e(i,++n,t),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function c3(t,e,n){const i=Float64Array.from(RQ(t,n));return i.sort(nu),e.map(r=>EX(i,r))}function d3(t,e){return c3(t,[.25,.5,.75],e)}function h3(t,e){const n=t.length,i=l_e(t,e),r=d3(t,e),s=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,s)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function TQ(t){const e=t.maxbins||20,n=t.base||10,i=Math.log(n),r=t.divide||[5,2];let s=t.extent[0],o=t.extent[1],a,l,u,c,d,h;const f=t.span||o-s||Math.abs(s)||1;if(t.step)a=t.step;else if(t.steps){for(c=f/e,d=0,h=t.steps.length;d<h&&t.steps[d]<c;++d);a=t.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(e)/i),u=t.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(f)/i)-l));Math.ceil(f/a)>e;)a*=n;for(d=0,h=r.length;d<h;++d)c=a/r[d],c>=u&&f/c<=e&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/i)+1,g=Math.pow(n,-p-1);return(t.nice||t.nice===void 0)&&(c=Math.floor(s/a+g)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var oo=Math.random;function QTe(t){oo=t}function AQ(t,e,n,i){if(!t.length)return[void 0,void 0];const r=Float64Array.from(RQ(t,i)),s=r.length,o=e;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=r[~~(oo()*s)];c[u]=a/s}return c.sort(nu),[GP(c,n/2),GP(c,1-n/2)]}function DQ(t,e,n,i){i=i||(h=>h);const r=t.length,s=new Float64Array(r);let o=0,a=1,l=i(t[0]),u=l,c=l+e,d;for(;a<r;++a){if(d=i(t[a]),d>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=d+e,l=d}u=d}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?JTe(s,e+e/4):s}function JTe(t,e){const n=t.length;let i=0,r=1,s,o;for(;t[i]===t[r];)++r;for(;r<n;){for(s=r+1;t[r]===t[s];)++s;if(t[r]-t[r-1]<e){for(o=r+(i+s-r-r>>1);o<r;)t[o++]=t[r];for(;o>r;)t[o--]=t[i]}i=r,r=s}return t}function ZTe(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function eAe(t,e){e==null&&(e=t,t=0);let n,i,r;const s={min(o){return arguments.length?(n=o||0,r=i-n,s):n},max(o){return arguments.length?(i=o||0,r=i-n,s):i},sample(){return n+Math.floor(r*oo())},pdf(o){return o===Math.floor(o)&&o>=n&&o<i?1/r:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=i?1:(a-n+1)/r},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*r):NaN}};return s.min(t).max(e)}const OQ=Math.sqrt(2*Math.PI),tAe=Math.SQRT2;let Ry=NaN;function LR(t,e){t=t||0,e=e??1;let n=0,i=0,r,s;if(Ry===Ry)n=Ry,Ry=NaN;else{do n=oo()*2-1,i=oo()*2-1,r=n*n+i*i;while(r===0||r>1);s=Math.sqrt(-2*Math.log(r)/r),n*=s,Ry=i*s}return t+n*e}function f3(t,e,n){n=n??1;const i=(t-(e||0))/n;return Math.exp(-.5*i*i)/(n*OQ)}function IR(t,e,n){e=e||0,n=n??1;const i=(t-e)/n,r=Math.abs(i);let s;if(r>37)s=0;else{const o=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,s=o*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,s=s/a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,s=o/a/2.506628274631)}return i>0?1-s:s}function kR(t,e,n){return t<0||t>1?NaN:(e||0)+(n??1)*tAe*nAe(2*t-1)}function nAe(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function p3(t,e){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s??1,r):i},sample:()=>LR(n,i),pdf:s=>f3(s,n,i),cdf:s=>IR(s,n,i),icdf:s=>kR(s,n,i)};return r.mean(t).stdev(e)}function g3(t,e){const n=p3();let i=0;const r={data(s){return arguments.length?(t=s,i=s?s.length:0,r.bandwidth(e)):t},bandwidth(s){return arguments.length?(e=s,!e&&t&&(e=h3(t)),r):e},sample(){return t[~~(oo()*i)]+e*n.sample()},pdf(s){let o=0,a=0;for(;a<i;++a)o+=n.pdf((s-t[a])/e);return o/e/i},cdf(s){let o=0,a=0;for(;a<i;++a)o+=n.cdf((s-t[a])/e);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(t)}function m3(t,e){return t=t||0,e=e??1,Math.exp(t+LR()*e)}function y3(t,e,n){if(t<=0)return 0;e=e||0,n=n??1;const i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*OQ*t)}function v3(t,e,n){return IR(Math.log(t),e,n)}function C3(t,e,n){return Math.exp(kR(t,e,n))}function PQ(t,e){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s??1,r):i},sample:()=>m3(n,i),pdf:s=>y3(s,n,i),cdf:s=>v3(s,n,i),icdf:s=>C3(s,n,i)};return r.mean(t).stdev(e)}function FQ(t,e){let n=0,i;function r(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(i=r(e=o||[]),s):e},distributions(o){return arguments.length?(o?(n=o.length,t=o):(n=0,t=[]),s.weights(e)):t},sample(){const o=oo();let a=t[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(o<l){a=t[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=i[l]*t[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=i[l]*t[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(e)}function w3(t,e){return e==null&&(e=t??1,t=0),t+(e-t)*oo()}function S3(t,e,n){return n==null&&(n=e??1,e=0),t>=e&&t<=n?1/(n-e):0}function E3(t,e,n){return n==null&&(n=e??1,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function b3(t,e,n){return n==null&&(n=e??1,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function MQ(t,e){let n,i;const r={min(s){return arguments.length?(n=s||0,r):n},max(s){return arguments.length?(i=s??1,r):i},sample:()=>w3(n,i),pdf:s=>S3(s,n,i),cdf:s=>E3(s,n,i),icdf:s=>b3(s,n,i)};return e==null&&(e=t??1,t=0),r.min(t).max(e)}function x3(t,e,n){let i=0,r=0;for(const s of t){const o=n(s);e(s)==null||o==null||isNaN(o)||(i+=(o-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function CC(t,e,n,i){const r=i-t*t,s=Math.abs(r)<1e-24?0:(n-t*e)/r;return[e-s*t,s]}function GR(t,e,n,i){t=t.filter(f=>{let p=e(f),g=n(f);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),i&&t.sort((f,p)=>e(f)-e(p));const r=t.length,s=new Float64Array(r),o=new Float64Array(r);let a=0,l=0,u=0,c,d,h;for(h of t)s[a]=c=+e(h),o[a]=d=+n(h),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<r;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function wC(t,e,n,i){let r=-1,s,o;for(const a of t)s=e(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&i(s,o,++r)}function Um(t,e,n,i,r){let s=0,o=0;return wC(t,e,n,(a,l)=>{const u=l-r(a),c=l-i;s+=u*u,o+=c*c}),1-s/o}function _3(t,e,n){let i=0,r=0,s=0,o=0,a=0;wC(t,e,n,(c,d)=>{++a,i+=(c-i)/a,r+=(d-r)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=CC(i,r,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Um(t,e,n,r,u)}}function NQ(t,e,n){let i=0,r=0,s=0,o=0,a=0;wC(t,e,n,(c,d)=>{++a,c=Math.log(c),i+=(c-i)/a,r+=(d-r)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=CC(i,r,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Um(t,e,n,r,u)}}function LQ(t,e,n){const[i,r,s,o]=GR(t,e,n);let a=0,l=0,u=0,c=0,d=0,h,f,p;wC(t,e,n,(v,C)=>{h=i[d++],f=Math.log(C),p=h*C,a+=(C*f-a)/d,l+=(p-l)/d,u+=(p*f-u)/d,c+=(h*p-c)/d});const[g,m]=CC(l/o,a/o,u/o,c/o),y=v=>Math.exp(g+m*(v-s));return{coef:[Math.exp(g-m*s),m],predict:y,rSquared:Um(t,e,n,o,y)}}function IQ(t,e,n){let i=0,r=0,s=0,o=0,a=0,l=0;wC(t,e,n,(d,h)=>{const f=Math.log(d),p=Math.log(h);++l,i+=(f-i)/l,r+=(p-r)/l,s+=(f*p-s)/l,o+=(f*f-o)/l,a+=(h-a)/l});const u=CC(i,r,s,o),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Um(t,e,n,a,c)}}function R3(t,e,n){const[i,r,s,o]=GR(t,e,n),a=i.length;let l=0,u=0,c=0,d=0,h=0,f,p,g,m;for(f=0;f<a;)p=i[f],g=r[f++],m=p*p,l+=(m-l)/f,u+=(m*p-u)/f,c+=(m*m-c)/f,d+=(p*g-d)/f,h+=(m*g-h)/f;const y=c-l*l,v=l*y-u*u,C=(h*l-d*u)/v,w=(d*y-h*u)/v,E=-C*l,b=S=>(S=S-s,C*S*S+w*S+E+o);return{coef:[E-w*s+C*s*s+o,w-2*C*s,C],predict:b,rSquared:Um(t,e,n,o,b)}}function kQ(t,e,n,i){if(i===0)return x3(t,e,n);if(i===1)return _3(t,e,n);if(i===2)return R3(t,e,n);const[r,s,o,a]=GR(t,e,n),l=r.length,u=[],c=[],d=i+1;let h,f,p,g,m;for(h=0;h<d;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],h)*s[p];for(u.push(g),m=new Float64Array(d),f=0;f<d;++f){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],h+f);m[f]=g}c.push(m)}c.push(u);const y=rAe(c),v=C=>{C-=o;let w=a+y[0]+y[1]*C+y[2]*C*C;for(h=3;h<d;++h)w+=y[h]*Math.pow(C,h);return w};return{coef:iAe(d,y,-o,a),predict:v,rSquared:Um(t,e,n,a,v)}}function iAe(t,e,n,i){const r=Array(t);let s,o,a,l;for(s=0;s<t;++s)r[s]=0;for(s=t-1;s>=0;--s)for(a=e[s],l=1,r[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,r[s-o]+=a*Math.pow(n,o)*l;return r[0]+=i,r}function rAe(t){const e=t.length-1,n=[];let i,r,s,o,a;for(i=0;i<e;++i){for(o=i,r=i+1;r<e;++r)Math.abs(t[i][r])>Math.abs(t[i][o])&&(o=r);for(s=i;s<e+1;++s)a=t[s][i],t[s][i]=t[s][o],t[s][o]=a;for(r=i+1;r<e;++r)for(s=e;s>=i;s--)t[s][r]-=t[s][i]*t[i][r]/t[i][i]}for(r=e-1;r>=0;--r){for(a=0,s=r+1;s<e;++s)a+=t[s][r]*n[s];n[r]=(t[e][r]-a)/t[r][r]}return n}const M6=2,N6=1e-12;function GQ(t,e,n,i){const[r,s,o,a]=GR(t,e,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),d=new Float64Array(l),h=new Float64Array(l).fill(1);for(let f=-1;++f<=M6;){const p=[0,u-1];for(let m=0;m<l;++m){const y=r[m],v=p[0],C=p[1],w=y-r[v]>r[C]-y?v:C;let E=0,b=0,S=0,_=0,A=0;const D=1/Math.abs(r[w]-y||1);for(let O=v;O<=C;++O){const M=r[O],F=s[O],I=sAe(Math.abs(y-M)*D)*h[O],H=M*I;E+=I,b+=H,S+=F*I,_+=F*H,A+=M*H}const[P,L]=CC(b/E,S/E,_/E,A/E);c[m]=P+L*y,d[m]=Math.abs(s[m]-c[m]),oAe(r,m+1,p)}if(f===M6)break;const g=bX(d);if(Math.abs(g)<N6)break;for(let m=0,y,v;m<l;++m)y=d[m]/(6*g),h[m]=y>=1?N6:(v=1-y*y)*v}return aAe(r,c,o,a)}function sAe(t){return(t=1-t*t*t)*t*t}function oAe(t,e,n){const i=t[e];let r=n[0],s=n[1]+1;if(!(s>=t.length))for(;e>r&&t[s]-i<=i-t[r];)n[0]=++r,n[1]=s,++s}function aAe(t,e,n,i){const r=t.length,s=[];let o=0,a=0,l=[],u;for(;o<r;++o)u=t[o]+n,l[0]===u?l[1]+=(e[o]-l[1])/++a:(a=0,l[1]+=i,l=[u,e[o]],s.push(l));return l[1]+=i,s}const lAe=.5*Math.PI/180;function $R(t,e,n,i){n=n||25,i=Math.max(n,i||200);const r=g=>[g,t(g)],s=e[0],o=e[1],a=o-s,l=a/i,u=[r(s)],c=[];if(n===i){for(let g=1;g<i;++g)u.push(r(s+g/n*a));return u.push(r(o)),u}else{c.push(r(o));for(let g=n;--g>0;)c.push(r(s+g/n*a))}let d=u[0],h=c[c.length-1];const f=1/a,p=uAe(d[1],c);for(;h;){const g=r((d[0]+h[0])/2);g[0]-d[0]>=l&&cAe(d,g,h,f,p)>lAe?c.push(g):(d=h,u.push(h),c.pop()),h=c[c.length-1]}return u}function uAe(t,e){let n=t,i=t;const r=e.length;for(let s=0;s<r;++s){const o=e[s][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function cAe(t,e,n,i,r){const s=Math.atan2(r*(n[1]-t[1]),i*(n[0]-t[0])),o=Math.atan2(r*(e[1]-t[1]),i*(e[0]-t[0]));return Math.abs(s-o)}function dAe(t){return e=>{const n=t.length;let i=1,r=String(t[0](e));for(;i<n;++i)r+="|"+t[i](e);return r}}function qP(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:dAe(t)}function $Q(t,e,n){return n||t+(e?"_"+e:"")}const OD=()=>{},hAe={init:OD,add:OD,rem:OD,idx:0},Yv={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},SC=Object.keys(Yv).filter(t=>t!=="__count__");function fAe(t,e){return n=>ze({name:t,out:n||t},hAe,e)}[...SC,"__count__"].forEach(t=>{Yv[t]=fAe(t,Yv[t])});function HQ(t,e){return Yv[t](e)}function WQ(t,e){return t.idx-e.idx}function pAe(t){const e={};t.forEach(i=>e[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{e[r]||n(e[r]=Yv[r]())})};return t.forEach(n),Object.values(e).sort(WQ)}function gAe(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function mAe(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e)))}function yAe(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e)))}function vAe(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function VQ(t,e){const n=e||Li,i=pAe(t),r=t.slice().sort(WQ);function s(o){this._ops=i,this._out=r,this.cell=o,this.init()}return s.prototype.init=gAe,s.prototype.add=mAe,s.prototype.rem=yAe,s.prototype.set=vAe,s.prototype.get=n,s.fields=t.map(o=>o.out),s}function T3(t){this._key=t?Gr(t):Re,this.reset()}const ci=T3.prototype;ci.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ci.add=function(t){this._add.push(t)};ci.rem=function(t){this._rem.push(t)};ci.values=function(){if(this._get=null,this._rem.length===0)return this._add;const t=this._add,e=this._rem,n=this._key,i=t.length,r=e.length,s=Array(i-r),o={};let a,l,u;for(a=0;a<r;++a)o[n(e[a])]=1;for(a=0,l=0;a<i;++a)o[n(u=t[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};ci.distinct=function(t){const e=this.values(),n={};let i=e.length,r=0,s;for(;--i>=0;)s=t(e[i])+"",Ae(n,s)||(n[s]=1,++r);return r};ci.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=rX(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};ci.argmin=function(t){return this.extent(t)[0]||{}};ci.argmax=function(t){return this.extent(t)[1]||{}};ci.min=function(t){const e=this.extent(t)[0];return e!=null?t(e):void 0};ci.max=function(t){const e=this.extent(t)[1];return e!=null?t(e):void 0};ci.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=d3(this.values(),t),this._get=t),this._q};ci.q1=function(t){return this.quartile(t)[0]};ci.q2=function(t){return this.quartile(t)[1]};ci.q3=function(t){return this.quartile(t)[2]};ci.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=AQ(this.values(),1e3,.05,t),this._get=t),this._ci};ci.ci0=function(t){return this.ci(t)[0]};ci.ci1=function(t){return this.ci(t)[1]};function Vc(t){V.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Vc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:SC},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};le(Vc,V,{transform(t,e){const n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.modified();return n.stamp=i.stamp,n.value&&(r||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(t):Object.create(null),e.visit(e.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(t),e.visit(e.REM,s=>n.rem(s)),e.visit(e.ADD,s=>n.add(s))),i.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const t=this,e=t.value,n=t._dnames,i=n.map(()=>({})),r=n.length;function s(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<r;++u)i[u][d=c[n[u]]]=d}s(t._prev),s(e);function o(a,l,u){const c=n[u],d=i[u++];for(const h in d){const f=a?a+"|"+h:h;l[c]=d[h],u<r?o(f,l,u):e[f]||t.cell(f,l)}}o("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],i={};function r(m){const y=de(Ai(m)),v=y.length;let C=0,w;for(;C<v;++C)i[w=y[C]]||(i[w]=1,e.push(w))}this._dims=de(t.groupby),this._dnames=this._dims.map(m=>{const y=un(m);return r(m),n.push(y),y}),this.cellkey=t.key?t.key:qP(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=t.fields||[null],o=t.ops||["count"],a=t.as||[],l=s.length,u={};let c,d,h,f,p,g;for(l!==o.length&&U("Unmatched number of fields and aggregate ops."),g=0;g<l;++g){if(c=s[g],d=o[g],c==null&&d!=="count"&&U("Null aggregate field specified."),f=un(c),p=$Q(d,f,a[g]),n.push(p),d==="count"){this._counts.push(p);continue}h=u[f],h||(r(c),h=u[f]=[],h.field=c,this._measures.push(h)),d!=="count"&&(this._countOnly=!1),h.push(HQ(d,p))}return this._measures=this._measures.map(m=>VQ(m,m.field)),Object.create(null)},cellkey:qP(),cell(t,e){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let s=0;s<r;++s)n.agg[s]=new i[s](n)}return n.store&&(n.data=new T3),n},newtuple(t,e){const n=this._dnames,i=this._dims,r=i.length,s={};for(let o=0;o<r;++o)s[n[o]]=i[o](t);return e?wQ(e.tuple,s):vt(s)},clean(){const t=this.value;for(const e in t)t[e].num===0&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].add(i[r].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].rem(i[r].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let i=0,r=n.length;i<r;++i)e[n[i]]=t.num;if(!this._countOnly){const i=t.agg;for(let r=0,s=i.length;r<s;++r)i[r].set(e)}return e},changes(t){const e=this._adds,n=this._mods,i=this._prev,r=this._drop,s=t.add,o=t.rem,a=t.mod;let l,u,c,d;if(i)for(u in i)l=i[u],(!r||l.num)&&o.push(l.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(e[c])),e[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&r?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,t}});const CAe=1e-14;function A3(t){V.call(this,null,t)}A3.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};le(A3,V,{transform(t,e){const n=t.interval!==!1,i=this._bins(t),r=i.start,s=i.step,o=t.as||["bin0","bin1"],a=o[0],l=o[1];let u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(Ai(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?c=>{const d=i(c);c[a]=d,c[l]=d==null?null:r+s*(1+(d-r)/s)}:c=>c[a]=i(c)),e.modifies(n?o:a)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=TQ(t),i=n.step;let r=n.start,s=r+Math.ceil((n.stop-r)/i)*i,o,a;(o=t.anchor)!=null&&(a=o-(r+i*Math.floor((o-r)/i)),r+=a,s+=a);const l=function(u){let c=xi(e(u));return c==null?null:c<r?-1/0:c>s?1/0:(c=Math.max(r,Math.min(c,s-i)),r+i*Math.floor(CAe+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Kr(l,Ai(e),t.name||"bin_"+un(e))}});function BQ(t,e,n){const i=t;let r=e||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[i(l)]=++a,size:()=>r.length,data:(l,u)=>(a&&(r=r.filter(c=>!o[i(c)]),o={},a=0),u&&l&&r.sort(l),s.length&&(r=l?cX(l,r,s.sort(l)):r.concat(s),s=[]),r)}}function D3(t){V.call(this,[],t)}D3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};le(D3,V,{transform(t,e){const n=e.fork(e.ALL),i=BQ(Re,this.value,n.materialize(n.ADD).add),r=t.sort,s=e.changed()||r&&(t.modified("sort")||e.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(s),this.value=n.source=i.data(Lf(r),s),e.source&&e.source.root&&(this.value.root=e.source.root),n}});function zQ(t){Ft.call(this,null,wAe,t)}le(zQ,Ft);function wAe(t){return this.value&&!t.modified()?this.value:BI(t.fields,t.orders)}function O3(t){V.call(this,null,t)}O3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function SAe(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}le(O3,V,{transform(t,e){const n=d=>h=>{for(var f=SAe(a(h),t.case,s)||[],p,g=0,m=f.length;g<m;++g)o.test(p=f[g])||d(p)},i=this._parameterCheck(t,e),r=this._counts,s=this._match,o=this._stop,a=t.field,l=t.as||["text","count"],u=n(d=>r[d]=1+(r[d]||0)),c=n(d=>r[d]-=1);return i?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,c)),this._finish(e,l)},_parameterCheck(t,e){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,i=this._tuples||(this._tuples={}),r=e[0],s=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS);let a,l,u;for(a in n)l=i[a],u=n[a]||0,!l&&u?(i[a]=l=vt({}),l[r]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,i[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(e)}});function P3(t){V.call(this,null,t)}P3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};le(P3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.as||["a","b"],r=i[0],s=i[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=e.materialize(e.SOURCE).source,n.add=this.value=EAe(a,r,s,t.filter||ro)):n.mod=a,n.source=this.value,n.modifies(i)}});function EAe(t,e,n,i){for(var r=[],s={},o=t.length,a=0,l,u;a<o;++a)for(s[e]=u=t[a],l=0;l<o;++l)s[n]=t[l],i(s)&&(r.push(vt(s)),s={},s[e]=u);return r}const L6={kde:g3,mixture:FQ,normal:p3,lognormal:PQ,uniform:MQ},bAe="distributions",I6="function",xAe="field";function UQ(t,e){const n=t[I6];Ae(L6,n)||U("Unknown distribution function: "+n);const i=L6[n]();for(const r in t)r===xAe?i.data((t.from||e()).map(t[r])):r===bAe?i[r](t[r].map(s=>UQ(s,e))):typeof i[r]===I6&&i[r](t[r]);return i}function F3(t){V.call(this,null,t)}const jQ=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],_Ae={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:jQ},{name:"weights",type:"number",array:!0}]};F3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:jQ.concat(_Ae)},{name:"as",type:"string",array:!0,default:["value","density"]}]};le(F3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=UQ(t.distribution,RAe(e)),r=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200;let o=t.method||"pdf";o!=="pdf"&&o!=="cdf"&&U("Invalid density method: "+o),!t.extent&&!i.data&&U("Missing density extent parameter."),o=i[o];const a=t.as||["value","density"],l=t.extent||tl(i.data()),u=$R(o,l,r,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],vt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function RAe(t){return()=>t.materialize(t.SOURCE).source}function YQ(t,e){return t?t.map((n,i)=>e[i]||un(n)):null}function M3(t,e,n){const i=[],r=d=>d(l);let s,o,a,l,u,c;if(e==null)i.push(t.map(n));else for(s={},o=0,a=t.length;o<a;++o)l=t[o],u=e.map(r),c=s[u],c||(s[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}const qQ="bin";function N3(t){V.call(this,null,t)}N3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:qQ}]};const TAe=(t,e)=>mC(tl(t,e))/30;le(N3,V,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;const n=e.materialize(e.SOURCE).source,i=M3(e.source,t.groupby,Li),r=t.smooth||!1,s=t.field,o=t.step||TAe(n,s),a=Lf((p,g)=>s(p)-s(g)),l=t.as||qQ,u=i.length;let c=1/0,d=-1/0,h=0,f;for(;h<u;++h){const p=i[h].sort(a);f=-1;for(const g of DQ(p,o,r,s))g<c&&(c=g),g>d&&(d=g),p[++f][l]=g}return this.value={start:c,stop:d,step:o},e.reflow(!0).modifies(l)}});function KQ(t){Ft.call(this,null,AAe,t),this.modified(!0)}le(KQ,Ft);function AAe(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Kr(n=>e(n,t),Ai(e),un(e))}function L3(t){V.call(this,[void 0,void 0],t)}L3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};le(L3,V,{transform(t,e){const n=this.value,i=t.field,r=e.changed()||e.modified(i.fields)||t.modified("field");let s=n[0],o=n[1];if((r||s==null)&&(s=1/0,o=-1/0),e.visit(r?e.SOURCE:e.ADD,a=>{const l=xi(i(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=un(i);a&&(a=` for field "${a}"`),e.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function I3(t,e){Ft.call(this,t),this.parent=e,this.count=0}le(I3,Ft,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function HR(t){V.call(this,{},t),this._keys=Hm();const e=this._targets=[];e.active=0,e.forEach=n=>{for(let i=0,r=e.active;i<r;++i)n(e[i],i,e)}}le(HR,V,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,i){const r=this.value;let s=Ae(r,t)&&r[t],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=i||(a=this._group[t])&&a.tuple,o=n.dataflow,s=new I3(n.fork(n.NO_SOURCE),this),o.add(s).connect(e(o,t,a)),r[t]=s,this.activate(s)),s},clean(){const t=this.value;let e=0;for(const n in t)if(t[n].count===0){const i=t[n].detachSubflow;i&&i(),delete t[n],++e}if(e){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(t){const e=this._targets,n=e.length,i=t?t.length:0;let r=0;for(;r<i;++r)e[r]=t[r];for(;r<n&&e[r]!=null;++r)e[r]=null;e.active=i},transform(t,e){const n=e.dataflow,i=t.key,r=t.subflow,s=this._keys,o=t.modified("key"),a=l=>this.subflow(l,r,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,l=>{const u=Re(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),e.visit(e.ADD,l=>{const u=i(l);s.set(Re(l),u),a(u).add(l)}),o||e.modified(i.fields)?e.visit(e.MOD,l=>{const u=Re(l),c=s.get(u),d=i(l);c===d?a(d).mod(l):(s.set(u,d),a(c).rem(l),a(d).add(l))}):e.changed(e.MOD)&&e.visit(e.MOD,l=>{a(s.get(Re(l))).mod(l)}),o&&e.visit(e.REFLOW,l=>{const u=Re(l),c=s.get(u),d=i(l);c!==d&&(s.set(u,d),a(c).rem(l),a(d).add(l))}),e.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),e}});function XQ(t){Ft.call(this,null,DAe,t)}le(XQ,Ft);function DAe(t){return this.value&&!t.modified()?this.value:j(t.name)?de(t.name).map(e=>Gr(e)):Gr(t.name,t.as)}function k3(t){V.call(this,Hm(),t)}k3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};le(k3,V,{transform(t,e){const n=e.dataflow,i=this.value,r=e.fork(),s=r.add,o=r.rem,a=r.mod,l=t.expr;let u=!0;e.visit(e.REM,d=>{const h=Re(d);i.has(h)?i.delete(h):o.push(d)}),e.visit(e.ADD,d=>{l(d,t)?s.push(d):i.set(Re(d),1)});function c(d){const h=Re(d),f=l(d,t),p=i.get(h);f&&p?(i.delete(h),s.push(d)):!f&&!p?(i.set(h,1),o.push(d)):u&&f&&!p&&a.push(d)}return e.visit(e.MOD,c),t.modified()&&(u=!1,e.visit(e.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function G3(t){V.call(this,[],t)}G3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};le(G3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=YQ(i,t.as||[]),s=t.index||null,o=r.length;return n.rem=this.value,e.visit(e.SOURCE,a=>{const l=i.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,d,h,f;for(;c<u;++c){for(h=a3(a),d=0;d<o;++d)h[r[d]]=(f=l[d][c])==null?null:f;s&&(h[s]=c),n.add.push(h)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(r)}});function $3(t){V.call(this,[],t)}$3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};le($3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=i.map(un),s=t.as||["key","value"],o=s[0],a=s[1],l=i.length;return n.rem=this.value,e.visit(e.SOURCE,u=>{for(let c=0,d;c<l;++c)d=a3(u),d[o]=r[c],d[a]=i[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function H3(t){V.call(this,null,t)}H3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};le(H3,V,{transform(t,e){const n=t.expr,i=t.as,r=t.modified(),s=t.initonly?e.ADD:r?e.SOURCE:e.modified(n.fields)||e.modified(i)?e.ADD_MOD:e.ADD;return r&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(i),e.visit(s,o=>o[i]=n(o,t))}});function QQ(t){V.call(this,[],t)}le(QQ,V,{transform(t,e){const n=e.fork(e.ALL),i=t.generator;let r=this.value,s=t.size-r.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=vt(i(t))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=r.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,r=r.slice(-s);return n.source=this.value=r,n}});const Lw={value:"value",median:bX,mean:p_e,min:kP,max:bh},OAe=[];function W3(t){V.call(this,[],t)}W3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function PAe(t){var e=t.method||Lw.value,n;if(Lw[e]==null)U("Unrecognized imputation method: "+e);else return e===Lw.value?(n=t.value!==void 0?t.value:0,()=>n):Lw[e]}function FAe(t){const e=t.field;return n=>n?e(n):NaN}le(W3,V,{transform(t,e){var n=e.fork(e.ALL),i=PAe(t),r=FAe(t),s=un(t.field),o=un(t.key),a=(t.groupby||[]).map(un),l=MAe(e.source,t.groupby,t.key,t.keyvals),u=[],c=this.value,d=l.domain.length,h,f,p,g,m,y,v,C,w,E;for(m=0,C=l.length;m<C;++m)for(h=l[m],p=h.values,f=NaN,v=0;v<d;++v)if(h[v]==null){for(g=l.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=g,E[s]=Number.isNaN(f)?f=i(h,r):f,u.push(vt(E))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function MAe(t,e,n,i){var r=y=>y(m),s=[],o=i?i.slice():[],a={},l={},u,c,d,h,f,p,g,m;for(o.forEach((y,v)=>a[y]=v+1),h=0,g=t.length;h<g;++h)m=t[h],p=n(m),f=a[p]||(a[p]=o.push(p)),c=(u=e?e.map(r):OAe)+"",(d=l[c])||(d=l[c]=[],s.push(d),d.values=u),d[f-1]=m;return s.domain=o,s}function V3(t){Vc.call(this,t)}V3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:SC},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};le(V3,Vc,{transform(t,e){const n=this,i=t.modified();let r;return n.value&&(i||e.modified(n._inputs,!0))?(r=n.value=i?n.init(t):{},e.visit(e.SOURCE,s=>n.add(s))):(r=n.value=n.value||this.init(t),e.visit(e.REM,s=>n.rem(s)),e.visit(e.ADD,s=>n.add(s))),n.changes(),e.visit(e.SOURCE,s=>{ze(s,r[n.cellkey(s)].tuple)}),e.reflow(i).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(t[n]),t[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}});function B3(t){V.call(this,null,t)}B3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};le(B3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=M3(i,t.groupby,t.field),s=(t.groupby||[]).map(un),o=t.bandwidth,a=t.cumulative?"cdf":"pdf",l=t.as||["value","density"],u=[];let c=t.extent,d=t.steps||t.minsteps||25,h=t.steps||t.maxsteps||200;a!=="pdf"&&a!=="cdf"&&U("Invalid density method: "+a),t.resolve==="shared"&&(c||(c=tl(i,t.field)),d=h=t.steps||h),r.forEach(f=>{const p=g3(f,o)[a],g=t.counts?f.length:1,m=c||tl(f);$R(p,m,d,h).forEach(y=>{const v={};for(let C=0;C<s.length;++C)v[s[C]]=f.dims[C];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(vt(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function JQ(t){Ft.call(this,null,NAe,t)}le(JQ,Ft);function NAe(t){return this.value&&!t.modified()?this.value:UI(t.fields,t.flat)}function ZQ(t){V.call(this,[],t),this._pending=null}le(ZQ,V,{transform(t,e){const n=e.dataflow;return this._pending?PD(this,e,this._pending):LAe(t)?e.StopPropagation:t.values?PD(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(r=>(this._pending=de(r.data),s=>s.touch(this)))}:n.request(t.url,t.format).then(i=>PD(this,e,de(i.data)))}});function LAe(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function PD(t,e,n){n.forEach(vt);const i=e.fork(e.NO_FIELDS&e.NO_SOURCE);return i.rem=t.value,t.value=i.source=i.add=n,t._pending=null,i.rem.length&&i.clean(!0),i}function z3(t){V.call(this,{},t)}z3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};le(z3,V,{transform(t,e){const n=t.fields,i=t.index,r=t.values,s=t.default==null?null:t.default,o=t.modified(),a=n.length;let l=o?e.SOURCE:e.ADD,u=e,c=t.as,d,h,f;return r?(h=r.length,a>1&&!c&&U('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*h&&U('The "as" parameter has too few output field names.'),c=c||r.map(un),d=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=i.get(n[g](p)),v==null)for(y=0;y<h;++y,++m)p[c[m]]=s;else for(y=0;y<h;++y,++m)p[c[m]]=r[y](v)}):(c||U("Missing output field names."),d=function(p){for(var g=0,m;g<a;++g)m=i.get(n[g](p)),p[c[g]]=m??s}),o?u=e.reflow(!0):(f=n.some(p=>e.modified(p.fields)),l|=f?e.MOD:0),e.visit(l,d),u.modifies(c)}});function eJ(t){Ft.call(this,null,IAe,t)}le(eJ,Ft);function IAe(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let i=1/0,r=-1/0,s,o;for(s=0;s<n;++s)o=e[s],o[0]<i&&(i=o[0]),o[1]>r&&(r=o[1]);return[i,r]}function tJ(t){Ft.call(this,null,kAe,t)}le(tJ,Ft);function kAe(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,n)=>e.concat(n),[])}function nJ(t){V.call(this,null,t)}le(nJ,V,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function U3(t){Vc.call(this,t)}U3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:SC,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};le(U3,Vc,{_transform:Vc.prototype.transform,transform(t,e){return this._transform(GAe(t,e),e)}});function GAe(t,e){const n=t.field,i=t.value,r=(t.op==="count"?"__count__":t.op)||"sum",s=Ai(n).concat(Ai(i)),o=HAe(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>r),fields:o.map(a=>$Ae(a,n,i,s)),as:o.map(a=>a+""),modified:t.modified.bind(t)}}function $Ae(t,e,n,i){return Kr(r=>e(r)===t?n(r):NaN,i,t+"")}function HAe(t,e,n){const i={},r=[];return n.visit(n.SOURCE,s=>{const o=t(s);i[o]||(i[o]=1,r.push(o))}),r.sort(ER),e?r.slice(0,e):r}function iJ(t){HR.call(this,t)}le(iJ,HR,{transform(t,e){const n=t.subflow,i=t.field,r=s=>this.subflow(Re(s),n,e,s);return(t.modified("field")||i&&e.modified(Ai(i)))&&U("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,s=>{const o=r(s);i(s).forEach(a=>o.mod(a))}),e.visit(e.ADD,s=>{const o=r(s);i(s).forEach(a=>o.add(vt(a)))}),e.visit(e.REM,s=>{const o=r(s);i(s).forEach(a=>o.rem(a))})):(e.visit(e.MOD,s=>r(s).mod(s)),e.visit(e.ADD,s=>r(s).add(s)),e.visit(e.REM,s=>r(s).rem(s))),e.clean()&&e.runAfter(()=>this.clean()),e}});function j3(t){V.call(this,null,t)}j3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};le(j3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=YQ(t.fields,t.as||[]),s=i?(a,l)=>WAe(a,l,i,r):FR;let o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,a=>{const l=Re(a);n.rem.push(o[l]),o[l]=null}),e.visit(e.ADD,a=>{const l=s(a,vt({}));o[Re(a)]=l,n.add.push(l)}),e.visit(e.MOD,a=>{n.mod.push(s(a,o[Re(a)]))}),n}});function WAe(t,e,n,i){for(let r=0,s=n.length;r<s;++r)e[i[r]]=n[r](t);return e}function rJ(t){V.call(this,null,t)}le(rJ,V,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function Y3(t){V.call(this,null,t)}Y3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const VAe=1e-14;le(Y3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const r=e.materialize(e.SOURCE).source,s=M3(r,t.groupby,t.field),o=(t.groupby||[]).map(un),a=[],l=t.step||.01,u=t.probs||ps(l/2,1-VAe,l),c=u.length;return s.forEach(d=>{const h=c3(d,u);for(let f=0;f<c;++f){const p={};for(let g=0;g<o.length;++g)p[o[g]]=d.dims[g];p[i[0]]=u[f],p[i[1]]=h[f],a.push(vt(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function sJ(t){V.call(this,null,t)}le(sJ,V,{transform(t,e){let n,i;return this.value?i=this.value:(n=e=e.addAll(),i=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,r=>{const s=Re(r);n.rem.push(i[s]),i[s]=null}),e.visit(e.ADD,r=>{const s=a3(r);i[Re(r)]=s,n.add.push(s)}),e.visit(e.MOD,r=>{const s=i[Re(r)];for(const o in r)s[o]=r[o],n.modifies(o);n.mod.push(s)})),n}});function q3(t){V.call(this,[],t),this.count=0}q3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};le(q3,V,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.modified("size"),r=t.size,s=this.value.reduce((c,d)=>(c[Re(d)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let d,h;o.length<r?o.push(c):(h=~~((a+1)*oo()),h<o.length&&h>=l&&(d=o[h],s[Re(d)]&&n.rem.push(d),o[h]=c)),++a}if(e.rem.length&&(e.visit(e.REM,c=>{const d=Re(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Re(c)]!==-1)),(e.rem.length||i)&&o.length<r&&e.source&&(l=a=o.length,e.visit(e.SOURCE,c=>{s[Re(c)]||u(c)}),l=-1),i&&o.length>r){const c=o.length-r;for(let d=0;d<c;++d)s[Re(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return e.mod.length&&e.visit(e.MOD,c=>{s[Re(c)]&&n.mod.push(c)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||l<0)&&(n.add=o.filter(c=>!s[Re(c)])),this.count=a,this.value=n.source=o,n}});function K3(t){V.call(this,null,t)}K3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};le(K3,V,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),i=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=ps(t.start,t.stop,t.step||1).map(r=>{const s={};return s[i]=r,vt(s)}),n.add=e.add.concat(this.value),n}});function oJ(t){V.call(this,null,t),this.modified(!0)}le(oJ,V,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function X3(t){V.call(this,null,t)}const aJ=["unit0","unit1"];X3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:JI,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:aJ}]};le(X3,V,{transform(t,e){const n=t.field,i=t.interval!==!1,r=t.timezone==="utc",s=this._floor(t,e),o=(r?zm:Bm)(s.unit).offset,a=t.as||aJ,l=a[0],u=a[1],c=s.step;let d=s.start||1/0,h=s.stop||-1/0,f=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(Ai(n)))&&(e=e.reflow(!0),f=e.SOURCE,d=1/0,h=-1/0),e.visit(f,p=>{const g=n(p);let m,y;g==null?(p[l]=null,i&&(p[u]=null)):(p[l]=m=y=s(g),i&&(p[u]=y=o(m,c)),m<d&&(d=m),y>h&&(h=y))}),s.start=d,s.stop=h,e.modifies(i?a:l)},_floor(t,e){const n=t.timezone==="utc",{units:i,step:r}=t.units?{units:t.units,step:t.step||1}:QX({extent:t.extent||tl(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),s=ZI(i),o=this.value||{},a=(n?VX:WX)(s,r);return a.unit=at(s),a.units=s,a.step=r,a.start=o.start,a.stop=o.stop,this.value=a}});function lJ(t){V.call(this,Hm(),t)}le(lJ,V,{transform(t,e){const n=e.dataflow,i=t.field,r=this.value,s=a=>r.set(i(a),a);let o=!0;return t.modified("field")||e.modified(i.fields)?(r.clear(),e.visit(e.SOURCE,s)):e.changed()?(e.visit(e.REM,a=>r.delete(i(a))),e.visit(e.ADD,s)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),e.fork()}});function uJ(t){V.call(this,null,t)}le(uJ,V,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(Lf(t.sort)):e.source).map(t.field))}});function BAe(t,e,n,i){const r=qv[t](e,n);return{init:r.init||tc,update:function(s,o){o[i]=r.next(s)}}}const qv={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?++t:t}}},percent_rank:function(){const t=qv.rank(),e=t.next;return{init:t.init,next:n=>(e(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,i=e.compare;let r=e.index;if(t<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;t=r}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||U("ntile num must be greater than zero.");const n=qv.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(e*i(r))}},lag:function(t,e){return e=+e||1,{next:n=>{const i=n.index-e;return i>=0?t(n.data[i]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const i=n.index+e,r=n.data;return i<r.length?t(r[i]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||U("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(e-1);return i<n.i1?t(n.data[i]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const i=t(n.data[n.index]);return i!=null?e=i:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:i=>{const r=i.data;return i.index<=n?e:(n=zAe(t,r,i.index))<0?(n=r.length,e=null):e=t(r[n])}}}};function zAe(t,e,n){for(let i=e.length;n<i;++n)if(t(e[n])!=null)return n;return-1}const UAe=Object.keys(qv);function cJ(t){const e=de(t.ops),n=de(t.fields),i=de(t.params),r=de(t.as),s=this.outputs=[],o=this.windows=[],a={},l={},u=[],c=[];let d=!0;function h(f){de(Ai(f)).forEach(p=>a[p]=1)}h(t.sort),e.forEach((f,p)=>{const g=n[p],m=un(g),y=$Q(f,m,r[p]);if(h(g),s.push(y),Ae(qv,f))o.push(BAe(f,n[p],i[p],y));else{if(g==null&&f!=="count"&&U("Null aggregate field specified."),f==="count"){u.push(y);return}d=!1;let v=l[m];v||(v=l[m]=[],v.field=g,c.push(v)),v.push(HQ(f,y))}}),(u.length||c.length)&&(this.cell=jAe(c,u,d)),this.inputs=Object.keys(a)}const dJ=cJ.prototype;dJ.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};dJ.update=function(t,e){const n=this.cell,i=this.windows,r=t.data,s=i&&i.length;let o;if(n){for(o=t.p0;o<t.i0;++o)n.rem(r[o]);for(o=t.p1;o<t.i1;++o)n.add(r[o]);n.set(e)}for(o=0;o<s;++o)i[o].update(t,e)};function jAe(t,e,n){t=t.map(l=>VQ(l,l.field));const i={num:0,agg:null,store:!1,count:e};if(!n)for(var r=t.length,s=i.agg=Array(r),o=0;o<r;++o)s[o]=new t[o](i);if(i.store)var a=i.data=new T3;return i.add=function(l){if(i.num+=1,!n){a&&a.add(l);for(let u=0;u<r;++u)s[u].add(s[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){a&&a.rem(l);for(let u=0;u<r;++u)s[u].rem(s[u].get(l),l)}},i.set=function(l){let u,c;for(a&&a.values(),u=0,c=e.length;u<c;++u)l[e[u]]=i.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<r;++l)s[l].init()},i}function Q3(t){V.call(this,{},t),this._mlen=0,this._mods=[]}Q3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:UAe.concat(SC)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};le(Q3,V,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),i=Lf(t.sort),r=qP(t.groupby),s=a=>this.group(r(a));let o=this.state;(!o||n)&&(o=this.state=new cJ(t)),n||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,a=>s(a).add(a))):(e.visit(e.REM,a=>s(a).remove(a)),e.visit(e.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)YAe(this._mods[a],o,i,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=BQ(Re),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function YAe(t,e,n,i){const r=i.sort,s=r&&!i.ignorePeers,o=i.frame||[null,0],a=t.data(n),l=a.length,u=s?yC(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||Ii(-1)};e.init();for(let d=0;d<l;++d)qAe(c,o,d,l),s&&KAe(c,u),e.update(c,a[d])}function qAe(t,e,n,i){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?i:Math.min(i,n+Math.abs(e[1])+1),t.index=n}function KAe(t,e){const n=t.i0,i=t.i1-1,r=t.compare,s=t.data,o=s.length-1;n>0&&!r(s[n],s[n-1])&&(t.i0=e.left(s,s[n])),i<o&&!r(s[i],s[i+1])&&(t.i1=e.right(s,s[i]))}const XAe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Vc,bin:A3,collect:D3,compare:zQ,countpattern:O3,cross:P3,density:F3,dotbin:N3,expression:KQ,extent:L3,facet:HR,field:XQ,filter:k3,flatten:G3,fold:$3,formula:H3,generate:QQ,impute:W3,joinaggregate:V3,kde:B3,key:JQ,load:ZQ,lookup:z3,multiextent:eJ,multivalues:tJ,params:nJ,pivot:U3,prefacet:iJ,project:j3,proxy:rJ,quantile:Y3,relay:sJ,sample:q3,sequence:K3,sieve:oJ,subflow:I3,timeunit:X3,tupleindex:lJ,values:uJ,window:Q3},Symbol.toStringTag,{value:"Module"}));function wt(t){return function(){return t}}const k6=Math.abs,fi=Math.atan2,Fd=Math.cos,QAe=Math.max,FD=Math.min,Ca=Math.sin,ch=Math.sqrt,yi=1e-12,Fg=Math.PI,Ab=Fg/2,hJ=2*Fg;function JAe(t){return t>1?0:t<-1?Fg:Math.acos(t)}function G6(t){return t>=1?Ab:t<=-1?-Ab:Math.asin(t)}const KP=Math.PI,XP=2*KP,jd=1e-6,ZAe=XP-jd;function fJ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function eDe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return fJ;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let J3=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?fJ:eDe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,u=r-n,c=o-e,d=a-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>jd)if(!(Math.abs(d*l-u*c)>jd)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=i-o,p=r-a,g=l*l+u*u,m=f*f+p*p,y=Math.sqrt(g),v=Math.sqrt(h),C=s*Math.tan((KP-Math.acos((g+h-m)/(2*y*v)))/2),w=C/v,E=C/y;Math.abs(w-1)>jd&&this._append`L${e+w*c},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*f>c*p)},${this._x1=e+E*l},${this._y1=n+E*u}`}}arc(e,n,i,r,s,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),u=e+a,c=n+l,d=1^o,h=o?r-s:s-r;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>jd||Math.abs(this._y1-c)>jd)&&this._append`L${u},${c}`,i&&(h<0&&(h=h%XP+XP),h>ZAe?this._append`A${i},${i},0,1,${d},${e-a},${n-l}A${i},${i},0,1,${d},${this._x1=u},${this._y1=c}`:h>jd&&this._append`A${i},${i},0,${+(h>=KP)},${d},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function WR(){return new J3}WR.prototype=J3.prototype;function VR(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new J3(e)}function tDe(t){return t.innerRadius}function nDe(t){return t.outerRadius}function iDe(t){return t.startAngle}function rDe(t){return t.endAngle}function sDe(t){return t&&t.padAngle}function oDe(t,e,n,i,r,s,o,a){var l=n-t,u=i-e,c=o-r,d=a-s,h=d*l-c*u;if(!(h*h<yi))return h=(c*(e-s)-d*(t-r))/h,[t+h*l,e+h*u]}function Iw(t,e,n,i,r,s,o){var a=t-n,l=e-i,u=(o?s:-s)/ch(a*a+l*l),c=u*l,d=-u*a,h=t+c,f=e+d,p=n+c,g=i+d,m=(h+p)/2,y=(f+g)/2,v=p-h,C=g-f,w=v*v+C*C,E=r-s,b=h*g-p*f,S=(C<0?-1:1)*ch(QAe(0,E*E*w-b*b)),_=(b*C-v*S)/w,A=(-b*v-C*S)/w,D=(b*C+v*S)/w,P=(-b*v+C*S)/w,L=_-m,O=A-y,M=D-m,F=P-y;return L*L+O*O>M*M+F*F&&(_=D,A=P),{cx:_,cy:A,x01:-c,y01:-d,x11:_*(r/E-1),y11:A*(r/E-1)}}function aDe(){var t=tDe,e=nDe,n=wt(0),i=null,r=iDe,s=rDe,o=sDe,a=null,l=VR(u);function u(){var c,d,h=+t.apply(this,arguments),f=+e.apply(this,arguments),p=r.apply(this,arguments)-Ab,g=s.apply(this,arguments)-Ab,m=k6(g-p),y=g>p;if(a||(a=c=l()),f<h&&(d=f,f=h,h=d),!(f>yi))a.moveTo(0,0);else if(m>hJ-yi)a.moveTo(f*Fd(p),f*Ca(p)),a.arc(0,0,f,p,g,!y),h>yi&&(a.moveTo(h*Fd(g),h*Ca(g)),a.arc(0,0,h,g,p,y));else{var v=p,C=g,w=p,E=g,b=m,S=m,_=o.apply(this,arguments)/2,A=_>yi&&(i?+i.apply(this,arguments):ch(h*h+f*f)),D=FD(k6(f-h)/2,+n.apply(this,arguments)),P=D,L=D,O,M;if(A>yi){var F=G6(A/h*Ca(_)),I=G6(A/f*Ca(_));(b-=F*2)>yi?(F*=y?1:-1,w+=F,E-=F):(b=0,w=E=(p+g)/2),(S-=I*2)>yi?(I*=y?1:-1,v+=I,C-=I):(S=0,v=C=(p+g)/2)}var H=f*Fd(v),N=f*Ca(v),G=h*Fd(E),W=h*Ca(E);if(D>yi){var X=f*Fd(C),ne=f*Ca(C),Se=h*Fd(w),xe=h*Ca(w),rt;if(m<Fg)if(rt=oDe(H,N,Se,xe,X,ne,G,W)){var cn=H-rt[0],Gi=N-rt[1],yo=X-rt[0],fe=ne-rt[1],ve=1/Ca(JAe((cn*yo+Gi*fe)/(ch(cn*cn+Gi*Gi)*ch(yo*yo+fe*fe)))/2),Ee=ch(rt[0]*rt[0]+rt[1]*rt[1]);P=FD(D,(h-Ee)/(ve-1)),L=FD(D,(f-Ee)/(ve+1))}else P=L=0}S>yi?L>yi?(O=Iw(Se,xe,H,N,f,L,y),M=Iw(X,ne,G,W,f,L,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),L<D?a.arc(O.cx,O.cy,L,fi(O.y01,O.x01),fi(M.y01,M.x01),!y):(a.arc(O.cx,O.cy,L,fi(O.y01,O.x01),fi(O.y11,O.x11),!y),a.arc(0,0,f,fi(O.cy+O.y11,O.cx+O.x11),fi(M.cy+M.y11,M.cx+M.x11),!y),a.arc(M.cx,M.cy,L,fi(M.y11,M.x11),fi(M.y01,M.x01),!y))):(a.moveTo(H,N),a.arc(0,0,f,v,C,!y)):a.moveTo(H,N),!(h>yi)||!(b>yi)?a.lineTo(G,W):P>yi?(O=Iw(G,W,X,ne,h,-P,y),M=Iw(H,N,Se,xe,h,-P,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),P<D?a.arc(O.cx,O.cy,P,fi(O.y01,O.x01),fi(M.y01,M.x01),!y):(a.arc(O.cx,O.cy,P,fi(O.y01,O.x01),fi(O.y11,O.x11),!y),a.arc(0,0,h,fi(O.cy+O.y11,O.cx+O.x11),fi(M.cy+M.y11,M.cx+M.x11),y),a.arc(M.cx,M.cy,P,fi(M.y11,M.x11),fi(M.y01,M.x01),!y))):a.arc(0,0,h,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Fg/2;return[Fd(d)*c,Ca(d)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:wt(+c),u):t},u.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:wt(+c),u):e},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:wt(+c),u):n},u.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:wt(+c),u):i},u.startAngle=function(c){return arguments.length?(r=typeof c=="function"?c:wt(+c),u):r},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:wt(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:wt(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function pJ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gJ(t){this._context=t}gJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Z3(t){return new gJ(t)}function mJ(t){return t[0]}function yJ(t){return t[1]}function vJ(t,e){var n=wt(!0),i=null,r=Z3,s=null,o=VR(a);t=typeof t=="function"?t:t===void 0?mJ:wt(t),e=typeof e=="function"?e:e===void 0?yJ:wt(e);function a(l){var u,c=(l=pJ(l)).length,d,h=!1,f;for(i==null&&(s=r(f=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,u,l),+e(d,u,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:wt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:wt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:wt(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function CJ(t,e,n){var i=null,r=wt(!0),s=null,o=Z3,a=null,l=VR(u);t=typeof t=="function"?t:t===void 0?mJ:wt(+t),e=typeof e=="function"?e:wt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?yJ:wt(+n);function u(d){var h,f,p,g=(d=pJ(d)).length,m,y=!1,v,C=new Array(g),w=new Array(g);for(s==null&&(a=o(v=l())),h=0;h<=g;++h){if(!(h<g&&r(m=d[h],h,d))===y)if(y=!y)f=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=h-1;p>=f;--p)a.point(C[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(C[h]=+t(m,h,d),w[h]=+e(m,h,d),a.point(i?+i(m,h,d):C[h],n?+n(m,h,d):w[h]))}if(v)return a=null,v+""||null}function c(){return vJ().defined(r).curve(o).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:wt(+d),i=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:wt(+d),u):t},u.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:wt(+d),u):i},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:wt(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:wt(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:wt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(i).y(e)},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:wt(!!d),u):r},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}const lDe={draw(t,e){const n=ch(e/Fg);t.moveTo(n,0),t.arc(0,0,n,0,hJ)}};function uDe(t,e){let n=null,i=VR(r);t=typeof t=="function"?t:wt(t||lDe),e=typeof e=="function"?e:wt(e===void 0?64:+e);function r(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:wt(s),r):t},r.size=function(s){return arguments.length?(e=typeof s=="function"?s:wt(+s),r):e},r.context=function(s){return arguments.length?(n=s??null,r):n},r}function Bc(){}function Db(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function BR(t){this._context=t}BR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Db(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Db(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cDe(t){return new BR(t)}function wJ(t){this._context=t}wJ.prototype={areaStart:Bc,areaEnd:Bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Db(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dDe(t){return new wJ(t)}function SJ(t){this._context=t}SJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Db(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hDe(t){return new SJ(t)}function EJ(t,e){this._basis=new BR(t),this._beta=e}EJ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],s=t[n]-i,o=e[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(i+l*s),this._beta*e[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const fDe=function t(e){function n(i){return e===1?new BR(i):new EJ(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Ob(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ek(t,e){this._context=t,this._k=(1-e)/6}ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ob(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ob(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const pDe=function t(e){function n(i){return new ek(i,e)}return n.tension=function(i){return t(+i)},n}(0);function tk(t,e){this._context=t,this._k=(1-e)/6}tk.prototype={areaStart:Bc,areaEnd:Bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ob(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const gDe=function t(e){function n(i){return new tk(i,e)}return n.tension=function(i){return t(+i)},n}(0);function nk(t,e){this._context=t,this._k=(1-e)/6}nk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ob(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const mDe=function t(e){function n(i){return new nk(i,e)}return n.tension=function(i){return t(+i)},n}(0);function ik(t,e,n){var i=t._x1,r=t._y1,s=t._x2,o=t._y2;if(t._l01_a>yi){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>yi){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,s,o,t._x2,t._y2)}function bJ(t,e){this._context=t,this._alpha=e}bJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ik(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const yDe=function t(e){function n(i){return e?new bJ(i,e):new ek(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function xJ(t,e){this._context=t,this._alpha=e}xJ.prototype={areaStart:Bc,areaEnd:Bc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ik(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const vDe=function t(e){function n(i){return e?new xJ(i,e):new tk(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function _J(t,e){this._context=t,this._alpha=e}_J.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ik(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const CDe=function t(e){function n(i){return e?new _J(i,e):new nk(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function RJ(t){this._context=t}RJ.prototype={areaStart:Bc,areaEnd:Bc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function wDe(t){return new RJ(t)}function $6(t){return t<0?-1:1}function H6(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return($6(s)+$6(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function W6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function MD(t,e,n){var i=t._x0,r=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,r+a*e,s-a,o-a*n,s,o)}function Pb(t){this._context=t}Pb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:MD(this,this._t0,W6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,MD(this,W6(this,n=H6(this,t,e)),n);break;default:MD(this,this._t0,n=H6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function TJ(t){this._context=new AJ(t)}(TJ.prototype=Object.create(Pb.prototype)).point=function(t,e){Pb.prototype.point.call(this,e,t)};function AJ(t){this._context=t}AJ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function SDe(t){return new Pb(t)}function EDe(t){return new TJ(t)}function DJ(t){this._context=t}DJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=V6(t),r=V6(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function V6(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(r[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function bDe(t){return new DJ(t)}function zR(t,e){this._context=t,this._t=e}zR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function xDe(t){return new zR(t,.5)}function _De(t){return new zR(t,0)}function RDe(t){return new zR(t,1)}function Dc(t,e){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const TDe=()=>typeof Image<"u"?Image:null;function yl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const QP=Symbol("implicit");function rk(){var t=new s6,e=[],n=[],i=QP;function r(s){let o=t.get(s);if(o===void 0){if(i!==QP)return i;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new s6;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return rk(e,n).unknown(i)},yl.apply(r,arguments),r}function jm(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function EC(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Cd(){}var jh=.7,Mg=1/jh,jp="\\s*([+-]?\\d+)\\s*",Kv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ja="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ADe=/^#([0-9a-f]{3,8})$/,DDe=new RegExp(`^rgb\\(${jp},${jp},${jp}\\)$`),ODe=new RegExp(`^rgb\\(${ja},${ja},${ja}\\)$`),PDe=new RegExp(`^rgba\\(${jp},${jp},${jp},${Kv}\\)$`),FDe=new RegExp(`^rgba\\(${ja},${ja},${ja},${Kv}\\)$`),MDe=new RegExp(`^hsl\\(${Kv},${ja},${ja}\\)$`),NDe=new RegExp(`^hsla\\(${Kv},${ja},${ja},${Kv}\\)$`),B6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jm(Cd,Xv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:z6,formatHex:z6,formatHex8:LDe,formatHsl:IDe,formatRgb:U6,toString:U6});function z6(){return this.rgb().formatHex()}function LDe(){return this.rgb().formatHex8()}function IDe(){return OJ(this).formatHsl()}function U6(){return this.rgb().formatRgb()}function Xv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ADe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?j6(e):n===3?new kn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?kw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?kw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=DDe.exec(t))?new kn(e[1],e[2],e[3],1):(e=ODe.exec(t))?new kn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=PDe.exec(t))?kw(e[1],e[2],e[3],e[4]):(e=FDe.exec(t))?kw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=MDe.exec(t))?K6(e[1],e[2]/100,e[3]/100,1):(e=NDe.exec(t))?K6(e[1],e[2]/100,e[3]/100,e[4]):B6.hasOwnProperty(t)?j6(B6[t]):t==="transparent"?new kn(NaN,NaN,NaN,0):null}function j6(t){return new kn(t>>16&255,t>>8&255,t&255,1)}function kw(t,e,n,i){return i<=0&&(t=e=n=NaN),new kn(t,e,n,i)}function sk(t){return t instanceof Cd||(t=Xv(t)),t?(t=t.rgb(),new kn(t.r,t.g,t.b,t.opacity)):new kn}function zc(t,e,n,i){return arguments.length===1?sk(t):new kn(t,e,n,i??1)}function kn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}jm(kn,zc,EC(Cd,{brighter(t){return t=t==null?Mg:Math.pow(Mg,t),new kn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jh:Math.pow(jh,t),new kn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new kn(xh(this.r),xh(this.g),xh(this.b),Fb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y6,formatHex:Y6,formatHex8:kDe,formatRgb:q6,toString:q6}));function Y6(){return`#${dh(this.r)}${dh(this.g)}${dh(this.b)}`}function kDe(){return`#${dh(this.r)}${dh(this.g)}${dh(this.b)}${dh((isNaN(this.opacity)?1:this.opacity)*255)}`}function q6(){const t=Fb(this.opacity);return`${t===1?"rgb(":"rgba("}${xh(this.r)}, ${xh(this.g)}, ${xh(this.b)}${t===1?")":`, ${t})`}`}function Fb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function dh(t){return t=xh(t),(t<16?"0":"")+t.toString(16)}function K6(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Po(t,e,n,i)}function OJ(t){if(t instanceof Po)return new Po(t.h,t.s,t.l,t.opacity);if(t instanceof Cd||(t=Xv(t)),!t)return new Po;if(t instanceof Po)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Po(o,a,l,t.opacity)}function Mb(t,e,n,i){return arguments.length===1?OJ(t):new Po(t,e,n,i??1)}function Po(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}jm(Po,Mb,EC(Cd,{brighter(t){return t=t==null?Mg:Math.pow(Mg,t),new Po(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jh:Math.pow(jh,t),new Po(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new kn(ND(t>=240?t-240:t+120,r,i),ND(t,r,i),ND(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Po(X6(this.h),Gw(this.s),Gw(this.l),Fb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fb(this.opacity);return`${t===1?"hsl(":"hsla("}${X6(this.h)}, ${Gw(this.s)*100}%, ${Gw(this.l)*100}%${t===1?")":`, ${t})`}`}}));function X6(t){return t=(t||0)%360,t<0?t+360:t}function Gw(t){return Math.max(0,Math.min(1,t||0))}function ND(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const PJ=Math.PI/180,FJ=180/Math.PI,Nb=18,MJ=.96422,NJ=1,LJ=.82521,IJ=4/29,Yp=6/29,kJ=3*Yp*Yp,GDe=Yp*Yp*Yp;function GJ(t){if(t instanceof Ya)return new Ya(t.l,t.a,t.b,t.opacity);if(t instanceof ql)return $J(t);t instanceof kn||(t=sk(t));var e=GD(t.r),n=GD(t.g),i=GD(t.b),r=LD((.2225045*e+.7168786*n+.0606169*i)/NJ),s,o;return e===n&&n===i?s=o=r:(s=LD((.4360747*e+.3850649*n+.1430804*i)/MJ),o=LD((.0139322*e+.0971045*n+.7141733*i)/LJ)),new Ya(116*r-16,500*(s-r),200*(r-o),t.opacity)}function Lb(t,e,n,i){return arguments.length===1?GJ(t):new Ya(t,e,n,i??1)}function Ya(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}jm(Ya,Lb,EC(Cd,{brighter(t){return new Ya(this.l+Nb*(t??1),this.a,this.b,this.opacity)},darker(t){return new Ya(this.l-Nb*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=MJ*ID(e),t=NJ*ID(t),n=LJ*ID(n),new kn(kD(3.1338561*e-1.6168667*t-.4906146*n),kD(-.9787684*e+1.9161415*t+.033454*n),kD(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function LD(t){return t>GDe?Math.pow(t,1/3):t/kJ+IJ}function ID(t){return t>Yp?t*t*t:kJ*(t-IJ)}function kD(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function GD(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $De(t){if(t instanceof ql)return new ql(t.h,t.c,t.l,t.opacity);if(t instanceof Ya||(t=GJ(t)),t.a===0&&t.b===0)return new ql(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*FJ;return new ql(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Ib(t,e,n,i){return arguments.length===1?$De(t):new ql(t,e,n,i??1)}function ql(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function $J(t){if(isNaN(t.h))return new Ya(t.l,0,0,t.opacity);var e=t.h*PJ;return new Ya(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}jm(ql,Ib,EC(Cd,{brighter(t){return new ql(this.h,this.c,this.l+Nb*(t??1),this.opacity)},darker(t){return new ql(this.h,this.c,this.l-Nb*(t??1),this.opacity)},rgb(){return $J(this).rgb()}}));var HJ=-.14861,ok=1.78277,ak=-.29227,UR=-.90649,Qv=1.97294,Q6=Qv*UR,J6=Qv*ok,Z6=ok*ak-UR*HJ;function HDe(t){if(t instanceof _h)return new _h(t.h,t.s,t.l,t.opacity);t instanceof kn||(t=sk(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Z6*i+Q6*e-J6*n)/(Z6+Q6-J6),s=i-r,o=(Qv*(n-r)-ak*s)/UR,a=Math.sqrt(o*o+s*s)/(Qv*r*(1-r)),l=a?Math.atan2(o,s)*FJ-120:NaN;return new _h(l<0?l+360:l,a,r,t.opacity)}function JP(t,e,n,i){return arguments.length===1?HDe(t):new _h(t,e,n,i??1)}function _h(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}jm(_h,JP,EC(Cd,{brighter(t){return t=t==null?Mg:Math.pow(Mg,t),new _h(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jh:Math.pow(jh,t),new _h(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*PJ,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new kn(255*(e+n*(HJ*i+ok*r)),255*(e+n*(ak*i+UR*r)),255*(e+n*(Qv*i)),this.opacity)}}));function WJ(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}function VJ(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return WJ((n-i/e)*e,o,r,s,a)}}function BJ(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],s=t[i%e],o=t[(i+1)%e],a=t[(i+2)%e];return WJ((n-i/e)*e,r,s,o,a)}}const jR=t=>()=>t;function zJ(t,e){return function(n){return t+n*e}}function WDe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function YR(t,e){var n=e-t;return n?zJ(t,n>180||n<-180?n-360*Math.round(n/360):n):jR(isNaN(t)?e:t)}function VDe(t){return(t=+t)==1?Gn:function(e,n){return n-e?WDe(e,n,t):jR(isNaN(e)?n:e)}}function Gn(t,e){var n=e-t;return n?zJ(t,n):jR(isNaN(t)?e:t)}const ZP=function t(e){var n=VDe(e);function i(r,s){var o=n((r=zc(r)).r,(s=zc(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),u=Gn(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=t,i}(1);function UJ(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=zc(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=t(i),r=t(r),s=t(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var BDe=UJ(VJ),zDe=UJ(BJ);function lk(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function jJ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function UDe(t,e){return(jJ(e)?lk:YJ)(t,e)}function YJ(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=wd(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function qJ(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Do(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function KJ(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=wd(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var eF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$D=new RegExp(eF.source,"g");function jDe(t){return function(){return t}}function YDe(t){return function(e){return t(e)+""}}function XJ(t,e){var n=eF.lastIndex=$D.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=eF.exec(t))&&(r=$D.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Do(i,r)})),n=$D.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?YDe(l[0].x):jDe(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function wd(t,e){var n=typeof e,i;return e==null||n==="boolean"?jR(e):(n==="number"?Do:n==="string"?(i=Xv(e))?(e=i,ZP):XJ:e instanceof Xv?ZP:e instanceof Date?qJ:jJ(e)?lk:Array.isArray(e)?YJ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?KJ:Do)(t,e)}function qDe(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function KDe(t,e){var n=YR(+t,+e);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function bC(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var e8=180/Math.PI,tF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function QJ(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*e8,skewX:Math.atan(l)*e8,scaleX:o,scaleY:a}}var $w;function XDe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tF:QJ(e.a,e.b,e.c,e.d,e.e,e.f)}function QDe(t){return t==null||($w||($w=document.createElementNS("http://www.w3.org/2000/svg","g")),$w.setAttribute("transform",t),!(t=$w.transform.baseVal.consolidate()))?tF:(t=t.matrix,QJ(t.a,t.b,t.c,t.d,t.e,t.f))}function JJ(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,c,d,h,f,p){if(u!==d||c!==h){var g=f.push("translate(",null,e,null,n);p.push({i:g-4,x:Do(u,d)},{i:g-2,x:Do(c,h)})}else(d||h)&&f.push("translate("+d+e+h+n)}function o(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:Do(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}function a(u,c,d,h){u!==c?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:Do(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(u,c,d,h,f,p){if(u!==d||c!==h){var g=f.push(r(f)+"scale(",null,",",null,")");p.push({i:g-4,x:Do(u,d)},{i:g-2,x:Do(c,h)})}else(d!==1||h!==1)&&f.push(r(f)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,h),o(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(f){for(var p=-1,g=h.length,m;++p<g;)d[(m=h[p]).i]=m.x(f);return d.join("")}}}var JDe=JJ(XDe,"px, ","px)","deg)"),ZDe=JJ(QDe,", ",")",")"),eOe=1e-12;function t8(t){return((t=Math.exp(t))+1/t)/2}function tOe(t){return((t=Math.exp(t))-1/t)/2}function nOe(t){return((t=Math.exp(2*t))-1)/(t+1)}const iOe=function t(e,n,i){function r(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],h=o[2],f=c-a,p=d-l,g=f*f+p*p,m,y;if(g<eOe)y=Math.log(h/u)/e,m=function(S){return[a+S*f,l+S*p,u*Math.exp(e*S*y)]};else{var v=Math.sqrt(g),C=(h*h-u*u+i*g)/(2*u*n*v),w=(h*h-u*u-i*g)/(2*h*n*v),E=Math.log(Math.sqrt(C*C+1)-C),b=Math.log(Math.sqrt(w*w+1)-w);y=(b-E)/e,m=function(S){var _=S*y,A=t8(E),D=u/(n*v)*(A*nOe(e*_+E)-tOe(E));return[a+D*f,l+D*p,u*A/t8(e*_+E)]}}return m.duration=y*1e3*e/Math.SQRT2,m}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},r}(Math.SQRT2,2,4);function ZJ(t){return function(e,n){var i=t((e=Mb(e)).h,(n=Mb(n)).h),r=Gn(e.s,n.s),s=Gn(e.l,n.l),o=Gn(e.opacity,n.opacity);return function(a){return e.h=i(a),e.s=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const rOe=ZJ(YR);var sOe=ZJ(Gn);function oOe(t,e){var n=Gn((t=Lb(t)).l,(e=Lb(e)).l),i=Gn(t.a,e.a),r=Gn(t.b,e.b),s=Gn(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=i(o),t.b=r(o),t.opacity=s(o),t+""}}function eZ(t){return function(e,n){var i=t((e=Ib(e)).h,(n=Ib(n)).h),r=Gn(e.c,n.c),s=Gn(e.l,n.l),o=Gn(e.opacity,n.opacity);return function(a){return e.h=i(a),e.c=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const aOe=eZ(YR);var lOe=eZ(Gn);function tZ(t){return function e(n){n=+n;function i(r,s){var o=t((r=JP(r)).h,(s=JP(s)).h),a=Gn(r.s,s.s),l=Gn(r.l,s.l),u=Gn(r.opacity,s.opacity);return function(c){return r.h=o(c),r.s=a(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return i.gamma=e,i}(1)}const uOe=tZ(YR);var cOe=tZ(Gn);function uk(t,e){e===void 0&&(e=t,t=wd);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function dOe(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}const hOe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:wd,interpolateArray:UDe,interpolateBasis:VJ,interpolateBasisClosed:BJ,interpolateCubehelix:uOe,interpolateCubehelixLong:cOe,interpolateDate:qJ,interpolateDiscrete:qDe,interpolateHcl:aOe,interpolateHclLong:lOe,interpolateHsl:rOe,interpolateHslLong:sOe,interpolateHue:KDe,interpolateLab:oOe,interpolateNumber:Do,interpolateNumberArray:lk,interpolateObject:KJ,interpolateRgb:ZP,interpolateRgbBasis:BDe,interpolateRgbBasisClosed:zDe,interpolateRound:bC,interpolateString:XJ,interpolateTransformCss:JDe,interpolateTransformSvg:ZDe,interpolateZoom:iOe,piecewise:uk,quantize:dOe},Symbol.toStringTag,{value:"Module"}));function fOe(t){return function(){return t}}function nF(t){return+t}var n8=[0,1];function Dr(t){return t}function iF(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:fOe(isNaN(e)?NaN:.5)}function pOe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function gOe(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=iF(r,i),s=n(o,s)):(i=iF(i,r),s=n(s,o)),function(a){return s(i(a))}}function mOe(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=iF(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=vC(t,a,1,i)-1;return s[l](r[l](a))}}function xC(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qR(){var t=n8,e=n8,n=wd,i,r,s,o=Dr,a,l,u;function c(){var h=Math.min(t.length,e.length);return o!==Dr&&(o=pOe(t[0],t[h-1])),a=h>2?mOe:gOe,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(i),e,n)))(i(o(h)))}return d.invert=function(h){return o(r((u||(u=a(e,t.map(i),Do)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,nF),c()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=bC,c()},d.clamp=function(h){return arguments.length?(o=h?!0:Dr,c()):o!==Dr},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,f){return i=h,r=f,c()}}function nZ(){return qR()(Dr,Dr)}function iZ(t,e,n,i){var r=Wc(t,e,n),s;switch(i=Uh(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=DX(r,o))&&(i.precision=s),XI(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=OX(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=AX(r))&&(i.precision=s-(i.type==="%")*2);break}}return bR(i)}function kf(t){var e=t.domain;return t.ticks=function(n){var i=e();return LP(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return iZ(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=r,r=s,s=u);c-- >0;){if(u=IP(o,a,n),u===l)return i[r]=o,i[s]=a,e(i);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function rZ(){var t=nZ();return t.copy=function(){return xC(t,rZ())},yl.apply(t,arguments),kf(t)}function sZ(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,nF),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return sZ(t).unknown(e)},t=arguments.length?Array.from(t,nF):[0,1],kf(n)}function oZ(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),t[n]=e.floor(r),t[i]=e.ceil(s),t}function i8(t){return Math.log(t)}function r8(t){return Math.exp(t)}function yOe(t){return-Math.log(-t)}function vOe(t){return-Math.exp(-t)}function COe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function wOe(t){return t===10?COe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function SOe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function s8(t){return(e,n)=>-t(-e,n)}function ck(t){const e=t(i8,r8),n=e.domain;let i=10,r,s;function o(){return r=SOe(i),s=wOe(i),n()[0]<0?(r=s8(r),s=s8(s),t(yOe,vOe)):t(i8,r8),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=r(u),f=r(c),p,g;const m=a==null?10:+a;let y=[];if(!(i%1)&&f-h<m){if(h=Math.floor(h),f=Math.ceil(f),u>0){for(;h<=f;++h)for(p=1;p<i;++p)if(g=h<0?p/s(-h):p*s(h),!(g<u)){if(g>c)break;y.push(g)}}else for(;h<=f;++h)for(p=i-1;p>=1;--p)if(g=h>0?p/s(-h):p*s(h),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=LP(u,c,m))}else y=LP(h,f,Math.min(f-h,m)).map(s);return d?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Uh(l)).precision==null&&(l.trim=!0),l=bR(l)),a===1/0)return l;const u=Math.max(1,i*a/e.ticks().length);return c=>{let d=c/s(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},e.nice=()=>n(oZ(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),e}function aZ(){const t=ck(qR()).domain([1,10]);return t.copy=()=>xC(t,aZ()).base(t.base()),yl.apply(t,arguments),t}function o8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function a8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function dk(t){var e=1,n=t(o8(e),a8(e));return n.constant=function(i){return arguments.length?t(o8(e=+i),a8(e)):e},kf(n)}function lZ(){var t=dk(qR());return t.copy=function(){return xC(t,lZ()).constant(t.constant())},yl.apply(t,arguments)}function l8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function EOe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function bOe(t){return t<0?-t*t:t*t}function hk(t){var e=t(Dr,Dr),n=1;function i(){return n===1?t(Dr,Dr):n===.5?t(EOe,bOe):t(l8(n),l8(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},kf(e)}function fk(){var t=hk(qR());return t.copy=function(){return xC(t,fk()).exponent(t.exponent())},yl.apply(t,arguments),t}function xOe(){return fk.apply(null,arguments).exponent(.5)}function uZ(){var t=[],e=[],n=[],i;function r(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=EX(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:e[vC(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(nu),r()},s.range=function(o){return arguments.length?(e=Array.from(o),r()):e.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return uZ().domain(t).range(e).unknown(i)},yl.apply(s,arguments)}function cZ(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function o(l){return l!=null&&l<=l?r[vC(i,l,0,n)]:s}function a(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,a()):r.slice()},o.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return i.slice()},o.copy=function(){return cZ().domain([t,e]).range(r).unknown(s)},yl.apply(kf(o),arguments)}function dZ(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[vC(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return dZ().domain(t).range(e).unknown(n)},yl.apply(r,arguments)}function _Oe(t){return new Date(t)}function ROe(t){return t instanceof Date?+t:+new Date(+t)}function pk(t,e,n,i,r,s,o,a,l,u){var c=nZ(),d=c.invert,h=c.domain,f=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),C=u("%B"),w=u("%Y");function E(b){return(l(b)<b?f:a(b)<b?p:o(b)<b?g:s(b)<b?m:i(b)<b?r(b)<b?y:v:n(b)<b?C:w)(b)}return c.invert=function(b){return new Date(d(b))},c.domain=function(b){return arguments.length?h(Array.from(b,ROe)):h().map(_Oe)},c.ticks=function(b){var S=h();return t(S[0],S[S.length-1],b??10)},c.tickFormat=function(b,S){return S==null?E:u(S)},c.nice=function(b){var S=h();return(!b||typeof b.range!="function")&&(b=e(S[0],S[S.length-1],b??10)),b?h(oZ(S,b)):c},c.copy=function(){return xC(c,pk(t,e,n,i,r,s,o,a,l,u))},c}function TOe(){return yl.apply(pk(M_e,N_e,nl,zv,Wm,iu,RR,xR,Yl,t3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function AOe(){return yl.apply(pk(P_e,F_e,il,Uv,Vm,Tc,TR,_R,Yl,n3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function KR(){var t=0,e=1,n,i,r,s,o=Dr,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(r===0?.5:(d=(s(d)-n)*r,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(h){var f,p;return arguments.length?([f,p]=h,o=d(f,p),u):[o(0),o(1)]}}return u.range=c(wd),u.rangeRound=c(bC),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(t),i=d(e),r=n===i?0:1/(i-n),u}}function Sd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function gk(){var t=kf(KR()(Dr));return t.copy=function(){return Sd(t,gk())},vd.apply(t,arguments)}function hZ(){var t=ck(KR()).domain([1,10]);return t.copy=function(){return Sd(t,hZ()).base(t.base())},vd.apply(t,arguments)}function fZ(){var t=dk(KR());return t.copy=function(){return Sd(t,fZ()).constant(t.constant())},vd.apply(t,arguments)}function mk(){var t=hk(KR());return t.copy=function(){return Sd(t,mk()).exponent(t.exponent())},vd.apply(t,arguments)}function DOe(){return mk.apply(null,arguments).exponent(.5)}function XR(){var t=0,e=.5,n=1,i=1,r,s,o,a,l,u=Dr,c,d=!1,h;function f(g){return isNaN(g=+g)?h:(g=.5+((g=+c(g))-s)*(i*g<i*s?a:l),u(d?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([t,e,n]=g,r=c(t=+t),s=c(e=+e),o=c(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,f):[t,e,n]},f.clamp=function(g){return arguments.length?(d=!!g,f):d},f.interpolator=function(g){return arguments.length?(u=g,f):u};function p(g){return function(m){var y,v,C;return arguments.length?([y,v,C]=m,u=uk(g,[y,v,C]),f):[u(0),u(.5),u(1)]}}return f.range=p(wd),f.rangeRound=p(bC),f.unknown=function(g){return arguments.length?(h=g,f):h},function(g){return c=g,r=g(t),s=g(e),o=g(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,f}}function pZ(){var t=kf(XR()(Dr));return t.copy=function(){return Sd(t,pZ())},vd.apply(t,arguments)}function gZ(){var t=ck(XR()).domain([.1,1,10]);return t.copy=function(){return Sd(t,gZ()).base(t.base())},vd.apply(t,arguments)}function mZ(){var t=dk(XR());return t.copy=function(){return Sd(t,mZ()).constant(t.constant())},vd.apply(t,arguments)}function yk(){var t=hk(XR());return t.copy=function(){return Sd(t,yk()).exponent(t.exponent())},vd.apply(t,arguments)}function OOe(){return yk.apply(null,arguments).exponent(.5)}function vk(t,e,n){const i=t-e+n*2;return t?i>0?i:1:0}const POe="identity",Ng="linear",vu="log",_C="pow",RC="sqrt",QR="symlog",Yh="time",qh="utc",qa="sequential",Ym="diverging",Lg="quantile",JR="quantize",ZR="threshold",Ck="ordinal",rF="point",yZ="band",wk="bin-ordinal",On="continuous",TC="discrete",AC="discretizing",po="interpolating",Sk="temporal";function FOe(t){return function(e){let n=e[0],i=e[1],r;return i<n&&(r=n,n=i,i=r),[t.invert(n),t.invert(i)]}}function MOe(t){return function(e){const n=t.range();let i=e[0],r=e[1],s=-1,o,a,l,u;for(r<i&&(a=i,i=r,r=a),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(s<0&&(s=l),o=l);if(!(s<0))return i=t.invertExtent(n[s]),r=t.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function Ek(){const t=rk().unknown(void 0),e=t.domain,n=t.range;let i=[0,1],r,s,o=!1,a=0,l=0,u=.5;delete t.unknown;function c(){const d=e().length,h=i[1]<i[0],f=i[1-h],p=vk(d,a,l);let g=i[h-0];r=(f-g)/(p||1),o&&(r=Math.floor(r)),g+=(f-g-r*(d-a))*u,s=r*(1-a),o&&(g=Math.round(g),s=Math.round(s));const m=ps(d).map(y=>g+r*y);return n(h?m.reverse():m)}return t.domain=function(d){return arguments.length?(e(d),c()):e()},t.range=function(d){return arguments.length?(i=[+d[0],+d[1]],c()):i.slice()},t.rangeRound=function(d){return i=[+d[0],+d[1]],o=!0,c()},t.bandwidth=function(){return s},t.step=function(){return r},t.round=function(d){return arguments.length?(o=!!d,c()):o},t.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},t.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},t.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},t.invertRange=function(d){if(d[0]==null||d[1]==null)return;const h=i[1]<i[0],f=h?n().reverse():n(),p=f.length-1;let g=+d[0],m=+d[1],y,v,C;if(!(g!==g||m!==m)&&(m<g&&(C=g,g=m,m=C),!(m<f[0]||g>i[1-h])))return y=Math.max(0,wb(f,g)-1),v=g===m?y:wb(f,m)-1,g-f[y]>s+1e-10&&++y,h&&(C=y,y=p-v,v=p-C),y>v?void 0:e().slice(y,v+1)},t.invert=function(d){const h=t.invertRange([d,d]);return h&&h[0]},t.copy=function(){return Ek().domain(e()).range(i).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function vZ(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return vZ(e())},t}function NOe(){return vZ(Ek().paddingInner(1))}var LOe=Array.prototype.map;function IOe(t){return LOe.call(t,xi)}const kOe=Array.prototype.slice;function CZ(){let t=[],e=[];function n(i){return i==null||i!==i?void 0:e[(vC(t,i)-1)%e.length]}return n.domain=function(i){return arguments.length?(t=IOe(i),n):t.slice()},n.range=function(i){return arguments.length?(e=kOe.call(i),n):e.slice()},n.tickFormat=function(i,r){return iZ(t[0],at(t),i??10,r)},n.copy=function(){return CZ().domain(n.domain()).range(n.range())},n}const kb=new Map,wZ=Symbol("vega_scale");function SZ(t){return t[wZ]=!0,t}function GOe(t){return t&&t[wZ]===!0}function $Oe(t,e,n){const i=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?FOe(s):s.invertExtent?MOe(s):void 0),s.type=t,SZ(s)};return i.metadata=ta(de(n)),i}function mt(t,e,n){return arguments.length>1?(kb.set(t,$Oe(t,e,n)),this):EZ(t)?kb.get(t):void 0}mt(POe,sZ);mt(Ng,rZ,On);mt(vu,aZ,[On,vu]);mt(_C,fk,On);mt(RC,xOe,On);mt(QR,lZ,On);mt(Yh,TOe,[On,Sk]);mt(qh,AOe,[On,Sk]);mt(qa,gk,[On,po]);mt(`${qa}-${Ng}`,gk,[On,po]);mt(`${qa}-${vu}`,hZ,[On,po,vu]);mt(`${qa}-${_C}`,mk,[On,po]);mt(`${qa}-${RC}`,DOe,[On,po]);mt(`${qa}-${QR}`,fZ,[On,po]);mt(`${Ym}-${Ng}`,pZ,[On,po]);mt(`${Ym}-${vu}`,gZ,[On,po,vu]);mt(`${Ym}-${_C}`,yk,[On,po]);mt(`${Ym}-${RC}`,OOe,[On,po]);mt(`${Ym}-${QR}`,mZ,[On,po]);mt(Lg,uZ,[AC,Lg]);mt(JR,cZ,AC);mt(ZR,dZ,AC);mt(wk,CZ,[TC,AC]);mt(Ck,rk,TC);mt(yZ,Ek,TC);mt(rF,NOe,TC);function EZ(t){return kb.has(t)}function Gf(t,e){const n=kb.get(t);return n&&n.metadata[e]}function bk(t){return Gf(t,On)}function Ig(t){return Gf(t,TC)}function sF(t){return Gf(t,AC)}function bZ(t){return Gf(t,vu)}function HOe(t){return Gf(t,Sk)}function xZ(t){return Gf(t,po)}function _Z(t){return Gf(t,Lg)}const WOe=["clamp","base","constant","exponent"];function RZ(t,e){const n=e[0],i=at(e)-n;return function(r){return t(n+r*i)}}function eT(t,e,n){return uk(xk(e||"rgb",n),t)}function TZ(t,e){const n=new Array(e),i=e+1;for(let r=0;r<e;)n[r]=t(++r/i);return n}function AZ(t,e,n){const i=n-e;let r,s,o;return!i||!Number.isFinite(i)?Ii(.5):(r=(s=t.type).indexOf("-"),s=r<0?s:s.slice(r+1),o=mt(s)().domain([e,n]).range([0,1]),WOe.forEach(a=>t[a]?o[a](t[a]()):0),o)}function xk(t,e){const n=hOe[VOe(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function VOe(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const BOe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},zOe={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function DZ(t){const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function OZ(t,e){for(const n in t)_k(n,e(t[n]))}const u8={};OZ(zOe,DZ);OZ(BOe,t=>eT(DZ(t)));function _k(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(u8[t]=e,this):u8[t]}const jS="symbol",UOe="discrete",jOe="gradient",YOe=t=>j(t)?t.map(e=>String(e)):String(t),qOe=(t,e)=>t[1]-e[1],KOe=(t,e)=>e[1]-t[1];function Rk(t,e,n){let i;return ft(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),n!=null&&(e=Math.min(e,Math.floor(mC(t.domain())/n||1)))),he(e)&&(i=e.step,e=e.interval),ce(e)&&(e=t.type===Yh?Bm(e):t.type==qh?zm(e):U("Only time and utc scales accept interval strings."),i&&(e=e.every(i))),e}function PZ(t,e,n){let i=t.range(),r=i[0],s=at(i),o=qOe;if(r>s&&(i=s,s=r,r=i,o=KOe),r=Math.floor(r),s=Math.ceil(s),e=e.map(a=>[a,t(a)]).filter(a=>r<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&e.length>1){const a=[e[0],at(e)];for(;e.length>n&&e.length>=3;)e=e.filter((l,u)=>!(u%2));e.length<3&&(e=a)}return e}function Tk(t,e){return t.bins?PZ(t,t.bins):t.ticks?t.ticks(e):t.domain()}function FZ(t,e,n,i,r,s){const o=e.type;let a=YOe;if(o===Yh||r===Yh)a=t.timeFormat(i);else if(o===qh||r===qh)a=t.utcFormat(i);else if(bZ(o)){const l=t.formatFloat(i);if(s||e.bins)a=l;else{const u=MZ(e,n,!1);a=c=>u(c)?l(c):""}}else if(e.tickFormat){const l=e.domain();a=t.formatSpan(l[0],l[l.length-1],n,i)}else i&&(a=t.format(i));return a}function MZ(t,e,n){const i=Tk(t,e),r=t.base(),s=Math.log(r),o=Math.max(1,r*e/i.length),a=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/s));return u*r<r-.5&&(u*=r),u<=o};return n?i.filter(a):a}const oF={[Lg]:"quantiles",[JR]:"thresholds",[ZR]:"domain"},NZ={[Lg]:"quantiles",[JR]:"domain"};function LZ(t,e){return t.bins?JOe(t.bins):t.type===vu?MZ(t,e,!0):oF[t.type]?QOe(t[oF[t.type]]()):Tk(t,e)}function XOe(t,e,n){const i=e[NZ[e.type]](),r=i.length;let s=r>1?i[1]-i[0]:i[0],o;for(o=1;o<r;++o)s=Math.min(s,i[o]-i[o-1]);return t.formatSpan(0,s,3*10,n)}function QOe(t){const e=[-1/0].concat(t);return e.max=1/0,e}function JOe(t){const e=t.slice(0,-1);return e.max=at(t),e}const ZOe=t=>oF[t.type]||t.bins;function IZ(t,e,n,i,r,s,o){const a=NZ[e.type]&&s!==Yh&&s!==qh?XOe(t,e,r):FZ(t,e,n,r,s,o);return i===jS&&ZOe(e)?e2e(a):i===UOe?t2e(a):n2e(a)}const e2e=t=>(e,n,i)=>{const r=c8(i[n+1],c8(i.max,1/0)),s=d8(e,t),o=d8(r,t);return s&&o?s+"  "+o:o?"< "+o:" "+s},c8=(t,e)=>t??e,t2e=t=>(e,n)=>n?t(e):null,n2e=t=>e=>t(e),d8=(t,e)=>Number.isFinite(t)?e(t):null;function i2e(t){const e=t.domain(),n=e.length-1;let i=+e[0],r=+at(e),s=r-i;if(t.type===ZR){const o=n?s/n:.1;i-=o,r+=o,s=r-i}return o=>(o-i)/s}function r2e(t,e,n,i){const r=i||e.type;return ce(n)&&HOe(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Yh?t.timeFormat("%A, %d %B %Y, %X"):!n&&r===qh?t.utcFormat("%A, %d %B %Y, %X UTC"):IZ(t,e,5,null,n,i,!0)}function kZ(t,e,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=r2e(t,e,n.format,n.formatType);if(sF(e.type)){const s=LZ(e).slice(1).map(r),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Ig(e.type)){const s=e.domain(),o=s.length,a=o>i?s.slice(0,i-2).map(r).join(", ")+", ending with "+s.slice(-1).map(r):s.map(r).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=e.domain();return`values from ${r(s[0])} to ${r(at(s))}`}}let GZ=0;function s2e(){GZ=0}const Gb="p_";function Ak(t){return t&&t.gradient}function $Z(t,e,n){const i=t.gradient;let r=t.id,s=i==="radial"?Gb:"";return r||(r=t.id="gradient_"+GZ++,i==="radial"?(t.x1=wa(t.x1,.5),t.y1=wa(t.y1,.5),t.r1=wa(t.r1,0),t.x2=wa(t.x2,.5),t.y2=wa(t.y2,.5),t.r2=wa(t.r2,.5),s=Gb):(t.x1=wa(t.x1,0),t.y1=wa(t.y1,0),t.x2=wa(t.x2,1),t.y2=wa(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+s+r+")"}function wa(t,e){return t??e}function HZ(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(r,s){return n.push({offset:r,color:s}),i}}}const h8={basis:{curve:cDe},"basis-closed":{curve:dDe},"basis-open":{curve:hDe},bundle:{curve:fDe,tension:"beta",value:.85},cardinal:{curve:pDe,tension:"tension",value:0},"cardinal-open":{curve:mDe,tension:"tension",value:0},"cardinal-closed":{curve:gDe,tension:"tension",value:0},"catmull-rom":{curve:yDe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:vDe,tension:"alpha",value:.5},"catmull-rom-open":{curve:CDe,tension:"alpha",value:.5},linear:{curve:Z3},"linear-closed":{curve:wDe},monotone:{horizontal:EDe,vertical:SDe},natural:{curve:bDe},step:{curve:xDe},"step-after":{curve:RDe},"step-before":{curve:_De}};function Dk(t,e,n){var i=Ae(h8,t)&&h8[t],r=null;return i&&(r=i.curve||i[e||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const o2e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},a2e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,l2e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,u2e=/^((\s+,?\s*)|(,\s*))/,c2e=/^[01]/;function kg(t){const e=[];return(t.match(a2e)||[]).forEach(i=>{let r=i[0];const s=r.toLowerCase(),o=o2e[s],a=d2e(s,o,i.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([r,...a.slice(0,o)]),l!==o){s==="m"&&(r=r==="M"?"L":"l");for(let u=o;u<l;u+=o)e.push([r,...a.slice(u,u+o)])}}),e}function d2e(t,e,n){const i=[];for(let r=0;e&&r<n.length;)for(let s=0;s<e;++s){const o=t==="a"&&(s===3||s===4)?c2e:l2e,a=n.slice(r).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");r+=a[0].length,i.push(+a[0]);const l=n.slice(r).match(u2e);l!==null&&(r+=l[0].length)}return i}const Uc=Math.PI/180,h2e=1e-14,Zd=Math.PI/2,Ia=Math.PI*2,Zf=Math.sqrt(3)/2;var HD={},WD={},WZ=[].join;function f2e(t,e,n,i,r,s,o,a,l){const u=WZ.call(arguments);if(HD[u])return HD[u];const c=o*Uc,d=Math.sin(c),h=Math.cos(c);n=Math.abs(n),i=Math.abs(i);const f=h*(a-t)*.5+d*(l-e)*.5,p=h*(l-e)*.5-d*(a-t)*.5;let g=f*f/(n*n)+p*p/(i*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);const m=h/n,y=d/n,v=-d/i,C=h/i,w=m*a+y*l,E=v*a+C*l,b=m*t+y*e,S=v*t+C*e;let A=1/((b-w)*(b-w)+(S-E)*(S-E))-.25;A<0&&(A=0);let D=Math.sqrt(A);s==r&&(D=-D);const P=.5*(w+b)-D*(S-E),L=.5*(E+S)+D*(b-w),O=Math.atan2(E-L,w-P);let F=Math.atan2(S-L,b-P)-O;F<0&&s===1?F+=Ia:F>0&&s===0&&(F-=Ia);const I=Math.ceil(Math.abs(F/(Zd+.001))),H=[];for(let N=0;N<I;++N){const G=O+N*F/I,W=O+(N+1)*F/I;H[N]=[P,L,G,W,n,i,d,h]}return HD[u]=H}function p2e(t){const e=WZ.call(t);if(WD[e])return WD[e];var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7];const c=u*o,d=-l*a,h=l*o,f=u*a,p=Math.cos(r),g=Math.sin(r),m=Math.cos(s),y=Math.sin(s),v=.5*(s-r),C=Math.sin(v*.5),w=8/3*C*C/Math.sin(v),E=n+p-w*g,b=i+g+w*p,S=n+m,_=i+y,A=S+w*y,D=_-w*m;return WD[e]=[c*E+d*b,h*E+f*b,c*A+d*D,h*A+f*D,c*S+d*_,h*S+f*_]}const Ns=["l",0,0,0,0,0,0,0];function g2e(t,e,n){const i=Ns[0]=t[0];if(i==="a"||i==="A")Ns[1]=e*t[1],Ns[2]=n*t[2],Ns[3]=t[3],Ns[4]=t[4],Ns[5]=t[5],Ns[6]=e*t[6],Ns[7]=n*t[7];else if(i==="h"||i==="H")Ns[1]=e*t[1];else if(i==="v"||i==="V")Ns[1]=n*t[1];else for(var r=1,s=t.length;r<s;++r)Ns[r]=(r%2==1?e:n)*t[r];return Ns}function Jv(t,e,n,i,r,s){var o,a=null,l=0,u=0,c=0,d=0,h,f,p,g,m=0,y=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),s==null&&(s=r),t.beginPath&&t.beginPath();for(var v=0,C=e.length;v<C;++v){switch(o=e[v],(r!==1||s!==1)&&(o=g2e(o,r,s)),o[0]){case"l":l+=o[1],u+=o[2],t.lineTo(l+n,u+i);break;case"L":l=o[1],u=o[2],t.lineTo(l+n,u+i);break;case"h":l+=o[1],t.lineTo(l+n,u+i);break;case"H":l=o[1],t.lineTo(l+n,u+i);break;case"v":u+=o[1],t.lineTo(l+n,u+i);break;case"V":u=o[1],t.lineTo(l+n,u+i);break;case"m":l+=o[1],u+=o[2],m=l,y=u,t.moveTo(l+n,u+i);break;case"M":l=o[1],u=o[2],m=l,y=u,t.moveTo(l+n,u+i);break;case"c":h=l+o[5],f=u+o[6],c=l+o[3],d=u+o[4],t.bezierCurveTo(l+o[1]+n,u+o[2]+i,c+n,d+i,h+n,f+i),l=h,u=f;break;case"C":l=o[5],u=o[6],c=o[3],d=o[4],t.bezierCurveTo(o[1]+n,o[2]+i,c+n,d+i,l+n,u+i);break;case"s":h=l+o[3],f=u+o[4],c=2*l-c,d=2*u-d,t.bezierCurveTo(c+n,d+i,l+o[1]+n,u+o[2]+i,h+n,f+i),c=l+o[1],d=u+o[2],l=h,u=f;break;case"S":h=o[3],f=o[4],c=2*l-c,d=2*u-d,t.bezierCurveTo(c+n,d+i,o[1]+n,o[2]+i,h+n,f+i),l=h,u=f,c=o[1],d=o[2];break;case"q":h=l+o[3],f=u+o[4],c=l+o[1],d=u+o[2],t.quadraticCurveTo(c+n,d+i,h+n,f+i),l=h,u=f;break;case"Q":h=o[3],f=o[4],t.quadraticCurveTo(o[1]+n,o[2]+i,h+n,f+i),l=h,u=f,c=o[1],d=o[2];break;case"t":h=l+o[1],f=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,d=u):a[0]==="t"?(c=2*l-p,d=2*u-g):a[0]==="q"&&(c=2*l-c,d=2*u-d),p=c,g=d,t.quadraticCurveTo(c+n,d+i,h+n,f+i),l=h,u=f,c=l+o[1],d=u+o[2];break;case"T":h=o[1],f=o[2],c=2*l-c,d=2*u-d,t.quadraticCurveTo(c+n,d+i,h+n,f+i),l=h,u=f;break;case"a":f8(t,l+n,u+i,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+i]),l+=o[6],u+=o[7];break;case"A":f8(t,l+n,u+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),l=o[6],u=o[7];break;case"z":case"Z":l=m,u=y,t.closePath();break}a=o}}function f8(t,e,n,i){const r=f2e(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let s=0;s<r.length;++s){const o=p2e(r[s]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const p8=.5773502691896257,g8={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Ia)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,r=n/2.5,s=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-s),t.lineTo(r,-s),t.lineTo(0,-n),t.lineTo(-r,-s),t.lineTo(-i,-s),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Zf*n,r=i-n*p8,s=n/4;t.moveTo(0,-i-r),t.lineTo(-s,i-r),t.lineTo(s,i-r),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Zf*n,r=i-n*p8;t.moveTo(0,-i-r),t.lineTo(-n,i-r),t.lineTo(n,i-r),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Zf*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Zf*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Zf*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Zf*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function VZ(t){return Ae(g8,t)?g8[t]:m2e(t)}var VD={};function m2e(t){if(!Ae(VD,t)){const e=kg(t);VD[t]={draw:function(n,i){Jv(n,e,0,0,Math.sqrt(i)/2)}}}return VD[t]}const $u=.448084975506;function y2e(t){return t.x}function v2e(t){return t.y}function C2e(t){return t.width}function w2e(t){return t.height}function Dl(t){return typeof t=="function"?t:()=>+t}function Hw(t,e,n){return Math.max(e,Math.min(t,n))}function BZ(){var t=y2e,e=v2e,n=C2e,i=w2e,r=Dl(0),s=r,o=r,a=r,l=null;function u(c,d,h){var f,p=d??+t.call(this,c),g=h??+e.call(this,c),m=+n.call(this,c),y=+i.call(this,c),v=Math.min(m,y)/2,C=Hw(+r.call(this,c),0,v),w=Hw(+s.call(this,c),0,v),E=Hw(+o.call(this,c),0,v),b=Hw(+a.call(this,c),0,v);if(l||(l=f=WR()),C<=0&&w<=0&&E<=0&&b<=0)l.rect(p,g,m,y);else{var S=p+m,_=g+y;l.moveTo(p+C,g),l.lineTo(S-w,g),l.bezierCurveTo(S-$u*w,g,S,g+$u*w,S,g+w),l.lineTo(S,_-b),l.bezierCurveTo(S,_-$u*b,S-$u*b,_,S-b,_),l.lineTo(p+E,_),l.bezierCurveTo(p+$u*E,_,p,_-$u*E,p,_-E),l.lineTo(p,g+C),l.bezierCurveTo(p,g+$u*C,p+$u*C,g,p+C,g),l.closePath()}if(f)return l=null,f+""||null}return u.x=function(c){return arguments.length?(t=Dl(c),u):t},u.y=function(c){return arguments.length?(e=Dl(c),u):e},u.width=function(c){return arguments.length?(n=Dl(c),u):n},u.height=function(c){return arguments.length?(i=Dl(c),u):i},u.cornerRadius=function(c,d,h,f){return arguments.length?(r=Dl(c),s=d!=null?Dl(d):r,a=h!=null?Dl(h):r,o=f!=null?Dl(f):s,u):r},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function zZ(){var t,e,n,i,r=null,s,o,a,l;function u(d,h,f){const p=f/2;if(s){var g=a-h,m=d-o;if(g||m){var y=Math.sqrt(g*g+m*m),v=(g/=y)*l,C=(m/=y)*l,w=Math.atan2(m,g);r.moveTo(o-v,a-C),r.lineTo(d-g*p,h-m*p),r.arc(d,h,p,w-Math.PI,w),r.lineTo(o+v,a+C),r.arc(o,a,l,w,w+Math.PI)}else r.arc(d,h,p,0,Ia);r.closePath()}else s=1;o=d,a=h,l=p}function c(d){var h,f=d.length,p,g=!1,m;for(r==null&&(r=m=WR()),h=0;h<=f;++h)!(h<f&&i(p=d[h],h,d))===g&&(g=!g)&&(s=0),g&&u(+t(p,h,d),+e(p,h,d),+n(p,h,d));if(m)return r=null,m+""||null}return c.x=function(d){return arguments.length?(t=d,c):t},c.y=function(d){return arguments.length?(e=d,c):e},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(i=d,c):i},c.context=function(d){return arguments.length?(d==null?r=null:r=d,c):r},c}function DC(t,e){return t??e}const OC=t=>t.x||0,PC=t=>t.y||0,S2e=t=>t.width||0,E2e=t=>t.height||0,b2e=t=>(t.x||0)+(t.width||0),x2e=t=>(t.y||0)+(t.height||0),_2e=t=>t.startAngle||0,R2e=t=>t.endAngle||0,T2e=t=>t.padAngle||0,A2e=t=>t.innerRadius||0,D2e=t=>t.outerRadius||0,O2e=t=>t.cornerRadius||0,P2e=t=>DC(t.cornerRadiusTopLeft,t.cornerRadius)||0,F2e=t=>DC(t.cornerRadiusTopRight,t.cornerRadius)||0,M2e=t=>DC(t.cornerRadiusBottomRight,t.cornerRadius)||0,N2e=t=>DC(t.cornerRadiusBottomLeft,t.cornerRadius)||0,L2e=t=>DC(t.size,64),I2e=t=>t.size||1,tT=t=>t.defined!==!1,k2e=t=>VZ(t.shape||"circle"),G2e=aDe().startAngle(_2e).endAngle(R2e).padAngle(T2e).innerRadius(A2e).outerRadius(D2e).cornerRadius(O2e),$2e=CJ().x(OC).y1(PC).y0(x2e).defined(tT),H2e=CJ().y(PC).x1(OC).x0(b2e).defined(tT),W2e=vJ().x(OC).y(PC).defined(tT),V2e=BZ().x(OC).y(PC).width(S2e).height(E2e).cornerRadius(P2e,F2e,M2e,N2e),B2e=uDe().type(k2e).size(L2e),z2e=zZ().x(OC).y(PC).defined(tT).size(I2e);function Ok(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function U2e(t,e){return G2e.context(t)(e)}function j2e(t,e){const n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?H2e:$2e).curve(Dk(i,n.orient,n.tension)).context(t)(e)}function Y2e(t,e){const n=e[0],i=n.interpolate||"linear";return W2e.curve(Dk(i,n.orient,n.tension)).context(t)(e)}function qm(t,e,n,i){return V2e.context(t)(e,n,i)}function q2e(t,e){return(e.mark.shape||e.shape).context(t)(e)}function K2e(t,e){return B2e.context(t)(e)}function X2e(t,e){return z2e.context(t)(e)}var UZ=1;function jZ(){UZ=1}function Pk(t,e,n){var i=e.clip,r=t._defs,s=e.clip_id||(e.clip_id="clip"+UZ++),o=r.clipping[s]||(r.clipping[s]={id:s});return Ue(i)?o.path=i(null):Ok(n)?o.path=qm(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function vn(t){this.clear(),t&&this.union(t)}vn.prototype={clone(){return new vn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:r,x2:s,y2:o}=this,a=Math.cos(t),l=Math.sin(t),u=e-e*a+n*l,c=n-e*l-n*a;return[a*i-l*r+u,l*i+a*r+c,a*i-l*o+u,l*i+a*o+c,a*s-l*r+u,l*s+a*r+c,a*s-l*o+u,l*s+a*o+c]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function nT(t){this.mark=t,this.bounds=this.bounds||new vn}function iT(t){nT.call(this,t),this.items=this.items||[]}le(iT,nT);function Fk(t){this._pending=0,this._loader=t||DR()}function m8(t){t._pending+=1}function Ty(t){t._pending-=1}Fk.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return m8(e),e._loader.sanitize(t,{context:"href"}).then(n=>(Ty(e),n)).catch(()=>(Ty(e),null))},loadImage(t){const e=this,n=TDe();return m8(e),e._loader.sanitize(t,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const s=new n,o=Ae(i,"crossOrigin")?i.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>Ty(e),s.onerror=()=>Ty(e),s.src=r,s}).catch(i=>(Ty(e),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const t=this;return new Promise(e=>{function n(i){t.pending()?setTimeout(()=>{n(!0)},10):e(i)}n(!1)})}};function Au(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?Q2e(e,i):0))}return t}function Q2e(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}const J2e=Ia-1e-8;let rT,YS,qS,hh,aF,KS,lF,uF;const uc=(t,e)=>rT.add(t,e),XS=(t,e)=>uc(YS=t,qS=e),y8=t=>uc(t,rT.y1),v8=t=>uc(rT.x1,t),eh=(t,e)=>aF*t+lF*e,th=(t,e)=>KS*t+uF*e,BD=(t,e)=>uc(eh(t,e),th(t,e)),zD=(t,e)=>XS(eh(t,e),th(t,e));function FC(t,e){return rT=t,e?(hh=e*Uc,aF=uF=Math.cos(hh),KS=Math.sin(hh),lF=-KS):(aF=uF=1,hh=KS=lF=0),Z2e}const Z2e={beginPath(){},closePath(){},moveTo:zD,lineTo:zD,rect(t,e,n,i){hh?(BD(t+n,e),BD(t+n,e+i),BD(t,e+i),zD(t,e)):(uc(t+n,e+i),XS(t,e))},quadraticCurveTo(t,e,n,i){const r=eh(t,e),s=th(t,e),o=eh(n,i),a=th(n,i);C8(YS,r,o,y8),C8(qS,s,a,v8),XS(o,a)},bezierCurveTo(t,e,n,i,r,s){const o=eh(t,e),a=th(t,e),l=eh(n,i),u=th(n,i),c=eh(r,s),d=th(r,s);w8(YS,o,l,c,y8),w8(qS,a,u,d,v8),XS(c,d)},arc(t,e,n,i,r,s){if(i+=hh,r+=hh,YS=n*Math.cos(r)+t,qS=n*Math.sin(r)+e,Math.abs(r-i)>J2e)uc(t-n,e-n),uc(t+n,e+n);else{const o=u=>uc(n*Math.cos(u)+t,n*Math.sin(u)+e);let a,l;if(o(i),o(r),r!==i)if(i=i%Ia,i<0&&(i+=Ia),r=r%Ia,r<0&&(r+=Ia),r<i&&(s=!s,a=i,i=r,r=a),s)for(r-=Ia,a=i-i%Zd,l=0;l<4&&a>r;++l,a-=Zd)o(a);else for(a=i-i%Zd+Zd,l=0;l<4&&a<r;++l,a=a+Zd)o(a)}}};function C8(t,e,n,i){const r=(t-e)/(t+n-2*e);0<r&&r<1&&i(t+(e-t)*r)}function w8(t,e,n,i,r){const s=i-t+3*e-3*n,o=t+n-2*e,a=t-e;let l=0,u=0,c;Math.abs(s)>h2e?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&r(S8(l,t,e,n,i)),0<u&&u<1&&r(S8(u,t,e,n,i))}function S8(t,e,n,i,r){const s=1-t,o=s*s,a=t*t;return o*s*e+3*o*t*n+3*s*a*i+a*t*r}var Oc=(Oc=Dc(1,1))?Oc.getContext("2d"):null;const cF=new vn;function Mk(t){return function(e,n){if(!Oc)return!0;t(Oc,e),cF.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:r,x2:s,y2:o}=cF;for(let a=r;a<=o;++a)for(let l=i;l<=s;++l)if(Oc.isPointInPath(l,a))return!0;return!1}}function Nk(t,e){return e.contains(t.x||0,t.y||0)}function YZ(t,e){const n=t.x||0,i=t.y||0,r=t.width||0,s=t.height||0;return e.intersects(cF.set(n,i,n+r,i+s))}function qZ(t,e){const n=t.x||0,i=t.y||0,r=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:i;return Pp(e,n,i,r,s)}function Pp(t,e,n,i,r){const{x1:s,y1:o,x2:a,y2:l}=t,u=i-e,c=r-n;let d=0,h=1,f,p,g,m;for(m=0;m<4;++m){if(m===0&&(f=-u,p=-(s-e)),m===1&&(f=u,p=a-e),m===2&&(f=-c,p=-(o-n)),m===3&&(f=c,p=l-n),Math.abs(f)<1e-10&&p<0)return!1;if(g=p/f,f<0){if(g>h)return!1;g>d&&(d=g)}else if(f>0){if(g<d)return!1;g<h&&(h=g)}}return!0}function Gg(t,e){t.globalCompositeOperation=e.blend||"source-over"}function wo(t,e){return t??e}function E8(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function ePe(t,e,n){const i=n.width(),r=n.height();let s;if(e.gradient==="radial")s=t.createRadialGradient(n.x1+wo(e.x1,.5)*i,n.y1+wo(e.y1,.5)*r,Math.max(i,r)*wo(e.r1,0),n.x1+wo(e.x2,.5)*i,n.y1+wo(e.y2,.5)*r,Math.max(i,r)*wo(e.r2,.5));else{const o=wo(e.x1,0),a=wo(e.y1,0),l=wo(e.x2,1),u=wo(e.y2,0);if(o===l||a===u||i===r)s=t.createLinearGradient(n.x1+o*i,n.y1+a*r,n.x1+l*i,n.y1+u*r);else{const c=Dc(Math.ceil(i),Math.ceil(r)),d=c.getContext("2d");return d.scale(i,r),d.fillStyle=E8(d.createLinearGradient(o,a,l,u),e.stops),d.fillRect(0,0,i,r),t.createPattern(c,"no-repeat")}}return E8(s,e.stops)}function KZ(t,e,n){return Ak(n)?ePe(t,n,e.bounds):n}function $b(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=KZ(t,e,e.fill),!0):!1}var tPe=[];function $g(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=KZ(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||tPe),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function nPe(t,e){return t.zindex-e.zindex||t.index-e.index}function Lk(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,r,s;for(r=0,s=e.length;r<s;++r)i=e[r],i.index=r,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(nPe)}function ia(t,e){var n=t.items,i,r;if(!n||!n.length)return;const s=Lk(t);if(s&&s.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||e(n[i]);n=s}for(i=0,r=n.length;i<r;++i)e(n[i])}function Hb(t,e){var n=t.items,i,r;if(!n||!n.length)return null;const s=Lk(t);for(s&&s.length&&(n=s),r=n.length;--r>=0;)if(i=e(n[r]))return i;if(n===s){for(n=t.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=e(n[r])))return i}return null}function Ik(t){return function(e,n,i){ia(n,r=>{(!i||i.intersects(r.bounds))&&XZ(t,e,r,r)})}}function iPe(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&XZ(t,e,n.items[0],n.items)}}function XZ(t,e,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(t(e,i)||(Gg(e,n),n.fill&&$b(e,n,r)&&e.fill(),n.stroke&&$g(e,n,r)&&e.stroke()))}function sT(t){return t=t||ro,function(e,n,i,r,s,o){return i*=e.pixelRatio,r*=e.pixelRatio,Hb(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&t(e,a,i,r,s,o))return a})}}function MC(t,e){return function(n,i,r,s){var o=Array.isArray(i)?i[0]:i,a=e??o.fill,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),t(n,i)?!1:a&&n.isPointInPath(r,s)||l&&n.isPointInStroke(r,s)}}function kk(t){return sT(MC(t))}function Rh(t,e){return"translate("+t+","+e+")"}function Gk(t){return"rotate("+t+")"}function rPe(t,e){return"scale("+t+","+e+")"}function QZ(t){return Rh(t.x||0,t.y||0)}function sPe(t){return Rh(t.x||0,t.y||0)+(t.angle?" "+Gk(t.angle):"")}function oPe(t){return Rh(t.x||0,t.y||0)+(t.angle?" "+Gk(t.angle):"")+(t.scaleX||t.scaleY?" "+rPe(t.scaleX||1,t.scaleY||1):"")}function $k(t,e,n){function i(o,a){o("transform",sPe(a)),o("d",e(null,a))}function r(o,a){return e(FC(o,a.angle),a),Au(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=Uc),o.beginPath(),e(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:t,tag:"path",nested:!1,attr:i,bound:r,draw:Ik(s),pick:kk(s),isect:n||Mk(s)}}var aPe=$k("arc",U2e);function lPe(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",r=t.length,s=1/0,o,a;--r>=0;)t[r].defined!==!1&&(a=Math.abs(t[r][i]-n),a<s&&(s=a,o=t[r]));return o}function uPe(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,r,s,o;--i>=0;)if(t[i].defined!==!1&&(r=t[i].x-e[0],s=t[i].y-e[1],o=r*r+s*s,o<n))return t[i];return null}function cPe(t,e){for(var n=t.length,i,r,s;--n>=0;)if(t[n].defined!==!1&&(i=t[n].x-e[0],r=t[n].y-e[1],s=i*i+r*r,i=t[n].size||1,s<i*i))return t[n];return null}function Hk(t,e,n){function i(l,u){var c=u.mark.items;c.length&&l("d",e(null,c))}function r(l,u){var c=u.items;return c.length===0?l:(e(FC(l),c),Au(l,c[0]))}function s(l,u){l.beginPath(),e(l,u)}const o=MC(s);function a(l,u,c,d,h,f){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(h,f)?null:(c*=l.pixelRatio,d*=l.pixelRatio,o(l,p,c,d)?p[0]:null)}return{type:t,tag:"path",nested:!0,attr:i,bound:r,draw:iPe(s),pick:a,isect:Nk,tip:n}}var dPe=Hk("area",j2e,lPe);function hPe(t,e){var n=e.clip;t.save(),Ue(n)?(t.beginPath(),n(t),t.clip()):JZ(t,e.group)}function JZ(t,e){t.beginPath(),Ok(e)?qm(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function ZZ(t){const e=wo(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function fPe(t,e){t("transform",QZ(e))}function eee(t,e){const n=ZZ(e);t("d",qm(null,e,n,n))}function pPe(t,e){t("class","background"),t("aria-hidden",!0),eee(t,e)}function gPe(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?eee(t,e):t("d","")}function mPe(t,e,n){const i=e.clip?Pk(n,e,e):null;t("clip-path",i)}function yPe(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let r=0;r<i;++r)t.union(n[r].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Au(t,e),t.translate(e.x||0,e.y||0)}function Zv(t,e,n,i){const r=ZZ(e);t.beginPath(),qm(t,e,(n||0)+r,(i||0)+r)}const vPe=MC(Zv),CPe=MC(Zv,!1),wPe=MC(Zv,!0);function SPe(t,e,n){ia(e,i=>{const r=i.x||0,s=i.y||0,o=i.strokeForeground,a=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&a&&(Zv(t,i,r,s),Gg(t,i),i.fill&&$b(t,i,a)&&t.fill(),i.stroke&&!o&&$g(t,i,a)&&t.stroke()),t.save(),t.translate(r,s),i.clip&&JZ(t,i),n&&n.translate(-r,-s),ia(i,l=>{this.draw(t,l,n)}),n&&n.translate(r,s),t.restore(),o&&i.stroke&&a&&(Zv(t,i,r,s),Gg(t,i),$g(t,i,a)&&t.stroke())})}function EPe(t,e,n,i,r,s){if(e.bounds&&!e.bounds.contains(r,s)||!e.items)return null;const o=n*t.pixelRatio,a=i*t.pixelRatio;return Hb(e,l=>{let u,c,d;const h=l.bounds;if(h&&!h.contains(r,s))return;c=l.x||0,d=l.y||0;const f=c+(l.width||0),p=d+(l.height||0),g=l.clip;if(g&&(r<c||r>f||s<d||s>p))return;if(t.save(),t.translate(c,d),c=r-c,d=s-d,g&&Ok(l)&&!wPe(t,l,o,a))return t.restore(),null;const m=l.strokeForeground,y=e.interactive!==!1;return y&&m&&l.stroke&&CPe(t,l,o,a)?(t.restore(),l):(u=Hb(l,v=>bPe(v,c,d)?this.pick(v,n,i,c,d):null),!u&&y&&(l.fill||!m&&l.stroke)&&vPe(t,l,o,a)&&(u=l),t.restore(),u||null)})}function bPe(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}var xPe={type:"group",tag:"g",nested:!1,attr:fPe,bound:yPe,draw:SPe,pick:EPe,isect:YZ,content:mPe,background:pPe,foreground:gPe},e1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Wk(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url})),n}function Vk(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function Bk(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function oT(t,e){return t==="center"?e/2:t==="right"?e:0}function aT(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function _Pe(t,e,n){const i=Wk(e,n),r=Vk(e,i),s=Bk(e,i),o=(e.x||0)-oT(e.align,r),a=(e.y||0)-aT(e.baseline,s),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",l,e1["xmlns:xlink"],"xlink:href"),t("transform",Rh(o,a)),t("width",r),t("height",s),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function RPe(t,e){const n=e.image,i=Vk(e,n),r=Bk(e,n),s=(e.x||0)-oT(e.align,i),o=(e.y||0)-aT(e.baseline,r);return t.set(s,o,s+i,o+r)}function TPe(t,e,n){ia(e,i=>{if(n&&!n.intersects(i.bounds))return;const r=Wk(i,this);let s=Vk(i,r),o=Bk(i,r);if(s===0||o===0)return;let a=(i.x||0)-oT(i.align,s),l=(i.y||0)-aT(i.baseline,o),u,c,d,h;i.aspect!==!1&&(c=r.width/r.height,d=i.width/i.height,c===c&&d===d&&c!==d&&(d<c?(h=s/c,l+=(o-h)/2,o=h):(h=o*c,a+=(s-h)/2,s=h))),(r.complete||r.toDataURL)&&(Gg(t,i),t.globalAlpha=(u=i.opacity)!=null?u:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(r,a,l,s,o))})}var APe={type:"image",tag:"image",nested:!1,attr:_Pe,bound:RPe,draw:TPe,pick:sT(),isect:ro,get:Wk,xOffset:oT,yOffset:aT},DPe=Hk("line",Y2e,uPe);function OPe(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",oPe(e)),t("d",e.path)}function QS(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,r=e.y||0,s=e.scaleX||1,o=e.scaleY||1,a=(e.angle||0)*Uc,l=e.pathCache;(!l||l.path!==n)&&((e.pathCache=l=kg(n)).path=n),a&&t.rotate&&t.translate?(t.translate(i,r),t.rotate(a),Jv(t,l,0,0,s,o),t.rotate(-a),t.translate(-i,-r)):Jv(t,l,i,r,s,o)}function PPe(t,e){return QS(FC(t,e.angle),e)?t.set(0,0,0,0):Au(t,e,!0)}var FPe={type:"path",tag:"path",nested:!1,attr:OPe,bound:PPe,draw:Ik(QS),pick:kk(QS),isect:Mk(QS)};function MPe(t,e){t("d",qm(null,e))}function NPe(t,e){var n,i;return Au(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)}function b8(t,e){t.beginPath(),qm(t,e)}var LPe={type:"rect",tag:"path",nested:!1,attr:MPe,bound:NPe,draw:Ik(b8),pick:kk(b8),isect:YZ};function IPe(t,e){t("transform",QZ(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function kPe(t,e){var n,i;return Au(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e)}function tee(t,e,n){var i,r,s,o;return e.stroke&&$g(t,e,n)?(i=e.x||0,r=e.y||0,s=e.x2!=null?e.x2:i,o=e.y2!=null?e.y2:r,t.beginPath(),t.moveTo(i,r),t.lineTo(s,o),!0):!1}function GPe(t,e,n){ia(e,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&tee(t,i,r)&&(Gg(t,i),t.stroke())}})}function $Pe(t,e,n,i){return t.isPointInStroke?tee(t,e,1)&&t.isPointInStroke(n,i):!1}var HPe={type:"rule",tag:"line",nested:!1,attr:IPe,bound:kPe,draw:GPe,pick:sT($Pe),isect:qZ},WPe=$k("shape",q2e),VPe=$k("symbol",K2e,Nk);const x8=uX();var Yo={height:vl,measureWidth:zk,estimateWidth:dF,width:dF,canvas:nee};nee(!0);function nee(t){Yo.width=t&&Oc?zk:dF}function dF(t,e){return iee(Yc(t,e),vl(t))}function iee(t,e){return~~(.8*t.length*e)}function zk(t,e){return vl(t)<=0||!(e=Yc(t,e))?0:ree(e,lT(t))}function ree(t,e){const n=`(${e}) ${t}`;let i=x8.get(n);return i===void 0&&(Oc.font=e,i=Oc.measureText(t).width,x8.set(n,i)),i}function vl(t){return t.fontSize!=null?+t.fontSize||0:11}function jc(t){return t.lineHeight!=null?t.lineHeight:vl(t)+2}function BPe(t){return j(t)?t.length>1?t:t[0]:t}function NC(t){return BPe(t.lineBreak&&t.text&&!j(t.text)?t.text.split(t.lineBreak):t.text)}function Uk(t){const e=NC(t);return(j(e)?e.length-1:0)*jc(t)}function Yc(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?UPe(t,n):n}function zPe(t){if(Yo.width===zk){const e=lT(t);return n=>ree(n,e)}else{const e=vl(t);return n=>iee(n,e)}}function UPe(t,e){var n=+t.limit,i=zPe(t);if(i(e)<n)return e;var r=t.ellipsis||"",s=t.dir==="rtl",o=0,a=e.length,l;if(n-=i(r),s){for(;o<a;)l=o+a>>>1,i(e.slice(l))>n?o=l+1:a=l;return r+e.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),i(e.slice(0,l))<n?o=l:a=l-1;return e.slice(0,o)+r}}function LC(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function lT(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+vl(t)+"px "+LC(t,e)}function jk(t){var e=t.baseline,n=vl(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*jc(t):e==="line-bottom"?.29*n-.5*jc(t):0)}const jPe={left:"start",center:"middle",right:"end"},L0=new vn;function uT(t){var e=t.x||0,n=t.y||0,i=t.radius||0,r;return i&&(r=(t.theta||0)-Zd,e+=i*Math.cos(r),n+=i*Math.sin(r)),L0.x1=e,L0.y1=n,L0}function YPe(t,e){var n=e.dx||0,i=(e.dy||0)+jk(e),r=uT(e),s=r.x1,o=r.y1,a=e.angle||0,l;t("text-anchor",jPe[e.align]||"start"),a?(l=Rh(s,o)+" "+Gk(a),(n||i)&&(l+=" "+Rh(n,i))):l=Rh(s+n,o+i),t("transform",l)}function Yk(t,e,n){var i=Yo.height(e),r=e.align,s=uT(e),o=s.x1,a=s.y1,l=e.dx||0,u=(e.dy||0)+jk(e)-Math.round(.8*i),c=NC(e),d;if(j(c)?(i+=jc(e)*(c.length-1),d=c.reduce((h,f)=>Math.max(h,Yo.width(e,f)),0)):d=Yo.width(e,c),r==="center"?l-=d/2:r==="right"&&(l-=d),t.set(l+=o,u+=a,l+d,u+i),e.angle&&!n)t.rotate(e.angle*Uc,o,a);else if(n===2)return t.rotatedPoints(e.angle*Uc,o,a);return t}function qPe(t,e,n){ia(e,i=>{var r=i.opacity==null?1:i.opacity,s,o,a,l,u,c,d;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(t.font=lT(i),t.textAlign=i.align||"left",s=uT(i),o=s.x1,a=s.y1,i.angle&&(t.save(),t.translate(o,a),t.rotate(i.angle*Uc),o=a=0),o+=i.dx||0,a+=(i.dy||0)+jk(i),c=NC(i),Gg(t,i),j(c))for(u=jc(i),l=0;l<c.length;++l)d=Yc(i,c[l]),i.fill&&$b(t,i,r)&&t.fillText(d,o,a),i.stroke&&$g(t,i,r)&&t.strokeText(d,o,a),a+=u;else d=Yc(i,c),i.fill&&$b(t,i,r)&&t.fillText(d,o,a),i.stroke&&$g(t,i,r)&&t.strokeText(d,o,a);i.angle&&t.restore()}})}function KPe(t,e,n,i,r,s){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=uT(e),a=o.x1,l=o.y1,u=Yk(L0,e,1),c=-e.angle*Uc,d=Math.cos(c),h=Math.sin(c),f=d*r-h*s+(a-d*a+h*l),p=h*r+d*s+(l-h*a-d*l);return u.contains(f,p)}function XPe(t,e){const n=Yk(L0,t,2);return Pp(e,n[0],n[1],n[2],n[3])||Pp(e,n[0],n[1],n[4],n[5])||Pp(e,n[4],n[5],n[6],n[7])||Pp(e,n[2],n[3],n[6],n[7])}var QPe={type:"text",tag:"text",nested:!1,attr:YPe,bound:Yk,draw:qPe,pick:sT(KPe),isect:XPe},JPe=Hk("trail",X2e,cPe),Es={arc:aPe,area:dPe,group:xPe,image:APe,line:DPe,path:FPe,rect:LPe,rule:HPe,shape:WPe,symbol:VPe,text:QPe,trail:JPe};function hF(t,e,n){var i=Es[t.mark.marktype],r=e||i.bound;return i.nested&&(t=t.mark),r(t.bounds||(t.bounds=new vn),t,n)}var _8={mark:null};function see(t,e,n){var i=Es[t.marktype],r=i.bound,s=t.items,o=s&&s.length,a,l,u,c;if(i.nested)return o?u=s[0]:(_8.mark=t,u=_8),c=hF(u,r,n),e=e&&e.union(c)||c,e;if(e=e||t.bounds&&t.bounds.clear()||new vn,o)for(a=0,l=s.length;a<l;++a)e.union(hF(s[a],r,n));return t.bounds=e}const ZPe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function oee(t,e){return JSON.stringify(t,ZPe,e)}function aee(t){const e=typeof t=="string"?JSON.parse(t):t;return lee(e)}function lee(t){var e=t.marktype,n=t.items,i,r,s;if(n)for(r=0,s=n.length;r<s;++r)i=e?"mark":"group",n[r][i]=t,n[r].zindex&&(n[r][i].zdirty=!0),(e||i)==="group"&&lee(n[r]);return e&&see(t),t}function qk(t){arguments.length?this.root=aee(t):(this.root=uee({marktype:"group",name:"root",role:"frame"}),this.root.items=[new iT(this.root)])}qk.prototype={toJSON(t){return oee(this.root,t||0)},mark(t,e,n){e=e||this.root.items[0];const i=uee(t,e);return e.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function uee(t,e){const n={bounds:new vn,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function cc(t,e,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function Kk(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function _r(t,e,n,i){var r=t.childNodes[e],s;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(s=r||null,r=cc(t.ownerDocument,n,i),t.insertBefore(r,s)),r}function Fo(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function cee(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function cT(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function eFe(t,e,n,i){var r=t&&t.mark,s,o;if(r&&(s=Es[r.marktype]).tip){for(o=cT(e,n),o[0]-=i[0],o[1]-=i[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=s.tip(r.items,o)}return t}function qc(t,e){this._active=null,this._handlers={},this._loader=t||DR(),this._tooltip=e||tFe}function tFe(t,e,n,i){t.element().setAttribute("title",i||"")}qc.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let i=t?t.length:0;--i>=0;)if(t[i].type===e&&(!n||t[i].handler===n))return i;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const i in e)n.push(...e[i]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(t.type,t),s=cc(null,"a");for(const o in i)s.setAttribute(o,i[o]);s.dispatchEvent(r)}).catch(()=>{})},handleTooltip(t,e,n){if(e&&e.tooltip!=null){e=eFe(e,t,this.canvas(),this._origin);const i=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,i)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),i=this._origin,r=t.bounds,s=r.width(),o=r.height();let a=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;t.mark&&(t=t.mark.group);)a+=t.x||0,l+=t.y||0;return{x:a,y:l,width:s,height:o,left:a,top:l,right:a+s,bottom:l+o}}};function Cl(t){this._el=null,this._bgcolor=null,this._loader=new Fk(t)}Cl.prototype={initialize(t,e,n,i,r){return this._el=t,this.resize(e,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,i){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,i=n._loader[t](e);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(s=>{s&&r(),n._ready=null})}return i},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const nFe="keydown",iFe="keypress",rFe="keyup",dee="dragenter",JS="dragleave",hee="dragover",fF="mousedown",sFe="mouseup",Wb="mousemove",I0="mouseout",fee="mouseover",Vb="click",oFe="dblclick",aFe="wheel",pee="mousewheel",Bb="touchstart",zb="touchmove",Ub="touchend",lFe=[nFe,iFe,rFe,dee,JS,hee,fF,sFe,Wb,I0,fee,Vb,oFe,aFe,pee,Bb,zb,Ub],pF=Wb,t1=I0,gF=Vb;function IC(t,e){qc.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const uFe=t=>t===Bb||t===zb||t===Ub?[Bb,zb,Ub]:[t];function R8(t,e){uFe(e).forEach(n=>cFe(t,n))}function cFe(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)))}function T8(t,e,n){return function(i){const r=this._active,s=this.pickEvent(i);s===r?this.fire(t,i):((!r||!r.exit)&&this.fire(n,i),this._active=s,this.fire(e,i),this.fire(t,i))}}function A8(t){return function(e){this.fire(t,e),this._active=null}}le(IC,qc,{initialize(t,e,n){return this._canvas=t&&Kk(t,"canvas"),[Vb,fF,Wb,I0,JS].forEach(i=>R8(this,i)),qc.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:lFe,DOMMouseScroll(t){this.fire(pee,t)},mousemove:T8(Wb,fee,I0),dragover:T8(hee,dee,JS),mouseout:A8(I0),dragleave:A8(JS),mousedown(t){this._down=this._active,this.fire(fF,t)},click(t){this._down===this._active&&(this.fire(Vb,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Bb,t,!0)},touchmove(t){this.fire(zb,t,!0)},touchend(t){this.fire(Ub,t,!0),this._touch=null},fire(t,e,n){const i=n?this._touch:this._active,r=this._handlers[t];if(e.vegaType=t,t===gF&&i&&i.href?this.handleHref(e,i,i.href):(t===pF||t===t1)&&this.handleTooltip(e,i,t!==t1),r)for(let s=0,o=r.length;s<o;++s)r[s].handler.call(this._obj,e,i)},on(t,e){const n=this.eventName(t),i=this._handlers;return this._handlerIndex(i[n],t,e)<0&&(R8(this,t),(i[n]||(i[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&i.splice(r,1),this},pickEvent(t){const e=cT(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,i,r){const s=this.context();return Es[t.marktype].pick.call(this,s,t,e,n,i,r)}});function dFe(){return typeof window<"u"&&window.devicePixelRatio||1}var hFe=dFe();function fFe(t,e,n,i,r,s){const o=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,a=t.getContext("2d"),l=o?hFe:r;t.width=e*l,t.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1]),t}function jb(t){Cl.call(this,t),this._options={},this._redraw=!1,this._dirty=new vn,this._tempb=new vn}const D8=Cl.prototype,pFe=(t,e,n)=>new vn().set(0,0,e,n).translate(-t[0],-t[1]);function gFe(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}le(jb,Cl,{initialize(t,e,n,i,r,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Dc(1,1,this._options.type),t&&this._canvas&&(Fo(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),D8.initialize.call(this,t,e,n,i,r)},resize(t,e,n,i){if(D8.resize.call(this,t,e,n,i),this._canvas)fFe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||U("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,i=this._width,r=this._height,s=this._dirty,o=pFe(n,i,r);e.save();const a=this._redraw||s.empty()?(this._redraw=!1,o.expand(1)):gFe(e,o.intersect(s),n);return this.clear(-n[0],-n[1],i,r),this.draw(e,t,a),e.restore(),s.clear(),this},draw(t,e,n){const i=Es[e.marktype];e.clip&&hPe(t,e),i.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,i){const r=this._options,s=this.context();r.type!=="pdf"&&!r.externalContext&&s.clearRect(t,e,n,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,e,n,i))}});function Xk(t,e){qc.call(this,t,e);const n=this;n._hrefHandler=mF(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=mF(n,(i,r)=>{n.handleTooltip(i,r,i.type!==t1)})}const mF=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)};le(Xk,qc,{initialize(t,e,n){let i=this._svg;return i&&(i.removeEventListener(gF,this._hrefHandler),i.removeEventListener(pF,this._tooltipHandler),i.removeEventListener(t1,this._tooltipHandler)),this._svg=i=t&&Kk(t,"svg"),i&&(i.addEventListener(gF,this._hrefHandler),i.addEventListener(pF,this._tooltipHandler),i.addEventListener(t1,this._tooltipHandler)),qc.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[n],t,e)<0){const s={type:t,handler:e,listener:mF(this,e)};(i[n]||(i[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const gee="aria-hidden",Qk="aria-label",Jk="role",Zk="aria-roledescription",mee="graphics-object",eG="graphics-symbol",yee=(t,e,n)=>({[Jk]:t,[Zk]:e,[Qk]:n||void 0}),mFe=ta(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),O8={axis:{desc:"axis",caption:CFe},legend:{desc:"legend",caption:wFe},"title-text":{desc:"title",caption:t=>`Title text '${F8(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${F8(t)}'`}},P8={ariaRole:Jk,ariaRoleDescription:Zk,description:Qk};function vee(t,e){const n=e.aria===!1;if(t(gee,n||void 0),n||e.description==null)for(const i in P8)t(P8[i],void 0);else{const i=e.mark.marktype;t(Qk,e.description),t(Jk,e.ariaRole||(i==="group"?mee:eG)),t(Zk,e.ariaRoleDescription||`${i} mark`)}}function Cee(t){return t.aria===!1?{[gee]:!0}:mFe[t.role]?null:O8[t.role]?vFe(t,O8[t.role]):yFe(t)}function yFe(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return yee(n?mee:eG,`${e} mark container`,t.description)}function vFe(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return yee(e.role||eG,e.desc,n.description||i(n))}catch{return null}}function F8(t){return de(t.text).join(" ")}function CFe(t){const e=t.datum,n=t.orient,i=e.title?wee(t):null,r=t.context,s=r.scales[e.scale].value,o=r.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Ig(a)?"discrete":a} scale with ${kZ(o,s,t)}`}function wFe(t){const e=t.datum,n=e.title?wee(t):null,i=`${e.type||""} legend`.trim(),r=e.scales,s=Object.keys(r),o=t.context,a=o.scales[r[s[0]]].value,l=o.dataflow.locale();return EFe(i)+(n?` titled '${n}'`:"")+` for ${SFe(s)} with ${kZ(l,a,t)}`}function wee(t){try{return de(at(t.items).items[0].text).join(" ")}catch{return null}}function SFe(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+at(t)}function EFe(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const See=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),bFe=t=>See(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function tG(){let t="",e="",n="";const i=[],r=()=>e=n="",s=l=>{e&&(t+=`${e}>${n}`,r()),i.push(l)},o=(l,u)=>(u!=null&&(e+=` ${l}="${bFe(u)}"`),a),a={open(l){s(l),e="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const h of c)for(const f in h)o(f,h[f]);return a},close(){const l=i.pop();return e?t+=e+(n?`>${n}</${l}>`:"/>"):t+=`</${l}>`,r(),a},attr:o,text:l=>(n+=See(l),a),toString:()=>t};return a}const Eee=t=>bee(tG(),t)+"";function bee(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let r=0;r<i;++r)t.attr(n[r].name,n[r].value)}if(e.hasChildNodes()){const n=e.childNodes;for(const i of n)i.nodeType===3?t.text(i.nodeValue):bee(t,i)}return t.close()}const Yb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},qb={blend:"mix-blend-mode"},xee={fill:"none","stroke-miterlimit":10},Ay=0,M8="http://www.w3.org/2000/xmlns/",En=e1.xmlns;function nG(t){Cl.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const UD=Cl.prototype;le(nG,Cl,{initialize(t,e,n,i,r){return this._defs={},this._clearDefs(),t&&(this._svg=_r(t,0,"svg",En),this._svg.setAttributeNS(M8,"xmlns",En),this._svg.setAttributeNS(M8,"xmlns:xlink",e1["xmlns:xlink"]),this._svg.setAttribute("version",e1.version),this._svg.setAttribute("class","marks"),Fo(t,1),this._root=_r(this._svg,Ay,"g",En),dc(this._root,xee),Fo(this._svg,Ay+1)),this.background(this._bgcolor),UD.initialize.call(this,t,e,n,i,r)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),UD.background.apply(this,arguments)},resize(t,e,n,i){return UD.resize.call(this,t,e,n,i),this._svg&&(dc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=_r(t,Ay,"rect",En),dc(n,{width:this._width,height:this._height,fill:e}));const i=Eee(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),i},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),Fo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,i,r,s,o,a,l;for(o=0,a=t.length;o<a;++o)if(n=t[o],i=n.mark,i.marktype!==r&&(r=i.marktype,s=Es[r]),i.zdirty&&i.dirty!==e&&(this._dirtyAll=!1,N8(n,e),i.items.forEach(u=>{u.dirty=e})),!i.zdirty){if(n.exit){s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=s.nested?i.items[0]:n,n._update!==e&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,N8(n,e)):this._update(s,n._svg,n),n._update=e)}return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const i=this._svg,r=Es[e.marktype],s=e.interactive===!1?"none":null,o=r.tag==="g",a=L8(e,t,n,"g",i);a.setAttribute("class",cee(e));const l=Cee(e);for(const h in l)Vi(a,h,l[h]);o||Vi(a,"pointer-events",s),Vi(a,"clip-path",e.clip?Pk(this,e,e.group):null);let u=null,c=0;const d=h=>{const f=this.isDirty(h),p=L8(h,a,u,r.tag,i);f&&(this._update(r,p,h),o&&RFe(this,p,h)),u=p,++c};return r.nested?e.items.length&&d(e.items[0]):ia(e,d),Fo(a,c),a},_update(t,e,n){Kl=e,Ci=e.__values__,vee(k0,n),t.attr(k0,n,this);const i=AFe[t.type];i&&i.call(this,t,e,n),Kl&&this.style(Kl,n)},style(t,e){if(e!=null){for(const n in Yb){let i=n==="font"?LC(e):e[n];if(i===Ci[n])continue;const r=Yb[n];i==null?t.removeAttribute(r):(Ak(i)&&(i=$Z(i,this._defs.gradient,_ee())),t.setAttribute(r,i+"")),Ci[n]=i}for(const n in qb)ZS(t,qb[n],e[n])}},defs(){const t=this._svg,e=this._defs;let n=e.el,i=0;for(const r in e.gradient)n||(e.el=n=_r(t,Ay+1,"defs",En)),i=xFe(n,e.gradient[r],i);for(const r in e.clipping)n||(e.el=n=_r(t,Ay+1,"defs",En)),i=_Fe(n,e.clipping[r],i);n&&(i===0?(t.removeChild(n),e.el=null):Fo(n,i))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});function N8(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function xFe(t,e,n){let i,r,s;if(e.gradient==="radial"){let o=_r(t,n++,"pattern",En);dc(o,{id:Gb+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=_r(o,0,"rect",En),dc(o,{width:1,height:1,fill:`url(${_ee()}#${e.id})`}),t=_r(t,n++,"radialGradient",En),dc(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=_r(t,n++,"linearGradient",En),dc(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,r=e.stops.length;i<r;++i)s=_r(t,i,"stop",En),s.setAttribute("offset",e.stops[i].offset),s.setAttribute("stop-color",e.stops[i].color);return Fo(t,i),n}function _Fe(t,e,n){let i;return t=_r(t,n,"clipPath",En),t.setAttribute("id",e.id),e.path?(i=_r(t,0,"path",En),i.setAttribute("d",e.path)):(i=_r(t,0,"rect",En),dc(i,{x:0,y:0,width:e.width,height:e.height})),Fo(t,1),n+1}function RFe(t,e,n){e=e.lastChild.previousSibling;let i,r=0;ia(n,s=>{i=t.mark(e,s,i),++r}),Fo(e,1+r)}function L8(t,e,n,i,r){let s=t._svg,o;if(!s&&(o=e.ownerDocument,s=cc(o,i,En),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},i==="g"))){const a=cc(o,"path",En);s.appendChild(a),a.__data__=t;const l=cc(o,"g",En);s.appendChild(l),l.__data__=t;const u=cc(o,"path",En);s.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(s.ownerSVGElement!==r||TFe(s,n))&&e.insertBefore(s,n?n.nextSibling:e.firstChild),s}function TFe(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}let Kl=null,Ci=null;const AFe={group(t,e,n){const i=Kl=e.childNodes[2];Ci=i.__values__,t.foreground(k0,n,this),Ci=e.__values__,Kl=e.childNodes[1],t.content(k0,n,this);const r=Kl=e.childNodes[0];t.background(k0,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Ci.events&&(Vi(i,"pointer-events",s),Vi(r,"pointer-events",s),Ci.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Vi(i,"display",null),this.style(r,n),Vi(r,"stroke",null),o&&(n.fill=null),Ci=i.__values__,this.style(i,n),o&&(n.fill=o),Kl=null}else Vi(i,"display","none")},image(t,e,n){n.smooth===!1?(ZS(e,"image-rendering","optimizeSpeed"),ZS(e,"image-rendering","pixelated")):ZS(e,"image-rendering",null)},text(t,e,n){const i=NC(n);let r,s,o,a;j(i)?(s=i.map(l=>Yc(n,l)),r=s.join(`
`),r!==Ci.text&&(Fo(e,0),o=e.ownerDocument,a=jc(n),s.forEach((l,u)=>{const c=cc(o,"tspan",En);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),e.appendChild(c)}),Ci.text=r)):(s=Yc(n,i),s!==Ci.text&&(e.textContent=s,Ci.text=s)),Vi(e,"font-family",LC(n)),Vi(e,"font-size",vl(n)+"px"),Vi(e,"font-style",n.fontStyle),Vi(e,"font-variant",n.fontVariant),Vi(e,"font-weight",n.fontWeight)}};function k0(t,e,n){e!==Ci[t]&&(n?DFe(Kl,t,e,n):Vi(Kl,t,e),Ci[t]=e)}function ZS(t,e,n){n!==Ci[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),Ci[e]=n)}function dc(t,e){for(const n in e)Vi(t,n,e[n])}function Vi(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e)}function DFe(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}function _ee(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function iG(t){Cl.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}le(iG,Cl,{svg(){return this._text},_render(t){const e=tG();e.open("svg",ze({},e1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",xee,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=Es[e.marktype],i=n.tag,r=[vee,n.attr];t.open("g",{class:cee(e),"clip-path":e.clip?Pk(this,e,e.group):null},Cee(e),{"pointer-events":i!=="g"&&e.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&t.open("a",a),t.open(i,this.attr(e,o,r,i!=="g"?i:null)),i==="text"){const l=NC(o);if(j(l)){const u={x:0,dy:jc(o)};for(let c=0;c<l.length;++c)t.open("tspan",c?u:null).text(Yc(o,l[c])).close()}else t.text(Yc(o,l))}else if(i==="g"){const l=o.strokeForeground,u=o.fill,c=o.stroke;l&&c&&(o.stroke=null),t.open("path",this.attr(e,o,n.background,"bgrect")).close(),t.open("g",this.attr(e,o,n.content)),ia(o,d=>this.mark(t,d)),t.close(),l&&c?(u&&(o.fill=null),o.stroke=c,t.open("path",this.attr(e,o,n.foreground,"bgrect")).close(),u&&(o.fill=u)):t.open("path",this.attr(e,o,n.foreground,"bgfore")).close()}t.close(),a&&t.close()};return n.nested?e.items&&e.items.length&&s(e.items[0]):ia(e,s),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[e]=i})}return null},attr(t,e,n,i){const r={},s=(o,a,l,u)=>{r[u||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,e,this)):n(s,e,this),i&&OFe(r,e,t,i,this._defs),r},defs(t){const e=this._defs.gradient,n=this._defs.clipping;if(Object.keys(e).length+Object.keys(n).length!==0){t.open("defs");for(const r in e){const s=e[r],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Gb+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:r,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)t.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();t.close()}for(const r in n){const s=n[r];t.open("clipPath",{id:r}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});function OFe(t,e,n,i,r){let s;if(e==null||(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;i==="image"&&e.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(t["font-family"]=LC(e),t["font-size"]=vl(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const o in Yb){let a=e[o];const l=Yb[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(Ak(a)&&(a=$Z(a,r.gradient,"")),t[l]=a)}for(const o in qb){const a=e[o];a!=null&&(s=s||[],s.push(`${qb[o]}: ${a};`))}return s&&(t.style=s.join(" ")),t}const Ree="canvas",Tee="png",Aee="svg",Dee="none",hc={Canvas:Ree,PNG:Tee,SVG:Aee,None:Dee},Hg={};Hg[Ree]=Hg[Tee]={renderer:jb,headless:jb,handler:IC};Hg[Aee]={renderer:nG,headless:iG,handler:Xk};Hg[Dee]={};function dT(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(Hg[t]=e,this):Hg[t]}function Oee(t,e,n){const i=[],r=new vn().union(e),s=t.marktype;return s?Pee(t,r,n,i):s==="group"?Fee(t,r,n,i):U("Intersect scene must be mark node or group item.")}function Pee(t,e,n,i){if(PFe(t,e,n)){const r=t.items,s=t.marktype,o=r.length;let a=0;if(s==="group")for(;a<o;++a)Fee(r[a],e,n,i);else for(const l=Es[s].isect;a<o;++a){const u=r[a];Mee(u,e,l)&&i.push(u)}}return i}function PFe(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function Fee(t,e,n,i){n&&n(t.mark)&&Mee(t,e,Es.group.isect)&&i.push(t);const r=t.items,s=r&&r.length;if(s){const o=t.x||0,a=t.y||0;e.translate(-o,-a);for(let l=0;l<s;++l)Pee(r[l],e,n,i);e.translate(o,a)}return i}function Mee(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}const jD=new vn;function Nee(t){const e=t.clip;if(Ue(e))e(FC(jD.clear()));else if(e)jD.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(jD)}const FFe=1e-9;function rG(t,e,n){return t===e?!0:n==="path"?Lee(t,e):t instanceof Date&&e instanceof Date?+t==+e:ft(t)&&ft(e)?Math.abs(t-e)<=FFe:!t||!e||!he(t)&&!he(e)?t==e:MFe(t,e)}function Lee(t,e){return rG(kg(t),kg(e))}function MFe(t,e){var n=Object.keys(t),i=Object.keys(e),r,s;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),s=n.length-1;s>=0;s--)if(n[s]!=i[s])return!1;for(s=n.length-1;s>=0;s--)if(r=n[s],!rG(t[r],e[r],r))return!1;return typeof t==typeof e}function NFe(){jZ(),s2e()}const Wg="top",Mo="left",ko="right",Kc="bottom",LFe="top-left",IFe="top-right",kFe="bottom-left",GFe="bottom-right",sG="start",yF="middle",Ui="end",$Fe="x",HFe="y",hT="group",oG="axis",aG="title",WFe="frame",VFe="scope",lG="legend",Iee="row-header",kee="row-footer",Gee="row-title",$ee="column-header",Hee="column-footer",Wee="column-title",BFe="padding",zFe="symbol",Vee="fit",Bee="fit-x",zee="fit-y",UFe="pad",uG="none",Ww="all",vF="each",cG="flush",fc="column",pc="row";function Uee(t){V.call(this,null,t)}le(Uee,V,{transform(t,e){const n=e.dataflow,i=t.mark,r=i.marktype,s=Es[r],o=s.bound;let a=i.bounds,l;if(s.nested)i.items.length&&n.dirty(i.items[0]),a=Vw(i,o),i.items.forEach(u=>{u.bounds.clear().union(a)});else if(r===hT||t.modified())switch(e.visit(e.MOD,u=>n.dirty(u)),a.clear(),i.items.forEach(u=>a.union(Vw(u,o))),i.role){case oG:case lG:case aG:e.reflow()}else l=e.changed(e.REM),e.visit(e.ADD,u=>{a.union(Vw(u,o))}),e.visit(e.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(Vw(u,o))}),l&&(a.clear(),i.items.forEach(u=>a.union(u.bounds)));return Nee(i),e.modifies("bounds")}});function Vw(t,e,n){return e(t.bounds.clear(),t,n)}const I8=":vega_identifier:";function dG(t){V.call(this,0,t)}dG.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};le(dG,V,{transform(t,e){const n=jFe(e.dataflow),i=t.as;let r=n.value;return e.visit(e.ADD,s=>s[i]=s[i]||++r),n.set(this.value=r),e}});function jFe(t){return t._signals[I8]||(t._signals[I8]=t.add(0))}function jee(t){V.call(this,null,t)}le(jee,V,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,YFe(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const i=n.marktype===hT?iT:nT;return e.visit(e.ADD,r=>i.call(r,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});function YFe(t){const e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function Yee(t){V.call(this,null,t)}const k8={parity:t=>t.filter((e,n)=>n%2?e.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((i,r)=>!r||!qee(n.bounds,i.bounds,e)?(n=i,1):i.opacity=0)}},qee=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),G8=(t,e)=>{for(var n=1,i=t.length,r=t[0].bounds,s;n<i;r=s,++n)if(qee(r,s=t[n].bounds,e))return!0},qFe=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},KFe=(t,e,n)=>{var i=t.range(),r=new vn;return e===Wg||e===Kc?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),s=>r.encloses(s.bounds)},$8=t=>(t.forEach(e=>e.opacity=1),t),H8=(t,e)=>t.reflow(e.modified()).modifies("opacity");le(Yee,V,{transform(t,e){const n=k8[t.method]||k8.parity,i=t.separation||0;let r=e.materialize(e.SOURCE).source,s,o;if(!r||!r.length)return;if(!t.method)return t.modified("method")&&($8(r),e=H8(e,t)),e;if(r=r.filter(qFe),!r.length)return;if(t.sort&&(r=r.slice().sort(t.sort)),s=$8(r),e=H8(e,t),s.length>=3&&G8(s,i)){do s=n(s,i);while(s.length>=3&&G8(s,i));s.length<3&&!at(r).opacity&&(s.length>1&&(at(s).opacity=0),at(r).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(o=KFe(t.boundScale,t.boundOrient,+t.boundTolerance),r.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&a.union(l.bounds)}),e}});function Kee(t){V.call(this,null,t)}le(Kee,V,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,i=>n.dirty(i)),e.fields&&e.fields.zindex){const i=e.source&&e.source[0];i&&(i.mark.zdirty=!0)}}});const vi=new vn;function Fp(t,e,n){return t[e]===n?0:(t[e]=n,1)}function XFe(t){var e=t.items[0].orient;return e===Mo||e===ko}function QFe(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function JFe(t,e,n,i){var r=e.items[0],s=r.datum,o=r.translate!=null?r.translate:.5,a=r.orient,l=QFe(s),u=r.range,c=r.offset,d=r.position,h=r.minExtent,f=r.maxExtent,p=s.title&&r.items[l[2]].items[0],g=r.titlePadding,m=r.bounds,y=p&&Uk(p),v=0,C=0,w,E;switch(vi.clear().union(m),m.clear(),(w=l[0])>-1&&m.union(r.items[w].bounds),(w=l[1])>-1&&m.union(r.items[w].bounds),a){case Wg:v=d||0,C=-c,E=Math.max(h,Math.min(f,-m.y1)),m.add(0,-E).add(u,0),p&&Bw(t,p,E,g,y,0,-1,m);break;case Mo:v=-c,C=d||0,E=Math.max(h,Math.min(f,-m.x1)),m.add(-E,0).add(0,u),p&&Bw(t,p,E,g,y,1,-1,m);break;case ko:v=n+c,C=d||0,E=Math.max(h,Math.min(f,m.x2)),m.add(0,0).add(E,u),p&&Bw(t,p,E,g,y,1,1,m);break;case Kc:v=d||0,C=i+c,E=Math.max(h,Math.min(f,m.y2)),m.add(0,0).add(u,E),p&&Bw(t,p,E,g,0,0,1,m);break;default:v=r.x,C=r.y}return Au(m.translate(v,C),r),Fp(r,"x",v+o)|Fp(r,"y",C+o)&&(r.bounds=vi,t.dirty(r),r.bounds=m,t.dirty(r)),r.mark.bounds.clear().union(m)}function Bw(t,e,n,i,r,s,o,a){const l=e.bounds;if(e.auto){const u=o*(n+r+i);let c=0,d=0;t.dirty(e),s?c=(e.x||0)-(e.x=u):d=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(l.translate(-c,-d)),t.dirty(e)}a.union(l)}const W8=(t,e)=>Math.floor(Math.min(t,e)),V8=(t,e)=>Math.ceil(Math.max(t,e));function ZFe(t){var e=t.items,n=e.length,i=0,r,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=e[i],s=r.items,r.marktype===hT)switch(r.role){case oG:case lG:case aG:break;case Iee:o.rowheaders.push(...s);break;case kee:o.rowfooters.push(...s);break;case $ee:o.colheaders.push(...s);break;case Hee:o.colfooters.push(...s);break;case Gee:o.rowtitle=s[0];break;case Wee:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function eMe(t){return new vn().set(0,0,t.width||0,t.height||0)}function tMe(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function jt(t,e,n){const i=he(t)?t[e]:t;return i??(n!==void 0?n:0)}function B8(t){return t<0?Math.ceil(-t):0}function Xee(t,e,n){var i=!n.nodirty,r=n.bounds===cG?eMe:tMe,s=vi.set(0,0,0,0),o=jt(n.align,fc),a=jt(n.align,pc),l=jt(n.padding,fc),u=jt(n.padding,pc),c=n.columns||e.length,d=c<=0?1:Math.ceil(e.length/c),h=e.length,f=Array(h),p=Array(c),g=0,m=Array(h),y=Array(d),v=0,C=Array(h),w=Array(h),E=Array(h),b,S,_,A,D,P,L,O,M,F,I;for(S=0;S<c;++S)p[S]=0;for(S=0;S<d;++S)y[S]=0;for(S=0;S<h;++S)P=e[S],D=E[S]=r(P),P.x=P.x||0,C[S]=0,P.y=P.y||0,w[S]=0,_=S%c,A=~~(S/c),g=Math.max(g,L=Math.ceil(D.x2)),v=Math.max(v,O=Math.ceil(D.y2)),p[_]=Math.max(p[_],L),y[A]=Math.max(y[A],O),f[S]=l+B8(D.x1),m[S]=u+B8(D.y1),i&&t.dirty(e[S]);for(S=0;S<h;++S)S%c===0&&(f[S]=0),S<c&&(m[S]=0);if(o===vF)for(_=1;_<c;++_){for(I=0,S=_;S<h;S+=c)I<f[S]&&(I=f[S]);for(S=_;S<h;S+=c)f[S]=I+p[_-1]}else if(o===Ww){for(I=0,S=0;S<h;++S)S%c&&I<f[S]&&(I=f[S]);for(S=0;S<h;++S)S%c&&(f[S]=I+g)}else for(o=!1,_=1;_<c;++_)for(S=_;S<h;S+=c)f[S]+=p[_-1];if(a===vF)for(A=1;A<d;++A){for(I=0,S=A*c,b=S+c;S<b;++S)I<m[S]&&(I=m[S]);for(S=A*c;S<b;++S)m[S]=I+y[A-1]}else if(a===Ww){for(I=0,S=c;S<h;++S)I<m[S]&&(I=m[S]);for(S=c;S<h;++S)m[S]=I+v}else for(a=!1,A=1;A<d;++A)for(S=A*c,b=S+c;S<b;++S)m[S]+=y[A-1];for(M=0,S=0;S<h;++S)M=f[S]+(S%c?M:0),C[S]+=M-e[S].x;for(_=0;_<c;++_)for(F=0,S=_;S<h;S+=c)F+=m[S],w[S]+=F-e[S].y;if(o&&jt(n.center,fc)&&d>1)for(S=0;S<h;++S)D=o===Ww?g:p[S%c],M=D-E[S].x2-e[S].x-C[S],M>0&&(C[S]+=M/2);if(a&&jt(n.center,pc)&&c!==1)for(S=0;S<h;++S)D=a===Ww?v:y[~~(S/c)],F=D-E[S].y2-e[S].y-w[S],F>0&&(w[S]+=F/2);for(S=0;S<h;++S)s.union(E[S].translate(C[S],w[S]));switch(M=jt(n.anchor,$Fe),F=jt(n.anchor,HFe),jt(n.anchor,fc)){case Ui:M-=s.width();break;case yF:M-=s.width()/2}switch(jt(n.anchor,pc)){case Ui:F-=s.height();break;case yF:F-=s.height()/2}for(M=Math.round(M),F=Math.round(F),s.clear(),S=0;S<h;++S)e[S].mark.bounds.clear();for(S=0;S<h;++S)P=e[S],P.x+=C[S]+=M,P.y+=w[S]+=F,s.union(P.mark.bounds.union(P.bounds.translate(C[S],w[S]))),i&&t.dirty(P);return s}function nMe(t,e,n){var i=ZFe(e),r=i.marks,s=n.bounds===cG?iMe:rMe,o=n.offset,a=n.columns||r.length,l=a<=0?1:Math.ceil(r.length/a),u=l*a,c,d,h,f,p,g,m;const y=Xee(t,r,n);y.empty()&&y.set(0,0,0,0),i.rowheaders&&(g=jt(n.headerBand,pc,null),c=zw(t,i.rowheaders,r,a,l,-jt(o,"rowHeader"),W8,0,s,"x1",0,a,1,g)),i.colheaders&&(g=jt(n.headerBand,fc,null),d=zw(t,i.colheaders,r,a,a,-jt(o,"columnHeader"),W8,1,s,"y1",0,1,a,g)),i.rowfooters&&(g=jt(n.footerBand,pc,null),h=zw(t,i.rowfooters,r,a,l,jt(o,"rowFooter"),V8,0,s,"x2",a-1,a,1,g)),i.colfooters&&(g=jt(n.footerBand,fc,null),f=zw(t,i.colfooters,r,a,a,jt(o,"columnFooter"),V8,1,s,"y2",u-a,1,a,g)),i.rowtitle&&(p=jt(n.titleAnchor,pc),m=jt(o,"rowTitle"),m=p===Ui?h+m:c-m,g=jt(n.titleBand,pc,.5),z8(t,i.rowtitle,m,0,y,g)),i.coltitle&&(p=jt(n.titleAnchor,fc),m=jt(o,"columnTitle"),m=p===Ui?f+m:d-m,g=jt(n.titleBand,fc,.5),z8(t,i.coltitle,m,1,y,g))}function iMe(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function rMe(t,e){return t.bounds[e]}function zw(t,e,n,i,r,s,o,a,l,u,c,d,h,f){var p=n.length,g=0,m=0,y,v,C,w,E,b,S,_,A;if(!p)return g;for(y=c;y<p;y+=d)n[y]&&(g=o(g,l(n[y],u)));if(!e.length)return g;for(e.length>r&&(t.warn("Grid headers exceed limit: "+r),e=e.slice(0,r)),g+=s,v=0,w=e.length;v<w;++v)t.dirty(e[v]),e[v].mark.bounds.clear();for(y=c,v=0,w=e.length;v<w;++v,y+=d){for(b=e[v],E=b.mark.bounds,C=y;C>=0&&(S=n[C])==null;C-=h);a?(_=f==null?S.x:Math.round(S.bounds.x1+f*S.bounds.width()),A=g):(_=g,A=f==null?S.y:Math.round(S.bounds.y1+f*S.bounds.height())),E.union(b.bounds.translate(_-(b.x||0),A-(b.y||0))),b.x=_,b.y=A,t.dirty(b),m=o(m,E[u])}return m}function z8(t,e,n,i,r,s){if(e){t.dirty(e);var o=n,a=n;i?o=Math.round(r.x1+s*r.width()):a=Math.round(r.y1+s*r.height()),e.bounds.translate(o-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=a,t.dirty(e)}}function sMe(t,e){const n=t[e]||{};return(i,r)=>n[i]!=null?n[i]:t[i]!=null?t[i]:r}function oMe(t,e){let n=-1/0;return t.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:e}function aMe(t,e,n,i,r,s,o){const a=sMe(n,e),l=oMe(t,a("offset",0)),u=a("anchor",sG),c=u===Ui?1:u===yF?.5:0,d={align:vF,bounds:a("bounds",cG),columns:a("direction")==="vertical"?1:t.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(e){case Mo:d.anchor={x:Math.floor(i.x1)-l,column:Ui,y:c*(o||i.height()+2*i.y1),row:u};break;case ko:d.anchor={x:Math.ceil(i.x2)+l,y:c*(o||i.height()+2*i.y1),row:u};break;case Wg:d.anchor={y:Math.floor(r.y1)-l,row:Ui,x:c*(s||r.width()+2*r.x1),column:u};break;case Kc:d.anchor={y:Math.ceil(r.y2)+l,x:c*(s||r.width()+2*r.x1),column:u};break;case LFe:d.anchor={x:l,y:l};break;case IFe:d.anchor={x:s-l,y:l,column:Ui};break;case kFe:d.anchor={x:l,y:o-l,row:Ui};break;case GFe:d.anchor={x:s-l,y:o-l,column:Ui,row:Ui};break}return d}function lMe(t,e){var n=e.items[0],i=n.datum,r=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),cMe(t,n,n.items[0].items[0]),s=uMe(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),i.type===zFe&&dMe(n.items[0].items[0].items[0].items),r!==uG&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,Au(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function uMe(t,e){return t.items.forEach(n=>e.union(n.bounds)),e.x1=t.padding,e.y1=t.padding,e}function cMe(t,e,n){var i=e.padding,r=i-n.x,s=i-n.y;if(!e.datum.title)(r||s)&&Dy(t,n,r,s);else{var o=e.items[1].items[0],a=o.anchor,l=e.titlePadding||0,u=i-o.x,c=i-o.y;switch(o.orient){case Mo:r+=Math.ceil(o.bounds.width())+l;break;case ko:case Kc:break;default:s+=o.bounds.height()+l}switch((r||s)&&Dy(t,n,r,s),o.orient){case Mo:c+=ep(e,n,o,a,1,1);break;case ko:u+=ep(e,n,o,Ui,0,0)+l,c+=ep(e,n,o,a,1,1);break;case Kc:u+=ep(e,n,o,a,0,0),c+=ep(e,n,o,Ui,-1,0,1)+l;break;default:u+=ep(e,n,o,a,0,0)}(u||c)&&Dy(t,o,u,c),(u=Math.round(o.bounds.x1-i))<0&&(Dy(t,n,-u,0),Dy(t,o,-u,0))}}function ep(t,e,n,i,r,s,o){const a=t.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?e.items[0]:e,c=u.bounds[r?"y2":"x2"]-t.padding,d=l&&s?c:0,h=l&&s?0:c,f=r<=0?0:Uk(n);return Math.round(i===sG?d:i===Ui?h-f:.5*(c-f))}function Dy(t,e,n,i){e.x+=n,e.y+=i,e.bounds.translate(n,i),e.mark.bounds.translate(n,i),t.dirty(e)}function dMe(t){const e=t.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});t.forEach(n=>{n.width=e[n.column],n.height=n.bounds.y2-n.y})}function hMe(t,e,n,i,r){var s=e.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,d=s.items[0].items[0],h=s.items[1]&&s.items[1].items[0],f=a===Mo||a===ko?i:n,p=0,g=0,m=0,y=0,v=0,C;if(o!==hT?a===Mo?(p=r.y2,f=r.y1):a===ko?(p=r.y1,f=r.y2):(p=r.x1,f=r.x2):a===Mo&&(p=i,f=0),C=l===sG?p:l===Ui?f:(p+f)/2,h&&h.text){switch(a){case Wg:case Kc:v=d.bounds.height()+c;break;case Mo:y=d.bounds.width()+c;break;case ko:y=-d.bounds.width()-c;break}vi.clear().union(h.bounds),vi.translate(y-(h.x||0),v-(h.y||0)),Fp(h,"x",y)|Fp(h,"y",v)&&(t.dirty(h),h.bounds.clear().union(vi),h.mark.bounds.clear().union(vi),t.dirty(h)),vi.clear().union(h.bounds)}else vi.clear();switch(vi.union(d.bounds),a){case Wg:g=C,m=r.y1-vi.height()-u;break;case Mo:g=r.x1-vi.width()-u,m=C;break;case ko:g=r.x2+vi.width()+u,m=C;break;case Kc:g=C,m=r.y2+u;break;default:g=s.x,m=s.y}return Fp(s,"x",g)|Fp(s,"y",m)&&(vi.translate(g,m),t.dirty(s),s.bounds.clear().union(vi),e.bounds.clear().union(vi),t.dirty(s)),s.bounds}function Qee(t){V.call(this,null,t)}le(Qee,V,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(i=>{t.layout&&nMe(n,i,t.layout),pMe(n,i,t)}),fMe(t.mark.group)?e.reflow():e}});function fMe(t){return t&&t.mark.role!=="legend-entry"}function pMe(t,e,n){var i=e.items,r=Math.max(0,e.width||0),s=Math.max(0,e.height||0),o=new vn().set(0,0,r,s),a=o.clone(),l=o.clone(),u=[],c,d,h,f,p,g;for(p=0,g=i.length;p<g;++p)switch(d=i[p],d.role){case oG:f=XFe(d)?a:l,f.union(JFe(t,d,r,s));break;case aG:c=d;break;case lG:u.push(lMe(t,d));break;case WFe:case VFe:case Iee:case kee:case Gee:case $ee:case Hee:case Wee:a.union(d.bounds),l.union(d.bounds);break;default:o.union(d.bounds)}if(u.length){const m={};u.forEach(y=>{h=y.orient||ko,h!==uG&&(m[h]||(m[h]=[])).push(y)});for(const y in m){const v=m[y];Xee(t,v,aMe(v,y,n.legends,a,l,r,s))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,t.dirty(y),y.bounds=v,t.dirty(y)),n.autosize&&(n.autosize.type===Vee||n.autosize.type===Bee||n.autosize.type===zee))switch(y.orient){case Mo:case ko:o.add(v.x1,0).add(v.x2,0);break;case Wg:case Kc:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),c&&o.union(hMe(t,c,r,s,o)),e.clip&&o.set(0,0,e.width||0,e.height||0),gMe(t,e,o,n)}function gMe(t,e,n,i){const r=i.autosize||{},s=r.type;if(t._autosize<1||!s)return;let o=t._width,a=t._height,l=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,e.height||0),d=Math.max(0,Math.ceil(-n.y1));const h=Math.max(0,Math.ceil(n.x2-l)),f=Math.max(0,Math.ceil(n.y2-c));if(r.contains===BFe){const p=t.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===uG?(u=0,d=0,l=o,c=a):s===Vee?(l=Math.max(0,o-u-h),c=Math.max(0,a-d-f)):s===Bee?(l=Math.max(0,o-u-h),a=c+d+f):s===zee?(o=l+u+h,c=Math.max(0,a-d-f)):s===UFe&&(o=l+u+h,a=c+d+f),t._resizeView(o,a,l,c,[u,d],r.resize)}const mMe=Object.freeze(Object.defineProperty({__proto__:null,bound:Uee,identifier:dG,mark:jee,overlap:Yee,render:Kee,viewlayout:Qee},Symbol.toStringTag,{value:"Module"}));function Jee(t){V.call(this,null,t)}le(Jee,V,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,s=t.scale,o=t.count==null?t.values?t.values.length:10:t.count,a=Rk(s,o,t.minstep),l=t.format||FZ(n,s,a,t.formatSpecifier,t.formatType,!!t.values),u=t.values?PZ(s,t.values,a):Tk(s,a);return r&&(i.rem=r),r=u.map((c,d)=>vt({index:d/(u.length-1||1),value:c,label:l(c)})),t.extra&&r.length&&r.push(vt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function Zee(t){V.call(this,null,t)}function yMe(){return vt({})}function vMe(t){const e=Hm().test(n=>n.exit);return e.lookup=n=>e.get(t(n)),e}le(Zee,V,{transform(t,e){var n=e.dataflow,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.item||yMe,s=t.key||Re,o=this.value;return j(i.encode)&&(i.encode=null),o&&(t.modified("key")||e.modified(s))&&U("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=vMe(s)),e.visit(e.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,i.add.push(u)):i.mod.push(u):(u=r(a),o.set(l,u),i.add.push(u)),u.datum=a,u.exit=!1}),e.visit(e.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,i.mod.push(u))}),e.visit(e.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&i.modifies("datum"),(e.clean()||t.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function ete(t){V.call(this,null,t)}le(ete,V,{transform(t,e){var n=e.fork(e.ADD_REM),i=t.mod||!1,r=t.encoders,s=e.encode;if(j(s))if(n.changed()||s.every(d=>r[d]))s=s[0],n.encode=null;else return e.StopPropagation;var o=s==="enter",a=r.update||Vu,l=r.enter||Vu,u=r.exit||Vu,c=(s&&!o?r[s]:a)||Vu;if(e.changed(e.ADD)&&(e.visit(e.ADD,d=>{l(d,t),a(d,t)}),n.modifies(l.output),n.modifies(a.output),c!==Vu&&c!==a&&(e.visit(e.ADD,d=>{c(d,t)}),n.modifies(c.output))),e.changed(e.REM)&&u!==Vu&&(e.visit(e.REM,d=>{u(d,t)}),n.modifies(u.output)),o||c!==Vu){const d=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(d,h=>{const f=l(h,t)||i;(c(h,t)||f)&&n.mod.push(h)}),n.mod.length&&n.modifies(l.output)):e.visit(d,h=>{(c(h,t)||i)&&n.mod.push(h)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:e.StopPropagation}});function tte(t){V.call(this,[],t)}le(tte,V,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,s=t.type||jS,o=t.scale,a=+t.limit,l=Rk(o,t.count==null?5:t.count,t.minstep),u=!!t.values||s===jS,c=t.format||IZ(n,o,l,s,t.formatSpecifier,t.formatType,u),d=t.values||LZ(o,l),h,f,p,g,m;return r&&(i.rem=r),s===jS?(a&&d.length>a?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,a-1),m=!0):r=d,Ue(p=t.size)?(!t.values&&o(r[0])===0&&(r=r.slice(1)),g=r.reduce((y,v)=>Math.max(y,p(v,t)),0)):p=Ii(g=p||8),r=r.map((y,v)=>vt({index:v,label:c(y,v,r),value:y,offset:g,size:p(y,t)})),m&&(m=d[r.length],r.push(vt({index:r.length,label:`${d.length-r.length} entries`,value:m,offset:g,size:p(m,t)})))):s===jOe?(h=o.domain(),f=AZ(o,h[0],at(h)),d.length<3&&!t.values&&h[0]!==at(h)&&(d=[h[0],at(h)]),r=d.map((y,v)=>vt({index:v,label:c(y,v,d),value:y,perc:f(y)}))):(p=d.length-1,f=i2e(o),r=d.map((y,v)=>vt({index:v,label:c(y,v,d),value:y,perc:v?f(y):0,perc2:v===p?1:f(d[v+1])}))),i.source=r,i.add=r,this.value=r,i}});const CMe=t=>t.source.x,wMe=t=>t.source.y,SMe=t=>t.target.x,EMe=t=>t.target.y;function hG(t){V.call(this,{},t)}hG.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};le(hG,V,{transform(t,e){var n=t.sourceX||CMe,i=t.sourceY||wMe,r=t.targetX||SMe,s=t.targetY||EMe,o=t.as||"path",a=t.orient||"vertical",l=t.shape||"line",u=U8.get(l+"-"+a)||U8.get(l);return u||U("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,c=>{c[o]=u(n(c),i(c),r(c),s(c))}),e.reflow(t.modified()).modifies(o)}});const nte=(t,e,n,i)=>"M"+t+","+e+"L"+n+","+i,bMe=(t,e,n,i)=>nte(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),ite=(t,e,n,i)=>{var r=n-t,s=i-e,o=Math.hypot(r,s)/2,a=180*Math.atan2(s,r)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+a+" 0 1 "+n+","+i},xMe=(t,e,n,i)=>ite(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),rte=(t,e,n,i)=>{const r=n-t,s=i-e,o=.2*(r+s),a=.2*(s-r);return"M"+t+","+e+"C"+(t+o)+","+(e+a)+" "+(n+a)+","+(i-o)+" "+n+","+i},_Me=(t,e,n,i)=>rte(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),RMe=(t,e,n,i)=>"M"+t+","+e+"V"+i+"H"+n,TMe=(t,e,n,i)=>"M"+t+","+e+"H"+n+"V"+i,AMe=(t,e,n,i)=>{const r=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*r+","+e*s+"A"+e+","+e+" 0 0,"+(l?1:0)+" "+e*o+","+e*a+"L"+i*o+","+i*a},DMe=(t,e,n,i)=>{const r=(t+n)/2;return"M"+t+","+e+"C"+r+","+e+" "+r+","+i+" "+n+","+i},OMe=(t,e,n,i)=>{const r=(e+i)/2;return"M"+t+","+e+"C"+t+","+r+" "+n+","+r+" "+n+","+i},PMe=(t,e,n,i)=>{const r=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n),l=(e+i)/2;return"M"+e*r+","+e*s+"C"+l*r+","+l*s+" "+l*o+","+l*a+" "+i*o+","+i*a},U8=Hm({line:nte,"line-radial":bMe,arc:ite,"arc-radial":xMe,curve:rte,"curve-radial":_Me,"orthogonal-horizontal":RMe,"orthogonal-vertical":TMe,"orthogonal-radial":AMe,"diagonal-horizontal":DMe,"diagonal-vertical":OMe,"diagonal-radial":PMe});function fG(t){V.call(this,null,t)}fG.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};le(fG,V,{transform(t,e){var n=t.as||["startAngle","endAngle"],i=n[0],r=n[1],s=t.field||km,o=t.startAngle||0,a=t.endAngle!=null?t.endAngle:2*Math.PI,l=e.source,u=l.map(s),c=u.length,d=o,h=(a-o)/_X(u),f=ps(c),p,g,m;for(t.sort&&f.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)m=u[f[p]],g=l[f[p]],g[i]=d,g[r]=d+=m*h;return this.value=u,e.reflow(t.modified()).modifies(n)}});const FMe=5;function MMe(t){const e=t.type;return!t.bins&&(e===Ng||e===_C||e===RC)}function ste(t){return bk(t)&&t!==qa}const NMe=ta(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function ote(t){V.call(this,null,t),this.modified(!0)}le(ote,V,{transform(t,e){var n=e.dataflow,i=this.value,r=LMe(t);(!i||r!==i.type)&&(this.value=i=mt(r)());for(r in t)if(!NMe[r]){if(r==="padding"&&ste(i.type))continue;Ue(i[r])?i[r](t[r]):n.warn("Unsupported scale property: "+r)}return WMe(i,t,HMe(i,t,kMe(i,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function LMe(t){var e=t.type,n="",i;return e===qa?qa+"-"+Ng:(IMe(t)&&(i=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=i===2?qa+"-":i===3?Ym+"-":""),(n+e||Ng).toLowerCase())}function IMe(t){const e=t.type;return bk(e)&&e!==Yh&&e!==qh&&(t.scheme||t.range&&t.range.length&&t.range.every(ce))}function kMe(t,e,n){const i=GMe(t,e.domainRaw,n);if(i>-1)return i;var r=e.domain,s=t.type,o=e.zero||e.zero===void 0&&MMe(t),a,l;if(!r)return 0;if(ste(s)&&e.padding&&r[0]!==at(r)&&(r=$Me(s,r,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(r=r.slice()).length-1||1,o&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),e.domainMin!=null&&(r[0]=e.domainMin),e.domainMax!=null&&(r[a]=e.domainMax),e.domainMid!=null)){l=e.domainMid;const u=l>r[a]?a+1:l<r[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return t.domain(ate(s,r,n)),s===Ck&&t.unknown(e.domainImplicit?QP:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&Rk(t,e.nice)||null),r.length}function GMe(t,e,n){return e?(t.domain(ate(t.type,e,n)),e.length):-1}function $Me(t,e,n,i,r,s){var o=Math.abs(at(n)-n[0]),a=o/(o-2*i),l=t===vu?WI(e,null,a):t===RC?Cb(e,null,a,.5):t===_C?Cb(e,null,a,r||1):t===QR?VI(e,null,a,s||1):HI(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function ate(t,e,n){if(bZ(t)){var i=Math.abs(e.reduce((r,s)=>r+(s<0?-1:s>0?1:0),0));i!==e.length&&n.warn("Log scale domain includes zero: "+ae(e))}return e}function HMe(t,e,n){let i=e.bins;if(i&&!j(i)){const r=t.domain(),s=r[0],o=at(r),a=i.step;let l=i.start==null?s:i.start,u=i.stop==null?o:i.stop;a||U("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),i=ps(l,u+a/2,a)}return i?t.bins=i:t.bins&&delete t.bins,t.type===wk&&(i?!e.domain&&!e.domainRaw&&(t.domain(i),n=i.length):t.bins=t.domain()),n}function WMe(t,e,n){var i=t.type,r=e.round||!1,s=e.range;if(e.rangeStep!=null)s=VMe(i,e,n);else if(e.scheme&&(s=BMe(i,e,n),Ue(s))){if(t.interpolator)return t.interpolator(s);U(`Scale type ${i} does not support interpolating color schemes.`)}if(s&&xZ(i))return t.interpolator(eT(CF(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&t.interpolate?t.interpolate(xk(e.interpolate,e.interpolateGamma)):Ue(t.round)?t.round(r):Ue(t.rangeRound)&&t.interpolate(r?bC:wd),s&&t.range(CF(s,e.reverse))}function VMe(t,e,n){t!==yZ&&t!==rF&&U("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,r=t===rF?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*vk(n,r,i)]}function BMe(t,e,n){var i=e.schemeExtent,r,s;return j(e.scheme)?s=eT(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),s=_k(r),s||U(`Unrecognized scheme name: ${e.scheme}`)),n=t===ZR?n+1:t===wk?n-1:t===Lg||t===JR?+e.schemeCount||FMe:n,xZ(t)?j8(s,i,e.reverse):Ue(s)?TZ(j8(s,i),n):t===Ck?s:s.slice(0,n)}function j8(t,e,n){return Ue(t)&&(e||n)?RZ(t,CF(e||[0,1],n)):t}function CF(t,e){return e?t.slice().reverse():t}function lte(t){V.call(this,null,t)}le(lte,V,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(Lf(t.sort)),this.modified(n),e}});const Y8="zero",ute="center",cte="normalize",dte=["y0","y1"];function pG(t){V.call(this,null,t)}pG.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Y8,values:[Y8,ute,cte]},{name:"as",type:"string",array:!0,length:2,default:dte}]};le(pG,V,{transform(t,e){var n=t.as||dte,i=n[0],r=n[1],s=Lf(t.sort),o=t.field||km,a=t.offset===ute?zMe:t.offset===cte?UMe:jMe,l,u,c,d;for(l=YMe(e.source,t.groupby,s,o),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,o,i,r);return e.reflow(t.modified()).modifies(n)}});function zMe(t,e,n,i,r){for(var s=(e-t.sum)/2,o=t.length,a=0,l;a<o;++a)l=t[a],l[i]=s,l[r]=s+=Math.abs(n(l))}function UMe(t,e,n,i,r){for(var s=1/t.sum,o=0,a=t.length,l=0,u=0,c;l<a;++l)c=t[l],c[i]=o,c[r]=o=s*(u+=Math.abs(n(c)))}function jMe(t,e,n,i,r){for(var s=0,o=0,a=t.length,l=0,u,c;l<a;++l)c=t[l],u=+n(c),u<0?(c[i]=o,c[r]=o+=u):(c[i]=s,c[r]=s+=u)}function YMe(t,e,n,i){var r=[],s=g=>g(c),o,a,l,u,c,d,h,f,p;if(e==null)r.push(t.slice());else for(o={},a=0,l=t.length;a<l;++a)c=t[a],d=e.map(s),h=o[d],h||(o[d]=h=[],r.push(h)),h.push(c);for(d=0,p=0,u=r.length;d<u;++d){for(h=r[d],a=0,f=0,l=h.length;a<l;++a)f+=Math.abs(i(h[a]));h.sum=f,f>p&&(p=f),n&&h.sort(n)}return r.max=p,r}const qMe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Jee,datajoin:Zee,encode:ete,legendentries:tte,linkpath:hG,pie:fG,scale:ote,sortitems:lte,stack:pG},Symbol.toStringTag,{value:"Module"}));var Me=1e-6,Kb=1e-12,qe=Math.PI,an=qe/2,Xb=qe/4,rr=qe*2,hn=180/qe,Ye=qe/180,ot=Math.abs,Km=Math.atan,ao=Math.atan2,Ne=Math.cos,Uw=Math.ceil,hte=Math.exp,wF=Math.hypot,Qb=Math.log,YD=Math.pow,Te=Math.sin,zs=Math.sign||function(t){return t>0?1:t<0?-1:0},sr=Math.sqrt,gG=Math.tan;function fte(t){return t>1?0:t<-1?qe:Math.acos(t)}function Wr(t){return t>1?an:t<-1?-an:Math.asin(t)}function Zn(){}function Jb(t,e){t&&K8.hasOwnProperty(t.type)&&K8[t.type](t,e)}var q8={Feature:function(t,e){Jb(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Jb(n[i].geometry,e)}},K8={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){SF(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)SF(n[i],e,0)},Polygon:function(t,e){X8(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)X8(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Jb(n[i],e)}};function SF(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function X8(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)SF(t[n],e,1);e.polygonEnd()}function Wl(t,e){t&&q8.hasOwnProperty(t.type)?q8[t.type](t,e):Jb(t,e)}var Zb=new nr,ex=new nr,pte,gte,EF,bF,xF,sl={point:Zn,lineStart:Zn,lineEnd:Zn,polygonStart:function(){Zb=new nr,sl.lineStart=KMe,sl.lineEnd=XMe},polygonEnd:function(){var t=+Zb;ex.add(t<0?rr+t:t),this.lineStart=this.lineEnd=this.point=Zn},sphere:function(){ex.add(rr)}};function KMe(){sl.point=QMe}function XMe(){mte(pte,gte)}function QMe(t,e){sl.point=mte,pte=t,gte=e,t*=Ye,e*=Ye,EF=t,bF=Ne(e=e/2+Xb),xF=Te(e)}function mte(t,e){t*=Ye,e*=Ye,e=e/2+Xb;var n=t-EF,i=n>=0?1:-1,r=i*n,s=Ne(e),o=Te(e),a=xF*o,l=bF*s+a*Ne(r),u=a*i*Te(r);Zb.add(ao(u,l)),EF=t,bF=s,xF=o}function JMe(t){return ex=new nr,Wl(t,sl),ex*2}function tx(t){return[ao(t[1],t[0]),Wr(t[2])]}function Kh(t){var e=t[0],n=t[1],i=Ne(n);return[i*Ne(e),i*Te(e),Te(n)]}function jw(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vg(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qD(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Yw(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function nx(t){var e=sr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Jt,br,nn,as,Yd,yte,vte,qp,G0,Xu,Cu,kl={point:_F,lineStart:Q8,lineEnd:J8,polygonStart:function(){kl.point=wte,kl.lineStart=ZMe,kl.lineEnd=eNe,G0=new nr,sl.polygonStart()},polygonEnd:function(){sl.polygonEnd(),kl.point=_F,kl.lineStart=Q8,kl.lineEnd=J8,Zb<0?(Jt=-(nn=180),br=-(as=90)):G0>Me?as=90:G0<-Me&&(br=-90),Cu[0]=Jt,Cu[1]=nn},sphere:function(){Jt=-(nn=180),br=-(as=90)}};function _F(t,e){Xu.push(Cu=[Jt=t,nn=t]),e<br&&(br=e),e>as&&(as=e)}function Cte(t,e){var n=Kh([t*Ye,e*Ye]);if(qp){var i=Vg(qp,n),r=[i[1],-i[0],0],s=Vg(r,i);nx(s),s=tx(s);var o=t-Yd,a=o>0?1:-1,l=s[0]*hn*a,u,c=ot(o)>180;c^(a*Yd<l&&l<a*t)?(u=s[1]*hn,u>as&&(as=u)):(l=(l+360)%360-180,c^(a*Yd<l&&l<a*t)?(u=-s[1]*hn,u<br&&(br=u)):(e<br&&(br=e),e>as&&(as=e))),c?t<Yd?os(Jt,t)>os(Jt,nn)&&(nn=t):os(t,nn)>os(Jt,nn)&&(Jt=t):nn>=Jt?(t<Jt&&(Jt=t),t>nn&&(nn=t)):t>Yd?os(Jt,t)>os(Jt,nn)&&(nn=t):os(t,nn)>os(Jt,nn)&&(Jt=t)}else Xu.push(Cu=[Jt=t,nn=t]);e<br&&(br=e),e>as&&(as=e),qp=n,Yd=t}function Q8(){kl.point=Cte}function J8(){Cu[0]=Jt,Cu[1]=nn,kl.point=_F,qp=null}function wte(t,e){if(qp){var n=t-Yd;G0.add(ot(n)>180?n+(n>0?360:-360):n)}else yte=t,vte=e;sl.point(t,e),Cte(t,e)}function ZMe(){sl.lineStart()}function eNe(){wte(yte,vte),sl.lineEnd(),ot(G0)>Me&&(Jt=-(nn=180)),Cu[0]=Jt,Cu[1]=nn,qp=null}function os(t,e){return(e-=t)<0?e+360:e}function tNe(t,e){return t[0]-e[0]}function Z8(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function nNe(t){var e,n,i,r,s,o,a;if(as=nn=-(Jt=br=1/0),Xu=[],Wl(t,kl),n=Xu.length){for(Xu.sort(tNe),e=1,i=Xu[0],s=[i];e<n;++e)r=Xu[e],Z8(i,r[0])||Z8(i,r[1])?(os(i[0],r[1])>os(i[0],i[1])&&(i[1]=r[1]),os(r[0],i[1])>os(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(o=-1/0,n=s.length-1,e=0,i=s[n];e<=n;i=r,++e)r=s[e],(a=os(i[1],r[0]))>o&&(o=a,Jt=r[0],nn=i[1])}return Xu=Cu=null,Jt===1/0||br===1/0?[[NaN,NaN],[NaN,NaN]]:[[Jt,br],[nn,as]]}var l0,ix,rx,sx,ox,ax,lx,ux,RF,TF,AF,Ste,Ete,ji,Yi,qi,Go={sphere:Zn,point:mG,lineStart:e7,lineEnd:t7,polygonStart:function(){Go.lineStart=sNe,Go.lineEnd=oNe},polygonEnd:function(){Go.lineStart=e7,Go.lineEnd=t7}};function mG(t,e){t*=Ye,e*=Ye;var n=Ne(e);kC(n*Ne(t),n*Te(t),Te(e))}function kC(t,e,n){++l0,rx+=(t-rx)/l0,sx+=(e-sx)/l0,ox+=(n-ox)/l0}function e7(){Go.point=iNe}function iNe(t,e){t*=Ye,e*=Ye;var n=Ne(e);ji=n*Ne(t),Yi=n*Te(t),qi=Te(e),Go.point=rNe,kC(ji,Yi,qi)}function rNe(t,e){t*=Ye,e*=Ye;var n=Ne(e),i=n*Ne(t),r=n*Te(t),s=Te(e),o=ao(sr((o=Yi*s-qi*r)*o+(o=qi*i-ji*s)*o+(o=ji*r-Yi*i)*o),ji*i+Yi*r+qi*s);ix+=o,ax+=o*(ji+(ji=i)),lx+=o*(Yi+(Yi=r)),ux+=o*(qi+(qi=s)),kC(ji,Yi,qi)}function t7(){Go.point=mG}function sNe(){Go.point=aNe}function oNe(){bte(Ste,Ete),Go.point=mG}function aNe(t,e){Ste=t,Ete=e,t*=Ye,e*=Ye,Go.point=bte;var n=Ne(e);ji=n*Ne(t),Yi=n*Te(t),qi=Te(e),kC(ji,Yi,qi)}function bte(t,e){t*=Ye,e*=Ye;var n=Ne(e),i=n*Ne(t),r=n*Te(t),s=Te(e),o=Yi*s-qi*r,a=qi*i-ji*s,l=ji*r-Yi*i,u=wF(o,a,l),c=Wr(u),d=u&&-c/u;RF.add(d*o),TF.add(d*a),AF.add(d*l),ix+=c,ax+=c*(ji+(ji=i)),lx+=c*(Yi+(Yi=r)),ux+=c*(qi+(qi=s)),kC(ji,Yi,qi)}function lNe(t){l0=ix=rx=sx=ox=ax=lx=ux=0,RF=new nr,TF=new nr,AF=new nr,Wl(t,Go);var e=+RF,n=+TF,i=+AF,r=wF(e,n,i);return r<Kb&&(e=ax,n=lx,i=ux,ix<Me&&(e=rx,n=sx,i=ox),r=wF(e,n,i),r<Kb)?[NaN,NaN]:[ao(n,e)*hn,Wr(i/r)*hn]}function DF(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function OF(t,e){return ot(t)>qe&&(t-=Math.round(t/rr)*rr),[t,e]}OF.invert=OF;function xte(t,e,n){return(t%=rr)?e||n?DF(i7(t),r7(e,n)):i7(t):e||n?r7(e,n):OF}function n7(t){return function(e,n){return e+=t,ot(e)>qe&&(e-=Math.round(e/rr)*rr),[e,n]}}function i7(t){var e=n7(t);return e.invert=n7(-t),e}function r7(t,e){var n=Ne(t),i=Te(t),r=Ne(e),s=Te(e);function o(a,l){var u=Ne(l),c=Ne(a)*u,d=Te(a)*u,h=Te(l),f=h*n+c*i;return[ao(d*r-f*s,c*n-h*i),Wr(f*r+d*s)]}return o.invert=function(a,l){var u=Ne(l),c=Ne(a)*u,d=Te(a)*u,h=Te(l),f=h*r-d*s;return[ao(d*r+h*s,c*n+f*i),Wr(f*n-c*i)]},o}function uNe(t){t=xte(t[0]*Ye,t[1]*Ye,t.length>2?t[2]*Ye:0);function e(n){return n=t(n[0]*Ye,n[1]*Ye),n[0]*=hn,n[1]*=hn,n}return e.invert=function(n){return n=t.invert(n[0]*Ye,n[1]*Ye),n[0]*=hn,n[1]*=hn,n},e}function cNe(t,e,n,i,r,s){if(n){var o=Ne(e),a=Te(e),l=i*n;r==null?(r=e+i*rr,s=e-l/2):(r=s7(o,r),s=s7(o,s),(i>0?r<s:r>s)&&(r+=i*rr));for(var u,c=r;i>0?c>s:c<s;c-=l)u=tx([o,-a*Ne(c),-a*Te(c)]),t.point(u[0],u[1])}}function s7(t,e){e=Kh(e),e[0]-=t,nx(e);var n=fte(-e[1]);return((-e[2]<0?-n:n)+rr-Me)%rr}function _te(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Zn,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function eE(t,e){return ot(t[0]-e[0])<Me&&ot(t[1]-e[1])<Me}function qw(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Rte(t,e,n,i,r){var s=[],o=[],a,l;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(eE(m,y)){if(!m[2]&&!y[2]){for(r.lineStart(),a=0;a<g;++a)r.point((m=p[a])[0],m[1]);r.lineEnd();return}y[0]+=2*Me}s.push(v=new qw(m,p,null,!0)),o.push(v.o=new qw(m,null,v,!1)),s.push(v=new qw(y,p,null,!1)),o.push(v.o=new qw(y,null,v,!0))}}),!!s.length){for(o.sort(e),o7(s),o7(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,d;;){for(var h=u,f=!0;h.v;)if((h=h.n)===u)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(a=0,l=c.length;a<l;++a)r.point((d=c[a])[0],d[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(f)for(c=h.p.z,a=c.length-1;a>=0;--a)r.point((d=c[a])[0],d[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,c=h.z,f=!f}while(!h.v);r.lineEnd()}}}function o7(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function KD(t){return ot(t[0])<=qe?t[0]:zs(t[0])*((ot(t[0])+qe)%rr-qe)}function dNe(t,e){var n=KD(e),i=e[1],r=Te(i),s=[Te(n),-Ne(n),0],o=0,a=0,l=new nr;r===1?i=an+Me:r===-1&&(i=-an-Me);for(var u=0,c=t.length;u<c;++u)if(h=(d=t[u]).length)for(var d,h,f=d[h-1],p=KD(f),g=f[1]/2+Xb,m=Te(g),y=Ne(g),v=0;v<h;++v,p=w,m=b,y=S,f=C){var C=d[v],w=KD(C),E=C[1]/2+Xb,b=Te(E),S=Ne(E),_=w-p,A=_>=0?1:-1,D=A*_,P=D>qe,L=m*b;if(l.add(ao(L*A*Te(D),y*S+L*Ne(D))),o+=P?_+A*rr:_,P^p>=n^w>=n){var O=Vg(Kh(f),Kh(C));nx(O);var M=Vg(s,O);nx(M);var F=(P^_>=0?-1:1)*Wr(M[2]);(i>F||i===F&&(O[0]||O[1]))&&(a+=P^_>=0?1:-1)}}return(o<-Me||o<Me&&l<-Kb)^a&1}function Tte(t,e,n,i){return function(r){var s=e(r),o=_te(),a=e(o),l=!1,u,c,d,h={point:f,lineStart:g,lineEnd:m,polygonStart:function(){h.point=y,h.lineStart=v,h.lineEnd=C,c=[],u=[]},polygonEnd:function(){h.point=f,h.lineStart=g,h.lineEnd=m,c=xX(c);var w=dNe(u,i);c.length?(l||(r.polygonStart(),l=!0),Rte(c,fNe,w,n,r)):w&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(w,E){t(w,E)&&r.point(w,E)}function p(w,E){s.point(w,E)}function g(){h.point=p,s.lineStart()}function m(){h.point=f,s.lineEnd()}function y(w,E){d.push([w,E]),a.point(w,E)}function v(){a.lineStart(),d=[]}function C(){y(d[0][0],d[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),b,S=E.length,_,A,D;if(d.pop(),u.push(d),d=null,!!S){if(w&1){if(A=E[0],(_=A.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),b=0;b<_;++b)r.point((D=A[b])[0],D[1]);r.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(hNe))}}return h}}function hNe(t){return t.length>1}function fNe(t,e){return((t=t.x)[0]<0?t[1]-an-Me:an-t[1])-((e=e.x)[0]<0?e[1]-an-Me:an-e[1])}const a7=Tte(function(){return!0},pNe,mNe,[-qe,-an]);function pNe(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(s,o){var a=s>0?qe:-qe,l=ot(s-e);ot(l-qe)<Me?(t.point(e,n=(n+o)/2>0?an:-an),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(s,n),r=0):i!==a&&l>=qe&&(ot(e-i)<Me&&(e-=i*Me),ot(s-a)<Me&&(s-=a*Me),n=gNe(e,n,s,o),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),r=0),t.point(e=s,n=o),i=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function gNe(t,e,n,i){var r,s,o=Te(t-n);return ot(o)>Me?Km((Te(e)*(s=Ne(i))*Te(n)-Te(i)*(r=Ne(e))*Te(t))/(r*s*o)):(e+i)/2}function mNe(t,e,n,i){var r;if(t==null)r=n*an,i.point(-qe,r),i.point(0,r),i.point(qe,r),i.point(qe,0),i.point(qe,-r),i.point(0,-r),i.point(-qe,-r),i.point(-qe,0),i.point(-qe,r);else if(ot(t[0]-e[0])>Me){var s=t[0]<e[0]?qe:-qe;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function yNe(t){var e=Ne(t),n=6*Ye,i=e>0,r=ot(e)>Me;function s(c,d,h,f){cNe(f,t,n,h,c,d)}function o(c,d){return Ne(c)*Ne(d)>e}function a(c){var d,h,f,p,g;return{lineStart:function(){p=f=!1,g=1},point:function(m,y){var v=[m,y],C,w=o(m,y),E=i?w?0:u(m,y):w?u(m+(m<0?qe:-qe),y):0;if(!d&&(p=f=w)&&c.lineStart(),w!==f&&(C=l(d,v),(!C||eE(d,C)||eE(v,C))&&(v[2]=1)),w!==f)g=0,w?(c.lineStart(),C=l(v,d),c.point(C[0],C[1])):(C=l(d,v),c.point(C[0],C[1],2),c.lineEnd()),d=C;else if(r&&d&&i^w){var b;!(E&h)&&(b=l(v,d,!0))&&(g=0,i?(c.lineStart(),c.point(b[0][0],b[0][1]),c.point(b[1][0],b[1][1]),c.lineEnd()):(c.point(b[1][0],b[1][1]),c.lineEnd(),c.lineStart(),c.point(b[0][0],b[0][1],3)))}w&&(!d||!eE(d,v))&&c.point(v[0],v[1]),d=v,f=w,h=E},lineEnd:function(){f&&c.lineEnd(),d=null},clean:function(){return g|(p&&f)<<1}}}function l(c,d,h){var f=Kh(c),p=Kh(d),g=[1,0,0],m=Vg(f,p),y=jw(m,m),v=m[0],C=y-v*v;if(!C)return!h&&c;var w=e*y/C,E=-e*v/C,b=Vg(g,m),S=Yw(g,w),_=Yw(m,E);qD(S,_);var A=b,D=jw(S,A),P=jw(A,A),L=D*D-P*(jw(S,S)-1);if(!(L<0)){var O=sr(L),M=Yw(A,(-D-O)/P);if(qD(M,S),M=tx(M),!h)return M;var F=c[0],I=d[0],H=c[1],N=d[1],G;I<F&&(G=F,F=I,I=G);var W=I-F,X=ot(W-qe)<Me,ne=X||W<Me;if(!X&&N<H&&(G=H,H=N,N=G),ne?X?H+N>0^M[1]<(ot(M[0]-F)<Me?H:N):H<=M[1]&&M[1]<=N:W>qe^(F<=M[0]&&M[0]<=I)){var Se=Yw(A,(-D+O)/P);return qD(Se,S),[M,tx(Se)]}}}function u(c,d){var h=i?t:qe-t,f=0;return c<-h?f|=1:c>h&&(f|=2),d<-h?f|=4:d>h&&(f|=8),f}return Tte(o,a,s,i?[0,-t]:[-qe,t-qe])}function vNe(t,e,n,i,r,s){var o=t[0],a=t[1],l=e[0],u=e[1],c=0,d=1,h=l-o,f=u-a,p;if(p=n-o,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=r-o,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}if(p=i-a,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}return c>0&&(t[0]=o+c*h,t[1]=a+c*f),d<1&&(e[0]=o+d*h,e[1]=a+d*f),!0}}}}}var u0=1e9,Kw=-u0;function Ate(t,e,n,i){function r(u,c){return t<=u&&u<=n&&e<=c&&c<=i}function s(u,c,d,h){var f=0,p=0;if(u==null||(f=o(u,d))!==(p=o(c,d))||l(u,c)<0^d>0)do h.point(f===0||f===3?t:n,f>1?i:e);while((f=(f+d+4)%4)!==p);else h.point(c[0],c[1])}function o(u,c){return ot(u[0]-t)<Me?c>0?0:3:ot(u[0]-n)<Me?c>0?2:1:ot(u[1]-e)<Me?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=o(u,1),h=o(c,1);return d!==h?d-h:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=_te(),h,f,p,g,m,y,v,C,w,E,b,S={point:_,lineStart:L,lineEnd:O,polygonStart:D,polygonEnd:P};function _(F,I){r(F,I)&&c.point(F,I)}function A(){for(var F=0,I=0,H=f.length;I<H;++I)for(var N=f[I],G=1,W=N.length,X=N[0],ne,Se,xe=X[0],rt=X[1];G<W;++G)ne=xe,Se=rt,X=N[G],xe=X[0],rt=X[1],Se<=i?rt>i&&(xe-ne)*(i-Se)>(rt-Se)*(t-ne)&&++F:rt<=i&&(xe-ne)*(i-Se)<(rt-Se)*(t-ne)&&--F;return F}function D(){c=d,h=[],f=[],b=!0}function P(){var F=A(),I=b&&F,H=(h=xX(h)).length;(I||H)&&(u.polygonStart(),I&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),H&&Rte(h,a,F,s,u),u.polygonEnd()),c=u,h=f=p=null}function L(){S.point=M,f&&f.push(p=[]),E=!0,w=!1,v=C=NaN}function O(){h&&(M(g,m),y&&w&&d.rejoin(),h.push(d.result())),S.point=_,w&&c.lineEnd()}function M(F,I){var H=r(F,I);if(f&&p.push([F,I]),E)g=F,m=I,y=H,E=!1,H&&(c.lineStart(),c.point(F,I));else if(H&&w)c.point(F,I);else{var N=[v=Math.max(Kw,Math.min(u0,v)),C=Math.max(Kw,Math.min(u0,C))],G=[F=Math.max(Kw,Math.min(u0,F)),I=Math.max(Kw,Math.min(u0,I))];vNe(N,G,t,e,n,i)?(w||(c.lineStart(),c.point(N[0],N[1])),c.point(G[0],G[1]),H||c.lineEnd(),b=!1):H&&(c.lineStart(),c.point(F,I),b=!1)}v=F,C=I,w=H}return S}}function l7(t,e,n){var i=ps(t,e-Me,n).concat(e);return function(r){return i.map(function(s){return[r,s]})}}function u7(t,e,n){var i=ps(t,e-Me,n).concat(e);return function(r){return i.map(function(s){return[s,r]})}}function CNe(){var t,e,n,i,r,s,o,a,l=10,u=l,c=90,d=360,h,f,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return ps(Uw(i/c)*c,n,c).map(p).concat(ps(Uw(a/d)*d,o,d).map(g)).concat(ps(Uw(e/l)*l,t,l).filter(function(C){return ot(C%c)>Me}).map(h)).concat(ps(Uw(s/u)*u,r,u).filter(function(C){return ot(C%d)>Me}).map(f))}return y.lines=function(){return v().map(function(C){return{type:"LineString",coordinates:C}})},y.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(C){return arguments.length?y.extentMajor(C).extentMinor(C):y.extentMinor()},y.extentMajor=function(C){return arguments.length?(i=+C[0][0],n=+C[1][0],a=+C[0][1],o=+C[1][1],i>n&&(C=i,i=n,n=C),a>o&&(C=a,a=o,o=C),y.precision(m)):[[i,a],[n,o]]},y.extentMinor=function(C){return arguments.length?(e=+C[0][0],t=+C[1][0],s=+C[0][1],r=+C[1][1],e>t&&(C=e,e=t,t=C),s>r&&(C=s,s=r,r=C),y.precision(m)):[[e,s],[t,r]]},y.step=function(C){return arguments.length?y.stepMajor(C).stepMinor(C):y.stepMinor()},y.stepMajor=function(C){return arguments.length?(c=+C[0],d=+C[1],y):[c,d]},y.stepMinor=function(C){return arguments.length?(l=+C[0],u=+C[1],y):[l,u]},y.precision=function(C){return arguments.length?(m=+C,h=l7(s,r,90),f=u7(e,t,m),p=l7(a,o,90),g=u7(i,n,m),y):m},y.extentMajor([[-180,-90+Me],[180,90-Me]]).extentMinor([[-180,-80-Me],[180,80+Me]])}const n1=t=>t;var XD=new nr,PF=new nr,Dte,Ote,FF,MF,nc={point:Zn,lineStart:Zn,lineEnd:Zn,polygonStart:function(){nc.lineStart=wNe,nc.lineEnd=ENe},polygonEnd:function(){nc.lineStart=nc.lineEnd=nc.point=Zn,XD.add(ot(PF)),PF=new nr},result:function(){var t=XD/2;return XD=new nr,t}};function wNe(){nc.point=SNe}function SNe(t,e){nc.point=Pte,Dte=FF=t,Ote=MF=e}function Pte(t,e){PF.add(MF*t-FF*e),FF=t,MF=e}function ENe(){Pte(Dte,Ote)}const c7=nc;var Bg=1/0,cx=Bg,i1=-Bg,dx=i1,bNe={point:xNe,lineStart:Zn,lineEnd:Zn,polygonStart:Zn,polygonEnd:Zn,result:function(){var t=[[Bg,cx],[i1,dx]];return i1=dx=-(cx=Bg=1/0),t}};function xNe(t,e){t<Bg&&(Bg=t),t>i1&&(i1=t),e<cx&&(cx=e),e>dx&&(dx=e)}const hx=bNe;var NF=0,LF=0,c0=0,fx=0,px=0,Mp=0,IF=0,kF=0,d0=0,Fte,Mte,ka,Ga,No={point:Xh,lineStart:d7,lineEnd:h7,polygonStart:function(){No.lineStart=TNe,No.lineEnd=ANe},polygonEnd:function(){No.point=Xh,No.lineStart=d7,No.lineEnd=h7},result:function(){var t=d0?[IF/d0,kF/d0]:Mp?[fx/Mp,px/Mp]:c0?[NF/c0,LF/c0]:[NaN,NaN];return NF=LF=c0=fx=px=Mp=IF=kF=d0=0,t}};function Xh(t,e){NF+=t,LF+=e,++c0}function d7(){No.point=_Ne}function _Ne(t,e){No.point=RNe,Xh(ka=t,Ga=e)}function RNe(t,e){var n=t-ka,i=e-Ga,r=sr(n*n+i*i);fx+=r*(ka+t)/2,px+=r*(Ga+e)/2,Mp+=r,Xh(ka=t,Ga=e)}function h7(){No.point=Xh}function TNe(){No.point=DNe}function ANe(){Nte(Fte,Mte)}function DNe(t,e){No.point=Nte,Xh(Fte=ka=t,Mte=Ga=e)}function Nte(t,e){var n=t-ka,i=e-Ga,r=sr(n*n+i*i);fx+=r*(ka+t)/2,px+=r*(Ga+e)/2,Mp+=r,r=Ga*t-ka*e,IF+=r*(ka+t),kF+=r*(Ga+e),d0+=r*3,Xh(ka=t,Ga=e)}const f7=No;function Lte(t){this._context=t}Lte.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,rr);break}}},result:Zn};var GF=new nr,QD,Ite,kte,h0,f0,gx={point:Zn,lineStart:function(){gx.point=ONe},lineEnd:function(){QD&&Gte(Ite,kte),gx.point=Zn},polygonStart:function(){QD=!0},polygonEnd:function(){QD=null},result:function(){var t=+GF;return GF=new nr,t}};function ONe(t,e){gx.point=Gte,Ite=h0=t,kte=f0=e}function Gte(t,e){h0-=t,f0-=e,GF.add(sr(h0*h0+f0*f0)),h0=t,f0=e}const p7=gx;let g7,mx,m7,y7;class v7{constructor(e){this._append=e==null?$te:PNe(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==m7||this._append!==mx){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,m7=i,mx=this._append,y7=this._,this._=r}this._+=y7;break}}}result(){const e=this._;return this._="",e.length?e:null}}function $te(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function PNe(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return $te;if(e!==g7){const n=10**e;g7=e,mx=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return mx}function Hte(t,e){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Wl(a,r(s))),s.result()}return o.area=function(a){return Wl(a,r(c7)),c7.result()},o.measure=function(a){return Wl(a,r(p7)),p7.result()},o.bounds=function(a){return Wl(a,r(hx)),hx.result()},o.centroid=function(a){return Wl(a,r(f7)),f7.result()},o.projection=function(a){return arguments.length?(r=a==null?(t=null,n1):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new v7(n)):new Lte(e=a),typeof i!="function"&&s.pointRadius(i),o):e},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return e===null&&(s=new v7(n)),o},o.projection(t).digits(n).context(e)}function fT(t){return function(e){var n=new $F;for(var i in t)n[i]=t[i];return n.stream=e,n}}function $F(){}$F.prototype={constructor:$F,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function yG(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Wl(n,t.stream(hx)),e(hx.result()),i!=null&&t.clipExtent(i),t}function pT(t,e,n){return yG(t,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}function vG(t,e,n){return pT(t,[[0,0],e],n)}function CG(t,e,n){return yG(t,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];t.scale(150*s).translate([o,a])},n)}function wG(t,e,n){return yG(t,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([o,a])},n)}var C7=16,FNe=Ne(30*Ye);function w7(t,e){return+e?NNe(t,e):MNe(t)}function MNe(t){return fT({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function NNe(t,e){function n(i,r,s,o,a,l,u,c,d,h,f,p,g,m){var y=u-i,v=c-r,C=y*y+v*v;if(C>4*e&&g--){var w=o+h,E=a+f,b=l+p,S=sr(w*w+E*E+b*b),_=Wr(b/=S),A=ot(ot(b)-1)<Me||ot(s-d)<Me?(s+d)/2:ao(E,w),D=t(A,_),P=D[0],L=D[1],O=P-i,M=L-r,F=v*O-y*M;(F*F/C>e||ot((y*O+v*M)/C-.5)>.3||o*h+a*f+l*p<FNe)&&(n(i,r,s,o,a,l,P,L,A,w/=S,E/=S,b,g,m),m.point(P,L),n(P,L,A,w,E,b,u,c,d,h,f,p,g,m))}}return function(i){var r,s,o,a,l,u,c,d,h,f,p,g,m={point:y,lineStart:v,lineEnd:w,polygonStart:function(){i.polygonStart(),m.lineStart=E},polygonEnd:function(){i.polygonEnd(),m.lineStart=v}};function y(_,A){_=t(_,A),i.point(_[0],_[1])}function v(){d=NaN,m.point=C,i.lineStart()}function C(_,A){var D=Kh([_,A]),P=t(_,A);n(d,h,c,f,p,g,d=P[0],h=P[1],c=_,f=D[0],p=D[1],g=D[2],C7,i),i.point(d,h)}function w(){m.point=y,i.lineEnd()}function E(){v(),m.point=b,m.lineEnd=S}function b(_,A){C(r=_,A),s=d,o=h,a=f,l=p,u=g,m.point=C}function S(){n(d,h,c,f,p,g,s,o,r,a,l,u,C7,i),m.lineEnd=w,w()}return m}}var LNe=fT({point:function(t,e){this.stream.point(t*Ye,e*Ye)}});function INe(t){return fT({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function kNe(t,e,n,i,r){function s(o,a){return o*=i,a*=r,[e+t*o,n-t*a]}return s.invert=function(o,a){return[(o-e)/t*i,(n-a)/t*r]},s}function S7(t,e,n,i,r,s){if(!s)return kNe(t,e,n,i,r);var o=Ne(s),a=Te(s),l=o*t,u=a*t,c=o/t,d=a/t,h=(a*n-o*e)/t,f=(a*e+o*n)/t;function p(g,m){return g*=i,m*=r,[l*g-u*m+e,n-u*g-l*m]}return p.invert=function(g,m){return[i*(c*g-d*m+h),r*(f-d*g-c*m)]},p}function wl(t){return Wte(function(){return t})()}function Wte(t){var e,n=150,i=480,r=250,s=0,o=0,a=0,l=0,u=0,c,d=0,h=1,f=1,p=null,g=a7,m=null,y,v,C,w=n1,E=.5,b,S,_,A,D;function P(F){return _(F[0]*Ye,F[1]*Ye)}function L(F){return F=_.invert(F[0],F[1]),F&&[F[0]*hn,F[1]*hn]}P.stream=function(F){return A&&D===F?A:A=LNe(INe(c)(g(b(w(D=F)))))},P.preclip=function(F){return arguments.length?(g=F,p=void 0,M()):g},P.postclip=function(F){return arguments.length?(w=F,m=y=v=C=null,M()):w},P.clipAngle=function(F){return arguments.length?(g=+F?yNe(p=F*Ye):(p=null,a7),M()):p*hn},P.clipExtent=function(F){return arguments.length?(w=F==null?(m=y=v=C=null,n1):Ate(m=+F[0][0],y=+F[0][1],v=+F[1][0],C=+F[1][1]),M()):m==null?null:[[m,y],[v,C]]},P.scale=function(F){return arguments.length?(n=+F,O()):n},P.translate=function(F){return arguments.length?(i=+F[0],r=+F[1],O()):[i,r]},P.center=function(F){return arguments.length?(s=F[0]%360*Ye,o=F[1]%360*Ye,O()):[s*hn,o*hn]},P.rotate=function(F){return arguments.length?(a=F[0]%360*Ye,l=F[1]%360*Ye,u=F.length>2?F[2]%360*Ye:0,O()):[a*hn,l*hn,u*hn]},P.angle=function(F){return arguments.length?(d=F%360*Ye,O()):d*hn},P.reflectX=function(F){return arguments.length?(h=F?-1:1,O()):h<0},P.reflectY=function(F){return arguments.length?(f=F?-1:1,O()):f<0},P.precision=function(F){return arguments.length?(b=w7(S,E=F*F),M()):sr(E)},P.fitExtent=function(F,I){return pT(P,F,I)},P.fitSize=function(F,I){return vG(P,F,I)},P.fitWidth=function(F,I){return CG(P,F,I)},P.fitHeight=function(F,I){return wG(P,F,I)};function O(){var F=S7(n,0,0,h,f,d).apply(null,e(s,o)),I=S7(n,i-F[0],r-F[1],h,f,d);return c=xte(a,l,u),S=DF(e,I),_=DF(c,S),b=w7(S,E),M()}function M(){return A=D=null,P}return function(){return e=t.apply(this,arguments),P.invert=e.invert&&L,O()}}function SG(t){var e=0,n=qe/3,i=Wte(t),r=i(e,n);return r.parallels=function(s){return arguments.length?i(e=s[0]*Ye,n=s[1]*Ye):[e*hn,n*hn]},r}function GNe(t){var e=Ne(t);function n(i,r){return[i*e,Te(r)/e]}return n.invert=function(i,r){return[i/e,Wr(r*e)]},n}function $Ne(t,e){var n=Te(t),i=(n+Te(e))/2;if(ot(i)<Me)return GNe(t);var r=1+n*(2*i-n),s=sr(r)/i;function o(a,l){var u=sr(r-2*i*Te(l))/i;return[u*Te(a*=i),s-u*Ne(a)]}return o.invert=function(a,l){var u=s-l,c=ao(a,ot(u))*zs(u);return u*i<0&&(c-=qe*zs(a)*zs(u)),[c/i,Wr((r-(a*a+u*u)*i*i)/(2*i))]},o}function yx(){return SG($Ne).scale(155.424).center([0,33.6442])}function Vte(){return yx().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function HNe(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function WNe(){var t,e,n=Vte(),i,r=yx().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=yx().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(h,f){l=[h,f]}};function c(h){var f=h[0],p=h[1];return l=null,i.point(f,p),l||(s.point(f,p),l)||(a.point(f,p),l)}c.invert=function(h){var f=n.scale(),p=n.translate(),g=(h[0]-p[0])/f,m=(h[1]-p[1])/f;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?o:n).invert(h)},c.stream=function(h){return t&&e===h?t:t=HNe([n.stream(e=h),r.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),d()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var f=n.scale(),p=+h[0],g=+h[1];return i=n.translate(h).clipExtent([[p-.455*f,g-.238*f],[p+.455*f,g+.238*f]]).stream(u),s=r.translate([p-.307*f,g+.201*f]).clipExtent([[p-.425*f+Me,g+.12*f+Me],[p-.214*f-Me,g+.234*f-Me]]).stream(u),a=o.translate([p-.205*f,g+.212*f]).clipExtent([[p-.214*f+Me,g+.166*f+Me],[p-.115*f-Me,g+.234*f-Me]]).stream(u),d()},c.fitExtent=function(h,f){return pT(c,h,f)},c.fitSize=function(h,f){return vG(c,h,f)},c.fitWidth=function(h,f){return CG(c,h,f)},c.fitHeight=function(h,f){return wG(c,h,f)};function d(){return t=e=null,c}return c.scale(1070)}function Bte(t){return function(e,n){var i=Ne(e),r=Ne(n),s=t(i*r);return s===1/0?[2,0]:[s*r*Te(e),s*Te(n)]}}function GC(t){return function(e,n){var i=sr(e*e+n*n),r=t(i),s=Te(r),o=Ne(r);return[ao(e*s,i*o),Wr(i&&n*s/i)]}}var zte=Bte(function(t){return sr(2/(1+t))});zte.invert=GC(function(t){return 2*Wr(t/2)});function VNe(){return wl(zte).scale(124.75).clipAngle(180-.001)}var Ute=Bte(function(t){return(t=fte(t))&&t/Te(t)});Ute.invert=GC(function(t){return t});function BNe(){return wl(Ute).scale(79.4188).clipAngle(180-.001)}function gT(t,e){return[t,Qb(gG((an+e)/2))]}gT.invert=function(t,e){return[t,2*Km(hte(e))-an]};function zNe(){return jte(gT).scale(961/rr)}function jte(t){var e=wl(t),n=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,l,u;e.scale=function(d){return arguments.length?(i(d),c()):i()},e.translate=function(d){return arguments.length?(r(d),c()):r()},e.center=function(d){return arguments.length?(n(d),c()):n()},e.clipExtent=function(d){return arguments.length?(d==null?o=a=l=u=null:(o=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var d=qe*i(),h=e(uNe(e.rotate()).invert([0,0]));return s(o==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:t===gT?[[Math.max(h[0]-d,o),a],[Math.min(h[0]+d,l),u]]:[[o,Math.max(h[1]-d,a)],[l,Math.min(h[1]+d,u)]])}return c()}function Xw(t){return gG((an+t)/2)}function UNe(t,e){var n=Ne(t),i=t===e?Te(t):Qb(n/Ne(e))/Qb(Xw(e)/Xw(t)),r=n*YD(Xw(t),i)/i;if(!i)return gT;function s(o,a){r>0?a<-an+Me&&(a=-an+Me):a>an-Me&&(a=an-Me);var l=r/YD(Xw(a),i);return[l*Te(i*o),r-l*Ne(i*o)]}return s.invert=function(o,a){var l=r-a,u=zs(i)*sr(o*o+l*l),c=ao(o,ot(l))*zs(l);return l*i<0&&(c-=qe*zs(o)*zs(l)),[c/i,2*Km(YD(r/u,1/i))-an]},s}function jNe(){return SG(UNe).scale(109.5).parallels([30,30])}function vx(t,e){return[t,e]}vx.invert=vx;function YNe(){return wl(vx).scale(152.63)}function qNe(t,e){var n=Ne(t),i=t===e?Te(t):(n-Ne(e))/(e-t),r=n/i+t;if(ot(i)<Me)return vx;function s(o,a){var l=r-a,u=i*o;return[l*Te(u),r-l*Ne(u)]}return s.invert=function(o,a){var l=r-a,u=ao(o,ot(l))*zs(l);return l*i<0&&(u-=qe*zs(o)*zs(l)),[u/i,r-zs(i)*sr(o*o+l*l)]},s}function KNe(){return SG(qNe).scale(131.154).center([0,13.9389])}var $0=1.340264,H0=-.081106,W0=893e-6,V0=.003796,Cx=sr(3)/2,XNe=12;function Yte(t,e){var n=Wr(Cx*Te(e)),i=n*n,r=i*i*i;return[t*Ne(n)/(Cx*($0+3*H0*i+r*(7*W0+9*V0*i))),n*($0+H0*i+r*(W0+V0*i))]}Yte.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,s=0,o,a,l;s<XNe&&(a=n*($0+H0*i+r*(W0+V0*i))-e,l=$0+3*H0*i+r*(7*W0+9*V0*i),n-=o=a/l,i=n*n,r=i*i*i,!(ot(o)<Kb));++s);return[Cx*t*($0+3*H0*i+r*(7*W0+9*V0*i))/Ne(n),Wr(Te(n)/Cx)]};function QNe(){return wl(Yte).scale(177.158)}function qte(t,e){var n=Ne(e),i=Ne(t)*n;return[n*Te(t)/i,Te(e)/i]}qte.invert=GC(Km);function JNe(){return wl(qte).scale(144.049).clipAngle(60)}function ZNe(){var t=1,e=0,n=0,i=1,r=1,s=0,o,a,l=null,u,c,d,h=1,f=1,p=fT({point:function(w,E){var b=C([w,E]);this.stream.point(b[0],b[1])}}),g=n1,m,y;function v(){return h=t*i,f=t*r,m=y=null,C}function C(w){var E=w[0]*h,b=w[1]*f;if(s){var S=b*o-E*a;E=E*o+b*a,b=S}return[E+e,b+n]}return C.invert=function(w){var E=w[0]-e,b=w[1]-n;if(s){var S=b*o+E*a;E=E*o-b*a,b=S}return[E/h,b/f]},C.stream=function(w){return m&&y===w?m:m=p(g(y=w))},C.postclip=function(w){return arguments.length?(g=w,l=u=c=d=null,v()):g},C.clipExtent=function(w){return arguments.length?(g=w==null?(l=u=c=d=null,n1):Ate(l=+w[0][0],u=+w[0][1],c=+w[1][0],d=+w[1][1]),v()):l==null?null:[[l,u],[c,d]]},C.scale=function(w){return arguments.length?(t=+w,v()):t},C.translate=function(w){return arguments.length?(e=+w[0],n=+w[1],v()):[e,n]},C.angle=function(w){return arguments.length?(s=w%360*Ye,a=Te(s),o=Ne(s),v()):s*hn},C.reflectX=function(w){return arguments.length?(i=w?-1:1,v()):i<0},C.reflectY=function(w){return arguments.length?(r=w?-1:1,v()):r<0},C.fitExtent=function(w,E){return pT(C,w,E)},C.fitSize=function(w,E){return vG(C,w,E)},C.fitWidth=function(w,E){return CG(C,w,E)},C.fitHeight=function(w,E){return wG(C,w,E)},C}function Kte(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}Kte.invert=function(t,e){var n=e,i=25,r;do{var s=n*n,o=s*s;n-=r=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(ot(r)>Me&&--i>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function eLe(){return wl(Kte).scale(175.295)}function Xte(t,e){return[Ne(e)*Te(t),Te(e)]}Xte.invert=GC(Wr);function tLe(){return wl(Xte).scale(249.5).clipAngle(90+Me)}function Qte(t,e){var n=Ne(e),i=1+Ne(t)*n;return[n*Te(t)/i,Te(e)/i]}Qte.invert=GC(function(t){return 2*Km(t)});function nLe(){return wl(Qte).scale(250).clipAngle(142)}function Jte(t,e){return[Qb(gG((an+e)/2)),-t]}Jte.invert=function(t,e){return[-e,2*Km(hte(t))-an]};function iLe(){var t=jte(Jte),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var rLe=Math.abs,HF=Math.cos,wx=Math.sin,sLe=1e-6,Zte=Math.PI,WF=Zte/2,E7=oLe(2);function b7(t){return t>1?WF:t<-1?-WF:Math.asin(t)}function oLe(t){return t>0?Math.sqrt(t):0}function aLe(t,e){var n=t*wx(e),i=30,r;do e-=r=(e+wx(e)-n)/(1+HF(e));while(rLe(r)>sLe&&--i>0);return e/2}function lLe(t,e,n){function i(r,s){return[t*r*HF(s=aLe(n,s)),e*wx(s)]}return i.invert=function(r,s){return s=b7(s/e),[r/(t*HF(s)),b7((2*s+wx(2*s))/n)]},i}var uLe=lLe(E7/WF,E7,Zte);function cLe(){return wl(uLe).scale(169.529)}const dLe=Hte(),VF=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function hLe(t,e){return function n(){const i=e();return i.type=t,i.path=Hte().projection(i),i.copy=i.copy||function(){const r=n();return VF.forEach(s=>{i[s]&&r[s](i[s]())}),r.path.pointRadius(i.path.pointRadius()),r},SZ(i)}}function EG(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Sx[t]=hLe(t,e),this):Sx[t]||null}function ene(t){return t&&t.path||dLe}const Sx={albers:Vte,albersusa:WNe,azimuthalequalarea:VNe,azimuthalequidistant:BNe,conicconformal:jNe,conicequalarea:yx,conicequidistant:KNe,equalEarth:QNe,equirectangular:YNe,gnomonic:JNe,identity:ZNe,mercator:zNe,mollweide:cLe,naturalEarth1:eLe,orthographic:tLe,stereographic:nLe,transversemercator:iLe};for(const t in Sx)EG(t,Sx[t]);function fLe(){}const Ol=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function tne(){var t=1,e=1,n=a;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],d=[];return s(l,u,h=>{n(h,l,u),pLe(h)>0?c.push([h]):d.push(h)}),d.forEach(h=>{for(var f=0,p=c.length,g;f<p;++f)if(gLe((g=c[f])[0],h)!==-1){g.push(h);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var d=new Array,h=new Array,f,p,g,m,y,v;for(f=p=-1,m=l[0]>=u,Ol[m<<1].forEach(C);++f<t-1;)g=m,m=l[f+1]>=u,Ol[g|m<<1].forEach(C);for(Ol[m<<0].forEach(C);++p<e-1;){for(f=-1,m=l[p*t+t]>=u,y=l[p*t]>=u,Ol[m<<1|y<<2].forEach(C);++f<t-1;)g=m,m=l[p*t+t+f+1]>=u,v=y,y=l[p*t+f+1]>=u,Ol[g|m<<1|y<<2|v<<3].forEach(C);Ol[m|y<<3].forEach(C)}for(f=-1,y=l[p*t]>=u,Ol[y<<2].forEach(C);++f<t-1;)v=y,y=l[p*t+f+1]>=u,Ol[y<<2|v<<3].forEach(C);Ol[y<<3].forEach(C);function C(w){var E=[w[0][0]+f,w[0][1]+p],b=[w[1][0]+f,w[1][1]+p],S=o(E),_=o(b),A,D;(A=h[S])?(D=d[_])?(delete h[A.end],delete d[D.start],A===D?(A.ring.push(b),c(A.ring)):d[A.start]=h[D.end]={start:A.start,end:D.end,ring:A.ring.concat(D.ring)}):(delete h[A.end],A.ring.push(b),h[A.end=_]=A):(A=d[_])?(D=h[S])?(delete d[A.start],delete h[D.end],A===D?(A.ring.push(b),c(A.ring)):d[D.start]=h[A.end]={start:D.start,end:A.end,ring:D.ring.concat(A.ring)}):(delete d[A.start],A.ring.unshift(E),d[A.start=S]=A):d[S]=h[_]={start:S,end:_,ring:[E,b]}}}function o(l){return l[0]*2+l[1]*(t+1)*4}function a(l,u,c){l.forEach(d=>{var h=d[0],f=d[1],p=h|0,g=f|0,m,y=u[g*t+p];h>0&&h<t&&p===h&&(m=u[g*t+p-1],d[0]=h+(c-m)/(y-m)-.5),f>0&&f<e&&g===f&&(m=u[(g-1)*t+p],d[1]=f+(c-m)/(y-m)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[t,e];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||U("invalid size"),t=u,e=c,i},i.smooth=function(l){return arguments.length?(n=l?a:fLe,i):n===a},i}function pLe(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function gLe(t,e){for(var n=-1,i=e.length,r;++n<i;)if(r=mLe(t,e[n]))return r;return 0}function mLe(t,e){for(var n=e[0],i=e[1],r=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],u=l[0],c=l[1],d=t[a],h=d[0],f=d[1];if(yLe(l,d,e))return 0;c>i!=f>i&&n<(h-u)*(i-c)/(f-c)+u&&(r=-r)}return r}function yLe(t,e,n){var i;return vLe(t,e,n)&&CLe(t[i=+(t[0]===e[0])],n[i],e[i])}function vLe(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function CLe(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function nne(t,e,n){return function(i){var r=tl(i),s=n?Math.min(r[0],0):r[0],o=r[1],a=o-s,l=e?Wc(s,o,t):a/(t+1);return ps(s+l,o,l)}}function bG(t){V.call(this,null,t)}bG.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};le(bG,V,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,r=t.field||Li,s=tne().smooth(t.smooth!==!1),o=t.thresholds||wLe(i,r,t),a=t.as===null?null:t.as||"contour",l=[];return i.forEach(u=>{const c=r(u),d=s.size([c.width,c.height])(c.values,j(o)?o:o(c.values));SLe(d,c,u,t),d.forEach(h=>{l.push(FR(u,vt(a!=null?{[a]:h}:h)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function wLe(t,e,n){const i=nne(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(t.map(r=>bh(e(r).values)))}function SLe(t,e,n,i){let r=i.scale||e.scale,s=i.translate||e.translate;if(Ue(r)&&(r=r(n,i)),Ue(s)&&(s=s(n,i)),(r===1||r==null)&&!s)return;const o=(ft(r)?r:r[0])||1,a=(ft(r)?r:r[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;t.forEach(ine(e,o,a,l,u))}function ine(t,e,n,i,r){const s=t.x1||0,o=t.y1||0,a=e*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*e+i,d[1]=(d[1]-o)*n+r}return function(d){return d.coordinates.forEach(l),d}}function x7(t,e,n){const i=t>=0?t:h3(e,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function JD(t){return Ue(t)?t:Ii(+t)}function rne(){var t=l=>l[0],e=l=>l[1],n=km,i=[-1,-1],r=960,s=500,o=2;function a(l,u){const c=x7(i[0],l,t)>>o,d=x7(i[1],l,e)>>o,h=c?c+2:0,f=d?d+2:0,p=2*h+(r>>o),g=2*f+(s>>o),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;l.forEach(w=>{const E=h+(+t(w)>>o),b=f+(+e(w)>>o);E>=0&&E<p&&b>=0&&b<g&&(m[E+b*p]+=+n(w))}),c>0&&d>0?(tp(p,g,m,y,c),np(p,g,y,m,d),tp(p,g,m,y,c),np(p,g,y,m,d),tp(p,g,m,y,c),np(p,g,y,m,d)):c>0?(tp(p,g,m,y,c),tp(p,g,y,m,c),tp(p,g,m,y,c),v=y):d>0&&(np(p,g,m,y,d),np(p,g,y,m,d),np(p,g,m,y,d),v=y);const C=u?Math.pow(2,-2*o):1/_X(v);for(let w=0,E=p*g;w<E;++w)v[w]*=C;return{values:v,scale:1<<o,width:p,height:g,x1:h,y1:f,x2:h+(r>>o),y2:f+(s>>o)}}return a.x=function(l){return arguments.length?(t=JD(l),a):t},a.y=function(l){return arguments.length?(e=JD(l),a):e},a.weight=function(l){return arguments.length?(n=JD(l),a):n},a.size=function(l){if(!arguments.length)return[r,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||U("invalid size"),r=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||U("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=de(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&U("invalid bandwidth"),i=l,a):i},a}function tp(t,e,n,i,r){const s=(r<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+r;++a)a<t&&(l+=n[a+o*t]),a>=r&&(a>=s&&(l-=n[a-s+o*t]),i[a-r+o*t]=l/Math.min(a+1,t-1+s-a,s))}function np(t,e,n,i,r){const s=(r<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=n[o+a*t]),a>=r&&(a>=s&&(l-=n[o+(a-s)*t]),i[o+(a-r)*t]=l/Math.min(a+1,e-1+s-a,s))}function xG(t){V.call(this,null,t)}xG.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ELe=["x","y","weight","size","cellSize","bandwidth"];function sne(t,e){return ELe.forEach(n=>e[n]!=null?t[n](e[n]):0),t}le(xG,V,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,r=bLe(i,t.groupby),s=(t.groupby||[]).map(un),o=sne(rne(),t),a=t.as||"grid",l=[];function u(c,d){for(let h=0;h<s.length;++h)c[s[h]]=d[h];return c}return l=r.map(c=>vt(u({[a]:o(c,t.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function bLe(t,e){var n=[],i=c=>c(a),r,s,o,a,l,u;if(e==null)n.push(t);else for(r={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function _G(t){V.call(this,null,t)}_G.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};le(_G,V,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=tne().smooth(t.smooth!==!1),r=t.values,s=t.thresholds||nne(t.count||10,t.nice,!!r),o=t.size,a,l;return r||(r=e.materialize(e.SOURCE).source,a=sne(rne(),t)(r,!0),l=ine(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],r=a.values),s=j(s)?s:s(r),r=i.size(o)(r,s),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(vt),n}});const BF="Feature",RG="FeatureCollection",xLe="MultiPoint";function TG(t){V.call(this,null,t)}TG.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};le(TG,V,{transform(t,e){var n=this._features,i=this._points,r=t.fields,s=r&&r[0],o=r&&r[1],a=t.geojson||!r&&Li,l=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(Ai(a))||s&&e.modified(Ai(s))||o&&e.modified(Ai(o)),(!this.value||u)&&(l=e.SOURCE,this._features=n=[],this._points=i=[]),a&&e.visit(l,c=>n.push(a(c))),s&&o&&(e.visit(l,c=>{var d=s(c),h=o(c);d!=null&&h!=null&&(d=+d)===d&&(h=+h)===h&&i.push([d,h])}),n=n.concat({type:BF,geometry:{type:xLe,coordinates:i}})),this.value={type:RG,features:n}}});function AG(t){V.call(this,null,t)}AG.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};le(AG,V,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.field||Li,s=t.as||"path",o=n.SOURCE;!i||t.modified()?(this.value=i=ene(t.projection),n.materialize().reflow()):o=r===Li||e.modified(r.fields)?n.ADD_MOD:n.ADD;const a=_Le(i,t.pointRadius);return n.visit(o,l=>l[s]=i(r(l))),i.pointRadius(a),n.modifies(s)}});function _Le(t,e){const n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function DG(t){V.call(this,null,t)}DG.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};le(DG,V,{transform(t,e){var n=t.projection,i=t.fields[0],r=t.fields[1],s=t.as||["x","y"],o=s[0],a=s[1],l;function u(c){const d=n([i(c),r(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(l=e.modified(i.fields)||e.modified(r.fields),e.visit(l?e.ADD_MOD:e.ADD,u)),e.modifies(s)}});function OG(t){V.call(this,null,t)}OG.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};le(OG,V,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.as||"shape",s=n.ADD;return(!i||t.modified())&&(this.value=i=RLe(ene(t.projection),t.field||Gr("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[r]=i),n.modifies(r)}});function RLe(t,e,n){const i=n==null?r=>t(e(r)):r=>{var s=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(s),o};return i.context=r=>(t.context(r),i),i}function PG(t){V.call(this,[],t),this.generator=CNe()}PG.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};le(PG,V,{transform(t,e){var n=this.value,i=this.generator,r;if(!n.length||t.modified())for(const s in t)Ue(i[s])&&i[s](t[s]);return r=i(),n.length?e.mod.push(wQ(n[0],r)):e.add.push(vt(r)),n[0]=r,e}});function FG(t){V.call(this,null,t)}FG.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};le(FG,V,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,i=t.resolve==="shared",r=t.field||Li,s=ALe(t.opacity,t),o=TLe(t.color,t),a=t.as||"image",l={$x:0,$y:0,$value:0,$max:i?bh(n.map(u=>bh(r(u).values))):0};return n.forEach(u=>{const c=r(u),d=ze({},u,l);i||(d.$max=bh(c.values||[])),u[a]=DLe(c,d,o.dep?o:Ii(o(d)),s.dep?s:Ii(s(d)))}),e.reflow(!0).modifies(a)}});function TLe(t,e){let n;return Ue(t)?(n=i=>zc(t(i,e)),n.dep=one(t)):n=Ii(zc(t||"#888")),n}function ALe(t,e){let n;return Ue(t)?(n=i=>t(i,e),n.dep=one(t)):t?n=Ii(t):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function one(t){if(!Ue(t))return!1;const e=ta(Ai(t));return e.$x||e.$y||e.$value||e.$max}function DLe(t,e,n,i){const r=t.width,s=t.height,o=t.x1||0,a=t.y1||0,l=t.x2||r,u=t.y2||s,c=t.values,d=c?m=>c[m]:tc,h=Dc(l-o,u-a),f=h.getContext("2d"),p=f.getImageData(0,0,l-o,u-a),g=p.data;for(let m=a,y=0;m<u;++m){e.$y=m-a;for(let v=o,C=m*r;v<l;++v,y+=4){e.$x=v-o,e.$value=d(v+C);const w=n(e);g[y+0]=w.r,g[y+1]=w.g,g[y+2]=w.b,g[y+3]=~~(255*i(e))}}return f.putImageData(p,0,0),h}function ane(t){V.call(this,null,t),this.modified(!0)}le(ane,V,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=PLe(t.type),VF.forEach(i=>{t[i]!=null&&_7(n,i,t[i])})):VF.forEach(i=>{t.modified(i)&&_7(n,i,t[i])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&OLe(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function OLe(t,e){const n=FLe(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function PLe(t){const e=EG((t||"mercator").toLowerCase());return e||U("Unrecognized projection type: "+t),e()}function _7(t,e,n){Ue(t[e])&&t[e](n)}function FLe(t){return t=de(t),t.length===1?t[0]:{type:RG,features:t.reduce((e,n)=>e.concat(MLe(n)),[])}}function MLe(t){return t.type===RG?t.features:de(t).filter(e=>e!=null).map(e=>e.type===BF?e:{type:BF,geometry:e})}const NLe=Object.freeze(Object.defineProperty({__proto__:null,contour:_G,geojson:TG,geopath:AG,geopoint:DG,geoshape:OG,graticule:PG,heatmap:FG,isocontour:bG,kde2d:xG,projection:ane},Symbol.toStringTag,{value:"Module"}));function LLe(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-t)*i,u=(u/o-e)*i,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return r.initialize=function(s){n=s},r.x=function(s){return arguments.length?(t=+s,r):t},r.y=function(s){return arguments.length?(e=+s,r):e},r.strength=function(s){return arguments.length?(i=+s,r):i},r}function ILe(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return lne(this.cover(e,n),e,n,t)}function lne(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s=t._root,o={data:i},a=t._x0,l=t._y0,u=t._x1,c=t._y1,d,h,f,p,g,m,y,v;if(!s)return t._root=o,t;for(;s.length;)if((g=e>=(d=(a+u)/2))?a=d:u=d,(m=n>=(h=(l+c)/2))?l=h:c=h,r=s,!(s=s[y=m<<1|g]))return r[y]=o,t;if(f=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===f&&n===p)return o.next=s,r?r[y]=o:t._root=o,t;do r=r?r[y]=new Array(4):t._root=new Array(4),(g=e>=(d=(a+u)/2))?a=d:u=d,(m=n>=(h=(l+c)/2))?l=h:c=h;while((y=m<<1|g)===(v=(p>=h)<<1|f>=d));return r[v]=s,r[y]=o,t}function kLe(t){var e,n,i=t.length,r,s,o=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=r,a[n]=s,r<l&&(l=r),r>c&&(c=r),s<u&&(u=s),s>d&&(d=s));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<i;++n)lne(this,o[n],a[n],t[n]);return this}function GLe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var o=r-n||1,a=this._root,l,u;n>t||t>=r||i>e||e>=s;)switch(u=(e<i)<<1|t<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:r=n+o,s=i+o;break;case 1:n=r-o,s=i+o;break;case 2:r=n+o,i=s-o;break;case 3:n=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this}function $Le(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function HLe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Xi(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function WLe(t,e,n){var i,r=this._x0,s=this._y0,o,a,l,u,c=this._x1,d=this._y1,h=[],f=this._root,p,g;for(f&&h.push(new Xi(f,r,s,c,d)),n==null?n=1/0:(r=t-n,s=e-n,c=t+n,d=e+n,n*=n);p=h.pop();)if(!(!(f=p.node)||(o=p.x0)>c||(a=p.y0)>d||(l=p.x1)<r||(u=p.y1)<s))if(f.length){var m=(o+l)/2,y=(a+u)/2;h.push(new Xi(f[3],m,y,l,u),new Xi(f[2],o,y,m,u),new Xi(f[1],m,a,l,y),new Xi(f[0],o,a,m,y)),(g=(e>=y)<<1|t>=m)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-g],h[h.length-1-g]=p)}else{var v=t-+this._x.call(null,f.data),C=e-+this._y.call(null,f.data),w=v*v+C*C;if(w<n){var E=Math.sqrt(n=w);r=t-E,s=e-E,c=t+E,d=e+E,i=f.data}}return i}function VLe(t){if(isNaN(c=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,n=this._root,i,r,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,d,h,f,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(g=d>=(f=(a+u)/2))?a=f:u=f,e=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(i=e,y=m)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,r?(s?r.next=s:delete r.next,this):e?(s?e[m]=s:delete e[m],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[y]=n:this._root=n),this):(this._root=s,this)}function BLe(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function zLe(){return this._root}function ULe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function jLe(t){var e=[],n,i=this._root,r,s,o,a,l;for(i&&e.push(new Xi(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&i.length){var u=(s+a)/2,c=(o+l)/2;(r=i[3])&&e.push(new Xi(r,u,c,a,l)),(r=i[2])&&e.push(new Xi(r,s,c,u,l)),(r=i[1])&&e.push(new Xi(r,u,o,a,c)),(r=i[0])&&e.push(new Xi(r,s,o,u,c))}return this}function YLe(t){var e=[],n=[],i;for(this._root&&e.push(new Xi(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(o+l)/2,d=(a+u)/2;(s=r[0])&&e.push(new Xi(s,o,a,c,d)),(s=r[1])&&e.push(new Xi(s,c,a,l,d)),(s=r[2])&&e.push(new Xi(s,o,d,c,u)),(s=r[3])&&e.push(new Xi(s,c,d,l,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function qLe(t){return t[0]}function KLe(t){return arguments.length?(this._x=t,this):this._x}function XLe(t){return t[1]}function QLe(t){return arguments.length?(this._y=t,this):this._y}function MG(t,e,n){var i=new NG(e??qLe,n??XLe,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function NG(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function R7(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var fr=MG.prototype=NG.prototype;fr.copy=function(){var t=new NG(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=R7(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=R7(i));return t};fr.add=ILe;fr.addAll=kLe;fr.cover=GLe;fr.data=$Le;fr.extent=HLe;fr.find=WLe;fr.remove=VLe;fr.removeAll=BLe;fr.root=zLe;fr.size=ULe;fr.visit=jLe;fr.visitAfter=YLe;fr.x=KLe;fr.y=QLe;function Ji(t){return function(){return t}}function gc(t){return(t()-.5)*1e-6}function JLe(t){return t.x+t.vx}function ZLe(t){return t.y+t.vy}function eIe(t){var e,n,i,r=1,s=1;typeof t!="function"&&(t=Ji(t==null?1:+t));function o(){for(var u,c=e.length,d,h,f,p,g,m,y=0;y<s;++y)for(d=MG(e,JLe,ZLe).visitAfter(a),u=0;u<c;++u)h=e[u],g=n[h.index],m=g*g,f=h.x+h.vx,p=h.y+h.vy,d.visit(v);function v(C,w,E,b,S){var _=C.data,A=C.r,D=g+A;if(_){if(_.index>h.index){var P=f-_.x-_.vx,L=p-_.y-_.vy,O=P*P+L*L;O<D*D&&(P===0&&(P=gc(i),O+=P*P),L===0&&(L=gc(i),O+=L*L),O=(D-(O=Math.sqrt(O)))/O*r,h.vx+=(P*=O)*(D=(A*=A)/(m+A)),h.vy+=(L*=O)*D,_.vx-=P*(D=1-D),_.vy-=L*D)}return}return w>f+D||b<f-D||E>p+D||S<p-D}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,d;for(n=new Array(c),u=0;u<c;++u)d=e[u],n[d.index]=+t(d,u,e)}}return o.initialize=function(u,c){e=u,i=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(r=+u,o):r},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Ji(+u),l(),o):t},o}function tIe(t){return t.index}function T7(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function nIe(t){var e=tIe,n=d,i,r=Ji(30),s,o,a,l,u,c=1;t==null&&(t=[]);function d(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function h(m){for(var y=0,v=t.length;y<c;++y)for(var C=0,w,E,b,S,_,A,D;C<v;++C)w=t[C],E=w.source,b=w.target,S=b.x+b.vx-E.x-E.vx||gc(u),_=b.y+b.vy-E.y-E.vy||gc(u),A=Math.sqrt(S*S+_*_),A=(A-s[C])/A*m*i[C],S*=A,_*=A,b.vx-=S*(D=l[C]),b.vy-=_*D,E.vx+=S*(D=1-D),E.vy+=_*D}function f(){if(o){var m,y=o.length,v=t.length,C=new Map(o.map((E,b)=>[e(E,b,o),E])),w;for(m=0,a=new Array(y);m<v;++m)w=t[m],w.index=m,typeof w.source!="object"&&(w.source=T7(C,w.source)),typeof w.target!="object"&&(w.target=T7(C,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)w=t[m],l[m]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);i=new Array(v),p(),s=new Array(v),g()}}function p(){if(o)for(var m=0,y=t.length;m<y;++m)i[m]=+n(t[m],m,t)}function g(){if(o)for(var m=0,y=t.length;m<y;++m)s[m]=+r(t[m],m,t)}return h.initialize=function(m,y){o=m,u=y,f()},h.links=function(m){return arguments.length?(t=m,f(),h):t},h.id=function(m){return arguments.length?(e=m,h):e},h.iterations=function(m){return arguments.length?(c=+m,h):c},h.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Ji(+m),p(),h):n},h.distance=function(m){return arguments.length?(r=typeof m=="function"?m:Ji(+m),g(),h):r},h}var iIe={value:()=>{}};function une(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new tE(n)}function tE(t){this._=t}function rIe(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}tE.prototype=une.prototype={constructor:tE,on:function(t,e){var n=this._,i=rIe(t+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(t=i[s]).type)&&(r=sIe(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=A7(n[r],t.name,e);else if(e==null)for(r in n)n[r]=A7(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new tE(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function sIe(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function A7(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=iIe,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var zg=0,p0=0,Oy=0,cne=1e3,Ex,g0,bx=0,Qh=0,mT=0,r1=typeof performance=="object"&&performance.now?performance:Date,dne=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function LG(){return Qh||(dne(oIe),Qh=r1.now()+mT)}function oIe(){Qh=0}function xx(){this._call=this._time=this._next=null}xx.prototype=hne.prototype={constructor:xx,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?LG():+n)+(e==null?0:+e),!this._next&&g0!==this&&(g0?g0._next=this:Ex=this,g0=this),this._call=t,this._time=n,zF()},stop:function(){this._call&&(this._call=null,this._time=1/0,zF())}};function hne(t,e,n){var i=new xx;return i.restart(t,e,n),i}function aIe(){LG(),++zg;for(var t=Ex,e;t;)(e=Qh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--zg}function D7(){Qh=(bx=r1.now())+mT,zg=p0=0;try{aIe()}finally{zg=0,uIe(),Qh=0}}function lIe(){var t=r1.now(),e=t-bx;e>cne&&(mT-=e,bx=t)}function uIe(){for(var t,e=Ex,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ex=n);g0=t,zF(i)}function zF(t){if(!zg){p0&&(p0=clearTimeout(p0));var e=t-Qh;e>24?(t<1/0&&(p0=setTimeout(D7,t-r1.now()-mT)),Oy&&(Oy=clearInterval(Oy))):(Oy||(bx=r1.now(),Oy=setInterval(lIe,cne)),zg=1,dne(D7))}}function cIe(t,e,n){var i=new xx,r=e;return e==null?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(s,o,a){o=+o,a=a==null?LG():+a,i._restart(function l(u){u+=r,i._restart(l,r+=o,a),s(u)},o,a)},i.restart(t,e,n),i)}const dIe=1664525,hIe=1013904223,O7=4294967296;function fIe(){let t=1;return()=>(t=(dIe*t+hIe)%O7)/O7}function pIe(t){return t.x}function gIe(t){return t.y}var mIe=10,yIe=Math.PI*(3-Math.sqrt(5));function vIe(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,a=new Map,l=hne(d),u=une("tick","end"),c=fIe();t==null&&(t=[]);function d(){h(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function h(g){var m,y=t.length,v;g===void 0&&(g=1);for(var C=0;C<g;++C)for(n+=(s-n)*r,a.forEach(function(w){w(n)}),m=0;m<y;++m)v=t[m],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return e}function f(){for(var g=0,m=t.length,y;g<m;++g){if(y=t[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=mIe*Math.sqrt(.5+g),C=g*yIe;y.x=v*Math.cos(C),y.y=v*Math.sin(C)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(t,c),g}return f(),e={tick:h,restart:function(){return l.restart(d),e},stop:function(){return l.stop(),e},nodes:function(g){return arguments.length?(t=g,f(),a.forEach(p),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(i=+g,e):i},alphaDecay:function(g){return arguments.length?(r=+g,e):+r},alphaTarget:function(g){return arguments.length?(s=+g,e):s},velocityDecay:function(g){return arguments.length?(o=1-g,e):1-o},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),e):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),e):a.get(g)},find:function(g,m,y){var v=0,C=t.length,w,E,b,S,_;for(y==null?y=1/0:y*=y,v=0;v<C;++v)S=t[v],w=g-S.x,E=m-S.y,b=w*w+E*E,b<y&&(_=S,y=b);return _},on:function(g,m){return arguments.length>1?(u.on(g,m),e):u.on(g)}}}function CIe(){var t,e,n,i,r=Ji(-30),s,o=1,a=1/0,l=.81;function u(f){var p,g=t.length,m=MG(t,pIe,gIe).visitAfter(d);for(i=f,p=0;p<g;++p)e=t[p],m.visit(h)}function c(){if(t){var f,p=t.length,g;for(s=new Array(p),f=0;f<p;++f)g=t[f],s[g.index]=+r(g,f,t)}}function d(f){var p=0,g,m,y=0,v,C,w;if(f.length){for(v=C=w=0;w<4;++w)(g=f[w])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,C+=m*g.y);f.x=v/y,f.y=C/y}else{g=f,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}f.value=p}function h(f,p,g,m){if(!f.value)return!0;var y=f.x-e.x,v=f.y-e.y,C=m-p,w=y*y+v*v;if(C*C/l<w)return w<a&&(y===0&&(y=gc(n),w+=y*y),v===0&&(v=gc(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),e.vx+=y*f.value*i/w,e.vy+=v*f.value*i/w),!0;if(f.length||w>=a)return;(f.data!==e||f.next)&&(y===0&&(y=gc(n),w+=y*y),v===0&&(v=gc(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do f.data!==e&&(C=s[f.data.index]*i/w,e.vx+=y*C,e.vy+=v*C);while(f=f.next)}return u.initialize=function(f,p){t=f,n=p,c()},u.strength=function(f){return arguments.length?(r=typeof f=="function"?f:Ji(+f),c(),u):r},u.distanceMin=function(f){return arguments.length?(o=f*f,u):Math.sqrt(o)},u.distanceMax=function(f){return arguments.length?(a=f*f,u):Math.sqrt(a)},u.theta=function(f){return arguments.length?(l=f*f,u):Math.sqrt(l)},u}function wIe(t){var e=Ji(.1),n,i,r;typeof t!="function"&&(t=Ji(t==null?0:+t));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(r[l]-c.x)*i[l]*a}function o(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Ji(+a),o(),s):e},s.x=function(a){return arguments.length?(t=typeof a=="function"?a:Ji(+a),o(),s):t},s}function SIe(t){var e=Ji(.1),n,i,r;typeof t!="function"&&(t=Ji(t==null?0:+t));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(r[l]-c.y)*i[l]*a}function o(){if(n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Ji(+a),o(),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:Ji(+a),o(),s):t},s}const P7={center:LLe,collide:eIe,nbody:CIe,link:nIe,x:wIe,y:SIe},m0="forces",UF=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],EIe=["static","iterations"],fne=["x","y","vx","vy"];function IG(t){V.call(this,null,t)}IG.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:fne}]};le(IG,V,{transform(t,e){var n=this.value,i=e.changed(e.ADD_REM),r=t.modified(UF),s=t.iterations||300;if(n?(i&&(e.modifies("index"),n.nodes(e.source)),(r||e.changed(e.MOD))&&pne(n,t,0,e)):(this.value=n=xIe(e.source,t),n.on("tick",bIe(e.dataflow,this)),t.static||(i=!0,n.tick()),e.modifies("index")),r||i||t.modified(EIe)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return e.StopPropagation}return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==m0||c.op._argval.force!=="link")){for(var i=c.op._argops,r=0,s=i.length,o;r<s;++r)if(i[r].name==="links"&&(o=i[r].op.source)){n.pulse(o,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(fne)}});function bIe(t,e){return()=>t.touch(e).run()}function xIe(t,e){const n=vIe(t),i=n.stop,r=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,r()),n.stop=()=>(s=!0,i()),pne(n,e,!0).on("end",()=>s=!0)}function pne(t,e,n,i){var r=de(e.forces),s,o,a,l;for(s=0,o=UF.length;s<o;++s)a=UF[s],a!==m0&&e.modified(a)&&t[a](e[a]);for(s=0,o=r.length;s<o;++s)l=m0+s,a=n||e.modified(m0,s)?RIe(r[s]):i&&_Ie(r[s],i)?t.force(l):null,a&&t.force(l,a);for(o=t.numForces||0;s<o;++s)t.force(m0+s,null);return t.numForces=r.length,t}function _Ie(t,e){var n,i;for(n in t)if(Ue(i=t[n])&&e.modified(Ai(i)))return 1;return 0}function RIe(t){var e,n;Ae(P7,t.force)||U("Unrecognized force: "+t.force),e=P7[t.force]();for(n in t)Ue(e[n])&&TIe(e[n],t[n],t);return e}function TIe(t,e,n){t(Ue(e)?i=>e(i,n):e)}const AIe=Object.freeze(Object.defineProperty({__proto__:null,force:IG},Symbol.toStringTag,{value:"Module"}));function DIe(t,e){return t.parent===e.parent?1:2}function OIe(t){return t.reduce(PIe,0)/t.length}function PIe(t,e){return t+e.x}function FIe(t){return 1+t.reduce(MIe,0)}function MIe(t,e){return Math.max(t,e.y)}function NIe(t){for(var e;e=t.children;)t=e[0];return t}function LIe(t){for(var e;e=t.children;)t=e[e.length-1];return t}function IIe(){var t=DIe,e=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(h){var f=h.children;f?(h.x=OIe(f),h.y=FIe(f)):(h.x=o?a+=t(h,o):0,h.y=0,o=h)});var l=NIe(s),u=LIe(s),c=l.x-t(l,u)/2,d=u.x+t(u,l)/2;return s.eachAfter(i?function(h){h.x=(h.x-s.x)*e,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-c)/(d-c)*e,h.y=(1-(s.y?h.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(t=s,r):t},r.size=function(s){return arguments.length?(i=!1,e=+s[0],n=+s[1],r):i?null:[e,n]},r.nodeSize=function(s){return arguments.length?(i=!0,e=+s[0],n=+s[1],r):i?[e,n]:null},r}function kIe(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function GIe(){return this.eachAfter(kIe)}function $Ie(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function HIe(t,e){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(t.call(e,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function WIe(t,e){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)t.call(e,n,++l,this);return this}function VIe(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function BIe(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function zIe(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function UIe(t){for(var e=this,n=jIe(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function jIe(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function YIe(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function qIe(){return Array.from(this)}function KIe(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function XIe(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*QIe(){var t=this,e,n=[t],i,r,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function kG(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=e3e)):e===void 0&&(e=ZIe);for(var n=new Ug(t),i,r=[n],s,o,a,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new Ug(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(gne)}function JIe(){return kG(this).eachBefore(t3e)}function ZIe(t){return t.children}function e3e(t){return Array.isArray(t)?t[1]:null}function t3e(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function gne(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Ug(t){this.data=t,this.depth=this.height=0,this.parent=null}Ug.prototype=kG.prototype={constructor:Ug,count:GIe,each:$Ie,eachAfter:WIe,eachBefore:HIe,find:VIe,sum:BIe,sort:zIe,path:UIe,ancestors:YIe,descendants:qIe,leaves:KIe,links:XIe,copy:JIe,[Symbol.iterator]:QIe};function nE(t){return t==null?null:mne(t)}function mne(t){if(typeof t!="function")throw new Error;return t}function nh(){return 0}function hp(t){return function(){return t}}const n3e=1664525,i3e=1013904223,F7=4294967296;function r3e(){let t=1;return()=>(t=(n3e*t+i3e)%F7)/F7}function s3e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function o3e(t,e){let n=t.length,i,r;for(;n;)r=e()*n--|0,i=t[n],t[n]=t[r],t[r]=i;return t}function a3e(t,e){for(var n=0,i=(t=o3e(Array.from(t),e)).length,r=[],s,o;n<i;)s=t[n],o&&yne(o,s)?++n:(o=u3e(r=l3e(r,s)),n=0);return o}function l3e(t,e){var n,i;if(ZD(e,t))return[e];for(n=0;n<t.length;++n)if(Qw(e,t[n])&&ZD(y0(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Qw(y0(t[n],t[i]),e)&&Qw(y0(t[n],e),t[i])&&Qw(y0(t[i],e),t[n])&&ZD(vne(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Qw(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function yne(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function ZD(t,e){for(var n=0;n<e.length;++n)if(!yne(t,e[n]))return!1;return!0}function u3e(t){switch(t.length){case 1:return c3e(t[0]);case 2:return y0(t[0],t[1]);case 3:return vne(t[0],t[1],t[2])}}function c3e(t){return{x:t.x,y:t.y,r:t.r}}function y0(t,e){var n=t.x,i=t.y,r=t.r,s=e.x,o=e.y,a=e.r,l=s-n,u=o-i,c=a-r,d=Math.sqrt(l*l+u*u);return{x:(n+s+l/d*c)/2,y:(i+o+u/d*c)/2,r:(d+r+a)/2}}function vne(t,e,n){var i=t.x,r=t.y,s=t.r,o=e.x,a=e.y,l=e.r,u=n.x,c=n.y,d=n.r,h=i-o,f=i-u,p=r-a,g=r-c,m=l-s,y=d-s,v=i*i+r*r-s*s,C=v-o*o-a*a+l*l,w=v-u*u-c*c+d*d,E=f*p-h*g,b=(p*w-g*C)/(E*2)-i,S=(g*m-p*y)/E,_=(f*C-h*w)/(E*2)-r,A=(h*y-f*m)/E,D=S*S+A*A-1,P=2*(s+b*S+_*A),L=b*b+_*_-s*s,O=-(Math.abs(D)>1e-6?(P+Math.sqrt(P*P-4*D*L))/(2*D):L/P);return{x:i+b+S*O,y:r+_+A*O,r:O}}function M7(t,e,n){var i=t.x-e.x,r,s,o=t.y-e.y,a,l,u=i*i+o*o;u?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(r=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-r*r)),n.x=t.x-r*i-a*o,n.y=t.y-r*o+a*i):(r=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-r*r)),n.x=e.x+r*i-a*o,n.y=e.y+r*o+a*i)):(n.x=e.x+n.r,n.y=e.y)}function N7(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function L7(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,s=(e.y*n.r+n.y*e.r)/i;return r*r+s*s}function Jw(t){this._=t,this.next=null,this.previous=null}function d3e(t,e){if(!(s=(t=s3e(t)).length))return 0;var n,i,r,s,o,a,l,u,c,d,h;if(n=t[0],n.x=0,n.y=0,!(s>1))return n.r;if(i=t[1],n.x=-i.r,i.x=n.r,i.y=0,!(s>2))return n.r+i.r;M7(i,n,r=t[2]),n=new Jw(n),i=new Jw(i),r=new Jw(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<s;++l){M7(n._,i._,r=t[l]),r=new Jw(r),u=i.next,c=n.previous,d=i._.r,h=n._.r;do if(d<=h){if(N7(u._,r._)){i=u,n.next=i,i.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(N7(c._,r._)){n=c,n.next=i,i.previous=n,--l;continue e}h+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,o=L7(n);(r=r.next)!==i;)(a=L7(r))<o&&(n=r,o=a);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=a3e(n,e),l=0;l<s;++l)n=t[l],n.x-=r.x,n.y-=r.y;return r.r}function h3e(t){return Math.sqrt(t.value)}function f3e(){var t=null,e=1,n=1,i=nh;function r(s){const o=r3e();return s.x=e/2,s.y=n/2,t?s.eachBefore(I7(t)).eachAfter(eO(i,.5,o)).eachBefore(k7(1)):s.eachBefore(I7(h3e)).eachAfter(eO(nh,1,o)).eachAfter(eO(i,s.r/Math.min(e,n),o)).eachBefore(k7(Math.min(e,n)/(2*s.r))),s}return r.radius=function(s){return arguments.length?(t=nE(s),r):t},r.size=function(s){return arguments.length?(e=+s[0],n=+s[1],r):[e,n]},r.padding=function(s){return arguments.length?(i=typeof s=="function"?s:hp(+s),r):i},r}function I7(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function eO(t,e,n){return function(i){if(r=i.children){var r,s,o=r.length,a=t(i)*e||0,l;if(a)for(s=0;s<o;++s)r[s].r+=a;if(l=d3e(r,n),a)for(s=0;s<o;++s)r[s].r-=a;i.r=l+a}}}function k7(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Cne(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function $C(t,e,n,i,r){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(i-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*u}function p3e(){var t=1,e=1,n=0,i=!1;function r(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/a,o.eachBefore(s(e,a)),i&&o.eachBefore(Cne),o}function s(o,a){return function(l){l.children&&$C(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,h=l.y1-n;d<u&&(u=d=(u+d)/2),h<c&&(c=h=(c+h)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=h}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(t=+o[0],e=+o[1],r):[t,e]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}var g3e={depth:-1},G7={},tO={};function m3e(t){return t.id}function y3e(t){return t.parentId}function $7(){var t=m3e,e=y3e,n;function i(r){var s=Array.from(r),o=t,a=e,l,u,c,d,h,f,p,g,m=new Map;if(n!=null){const y=s.map((w,E)=>v3e(n(w,E,r))),v=y.map(H7),C=new Set(y).add("");for(const w of v)C.has(w)||(C.add(w),y.push(w),v.push(H7(w)),s.push(tO));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,l=s.length;c<l;++c)u=s[c],f=s[c]=new Ug(u),(p=o(u,c,r))!=null&&(p+="")&&(g=f.id=p,m.set(g,m.has(g)?G7:f)),(p=a(u,c,r))!=null&&(p+="")&&(f.parent=p);for(c=0;c<l;++c)if(f=s[c],p=f.parent){if(h=m.get(p),!h)throw new Error("missing: "+p);if(h===G7)throw new Error("ambiguous: "+p);h.children?h.children.push(f):h.children=[f],f.parent=h}else{if(d)throw new Error("multiple roots");d=f}if(!d)throw new Error("no root");if(n!=null){for(;d.data===tO&&d.children.length===1;)d=d.children[0],--l;for(let y=s.length-1;y>=0&&(f=s[y],f.data===tO);--y)f.data=null}if(d.parent=g3e,d.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(gne),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(t=nE(r),i):t},i.parentId=function(r){return arguments.length?(e=nE(r),i):e},i.path=function(r){return arguments.length?(n=nE(r),i):n},i}function v3e(t){t=`${t}`;let e=t.length;return jF(t,e-1)&&!jF(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function H7(t){let e=t.length;if(e<2)return"";for(;--e>1&&!jF(t,e););return t.slice(0,e)}function jF(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function C3e(t,e){return t.parent===e.parent?1:2}function nO(t){var e=t.children;return e?e[0]:t.t}function iO(t){var e=t.children;return e?e[e.length-1]:t.t}function w3e(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function S3e(t){for(var e=0,n=0,i=t.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function E3e(t,e,n){return t.a.parent===e.parent?t.a:n}function iE(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}iE.prototype=Object.create(Ug.prototype);function b3e(t){for(var e=new iE(t,0),n,i=[e],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new iE(s[o],o)),r.parent=n;return(e.parent=new iE(null,0)).children=[e],e}function x3e(){var t=C3e,e=1,n=1,i=null;function r(u){var c=b3e(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),i)u.eachBefore(l);else{var d=u,h=u,f=u;u.eachBefore(function(v){v.x<d.x&&(d=v),v.x>h.x&&(h=v),v.depth>f.depth&&(f=v)});var p=d===h?1:t(d,h)/2,g=p-d.x,m=e/(h.x+p+g),y=n/(f.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function s(u){var c=u.children,d=u.parent.children,h=u.i?d[u.i-1]:null;if(c){S3e(u);var f=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+t(u._,h._),u.m=u.z-f):u.z=f}else h&&(u.z=h.z+t(u._,h._));u.parent.A=a(u,h,u.parent.A||d[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,d){if(c){for(var h=u,f=u,p=c,g=h.parent.children[0],m=h.m,y=f.m,v=p.m,C=g.m,w;p=iO(p),h=nO(h),p&&h;)g=nO(g),f=iO(f),f.a=u,w=p.z+v-h.z-m+t(p._,h._),w>0&&(w3e(E3e(p,u,d),u,w),m+=w,y+=w),v+=p.m,m+=h.m,C+=g.m,y+=f.m;p&&!iO(f)&&(f.t=p,f.m+=v-y),h&&!nO(g)&&(g.t=h,g.m+=m-C,d=u)}return d}function l(u){u.x*=e,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(t=u,r):t},r.size=function(u){return arguments.length?(i=!1,e=+u[0],n=+u[1],r):i?null:[e,n]},r.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],n=+u[1],r):i?[e,n]:null},r}function yT(t,e,n,i,r){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(r-n)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*u}var wne=(1+Math.sqrt(5))/2;function Sne(t,e,n,i,r,s){for(var o=[],a=e.children,l,u,c=0,d=0,h=a.length,f,p,g=e.value,m,y,v,C,w,E,b;c<h;){f=r-n,p=s-i;do m=a[d++].value;while(!m&&d<h);for(y=v=m,E=Math.max(p/f,f/p)/(g*t),b=m*m*E,w=Math.max(v/b,b/y);d<h;++d){if(m+=u=a[d].value,u<y&&(y=u),u>v&&(v=u),b=m*m*E,C=Math.max(v/b,b/y),C>w){m-=u;break}w=C}o.push(l={value:m,dice:f<p,children:a.slice(c,d)}),l.dice?$C(l,n,i,r,g?i+=p*m/g:s):yT(l,n,i,g?n+=f*m/g:r,s),g-=m,c=d}return o}const Ene=function t(e){function n(i,r,s,o,a){Sne(e,i,r,s,o,a)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(wne);function _3e(){var t=Ene,e=!1,n=1,i=1,r=[0],s=nh,o=nh,a=nh,l=nh,u=nh;function c(h){return h.x0=h.y0=0,h.x1=n,h.y1=i,h.eachBefore(d),r=[0],e&&h.eachBefore(Cne),h}function d(h){var f=r[h.depth],p=h.x0+f,g=h.y0+f,m=h.x1-f,y=h.y1-f;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),h.x0=p,h.y0=g,h.x1=m,h.y1=y,h.children&&(f=r[h.depth+1]=s(h)/2,p+=u(h)-f,g+=o(h)-f,m-=a(h)-f,y-=l(h)-f,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),t(h,p,g,m,y))}return c.round=function(h){return arguments.length?(e=!!h,c):e},c.size=function(h){return arguments.length?(n=+h[0],i=+h[1],c):[n,i]},c.tile=function(h){return arguments.length?(t=mne(h),c):t},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(s=typeof h=="function"?h:hp(+h),c):s},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:hp(+h),c):o},c.paddingRight=function(h){return arguments.length?(a=typeof h=="function"?h:hp(+h),c):a},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:hp(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:hp(+h),c):u},c}function R3e(t,e,n,i,r){var s=t.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,t.value,e,n,i,r);function c(d,h,f,p,g,m,y){if(d>=h-1){var v=s[d];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var C=u[d],w=f/2+C,E=d+1,b=h-1;E<b;){var S=E+b>>>1;u[S]<w?E=S+1:b=S}w-u[E-1]<u[E]-w&&d+1<E&&--E;var _=u[E]-C,A=f-_;if(m-p>y-g){var D=f?(p*A+m*_)/f:m;c(d,E,_,p,g,D,y),c(E,h,A,D,g,m,y)}else{var P=f?(g*A+y*_)/f:y;c(d,E,_,p,g,m,P),c(E,h,A,p,P,m,y)}}}function T3e(t,e,n,i,r){(t.depth&1?yT:$C)(t,e,n,i,r)}const A3e=function t(e){function n(i,r,s,o,a){if((l=i._squarify)&&l.ratio===e)for(var l,u,c,d,h=-1,f,p=l.length,g=i.value;++h<p;){for(u=l[h],c=u.children,d=u.value=0,f=c.length;d<f;++d)u.value+=c[d].value;u.dice?$C(u,r,s,o,g?s+=(a-s)*u.value/g:a):yT(u,r,s,g?r+=(o-r)*u.value/g:o,a),g-=u.value}else i._squarify=l=Sne(e,i,r,s,o,a),l.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(wne);function YF(t,e,n){const i={};return t.each(r=>{const s=r.data;n(s)&&(i[e(s)]=r)}),t.lookup=i,t}function GG(t){V.call(this,null,t)}GG.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const D3e=t=>t.values;le(GG,V,{transform(t,e){e.source||U("Nest transform requires an upstream data source.");var n=t.generate,i=t.modified(),r=e.clone(),s=this.value;return(!s||i||e.changed())&&(s&&s.each(o=>{o.children&&PR(o.data)&&r.rem.push(o.data)}),this.value=s=kG({values:de(t.keys).reduce((o,a)=>(o.key(a),o),O3e()).entries(r.source)},D3e),n&&s.each(o=>{o.children&&(o=vt(o.data),r.add.push(o),r.source.push(o))}),YF(s,Re,Re)),r.source.root=s,r}});function O3e(){const t=[],e={entries:r=>i(n(r,0),0),key:r=>(t.push(r),e)};function n(r,s){if(s>=t.length)return r;const o=r.length,a=t[s++],l={},u={};let c=-1,d,h,f;for(;++c<o;)d=a(h=r[c])+"",(f=l[d])?f.push(h):l[d]=[h];for(d in l)u[d]=n(l[d],s);return u}function i(r,s){if(++s>t.length)return r;const o=[];for(const a in r)o.push({key:a,values:i(r[a],s)});return o}return e}function Du(t){V.call(this,null,t)}const P3e=(t,e)=>t.parent===e.parent?1:2;le(Du,V,{transform(t,e){(!e.source||!e.source.root)&&U(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),i=this.fields,r=e.source.root,s=t.as||i;t.field?r.sum(t.field):r.count(),t.sort&&r.sort(Lf(t.sort,o=>o.data)),F3e(n,this.params,t),n.separation&&n.separation(t.separation!==!1?P3e:km);try{this.value=n(r)}catch(o){U(o)}return r.each(o=>M3e(o,i,s)),e.reflow(t.modified()).modifies(s).modifies("leaf")}});function F3e(t,e,n){for(let i,r=0,s=e.length;r<s;++r)i=e[r],i in n&&t[i](n[i])}function M3e(t,e,n){const i=t.data,r=e.length-1;for(let s=0;s<r;++s)i[n[s]]=t[e[s]];i[n[r]]=t.children?t.children.length:0}const qF=["x","y","r","depth","children"];function $G(t){Du.call(this,t)}$G.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qF.length,default:qF}]};le($G,Du,{layout:f3e,params:["radius","size","padding"],fields:qF});const KF=["x0","y0","x1","y1","depth","children"];function HG(t){Du.call(this,t)}HG.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:KF.length,default:KF}]};le(HG,Du,{layout:p3e,params:["size","round","padding"],fields:KF});function WG(t){V.call(this,null,t)}WG.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};le(WG,V,{transform(t,e){e.source||U("Stratify transform requires an upstream data source.");let n=this.value;const i=t.modified(),r=e.fork(e.ALL).materialize(e.SOURCE),s=!n||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return r.source=r.source.slice(),s&&(n=r.source.length?YF($7().id(t.key).parentId(t.parentKey)(r.source),t.key,ro):YF($7()([{}]),t.key,t.key)),r.source.root=this.value=n,r}});const W7={tidy:x3e,cluster:IIe},XF=["x","y","depth","children"];function VG(t){Du.call(this,t)}VG.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:XF.length,default:XF}]};le(VG,Du,{layout(t){const e=t||"tidy";if(Ae(W7,e))return W7[e]();U("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:XF});function BG(t){V.call(this,[],t)}BG.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};le(BG,V,{transform(t,e){const n=this.value,i=e.source&&e.source.root,r=e.fork(e.NO_SOURCE),s={};return i||U("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(r.rem=n,e.visit(e.SOURCE,o=>s[Re(o)]=1),i.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[Re(a)]&&s[Re(l)]&&r.add.push(vt({source:l,target:a}))}),this.value=r.add):e.changed(e.MOD)&&(e.visit(e.MOD,o=>s[Re(o)]=1),n.forEach(o=>{(s[Re(o.source)]||s[Re(o.target)])&&r.mod.push(o)})),r}});const V7={binary:R3e,dice:$C,slice:yT,slicedice:T3e,squarify:Ene,resquarify:A3e},QF=["x0","y0","x1","y1","depth","children"];function zG(t){Du.call(this,t)}zG.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:QF.length,default:QF}]};le(zG,Du,{layout(){const t=_3e();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{Ae(V7,e)?t.tile(V7[e]):U("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:QF});const N3e=Object.freeze(Object.defineProperty({__proto__:null,nest:GG,pack:$G,partition:HG,stratify:WG,tree:VG,treelinks:BG,treemap:zG},Symbol.toStringTag,{value:"Module"})),rO=4278190080;function L3e(t,e){const n=t.bitmap();return(e||[]).forEach(i=>n.set(t(i.boundary[0]),t(i.boundary[3]))),[n,void 0]}function I3e(t,e,n,i,r){const s=t.width,o=t.height,a=i||r,l=Dc(s,o).getContext("2d"),u=Dc(s,o).getContext("2d"),c=a&&Dc(s,o).getContext("2d");n.forEach(_=>rE(l,_,!1)),rE(u,e,!1),a&&rE(c,e,!0);const d=sO(l,s,o),h=sO(u,s,o),f=a&&sO(c,s,o),p=t.bitmap(),g=a&&t.bitmap();let m,y,v,C,w,E,b,S;for(y=0;y<o;++y)for(m=0;m<s;++m)w=y*s+m,E=d[w]&rO,S=h[w]&rO,b=a&&f[w]&rO,(E||b||S)&&(v=t(m),C=t(y),!r&&(E||S)&&p.set(v,C),a&&(E||b)&&g.set(v,C));return[p,g]}function sO(t,e,n){return new Uint32Array(t.getImageData(0,0,e,n).data.buffer)}function rE(t,e,n){if(!e.length)return;const i=e[0].mark.marktype;i==="group"?e.forEach(r=>{r.items.forEach(s=>rE(t,s.items,n))}):Es[i].draw(t,{items:n?e.map(k3e):e})}function k3e(t){const e=FR(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}const Pl=5,$i=31,s1=32,Qu=new Uint32Array(s1+1),Oo=new Uint32Array(s1+1);Oo[0]=0;Qu[0]=~Oo[0];for(let t=1;t<=s1;++t)Oo[t]=Oo[t-1]<<1|1,Qu[t]=~Oo[t];function G3e(t,e){const n=new Uint32Array(~~((t*e+s1)/s1));function i(s,o){n[s]|=o}function r(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*t+s;return n[a>>>Pl]&1<<(a&$i)},set:(s,o)=>{const a=o*t+s;i(a>>>Pl,1<<(a&$i))},clear:(s,o)=>{const a=o*t+s;r(a>>>Pl,~(1<<(a&$i)))},getRange:(s,o,a,l)=>{let u=l,c,d,h,f;for(;u>=o;--u)if(c=u*t+s,d=u*t+a,h=c>>>Pl,f=d>>>Pl,h===f){if(n[h]&Qu[c&$i]&Oo[(d&$i)+1])return!0}else{if(n[h]&Qu[c&$i]||n[f]&Oo[(d&$i)+1])return!0;for(let p=h+1;p<f;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,d,h,f;for(;o<=l;++o)if(u=o*t+s,c=o*t+a,d=u>>>Pl,h=c>>>Pl,d===h)i(d,Qu[u&$i]&Oo[(c&$i)+1]);else for(i(d,Qu[u&$i]),i(h,Oo[(c&$i)+1]),f=d+1;f<h;++f)i(f,4294967295)},clearRange:(s,o,a,l)=>{let u,c,d,h,f;for(;o<=l;++o)if(u=o*t+s,c=o*t+a,d=u>>>Pl,h=c>>>Pl,d===h)r(d,Oo[u&$i]|Qu[(c&$i)+1]);else for(r(d,Oo[u&$i]),r(h,Qu[(c&$i)+1]),f=d+1;f<h;++f)r(f,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=e||a>=t}}function $3e(t,e,n){const i=Math.max(1,Math.sqrt(t*e/1e6)),r=~~((t+2*n+i)/i),s=~~((e+2*n+i)/i),o=a=>~~((a+n)/i);return o.invert=a=>a*i-n,o.bitmap=()=>G3e(r,s),o.ratio=i,o.padding=n,o.width=t,o.height=e,o}function H3e(t,e,n,i){const r=t.width,s=t.height;return function(o){const a=o.datum.datum.items[i].items,l=a.length,u=o.datum.fontSize,c=Yo.width(o.datum,o.datum.text);let d=0,h,f,p,g,m,y,v;for(let C=0;C<l;++C)h=a[C].x,p=a[C].y,f=a[C].x2===void 0?h:a[C].x2,g=a[C].y2===void 0?p:a[C].y2,m=(h+f)/2,y=(p+g)/2,v=Math.abs(f-h+g-p),v>=d&&(d=v,o.x=m,o.y=y);return m=c/2,y=u/2,h=o.x-m,f=o.x+m,p=o.y-y,g=o.y+y,o.align="center",h<0&&f<=r?o.align="left":0<=h&&r<f&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function _x(t,e,n,i,r,s){let o=n/2;return t-o<0||t+o>r||e-(o=i/2)<0||e+o>s}function mc(t,e,n,i,r,s,o,a){const l=r*s/(i*2),u=t(e-l),c=t(e+l),d=t(n-(s=s/2)),h=t(n+s);return o.outOfBounds(u,d,c,h)||o.getRange(u,d,c,h)||a&&a.getRange(u,d,c,h)}function W3e(t,e,n,i){const r=t.width,s=t.height,o=e[0],a=e[1];function l(u,c,d,h,f){const p=t.invert(u),g=t.invert(c);let m=d,y=s,v;if(!_x(p,g,h,f,r,s)&&!mc(t,p,g,f,h,m,o,a)&&!mc(t,p,g,f,h,f,o,null)){for(;y-m>=1;)v=(m+y)/2,mc(t,p,g,f,h,v,o,a)?y=v:m=v;if(m>d)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,f=Yo.width(u.datum,u.datum.text);let p=n?h:0,g=!1,m=!1,y=0,v,C,w,E,b,S,_,A,D,P,L,O,M,F,I,H,N;for(let G=0;G<d;++G){for(v=c[G].x,w=c[G].y,C=c[G].x2===void 0?v:c[G].x2,E=c[G].y2===void 0?w:c[G].y2,v>C&&(N=v,v=C,C=N),w>E&&(N=w,w=E,E=N),D=t(v),L=t(C),P=~~((D+L)/2),O=t(w),F=t(E),M=~~((O+F)/2),_=P;_>=D;--_)for(A=M;A>=O;--A)H=l(_,A,p,f,h),H&&([u.x,u.y,p,g]=H);for(_=P;_<=L;++_)for(A=M;A<=F;++A)H=l(_,A,p,f,h),H&&([u.x,u.y,p,g]=H);!g&&!n&&(I=Math.abs(C-v+E-w),b=(v+C)/2,S=(w+E)/2,I>=y&&!_x(b,S,f,h,r,s)&&!mc(t,b,S,h,f,h,o,null)&&(y=I,u.x=b,u.y=S,m=!0))}return g||m?(b=f/2,S=h/2,o.setRange(t(u.x-b),t(u.y-S),t(u.x+b),t(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const V3e=[-1,-1,1,1],B3e=[-1,1,-1,1];function z3e(t,e,n,i){const r=t.width,s=t.height,o=e[0],a=e[1],l=t.bitmap();return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,f=Yo.width(u.datum,u.datum.text),p=[];let g=n?h:0,m=!1,y=!1,v=0,C,w,E,b,S,_,A,D,P,L,O,M;for(let F=0;F<d;++F){for(C=c[F].x,E=c[F].y,w=c[F].x2===void 0?C:c[F].x2,b=c[F].y2===void 0?E:c[F].y2,p.push([t((C+w)/2),t((E+b)/2)]);p.length;)if([A,D]=p.pop(),!(o.get(A,D)||a.get(A,D)||l.get(A,D))){l.set(A,D);for(let I=0;I<4;++I)S=A+V3e[I],_=D+B3e[I],l.outOfBounds(S,_,S,_)||p.push([S,_]);if(S=t.invert(A),_=t.invert(D),P=g,L=s,!_x(S,_,f,h,r,s)&&!mc(t,S,_,h,f,P,o,a)&&!mc(t,S,_,h,f,h,o,null)){for(;L-P>=1;)O=(P+L)/2,mc(t,S,_,h,f,O,o,a)?L=O:P=O;P>g&&(u.x=S,u.y=_,g=P,m=!0)}}!m&&!n&&(M=Math.abs(w-C+b-E),S=(C+w)/2,_=(E+b)/2,M>=v&&!_x(S,_,f,h,r,s)&&!mc(t,S,_,h,f,h,o,null)&&(v=M,u.x=S,u.y=_,y=!0))}return m||y?(S=f/2,_=h/2,o.setRange(t(u.x-S),t(u.y-_),t(u.x+S),t(u.y+_)),u.align="center",u.baseline="middle",!0):!1}}const U3e=["right","center","left"],j3e=["bottom","middle","top"];function Y3e(t,e,n,i){const r=t.width,s=t.height,o=e[0],a=e[1],l=i.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>r||c[3]>s)return!1;let h=u.textWidth??0,f,p,g,m,y,v,C,w,E,b,S,_,A,D,P;for(let L=0;L<l;++L){if(f=(n[L]&3)-1,p=(n[L]>>>2&3)-1,g=f===0&&p===0||i[L]<0,m=f&&p?Math.SQRT1_2:1,y=i[L]<0?-1:1,v=c[1+f]+i[L]*f*m,S=c[4+p]+y*d*p/2+i[L]*p*m,w=S-d/2,E=S+d/2,_=t(v),D=t(w),P=t(E),!h)if(B7(_,_,D,P,o,a,v,v,w,E,c,g))h=Yo.width(u.datum,u.datum.text);else continue;if(b=v+y*h*f/2,v=b-h/2,C=b+h/2,_=t(v),A=t(C),B7(_,A,D,P,o,a,v,C,w,E,c,g))return u.x=f?f*y<0?C:v:b,u.y=p?p*y<0?E:w:S,u.align=U3e[f*y+1],u.baseline=j3e[p*y+1],o.setRange(_,D,A,P),!0}return!1}}function B7(t,e,n,i,r,s,o,a,l,u,c,d){return!(r.outOfBounds(t,n,e,i)||(d&&s||r).getRange(t,n,e,i))}const oO=0,aO=4,lO=8,uO=0,cO=1,dO=2,q3e={"top-left":oO+uO,top:oO+cO,"top-right":oO+dO,left:aO+uO,middle:aO+cO,right:aO+dO,"bottom-left":lO+uO,bottom:lO+cO,"bottom-right":lO+dO},K3e={naive:H3e,"reduced-search":W3e,floodfill:z3e};function X3e(t,e,n,i,r,s,o,a,l,u,c){if(!t.length)return t;const d=Math.max(i.length,r.length),h=Q3e(i,d),f=J3e(r,d),p=Z3e(t[0].datum),g=p==="group"&&t[0].datum.items[l].marktype,m=g==="area",y=eke(p,g,a,l),v=u===null||u===1/0,C=m&&c==="naive";let w=-1,E=-1;const b=t.map(D=>{const P=v?Yo.width(D,D.text):void 0;return w=Math.max(w,P),E=Math.max(E,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(D),textWidth:P}});u=u===null||u===1/0?Math.max(w,E)+Math.max(...i):u;const S=$3e(e[0],e[1],u);let _;if(!C){n&&b.sort((L,O)=>n(L.datum,O.datum));let D=!1;for(let L=0;L<f.length&&!D;++L)D=f[L]===5||h[L]<0;const P=(p&&o||m)&&t.map(L=>L.datum);_=s.length||P?I3e(S,P||[],s,D,m):L3e(S,o&&b)}const A=m?K3e[c](S,_,o,l):Y3e(S,_,f,h);return b.forEach(D=>D.opacity=+A(D)),b}function Q3e(t,e){const n=new Float64Array(e),i=t.length;for(let r=0;r<i;++r)n[r]=t[r]||0;for(let r=i;r<e;++r)n[r]=n[i-1];return n}function J3e(t,e){const n=new Int8Array(e),i=t.length;for(let r=0;r<i;++r)n[r]|=q3e[t[r]];for(let r=i;r<e;++r)n[r]=n[i-1];return n}function Z3e(t){return t&&t.mark&&t.mark.marktype}function eke(t,e,n,i){const r=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>r(s.datum):e==="line"?s=>{const o=s.datum.items[i].items;return r(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:r}const JF=["x","y","opacity","align","baseline"],bne=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function UG(t){V.call(this,null,t)}UG.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:bne},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:JF.length,default:JF}]};le(UG,V,{transform(t,e){function n(s){const o=t[s];return Ue(o)&&e.modified(o.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&U("Size parameter should be specified as a [width, height] array.");const r=t.as||JF;return X3e(e.materialize(e.SOURCE).source||[],t.size,t.sort,de(t.offset==null?1:t.offset),de(t.anchor||bne),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(s=>{const o=s.datum;o[r[0]]=s.x,o[r[1]]=s.y,o[r[2]]=s.opacity,o[r[3]]=s.align,o[r[4]]=s.baseline}),e.reflow(i).modifies(r)}});const tke=Object.freeze(Object.defineProperty({__proto__:null,label:UG},Symbol.toStringTag,{value:"Module"}));function xne(t,e){var n=[],i=function(c){return c(a)},r,s,o,a,l,u;if(e==null)n.push(t);else for(r={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function jG(t){V.call(this,null,t)}jG.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};le(jG,V,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=xne(i,t.groupby),s=(t.groupby||[]).map(un),o=s.length,a=t.as||[un(t.x),un(t.y)],l=[];r.forEach(u=>{GQ(u,t.x,t.y,t.bandwidth||.3).forEach(c=>{const d={};for(let h=0;h<o;++h)d[s[h]]=u.dims[h];d[a[0]]=c[0],d[a[1]]=c[1],l.push(vt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const ZF={constant:x3,linear:_3,log:NQ,exp:LQ,pow:IQ,quad:R3,poly:kQ},nke=(t,e)=>t==="poly"?e:t==="quad"?2:1;function YG(t){V.call(this,null,t)}YG.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(ZF)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};le(YG,V,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=xne(i,t.groupby),s=(t.groupby||[]).map(un),o=t.method||"linear",a=t.order==null?3:t.order,l=nke(o,a),u=t.as||[un(t.x),un(t.y)],c=ZF[o],d=[];let h=t.extent;Ae(ZF,o)||U("Invalid regression method: "+o),h!=null&&o==="log"&&h[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),r.forEach(f=>{if(f.length<=l){e.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(f,t.x,t.y,a);if(t.params){d.push(vt({keys:f.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=h||tl(f,t.x),y=v=>{const C={};for(let w=0;w<s.length;++w)C[s[w]]=f.dims[w];C[u[0]]=v[0],C[u[1]]=v[1],d.push(vt(C))};o==="linear"||o==="constant"?m.forEach(v=>y([v,g.predict(v)])):$R(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const ike=Object.freeze(Object.defineProperty({__proto__:null,loess:jG,regression:YG},Symbol.toStringTag,{value:"Module"})),ru=11102230246251565e-32,pi=134217729,rke=(3+8*ru)*ru;function hO(t,e,n,i,r){let s,o,a,l,u=e[0],c=i[0],d=0,h=0;c>u==c>-u?(s=u,u=e[++d]):(s=c,c=i[++h]);let f=0;if(d<t&&h<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=e[++d]):(o=c+s,a=s-(o-c),c=i[++h]),s=o,a!==0&&(r[f++]=a);d<t&&h<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++d]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=i[++h]),s=o,a!==0&&(r[f++]=a);for(;d<t;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++d],s=o,a!==0&&(r[f++]=a);for(;h<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=i[++h],s=o,a!==0&&(r[f++]=a);return(s!==0||f===0)&&(r[f++]=s),f}function ske(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function HC(t){return new Float64Array(t)}const oke=(3+16*ru)*ru,ake=(2+12*ru)*ru,lke=(9+64*ru)*ru*ru,ip=HC(4),z7=HC(8),U7=HC(12),j7=HC(16),Hi=HC(4);function uke(t,e,n,i,r,s,o){let a,l,u,c,d,h,f,p,g,m,y,v,C,w,E,b,S,_;const A=t-r,D=n-r,P=e-s,L=i-s;w=A*L,h=pi*A,f=h-(h-A),p=A-f,h=pi*L,g=h-(h-L),m=L-g,E=p*m-(w-f*g-p*g-f*m),b=P*D,h=pi*P,f=h-(h-P),p=P-f,h=pi*D,g=h-(h-D),m=D-g,S=p*m-(b-f*g-p*g-f*m),y=E-S,d=E-y,ip[0]=E-(y+d)+(d-S),v=w+y,d=v-w,C=w-(v-d)+(y-d),y=C-b,d=C-y,ip[1]=C-(y+d)+(d-b),_=v+y,d=_-v,ip[2]=v-(_-d)+(y-d),ip[3]=_;let O=ske(4,ip),M=ake*o;if(O>=M||-O>=M||(d=t-A,a=t-(A+d)+(d-r),d=n-D,u=n-(D+d)+(d-r),d=e-P,l=e-(P+d)+(d-s),d=i-L,c=i-(L+d)+(d-s),a===0&&l===0&&u===0&&c===0)||(M=lke*o+rke*Math.abs(O),O+=A*c+L*a-(P*u+D*l),O>=M||-O>=M))return O;w=a*L,h=pi*a,f=h-(h-a),p=a-f,h=pi*L,g=h-(h-L),m=L-g,E=p*m-(w-f*g-p*g-f*m),b=l*D,h=pi*l,f=h-(h-l),p=l-f,h=pi*D,g=h-(h-D),m=D-g,S=p*m-(b-f*g-p*g-f*m),y=E-S,d=E-y,Hi[0]=E-(y+d)+(d-S),v=w+y,d=v-w,C=w-(v-d)+(y-d),y=C-b,d=C-y,Hi[1]=C-(y+d)+(d-b),_=v+y,d=_-v,Hi[2]=v-(_-d)+(y-d),Hi[3]=_;const F=hO(4,ip,4,Hi,z7);w=A*c,h=pi*A,f=h-(h-A),p=A-f,h=pi*c,g=h-(h-c),m=c-g,E=p*m-(w-f*g-p*g-f*m),b=P*u,h=pi*P,f=h-(h-P),p=P-f,h=pi*u,g=h-(h-u),m=u-g,S=p*m-(b-f*g-p*g-f*m),y=E-S,d=E-y,Hi[0]=E-(y+d)+(d-S),v=w+y,d=v-w,C=w-(v-d)+(y-d),y=C-b,d=C-y,Hi[1]=C-(y+d)+(d-b),_=v+y,d=_-v,Hi[2]=v-(_-d)+(y-d),Hi[3]=_;const I=hO(F,z7,4,Hi,U7);w=a*c,h=pi*a,f=h-(h-a),p=a-f,h=pi*c,g=h-(h-c),m=c-g,E=p*m-(w-f*g-p*g-f*m),b=l*u,h=pi*l,f=h-(h-l),p=l-f,h=pi*u,g=h-(h-u),m=u-g,S=p*m-(b-f*g-p*g-f*m),y=E-S,d=E-y,Hi[0]=E-(y+d)+(d-S),v=w+y,d=v-w,C=w-(v-d)+(y-d),y=C-b,d=C-y,Hi[1]=C-(y+d)+(d-b),_=v+y,d=_-v,Hi[2]=v-(_-d)+(y-d),Hi[3]=_;const H=hO(I,U7,4,Hi,j7);return j7[H-1]}function Zw(t,e,n,i,r,s){const o=(e-s)*(n-r),a=(t-r)*(i-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=oke*u?l:-uke(t,e,n,i,r,s,u)}const Y7=Math.pow(2,-52),eS=new Uint32Array(512);class Rx{static from(e,n=pke,i=gke){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=e[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new Rx(s)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let D=0;D<o;D++){const P=e[2*D],L=e[2*D+1];P<a&&(a=P),L<l&&(l=L),P>u&&(u=P),L>c&&(c=L),this._ids[D]=D}const d=(a+u)/2,h=(l+c)/2;let f=1/0,p,g,m;for(let D=0;D<o;D++){const P=fO(d,h,e[2*D],e[2*D+1]);P<f&&(p=D,f=P)}const y=e[2*p],v=e[2*p+1];f=1/0;for(let D=0;D<o;D++){if(D===p)continue;const P=fO(y,v,e[2*D],e[2*D+1]);P<f&&P>0&&(g=D,f=P)}let C=e[2*g],w=e[2*g+1],E=1/0;for(let D=0;D<o;D++){if(D===p||D===g)continue;const P=hke(y,v,C,w,e[2*D],e[2*D+1]);P<E&&(m=D,E=P)}let b=e[2*m],S=e[2*m+1];if(E===1/0){for(let L=0;L<o;L++)this._dists[L]=e[2*L]-e[0]||e[2*L+1]-e[1];Np(this._ids,this._dists,0,o-1);const D=new Uint32Array(o);let P=0;for(let L=0,O=-1/0;L<o;L++){const M=this._ids[L];this._dists[M]>O&&(D[P++]=M,O=this._dists[M])}this.hull=D.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Zw(y,v,C,w,b,S)<0){const D=g,P=C,L=w;g=m,C=b,w=S,m=D,b=P,S=L}const _=fke(y,v,C,w,b,S);this._cx=_.x,this._cy=_.y;for(let D=0;D<o;D++)this._dists[D]=fO(e[2*D],e[2*D+1],_.x,_.y);Np(this._ids,this._dists,0,o-1),this._hullStart=p;let A=3;i[p]=n[m]=g,i[g]=n[p]=m,i[m]=n[g]=p,r[p]=0,r[g]=1,r[m]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(C,w)]=g,s[this._hashKey(b,S)]=m,this.trianglesLen=0,this._addTriangle(p,g,m,-1,-1,-1);for(let D=0,P,L;D<this._ids.length;D++){const O=this._ids[D],M=e[2*O],F=e[2*O+1];if(D>0&&Math.abs(M-P)<=Y7&&Math.abs(F-L)<=Y7||(P=M,L=F,O===p||O===g||O===m))continue;let I=0;for(let X=0,ne=this._hashKey(M,F);X<this._hashSize&&(I=s[(ne+X)%this._hashSize],!(I!==-1&&I!==i[I]));X++);I=n[I];let H=I,N;for(;N=i[H],Zw(M,F,e[2*H],e[2*H+1],e[2*N],e[2*N+1])>=0;)if(H=N,H===I){H=-1;break}if(H===-1)continue;let G=this._addTriangle(H,O,i[H],-1,-1,r[H]);r[O]=this._legalize(G+2),r[H]=G,A++;let W=i[H];for(;N=i[W],Zw(M,F,e[2*W],e[2*W+1],e[2*N],e[2*N+1])<0;)G=this._addTriangle(W,O,N,r[O],-1,r[W]),r[O]=this._legalize(G+2),i[W]=W,A--,W=N;if(H===I)for(;N=n[H],Zw(M,F,e[2*N],e[2*N+1],e[2*H],e[2*H+1])<0;)G=this._addTriangle(N,O,H,-1,r[H],r[N]),this._legalize(G+2),r[N]=G,i[H]=H,A--,H=N;this._hullStart=n[O]=H,i[H]=n[W]=O,i[O]=W,s[this._hashKey(M,F)]=O,s[this._hashKey(e[2*H],e[2*H+1])]=H}this.hull=new Uint32Array(A);for(let D=0,P=this._hullStart;D<A;D++)this.hull[D]=P,P=i[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(cke(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=eS[--s];continue}const u=a-a%3,c=l+(e+1)%3,d=u+(a+2)%3,h=n[o],f=n[e],p=n[c],g=n[d];if(dke(r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){n[e]=g,n[a]=h;const y=i[d];if(y===-1){let C=this._hullStart;do{if(this._hullTri[C]===d){this._hullTri[C]=e;break}C=this._hullPrev[C]}while(C!==this._hullStart)}this._link(e,y),this._link(a,i[o]),this._link(o,d);const v=u+(a+1)%3;s<eS.length&&(eS[s++]=v)}else{if(s===0)break;e=eS[--s]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function cke(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function fO(t,e,n,i){const r=t-n,s=e-i;return r*r+s*s}function dke(t,e,n,i,r,s,o,a){const l=t-o,u=e-a,c=n-o,d=i-a,h=r-o,f=s-a,p=l*l+u*u,g=c*c+d*d,m=h*h+f*f;return l*(d*m-g*f)-u*(c*m-g*h)+p*(c*f-d*h)<0}function hke(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,u=s-e,c=o*o+a*a,d=l*l+u*u,h=.5/(o*u-a*l),f=(u*c-a*d)*h,p=(o*d-l*c)*h;return f*f+p*p}function fke(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,u=s-e,c=o*o+a*a,d=l*l+u*u,h=.5/(o*u-a*l),f=t+(u*c-a*d)*h,p=e+(o*d-l*c)*h;return{x:f,y:p}}function Np(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=t[r],o=e[s];let a=r-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;Py(t,r,s),e[t[n]]>e[t[i]]&&Py(t,n,i),e[t[s]]>e[t[i]]&&Py(t,s,i),e[t[n]]>e[t[s]]&&Py(t,n,s);const a=t[s],l=e[a];for(;;){do s++;while(e[t[s]]<l);do o--;while(e[t[o]]>l);if(o<s)break;Py(t,s,o)}t[n+1]=t[o],t[o]=a,i-s+1>=o-n?(Np(t,e,s,i),Np(t,e,n,o-1)):(Np(t,e,n,o-1),Np(t,e,s,i))}}function Py(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function pke(t){return t[0]}function gke(t){return t[1]}const q7=1e-6;class fh{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;const r=e+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>q7||Math.abs(this._y1-s)>q7)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,n,i,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class eM{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}let mke=class{constructor(e,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let g=0,m=0,y=i.length,v,C;g<y;g+=3,m+=2){const w=i[g]*2,E=i[g+1]*2,b=i[g+2]*2,S=e[w],_=e[w+1],A=e[E],D=e[E+1],P=e[b],L=e[b+1],O=A-S,M=D-_,F=P-S,I=L-_,H=(O*I-M*F)*2;if(Math.abs(H)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=e[G*2],o+=e[G*2+1];s/=n.length,o/=n.length}const N=1e9*Math.sign((s-S)*I-(o-_)*F);v=(S+P)/2-N*I,C=(_+L)/2+N*F}else{const N=1/H,G=O*O+M*M,W=F*F+I*I;v=S+(I*G-M*W)*N,C=_+(O*W-F*G)*N}a[m]=v,a[m+1]=C}let l=n[n.length-1],u,c=l*4,d,h=e[2*l],f,p=e[2*l+1];r.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,d=h,f=p,c=l*4,h=e[2*l],p=e[2*l+1],r[u+2]=r[c]=f-p,r[u+3]=r[c+1]=h-d}render(e){const n=e==null?e=new fh:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=i.length;c<d;++c){const h=i[c];if(h<c)continue;const f=Math.floor(c/3)*2,p=Math.floor(h/3)*2,g=o[f],m=o[f+1],y=o[p],v=o[p+1];this._renderSegment(g,m,y,v,e)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const d=Math.floor(r[u]/3)*2,h=o[d],f=o[d+1],p=l*4,g=this._project(h,f,a[p+2],a[p+3]);g&&this._renderSegment(h,f,g[0],g[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new fh:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const i=n==null?n=new fh:void 0,r=this._clip(e);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(e){const n=new eM;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,r,s){let o;const a=this._regioncode(e,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(e,n),s.lineTo(i,r)):(o=this._clipSegment(e,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){const n=this._clip(e);if(n)for(const i of this.delaunay.neighbors(e)){const r=this._clip(i);if(r){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+l-2)%l]&&n[(s+3)%o]===r[(a+l-1)%l]){yield i;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[e];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:i}=this,r=e*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(e,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(e,n))}_clipFinite(e,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],u,c=this._regioncode(a,l),d,h=0;for(let f=0;f<i;f+=2)if(s=a,o=l,a=n[f],l=n[f+1],u=c,c=this._regioncode(a,l),u===0&&c===0)d=h,h=0,r?r.push(a,l):r=[a,l];else{let p,g,m,y,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[y,v,g,m]=p,d=h,h=this._edgecode(g,m),d&&h&&this._edge(e,d,h,r,r.length),r?r.push(g,m):r=[g,m]}d=h,h=this._edgecode(y,v),d&&h&&this._edge(e,d,h,r,r.length),r?r.push(y,v):r=[y,v]}if(r)d=h,h=this._edgecode(r[0],r[1]),d&&h&&this._edge(e,d,h,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,n,i,r,s,o){const a=s<o;for(a&&([e,n,i,r,s,o]=[i,r,e,n,o,s]);;){if(s===0&&o===0)return a?[i,r,e,n]:[e,n,i,r];if(s&o)return null;let l,u,c=s||o;c&8?(l=e+(i-e)*(this.ymax-n)/(r-n),u=this.ymax):c&4?(l=e+(i-e)*(this.ymin-n)/(r-n),u=this.ymin):c&2?(u=n+(r-n)*(this.xmax-e)/(i-e),l=this.xmax):(u=n+(r-n)*(this.xmin-e)/(i-e),l=this.xmin),s?(e=l,n=u,s=this._regioncode(e,n)):(i=l,r=u,o=this._regioncode(i,r))}}_clipInfinite(e,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let u=0,c=a.length,d,h=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=h,h=this._edgecode(a[u],a[u+1]),d&&h&&(u=this._edge(e,d,h,a,u),c=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(e,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(e,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=e+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=e+(s=o)*i)}if(i>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){const i=(n+2)%e.length,r=(n+4)%e.length;(e[n]===e[i]&&e[i]===e[r]||e[n+1]===e[i+1]&&e[i+1]===e[r+1])&&(e.splice(i,2),n-=2)}e.length||(e=null)}return e}};const yke=2*Math.PI,rp=Math.pow;function vke(t){return t[0]}function Cke(t){return t[1]}function wke(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const r=2*e[i],s=2*e[i+1],o=2*e[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function Ske(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class qG{static from(e,n=vke,i=Cke,r){return new qG("length"in e?Eke(e,n,i,r):Float64Array.from(bke(e,n,i,r)))}constructor(e){this._delaunator=new Rx(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&wke(e)){this.collinear=Int32Array.from({length:n.length/2},(h,f)=>f).sort((h,f)=>n[2*h]-n[2*f]||n[2*h+1]-n[2*f+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,f=n.length/2;h<f;++h){const p=Ske(n[2*h],n[2*h+1],d);n[2*h]=p[0],n[2*h+1]=p[1]}this._delaunator=new Rx(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(i[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=r.length;l<u;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new mke(this,e)}*neighbors(e){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(e);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const l=n[e];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=s[u],u===-1){const d=i[(r[e]+1)%i.length];d!==c&&(yield d);return}}while(u!==l)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,e,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(e,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(r[e]===-1||!u.length)return(e+1)%(u.length>>1);let c=e,d=rp(n-u[e*2],2)+rp(i-u[e*2+1],2);const h=r[e];let f=h;do{let p=l[f];const g=rp(n-u[p*2],2)+rp(i-u[p*2+1],2);if(g<d&&(d=g,c=p),f=f%3===2?f-2:f+1,l[f]!==e)break;if(f=a[f],f===-1){if(f=s[(o[e]+1)%s.length],f!==p&&rp(n-u[f*2],2)+rp(i-u[f*2+1],2)<d)return f;break}}while(f!==h);return c}render(e){const n=e==null?e=new fh:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;e.moveTo(i[u],i[u+1]),e.lineTo(i[c],i[c+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const i=e==null?e=new fh:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];e.moveTo(a+n,l),e.arc(a,l,n,0,yke)}return i&&i.value()}renderHull(e){const n=e==null?e=new fh:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;e.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];e.lineTo(r[l],r[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new eM;return this.renderHull(e),e.value()}renderTriangle(e,n){const i=n==null?n=new fh:void 0,{points:r,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new eM;return this.renderTriangle(e,n),n.value()}}function Eke(t,e,n,i){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=t[o];s[o*2]=e.call(i,a,o,t),s[o*2+1]=n.call(i,a,o,t)}return s}function*bke(t,e,n,i){let r=0;for(const s of t)yield e.call(i,s,r,t),yield n.call(i,s,r,t),++r}function KG(t){V.call(this,null,t)}KG.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const xke=[-1e5,-1e5,1e5,1e5];le(KG,V,{transform(t,e){const n=t.as||"path",i=e.source;if(!i||!i.length)return e;let r=t.size;r=r?[0,0,r[0],r[1]]:(r=t.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:xke;const s=this.value=qG.from(i,t.x,t.y).voronoi(r);for(let o=0,a=i.length;o<a;++o){const l=s.cellPolygon(o);i[o][n]=l?_ke(l):null}return e.reflow(t.modified()).modifies(n)}});function _ke(t){const e=t[0][0],n=t[0][1];let i=t.length-1;for(;t[i][0]===e&&t[i][1]===n;--i);return"M"+t.slice(0,i+1).join("L")+"Z"}const Rke=Object.freeze(Object.defineProperty({__proto__:null,voronoi:KG},Symbol.toStringTag,{value:"Module"}));var pO=Math.PI/180,v0=64,sE=2048;function Tke(){var t=[256,256],e,n,i,r,s,o,a,l=_ne,u=[],c=Math.random,d={};d.layout=function(){for(var p=h(Dc()),g=Mke((t[0]>>5)*t[1]),m=null,y=u.length,v=-1,C=[],w=u.map(b=>({text:e(b),font:n(b),style:r(b),weight:s(b),rotate:o(b),size:~~(i(b)+1e-14),padding:a(b),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:b})).sort((b,S)=>S.size-b.size);++v<y;){var E=w[v];E.x=t[0]*(c()+.5)>>1,E.y=t[1]*(c()+.5)>>1,Ake(p,E,w,v),E.hasText&&f(g,E,m)&&(C.push(E),m?Oke(m,E):m=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=t[0]>>1,E.y-=t[1]>>1)}return C};function h(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(v0<<5)/g,p.height=sE/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function f(p,g,m){for(var y=g.x,v=g.y,C=Math.sqrt(t[0]*t[0]+t[1]*t[1]),w=l(t),E=c()<.5?1:-1,b=-E,S,_,A;(S=w(b+=E))&&(_=~~S[0],A=~~S[1],!(Math.min(Math.abs(_),Math.abs(A))>=C));)if(g.x=y+_,g.y=v+A,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!m||!Dke(g,p,t[0]))&&(!m||Pke(g,m))){for(var D=g.sprite,P=g.width>>5,L=t[0]>>5,O=g.x-(P<<4),M=O&127,F=32-M,I=g.y1-g.y0,H=(g.y+g.y0)*L+(O>>5),N,G=0;G<I;G++){N=0;for(var W=0;W<=P;W++)p[H+W]|=N<<F|(W<P?(N=D[G*P+W])>>>M:0);H+=L}return g.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(t=[+p[0],+p[1]],d):t},d.font=function(p){return arguments.length?(n=Md(p),d):n},d.fontStyle=function(p){return arguments.length?(r=Md(p),d):r},d.fontWeight=function(p){return arguments.length?(s=Md(p),d):s},d.rotate=function(p){return arguments.length?(o=Md(p),d):o},d.text=function(p){return arguments.length?(e=Md(p),d):e},d.spiral=function(p){return arguments.length?(l=Nke[p]||p,d):l},d.fontSize=function(p){return arguments.length?(i=Md(p),d):i},d.padding=function(p){return arguments.length?(a=Md(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function Ake(t,e,n,i){if(!e.sprite){var r=t.context,s=t.ratio;r.clearRect(0,0,(v0<<5)/s,sE/s);var o=0,a=0,l=0,u=n.length,c,d,h,f,p;for(--i;++i<u;){if(e=n[i],r.save(),r.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font,c=r.measureText(e.text+"m").width*s,h=e.size<<1,e.rotate){var g=Math.sin(e.rotate*pO),m=Math.cos(e.rotate*pO),y=c*m,v=c*g,C=h*m,w=h*g;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,h=~~Math.max(Math.abs(v+C),Math.abs(v-C))}else c=c+31>>5<<5;if(h>l&&(l=h),o+c>=v0<<5&&(o=0,a+=l,l=0),a+h>=sE)break;r.translate((o+(c>>1))/s,(a+(h>>1))/s),e.rotate&&r.rotate(e.rotate*pO),r.fillText(e.text,0,0),e.padding&&(r.lineWidth=2*e.padding,r.strokeText(e.text,0,0)),r.restore(),e.width=c,e.height=h,e.xoff=o,e.yoff=a,e.x1=c>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var E=r.getImageData(0,0,(v0<<5)/s,sE/s).data,b=[];--i>=0;)if(e=n[i],!!e.hasText){for(c=e.width,d=c>>5,h=e.y1-e.y0,f=0;f<h*d;f++)b[f]=0;if(o=e.xoff,o==null)return;a=e.yoff;var S=0,_=-1;for(p=0;p<h;p++){for(f=0;f<c;f++){var A=d*p+(f>>5),D=E[(a+p)*(v0<<5)+(o+f)<<2]?1<<31-f%32:0;b[A]|=D,S|=D}S?_=p:(e.y0++,h--,p--,a++)}e.y1=e.y0+_,e.sprite=b.slice(0,(e.y1-e.y0)*d)}}}function Dke(t,e,n){n>>=5;for(var i=t.sprite,r=t.width>>5,s=t.x-(r<<4),o=s&127,a=32-o,l=t.y1-t.y0,u=(t.y+t.y0)*n+(s>>5),c,d=0;d<l;d++){c=0;for(var h=0;h<=r;h++)if((c<<a|(h<r?(c=i[d*r+h])>>>o:0))&e[u+h])return!0;u+=n}return!1}function Oke(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function Pke(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function _ne(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Fke(t){var e=4,n=e*t[0]/t[1],i=0,r=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:i+=n;break;case 1:r+=e;break;case 2:i-=n;break;default:r-=e;break}return[i,r]}}function Mke(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Md(t){return typeof t=="function"?t:function(){return t}}var Nke={archimedean:_ne,rectangular:Fke};const Rne=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Lke=["text","font","rotate","fontSize","fontStyle","fontWeight"];function XG(t){V.call(this,Tke(),t)}XG.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Rne}]};le(XG,V,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&U("Wordcloud size dimensions must be non-zero.");function n(p){const g=t[p];return Ue(g)&&e.modified(g.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||Lke.some(n)))return;const r=e.materialize(e.SOURCE).source,s=this.value,o=t.as||Rne;let a=t.fontSize||14,l;if(Ue(a)?l=t.fontSizeRange:a=Ii(a),l){const p=a,g=mt("sqrt")().domain(tl(r,p)).range(l);a=m=>g(p(m))}r.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(r).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(a).random(oo).layout(),c=s.size(),d=c[0]>>1,h=c[1]>>1,f=u.length;for(let p=0,g,m;p<f;++p)g=u[p],m=g.datum,m[o[0]]=g.x+d,m[o[1]]=g.y+h,m[o[2]]=g.font,m[o[3]]=g.size,m[o[4]]=g.style,m[o[5]]=g.weight,m[o[6]]=g.rotate;return e.reflow(i).modifies(o)}});const Ike=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:XG},Symbol.toStringTag,{value:"Module"})),kke=t=>new Uint8Array(t),Gke=t=>new Uint16Array(t),B0=t=>new Uint32Array(t);function $ke(){let t=8,e=[],n=B0(0),i=tS(0,t),r=tS(0,t);return{data:()=>e,seen:()=>n=Hke(n,e.length),add(s){for(let o=0,a=e.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,e.push(u)},remove(s,o){const a=e.length,l=Array(a-s),u=e;let c,d,h;for(d=0;!o[d]&&d<a;++d)l[d]=e[d],u[d]=d;for(h=d;d<a;++d)c=e[d],o[d]?u[d]=-1:(u[d]=h,i[h]=i[d],r[h]=r[d],l[h]=c,c._index=h++),i[d]=0;return e=l,u},size:()=>e.length,curr:()=>i,prev:()=>r,reset:s=>r[s]=i[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,o){i[s]|=o},clear(s,o){i[s]&=~o},resize(s,o){const a=i.length;(s>a||o>t)&&(t=Math.max(o,t),i=tS(s,t,i),r=tS(s,t))}}}function Hke(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function tS(t,e,n){const i=(e<257?kke:e<65537?Gke:B0)(t);return n&&i.set(n),i}function K7(t,e,n){const i=1<<e;return{one:i,zero:~i,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(r,s){const o=this,a=o.bisect(o.range,r.value),l=r.index,u=a[0],c=a[1],d=l.length;let h;for(h=0;h<u;++h)s[l[h]]|=i;for(h=c;h<d;++h)s[l[h]]|=i;return o}}}function X7(){let t=B0(0),e=[],n=0;function i(a,l,u){if(!l.length)return[];const c=n,d=l.length,h=B0(d);let f=Array(d),p,g,m;for(m=0;m<d;++m)f[m]=a(l[m]),h[m]=m;if(f=Wke(f,h),c)p=e,g=t,e=Array(c+d),t=B0(c+d),Vke(u,p,g,c,f,h,d,e,t);else{if(u>0)for(m=0;m<d;++m)h[m]+=u;e=f,t=h}return n=c+d,{index:h,value:f}}function r(a,l){const u=n;let c,d,h;for(d=0;!l[t[d]]&&d<u;++d);for(h=d;d<u;++d)l[c=t[d]]||(t[h]=c,e[h]=e[d],++h);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)t[l]=a[t[l]]}function o(a,l){let u;return l?u=l.length:(l=e,u=n),[o_e(l,a[0],0,u),wb(l,a[1],0,u)]}return{insert:i,remove:r,bisect:o,reindex:s,index:()=>t,size:()=>n}}function Wke(t,e){return t.sort.call(e,(n,i)=>{const r=t[n],s=t[i];return r<s?-1:r>s?1:0}),u_e(t,e)}function Vke(t,e,n,i,r,s,o,a,l){let u=0,c=0,d;for(d=0;u<i&&c<o;++d)e[u]<r[c]?(a[d]=e[u],l[d]=n[u++]):(a[d]=r[c],l[d]=s[c++]+t);for(;u<i;++u,++d)a[d]=e[u],l[d]=n[u];for(;c<o;++c,++d)a[d]=r[c],l[d]=s[c]+t}function QG(t){V.call(this,$ke(),t),this._indices=null,this._dims=null}QG.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};le(QG,V,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(i=>e.modified(i.fields));return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){const n=t.fields,i=t.query,r=this._indices={},s=this._dims=[],o=i.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=r[l]||(r[l]=X7()),s.push(K7(u,a,i[a]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),i=t.fields,r=t.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,h=n.mod,f=r.length,p={};let g,m,y,v,C,w,E,b,S;if(u.set(l),e.rem.length&&(C=this.remove(t,e,n)),e.add.length&&a.add(e.add),e.mod.length)for(w={},v=e.mod,E=0,b=v.length;E<b;++E)w[v[E]._index]=1;for(E=0;E<f;++E)S=i[E],(!o[E]||t.modified("fields",E)||e.modified(S.fields))&&(y=S.fname,(g=p[y])||(s[y]=m=X7(),p[y]=g=m.insert(S,e.source,0)),o[E]=K7(m,E,r[E]).onAdd(g,l));for(E=0,b=a.data().length;E<b;++E)C[E]||(u[E]!==l[E]?d.push(E):w[E]&&l[E]!==c&&h.push(E));return a.mask=(1<<f)-1,n},eval(t,e){const n=e.materialize().fork(),i=this._dims.length;let r=0;return e.rem.length&&(this.remove(t,e,n),r|=(1<<i)-1),t.modified("query")&&!t.modified("fields")&&(r|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),r|=(1<<i)-1),e.mod.length&&(this.modify(e,n),r|=(1<<i)-1),this.value.mask=r,n},insert(t,e,n){const i=e.add,r=this.value,s=this._dims,o=this._indices,a=t.fields,l={},u=n.add,c=r.size()+i.length,d=s.length;let h=r.size(),f,p,g;r.resize(c,d),r.add(i);const m=r.curr(),y=r.prev(),v=r.all();for(f=0;f<d;++f)p=a[f].fname,g=l[p]||(l[p]=o[p].insert(a[f],i,h)),s[f].onAdd(g,m);for(;h<c;++h)y[h]=v,m[h]!==v&&u.push(h)},modify(t,e){const n=e.mod,i=this.value,r=i.curr(),s=i.all(),o=t.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,r[u]!==s&&n.push(u)},remove(t,e,n){const i=this._indices,r=this.value,s=r.curr(),o=r.prev(),a=r.all(),l={},u=n.rem,c=e.rem;let d,h,f,p;for(d=0,h=c.length;d<h;++d)f=c[d]._index,l[f]=1,o[f]=p=s[f],s[f]=a,p!==a&&u.push(f);for(f in i)i[f].remove(h,l);return this.reindex(e,h,l),l},reindex(t,e,n){const i=this._indices,r=this.value;t.runAfter(()=>{const s=r.remove(e,n);for(const o in i)i[o].reindex(s)})},update(t,e,n){const i=this._dims,r=t.query,s=e.stamp,o=i.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)t.modified("query",u)&&(l=u,++a);if(a===1)a=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)t.modified("query",u)&&(a|=i[u].one,this.incrementAll(i[u],r[u],s,n.add),n.rem=n.add);return a},incrementAll(t,e,n,i){const r=this.value,s=r.seen(),o=r.curr(),a=r.prev(),l=t.index(),u=t.bisect(t.range),c=t.bisect(e),d=c[0],h=c[1],f=u[0],p=u[1],g=t.one;let m,y,v;if(d<f)for(m=d,y=Math.min(f,h);m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=g;else if(d>f)for(m=f,y=Math.min(d,p);m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=g;if(h>p)for(m=Math.max(d,p),y=h;m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=g;else if(h<p)for(m=Math.max(f,h),y=p;m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=g;t.range=e.slice()},incrementOne(t,e,n,i){const r=this.value,s=r.curr(),o=t.index(),a=t.bisect(t.range),l=t.bisect(e),u=l[0],c=l[1],d=a[0],h=a[1],f=t.one;let p,g,m;if(u<d)for(p=u,g=Math.min(d,c);p<g;++p)m=o[p],s[m]^=f,n.push(m);else if(u>d)for(p=d,g=Math.min(u,h);p<g;++p)m=o[p],s[m]^=f,i.push(m);if(c>h)for(p=Math.max(u,h),g=c;p<g;++p)m=o[p],s[m]^=f,n.push(m);else if(c<h)for(p=Math.max(d,c),g=h;p<g;++p)m=o[p],s[m]^=f,i.push(m);t.range=e.slice()}});function JG(t){V.call(this,null,t)}JG.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};le(JG,V,{transform(t,e){const n=~(t.ignore||0),i=t.filter,r=i.mask;if(!(r&n))return e.StopPropagation;const s=e.fork(e.ALL),o=i.data(),a=i.curr(),l=i.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),r&r-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===r?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const Bke=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:QG,resolvefilter:JG},Symbol.toStringTag,{value:"Module"})),zke="RawCode",Jh="Literal",Uke="Property",jke="Identifier",Yke="ArrayExpression",qke="BinaryExpression",Tne="CallExpression",Kke="ConditionalExpression",Xke="LogicalExpression",Qke="MemberExpression",Jke="ObjectExpression",Zke="UnaryExpression";function la(t){this.type=t}la.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=eGe(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1};function eGe(t){switch(t.type){case Yke:return t.elements;case qke:case Xke:return[t.left,t.right];case Tne:return[t.callee].concat(t.arguments);case Kke:return[t.test,t.consequent,t.alternate];case Qke:return[t.object,t.property];case Jke:return t.properties;case Uke:return[t.key,t.value];case Zke:return[t.argument];case jke:case Jh:case zke:default:return[]}}var Sl,Ce,z,Oi,_t,vT=1,WC=2,Zh=3,Ed=4,CT=5,$f=6,Cr=7,VC=8,tGe=9;Sl={};Sl[vT]="Boolean";Sl[WC]="<end>";Sl[Zh]="Identifier";Sl[Ed]="Keyword";Sl[CT]="Null";Sl[$f]="Numeric";Sl[Cr]="Punctuator";Sl[VC]="String";Sl[tGe]="RegularExpression";var nGe="ArrayExpression",iGe="BinaryExpression",rGe="CallExpression",sGe="ConditionalExpression",Ane="Identifier",oGe="Literal",aGe="LogicalExpression",lGe="MemberExpression",uGe="ObjectExpression",cGe="Property",dGe="UnaryExpression",$n="Unexpected token %0",hGe="Unexpected number",fGe="Unexpected string",pGe="Unexpected identifier",gGe="Unexpected reserved word",mGe="Unexpected end of input",tM="Invalid regular expression",gO="Invalid regular expression: missing /",Dne="Octal literals are not allowed in strict mode.",yGe="Duplicate data property in object literal not allowed in strict mode",ei="ILLEGAL",o1="Disabled.",vGe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),CGe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function wT(t,e){if(!t)throw new Error("ASSERT: "+e)}function Gl(t){return t>=48&&t<=57}function ZG(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function z0(t){return"01234567".indexOf(t)>=0}function wGe(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function a1(t){return t===10||t===13||t===8232||t===8233}function BC(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&vGe.test(String.fromCharCode(t))}function Tx(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&CGe.test(String.fromCharCode(t))}const SGe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function One(){for(;z<Oi;){const t=Ce.charCodeAt(z);if(wGe(t)||a1(t))++z;else break}}function nM(t){var e,n,i,r=0;for(n=t==="u"?4:2,e=0;e<n;++e)z<Oi&&ZG(Ce[z])?(i=Ce[z++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):pt({},$n,ei);return String.fromCharCode(r)}function EGe(){var t,e,n,i;for(t=Ce[z],e=0,t==="}"&&pt({},$n,ei);z<Oi&&(t=Ce[z++],!!ZG(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&pt({},$n,ei),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function Pne(){var t,e;for(t=Ce.charCodeAt(z++),e=String.fromCharCode(t),t===92&&(Ce.charCodeAt(z)!==117&&pt({},$n,ei),++z,t=nM("u"),(!t||t==="\\"||!BC(t.charCodeAt(0)))&&pt({},$n,ei),e=t);z<Oi&&(t=Ce.charCodeAt(z),!!Tx(t));)++z,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),Ce.charCodeAt(z)!==117&&pt({},$n,ei),++z,t=nM("u"),(!t||t==="\\"||!Tx(t.charCodeAt(0)))&&pt({},$n,ei),e+=t);return e}function bGe(){var t,e;for(t=z++;z<Oi;){if(e=Ce.charCodeAt(z),e===92)return z=t,Pne();if(Tx(e))++z;else break}return Ce.slice(t,z)}function xGe(){var t,e,n;return t=z,e=Ce.charCodeAt(z)===92?Pne():bGe(),e.length===1?n=Zh:SGe.hasOwnProperty(e)?n=Ed:e==="null"?n=CT:e==="true"||e==="false"?n=vT:n=Zh,{type:n,value:e,start:t,end:z}}function mO(){var t=z,e=Ce.charCodeAt(z),n,i=Ce[z],r,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++z,{type:Cr,value:String.fromCharCode(e),start:t,end:z};default:if(n=Ce.charCodeAt(z+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return z+=2,{type:Cr,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:z};case 33:case 61:return z+=2,Ce.charCodeAt(z)===61&&++z,{type:Cr,value:Ce.slice(t,z),start:t,end:z}}}if(o=Ce.substr(z,4),o===">>>=")return z+=4,{type:Cr,value:o,start:t,end:z};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return z+=3,{type:Cr,value:s,start:t,end:z};if(r=s.substr(0,2),i===r[1]&&"+-<>&|".indexOf(i)>=0||r==="=>")return z+=2,{type:Cr,value:r,start:t,end:z};if(r==="//"&&pt({},$n,ei),"<>=!+-*%&|^/".indexOf(i)>=0)return++z,{type:Cr,value:i,start:t,end:z};pt({},$n,ei)}function _Ge(t){let e="";for(;z<Oi&&ZG(Ce[z]);)e+=Ce[z++];return e.length===0&&pt({},$n,ei),BC(Ce.charCodeAt(z))&&pt({},$n,ei),{type:$f,value:parseInt("0x"+e,16),start:t,end:z}}function RGe(t){let e="0"+Ce[z++];for(;z<Oi&&z0(Ce[z]);)e+=Ce[z++];return(BC(Ce.charCodeAt(z))||Gl(Ce.charCodeAt(z)))&&pt({},$n,ei),{type:$f,value:parseInt(e,8),octal:!0,start:t,end:z}}function Q7(){var t,e,n;if(n=Ce[z],wT(Gl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=z,t="",n!=="."){if(t=Ce[z++],n=Ce[z],t==="0"){if(n==="x"||n==="X")return++z,_Ge(e);if(z0(n))return RGe(e);n&&Gl(n.charCodeAt(0))&&pt({},$n,ei)}for(;Gl(Ce.charCodeAt(z));)t+=Ce[z++];n=Ce[z]}if(n==="."){for(t+=Ce[z++];Gl(Ce.charCodeAt(z));)t+=Ce[z++];n=Ce[z]}if(n==="e"||n==="E")if(t+=Ce[z++],n=Ce[z],(n==="+"||n==="-")&&(t+=Ce[z++]),Gl(Ce.charCodeAt(z)))for(;Gl(Ce.charCodeAt(z));)t+=Ce[z++];else pt({},$n,ei);return BC(Ce.charCodeAt(z))&&pt({},$n,ei),{type:$f,value:parseFloat(t),start:e,end:z}}function TGe(){var t="",e,n,i,r,s=!1;for(e=Ce[z],wT(e==="'"||e==='"',"String literal must starts with a quote"),n=z,++z;z<Oi;)if(i=Ce[z++],i===e){e="";break}else if(i==="\\")if(i=Ce[z++],!i||!a1(i.charCodeAt(0)))switch(i){case"u":case"x":Ce[z]==="{"?(++z,t+=EGe()):t+=nM(i);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:z0(i)?(r="01234567".indexOf(i),r!==0&&(s=!0),z<Oi&&z0(Ce[z])&&(s=!0,r=r*8+"01234567".indexOf(Ce[z++]),"0123".indexOf(i)>=0&&z<Oi&&z0(Ce[z])&&(r=r*8+"01234567".indexOf(Ce[z++]))),t+=String.fromCharCode(r)):t+=i;break}else i==="\r"&&Ce[z]===`
`&&++z;else{if(a1(i.charCodeAt(0)))break;t+=i}return e!==""&&pt({},$n,ei),{type:VC,value:t,octal:s,start:n,end:z}}function AGe(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";pt({},tM)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pt({},tM)}try{return new RegExp(t,e)}catch{return null}}function DGe(){var t,e,n,i,r;for(t=Ce[z],wT(t==="/","Regular expression literal must start with a slash"),e=Ce[z++],n=!1,i=!1;z<Oi;)if(t=Ce[z++],e+=t,t==="\\")t=Ce[z++],a1(t.charCodeAt(0))&&pt({},gO),e+=t;else if(a1(t.charCodeAt(0)))pt({},gO);else if(n)t==="]"&&(n=!1);else if(t==="/"){i=!0;break}else t==="["&&(n=!0);return i||pt({},gO),r=e.substr(1,e.length-2),{value:r,literal:e}}function OGe(){var t,e,n;for(e="",n="";z<Oi&&(t=Ce[z],!!Tx(t.charCodeAt(0)));)++z,t==="\\"&&z<Oi?pt({},$n,ei):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&pt({},tM,n),{value:n,literal:e}}function PGe(){var t,e,n,i;return _t=null,One(),t=z,e=DGe(),n=OGe(),i=AGe(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:z}}function FGe(t){return t.type===Zh||t.type===Ed||t.type===vT||t.type===CT}function Fne(){if(One(),z>=Oi)return{type:WC,start:z,end:z};const t=Ce.charCodeAt(z);return BC(t)?xGe():t===40||t===41||t===59?mO():t===39||t===34?TGe():t===46?Gl(Ce.charCodeAt(z+1))?Q7():mO():Gl(t)?Q7():mO()}function Rr(){const t=_t;return z=t.end,_t=Fne(),z=t.end,t}function Mne(){const t=z;_t=Fne(),z=t}function MGe(t){const e=new la(nGe);return e.elements=t,e}function J7(t,e,n){const i=new la(t==="||"||t==="&&"?aGe:iGe);return i.operator=t,i.left=e,i.right=n,i}function NGe(t,e){const n=new la(rGe);return n.callee=t,n.arguments=e,n}function LGe(t,e,n){const i=new la(sGe);return i.test=t,i.consequent=e,i.alternate=n,i}function e9(t){const e=new la(Ane);return e.name=t,e}function C0(t){const e=new la(oGe);return e.value=t.value,e.raw=Ce.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Z7(t,e,n){const i=new la(lGe);return i.computed=t==="[",i.object=e,i.property=n,i.computed||(n.member=!0),i}function IGe(t){const e=new la(uGe);return e.properties=t,e}function eW(t,e,n){const i=new la(cGe);return i.key=e,i.value=n,i.kind=t,i}function kGe(t,e){const n=new la(dGe);return n.operator=t,n.argument=e,n.prefix=!0,n}function pt(t,e){var n,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(s,o)=>(wT(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=z,n.description=r,n}function ST(t){t.type===WC&&pt(t,mGe),t.type===$f&&pt(t,hGe),t.type===VC&&pt(t,fGe),t.type===Zh&&pt(t,pGe),t.type===Ed&&pt(t,gGe),pt(t,$n,t.value)}function Pi(t){const e=Rr();(e.type!==Cr||e.value!==t)&&ST(e)}function Bt(t){return _t.type===Cr&&_t.value===t}function yO(t){return _t.type===Ed&&_t.value===t}function GGe(){const t=[];for(z=_t.start,Pi("[");!Bt("]");)Bt(",")?(Rr(),t.push(null)):(t.push(ef()),Bt("]")||Pi(","));return Rr(),MGe(t)}function tW(){z=_t.start;const t=Rr();return t.type===VC||t.type===$f?(t.octal&&pt(t,Dne),C0(t)):e9(t.value)}function $Ge(){var t,e,n,i;if(z=_t.start,t=_t,t.type===Zh)return n=tW(),Pi(":"),i=ef(),eW("init",n,i);if(t.type===WC||t.type===Cr)ST(t);else return e=tW(),Pi(":"),i=ef(),eW("init",e,i)}function HGe(){var t=[],e,n,i,r={},s=String;for(z=_t.start,Pi("{");!Bt("}");)e=$Ge(),e.key.type===Ane?n=e.key.name:n=s(e.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?pt({},yGe):r[i]=!0,t.push(e),Bt("}")||Pi(",");return Pi("}"),IGe(t)}function WGe(){Pi("(");const t=t9();return Pi(")"),t}const VGe={if:1};function BGe(){var t,e,n;if(Bt("("))return WGe();if(Bt("["))return GGe();if(Bt("{"))return HGe();if(t=_t.type,z=_t.start,t===Zh||VGe[_t.value])n=e9(Rr().value);else if(t===VC||t===$f)_t.octal&&pt(_t,Dne),n=C0(Rr());else{if(t===Ed)throw new Error(o1);t===vT?(e=Rr(),e.value=e.value==="true",n=C0(e)):t===CT?(e=Rr(),e.value=null,n=C0(e)):Bt("/")||Bt("/=")?(n=C0(PGe()),Mne()):ST(Rr())}return n}function zGe(){const t=[];if(Pi("("),!Bt(")"))for(;z<Oi&&(t.push(ef()),!Bt(")"));)Pi(",");return Pi(")"),t}function UGe(){z=_t.start;const t=Rr();return FGe(t)||ST(t),e9(t.value)}function jGe(){return Pi("."),UGe()}function YGe(){Pi("[");const t=t9();return Pi("]"),t}function qGe(){var t,e,n;for(t=BGe();;)if(Bt("."))n=jGe(),t=Z7(".",t,n);else if(Bt("("))e=zGe(),t=NGe(t,e);else if(Bt("["))n=YGe(),t=Z7("[",t,n);else break;return t}function nW(){const t=qGe();if(_t.type===Cr&&(Bt("++")||Bt("--")))throw new Error(o1);return t}function oE(){var t,e;if(_t.type!==Cr&&_t.type!==Ed)e=nW();else{if(Bt("++")||Bt("--"))throw new Error(o1);if(Bt("+")||Bt("-")||Bt("~")||Bt("!"))t=Rr(),e=oE(),e=kGe(t.value,e);else{if(yO("delete")||yO("void")||yO("typeof"))throw new Error(o1);e=nW()}}return e}function iW(t){let e=0;if(t.type!==Cr&&t.type!==Ed)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function KGe(){var t,e,n,i,r,s,o,a,l,u;if(t=_t,l=oE(),i=_t,r=iW(i),r===0)return l;for(i.prec=r,Rr(),e=[t,_t],o=oE(),s=[l,i,o];(r=iW(_t))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),n=J7(a,l,o),s.push(n);i=Rr(),i.prec=r,s.push(i),e.push(_t),n=oE(),s.push(n)}for(u=s.length-1,n=s[u],e.pop();u>1;)e.pop(),n=J7(s[u-1].value,s[u-2],n),u-=2;return n}function ef(){var t,e,n;return t=KGe(),Bt("?")&&(Rr(),e=ef(),Pi(":"),n=ef(),t=LGe(t,e,n)),t}function t9(){const t=ef();if(Bt(","))throw new Error(o1);return t}function n9(t){Ce=t,z=0,Oi=Ce.length,_t=null,Mne();const e=t9();if(_t.type!==WC)throw new Error("Unexpect token after expression.");return e}var Nne={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Lne(t){function e(o,a,l,u){let c=t(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(t).join(",")+")")}function n(o,a,l){return u=>e(o,u,a,l)}const i="new Date",r="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&U("Missing arguments to clamp function."),o.length>3&&U("Too many arguments to clamp function.");const a=o.map(t);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&U("Missing arguments to if function."),o.length>3&&U("Too many arguments to if function.");const a=o.map(t);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function XGe(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function Ine(t){t=t||{};const e=t.allowed?ta(t.allowed):{},n=t.forbidden?ta(t.forbidden):{},i=t.constants||Nne,r=(t.functions||Lne)(d),s=t.globalvar,o=t.fieldvar,a=Ue(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function d(p){if(ce(p))return p;const g=h[p.type];return g==null&&U("Unsupported type: "+p.type),g(p)}const h={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:Ae(n,g)?U("Illegal identifier: "+g):Ae(i,g)?i[g]:Ae(e,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=d(p.object);g&&(c+=1);const y=d(p.property);return m===o&&(u[XGe(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&U("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=Ae(r,g)&&r[g];return y||U("Unrecognized function: "+g),Ue(y)?y(m):y+"("+m.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const g=d(p.key);return c-=1,g+":"+d(p.value)}};function f(p){const g={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return f.functions=r,f.constants=i,f}function vO(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QGe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JGe(t){let e,n,i;t.length!==2?(e=vO,n=(a,l)=>vO(t(a),l),i=(a,l)=>t(a)-l):(e=t===vO||t===QGe?t:ZGe,n=t,i=t);function r(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=r(a,l,u,c-1);return d>u&&i(a[d-1],l)>-i(a[d],l)?d-1:d}return{left:r,center:o,right:s}}function ZGe(){return 0}function e9e(t,...e){t=new Sb(t),e=e.map(t9e);e:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue e}return t}function t9e(t){return t instanceof Sb?t:new Sb(t)}function n9e(...t){const e=new Sb;for(const n of t)for(const i of n)e.add(i);return e}const i9="intersect",rW="union",i9e="vlMulti",r9e="vlPoint",sW="or",s9e="and",Na="_vgsid_",l1=Gr(Na),o9e="E",a9e="R",l9e="R-E",u9e="R-LE",c9e="R-RE",Ax="index:unit";function oW(t,e){for(var n=e.fields,i=e.values,r=n.length,s=0,o,a;s<r;++s)if(a=n[s],a.getter=Gr.getter||Gr(a.field),o=a.getter(t),Rc(o)&&(o=xi(o)),Rc(i[s])&&(i[s]=xi(i[s])),Rc(i[s][0])&&(i[s]=i[s].map(xi)),a.type===o9e){if(j(i[s])?i[s].indexOf(o)<0:o!==i[s])return!1}else if(a.type===a9e){if(!Op(o,i[s]))return!1}else if(a.type===c9e){if(!Op(o,i[s],!0,!1))return!1}else if(a.type===l9e){if(!Op(o,i[s],!1,!1))return!1}else if(a.type===u9e&&!Op(o,i[s],!1,!0))return!1;return!0}function d9e(t,e,n){for(var i=this.context.data[t],r=i?i.values.value:[],s=i?i[Ax]&&i[Ax].value:void 0,o=n===i9,a=r.length,l=0,u,c,d,h,f;l<a;++l)if(u=r[l],s&&o){if(c=c||{},d=c[h=u.unit]||0,d===-1)continue;if(f=oW(e,u),c[h]=f?-1:++d,f&&s.size===1)return!0;if(!f&&d===s.get(h).count)return!1}else if(f=oW(e,u),o^f)return f;return a&&o}const kne=JGe(l1),h9e=kne.left,f9e=kne.right;function p9e(t,e,n){const i=this.context.data[t],r=i?i.values.value:[],s=i?i[Ax]&&i[Ax].value:void 0,o=n===i9,a=l1(e),l=h9e(r,a);if(l===r.length||l1(r[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(f9e(r,a)-l<s.size)return!1}return!0}function g9e(t,e){return t.map(n=>ze(e.fields?{values:e.fields.map(i=>(i.getter||(i.getter=Gr(i.field)))(n.datum))}:{[Na]:l1(n.datum)},e))}function m9e(t,e,n,i){for(var r=this.context.data[t],s=r?r.values.value:[],o={},a={},l={},u,c,d,h,f,p,g,m,y,v,C=s.length,w=0,E,b;w<C;++w)if(u=s[w],h=u.unit,c=u.fields,d=u.values,c&&d){for(E=0,b=c.length;E<b;++E)f=c[E],g=o[f.field]||(o[f.field]={}),m=g[h]||(g[h]=[]),l[f.field]=y=f.type.charAt(0),v=CO[`${y}_union`],g[h]=v(m,de(d[E]));n&&(m=a[h]||(a[h]=[]),m.push(de(d).reduce((S,_,A)=>(S[c[A].field]=_,S),{})))}else f=Na,p=l1(u),g=o[f]||(o[f]={}),m=g[h]||(g[h]=[]),m.push(p),n&&(m=a[h]||(a[h]=[]),m.push({[Na]:p}));if(e=e||rW,o[Na]?o[Na]=CO[`${Na}_${e}`](...Object.values(o[Na])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(_=>o[S][_]).reduce((_,A)=>_===void 0?A:CO[`${l[S]}_${e}`](_,A))}),s=Object.keys(a),n&&s.length){const S=i?r9e:i9e;o[S]=e===rW?{[sW]:s.reduce((_,A)=>(_.push(...a[A]),_),[])}:{[s9e]:s.map(_=>({[sW]:a[_]}))}}return o}var CO={[`${Na}_union`]:n9e,[`${Na}_intersect`]:e9e,E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(n=>e.indexOf(n)>=0):e},R_union:function(t,e){var n=xi(e[0]),i=xi(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=xi(e[0]),i=xi(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}};const y9e=":",v9e="@";function r9(t,e,n,i){e[0].type!==Jh&&U("First argument to selection functions must be a string literal.");const r=e[0].value,s=e.length>=2&&at(e).value,o="unit",a=v9e+o,l=y9e+r;s===i9&&!Ae(i,a)&&(i[a]=n.getData(r).indataRef(n,o)),Ae(i,l)||(i[l]=n.getData(r).tuplesRef())}function Gne(t){const e=this.context.data[t];return e?e.values.value:[]}function C9e(t,e,n){const i=this.context.data[t]["index:"+e],r=i?i.value.get(n):void 0;return r&&r.count}function w9e(t,e){const n=this.context.dataflow,i=this.context.data[t],r=i.input;return n.pulse(r,n.changeset().remove(ro).insert(e)),1}function S9e(t,e,n){if(t){const i=this.context.dataflow,r=t.mark.source;i.pulse(r,i.changeset().encode(t,e))}return n!==void 0?n:t}const zC=t=>function(e,n){return this.context.dataflow.locale()[t](n)(e)},E9e=zC("format"),$ne=zC("timeFormat"),b9e=zC("utcFormat"),x9e=zC("timeParse"),_9e=zC("utcParse"),nS=new Date(2e3,0,1);function ET(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(nS.setYear(2e3),nS.setMonth(t),nS.setDate(e),$ne.call(this,nS,n))}function R9e(t){return ET.call(this,t,1,"%B")}function T9e(t){return ET.call(this,t,1,"%b")}function A9e(t){return ET.call(this,0,2+t,"%A")}function D9e(t){return ET.call(this,0,2+t,"%a")}const O9e=":",P9e="@",iM="%",Hne="$";function s9(t,e,n,i){e[0].type!==Jh&&U("First argument to data functions must be a string literal.");const r=e[0].value,s=O9e+r;if(!Ae(s,i))try{i[s]=n.getData(r).tuplesRef()}catch{}}function F9e(t,e,n,i){e[0].type!==Jh&&U("First argument to indata must be a string literal."),e[1].type!==Jh&&U("Second argument to indata must be a string literal.");const r=e[0].value,s=e[1].value,o=P9e+s;Ae(o,i)||(i[o]=n.getData(r).indataRef(n,s))}function Mr(t,e,n,i){if(e[0].type===Jh)aW(n,i,e[0].value);else for(t in n.scales)aW(n,i,t)}function aW(t,e,n){const i=iM+n;if(!Ae(e,i))try{e[i]=t.scaleRef(n)}catch{}}function Ou(t,e){if(Ue(t))return t;if(ce(t)){const n=e.scales[t];return n&&GOe(n.value)?n.value:void 0}}function M9e(t,e,n){e.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=Mr,n._range=Mr,n._scale=Mr;const i=r=>"_["+(r.type===Jh?ae(iM+r.value):ae(iM)+"+"+t(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${t(r[1])})`}}function o9(t,e){return function(n,i,r){if(n){const s=Ou(n,(r||this).context);return s&&s.path[t](i)}else return e(i)}}const N9e=o9("area",JMe),L9e=o9("bounds",nNe),I9e=o9("centroid",lNe);function k9e(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function a9(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(i){t.warn(i)}return n[n.length-1]}function G9e(){return a9(this.context.dataflow,"warn",arguments)}function $9e(){return a9(this.context.dataflow,"info",arguments)}function H9e(){return a9(this.context.dataflow,"debug",arguments)}function wO(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function rM(t){const e=zc(t),n=wO(e.r),i=wO(e.g),r=wO(e.b);return .2126*n+.7152*i+.0722*r}function W9e(t,e){const n=rM(t),i=rM(e),r=Math.max(n,i),s=Math.min(n,i);return(r+.05)/(s+.05)}function V9e(){const t=[].slice.call(arguments);return t.unshift({}),ze(...t)}function Wne(t,e){return t===e||t!==t&&e!==e?!0:j(t)?j(e)&&t.length===e.length?B9e(t,e):!1:he(t)&&he(e)?Vne(t,e):!1}function B9e(t,e){for(let n=0,i=t.length;n<i;++n)if(!Wne(t[n],e[n]))return!1;return!0}function Vne(t,e){for(const n in t)if(!Wne(t[n],e[n]))return!1;return!0}function lW(t){return e=>Vne(t,e)}function z9e(t,e,n,i,r,s){const o=this.context.dataflow,a=this.context.data[t],l=a.input,u=o.stamp();let c=a.changes,d,h;if(o._trigger===!1||!(l.value.length||e||i))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(d=n===!0?ro:j(n)||PR(n)?n:lW(n),c.remove(d)),e&&c.insert(e),i&&(d=lW(i),l.value.some(d)?c.remove(d):c.insert(i)),r)for(h in s)c.modify(r,h,s[h]);return 1}function U9e(t){const e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.hypot(n,i)}function j9e(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const uW={};function Y9e(t,e){const n=uW[e]||(uW[e]=Gr(e));return j(t)?t.map(n):n(t)}function l9(t){return j(t)||ArrayBuffer.isView(t)?t:null}function u9(t){return l9(t)||(ce(t)?t:null)}function q9e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return l9(t).join(...n)}function K9e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return u9(t).indexOf(...n)}function X9e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return u9(t).lastIndexOf(...n)}function Q9e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return u9(t).slice(...n)}function J9e(t,e,n){return Ue(n)&&U("Function argument passed to replace."),String(t).replace(e,n)}function Z9e(t){return l9(t).slice().reverse()}function e5e(t,e,n){return vk(t||0,e||0,n||0)}function t5e(t,e){const n=Ou(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function n5e(t,e){const n=Ou(t,(e||this).context);return n?n.copy():void 0}function i5e(t,e){const n=Ou(t,(e||this).context);return n?n.domain():[]}function r5e(t,e,n){const i=Ou(t,(n||this).context);return i?j(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}function s5e(t,e){const n=Ou(t,(e||this).context);return n&&n.range?n.range():[]}function o5e(t,e,n){const i=Ou(t,(n||this).context);return i?i(e):void 0}function a5e(t,e,n,i,r){t=Ou(t,(r||this).context);const s=HZ(e,n);let o=t.domain(),a=o[0],l=at(o),u=Li;return l-a?u=AZ(t,a,l):t=(t.interpolator?mt("sequential")().interpolator(t.interpolator()):mt("linear")().interpolate(t.interpolate()).range(t.range())).domain([a=0,l=1]),t.ticks&&(o=t.ticks(+i||15),a!==o[0]&&o.unshift(a),l!==at(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),t(c))),s}function l5e(t,e,n){const i=Ou(t,(n||this).context);return function(r){return i?i.path.context(r)(e):""}}function u5e(t){let e=null;return function(n){return n?Jv(n,e=e||kg(t)):t}}const Bne=t=>t.data;function zne(t,e){const n=Gne.call(e,t);return n.root&&n.root.lookup||{}}function c5e(t,e,n){const i=zne(t,this),r=i[e],s=i[n];return r&&s?r.path(s).map(Bne):void 0}function d5e(t,e){const n=zne(t,this)[e];return n?n.ancestors().map(Bne):void 0}const Une=()=>typeof window<"u"&&window||null;function h5e(){const t=Une();return t?t.screen:{}}function f5e(){const t=Une();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function p5e(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function jne(t,e,n){if(!t)return[];const[i,r]=t,s=new vn().set(i[0],i[1],r[0],r[1]),o=n||this.context.dataflow.scenegraph().root;return Oee(o,s,g5e(e))}function g5e(t){let e=null;if(t){const n=de(t.marktype),i=de(t.markname);e=r=>(!n.length||n.some(s=>r.marktype===s))&&(!i.length||i.some(s=>r.name===s))}return e}function m5e(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=de(t);const r=t[t.length-1];return r===void 0||Math.hypot(r[0]-e,r[1]-n)>i?[...t,[e,n]]:t}function y5e(t){return de(t).reduce((e,n,i)=>{let[r,s]=n;return e+=i==0?`M ${r},${s} `:i===t.length-1?" Z":`L ${r},${s} `},"")}function v5e(t,e,n){const{x:i,y:r,mark:s}=n,o=new vn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of e)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(i,r),jne([[o.x1,o.y1],[o.x2,o.y2]],t,s).filter(l=>C5e(l.x,l.y,e))}function C5e(t,e,n){let i=0;for(let r=0,s=n.length-1;r<n.length;s=r++){const[o,a]=n[s],[l,u]=n[r];u>e!=a>e&&t<(o-l)*(e-u)/(a-u)+l&&i++}return i&1}const u1={random(){return oo()},cumulativeNormal:IR,cumulativeLogNormal:v3,cumulativeUniform:E3,densityNormal:f3,densityLogNormal:y3,densityUniform:S3,quantileNormal:kR,quantileLogNormal:C3,quantileUniform:b3,sampleNormal:LR,sampleLogNormal:m3,sampleUniform:w3,isArray:j,isBoolean:yd,isDate:Rc,isDefined(t){return t!==void 0},isNumber:ft,isObject:he,isRegExp:aX,isString:ce,isTuple:PR,isValid(t){return t!=null&&t===t},toBoolean:jI,toDate(t){return YI(t)},toNumber:xi,toString:qI,indexof:K9e,join:q9e,lastindexof:X9e,replace:J9e,reverse:Z9e,slice:Q9e,flush:sX,lerp:lX,merge:V9e,pad:dX,peek:at,pluck:Y9e,span:mC,inrange:Op,truncate:hX,rgb:zc,lab:Lb,hcl:Ib,hsl:Mb,luminance:rM,contrast:W9e,sequence:ps,format:E9e,utcFormat:b9e,utcParse:_9e,utcOffset:UX,utcSequence:qX,timeFormat:$ne,timeParse:x9e,timeOffset:zX,timeSequence:YX,timeUnitSpecifier:MX,monthFormat:R9e,monthAbbrevFormat:T9e,dayFormat:A9e,dayAbbrevFormat:D9e,quarter:tX,utcquarter:nX,week:LX,utcweek:GX,dayofyear:NX,utcdayofyear:kX,warn:G9e,info:$9e,debug:H9e,extent(t){return tl(t)},inScope:k9e,intersect:jne,clampRange:iX,pinchDistance:U9e,pinchAngle:j9e,screen:h5e,containerSize:p5e,windowSize:f5e,bandspace:e5e,setdata:w9e,pathShape:u5e,panLinear:QK,panLog:JK,panPow:ZK,panSymlog:eX,zoomLinear:HI,zoomLog:WI,zoomPow:Cb,zoomSymlog:VI,encode:S9e,modify:z9e,lassoAppend:m5e,lassoPath:y5e,intersectLasso:v5e},w5e=["view","item","group","xy","x","y"],S5e="event.vega.",Yne="this.",c9={},qne={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${ae(Hne+t)}]`,functions:E5e,constants:Nne,visitors:c9},sM=Ine(qne);function E5e(t){const e=Lne(t);w5e.forEach(n=>e[n]=S5e+n);for(const n in u1)e[n]=Yne+n;return ze(e,M9e(t,u1,c9)),e}function Cn(t,e,n){return arguments.length===1?u1[t]:(u1[t]=e,n&&(c9[t]=n),sM&&(sM.functions[t]=Yne+t),this)}Cn("bandwidth",t5e,Mr);Cn("copy",n5e,Mr);Cn("domain",i5e,Mr);Cn("range",s5e,Mr);Cn("invert",r5e,Mr);Cn("scale",o5e,Mr);Cn("gradient",a5e,Mr);Cn("geoArea",N9e,Mr);Cn("geoBounds",L9e,Mr);Cn("geoCentroid",I9e,Mr);Cn("geoShape",l5e,Mr);Cn("indata",C9e,F9e);Cn("data",Gne,s9);Cn("treePath",c5e,s9);Cn("treeAncestors",d5e,s9);Cn("vlSelectionTest",d9e,r9);Cn("vlSelectionIdTest",p9e,r9);Cn("vlSelectionResolve",m9e,r9);Cn("vlSelectionTuples",g9e);function ol(t,e){const n={};let i;try{t=ce(t)?t:ae(t)+"",i=n9(t)}catch{U("Expression parse error: "+t)}i.visit(s=>{if(s.type!==Tne)return;const o=s.callee.name,a=qne.visitors[o];a&&a(o,s.arguments,e,n)});const r=sM(i);return r.globals.forEach(s=>{const o=Hne+s;!Ae(n,o)&&e.getSignal(s)&&(n[o]=e.signalRef(s))}),{$expr:ze({code:r.code},e.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function b5e(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(i=>e.parseOperator(i)),n.forEach(i=>e.parseOperatorParameters(i)),(t.streams||[]).forEach(i=>e.parseStream(i)),(t.updates||[]).forEach(i=>e.parseUpdate(i)),e.resolve()}const x5e=ta(["rule"]),cW=ta(["group","image","rect"]);function _5e(t,e){let n="";return x5e[e]||(t.x2&&(t.x?(cW[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(cW[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function d9(t){return(t+"").toLowerCase()}function R5e(t){return d9(t)==="operator"}function T5e(t){return d9(t)==="collect"}function Fy(t,e,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...e.concat(n));return t&&t.functions?i.bind(t.functions):i}function A5e(t,e,n,i){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var D5e={operator:(t,e)=>Fy(t,["_"],e.code),parameter:(t,e)=>Fy(t,["datum","_"],e.code),event:(t,e)=>Fy(t,["event"],e.code),handler:(t,e)=>{const n=`var datum=event.item&&event.item.datum;return ${e.code};`;return Fy(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:i}=e;let r="var o=item,datum=o.datum,m=0,$;";for(const s in i){const o="o["+ae(s)+"]";r+=`$=${i[s].code};if(${o}!==$)${o}=$,m=1;`}return r+=_5e(i,n),r+="return m;",Fy(t,["item","_"],r)},codegen:{get(t){const e=`[${t.map(ae).join("][")}]`,n=Function("_",`return _${e};`);return n.path=e,n},comparator(t,e){let n;const i=(s,o)=>{const a=e[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),A5e(l,u,-a,a)},r=Function("a","b","var u, v; return "+t.map(i).join("")+"0;");return n?r.bind(n):r}}};function O5e(t){const e=this;R5e(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function P5e(t){const e=this;if(t.params){const n=e.get(t.id);n||U("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function F5e(t,e){e=e||{};const n=this;for(const i in t){const r=t[i];e[i]=j(r)?r.map(s=>dW(s,n,e)):dW(r,n,e)}return e}function dW(t,e,n){if(!t||!he(t))return t;for(let i=0,r=hW.length,s;i<r;++i)if(s=hW[i],Ae(t,s.key))return s.parse(t,e,n);return t}var hW=[{key:"$ref",parse:M5e},{key:"$key",parse:L5e},{key:"$expr",parse:N5e},{key:"$field",parse:I5e},{key:"$encode",parse:G5e},{key:"$compare",parse:k5e},{key:"$context",parse:$5e},{key:"$subflow",parse:H5e},{key:"$tupleid",parse:W5e}];function M5e(t,e){return e.get(t.$ref)||U("Operator not defined: "+t.$ref)}function N5e(t,e,n){t.$params&&e.parseParameters(t.$params,n);const i="e:"+t.$expr.code;return e.fn[i]||(e.fn[i]=Kr(e.parameterExpression(t.$expr),t.$fields))}function L5e(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=UI(t.$key,t.$flat,e.expr.codegen))}function I5e(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Gr(t.$field,t.$name,e.expr.codegen))}function k5e(t,e){const n="c:"+t.$compare+"_"+t.$order,i=de(t.$compare).map(r=>r&&r.$tupleid?Re:r);return e.fn[n]||(e.fn[n]=BI(i,t.$order,e.expr.codegen))}function G5e(t,e){const n=t.$encode,i={};for(const r in n){const s=n[r];i[r]=Kr(e.encodeExpression(s.$expr),s.$fields),i[r].output=s.$output}return i}function $5e(t,e){return e}function H5e(t,e){const n=t.$subflow;return function(i,r,s){const o=e.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>e.detach(o),a}}function W5e(){return Re}function V5e(t){var e=this,n=t.filter!=null?e.eventExpression(t.filter):void 0,i=t.stream!=null?e.get(t.stream):void 0,r;t.source?i=e.events(t.source,t.type,n):t.merge&&(r=t.merge.map(s=>e.get(s)),i=r[0].merge.apply(r[0],r.slice(1))),t.between&&(r=t.between.map(s=>e.get(s)),i=i.between(r[0],r[1])),t.filter&&(i=i.filter(n)),t.throttle!=null&&(i=i.throttle(+t.throttle)),t.debounce!=null&&(i=i.debounce(+t.debounce)),i==null&&U("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}function B5e(t){var e=this,n=he(n=t.source)?n.$ref:n,i=e.get(n),r=null,s=t.update,o=void 0;i||U("Source not defined: "+t.source),r=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),s&&s.$expr&&(s.$params&&(o=e.parseParameters(s.$params)),s=e.handlerExpression(s.$expr)),e.update(t,i,r,s,o)}const z5e={skip:!0};function U5e(t){var e=this,n={};if(t.signals){var i=n.signals={};Object.keys(e.signals).forEach(s=>{const o=e.signals[s];t.signals(s,o)&&(i[s]=o.value)})}if(t.data){var r=n.data={};Object.keys(e.data).forEach(s=>{const o=e.data[s];t.data(s,o)&&(r[s]=o.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(s=>s.getState(t))),n}function j5e(t){var e=this,n=e.dataflow,i=t.data,r=t.signals;Object.keys(r||{}).forEach(s=>{n.update(e.signals[s],r[s],z5e)}),Object.keys(i||{}).forEach(s=>{n.pulse(e.data[s].input,n.changeset().remove(ro).insert(i[s]))}),(t.subcontext||[]).forEach((s,o)=>{const a=e.subcontext[o];a&&a.setState(s)})}function Kne(t,e,n,i){return new Xne(t,e,n,i)}function Xne(t,e,n,i){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=i||D5e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function fW(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}Xne.prototype=fW.prototype={fork(){const t=new fW(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,i=n.dataflow,r=t.value;if(n.set(t.id,e),T5e(t.type)&&r&&(r.$ingest?i.ingest(e,r.$ingest,r.$format):r.$request?i.preload(e,r.$request,r.$format):i.pulse(e,i.changeset().insert(r))),t.root&&(n.root=e),t.parent){let s=n.get(t.parent.$ref);s?(i.connect(s,[e]),e.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(t.parent.$ref),i.connect(s,[e]),e.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const s in t.data){const o=n.data[s]||(n.data[s]={});t.data[s].forEach(a=>o[a]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[d9(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,i,r){this.dataflow.on(e,n,i,r,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:b5e,parseOperator:O5e,parseOperatorParameters:P5e,parseParameters:F5e,parseStream:V5e,parseUpdate:B5e,getState:U5e,setState:j5e};function Y5e(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),Qne(e,t.description()))}function Qne(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function q5e(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const SO="default";function K5e(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:SO,item:null}));t.on(t.events("view","mousemove"),e,(n,i)=>{const r=e.value,s=r?ce(r)?r:r.user:SO,o=i.item&&i.item.cursor||null;return r&&s===r.user&&o==r.item?r:{user:s,item:o}}),t.add(null,function(n){let i=n.cursor,r=this.value;return ce(i)||(r=i.item,i=i.user),oM(t,i&&i!==SO?i:r||i),r},{cursor:e})}function oM(t,e){const n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return e==null?n.style.removeProperty("cursor"):n.style.cursor=e}function Dx(t,e){var n=t._runtime.data;return Ae(n,e)||U("Unrecognized data set: "+e),n[e]}function X5e(t,e){return arguments.length<2?Dx(this,t).values.value:bT.call(this,t,If().remove(ro).insert(e))}function bT(t,e){SQ(e)||U("Second argument to changes must be a changeset.");const n=Dx(this,t);return n.modified=!0,this.pulse(n.input,e)}function Q5e(t,e){return bT.call(this,t,If().insert(e))}function J5e(t,e){return bT.call(this,t,If().remove(e))}function Jne(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function Zne(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function xT(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function Z5e(t){var e=xT(t),n=Jne(t),i=Zne(t);t._renderer.background(t.background()),t._renderer.resize(n,i,e),t._handler.origin(e),t._resizeListeners.forEach(r=>{try{r(n,i)}catch(s){t.error(s)}})}function e$e(t,e,n){var i=t._renderer,r=i&&i.canvas(),s,o,a;return r&&(a=xT(t),o=e.changedTouches?e.changedTouches[0]:e,s=cT(o,r),s[0]-=a[0],s[1]-=a[1]),e.dataflow=t,e.item=n,e.vega=t$e(t,n,s),e}function t$e(t,e,n){const i=e?e.mark.marktype==="group"?e:e.mark.group:null;function r(o){var a=i,l;if(o){for(l=e;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;ce(o)&&(o=r(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ii(t),item:Ii(e||{}),group:r,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const pW="view",n$e="timer",i$e="window",r$e={trap:!1};function s$e(t){const e=ze({defaults:{}},t),n=(i,r)=>{r.forEach(s=>{j(i[s])&&(i[s]=ta(i[s]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function eie(t,e,n,i){t._eventListeners.push({type:n,sources:de(e),handler:i})}function o$e(t,e){var n=t._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[e]:r?!r[e]:t.preventDefault()}function iS(t,e,n){const i=t._eventConfig&&t._eventConfig[e];return i===!1||he(i)&&!i[n]?(t.warn(`Blocked ${e} ${n} event listener.`),!1):!0}function a$e(t,e,n){var i=this,r=new NR(n),s=function(u,c){i.runAsync(null,()=>{t===pW&&o$e(i,e)&&u.preventDefault(),r.receive(e$e(i,u,c))})},o;if(t===n$e)iS(i,"timer",e)&&i.timer(s,e);else if(t===pW)iS(i,"view",e)&&i.addEventListener(e,s,r$e);else if(t===i$e?iS(i,"window",e)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&iS(i,"selector",e)&&(o=Array.from(document.querySelectorAll(t))),!o)i.warn("Can not resolve event source: "+t);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(e,s);eie(i,o,e,s)}return r}function gW(t){return t.item}function mW(t){return t.item.mark.source}function yW(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function l$e(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",gW),mW,yW(t)),this.on(this.events("view","mouseout",gW),mW,yW(e)),this}function u$e(){var t=this._tooltip,e=this._timers,n=this._eventListeners,i,r,s;for(i=e.length;--i>=0;)e[i].stop();for(i=n.length;--i>=0;)for(s=n[i],r=s.sources.length;--r>=0;)s.sources[r].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function ys(t,e,n){const i=document.createElement(t);for(const r in e)i.setAttribute(r,e[r]);return n!=null&&(i.textContent=n),i}const c$e="vega-bind",d$e="vega-bind-name",h$e="vega-bind-radio";function f$e(t,e,n){if(!e)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:o=>{o!=t.signal(i.signal)&&t.runAsync(null,()=>{r.source=!0,t.signal(i.signal,o)})}},i.debounce&&(r.update=zI(i.debounce,r.update))),(i.input==null&&i.element?p$e:m$e)(r,e,i,t),r.active||(t.on(t._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(t.signal(i.signal))}),r.active=!0),r}function p$e(t,e,n,i){const r=n.event||"input",s=()=>t.update(e.value);i.signal(n.signal,e.value),e.addEventListener(r,s),eie(i,e,r,s),t.set=o=>{e.value=o,e.dispatchEvent(g$e(r))}}function g$e(t){return typeof Event<"u"?new Event(t):{type:t}}function m$e(t,e,n,i){const r=i.signal(n.signal),s=ys("div",{class:c$e}),o=n.input==="radio"?s:s.appendChild(ys("label"));o.appendChild(ys("span",{class:d$e},n.name||n.signal)),e.appendChild(s);let a=y$e;switch(n.input){case"checkbox":a=v$e;break;case"select":a=C$e;break;case"radio":a=w$e;break;case"range":a=S$e;break}a(t,o,n,r)}function y$e(t,e,n,i){const r=ys("input");for(const s in n)s!=="signal"&&s!=="element"&&r.setAttribute(s==="input"?"type":s,n[s]);r.setAttribute("name",n.signal),r.value=i,e.appendChild(r),r.addEventListener("input",()=>t.update(r.value)),t.elements=[r],t.set=s=>r.value=s}function v$e(t,e,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const s=ys("input",r);e.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=o=>s.checked=!!o||null}function C$e(t,e,n,i){const r=ys("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};Ox(o,i)&&(l.selected=!0),r.appendChild(ys("option",l,(s[a]||o)+""))}),e.appendChild(r),r.addEventListener("change",()=>{t.update(n.options[r.selectedIndex])}),t.elements=[r],t.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(Ox(n.options[a],o)){r.selectedIndex=a;return}}}function w$e(t,e,n,i){const r=ys("span",{class:h$e}),s=n.labels||[];e.appendChild(r),t.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};Ox(o,i)&&(l.checked=!0);const u=ys("input",l);u.addEventListener("change",()=>t.update(o));const c=ys("label",{},(s[a]||o)+"");return c.prepend(u),r.appendChild(c),u}),t.set=o=>{const a=t.elements,l=a.length;for(let u=0;u<l;++u)Ox(a[u].value,o)&&(a[u].checked=!0)}}function S$e(t,e,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,s=n.min||Math.min(0,r,+i)||0,o=n.step||Wc(s,r,100),a=ys("input",{type:"range",name:n.signal,min:s,max:r,step:o});a.value=i;const l=ys("span",{},+i);e.appendChild(a),e.appendChild(l);const u=()=>{l.textContent=a.value,t.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),t.elements=[a],t.set=c=>{a.value=c,l.textContent=c}}function Ox(t,e){return t===e||t+""==e+""}function tie(t,e,n,i,r,s){return e=e||new i(t.loader()),e.initialize(n,Jne(t),Zne(t),xT(t),r,s).background(t.background())}function h9(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function E$e(t,e,n,i){const r=new i(t.loader(),h9(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,xT(t),t);return e&&e.handlers().forEach(s=>{r.on(s.type,s.handler)}),r}function b$e(t,e){const n=this,i=n._renderType,r=n._eventConfig.bind,s=dT(i);t=n._el=t?EO(n,t,!0):null,Y5e(n),s||n.error("Unrecognized renderer type: "+i);const o=s.handler||IC,a=t?s.renderer:s.headless;return n._renderer=a?tie(n,n._renderer,t,a):null,n._handler=E$e(n,n._handler,t,o),n._redraw=!0,t&&r!=="none"&&(e=e?n._elBind=EO(n,e,!0):t.appendChild(ys("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=EO(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{f$e(n,l.element||e,l)})),n}function EO(t,e,n){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&n)try{e.textContent=""}catch(i){e=null,t.error(i)}return e}const My=t=>+t||0,x$e=t=>({top:t,bottom:t,left:t,right:t});function vW(t){return he(t)?{top:My(t.top),bottom:My(t.bottom),left:My(t.left),right:My(t.right)}:x$e(My(t))}async function f9(t,e,n,i){const r=dT(e),s=r&&r.headless;return s||U("Unrecognized renderer type: "+e),await t.runAsync(),tie(t,null,null,s,n,i).renderAsync(t._scenegraph.root)}async function _$e(t,e){t!==hc.Canvas&&t!==hc.SVG&&t!==hc.PNG&&U("Unrecognized image type: "+t);const n=await f9(this,t,e);return t===hc.SVG?R$e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function R$e(t,e){const n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function T$e(t,e){return(await f9(this,hc.Canvas,t,e)).canvas()}async function A$e(t){return(await f9(this,hc.SVG,t)).svg()}function D$e(t,e,n){return Kne(t,Pg,u1,n).parse(e)}function O$e(t){var e=this._runtime.scales;return Ae(e,t)||U("Unrecognized scale or projection: "+t),e[t].value}var nie="width",iie="height",p9="padding",CW={skip:!0};function rie(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===p9?i.left+i.right:0)}function sie(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===p9?i.top+i.bottom:0)}function P$e(t){var e=t._signals,n=e[nie],i=e[iie],r=e[p9];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,a=>{t._width=a.size,t._viewWidth=rie(t,a.size),s()},{size:n}),t._resizeHeight=t.add(null,a=>{t._height=a.size,t._viewHeight=sie(t,a.size),s()},{size:i});const o=t.add(null,s,{pad:r});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}function F$e(t,e,n,i,r,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(nie,n,CW),o._resizeWidth.skip(!0)),o.height()!==i&&(a=1,o.signal(iie,i,CW),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),(o._origin[0]!==r[0]||o._origin[1]!==r[1])&&(o._resize=1,o._origin=r),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function M$e(t){return this._runtime.getState(t||{data:N$e,signals:L$e,recurse:!0})}function N$e(t,e){return e.modified&&j(e.input.value)&&t.indexOf("_:vega:_")}function L$e(t,e){return!(t==="parent"||e instanceof Pg.proxy)}function I$e(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function k$e(t,e){function n(i){t({timestamp:Date.now(),elapsed:i})}this._timers.push(cIe(n,e))}function G$e(t,e,n,i){const r=t.element();r&&r.setAttribute("title",$$e(i))}function $$e(t){return t==null?"":j(t)?oie(t):he(t)&&!Rc(t)?H$e(t):t+""}function H$e(t){return Object.keys(t).map(e=>{const n=t[e];return e+": "+(j(n)?oie(n):aie(n))}).join(`
`)}function oie(t){return"["+t.map(aie).join(", ")+"]"}function aie(t){return j(t)?"[]":he(t)&&!Rc(t)?"{}":t}function lie(t,e){const n=this;if(e=e||{},Up.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),e.logLevel!=null&&n.logLevel(e.logLevel),e.locale||t.locale){const s=ze({},t.locale,e.locale);n.locale(dQ(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||hc.Canvas,n._scenegraph=new qk;const i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||G$e,n._redraw=!0,n._handler=new IC().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=s$e(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=D$e(n,t,e.expr);n._runtime=r,n._signals=r.signals,n._bind=(t.bindings||[]).map(s=>({state:null,param:ze({},s)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=rie(n,n._width),n._viewHeight=sie(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,P$e(n),q5e(n),K5e(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function rS(t,e){return Ae(t._signals,e)?t._signals[e]:U("Unrecognized signal name: "+ae(e))}function uie(t,e){const n=(t._targets||[]).filter(i=>i._update&&i._update.handler===e);return n.length?n[0]:null}function wW(t,e,n,i){let r=uie(n,i);return r||(r=h9(t,()=>i(e,n.value)),r.handler=i,t.on(n,null,r)),t}function SW(t,e,n){const i=uie(e,n);return i&&e._targets.remove(i),t}le(lie,Up,{async evaluate(t,e,n){if(await Up.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Z5e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&zS(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=t!=null?t+"":null;return e!==this._desc&&Qne(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const i=rS(this,t);return arguments.length===1?i.value:this.update(i,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",vW(t)):vW(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(dT(t)||U("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Up.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(rS(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:F$e,addEventListener(t,e,n){let i=e;return n&&n.trap===!1||(i=h9(this,e),i.raw=e),this._handler.on(t,i),this},removeEventListener(t,e){for(var n=this._handler.handlers(t),i=n.length,r,s;--i>=0;)if(s=n[i].type,r=n[i].handler,t===s&&(e===r||e===r.raw)){this._handler.off(s,r);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return wW(this,t,rS(this,t),e)},removeSignalListener(t,e){return SW(this,rS(this,t),e)},addDataListener(t,e){return wW(this,t,Dx(this,t).values,e)},removeDataListener(t,e){return SW(this,Dx(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=oM(this,null);this._globalCursor=!!t,e&&oM(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:k$e,events:a$e,finalize:u$e,hover:l$e,data:X5e,change:bT,insert:Q5e,remove:J5e,scale:O$e,initialize:b$e,toImageURL:_$e,toCanvas:T$e,toSVG:A$e,getState:M$e,setState:I$e});const W$e="view",Px="[",Fx="]",cie="{",die="}",V$e=":",hie=",",B$e="@",z$e=">",U$e=/[[\]{}]/,j$e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let fie,pie;function bd(t,e,n){return fie=e||W$e,pie=n||j$e,gie(t.trim()).map(aM)}function Y$e(t){return pie[t]}function U0(t,e,n,i,r){const s=t.length;let o=0,a;for(;e<s;++e){if(a=t[e],!o&&a===n)return e;r&&r.indexOf(a)>=0?--o:i&&i.indexOf(a)>=0&&++o}return e}function gie(t){const e=[],n=t.length;let i=0,r=0;for(;r<n;)r=U0(t,r,hie,Px+cie,Fx+die),e.push(t.substring(i,r).trim()),i=++r;if(e.length===0)throw"Empty event selector: "+t;return e}function aM(t){return t[0]==="["?q$e(t):K$e(t)}function q$e(t){const e=t.length;let n=1,i;if(n=U0(t,n,Fx,Px,Fx),n===e)throw"Empty between selector: "+t;if(i=gie(t.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==z$e)throw"Expected '>' after between selector: "+t;i=i.map(aM);const r=aM(t.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function K$e(t){const e={source:fie},n=[];let i=[0,0],r=0,s=0,o=t.length,a=0,l,u;if(t[o-1]===die){if(a=t.lastIndexOf(cie),a>=0){try{i=X$e(t.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,a).trim(),o=t.length}else throw"Unmatched right brace: "+t;a=0}if(!o)throw t;if(t[0]===B$e&&(r=++a),l=U0(t,a,V$e),l<o&&(n.push(t.substring(s,l).trim()),s=a=++l),a=U0(t,a,Px),a===o)n.push(t.substring(s,o).trim());else if(n.push(t.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+t;for(;a<o;){if(a=U0(t,a,Fx),a===o)throw"Unmatched left bracket: "+t;if(u.push(t.substring(s,a).trim()),a<o-1&&t[++a]!==Px)throw"Expected left bracket: "+t;s=++a}if(!(o=n.length)||U$e.test(n[o-1]))throw"Invalid event selector: "+t;return o>1?(e.type=n[1],r?e.markname=n[0].slice(1):Y$e(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),i[0]&&(e.throttle=i[0]),i[1]&&(e.debounce=i[1]),e}function X$e(t){const e=t.split(hie);if(!t.length||e.length>2)throw t;return e.map(n=>{const i=+n;if(i!==i)throw t;return i})}function Q$e(t){return he(t)?t:{type:t||"pad"}}const Ny=t=>+t||0,J$e=t=>({top:t,bottom:t,left:t,right:t});function Z$e(t){return he(t)?t.signal?t:{top:Ny(t.top),bottom:Ny(t.bottom),left:Ny(t.left),right:Ny(t.right)}:J$e(Ny(t))}const Hn=t=>he(t)&&!j(t)?ze({},t):{value:t};function EW(t,e,n,i){return n!=null?(he(n)&&!j(n)||j(n)&&n.length&&he(n[0])?t.update[e]=n:t[i||"enter"][e]={value:n},1):0}function ai(t,e,n){for(const i in e)EW(t,i,e[i]);for(const i in n)EW(t,i,n[i],"update")}function Xm(t,e,n){for(const i in e)n&&Ae(n,i)||(t[i]=ze(t[i]||{},e[i]));return t}function fp(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const g9="mark",m9="frame",y9="scope",e4e="axis",t4e="axis-domain",n4e="axis-grid",i4e="axis-label",r4e="axis-tick",s4e="axis-title",o4e="legend",a4e="legend-band",l4e="legend-entry",u4e="legend-gradient",mie="legend-label",c4e="legend-symbol",d4e="legend-title",h4e="title",f4e="title-text",p4e="title-subtitle";function g4e(t,e,n,i,r){const s={},o={};let a,l,u,c;l="lineBreak",e==="text"&&r[l]!=null&&!fp(l,t)&&bO(s,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===m9?r.group:n===g9?ze({},r.mark,r[e]):null;for(l in c)u=fp(l,t)||(l==="fill"||l==="stroke")&&(fp("fill",t)||fp("stroke",t)),u||bO(s,l,c[l]);de(i).forEach(d=>{const h=r.style&&r.style[d];for(const f in h)fp(f,t)||bO(s,f,h[f])}),t=ze({},t);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return t.enter=ze(o,t.enter),a&&(t.update=ze(a,t.update)),t}function bO(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const yie=t=>ce(t)?ae(t):t.signal?`(${t.signal})`:vie(t);function _T(t){if(t.gradient!=null)return y4e(t);let e=t.signal?`(${t.signal})`:t.color?m4e(t.color):t.field!=null?vie(t.field):t.value!==void 0?ae(t.value):void 0;return t.scale!=null&&(e=v4e(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${aE(t.exponent)})`),t.mult!=null&&(e+=`*${aE(t.mult)}`),t.offset!=null&&(e+=`+${aE(t.offset)}`),t.round&&(e=`round(${e})`),e}const sS=(t,e,n,i)=>`(${t}(${[e,n,i].map(_T).join(",")})+'')`;function m4e(t){return t.c?sS("hcl",t.h,t.c,t.l):t.h||t.s?sS("hsl",t.h,t.s,t.l):t.l||t.a?sS("lab",t.l,t.a,t.b):t.r||t.g||t.b?sS("rgb",t.r,t.g,t.b):null}function y4e(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:ae(n));for(;e.length&&at(e)==null;)e.pop();return e.unshift(yie(t.gradient)),`gradient(${e.join(",")})`}function aE(t){return he(t)?"("+_T(t)+")":t}function vie(t){return Cie(he(t)?t:{datum:t})}function Cie(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group}else t.datum?(e="datum",i=t.datum):U("Invalid field reference: "+ae(t));return t.signal||(i=ce(i)?ml(i).map(ae).join("]["):Cie(i)),e+"["+i+"]"}function v4e(t,e){const n=yie(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+aE(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function C4e(t){let e="";return t.forEach(n=>{const i=_T(n);e+=n.test?`(${n.test})?${i}:`:i}),at(e)===":"&&(e+="null"),e}function wie(t,e,n,i,r,s){const o={};s=s||{},s.encoders={$encode:o},t=g4e(t,e,n,i,r.config);for(const a in t)o[a]=w4e(t[a],e,s,r);return s}function w4e(t,e,n,i){const r={},s={};for(const o in t)t[o]!=null&&(r[o]=E4e(S4e(t[o]),i,n,s));return{$expr:{marktype:e,channels:r},$fields:Object.keys(s),$output:Object.keys(t)}}function S4e(t){return j(t)?C4e(t):_T(t)}function E4e(t,e,n,i){const r=ol(t,e);return r.$fields.forEach(s=>i[s]=1),ze(n,r.$params),r.$expr}const b4e="outer",x4e=["value","update","init","react","bind"];function bW(t,e){U(t+' for "outer" push: '+ae(e))}function Sie(t,e){const n=t.name;if(t.push===b4e)e.signals[n]||bW("No prior signal definition",n),x4e.forEach(i=>{t[i]!==void 0&&bW("Invalid property ",i)});else{const i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}function lM(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i)}function RT(t,e,n,i){return new lM(t,e,n,i)}function Mx(t,e){return RT("operator",t,e)}function _e(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function c1(t,e){return e?{$field:t,$name:e}:{$field:t}}const uM=c1("key");function xW(t,e){return{$compare:t,$order:e}}function _4e(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const R4e="ascending",T4e="descending";function A4e(t){return he(t)?(t.order===T4e?"-":"+")+TT(t.op,t.field):""}function TT(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const v9="scope",cM="view";function Tn(t){return t&&t.signal}function D4e(t){return t&&t.expr}function lE(t){if(Tn(t))return!0;if(he(t)){for(const e in t)if(lE(t[e]))return!0}return!1}function To(t,e){return t??e}function Th(t){return t&&t.signal||t}const _W="timer";function d1(t,e){return(t.merge?P4e:t.stream?F4e:t.type?M4e:U("Invalid stream specification: "+ae(t)))(t,e)}function O4e(t){return t===v9?cM:t||cM}function P4e(t,e){const n=t.merge.map(r=>d1(r,e)),i=C9({merge:n},t,e);return e.addStream(i).id}function F4e(t,e){const n=d1(t.stream,e),i=C9({stream:n},t,e);return e.addStream(i).id}function M4e(t,e){let n;t.type===_W?(n=e.event(_W,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(O4e(t.source),t.type);const i=C9({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id}function C9(t,e,n){let i=e.between;return i&&(i.length!==2&&U('Stream "between" parameter must have 2 entries: '+ae(e)),t.between=[d1(i[0],n),d1(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push(N4e(e.marktype,e.markname,e.markrole)),e.source===v9&&i.push("inScope(event.item)"),i.length&&(t.filter=ol("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t}function N4e(t,e,n){const i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"")}const L4e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function I4e(t,e,n){const i=t.encode,r={target:n};let s=t.events,o=t.update,a=[];s||U("Signal update missing events specification."),ce(s)&&(s=bd(s,e.isSubscope()?v9:cM)),s=de(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[G4e(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),i!=null&&(o&&U("Signal encode and update are mutually exclusive."),o="encode(item(),"+ae(i)+")"),r.update=ce(o)?ol(o,e):o.expr!=null?ol(o.expr,e):o.value!=null?o.value:o.signal!=null?{$expr:L4e,$params:{$value:e.signalRef(o.signal)}}:U("Invalid signal update specification."),t.force&&(r.options={force:!0}),a.forEach(l=>e.addUpdate(ze(k4e(l,e),r)))}function k4e(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):d1(t,e)}}function G4e(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function $4e(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?U("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=ol(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(r=>I4e(r,e,n.id))}const Pt=t=>(e,n,i)=>RT(t,n,e||void 0,i),Eie=Pt("aggregate"),H4e=Pt("axisticks"),bie=Pt("bound"),ua=Pt("collect"),RW=Pt("compare"),W4e=Pt("datajoin"),xie=Pt("encode"),V4e=Pt("expression"),B4e=Pt("facet"),z4e=Pt("field"),U4e=Pt("key"),j4e=Pt("legendentries"),Y4e=Pt("load"),q4e=Pt("mark"),K4e=Pt("multiextent"),X4e=Pt("multivalues"),Q4e=Pt("overlap"),J4e=Pt("params"),_ie=Pt("prefacet"),Z4e=Pt("projection"),eHe=Pt("proxy"),tHe=Pt("relay"),Rie=Pt("render"),nHe=Pt("scale"),Hf=Pt("sieve"),iHe=Pt("sortitems"),Tie=Pt("viewlayout"),rHe=Pt("values");let sHe=0;const Aie={min:"min",max:"max",count:"sum"};function oHe(t,e){const n=t.type||"linear";EZ(n)||U("Unrecognized scale type: "+ae(n)),e.addScale(t.name,{type:n,domain:void 0})}function aHe(t,e){const n=e.getScale(t.name).params;let i;n.domain=Die(t.domain,t,e),t.range!=null&&(n.range=Pie(t,e,n)),t.interpolate!=null&&yHe(t.interpolate,n),t.nice!=null&&(n.nice=mHe(t.nice)),t.bins!=null&&(n.bins=gHe(t.bins,e));for(i in t)Ae(n,i)||i==="name"||(n[i]=Us(t[i],e))}function Us(t,e){return he(t)?t.signal?e.signalRef(t.signal):U("Unsupported object: "+ae(t)):t}function uE(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>Us(n,e))}function AT(t){U("Can not find data set: "+ae(t))}function Die(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&U("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(j(t)?lHe:t.fields?cHe:uHe)(t,e,n)}function lHe(t,e,n){return t.map(i=>Us(i,n))}function uHe(t,e,n){const i=n.getData(t.data);return i||AT(t.data),Ig(e.type)?i.valuesRef(n,t.field,Oie(t.sort,!1)):_Z(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field)}function cHe(t,e,n){const i=t.data,r=t.fields.reduce((s,o)=>(o=ce(o)?{data:i,field:o}:j(o)||o.signal?dHe(o,n):o,s.push(o),s),[]);return(Ig(e.type)?hHe:_Z(e.type)?fHe:pHe)(t,n,r)}function dHe(t,e){const n="_:vega:_"+sHe++,i=ua({});if(j(t))i.value={$ingest:t};else if(t.signal){const r="setdata("+ae(n)+","+t.signal+")";i.params.input=e.signalRef(r)}return e.addDataPipeline(n,[i,Hf({})]),{data:n,field:"data"}}function hHe(t,e,n){const i=Oie(t.sort,!0);let r,s;const o=n.map(u=>{const c=e.getData(u.data);return c||AT(u.data),c.countsRef(e,u.field,i)}),a={groupby:uM,pulse:o};i&&(r=i.op||"count",s=i.field?TT(r,i.field):"count",a.ops=[Aie[r]],a.fields=[e.fieldRef(s)],a.as=[s]),r=e.add(Eie(a));const l=e.add(ua({pulse:_e(r)}));return s=e.add(rHe({field:uM,sort:e.sortRef(i),pulse:_e(l)})),_e(s)}function Oie(t,e){return t&&(!t.field&&!t.op?he(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?U("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!Aie[t.op]&&U("Multiple domain scales can not be sorted using "+t.op)),t}function fHe(t,e,n){const i=n.map(r=>{const s=e.getData(r.data);return s||AT(r.data),s.domainRef(e,r.field)});return _e(e.add(X4e({values:i})))}function pHe(t,e,n){const i=n.map(r=>{const s=e.getData(r.data);return s||AT(r.data),s.extentRef(e,r.field)});return _e(e.add(K4e({extents:i})))}function gHe(t,e){return t.signal||j(t)?uE(t,e):e.objectProperty(t)}function mHe(t){return he(t)?{interval:Us(t.interval),step:Us(t.step)}:Us(t)}function yHe(t,e){e.interpolate=Us(t.type||t),t.gamma!=null&&(e.interpolateGamma=Us(t.gamma))}function Pie(t,e,n){const i=e.config.range;let r=t.range;if(r.signal)return e.signalRef(r.signal);if(ce(r)){if(i&&Ae(i,r))return t=ze({},t,{range:i[r]}),Pie(t,e,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Ig(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:U("Unrecognized scale range value: "+ae(r))}else if(r.scheme){n.scheme=j(r.scheme)?uE(r.scheme,e):Us(r.scheme,e),r.extent&&(n.schemeExtent=uE(r.extent,e)),r.count&&(n.schemeCount=Us(r.count,e));return}else if(r.step){n.rangeStep=Us(r.step,e);return}else{if(Ig(t.type)&&!j(r))return Die(r,t,e);j(r)||U("Unsupported range type: "+ae(r))}return r.map(s=>(j(s)?uE:Us)(s,e))}function vHe(t,e){const n=e.config.projection||{},i={};for(const r in t)r!=="name"&&(i[r]=dM(t[r],r,e));for(const r in n)i[r]==null&&(i[r]=dM(n[r],r,e));e.addProjection(t.name,i)}function dM(t,e,n){return j(t)?t.map(i=>dM(i,e,n)):he(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:U("Unsupported parameter object: "+ae(t)):t}const ca="top",Qm="left",Jm="right",Xc="bottom",Fie="center",CHe="vertical",wHe="start",SHe="middle",EHe="end",hM="index",w9="label",bHe="offset",jg="perc",xHe="perc2",Qs="value",UC="guide-label",S9="guide-title",_He="group-title",RHe="group-subtitle",TW="symbol",cE="gradient",fM="discrete",pM="size",THe="shape",AHe="fill",DHe="stroke",OHe="strokeWidth",PHe="strokeDash",FHe="opacity",E9=[pM,THe,AHe,DHe,OHe,PHe,FHe],jC={name:1,style:1,interactive:1},ct={value:0},Js={value:1},DT="group",Mie="rect",b9="rule",MHe="symbol",Wf="text";function h1(t){return t.type=DT,t.interactive=t.interactive||!1,t}function Xr(t,e){const n=(i,r)=>To(t[i],To(e[i],r));return n.isVertical=i=>CHe===To(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>To(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>To(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>To(t.columns,To(e.columns,+n.isVertical(!0))),n}function Nie(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function NHe(t,e,n){const i=e.config.style[n];return i&&i[t]}function OT(t,e,n){return`item.anchor === '${wHe}' ? ${t} : item.anchor === '${EHe}' ? ${e} : ${n}`}const x9=OT(ae(Qm),ae(Jm),ae(Fie));function LHe(t){const e=t("tickBand");let n=t("tickOffset"),i,r;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${e.signal}) === 'extent'`},he(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=t("bandPosition"),r=t("tickExtra")),{extra:r,band:i,offset:n}}function Lie(t,e){return e?t?he(t)?Object.assign({},t,{offset:Lie(t.offset,e)}):{value:t,offset:e}:e:t}function bs(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=Xm(t.encode,e,jC)):t.interactive=!1,t}function IHe(t,e,n,i){const r=Xr(t,n),s=r.isVertical(),o=r.gradientThickness(),a=r.gradientLength();let l,u,c,d,h;s?(u=[0,1],c=[0,0],d=o,h=a):(u=[0,0],c=[1,0],d=a,h=o);const f={enter:l={opacity:ct,x:ct,y:ct,width:Hn(d),height:Hn(h)},update:ze({},l,{opacity:Js,fill:{gradient:e,start:u,stop:c}}),exit:{opacity:ct}};return ai(f,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),bs({type:Mie,role:u4e,encode:f},i)}function kHe(t,e,n,i,r){const s=Xr(t,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,d,h,f="";o?(u="y",d="y2",c="x",h="width",f="1-"):(u="x",d="x2",c="y",h="height");const p={opacity:ct,fill:{scale:e,field:Qs}};p[u]={signal:f+"datum."+jg,mult:l},p[c]=ct,p[d]={signal:f+"datum."+xHe,mult:l},p[h]=Hn(a);const g={enter:p,update:ze({},p,{opacity:Js}),exit:{opacity:ct}};return ai(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),bs({type:Mie,role:a4e,key:Qs,from:r,encode:g},i)}const GHe=`datum.${jg}<=0?"${Qm}":datum.${jg}>=1?"${Jm}":"${Fie}"`,$He=`datum.${jg}<=0?"${Xc}":datum.${jg}>=1?"${ca}":"${SHe}"`;function AW(t,e,n,i){const r=Xr(t,e),s=r.isVertical(),o=Hn(r.gradientThickness()),a=r.gradientLength();let l=r("labelOverlap"),u,c,d,h,f="";const p={enter:u={opacity:ct},update:c={opacity:Js,text:{field:w9}},exit:{opacity:ct}};return ai(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:To(t.labelLimit,e.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:$He},d="y",h="x",f="1-"):(u.align=c.align={signal:GHe},u.baseline={value:"top"},d="x",h="y"),u[d]=c[d]={signal:f+"datum."+jg,mult:a},u[h]=c[h]=o,o.offset=To(t.labelOffset,e.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+hM}:void 0,bs({type:Wf,role:mie,style:UC,key:Qs,from:i,encode:p,overlap:l},n)}function HHe(t,e,n,i,r){const s=Xr(t,e),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},h=`(${r}) ? datum.${bHe} : datum.${pM}`,f=u?Hn(u):{field:pM},p=`datum.${hM}`,g=`max(1, ${r})`;let m,y,v,C,w;f.mult=.5,m={enter:y={opacity:ct,x:{signal:h,mult:.5,offset:c},y:f},update:v={opacity:Js,x:y.x,y:y.y},exit:{opacity:ct}};let E=null,b=null;t.fill||(E=e.symbolBaseFillColor,b=e.symbolBaseStrokeColor),ai(m,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",b),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),E9.forEach(D=>{t[D]&&(v[D]=y[D]={scale:t[D],field:Qs})});const S=bs({type:MHe,role:c4e,key:Qs,from:d,clip:u?!0:void 0,encode:m},n.symbols),_=Hn(c);_.offset=s("labelOffset"),m={enter:y={opacity:ct,x:{signal:h,offset:_},y:f},update:v={opacity:Js,text:{field:w9},x:y.x,y:y.y},exit:{opacity:ct}},ai(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=bs({type:Wf,role:mie,style:UC,key:Qs,from:d,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:ct,height:u?Hn(u):ct,opacity:ct},exit:{opacity:ct},update:v={opacity:Js,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(C=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${C}`,v.column.signal=`floor(${p} / ${C})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,w={field:p}),v.column.signal=`(${r})?${v.column.signal}:${p}`,i={facet:{data:i,name:"value",groupby:hM}},h1({role:y9,from:i,encode:Xm(m,o,jC),marks:[S,A],name:l,interactive:a,sort:w})}function WHe(t,e){const n=Xr(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const _9='item.orient === "left"',R9='item.orient === "right"',PT=`(${_9} || ${R9})`,VHe=`datum.vgrad && ${PT}`,BHe=OT('"top"','"bottom"','"middle"'),zHe=OT('"right"','"left"','"center"'),UHe=`datum.vgrad && ${R9} ? (${zHe}) : (${PT} && !(datum.vgrad && ${_9})) ? "left" : ${x9}`,jHe=`item._anchor || (${PT} ? "middle" : "start")`,YHe=`${VHe} ? (${_9} ? -90 : 90) : 0`,qHe=`${PT} ? (datum.vgrad ? (${R9} ? "bottom" : "top") : ${BHe}) : "top"`;function KHe(t,e,n,i){const r=Xr(t,e),s={enter:{opacity:ct},update:{opacity:Js,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ct}};return ai(s,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:jHe},angle:{signal:YHe},align:{signal:UHe},baseline:{signal:qHe},text:t.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),bs({type:Wf,role:d4e,style:S9,from:i,encode:s},n)}function XHe(t,e){let n;return he(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+DW(t.path)+")":t.sphere&&(n="geoShape("+DW(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function DW(t){return he(t)&&t.signal?t.signal:ae(t)}function Iie(t){const e=t.role||"";return!e.indexOf("axis")||!e.indexOf("legend")||!e.indexOf("title")?e:t.type===DT?y9:e||g9}function QHe(t){return{marktype:t.type,name:t.name||void 0,role:t.role||Iie(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function JHe(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function T9(t,e){const n=xQ(t.type);n||U("Unrecognized transform type: "+ae(t.type));const i=RT(n.type.toLowerCase(),null,kie(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}function kie(t,e,n){const i={},r=t.params.length;for(let s=0;s<r;++s){const o=t.params[s];i[o.name]=ZHe(o,e,n)}return i}function ZHe(t,e,n){const i=t.type,r=e[t.name];if(i==="index")return e6e(t,e,n);if(r===void 0){t.required&&U("Missing required "+ae(e.type)+" parameter: "+ae(t.name));return}else{if(i==="param")return t6e(t,e,n);if(i==="projection")return n.projectionRef(e[t.name])}return t.array&&!Tn(r)?r.map(s=>OW(t,s,n)):OW(t,r,n)}function OW(t,e,n){const i=t.type;if(Tn(e))return FW(i)?U("Expression references can not be signals."):xO(i)?n.fieldRef(e):MW(i)?n.compareRef(e):n.signalRef(e.signal);{const r=t.expr||xO(i);return r&&n6e(e)?n.exprRef(e.expr,e.as):r&&i6e(e)?c1(e.field,e.as):FW(i)?ol(e,n):r6e(i)?_e(n.getData(e).values):xO(i)?c1(e):MW(i)?n.compareRef(e):e}}function e6e(t,e,n){return ce(e.from)||U('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function t6e(t,e,n){const i=e[t.name];return t.array?(j(i)||U("Expected an array of sub-parameters. Instead: "+ae(i)),i.map(r=>PW(t,r,n))):PW(t,i,n)}function PW(t,e,n){const i=t.params.length;let r;for(let o=0;o<i;++o){r=t.params[o];for(const a in r.key)if(r.key[a]!==e[a]){r=null;break}if(r)break}r||U("Unsupported parameter: "+ae(e));const s=ze(kie(r,e,n),r.key);return _e(n.add(J4e(s)))}const n6e=t=>t&&t.expr,i6e=t=>t&&t.field,r6e=t=>t==="data",FW=t=>t==="expr",xO=t=>t==="field",MW=t=>t==="compare";function s6e(t,e,n){let i,r,s,o,a;return t?(i=t.facet)&&(e||U("Only group marks can be faceted."),i.field!=null?o=a=dE(i,n):(t.data?a=_e(n.getData(t.data).aggregate):(s=T9(ze({type:"aggregate",groupby:de(i.groupby)},i.aggregate),n),s.params.key=n.keyRef(i.groupby),s.params.pulse=dE(i,n),o=a=_e(n.add(s))),r=n.keyRef(i.groupby,!0))):o=_e(n.add(ua(null,[{}]))),o||(o=dE(t,n)),{key:r,pulse:o,parent:a}}function dE(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:_e(e.getData(t.data).output)}function tf(t,e,n,i,r){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=r,this.index={}}tf.fromEntries=function(t,e){const n=e.length,i=e[n-1],r=e[n-2];let s=e[0],o=null,a=1;for(s&&s.type==="load"&&(s=e[1]),t.add(e[0]);a<n;++a)e[a].params.pulse=_e(e[a-1]),t.add(e[a]),e[a].type==="aggregate"&&(o=e[a]);return new tf(t,s,r,i,o)};function Gie(t){return ce(t)?t:null}function NW(t,e,n){const i=TT(n.op,n.field);let r;if(e.ops){for(let s=0,o=e.as.length;s<o;++s)if(e.as[s]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function Ly(t,e,n,i,r,s,o){const a=e[n]||(e[n]={}),l=A4e(s);let u=Gie(r),c,d;if(u!=null&&(t=e.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const h=s?{field:uM,pulse:e.countsRef(t,r,s)}:{field:t.fieldRef(r),pulse:_e(e.output)};l&&(h.sort=t.sortRef(s)),d=t.add(RT(i,void 0,h)),o&&(e.index[r]=d),c=_e(d),u!=null&&(a[u]=c)}return c}tf.prototype={countsRef(t,e,n){const i=this,r=i.counts||(i.counts={}),s=Gie(e);let o,a,l;return s!=null&&(t=i.scope,o=r[s]),o?n&&n.field&&NW(t,o.agg.params,n):(l={groupby:t.fieldRef(e,"key"),pulse:_e(i.output)},n&&n.field&&NW(t,l,n),a=t.add(Eie(l)),o=t.add(ua({pulse:_e(a)})),o={agg:a,ref:_e(o)},s!=null&&(r[s]=o)),o.ref},tuplesRef(){return _e(this.values)},extentRef(t,e){return Ly(t,this,"extent","extent",e,!1)},domainRef(t,e){return Ly(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return Ly(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return Ly(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return Ly(t,this,"indata","tupleindex",e,!0,!0)}};function o6e(t,e,n){const i=t.from.facet,r=i.name,s=dE(i,e);let o;i.name||U("Facet must have a name: "+ae(i)),i.data||U("Facet must reference a data set: "+ae(i)),i.field?o=e.add(_ie({field:e.fieldRef(i.field),pulse:s})):i.groupby?o=e.add(B4e({key:e.keyRef(i.groupby),group:_e(e.proxy(n.parent)),pulse:s})):U("Facet must specify groupby or field: "+ae(i));const a=e.fork(),l=a.add(ua()),u=a.add(Hf({pulse:_e(l)}));a.addData(r,new tf(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(t).toRuntime()}}function a6e(t,e,n){const i=e.add(_ie({pulse:n.pulse})),r=e.fork();r.add(Hf()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(t).toRuntime()}}function $ie(t,e,n){const i=t.remove,r=t.insert,s=t.toggle,o=t.modify,a=t.values,l=e.add(Mx()),u="if("+t.trigger+',modify("'+n+'",'+[r,i,s,o,a].map(d=>d??"null").join(",")+"),0)",c=ol(u,e);l.update=c.$expr,l.params=c.$params}function FT(t,e){const n=Iie(t),i=t.type===DT,r=t.from&&t.from.facet,s=t.overlap;let o=t.layout||n===y9||n===m9,a,l,u,c,d,h,f;const p=n===g9||o||r,g=s6e(t.from,i,e);l=e.add(W4e({key:g.key||(t.key?c1(t.key):void 0),pulse:g.pulse,clean:!i}));const m=_e(l);l=u=e.add(ua({pulse:m})),l=e.add(q4e({markdef:QHe(t),interactive:JHe(t.interactive,e),clip:XHe(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:_e(l)}));const y=_e(l);l=c=e.add(xie(wie(t.encode,t.type,n,t.style,e,{mod:!1,pulse:y}))),l.params.parent=e.encode(),t.transform&&t.transform.forEach(b=>{const S=T9(b,e),_=S.metadata;(_.generates||_.changes)&&U("Mark transforms should not generate new data."),_.nomod||(c.params.mod=!0),S.params.pulse=_e(l),e.add(l=S)}),t.sort&&(l=e.add(iHe({sort:e.compareRef(t.sort),pulse:_e(l)})));const v=_e(l);(r||o)&&(o=e.add(Tie({layout:e.objectProperty(t.layout),legends:e.legends,mark:y,pulse:v})),h=_e(o));const C=e.add(bie({mark:y,pulse:h||v}));f=_e(C),i&&(p&&(a=e.operators,a.pop(),o&&a.pop()),e.pushState(v,h||f,m),r?o6e(t,e,g):p?a6e(t,e,g):e.parse(t),e.popState(),p&&(o&&a.push(o),a.push(C))),s&&(f=l6e(s,f,e));const w=e.add(Rie({pulse:f})),E=e.add(Hf({pulse:_e(w)},void 0,e.parent()));t.name!=null&&(d=t.name,e.addData(d,new tf(e,u,w,E)),t.on&&t.on.forEach(b=>{(b.insert||b.remove||b.toggle)&&U("Marks only support modify triggers."),$ie(b,e,d)}))}function l6e(t,e,n){const i=t.method,r=t.bound,s=t.separation,o={separation:Tn(s)?n.signalRef(s.signal):s,method:Tn(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(o.sort=n.compareRef({field:t.order})),r){const a=r.tolerance;o.boundTolerance=Tn(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return _e(n.add(Q4e(o)))}function u6e(t,e){const n=e.config.legend,i=t.encode||{},r=Xr(t,n),s=i.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,d,h,f;E9.forEach(C=>t[C]?(u[C]=t[C],c=c||t[C]):0),c||U("Missing valid scale for legend.");const p=c6e(t,e.scaleType(c)),g={title:t.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&r.isVertical()},m=_e(e.add(ua(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=_e(e.add(j4e(h={type:p,scale:e.scaleRef(c),count:e.objectProperty(r("tickCount")),limit:e.property(r("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return p===cE?(f=[IHe(t,c,n,i.gradient),AW(t,n,i.labels,v)],h.count=h.count||e.signalRef(`max(2,2*floor((${Th(r.gradientLength())})/100))`)):p===fM?f=[kHe(t,c,n,i.gradient,v),AW(t,n,i.labels,v)]:(d=WHe(t,n),f=[HHe(t,n,i,v,Th(d.columns))],h.size=f6e(t,e,f[0].marks)),f=[h1({role:l4e,from:m,encode:y,marks:f,layout:d,interactive:a})],g.title&&f.push(KHe(t,n,i.title,m)),FT(h1({role:o4e,from:m,encode:Xm(h6e(r,t,n),s,jC),marks:f,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:a,style:l}),e)}function c6e(t,e){let n=t.type||TW;return!t.type&&d6e(t)===1&&(t.fill||t.stroke)&&(n=bk(e)?cE:sF(e)?fM:TW),n!==cE?n:sF(e)?fM:cE}function d6e(t){return E9.reduce((e,n)=>e+(t[n]?1:0),0)}function h6e(t,e,n){const i={enter:{},update:{}};return ai(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i}function f6e(t,e,n){const i=Th(LW("size",t,n)),r=Th(LW("strokeWidth",t,n)),s=Th(p6e(n[1].encode,e,UC));return ol(`max(ceil(sqrt(${i})+${r}),${s})`,e)}function LW(t,e,n){return e[t]?`scale("${e[t]}",datum)`:Nie(t,n[0].encode)}function p6e(t,e,n){return Nie("fontSize",t)||NHe("fontSize",e,n)}const g6e=`item.orient==="${Qm}"?-90:item.orient==="${Jm}"?90:0`;function m6e(t,e){t=ce(t)?{text:t}:t;const n=Xr(t,e.config.title),i=t.encode||{},r=i.group||{},s=r.name||void 0,o=r.interactive,a=r.style,l=[],u={},c=_e(e.add(ua(null,[u])));return l.push(C6e(t,n,y6e(t),c)),t.subtitle&&l.push(w6e(t,n,i.subtitle,c)),FT(h1({role:h4e,from:c,encode:v6e(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),e)}function y6e(t){const e=t.encode;return e&&e.title||ze({name:t.name,interactive:t.interactive,style:t.style},e)}function v6e(t,e){const n={enter:{},update:{}};return ai(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:x9},angle:{signal:g6e},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),Xm(n,e,jC)}function C6e(t,e,n,i){const r={value:0},s=t.text,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ai(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),bs({type:Wf,role:f4e,style:_He,from:i,encode:o},n)}function w6e(t,e,n,i){const r={value:0},s=t.subtitle,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ai(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),bs({type:Wf,role:p4e,style:RHe,from:i,encode:o},n)}function S6e(t,e){const n=[];t.transform&&t.transform.forEach(i=>{n.push(T9(i,e))}),t.on&&t.on.forEach(i=>{$ie(i,e,t.name)}),e.addDataPipeline(t.name,E6e(t,e,n))}function E6e(t,e,n){const i=[];let r=null,s=!1,o=!1,a,l,u,c,d;for(t.values?Tn(t.values)||lE(t.format)?(i.push(IW(e,t)),i.push(r=Nd())):i.push(r=Nd({$ingest:t.values,$format:t.format})):t.url?lE(t.url)||lE(t.format)?(i.push(IW(e,t)),i.push(r=Nd())):i.push(r=Nd({$request:t.url,$format:t.format})):t.source&&(r=a=de(t.source).map(h=>_e(e.getData(h).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!r&&!d.source&&i.push(r=Nd()),i.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?r=c:d.changes&&(r=null);return a&&(u=a.length-1,i[0]=tHe({derive:s,pulse:u?a:a[0]}),(s||u)&&i.splice(1,0,Nd())),r||i.push(Nd()),i.push(Hf({})),i}function Nd(t){const e=ua({},t);return e.metadata={source:!0},e}function IW(t,e){return Y4e({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const Hie=t=>t===Xc||t===ca,MT=(t,e,n)=>Tn(t)?R6e(t.signal,e,n):t===Qm||t===ca?e:n,Wn=(t,e,n)=>Tn(t)?x6e(t.signal,e,n):Hie(t)?e:n,qo=(t,e,n)=>Tn(t)?_6e(t.signal,e,n):Hie(t)?n:e,Wie=(t,e,n)=>Tn(t)?T6e(t.signal,e,n):t===ca?{value:e}:{value:n},b6e=(t,e,n)=>Tn(t)?A6e(t.signal,e,n):t===Jm?{value:e}:{value:n},x6e=(t,e,n)=>Vie(`${t} === '${ca}' || ${t} === '${Xc}'`,e,n),_6e=(t,e,n)=>Vie(`${t} !== '${ca}' && ${t} !== '${Xc}'`,e,n),R6e=(t,e,n)=>A9(`${t} === '${Qm}' || ${t} === '${ca}'`,e,n),T6e=(t,e,n)=>A9(`${t} === '${ca}'`,e,n),A6e=(t,e,n)=>A9(`${t} === '${Jm}'`,e,n),Vie=(t,e,n)=>(e=e!=null?Hn(e):e,n=n!=null?Hn(n):n,kW(e)&&kW(n)?(e=e?e.signal||ae(e.value):null,n=n?n.signal||ae(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[ze({test:t},e)].concat(n||[])),kW=t=>t==null||Object.keys(t).length===1,A9=(t,e,n)=>({signal:`${t} ? (${Lp(e)}) : (${Lp(n)})`}),D6e=(t,e,n,i,r)=>({signal:(i!=null?`${t} === '${Qm}' ? (${Lp(i)}) : `:"")+(n!=null?`${t} === '${Xc}' ? (${Lp(n)}) : `:"")+(r!=null?`${t} === '${Jm}' ? (${Lp(r)}) : `:"")+(e!=null?`${t} === '${ca}' ? (${Lp(e)}) : `:"")+"(null)"}),Lp=t=>Tn(t)?t.signal:t==null?null:ae(t),O6e=(t,e)=>e===0?0:Tn(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},Kp=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function sp(t,e,n,i){let r;if(e&&Ae(e,t))return e[t];if(Ae(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=t[5].toLowerCase()+t.slice(6)}return i[S9][r]}else if(t.startsWith("label")){switch(t){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=t[5].toLowerCase()+t.slice(6)}return i[UC][r]}return null}function GW(t){const e={};for(const n of t)if(n)for(const i in n)e[i]=1;return Object.keys(e)}function P6e(t,e){var n=e.config,i=n.style,r=n.axis,s=e.scaleType(t.scale)==="band"&&n.axisBand,o=t.orient,a,l,u;if(Tn(o)){const d=GW([n.axisX,n.axisY]),h=GW([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of d)a[u]=Wn(o,sp(u,n.axisX,r,i),sp(u,n.axisY,r,i));l={};for(u of h)l[u]=D6e(o.signal,sp(u,n.axisTop,r,i),sp(u,n.axisBottom,r,i),sp(u,n.axisLeft,r,i),sp(u,n.axisRight,r,i))}else a=o===ca||o===Xc?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?ze({},r,a,l,s):r}function F6e(t,e,n,i){const r=Xr(t,e),s=t.orient;let o,a;const l={enter:o={opacity:ct},update:a={opacity:Js},exit:{opacity:ct}};ai(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=$W(t,0),c=$W(t,1);return o.x=a.x=Wn(s,u,ct),o.x2=a.x2=Wn(s,c),o.y=a.y=qo(s,u,ct),o.y2=a.y2=qo(s,c),bs({type:b9,role:t4e,from:i,encode:l},n)}function $W(t,e){return{scale:t.scale,range:e}}function M6e(t,e,n,i,r){const s=Xr(t,e),o=t.orient,a=t.gridScale,l=MT(o,1,-1),u=N6e(t.offset,l);let c,d,h;const f={enter:c={opacity:ct},update:h={opacity:Js},exit:d={opacity:ct}};ai(f,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:t.scale,field:Qs,band:r.band,extra:r.extra,offset:r.offset,round:s("tickRound")},g=Wn(o,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:ze(g,{mult:l,offset:u});return c.x=h.x=Wn(o,p,m),c.y=h.y=qo(o,p,m),c.x2=h.x2=qo(o,y),c.y2=h.y2=Wn(o,y),d.x=Wn(o,p),d.y=qo(o,p),bs({type:b9,role:n4e,key:Qs,from:i,encode:f},n)}function N6e(t,e){if(e!==1)if(!he(t))t=Tn(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=ze({},t);for(;n.mult!=null;)if(he(n.mult))n=n.mult=ze({},n.mult);else return n.mult=Tn(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e}return t}function L6e(t,e,n,i,r,s){const o=Xr(t,e),a=t.orient,l=MT(a,-1,1);let u,c,d;const h={enter:u={opacity:ct},update:d={opacity:Js},exit:c={opacity:ct}};ai(h,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const f=Hn(r);f.mult=l;const p={scale:t.scale,field:Qs,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=u.y=Wn(a,ct,p),d.y2=u.y2=Wn(a,f),c.x=Wn(a,p),d.x=u.x=qo(a,ct,p),d.x2=u.x2=qo(a,f),c.y=qo(a,p),bs({type:b9,role:r4e,key:Qs,from:i,encode:h},n)}function _O(t,e,n,i,r){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+r+")"}}function I6e(t,e,n,i,r,s){const o=Xr(t,e),a=t.orient,l=t.scale,u=MT(a,-1,1),c=Th(o("labelFlush")),d=Th(o("labelFlushOffset")),h=o("labelAlign"),f=o("labelBaseline");let p=c===0||!!c,g;const m=Hn(r);m.mult=u,m.offset=Hn(o("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:Qs,band:.5,offset:Lie(s.offset,o("labelOffset"))},v=Wn(a,p?_O(l,c,'"left"','"right"','"center"'):{value:"center"},b6e(a,"left","right")),C=Wn(a,Wie(a,"bottom","top"),p?_O(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=_O(l,c,`-(${d})`,d,0);p=p&&d;const E={opacity:ct,x:Wn(a,y,m),y:qo(a,y,m)},b={enter:E,update:g={opacity:Js,text:{field:w9},x:E.x,y:E.y,align:v,baseline:C},exit:{opacity:ct,x:E.x,y:E.y}};ai(b,{dx:!h&&p?Wn(a,w):null,dy:!f&&p?qo(a,w):null}),ai(b,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:h,baseline:f});const S=o("labelBound");let _=o("labelOverlap");return _=_||S?{separation:o("labelSeparation"),method:_,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,g.align!==v&&(g.align=Kp(g.align,v)),g.baseline!==C&&(g.baseline=Kp(g.baseline,C)),bs({type:Wf,role:i4e,style:UC,key:Qs,from:i,encode:b,overlap:_},n)}function k6e(t,e,n,i){const r=Xr(t,e),s=t.orient,o=MT(s,-1,1);let a,l;const u={enter:a={opacity:ct,anchor:Hn(r("titleAnchor",null)),align:{signal:x9}},update:l=ze({},a,{opacity:Js,text:Hn(t.title)}),exit:{opacity:ct}},c={signal:`lerp(range("${t.scale}"), ${OT(0,1,.5)})`};return l.x=Wn(s,c),l.y=qo(s,c),a.angle=Wn(s,ct,O6e(o,90)),a.baseline=Wn(s,Wie(s,Xc,ca),{value:Xc}),l.angle=a.angle,l.baseline=a.baseline,ai(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),G6e(r,s,u,n),u.update.align=Kp(u.update.align,a.align),u.update.angle=Kp(u.update.angle,a.angle),u.update.baseline=Kp(u.update.baseline,a.baseline),bs({type:Wf,role:s4e,style:S9,from:i,encode:u},n)}function G6e(t,e,n,i){const r=(a,l)=>a!=null?(n.update[l]=Kp(Hn(a),n.update[l]),!1):!fp(l,i),s=r(t("titleX"),"x"),o=r(t("titleY"),"y");n.enter.auto=o===s?Hn(o):Wn(e,Hn(o),Hn(s))}function $6e(t,e){const n=P6e(t,e),i=t.encode||{},r=i.axis||{},s=r.name||void 0,o=r.interactive,a=r.style,l=Xr(t,n),u=LHe(l),c={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:t.title!=null},d=_e(e.add(ua({},[c]))),h=_e(e.add(H4e({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),f=[];let p;return c.grid&&f.push(M6e(t,n,i.grid,h,u)),c.ticks&&(p=l("tickSize"),f.push(L6e(t,n,i.ticks,h,p,u))),c.labels&&(p=c.ticks?p:0,f.push(I6e(t,n,i.labels,h,p,u))),c.domain&&f.push(F6e(t,n,i.domain,d)),c.title&&f.push(k6e(t,n,i.title,d)),FT(h1({role:e4e,from:d,encode:Xm(H6e(l,t),r,jC),marks:f,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),e)}function H6e(t,e){const n={enter:{},update:{}};return ai(n,{orient:t("orient"),offset:t("offset")||0,position:To(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function Bie(t,e,n){const i=de(t.signals),r=de(t.scales);return n||i.forEach(s=>Sie(s,e)),de(t.projections).forEach(s=>vHe(s,e)),r.forEach(s=>oHe(s,e)),de(t.data).forEach(s=>S6e(s,e)),r.forEach(s=>aHe(s,e)),(n||i).forEach(s=>$4e(s,e)),de(t.axes).forEach(s=>$6e(s,e)),de(t.marks).forEach(s=>FT(s,e)),de(t.legends).forEach(s=>u6e(s,e)),t.title&&m6e(t.title,e),e.parseLambdas(),e}const W6e=t=>Xm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function V6e(t,e){const n=e.config,i=_e(e.root=e.add(Mx())),r=B6e(t,n);r.forEach(u=>Sie(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const s=e.add(ua()),o=e.add(xie(wie(W6e(t.encode),DT,m9,t.style,e,{pulse:_e(s)}))),a=e.add(Tie({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:_e(o)}));e.operators.pop(),e.pushState(_e(o),_e(a),null),Bie(t,e,r),e.operators.push(a);let l=e.add(bie({mark:i,pulse:_e(a)}));return l=e.add(Rie({pulse:_e(l)})),l=e.add(Hf({pulse:_e(l)})),e.addData("root",new tf(e,s,s,l)),e}function Iy(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function B6e(t,e){const n=o=>To(t[o],e[o]),i=[Iy("background",n("background")),Iy("autosize",Q$e(n("autosize"))),Iy("padding",Z$e(n("padding"))),Iy("width",n("width")||0),Iy("height",n("height")||0)],r=i.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return de(t.signals).forEach(o=>{Ae(r,o.name)?o=ze(r[o.name],o):i.push(o),s[o.name]=o}),de(e.signals).forEach(o=>{!Ae(s,o.name)&&!Ae(r,o.name)&&i.push(o)}),i}function zie(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function HW(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}zie.prototype=HW.prototype={parse(t){return Bie(t,this)},fork(){return new HW(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof lM?_e(t):t;return this.add(eHe({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,r,s){let o,a;i&&(o=i.data||(i.data={}),a=o[r]||(o[r]=[]),a.push(s))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i)}return this},pushState(t,e,n){this._encode.push(_e(this.add(Hf({pulse:t})))),this._parent.push(e),this._lookup.push(n?_e(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return at(this._parent)},encode(){return at(this._encode)},lookup(){return at(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(ce(t))return c1(t,e);t.signal||U("Unsupported field reference: "+ae(t));const n=t.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};e&&(r.as=e),this.field[n]=i=_e(this.add(z4e(r)))}return i},compareRef(t){let e=!1;const n=s=>Tn(s)?(e=!0,this.signalRef(s.signal)):D4e(s)?(e=!0,this.exprRef(s.expr)):s,i=de(t.field).map(n),r=de(t.order).map(n);return e?_e(this.add(RW({fields:i,orders:r}))):xW(i,r)},keyRef(t,e){let n=!1;const i=s=>Tn(s)?(n=!0,_e(r[s.signal])):s,r=this.signals;return t=de(t).map(i),n?_e(this.add(U4e({fields:t,flat:e}))):_4e(t,e)},sortRef(t){if(!t)return t;const e=TT(t.op,t.field),n=t.order||R4e;return n.signal?_e(this.add(RW({fields:e,orders:this.signalRef(n.signal)}))):xW(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i}return this.events[n]},hasOwnSignal(t){return Ae(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&U("Duplicate signal name: "+ae(t));const n=e instanceof lM?e:this.add(Mx(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||U("Unrecognized signal name: "+ae(t)),this.signals[t]},signalRef(t){return this.signals[t]?_e(this.signals[t]):(Ae(this.lambdas,t)||(this.lambdas[t]=this.add(Mx(null))),_e(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const i=t[e],r=ol(i,this),s=this.lambdas[i];s.params=r.$params,s.update=r.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!he(t)?t:this.signalRef(t.signal||D9(t))},exprRef(t,e){const n={expr:ol(t,this)};return e&&(n.expr.$name=e),_e(this.add(V4e(n)))},addBinding(t,e){this.bindings||U("Nested signals do not support binding: "+ae(t)),this.bindings.push(ze({signal:t},e))},addScaleProj(t,e){Ae(this.scales,t)&&U("Duplicate scale or projection name: "+ae(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,nHe(e))},addProjection(t,e){this.addScaleProj(t,Z4e(e))},getScale(t){return this.scales[t]||U("Unrecognized scale name: "+ae(t)),this.scales[t]},scaleRef(t){return _e(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Ae(this.data,t)&&U("Duplicate data set name: "+ae(t)),this.data[t]=e},getData(t){return this.data[t]||U("Undefined data set name: "+ae(t)),this.data[t]},addDataPipeline(t,e){return Ae(this.data,t)&&U("Duplicate data set name: "+ae(t)),this.addData(t,tf.fromEntries(this,e))}};function D9(t){return(j(t)?z6e:U6e)(t)}function z6e(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const r=t[i];n+=(i>0?",":"")+(he(r)?r.signal||D9(r):ae(r))}return n+"]"}function U6e(t){let e="{",n=0,i,r;for(i in t)r=t[i],e+=(++n>1?",":"")+ae(i)+":"+(he(r)?r.signal||D9(r):ae(r));return e+"}"}function j6e(){const t="sans-serif",i="#4c78a8",r="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:t,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:t,fontSize:10},"guide-title":{fill:r,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Y6e(t,e,n){return he(t)||U("Input Vega specification must be an object."),e=Gm(j6e(),e,t.config),V6e(t,new zie(e,n)).toRuntime()}var q6e="5.25.0";ze(Pg,XAe,mMe,qMe,NLe,AIe,tke,N3e,ike,Rke,Ike,Bke);const K6e=Object.freeze(Object.defineProperty({__proto__:null,Bounds:vn,CanvasHandler:IC,CanvasRenderer:jb,DATE:Hr,DAY:Ei,DAYOFYEAR:rl,Dataflow:Up,Debug:jK,Error:kI,EventStream:NR,Gradient:HZ,GroupItem:iT,HOURS:ws,Handler:qc,Info:UK,Item:nT,MILLISECONDS:na,MINUTES:Ss,MONTH:Di,Marks:Es,MultiPulse:l3,None:zK,Operator:Ft,Parameters:MR,Pulse:Ac,QUARTER:$r,RenderType:hc,Renderer:Cl,ResourceLoader:Fk,SECONDS:so,SVGHandler:Xk,SVGRenderer:nG,SVGStringRenderer:iG,Scenegraph:qk,TIME_UNITS:JI,Transform:V,View:lie,WEEK:_n,Warn:GI,YEAR:ni,accessor:Kr,accessorFields:Ai,accessorName:un,array:de,ascending:ER,bandwidthNRD:h3,bin:TQ,bootstrapCI:AQ,boundClip:Nee,boundContext:FC,boundItem:hF,boundMark:see,boundStroke:Au,changeset:If,clampRange:iX,codegenExpression:Ine,compare:BI,constant:Ii,cumulativeLogNormal:v3,cumulativeNormal:IR,cumulativeUniform:E3,dayofyear:NX,debounce:zI,defaultLocale:i3,definition:xQ,densityLogNormal:y3,densityNormal:f3,densityUniform:S3,domChild:_r,domClear:Fo,domCreate:cc,domFind:Kk,dotbin:DQ,error:U,expressionFunction:Cn,extend:ze,extent:tl,extentIndex:rX,falsy:Vu,fastmap:Hm,field:Gr,flush:sX,font:lT,fontFamily:LC,fontSize:vl,format:BS,formatLocale:Rb,formats:o3,hasOwnProperty:Ae,id:gC,identity:Li,inferType:fQ,inferTypes:pQ,ingest:vt,inherits:le,inrange:Op,interpolate:xk,interpolateColors:eT,interpolateRange:RZ,intersect:Oee,intersectBoxLine:Pp,intersectPath:Mk,intersectPoint:Nk,intersectRule:qZ,isArray:j,isBoolean:yd,isDate:Rc,isFunction:Ue,isIterable:oX,isNumber:ft,isObject:he,isRegExp:aX,isString:ce,isTuple:PR,key:UI,lerp:lX,lineHeight:jc,loader:DR,locale:dQ,logger:$I,lruCache:uX,markup:tG,merge:cX,mergeConfig:Gm,multiLineOffset:Uk,one:km,pad:dX,panLinear:QK,panLog:JK,panPow:ZK,panSymlog:eX,parse:Y6e,parseExpression:n9,parseSelector:bd,path:WR,pathCurves:Dk,pathEqual:Lee,pathParse:kg,pathRectangle:BZ,pathRender:Jv,pathSymbols:VZ,pathTrail:zZ,peek:at,point:cT,projection:EG,quantileLogNormal:C3,quantileNormal:kR,quantileUniform:b3,quantiles:c3,quantizeInterpolator:TZ,quarter:tX,quartiles:d3,get random(){return oo},randomInteger:eAe,randomKDE:g3,randomLCG:ZTe,randomLogNormal:PQ,randomMixture:FQ,randomNormal:p3,randomUniform:MQ,read:yQ,regressionConstant:x3,regressionExp:LQ,regressionLinear:_3,regressionLoess:GQ,regressionLog:NQ,regressionPoly:kQ,regressionPow:IQ,regressionQuad:R3,renderModule:dT,repeat:e0,resetDefaultLocale:XRe,resetSVGClipId:jZ,resetSVGDefIds:NFe,responseType:mQ,runtimeContext:Kne,sampleCurve:$R,sampleLogNormal:m3,sampleNormal:LR,sampleUniform:w3,scale:mt,sceneEqual:rG,sceneFromJSON:aee,scenePickVisit:Hb,sceneToJSON:oee,sceneVisit:ia,sceneZOrder:Lk,scheme:_k,serializeXML:Eee,setRandom:QTe,span:mC,splitAccessPath:ml,stringValue:ae,textMetrics:Yo,timeBin:QX,timeFloor:WX,timeFormatLocale:jv,timeInterval:Bm,timeOffset:zX,timeSequence:YX,timeUnitSpecifier:MX,timeUnits:ZI,toBoolean:jI,toDate:YI,toNumber:xi,toSet:ta,toString:qI,transform:_Q,transforms:Pg,truncate:hX,truthy:ro,tupleid:Re,typeParsers:YP,utcFloor:VX,utcInterval:zm,utcOffset:UX,utcSequence:qX,utcdayofyear:kX,utcquarter:nX,utcweek:GX,version:q6e,visitArray:qu,week:LX,writeConfig:$m,zero:tc,zoomLinear:HI,zoomLog:WI,zoomPow:Cb,zoomSymlog:VI},Symbol.toStringTag,{value:"Module"}));function X6e(t,e,n){let i;e.x2&&(e.x?(n&&t.x>t.x2&&(i=t.x,t.x=t.x2,t.x2=i),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(i=t.y,t.y=t.y2,t.y2=i),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var Q6e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},J6e={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},Z6e={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const e8e=Array.prototype.slice,Ld=(t,e,n)=>{const i=n?n(e[0]):e[0];return i[t].apply(i,e8e.call(e,1))},t8e=(t,e,n,i,r,s,o)=>new Date(t,e||0,n??1,i||0,r||0,s||0,o||0);var n8e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,n)=>Math.max(e,Math.min(n,t)),now:Date.now,utc:Date.UTC,datetime:t8e,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return Ld("join",arguments)},indexof:function(){return Ld("indexOf",arguments)},lastindexof:function(){return Ld("lastIndexOf",arguments)},slice:function(){return Ld("slice",arguments)},reverse:t=>t.slice().reverse(),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return Ld("substring",arguments,String)},split:function(){return Ld("split",arguments,String)},replace:function(){return Ld("replace",arguments,String)},trim:t=>String(t).trim(),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const i8e=["view","item","group","xy","x","y"],gM=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&gM.add(setImmediate);const r8e={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const n=e.name;return t.memberDepth>0?n:n==="datum"?t.datum:n==="event"?t.event:n==="item"?t.item:Q6e[n]||t.params["$"+n]},MemberExpression:(t,e)=>{const n=!e.computed,i=t(e.object);n&&(t.memberDepth+=1);const r=t(e.property);if(n&&(t.memberDepth-=1),gM.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(t,e)=>{const n=e.arguments;let i=e.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?t(n[0])?t(n[1]):t(n[2]):(t.fn[i]||n8e[i]).apply(t.fn,n.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>J6e[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>Z6e[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((n,i)=>{t.memberDepth+=1;const r=t(i.key);return t.memberDepth-=1,gM.has(t(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=t(i.value),n},{})};function ky(t,e,n,i,r,s){const o=a=>r8e[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(e),o.params=n,o.datum=i,o.event=r,o.item=s,i8e.forEach(a=>o.fn[a]=function(){return r.vega[a](...arguments)}),o(t)}var s8e={operator(t,e){const n=e.ast,i=t.functions;return r=>ky(n,i,r)},parameter(t,e){const n=e.ast,i=t.functions;return(r,s)=>ky(n,i,s,r)},event(t,e){const n=e.ast,i=t.functions;return r=>ky(n,i,void 0,void 0,r)},handler(t,e){const n=e.ast,i=t.functions;return(r,s)=>{const o=s.item&&s.item.datum;return ky(n,i,r,o,s)}},encode(t,e){const{marktype:n,channels:i}=e,r=t.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,c;for(const d in i)c=ky(i[d].ast,r,a,l,void 0,o),o[d]!==c&&(o[d]=c,u=1);return n!=="rule"&&X6e(o,i,s),u}}};const o8e="vega-lite",a8e='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',l8e="5.15.0",u8e=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],c8e="https://vega.github.io/vega-lite/",d8e="Vega-Lite is a concise high-level language for interactive visualization.",h8e=["vega","chart","visualization"],f8e="build/vega-lite.js",p8e="build/vega-lite.min.js",g8e="build/vega-lite.min.js",m8e="build/src/index",y8e="build/src/index.d.ts",v8e={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},C8e=["bin","build","src","vega-lite*","tsconfig.json"],w8e={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},S8e={type:"git",url:"https://github.com/vega/vega-lite.git"},E8e="BSD-3-Clause",b8e={url:"https://github.com/vega/vega-lite/issues"},x8e={"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},_8e={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},R8e={vega:"^5.24.0"},T8e={node:">=18"},A8e={name:o8e,author:a8e,version:l8e,collaborators:u8e,homepage:c8e,description:d8e,keywords:h8e,main:f8e,unpkg:p8e,jsdelivr:g8e,module:m8e,types:y8e,bin:v8e,files:C8e,scripts:w8e,repository:S8e,license:E8e,bugs:b8e,devDependencies:x8e,dependencies:_8e,peerDependencies:R8e,engines:T8e};function O9(t){return!!t.or}function P9(t){return!!t.and}function F9(t){return!!t.not}function hE(t,e){if(F9(t))hE(t.not,e);else if(P9(t))for(const n of t.and)hE(n,e);else if(O9(t))for(const n of t.or)hE(n,e);else e(t)}function Xp(t,e){return F9(t)?{not:Xp(t.not,e)}:P9(t)?{and:t.and.map(n=>Xp(n,e))}:O9(t)?{or:t.or.map(n=>Xp(n,e))}:e(t)}const $e=structuredClone;function Uie(t){throw new Error(t)}function Yg(t,e){const n={};for(const i of e)Ae(t,i)&&(n[i]=t[i]);return n}function Nr(t,e){const n={...t};for(const i of e)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>Ot(t)).join(",")})`};function tt(t){if(ft(t))return t;const e=ce(t)?t:Ot(t);if(e.length<250)return e;let n=0;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function mM(t){return t===!1||t===null}function nt(t,e){return t.includes(e)}function nf(t,e){let n=0;for(const[i,r]of t.entries())if(e(r,i,n++))return!0;return!1}function M9(t,e){let n=0;for(const[i,r]of t.entries())if(!e(r,i,n++))return!1;return!0}function jie(t,...e){for(const n of e)D8e(t,n??{});return t}function D8e(t,e){for(const n of J(e))$m(t,n,e[n],!0)}function Ha(t,e){const n=[],i={};let r;for(const s of t)r=e(s),!(r in i)&&(i[r]=1,n.push(s));return n}function O8e(t,e){const n=J(t),i=J(e);if(n.length!==i.length)return!1;for(const r of n)if(t[r]!==e[r])return!1;return!0}function Yie(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function N9(t,e){for(const n of t)if(e.has(n))return!0;return!1}function yM(t){const e=new Set;for(const n of t){const r=ml(n).map((o,a)=>a===0?o:`[${o}]`),s=r.map((o,a)=>r.slice(0,a+1).join(""));for(const o of s)e.add(o)}return e}function L9(t,e){return t===void 0||e===void 0?!0:N9(yM(t),yM(e))}function Dt(t){return J(t).length===0}const J=Object.keys,ii=Object.values,Qc=Object.entries;function f1(t){return t===!0||t===!1}function Kt(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function j0(t,e){return F9(t)?`!(${j0(t.not,e)})`:P9(t)?`(${t.and.map(n=>j0(n,e)).join(") && (")})`:O9(t)?`(${t.or.map(n=>j0(n,e)).join(") || (")})`:e(t)}function Nx(t,e){if(e.length===0)return!0;const n=e.shift();return n in t&&Nx(t[n],e)&&delete t[n],Dt(t)}function YC(t){return t.charAt(0).toUpperCase()+t.substr(1)}function I9(t,e="datum"){const n=ml(t),i=[];for(let r=1;r<=n.length;r++){const s=`[${n.slice(0,r).map(ae).join("][")}]`;i.push(`${e}${s}`)}return i.join(" && ")}function qie(t,e="datum"){return`${e}[${ae(ml(t).join("."))}]`}function P8e(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function lo(t){return`${ml(t).map(P8e).join("\\.")}`}function rf(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function k9(t){return`${ml(t).join(".")}`}function qg(t){return t?ml(t).length:0}function gn(...t){for(const e of t)if(e!==void 0)return e}let Kie=42;function Xie(t){const e=++Kie;return t?String(t)+e:e}function F8e(){Kie=42}function Qie(t){return Jie(t)?t:`__${t}`}function Jie(t){return t.startsWith("__")}function p1(t){if(t!==void 0)return(t%360+360)%360}function NT(t){return ft(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}const WW=Object.getPrototypeOf(structuredClone({}));function gs(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor.name!==e.constructor.name)return!1;let n,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!gs(t[i],e[i]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i of t.entries())if(!e.has(i[0]))return!1;for(i of t.entries())if(!gs(i[1],e.get(i[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i of t.entries())if(!e.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(t[i]!==e[i])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&t.valueOf!==WW.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&t.toString!==WW.toString)return t.toString()===e.toString();const r=Object.keys(t);if(n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!gs(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Ot(t){const e=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,s;if(Array.isArray(i)){for(s="[",r=0;r<i.length;r++)r&&(s+=","),s+=n(i[r])||"null";return s+"]"}if(i===null)return"null";if(e.includes(i))throw new TypeError("Converting circular structure to JSON");const o=e.push(i)-1,a=Object.keys(i).sort();for(s="",r=0;r<a.length;r++){const l=a[r],u=n(i[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return e.splice(o,1),`{${s}}`}(t)}const su="row",ou="column",LT="facet",Qt="x",Un="y",da="x2",El="y2",xd="xOffset",Zm="yOffset",ha="radius",Pu="radius2",go="theta",Fu="theta2",fa="latitude",pa="longitude",ga="latitude2",uo="longitude2",Vr="color",bl="fill",xl="stroke",Br="shape",Mu="size",Vf="angle",Nu="opacity",_d="fillOpacity",Rd="strokeOpacity",Td="strokeWidth",Ad="strokeDash",qC="text",Kg="order",KC="detail",IT="key",sf="tooltip",kT="href",GT="url",$T="description",M8e={x:1,y:1,x2:1,y2:1},Zie={theta:1,theta2:1,radius:1,radius2:1};function ere(t){return t in Zie}const G9={longitude:1,longitude2:1,latitude:1,latitude2:1};function tre(t){switch(t){case fa:return"y";case ga:return"y2";case pa:return"x";case uo:return"x2"}}function nre(t){return t in G9}const N8e=J(G9),$9={...M8e,...Zie,...G9,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Qp(t){return t===Vr||t===bl||t===xl}const ire={row:1,column:1,facet:1},js=J(ire),H9={...$9,...ire},L8e=J(H9),{order:OJe,detail:PJe,tooltip:FJe,...I8e}=H9,{row:MJe,column:NJe,facet:LJe,...k8e}=I8e;function G8e(t){return!!k8e[t]}function rre(t){return!!H9[t]}const $8e=[da,El,ga,uo,Fu,Pu];function sre(t){return Bf(t)!==t}function Bf(t){switch(t){case da:return Qt;case El:return Un;case ga:return fa;case uo:return pa;case Fu:return go;case Pu:return ha}return t}function Jc(t){if(ere(t))switch(t){case go:return"startAngle";case Fu:return"endAngle";case ha:return"outerRadius";case Pu:return"innerRadius"}return t}function _l(t){switch(t){case Qt:return da;case Un:return El;case fa:return ga;case pa:return uo;case go:return Fu;case ha:return Pu}}function zr(t){switch(t){case Qt:case da:return"width";case Un:case El:return"height"}}function ore(t){switch(t){case Qt:return"xOffset";case Un:return"yOffset";case da:return"x2Offset";case El:return"y2Offset";case go:return"thetaOffset";case ha:return"radiusOffset";case Fu:return"theta2Offset";case Pu:return"radius2Offset"}}function W9(t){switch(t){case Qt:return"xOffset";case Un:return"yOffset"}}function are(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}const H8e=J($9),{x:IJe,y:kJe,x2:GJe,y2:$Je,xOffset:HJe,yOffset:WJe,latitude:VJe,longitude:BJe,latitude2:zJe,longitude2:UJe,theta:jJe,theta2:YJe,radius:qJe,radius2:KJe,...V9}=$9,W8e=J(V9),B9={x:1,y:1},Rl=J(B9);function jn(t){return t in B9}const z9={theta:1,radius:1},V8e=J(z9);function HT(t){return t==="width"?Qt:Un}const lre={xOffset:1,yOffset:1};function ey(t){return t in lre}const{text:XJe,tooltip:QJe,href:JJe,url:ZJe,description:eZe,detail:tZe,key:nZe,order:iZe,...ure}=V9,B8e=J(ure);function z8e(t){return!!V9[t]}function U8e(t){switch(t){case Vr:case bl:case xl:case Mu:case Br:case Nu:case Td:case Ad:return!0;case _d:case Rd:case Vf:return!1}}const cre={...B9,...z9,...lre,...ure},WT=J(cre);function Lu(t){return!!cre[t]}function j8e(t,e){return q8e(t)[e]}const dre={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:rZe,...Y8e}=dre;function q8e(t){switch(t){case Vr:case bl:case xl:case $T:case KC:case IT:case sf:case kT:case Kg:case Nu:case _d:case Rd:case Td:case LT:case su:case ou:return dre;case Qt:case Un:case xd:case Zm:case fa:case pa:return Y8e;case da:case El:case ga:case uo:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Mu:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ad:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Br:return{point:"always",geoshape:"always"};case qC:return{text:"always"};case Vf:return{point:"always",square:"always",text:"always"};case GT:return{image:"always"};case go:return{text:"always",arc:"always"};case ha:return{text:"always",arc:"always"};case Fu:case Pu:return{arc:"always"}}}function RO(t){switch(t){case Qt:case Un:case go:case ha:case xd:case Zm:case Mu:case Vf:case Td:case Nu:case _d:case Rd:case da:case El:case Fu:case Pu:return;case LT:case su:case ou:case Br:case Ad:case qC:case sf:case kT:case GT:case $T:return"discrete";case Vr:case bl:case xl:return"flexible";case fa:case pa:case ga:case uo:case KC:case IT:case Kg:return}}const K8e={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},X8e={count:1,min:1,max:1};function wu(t){return!!t&&!!t.argmin}function Dd(t){return!!t&&!!t.argmax}function U9(t){return ce(t)&&!!K8e[t]}const Q8e=new Set(["count","valid","missing","distinct"]);function hre(t){return ce(t)&&Q8e.has(t)}function J8e(t){return ce(t)&&nt(["min","max"],t)}const Z8e=new Set(["count","sum","distinct","valid","missing"]),e7e=new Set(["mean","average","median","q1","q3","min","max"]);function fre(t){return yd(t)&&(t=ZT(t,void 0)),"bin"+J(t).map(e=>VT(t[e])?Kt(`_${e}_${Qc(t[e])}`):Kt(`_${e}_${t[e]}`)).join("")}function Gt(t){return t===!0||zf(t)&&!t.binned}function Xn(t){return t==="binned"||zf(t)&&t.binned===!0}function zf(t){return he(t)}function VT(t){return t==null?void 0:t.param}function VW(t){switch(t){case su:case ou:case Mu:case Vr:case bl:case xl:case Td:case Nu:case _d:case Rd:case Br:return 6;case Ad:return 4;default:return 10}}function XC(t){return!!(t!=null&&t.expr)}function xr(t){const e=J(t||{}),n={};for(const i of e)n[i]=us(t[i]);return n}function pre(t){const{anchor:e,frame:n,offset:i,orient:r,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:h,subtitleLineHeight:f,subtitlePadding:p,...g}=t,m={...g,...a?{fill:a}:{}},y={...e?{anchor:e}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...h?{subtitleFontWeight:h}:{},...f?{subtitleLineHeight:f}:{},...p?{subtitlePadding:p}:{}},C=Yg(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:C,nonMarkTitleProperties:y,subtitle:v}}function Ju(t){return ce(t)||j(t)&&ce(t[0])}function we(t){return!!(t!=null&&t.signal)}function Od(t){return!!t.step}function t7e(t){return j(t)?!1:"fields"in t&&!("data"in t)}function n7e(t){return j(t)?!1:"fields"in t&&"data"in t}function Xl(t){return j(t)?!1:"field"in t&&"data"in t}const i7e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},r7e=J(i7e),s7e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},vM=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function gre(t){const e=j(t.condition)?t.condition.map(BW):BW(t.condition);return{...us(t),condition:e}}function us(t){if(XC(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function BW(t){if(XC(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function zt(t){if(XC(t)){const{expr:e,...n}=t;return{signal:e,...n}}return we(t)?t:t!==void 0?{value:t}:void 0}function o7e(t){return we(t)?t.signal:ae(t)}function zW(t){return we(t)?t.signal:ae(t.value)}function $o(t){return we(t)?t.signal:t==null?null:ae(t)}function a7e(t,e,n){for(const i of n){const r=Su(i,e.markDef,e.config);r!==void 0&&(t[i]=zt(r))}return t}function mre(t){return[].concat(t.type,t.style??[])}function Et(t,e,n,i={}){const{vgChannel:r,ignoreVgConfig:s}=i;return r&&e[r]!==void 0?e[r]:e[t]!==void 0?e[t]:s&&(!r||r===t)?void 0:Su(t,e,n,i)}function Su(t,e,n,{vgChannel:i}={}){return gn(i?Lx(t,e,n.style):void 0,Lx(t,e,n.style),i?n[e.type][i]:void 0,n[e.type][t],i?n.mark[i]:n.mark[t])}function Lx(t,e,n){return yre(t,mre(e),n)}function yre(t,e,n){e=de(e);let i;for(const r of e){const s=n[r];s&&s[t]!==void 0&&(i=s[t])}return i}function vre(t,e){return de(t).reduce((n,i)=>(n.field.push(ue(i,e)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function Cre(t,e){const n=[...t];return e.forEach(i=>{for(const r of n)if(gs(r,i))return;n.push(i)}),n}function wre(t,e){return gs(t,e)||!e?t:t?[...de(t),...de(e)].join(", "):e}function Sre(t,e){const n=t.value,i=e.value;if(n==null||i===null)return{explicit:t.explicit,value:null};if((Ju(n)||we(n))&&(Ju(i)||we(i)))return{explicit:t.explicit,value:wre(n,i)};if(Ju(n)||we(n))return{explicit:t.explicit,value:n};if(Ju(i)||we(i))return{explicit:t.explicit,value:i};if(!Ju(n)&&!we(n)&&!Ju(i)&&!we(i))return{explicit:t.explicit,value:Cre(n,i)};throw new Error("It should never reach here")}function j9(t){return`Invalid specification ${Ot(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const l7e='Autosize "fit" only works for single views and layered views.';function UW(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function jW(t){const e=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function YW(t){return t?`Dropping "fit-${t}" because spec has discrete ${zr(t)}.`:'Dropping "fit" because spec has discrete size.'}function Y9(t){return`Unknown field for ${t}. Cannot calculate view size.`}function qW(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function u7e(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function c7e(t){return`The "nearest" transform is not supported for ${t} marks.`}function Ere(t){return`Selection not supported for ${t} yet.`}function d7e(t){return`Cannot find a selection named "${t}".`}const h7e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",f7e="Legend bindings are only supported for selections over an individual field or encoding channel.";function p7e(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function g7e(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const m7e="The same selection must be used to override scale domains in a layered view.",y7e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function v7e(t){return`Unknown repeated value "${t}".`}function KW(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const C7e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function w7e(t){return`Unrecognized parse "${t}".`}function XW(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}const S7e="Attempt to add the same child twice.";function E7e(t){return`Ignoring an invalid transform: ${Ot(t)}.`}const b7e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function QW(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function x7e(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${Ot(e)} is overridden by a child projection ${Ot(n)}.`}const _7e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function R7e(t){return`${t}Offset dropped because ${t} is continuous`}function T7e(t){return`There is no ${t} encoding. Replacing ${t}Offset encoding as ${t}.`}function A7e(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${Ot(n)}}.`}function bre(t){return`Invalid field type "${t}".`}function D7e(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function O7e(t){return`Invalid aggregation operator "${t}".`}function xre(t,e){const{fill:n,stroke:i}=e;return`Dropping color ${t} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function P7e(t){return`Position range does not support relative band size for ${t}.`}function CM(t,e){return`Dropping ${Ot(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const F7e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function BT(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?` when ${n}`:""}.`}function M7e(t){return`${t} encoding has no scale, so specified scale is ignored.`}function N7e(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function L7e(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function I7e(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function k7e(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function TO(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function G7e(t){return`The ${t} for range marks cannot be an expression`}function $7e(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function H7e(t,e){return`Specified orient "${t}" overridden with "${e}".`}function W7e(t){return`Cannot use the scale property "${t}" with non-color channel.`}function V7e(t){return`Cannot use the relative band size with ${t} scale.`}function B7e(t){return`Using unaggregated domain with raw field has no effect (${Ot(t)}).`}function z7e(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function U7e(t){return`Unaggregated domain is currently unsupported for log scale (${Ot(t)}).`}function j7e(t){return`Cannot apply size to non-oriented mark "${t}".`}function Y7e(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function q7e(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function _re(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function Rre(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function K7e(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${Ot(n)} and ${Ot(i)}). Using ${Ot(n)}.`}function X7e(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${Ot(n)} and ${Ot(i)}). Using the union of the two domains.`}function Q7e(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function J7e(t){return`Dropping sort property ${Ot(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const JW="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Z7e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",eWe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",tWe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function nWe(t){return`Cannot stack "${t}" if there is already "${t}2".`}function iWe(t){return`Cannot stack non-linear scale (${t}).`}function rWe(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function Ix(t,e){return`Invalid ${t}: ${Ot(e)}.`}function sWe(t){return`Dropping day from datetime ${Ot(t)} as day cannot be combined with other units.`}function oWe(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function aWe(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function lWe(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function ZW(t){return`1D error band does not support ${t}.`}function Tre(t){return`Channel ${t} is required for "binned" bin.`}function uWe(t){return`Channel ${t} should not be used with "binned" bin.`}function cWe(t){return`Domain for ${t} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const Are=$I(GI);let Xg=Are;function dWe(t){return Xg=t,Xg}function hWe(){return Xg=Are,Xg}function ee(...t){Xg.warn(...t)}function fWe(...t){Xg.debug(...t)}function Uf(t){if(t&&he(t)){for(const e of K9)if(e in t)return!0}return!1}const Dre=["january","february","march","april","may","june","july","august","september","october","november","december"],pWe=Dre.map(t=>t.substr(0,3)),Ore=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],gWe=Ore.map(t=>t.substr(0,3));function mWe(t){if(NT(t)&&(t=+t),ft(t))return t>4&&ee(Ix("quarter",t)),t-1;throw new Error(Ix("quarter",t))}function yWe(t){if(NT(t)&&(t=+t),ft(t))return t-1;{const e=t.toLowerCase(),n=Dre.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),r=pWe.indexOf(i);if(r!==-1)return r;throw new Error(Ix("month",t))}}function vWe(t){if(NT(t)&&(t=+t),ft(t))return t%7;{const e=t.toLowerCase(),n=Ore.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),r=gWe.indexOf(i);if(r!==-1)return r;throw new Error(Ix("day",t))}}function q9(t,e){const n=[];if(e&&t.day!==void 0&&J(t).length>1&&(ee(sWe(t)),t=$e(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){const i=e?yWe(t.month):t.month;n.push(i)}else if(t.quarter!==void 0){const i=e?mWe(t.quarter):t.quarter;n.push(ft(i)?i*3:`${i}*3`)}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){const i=e?vWe(t.day):t.day;n.push(ft(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=t[i];n.push(typeof r>"u"?0:r)}return n}function of(t){const n=q9(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function CWe(t){const n=q9(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function wWe(t){const e=q9(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}const Pre={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},K9=J(Pre);function SWe(t){return!!Pre[t]}function jf(t){return he(t)?t.binned:Fre(t)}function Fre(t){return t&&t.startsWith("binned")}function X9(t){return t.startsWith("utc")}function EWe(t){return t.substring(3)}const bWe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function zT(t){return K9.filter(e=>Nre(t,e))}function Mre(t){const e=zT(t);return e[e.length-1]}function Nre(t,e){const n=t.indexOf(e);return!(n<0||n>0&&e==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&e==="day"&&t.charAt(n+3)==="o"||n>0&&e==="year"&&t.charAt(n-1)==="f")}function xWe(t,e,{end:n}={end:!1}){const i=I9(e),r=X9(t)?"utc":"";function s(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let o;const a={};for(const l of K9)Nre(t,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),CWe(a)}function Lre(t){if(!t)return;const e=zT(t);return`timeUnitSpecifier(${Ot(e)}, ${Ot(bWe)})`}function _We(t,e,n){if(!t)return;const i=Lre(t);return`${n||X9(t)?"utc":"time"}Format(${e}, ${i})`}function Bn(t){if(!t)return;let e;return ce(t)?Fre(t)?e={unit:t.substring(6),binned:!0}:e={unit:t}:he(t)&&(e={...t,...t.unit?{unit:t.unit}:{}}),X9(e.unit)&&(e.utc=!0,e.unit=EWe(e.unit)),e}function RWe(t){const{utc:e,...n}=Bn(t);return n.unit?(e?"utc":"")+J(n).map(i=>Kt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(e?"utc":"")+"timeunit"+J(n).map(i=>Kt(`_${i}_${n[i]}`)).join("")}function Ire(t,e=n=>n){const n=Bn(t),i=Mre(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=kre(i,n.step),a={...r,[o]:+r[o]+s};return`${e(of(a))} - ${e(of(r))}`}}const TWe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function AWe(t){return!!TWe[t]}function kre(t,e=1){if(AWe(t))return{part:t,step:e};switch(t){case"day":case"dayofyear":return{part:"date",step:e};case"quarter":return{part:"month",step:e*3};case"week":return{part:"date",step:e*7}}}function DWe(t){return t==null?void 0:t.param}function Q9(t){return!!(t!=null&&t.field)&&t.equal!==void 0}function J9(t){return!!(t!=null&&t.field)&&t.lt!==void 0}function Z9(t){return!!(t!=null&&t.field)&&t.lte!==void 0}function e5(t){return!!(t!=null&&t.field)&&t.gt!==void 0}function t5(t){return!!(t!=null&&t.field)&&t.gte!==void 0}function n5(t){if(t!=null&&t.field){if(j(t.range)&&t.range.length===2)return!0;if(we(t.range))return!0}return!1}function i5(t){return!!(t!=null&&t.field)&&(j(t.oneOf)||j(t.in))}function OWe(t){return!!(t!=null&&t.field)&&t.valid!==void 0}function Gre(t){return i5(t)||Q9(t)||n5(t)||J9(t)||e5(t)||Z9(t)||t5(t)}function xa(t,e){return eA(t,{timeUnit:e,wrapTime:!0})}function PWe(t,e){return t.map(n=>xa(n,e))}function $re(t,e=!0){const{field:n}=t,i=Bn(t.timeUnit),{unit:r,binned:s}=i||{},o=ue(t,{expr:"datum"}),a=r?`time(${s?o:xWe(r,n)})`:o;if(Q9(t))return`${a}===${xa(t.equal,r)}`;if(J9(t)){const l=t.lt;return`${a}<${xa(l,r)}`}else if(e5(t)){const l=t.gt;return`${a}>${xa(l,r)}`}else if(Z9(t)){const l=t.lte;return`${a}<=${xa(l,r)}`}else if(t5(t)){const l=t.gte;return`${a}>=${xa(l,r)}`}else{if(i5(t))return`indexof([${PWe(t.oneOf,r).join(",")}], ${a}) !== -1`;if(OWe(t))return r5(a,t.valid);if(n5(t)){const{range:l}=t,u=we(l)?{signal:`${l.signal}[0]`}:l[0],c=we(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&e)return"inrange("+a+", ["+xa(u,r)+", "+xa(c,r)+"])";const d=[];return u!==null&&d.push(`${a} >= ${xa(u,r)}`),c!==null&&d.push(`${a} <= ${xa(c,r)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ot(t)}`)}function r5(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function FWe(t){return Gre(t)&&t.timeUnit?{...t,timeUnit:Bn(t.timeUnit)}:t}const QC={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function MWe(t){return t==="quantitative"||t==="temporal"}function Hre(t){return t==="ordinal"||t==="nominal"}const af=QC.quantitative,s5=QC.ordinal,Qg=QC.temporal,o5=QC.nominal,ty=QC.geojson;function NWe(t){if(t)switch(t=t.toLowerCase(),t){case"q":case af:return"quantitative";case"t":case Qg:return"temporal";case"o":case s5:return"ordinal";case"n":case o5:return"nominal";case ty:return"geojson"}}const Lr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},wM={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function LWe(t,e){const n=wM[t],i=wM[e];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const IWe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function eV(t){return IWe[t]}const Wre=new Set(["linear","log","pow","sqrt","symlog"]),Vre=new Set([...Wre,"time","utc"]);function Bre(t){return Wre.has(t)}const zre=new Set(["quantile","quantize","threshold"]),kWe=new Set([...Vre,...zre,"sequential","identity"]),GWe=new Set(["ordinal","bin-ordinal","point","band"]);function Yn(t){return GWe.has(t)}function xs(t){return kWe.has(t)}function Ho(t){return Vre.has(t)}function Jg(t){return zre.has(t)}const $We={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function HWe(t){return!ce(t)&&!!t.name}function Ure(t){return t==null?void 0:t.param}function WWe(t){return t==null?void 0:t.unionWith}function VWe(t){return he(t)&&"field"in t}const BWe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:sZe,domain:oZe,range:aZe,rangeMax:lZe,rangeMin:uZe,scheme:cZe,...zWe}=BWe,UWe=J(zWe);function SM(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return Ho(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return Ho(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ho(t);case"nice":return Ho(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return xs(t)&&!nt(["log","time","utc","threshold","quantile"],t)}}function jre(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return Qp(t)?void 0:W7e(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function jWe(t,e){return nt([s5,o5],e)?t===void 0||Yn(t):e===Qg?nt([Lr.TIME,Lr.UTC,void 0],t):e===af?Bre(t)||Jg(t)||t===void 0:!0}function YWe(t,e,n=!1){if(!Lu(t))return!1;switch(t){case Qt:case Un:case xd:case Zm:case go:case ha:return Ho(e)||e==="band"?!0:e==="point"?!n:!1;case Mu:case Td:case Nu:case _d:case Rd:case Vf:return Ho(e)||Jg(e)||nt(["band","point","ordinal"],e);case Vr:case bl:case xl:return e!=="band";case Ad:case Br:return e==="ordinal"||Jg(e)}}const pr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Yre=pr.arc,UT=pr.area,jT=pr.bar,qWe=pr.image,YT=pr.line,qT=pr.point,KWe=pr.rect,kx=pr.rule,qre=pr.text,a5=pr.tick,XWe=pr.trail,l5=pr.circle,u5=pr.square,Kre=pr.geoshape;function Pd(t){return["line","area","trail"].includes(t)}function c5(t){return["rect","bar","image","arc"].includes(t)}const QWe=new Set(J(pr));function al(t){return t.type}const JWe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],ZWe=["fill","fillOpacity"],eVe=[...JWe,...ZWe],tVe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},tV=J(tVe),nVe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},iVe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},rVe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Xre=J(rVe);function lf(t){return t&&t.band!=null}const sVe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Qre=5,oVe={binSpacing:1,continuousBandSize:Qre,minBandSize:.25,timeUnitBandPosition:.5},aVe={binSpacing:0,continuousBandSize:Qre,minBandSize:.25,timeUnitBandPosition:.5},lVe={thickness:1};function uVe(t){return al(t)?t.type:t}function d5(t){const{channel:e,channelDef:n,markDef:i,scale:r,config:s}=t,o=f5(t);return ie(n)&&!hre(n.aggregate)&&r&&Ho(r.get("type"))?cVe({fieldDef:n,channel:e,markDef:i,ref:o,config:s}):o}function cVe({fieldDef:t,channel:e,markDef:n,ref:i,config:r}){return Pd(n.type)?i:Et("invalid",n,r)===null?[dVe(t,e),i]:i}function dVe(t,e){const n=h5(t,!0),r=Bf(e)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...r}}function h5(t,e=!0){return r5(ce(t)?t:ue(t,{expr:"datum"}),!e)}function hVe(t){const{datum:e}=t;return Uf(e)?of(e):`${Ot(e)}`}function Ah(t,e,n,i){const r={};if(e&&(r.scale=e),Tl(t)){const{datum:s}=t;Uf(s)?r.signal=of(s):we(s)?r.signal=s.signal:XC(s)?r.signal=s.expr:r.value=s}else r.field=ue(t,n);if(i){const{offset:s,band:o}=i;s&&(r.offset=s),o&&(r.band=o)}return r}function Gx({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:i,startSuffix:r,bandPosition:s=.5}){const o=!we(s)&&0<s&&s<1?"datum":void 0,a=ue(e,{expr:o,suffix:r}),l=n!==void 0?ue(n,{expr:o}):ue(e,{suffix:"end",expr:o}),u={};if(s===0||s===1){u.scale=t;const c=s===0?a:l;u.field=c}else{const c=we(s)?`${s.signal} * ${a} + (1-${s.signal}) * ${l}`:`${s} * ${a} + ${1-s} * ${l}`;u.signal=`scale("${t}", ${c})`}return i&&(u.offset=i),u}function fVe({scaleName:t,fieldDef:e}){const n=ue(e,{expr:"datum"}),i=ue(e,{expr:"datum",suffix:"end"});return`abs(scale("${t}", ${i}) - scale("${t}", ${n}))`}function f5({channel:t,channelDef:e,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(e){if(We(e)){const d=o==null?void 0:o.get("type");if(or(e)){c??(c=sse({fieldDef:e,fieldDef2:n,markDef:i,config:r}));const{bin:h,timeUnit:f,type:p}=e;if(Gt(h)||c&&f&&p===Qg)return a!=null&&a.impute?Ah(e,s,{binSuffix:"mid"},{offset:l}):c&&!Yn(d)?Gx({scaleName:s,fieldOrDatumDef:e,bandPosition:c,offset:l}):Ah(e,s,tw(e,t)?{binSuffix:"range"}:{},{offset:l});if(Xn(h)){if(ie(n))return Gx({scaleName:s,fieldOrDatumDef:e,fieldOrDatumDef2:n,bandPosition:c,offset:l});ee(Tre(t===Qt?da:El))}}return Ah(e,s,Yn(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??e.bandPosition??.5:void 0})}else if(ra(e)){const d=e.value,h=l?{offset:l}:{};return{...Y0(t,d),...h}}}return Ue(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function Y0(t,e){return nt(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:nt(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:zt(e)}function uf(t){return t&&t!=="number"&&t!=="time"}function Jre(t,e,n){return`${t}(${e}${n?`, ${Ot(n)}`:""})`}const pVe="  ";function p5({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:r,config:s}){var l,u;if(uf(n))return Wo({fieldOrDatumDef:t,format:e,formatType:n,expr:i,config:s});const o=Zre(t,i,r),a=Zg(t);if(e===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(r&&s.normalizedNumberFormatType)return Wo({fieldOrDatumDef:t,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:i,config:s});if(s.numberFormatType)return Wo({fieldOrDatumDef:t,format:s.numberFormat,formatType:s.numberFormatType,expr:i,config:s})}if(a==="temporal"&&s.timeFormatType&&ie(t)&&t.timeUnit===void 0)return Wo({fieldOrDatumDef:t,format:s.timeFormat,formatType:s.timeFormatType,expr:i,config:s})}if(tm(t)){const c=mVe({field:o,timeUnit:ie(t)?(l=Bn(t.timeUnit))==null?void 0:l.unit:void 0,format:e,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Yf(t)&&((u=t.scale)==null?void 0:u.type)===Lr.UTC});return c?{signal:c}:void 0}if(e=EM({type:a,specifiedFormat:e,config:s,normalizeStack:r}),ie(t)&&Gt(t.bin)){const c=ue(t,{expr:i,binSuffix:"end"});return{signal:JC(o,c,e,n,s)}}else return e||Zg(t)==="quantitative"?{signal:`${nse(o,e)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Zre(t,e,n){return ie(t)?n?`${ue(t,{expr:e,suffix:"end"})}-${ue(t,{expr:e,suffix:"start"})}`:ue(t,{expr:e}):hVe(t)}function Wo({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:r,config:s,field:o}){if(o??(o=Zre(t,i,r)),o!=="datum.value"&&ie(t)&&Gt(t.bin)){const a=ue(t,{expr:i,binSuffix:"end"});return{signal:JC(o,a,e,n,s)}}return{signal:Jre(n,o,e)}}function ese(t,e,n,i,r,s){var o;if(!(ce(i)&&uf(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&Zg(t)==="quantitative"&&(r.normalizedNumberFormatType&&em(t)&&t.stack==="normalize"||r.numberFormatType))){if(em(t)&&t.stack==="normalize"&&r.normalizedNumberFormat)return EM({type:"quantitative",config:r,normalizeStack:!0});if(tm(t)){const a=ie(t)?(o=Bn(t.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:gVe({specifiedFormat:n,timeUnit:a,config:r,omitTimeFormatConfig:s})}return EM({type:e,specifiedFormat:n,config:r})}}function tse(t,e,n){var i;if(t&&(we(t)||t==="number"||t==="time"))return t;if(tm(e)&&n!=="time"&&n!=="utc")return ie(e)&&((i=Bn(e==null?void 0:e.timeUnit))!=null&&i.utc)?"utc":"time"}function EM({type:t,specifiedFormat:e,config:n,normalizeStack:i}){if(ce(e))return e;if(t===af)return i?n.normalizedNumberFormat:n.numberFormat}function gVe({specifiedFormat:t,timeUnit:e,config:n,omitTimeFormatConfig:i}){return t||(e?{signal:Lre(e)}:i?void 0:n.timeFormat)}function nse(t,e){return`format(${t}, "${e||""}")`}function nV(t,e,n,i){return uf(n)?Jre(n,t,e):nse(t,(ce(e)?e:void 0)??i.numberFormat)}function JC(t,e,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return JC(t,e,r.numberFormat,r.numberFormatType,r);const s=nV(t,n,i,r),o=nV(e,n,i,r);return`${r5(t,!1)} ? "null" : ${s} + "${pVe}" + ${o}`}function mVe({field:t,timeUnit:e,format:n,formatType:i,rawTimeFormat:r,isUTCScale:s}){return!e||n?!e&&i?`${i}(${t}, '${n}')`:(n=ce(n)?n:r,`${s?"utc":"time"}Format(${t}, '${n}')`):_We(e,t,s)}const KT="min",yVe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function iV(t){return t in yVe}function ise(t){return!!(t!=null&&t.encoding)}function Ka(t){return t&&(t.op==="count"||!!t.field)}function rse(t){return t&&j(t)}function ZC(t){return"row"in t||"column"in t}function g5(t){return!!t&&"header"in t}function XT(t){return"facet"in t}function vVe(t){return t.param}function CVe(t){return t&&!ce(t)&&"repeat"in t}function rV(t){const{field:e,timeUnit:n,bin:i,aggregate:r}=t;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:e}}function m5(t){return"sort"in t}function sse({fieldDef:t,fieldDef2:e,markDef:n,config:i}){if(We(t)&&t.bandPosition!==void 0)return t.bandPosition;if(ie(t)){const{timeUnit:r,bin:s}=t;if(r&&!e)return c5(n.type)?0:Su("timeUnitBandPosition",n,i);if(Gt(s))return .5}}function ose({channel:t,fieldDef:e,fieldDef2:n,markDef:i,config:r,scaleType:s,useVlSizeChannel:o}){var u,c,d;const a=zr(t),l=Et(o?"size":a,i,r,{vgChannel:a});if(l!==void 0)return l;if(ie(e)){const{timeUnit:h,bin:f}=e;if(h&&!n)return{band:Su("timeUnitBandSize",i,r)};if(Gt(f)&&!Yn(s))return{band:1}}if(c5(i.type))return s?Yn(s)?((u=r[i.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=r[i.type])==null?void 0:c.continuousBandSize:(d=r[i.type])==null?void 0:d.discreteBandSize}function ase(t,e,n,i){return Gt(t.bin)||t.timeUnit&&or(t)&&t.type==="temporal"?sse({fieldDef:t,fieldDef2:e,markDef:n,config:i})!==void 0:!1}function lse(t){return t&&!!t.sort&&!t.field}function QT(t){return t&&"condition"in t}function JT(t){const e=t==null?void 0:t.condition;return!!e&&!j(e)&&ie(e)}function ew(t){const e=t==null?void 0:t.condition;return!!e&&!j(e)&&We(e)}function wVe(t){const e=t==null?void 0:t.condition;return!!e&&(j(e)||ra(e))}function ie(t){return t&&(!!t.field||t.aggregate==="count")}function Zg(t){return t==null?void 0:t.type}function Tl(t){return t&&"datum"in t}function yc(t){return or(t)&&!Hx(t)||$x(t)}function sV(t){return or(t)&&t.type==="quantitative"&&!t.bin||$x(t)}function $x(t){return Tl(t)&&ft(t.datum)}function We(t){return ie(t)||Tl(t)}function or(t){return t&&("field"in t||t.aggregate==="count")&&"type"in t}function ra(t){return t&&"value"in t&&"value"in t}function Yf(t){return t&&("scale"in t||"sort"in t)}function em(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function use(t){return t&&"legend"in t}function cse(t){return t&&("format"in t||"formatType"in t)}function SVe(t){return Nr(t,["legend","axis","header","scale"])}function EVe(t){return"op"in t}function ue(t,e={}){let n=t.field;const i=e.prefix;let r=e.suffix,s="";if(xVe(t))n=Qie("count");else{let o;if(!e.nofn)if(EVe(t))o=t.op;else{const{bin:a,aggregate:l,timeUnit:u}=t;Gt(a)?(o=fre(a),r=(e.binSuffix??"")+(e.suffix??"")):l?Dd(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):wu(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!jf(u)&&(o=RWe(u),r=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(e.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),e.forAs?k9(n):e.expr?qie(n,e.expr)+s:lo(n)+s}function Hx(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ie(t)&&!!t.bin;case"temporal":return!1}throw new Error(bre(t.type))}function bVe(t){var e;return Yf(t)&&Jg((e=t.scale)==null?void 0:e.type)}function xVe(t){return t.aggregate==="count"}function _Ve(t,e){var o;const{field:n,bin:i,timeUnit:r,aggregate:s}=t;if(s==="count")return e.countTitle;if(Gt(i))return`${n} (binned)`;if(r&&!jf(r)){const a=(o=Bn(r))==null?void 0:o.unit;if(a)return`${n} (${zT(a).join("-")})`}else if(s)return Dd(s)?`${n} for max ${s.argmax}`:wu(s)?`${n} for min ${s.argmin}`:`${YC(s)} of ${n}`;return n}function RVe(t){const{aggregate:e,bin:n,timeUnit:i,field:r}=t;if(Dd(e))return`${r} for argmax(${e.argmax})`;if(wu(e))return`${r} for argmin(${e.argmin})`;const s=i&&!jf(i)?Bn(i):void 0,o=e||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Gt(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r}const dse=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return RVe(t);default:return _Ve(t,e)}};let hse=dse;function fse(t){hse=t}function TVe(){fse(dse)}function Jp(t,e,{allowDisabling:n,includeDefault:i=!0}){var a;const r=(a=y5(t))==null?void 0:a.title;if(!ie(t))return r??t.title;const s=t,o=i?v5(s,e):void 0;return n?gn(r,s.title,o):r??s.title??o}function y5(t){if(em(t)&&t.axis)return t.axis;if(use(t)&&t.legend)return t.legend;if(g5(t)&&t.header)return t.header}function v5(t,e){return hse(t,e)}function Wx(t){if(cse(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}else{const e=y5(t)??{},{format:n,formatType:i}=e;return{format:n,formatType:i}}}function AVe(t,e){var s;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(m5(t)&&j(t.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=t;if(r)return"temporal";if(i||n&&!Dd(n)&&!wu(n))return"quantitative";if(Yf(t)&&((s=t.scale)!=null&&s.type))switch(wM[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ll(t){if(ie(t))return t;if(JT(t))return t.condition}function Rn(t){if(We(t))return t;if(ew(t))return t.condition}function pse(t,e,n,i={}){if(ce(t)||ft(t)||yd(t)){const r=ce(t)?"string":ft(t)?"number":"boolean";return ee(A7e(e,r,t)),{value:t}}return We(t)?Vx(t,e,n,i):ew(t)?{...t,condition:Vx(t.condition,e,n,i)}:t}function Vx(t,e,n,i){if(cse(t)){const{format:r,formatType:s,...o}=t;if(uf(s)&&!n.customFormatTypes)return ee(QW(e)),Vx(o,e,n,i)}else{const r=em(t)?"axis":use(t)?"legend":g5(t)?"header":null;if(r&&t[r]){const{format:s,formatType:o,...a}=t[r];if(uf(o)&&!n.customFormatTypes)return ee(QW(e)),Vx({...t,[r]:a},e,n,i)}}return ie(t)?C5(t,e,i):DVe(t)}function DVe(t){let e=t.type;if(e)return t;const{datum:n}=t;return e=ft(n)?"quantitative":ce(n)?"nominal":Uf(n)?"temporal":void 0,{...t,type:e}}function C5(t,e,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:s,field:o}=t,a={...t};if(!n&&i&&!U9(i)&&!Dd(i)&&!wu(i)&&(ee(O7e(i)),delete a.aggregate),r&&(a.timeUnit=Bn(r)),o&&(a.field=`${o}`),Gt(s)&&(a.bin=ZT(s,e)),Xn(s)&&!jn(e)&&ee(uWe(e)),or(a)){const{type:l}=a,u=NWe(l);l!==u&&(a.type=u),l!=="quantitative"&&hre(i)&&(ee(D7e(l,i)),a.type="quantitative")}else if(!sre(e)){const l=AVe(a,e);a.type=l}if(or(a)){const{compatible:l,warning:u}=OVe(a,e)||{};l===!1&&ee(u)}if(m5(a)&&ce(a.sort)){const{sort:l}=a;if(iV(l))return{...a,sort:{encoding:l}};const u=l.substr(1);if(l.charAt(0)==="-"&&iV(u))return{...a,sort:{encoding:u,order:"descending"}}}if(g5(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function ZT(t,e){return yd(t)?{maxbins:VW(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?{...t,maxbins:VW(e)}:t}const op={compatible:!0};function OVe(t,e){const n=t.type;if(n==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case su:case ou:case LT:return Hx(t)?op:{compatible:!1,warning:L7e(e)};case Qt:case Un:case xd:case Zm:case Vr:case bl:case xl:case qC:case KC:case IT:case sf:case kT:case GT:case Vf:case go:case ha:case $T:return op;case pa:case uo:case fa:case ga:return n!==af?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:op;case Nu:case _d:case Rd:case Td:case Mu:case Fu:case Pu:case da:case El:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:op;case Br:case Ad:return!Hx(t)&&!bVe(t)?{compatible:!1,warning:I7e(e)}:op;case Kg:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:op}}function tm(t){const{formatType:e}=Wx(t);return e==="time"||!e&&PVe(t)}function PVe(t){return t&&(t.type==="temporal"||ie(t)&&!!t.timeUnit)}function eA(t,{timeUnit:e,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var l;const s=e&&((l=Bn(e))==null?void 0:l.unit);let o=s||n==="temporal",a;return XC(t)?a=t.expr:we(t)?a=t.signal:Uf(t)?(o=!0,a=of(t)):(ce(t)||ft(t))&&o&&(a=`datetime(${Ot(t)})`,SWe(s)&&(ft(t)&&t<1e4||ce(t)&&isNaN(Date.parse(t)))&&(a=of({[s]:t}))),a?i&&o?`time(${a})`:a:r?void 0:Ot(t)}function gse(t,e){const{type:n}=t;return e.map(i=>{const r=ie(t)&&!jf(t.timeUnit)?t.timeUnit:void 0,s=eA(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i})}function tw(t,e){return Gt(t.bin)?Lu(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const oV={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function nw(t){return t==null?void 0:t.condition}const mse=["domain","grid","labels","ticks","title"],FVe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},yse={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},MVe={...yse,style:1,labelExpr:1,encoding:1};function aV(t){return!!MVe[t]}const NVe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},vse=J(NVe);function Iu(t){return"mark"in t}class tA{constructor(e,n){this.name=e,this.run=n}hasMatchingType(e){return Iu(e)?uVe(e.mark)===this.name:!1}}function Dh(t,e){const n=t&&t[e];return n?j(n)?nf(n,i=>!!i.field):ie(n)||JT(n):!1}function Cse(t,e){const n=t&&t[e];return n?j(n)?nf(n,i=>!!i.field):ie(n)||Tl(n)||ew(n):!1}function bM(t,e){if(jn(e)){const n=t[e];if((ie(n)||Tl(n))&&(Hre(n.type)||ie(n)&&n.timeUnit)){const i=W9(e);return Cse(t,i)}}return!1}function w5(t){return nf(L8e,e=>{if(Dh(t,e)){const n=t[e];if(j(n))return nf(n,i=>!!i.aggregate);{const i=ll(n);return i&&!!i.aggregate}}return!1})}function wse(t,e){const n=[],i=[],r=[],s=[],o={};return S5(t,(a,l)=>{if(ie(a)){const{field:u,aggregate:c,bin:d,timeUnit:h,...f}=a;if(c||h||d){const p=y5(a),g=p==null?void 0:p.title;let m=ue(a,{forAs:!0});const y={...g?[]:{title:Jp(a,e,{allowDisabling:!0})},...f,field:m};if(c){let v;if(Dd(c)?(v="argmax",m=ue({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):wu(c)?(v="argmin",m=ue({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const C={op:v,as:m};u&&(C.field=u),s.push(C)}}else if(n.push(m),or(a)&&Gt(d)){if(i.push({bin:d,field:u,as:m}),n.push(ue(a,{binSuffix:"end"})),tw(a,l)&&n.push(ue(a,{binSuffix:"range"})),jn(l)){const v={field:`${m}_end`};o[`${l}2`]=v}y.bin="binned",sre(l)||(y.type=af)}else if(h&&!jf(h)){r.push({timeUnit:h,field:u,as:m});const v=or(a)&&a.type!==Qg&&"time";v&&(l===qC||l===sf?y.formatType=v:z8e(l)?y.legend={formatType:v,...y.legend}:jn(l)&&(y.axis={formatType:v,...y.axis}))}o[l]=y}else n.push(u),o[l]=t[l]}else o[l]=t[l]}),{bins:i,timeUnits:r,aggregate:s,groupby:n,encoding:o}}function LVe(t,e,n){const i=j8e(e,n);if(i){if(i==="binned"){const r=t[e===da?Qt:Un];return!!(ie(r)&&ie(t[e])&&Xn(r.bin))}}else return!1;return!0}function IVe(t,e,n,i){const r={};for(const s of J(t))rre(s)||ee(N7e(s));for(let s of H8e){if(!t[s])continue;const o=t[s];if(ey(s)){const a=are(s),l=r[a];if(ie(l)){if(MWe(l.type)&&ie(o)&&!l.timeUnit){ee(R7e(a));continue}}else s=a,ee(T7e(a))}if(s==="angle"&&e==="arc"&&!t.theta&&(ee(_7e),s=go),!LVe(t,s,e)){ee(BT(s,e));continue}if(s===Mu&&e==="line"){const a=ll(t[s]);if(a!=null&&a.aggregate){ee(F7e);continue}}if(s===Vr&&(n?"fill"in t:"stroke"in t)){ee(xre("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(s===KC||s===Kg&&!j(o)&&!ra(o)||s===sf&&j(o)){if(o){if(s===Kg){const a=t[s];if(lse(a)){r[s]=a;continue}}r[s]=de(o).reduce((a,l)=>(ie(l)?a.push(C5(l,s)):ee(CM(l,s)),a),[])}}else{if(s===sf&&o===null)r[s]=null;else if(!ie(o)&&!Tl(o)&&!ra(o)&&!QT(o)&&!we(o)){ee(CM(o,s));continue}r[s]=pse(o,s,i)}}return r}function nA(t,e){const n={};for(const i of J(t)){const r=pse(t[i],i,e,{compositeMark:!0});n[i]=r}return n}function kVe(t){const e=[];for(const n of J(t))if(Dh(t,n)){const i=t[n],r=de(i);for(const s of r)ie(s)?e.push(s):JT(s)&&e.push(s.condition)}return e}function S5(t,e,n){if(t)for(const i of J(t)){const r=t[i];if(j(r))for(const s of r)e.call(n,s,i);else e.call(n,r,i)}}function GVe(t,e,n,i){return t?J(t).reduce((r,s)=>{const o=t[s];return j(o)?o.reduce((a,l)=>e.call(i,a,l,s),r):e.call(i,r,o,s)},n):n}function Sse(t,e){return J(e).reduce((n,i)=>{switch(i){case Qt:case Un:case kT:case $T:case GT:case da:case El:case xd:case Zm:case go:case Fu:case ha:case Pu:case fa:case pa:case ga:case uo:case qC:case Br:case Vf:case sf:return n;case Kg:if(t==="line"||t==="trail")return n;case KC:case IT:{const r=e[i];if(j(r)||ie(r))for(const s of de(r))s.aggregate||n.push(ue(s,{}));return n}case Mu:if(t==="trail")return n;case Vr:case bl:case xl:case Nu:case _d:case Rd:case Ad:case Td:{const r=ll(e[i]);return r&&!r.aggregate&&n.push(ue(r,{})),n}}},[])}function $Ve(t){const{tooltip:e,...n}=t;if(!e)return{filteredEncoding:n};let i,r;if(j(e)){for(const s of e)s.aggregate?(i||(i=[]),i.push(s)):(r||(r=[]),r.push(s));i&&(n.tooltip=i)}else e.aggregate?n.tooltip=e:r=e;return j(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function xM(t,e,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=t.map(({fieldPrefix:o,titlePrefix:a})=>{const l=i?` of ${E5(e)}`:"";return{field:o+e.field,type:e.type,title:we(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=kVe(n).map(SVe);return{tooltip:[...r,...Ha(s,tt)]}}function E5(t){const{title:e,field:n}=t;return gn(e,n)}function b5(t,e,n,i,r){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const h=E5(n);return Ese(t,a,r,{mark:l,encoding:{[e]:{field:`${u}_${n.field}`,type:n.type,...h!==void 0?{title:h}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...ce(c)?{[`${e}2`]:{field:`${c}_${n.field}`}}:{},...i,...d}})}}function Ese(t,e,n,i){const{clip:r,color:s,opacity:o}=t,a=t.type;return t[e]||t[e]===void 0&&n[e]?[{...i,mark:{...n[e],...r?{clip:r}:{},...s?{color:s}:{},...o?{opacity:o}:{},...al(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(e)}`,...yd(t[e])?{}:t[e]}}]:[]}function bse(t,e,n){const{encoding:i}=t,r=e==="vertical"?"y":"x",s=i[r],o=i[`${r}2`],a=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:oS(s,n),continuousAxisChannelDef2:oS(o,n),continuousAxisChannelDefError:oS(a,n),continuousAxisChannelDefError2:oS(l,n),continuousAxis:r}}function oS(t,e){if(t!=null&&t.aggregate){const{aggregate:n,...i}=t;return n!==e&&ee(lWe(n,e)),i}else return t}function xse(t,e){const{mark:n,encoding:i}=t,{x:r,y:s}=i;if(al(n)&&n.orient)return n.orient;if(yc(r)){if(yc(s)){const o=ie(r)&&r.aggregate,a=ie(s)&&s.aggregate;if(!o&&a===e)return"vertical";if(!a&&o===e)return"horizontal";if(o===e&&a===e)throw new Error("Both x and y cannot have aggregate");return tm(s)&&!tm(r)?"horizontal":"vertical"}return"horizontal"}else{if(yc(s))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}const Bx="boxplot",HVe=["box","median","outliers","rule","ticks"],WVe=new tA(Bx,Rse);function _se(t){return ft(t)?"tukey":t}function Rse(t,{config:e}){t={...t,encoding:nA(t.encoding,e)};const{mark:n,encoding:i,params:r,projection:s,...o}=t,a=al(n)?n:{type:n};r&&ee(Ere("boxplot"));const l=a.extent??e.boxplot.extent,u=Et("size",a,e),c=a.invalid,d=_se(l),{bins:h,timeUnits:f,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:C,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:b}=VVe(t,l,e),{color:S,size:_,...A}=C,D=Ct=>b5(a,m,g,Ct,e.boxplot),P=D(A),L=D(C),O=D({...A,..._?{size:_}:{}}),M=xM([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,C),F={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},I=d==="min-max"?M:xM([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,C),H=[...P({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...P({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...P({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:I}),...P({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:I})],N=[...d!=="tukey"?H:[],...L({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...O({partName:"median",mark:{type:"tick",invalid:c,...he(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{},...u?{size:u}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:N};const G=`datum["lower_box_${g.field}"]`,W=`datum["upper_box_${g.field}"]`,X=`(${W} - ${G})`,ne=`${G} - ${l} * ${X}`,Se=`${W} + ${l} * ${X}`,xe=`datum["${g.field}"]`,rt={joinaggregate:Tse(g.field),groupby:y},cn={transform:[{filter:`(${ne} <= ${xe}) && (${xe} <= ${Se})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${g.field}`},{op:"max",field:g.field,as:`upper_whisker_${g.field}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${g.field}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${g.field}`},...v],groupby:y}],layer:H},{tooltip:Gi,...yo}=A,{scale:fe,axis:ve}=g,Ee=E5(g),Y=Nr(ve,["title"]),De=Ese(a,"outliers",e.boxplot,{transform:[{filter:`(${xe} < ${ne}) || (${xe} > ${Se})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...Ee!==void 0?{title:Ee}:{},...fe!==void 0?{scale:fe}:{},...Dt(Y)?{}:{axis:Y}},...yo,...S?{color:S}:{},...b?{tooltip:b}:{}}})[0];let Oe;const Ze=[...h,...f,rt];return De?Oe={transform:Ze,layer:[De,cn]}:(Oe=cn,Oe.transform.unshift(...Ze)),{...o,layer:[Oe,{transform:p,layer:N}]}}function Tse(t){return[{op:"q1",field:t,as:`lower_box_${t}`},{op:"q3",field:t,as:`upper_box_${t}`}]}function VVe(t,e,n){const i=xse(t,Bx),{continuousAxisChannelDef:r,continuousAxis:s}=bse(t,i,Bx),o=r.field,a=_se(e),l=[...Tse(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],u=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${e}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${e}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...d}=t.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:f}=$Ve(d),{bins:p,timeUnits:g,aggregate:m,groupby:y,encoding:v}=wse(f,n),C=i==="vertical"?"horizontal":"vertical",w=i,E=[...p,...g,{aggregate:[...m,...l],groupby:y},...u];return{bins:p,timeUnits:g,transform:E,groupby:y,aggregate:m,continuousAxisChannelDef:r,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:C,boxOrient:w,customTooltipWithoutAggregatedField:h}}const x5="errorbar",BVe=["ticks","rule"],zVe=new tA(x5,Ase);function Ase(t,{config:e}){t={...t,encoding:nA(t.encoding,e)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=Dse(t,x5,e);delete s.size;const c=b5(a,r,i,s,e.errorbar),d=a.thickness,h=a.size,f={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...h!==void 0?{size:h}:{}},p=[...c({partName:"ticks",mark:f,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:f,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function UVe(t,e){const{encoding:n}=t;if(jVe(n))return{orient:xse(t,e),inputType:"raw"};const i=YVe(n),r=qVe(n),s=n.x,o=n.y;if(i){if(r)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(We(a)&&We(l))throw new Error(`${e} cannot have both x2 and y2`);if(We(a)){if(yc(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(We(l)){if(yc(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(We(l)&&!We(a))throw new Error(`${e} cannot have xError2 without xError`);if(We(c)&&!We(u))throw new Error(`${e} cannot have yError2 without yError`);if(We(a)&&We(u))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(We(a)){if(yc(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(We(u)){if(yc(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function jVe(t){return(We(t.x)||We(t.y))&&!We(t.x2)&&!We(t.y2)&&!We(t.xError)&&!We(t.xError2)&&!We(t.yError)&&!We(t.yError2)}function YVe(t){return We(t.x2)||We(t.y2)}function qVe(t){return We(t.xError)||We(t.xError2)||We(t.yError)||We(t.yError2)}function Dse(t,e,n){const{mark:i,encoding:r,params:s,projection:o,...a}=t,l=al(i)?i:{type:i};s&&ee(Ere(e));const{orient:u,inputType:c}=UVe(t,e),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:f,continuousAxisChannelDefError2:p,continuousAxis:g}=bse(t,u,e),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:C}=KVe(l,d,h,f,p,c,e,n),{[g]:w,[g==="x"?"x2":"y2"]:E,[g==="x"?"xError":"yError"]:b,[g==="x"?"xError2":"yError2"]:S,..._}=r,{bins:A,timeUnits:D,aggregate:P,groupby:L,encoding:O}=wse(_,n),M=[...P,...m],F=c!=="raw"?[]:L,I=xM(v,d,O,C);return{transform:[...a.transform??[],...A,...D,...M.length===0?[]:[{aggregate:M,groupby:F}],...y],groupby:F,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:O,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:I}}function KVe(t,e,n,i,r,s,o,a){let l=[],u=[];const c=e.field;let d,h=!1;if(s==="raw"){const f=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":a.errorbar.center,p=t.extent?t.extent:f==="mean"?"stderr":"iqr";if(f==="median"!=(p==="iqr")&&ee(aWe(f,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:f,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:YC(f)},{fieldPrefix:"upper_",titlePrefix:lV(f,p,"+")},{fieldPrefix:"lower_",titlePrefix:lV(f,p,"-")}],h=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:Jp({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Jp({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Jp({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&ee(oWe(t.center,t.extent)),s==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],r?u.push({calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const f of u)d.push({fieldPrefix:f.as.substring(0,6),titlePrefix:rf(rf(f.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:h}}function lV(t,e,n){return`${YC(t)} ${n} ${e}`}const _5="errorband",XVe=["band","borders"],QVe=new tA(_5,Ose);function Ose(t,{config:e}){t={...t,encoding:nA(t.encoding,e)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=Dse(t,_5,e),u=o,c=b5(u,r,i,s,e.errorband),d=t.encoding.x!==void 0&&t.encoding.y!==void 0;let h={type:d?"area":"rect"},f={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(h={...h,...p,ariaRoleDescription:"errorband"},f={...f,...p,aria:!1}):u.interpolate?ee(ZW("interpolate")):u.tension&&ee(ZW("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:f,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:f,positionPrefix:"upper",extraEncoding:l})]}}const Pse={};function R5(t,e,n){const i=new tA(t,e);Pse[t]={normalizer:i,parts:n}}function JVe(){return J(Pse)}R5(Bx,Rse,HVe);R5(x5,Ase,BVe);R5(_5,Ose,XVe);const ZVe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Fse={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Mse={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},eBe=J(Fse),tBe=J(Mse),nBe={header:1,headerRow:1,headerColumn:1,headerFacet:1},Nse=J(nBe),Lse=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],iBe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},rBe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},sa="_vgsid_",sBe={point:{on:"click",fields:[sa],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function T5(t){return t==="legend"||!!(t!=null&&t.legend)}function AO(t){return T5(t)&&he(t)}function A5(t){return!!(t!=null&&t.select)}function Ise(t){const e=[];for(const n of t||[]){if(A5(n))continue;const{expr:i,bind:r,...s}=n;if(r&&i){const o={...s,bind:r,init:i};e.push(o)}else{const o={...s,...i?{update:i}:{},...r?{bind:r}:{}};e.push(o)}}return e}function oBe(t){return iA(t)||O5(t)||D5(t)}function D5(t){return"concat"in t}function iA(t){return"vconcat"in t}function O5(t){return"hconcat"in t}function kse({step:t,offsetIsDiscrete:e}){return e?t.for??"offset":"position"}function ul(t){return he(t)&&t.step!==void 0}function uV(t){return t.view||t.width||t.height}const cV=20,aBe={align:1,bounds:1,center:1,columns:1,spacing:1},lBe=J(aBe);function uBe(t,e,n){const i=n[e],r={},{spacing:s,columns:o}=i;s!==void 0&&(r.spacing=s),o!==void 0&&(XT(t)&&!ZC(t.facet)||D5(t))&&(r.columns=o),iA(t)&&(r.columns=1);for(const a of lBe)if(t[a]!==void 0)if(a==="spacing"){const l=t[a];r[a]=ft(l)?l:{row:l.row??s,column:l.column??s}}else r[a]=t[a];return r}function _M(t,e){return t[e]??t[e==="width"?"continuousWidth":"continuousHeight"]}function zx(t,e){const n=Ux(t,e);return ul(n)?n.step:Gse}function Ux(t,e){const n=t[e]??t[e==="width"?"discreteWidth":"discreteHeight"];return gn(n,{step:t.step})}const Gse=20,cBe={continuousWidth:200,continuousHeight:200,step:Gse},dBe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:cBe,mark:iVe,arc:{},area:{},bar:oVe,circle:{},geoshape:{},image:{},line:{},point:{},rect:aVe,rule:{color:"black"},square:{},text:{color:"black"},tick:lVe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:$We,projection:{},legend:iBe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:sBe,style:{},title:{},facet:{spacing:cV},concat:{spacing:cV},normalizedNumberFormat:".0%"},Fl=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],dV={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},hV={blue:Fl[0],orange:Fl[1],red:Fl[2],teal:Fl[3],green:Fl[4],yellow:Fl[5],purple:Fl[6],pink:Fl[7],brown:Fl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function hBe(t={}){return{signals:[{name:"color",value:he(t)?{...hV,...t}:hV}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function fBe(t){return{signals:[{name:"fontSize",value:he(t)?{...dV,...t}:dV}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function pBe(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function $se(t){const e=J(t||{}),n={};for(const i of e){const r=t[i];n[i]=nw(r)?gre(r):us(r)}return n}function gBe(t){const e=J(t),n={};for(const i of e)n[i]=$se(t[i]);return n}const mBe=[...Xre,...vse,...Nse,"background","padding","legend","lineBreak","scale","style","title","view"];function Hse(t={}){const{color:e,font:n,fontSize:i,selection:r,...s}=t,o=Gm({},$e(dBe),n?pBe(n):{},e?hBe(e):{},i?fBe(i):{},s||{});r&&$m(o,"selection",r,!0);const a=Nr(o,mBe);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=us(o[l]));for(const l of Xre)o[l]&&(a[l]=xr(o[l]));for(const l of vse)o[l]&&(a[l]=$se(o[l]));for(const l of Nse)o[l]&&(a[l]=xr(o[l]));return o.legend&&(a.legend=xr(o.legend)),o.scale&&(a.scale=xr(o.scale)),o.style&&(a.style=gBe(o.style)),o.title&&(a.title=xr(o.title)),o.view&&(a.view=xr(o.view)),a}const yBe=new Set(["view",...QWe]),vBe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],CBe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...nVe};function wBe(t){t=$e(t);for(const e of vBe)delete t[e];if(t.axis)for(const e in t.axis)nw(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of ZVe)delete t.legend[e];if(t.mark){for(const e of tV)delete t.mark[e];t.mark.tooltip&&he(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(Ise(t.params)),delete t.params);for(const e of yBe){for(const i of tV)delete t[e][i];const n=CBe[e];if(n)for(const i of n)delete t[e][i];EBe(t,e)}for(const e of JVe())delete t[e];SBe(t);for(const e in t)he(t[e])&&Dt(t[e])&&delete t[e];return Dt(t)?void 0:t}function SBe(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:i}=pre(t.title);Dt(e)||(t.style["group-title"]={...t.style["group-title"],...e}),Dt(n)||(t.style["group-subtitle"]={...t.style["group-subtitle"],...n}),Dt(i)?delete t.title:t.title=i}function EBe(t,e,n,i){const r=i?t[e][i]:t[e];e==="view"&&(n="cell");const s={...r,...t.style[n??e]};Dt(s)||(t.style[n??e]=s),i||delete t[e]}function rA(t){return"layer"in t}function bBe(t){return"repeat"in t}function xBe(t){return!j(t.repeat)&&t.repeat.layer}class P5{map(e,n){return XT(e)?this.mapFacet(e,n):bBe(e)?this.mapRepeat(e,n):O5(e)?this.mapHConcat(e,n):iA(e)?this.mapVConcat(e,n):D5(e)?this.mapConcat(e,n):this.mapLayerOrUnit(e,n)}mapLayerOrUnit(e,n){if(rA(e))return this.mapLayer(e,n);if(Iu(e))return this.mapUnit(e,n);throw new Error(j9(e))}mapLayer(e,n){return{...e,layer:e.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(e,n){return{...e,hconcat:e.hconcat.map(i=>this.map(i,n))}}mapVConcat(e,n){return{...e,vconcat:e.vconcat.map(i=>this.map(i,n))}}mapConcat(e,n){const{concat:i,...r}=e;return{...r,concat:i.map(s=>this.map(s,n))}}mapFacet(e,n){return{...e,spec:this.map(e.spec,n)}}mapRepeat(e,n){return{...e,spec:this.map(e.spec,n)}}}const _Be={zero:1,center:1,normalize:1};function RBe(t){return t in _Be}const TBe=new Set([Yre,jT,UT,kx,qT,l5,u5,YT,qre,a5]),ABe=new Set([jT,UT,Yre]);function ap(t){return ie(t)&&Zg(t)==="quantitative"&&!t.bin}function fV(t,e,{orient:n,type:i}){const r=e==="x"?"y":"radius",s=e==="x",o=t[e],a=t[r];if(ie(o)&&ie(a))if(ap(o)&&ap(a)){if(o.stack)return e;if(a.stack)return r;const l=ie(o)&&!!o.aggregate,u=ie(a)&&!!a.aggregate;if(l!==u)return l?e:r;if(s&&["bar","area"].includes(i)){if(n==="vertical")return r;if(n==="horizontal")return e}}else{if(ap(o))return e;if(ap(a))return r}else{if(ap(o))return e;if(ap(a))return r}}function DBe(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Wse(t,e){var h,f;const n=al(t)?t:{type:t},i=n.type;if(!TBe.has(i))return null;const r=fV(e,"x",n)||fV(e,"theta",n);if(!r)return null;const s=e[r],o=ie(s)?ue(s,{}):void 0,a=DBe(r),l=[],u=new Set;if(e[a]){const p=e[a],g=ie(p)?ue(p,{}):void 0;g&&g!==o&&(l.push(a),u.add(g));const m=a==="x"?"xOffset":"yOffset",y=e[m],v=ie(y)?ue(y,{}):void 0;v&&v!==o&&(l.push(m),u.add(v))}const c=W8e.reduce((p,g)=>{if(g!=="tooltip"&&Dh(e,g)){const m=e[g];for(const y of de(m)){const v=ll(y);if(v.aggregate)continue;const C=ue(v,{});(!C||!u.has(C))&&p.push({channel:g,fieldDef:v})}}return p},[]);let d;return s.stack!==void 0?yd(s.stack)?d=s.stack?"zero":null:d=s.stack:ABe.has(i)&&(d="zero"),!d||!RBe(d)||w5(e)&&c.length===0?null:(h=s==null?void 0:s.scale)!=null&&h.type&&((f=s==null?void 0:s.scale)==null?void 0:f.type)!==Lr.LINEAR?(s!=null&&s.stack&&ee(iWe(s.scale.type)),null):We(e[_l(r)])?(s.stack!==void 0&&ee(nWe(r)),null):(ie(s)&&s.aggregate&&!Z8e.has(s.aggregate)&&ee(rWe(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:r,impute:s.impute===null?!1:Pd(i),stackBy:c,offset:d})}function Vse(t,e,n){const i=xr(t),r=Et("orient",i,n);if(i.orient=MBe(i.type,e,r),r!==void 0&&r!==i.orient&&ee(H7e(i.orient,r)),i.type==="bar"&&i.orient){const a=Et("cornerRadiusEnd",i,n);if(a!==void 0){const l=i.orient==="horizontal"&&e.x2||i.orient==="vertical"&&e.y2?["cornerRadius"]:sVe[i.orient];for(const u of l)i[u]=a;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Et("opacity",i,n)===void 0&&(i.opacity=PBe(i.type,e)),Et("cursor",i,n)===void 0&&(i.cursor=OBe(i,e,n)),i}function OBe(t,e,n){return e.href||t.href||Et("href",t,n)?"pointer":t.cursor}function PBe(t,e){if(nt([qT,a5,l5,u5],t)&&!w5(e))return .7}function FBe(t,e,{graticule:n}){if(n)return!1;const i=Su("filled",t,e),r=t.type;return gn(i,r!==qT&&r!==YT&&r!==kx)}function MBe(t,e,n){switch(t){case qT:case l5:case u5:case qre:case KWe:case qWe:return}const{x:i,y:r,x2:s,y2:o}=e;switch(t){case jT:if(ie(i)&&(Xn(i.bin)||ie(r)&&r.aggregate&&!i.aggregate))return"vertical";if(ie(r)&&(Xn(r.bin)||ie(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(ie(i)&&i.type===af&&!Gt(i.bin)||$x(i))&&ie(r)&&Xn(r.bin)?"horizontal":"vertical";if(!o)return(ie(r)&&r.type===af&&!Gt(r.bin)||$x(r))&&ie(i)&&Xn(i.bin)?"vertical":"horizontal"}case kx:if(s&&!(ie(i)&&Xn(i.bin))&&o&&!(ie(r)&&Xn(r.bin)))return;case UT:if(o)return ie(r)&&Xn(r.bin)?"horizontal":"vertical";if(s)return ie(i)&&Xn(i.bin)?"vertical":"horizontal";if(t===kx){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case YT:case a5:{const a=sV(i),l=sV(r);if(n)return n;if(a&&!l)return t!=="tick"?"horizontal":"vertical";if(!a&&l)return t!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=or(i)&&i.type===Qg,c=or(r)&&r.type===Qg;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function NBe(t){const{point:e,line:n,...i}=t;return J(i).length>1?i:i.type}function LBe(t){for(const e of["line","area","rule","trail"])t[e]&&(t={...t,[e]:Nr(t[e],["point","line"])});return t}function DO(t,e={},n){return t.point==="transparent"?{opacity:0}:t.point?he(t.point)?t.point:{}:t.point!==void 0?null:e.point||n.shape?he(e.point)?e.point:{}:void 0}function pV(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}class IBe{constructor(){this.name="path-overlay"}hasMatchingType(e,n){if(Iu(e)){const{mark:i,encoding:r}=e,s=al(i)?i:{type:i};switch(s.type){case"line":case"rule":case"trail":return!!DO(s,n[s.type],r);case"area":return!!DO(s,n[s.type],r)||!!pV(s,n[s.type])}}return!1}run(e,n,i){const{config:r}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=e,d=nA(u,r),h=al(a)?a:{type:a},f=DO(h,r[h.type],d),p=h.type==="area"&&pV(h,r[h.type]),g=[{name:l,...s?{params:s}:{},mark:NBe({...h.type==="area"&&h.opacity===void 0&&h.fillOpacity===void 0?{opacity:.7}:{},...h}),encoding:Nr(d,["shape"])}],m=Wse(Vse(h,d,r),d);let y=d;if(m){const{fieldChannel:v,offset:C}=m;y={...d,[v]:{...d[v],...C?{stack:C}:{}}}}return y=Nr(y,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",...Yg(h,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),f&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Yg(h,["clip","tooltip"]),...f},encoding:y}),i({...c,layer:g},{...n,config:LBe(r)})}}function kBe(t,e){return e?ZC(t)?zse(t,e):Bse(t,e):t}function OO(t,e){return e?zse(t,e):t}function RM(t,e,n){const i=e[t];if(CVe(i)){if(i.repeat in n)return{...e,[t]:n[i.repeat]};ee(v7e(i.repeat));return}return e}function Bse(t,e){if(t=RM("field",t,e),t!==void 0){if(t===null)return null;if(m5(t)&&Ka(t.sort)){const n=RM("field",t.sort,e);t={...t,...n?{sort:n}:{}}}return t}}function gV(t,e){if(ie(t))return Bse(t,e);{const n=RM("datum",t,e);return n!==t&&!n.type&&(n.type="nominal"),n}}function mV(t,e){if(We(t)){const n=gV(t,e);if(n)return n;if(QT(t))return{condition:t.condition}}else{if(ew(t)){const n=gV(t.condition,e);if(n)return{...t,condition:n};{const{condition:i,...r}=t;return r}}return t}}function zse(t,e){const n={};for(const i in t)if(Ae(t,i)){const r=t[i];if(j(r))n[i]=r.map(s=>mV(s,e)).filter(s=>s);else{const s=mV(r,e);s!==void 0&&(n[i]=s)}}return n}class GBe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(Iu(e)){const{encoding:n,mark:i}=e;if(i==="line"||al(i)&&i.type==="line")for(const r of $8e){const s=Bf(r),o=n[s];if(n[r]&&(ie(o)&&!Xn(o.bin)||Tl(o)))return!0}}return!1}run(e,n,i){const{encoding:r,mark:s}=e;return ee($7e(!!r.x2,!!r.y2)),i({...e,mark:he(s)?{...s,type:"rule"}:"rule"},n)}}class $Be extends P5{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[WVe,zVe,QVe,new IBe,new GBe]}map(e,n){if(Iu(e)){const i=Dh(e.encoding,su),r=Dh(e.encoding,ou),s=Dh(e.encoding,LT);if(i||r||s)return this.mapFacetedUnit(e,n)}return super.map(e,n)}mapUnit(e,n){const{parentEncoding:i,parentProjection:r}=n,s=OO(e.encoding,n.repeater),o={...e,...e.name?{name:[n.repeaterPrefix,e.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(e,n){return xBe(e)?this.mapLayerRepeat(e,n):this.mapNonLayerRepeat(e,n)}mapLayerRepeat(e,n){const{repeat:i,spec:r,...s}=e,{row:o,column:a,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:r}},n):{...s,layer:l.map(d=>{const h={...u,layer:d},f=`${(r.name?`${r.name}_`:"")+c}child__layer_${Kt(d)}`,p=this.mapLayerOrUnit(r,{...n,repeater:h,repeaterPrefix:f});return p.name=f,p})}}mapNonLayerRepeat(e,n){const{repeat:i,spec:r,data:s,...o}=e;!j(i)&&e.columns&&(e=Nr(e,["columns"]),ee(KW("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!j(i)&&i.row||[l?l.row:null],d=!j(i)&&i.column||[l?l.column:null],h=j(i)&&i||[l?l.repeat:null];for(const p of h)for(const g of c)for(const m of d){const y={repeat:p,row:g,column:m,layer:l.layer},v=(r.name?`${r.name}_`:"")+u+"child__"+(j(i)?`${Kt(p)}`:(i.row?`row_${Kt(g)}`:"")+(i.column?`column_${Kt(m)}`:"")),C=this.map(r,{...n,repeater:y,repeaterPrefix:v});C.name=v,a.push(Nr(C,["data"]))}const f=j(i)?e.columns:i.column?i.column.length:1;return{data:r.data??s,align:"all",...o,columns:f,concat:a}}mapFacet(e,n){const{facet:i}=e;return ZC(i)&&e.columns&&(e=Nr(e,["columns"]),ee(KW("facet"))),super.mapFacet(e,n)}mapUnitWithParentEncodingOrProjection(e,n){const{encoding:i,projection:r}=e,{parentEncoding:s,parentProjection:o,config:a}=n,l=vV({parentProjection:o,projection:r}),u=yV({parentEncoding:s,encoding:OO(i,n.repeater)});return this.mapUnit({...e,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,n){const{row:i,column:r,facet:s,...o}=e.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:h,encoding:f,...p}=e,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:i,column:r,facet:s},n),y=OO(o,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:y,...h?{params:h}:{}}},n)}getFacetMappingAndLayout(e,n){const{row:i,column:r,facet:s}=e;if(i||r){s&&ee(k7e([...i?[su]:[],...r?[ou]:[]]));const o={},a={};for(const l of[su,ou]){const u=e[l];if(u){const{align:c,center:d,spacing:h,columns:f,...p}=u;o[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:kBe(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(e,{parentEncoding:n,parentProjection:i,...r}){const{encoding:s,projection:o,...a}=e,l={...r,parentEncoding:yV({parentEncoding:n,encoding:s,layer:!0}),parentProjection:vV({parentProjection:i,projection:o})};return super.mapLayer({...a,...e.name?{name:[l.repeaterPrefix,e.name].filter(u=>u).join("_")}:{}},l)}}function yV({parentEncoding:t,encoding:e={},layer:n}){let i={};if(t){const r=new Set([...J(t),...J(e)]);for(const s of r){const o=e[s],a=t[s];if(We(o)){const l={...a,...o};i[s]=l}else ew(o)?i[s]={...o,condition:{...a,...o.condition}}:o||o===null?i[s]=o:(n||ra(a)||we(a)||We(a)||j(a))&&(i[s]=a)}}else i=e;return!i||Dt(i)?void 0:i}function vV(t){const{parentProjection:e,projection:n}=t;return e&&n&&ee(x7e({parentProjection:e,projection:n})),n??e}function F5(t){return"filter"in t}function HBe(t){return(t==null?void 0:t.stop)!==void 0}function Use(t){return"lookup"in t}function WBe(t){return"data"in t}function VBe(t){return"param"in t}function BBe(t){return"pivot"in t}function zBe(t){return"density"in t}function UBe(t){return"quantile"in t}function jBe(t){return"regression"in t}function YBe(t){return"loess"in t}function qBe(t){return"sample"in t}function KBe(t){return"window"in t}function XBe(t){return"joinaggregate"in t}function QBe(t){return"flatten"in t}function JBe(t){return"calculate"in t}function jse(t){return"bin"in t}function ZBe(t){return"impute"in t}function eze(t){return"timeUnit"in t}function tze(t){return"aggregate"in t}function nze(t){return"stack"in t}function ize(t){return"fold"in t}function rze(t){return"extent"in t&&!("density"in t)}function sze(t){return t.map(e=>F5(e)?{filter:Xp(e.filter,FWe)}:e)}class oze extends P5{map(e,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),e=CV(e,n),super.map(e,n)}mapLayerOrUnit(e,n){if(e=CV(e,n),e.encoding){const i={};for(const[r,s]of Qc(e.encoding))i[r]=Yse(s,n);e={...e,encoding:i}}return super.mapLayerOrUnit(e,n)}mapUnit(e,n){const{selection:i,...r}=e;return i?{...r,params:Qc(i).map(([s,o])=>{const{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=u!=="none";for(const d of ii(n.selectionPredicates[s]??{}))d.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:e}}function CV(t,e){const{transform:n,...i}=t;if(n){const r=n.map(s=>{if(F5(s))return{filter:TM(s,e)};if(jse(s)&&zf(s.bin))return{...s,bin:qse(s.bin)};if(Use(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...i,transform:r}}return t}function Yse(t,e){var i,r;const n=$e(t);if(ie(n)&&zf(n.bin)&&(n.bin=qse(n.bin)),Yf(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(QT(n))if(j(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:TM(s,e)}});else{const{selection:s,param:o,test:a,...l}=Yse(n.condition,e);n.condition=o?n.condition:{...l,test:TM(n.condition,e)}}return n}function qse(t){const e=t.extent;if(e!=null&&e.selection){const{selection:n,...i}=e;return{...t,extent:{...i,param:n}}}return t}function TM(t,e){const n=i=>Xp(i,r=>{var s;const o=e.emptySelections[r]??!0,a={param:r,empty:o};return(s=e.selectionPredicates)[r]??(s[r]=[]),e.selectionPredicates[r].push(a),a});return t.selection?n(t.selection):Xp(t.test||t.filter,i=>i.selection?n(i.selection):i)}class AM extends P5{map(e,n){const i=n.selections??[];if(e.params&&!Iu(e)){const r=[];for(const s of e.params)A5(s)?i.push(s):r.push(s);e.params=r}return n.selections=i,super.map(e,n)}mapUnit(e,n){const i=n.selections;if(!i||!i.length)return e;const r=(n.path??[]).concat(e.name),s=[];for(const o of i)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(ce(a)&&(a===e.name||r.includes(a))||j(a)&&a.map(l=>r.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(e.params=s),e}}for(const t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const e=AM.prototype[t];AM.prototype[t]=function(n,i){return e.call(this,n,aze(n,i))}}function aze(t,e){return t.name?{...e,path:(e.path??[]).concat(t.name)}:e}function Kse(t,e){e===void 0&&(e=Hse(t.config));const n=dze(t,e),{width:i,height:r}=t,s=hze(n,{width:i,height:r,autosize:t.autosize},e);return{...n,...s?{autosize:s}:{}}}const lze=new $Be,uze=new oze,cze=new AM;function dze(t,e={}){const n={config:e};return cze.map(lze.map(uze.map(t,n),n),n)}function wV(t){return ce(t)?{type:t}:t??{}}function hze(t,e,n){let{width:i,height:r}=e;const s=Iu(t)||rA(t),o={};s?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(ee(UW("width")),i=void 0),r=="container"&&(ee(UW("height")),r=void 0));const a={type:"pad",...o,...n?wV(n.autosize):{},...wV(t.autosize)};if(a.type==="fit"&&!s&&(ee(l7e),a.type="pad"),i=="container"&&!(a.type=="fit"||a.type=="fit-x")&&ee(jW("width")),r=="container"&&!(a.type=="fit"||a.type=="fit-y")&&ee(jW("height")),!gs(a,{type:"pad"}))return a}function fze(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function pze(t){return t?`fit-${HT(t)}`:"fit"}const gze=["background","padding"];function SV(t,e){const n={};for(const i of gze)t&&t[i]!==void 0&&(n[i]=us(t[i]));return e&&(n.params=t.params),n}class ku{constructor(e={},n={}){this.explicit=e,this.implicit=n}clone(){return new ku($e(this.explicit),$e(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return gn(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:n,explicit:i}){n!==void 0&&this.set(e,n,i)}set(e,n,i){return delete this[i?"implicit":"explicit"][e],this[i?"explicit":"implicit"][e]=n,this}copyKeyFromSplit(e,{explicit:n,implicit:i}){n[e]!==void 0?this.set(e,n[e],!0):i[e]!==void 0&&this.set(e,i[e],!1)}copyKeyFromObject(e,n){n[e]!==void 0&&this.set(e,n[e],!0)}copyAll(e){for(const n of J(e.combine())){const i=e.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Oa(t){return{explicit:!0,value:t}}function es(t){return{explicit:!1,value:t}}function Xse(t){return(e,n,i,r)=>{const s=t(e.value,n.value);return s>0?e:s<0?n:sA(e,n,i,r)}}function sA(t,e,n,i){return t.explicit&&e.explicit&&ee(K7e(n,i,t.value,e.value)),t}function Zc(t,e,n,i,r=sA){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:gs(t.value,e.value)?t:r(t,e,n,i)}class mze extends ku{constructor(e={},n={},i=!1){super(e,n),this.explicit=e,this.implicit=n,this.parseNothing=i}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function nm(t){return"url"in t}function g1(t){return"values"in t}function Qse(t){return"name"in t&&!nm(t)&&!g1(t)&&!Pc(t)}function Pc(t){return t&&(Jse(t)||Zse(t)||M5(t))}function Jse(t){return"sequence"in t}function Zse(t){return"sphere"in t}function M5(t){return"graticule"in t}var Lt;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"})(Lt||(Lt={}));function eoe(t){const{signals:e,hasLegend:n,index:i,...r}=t;return r.field=lo(r.field),r}function cf(t,e=!0,n=Li){if(j(t)){const i=t.map(r=>cf(r,e,n));return e?`[${i.join(", ")}]`:i}else if(Uf(t))return n(e?of(t):wWe(t));return e?n(Ot(t)):t}function yze(t,e){for(const n of ii(t.component.selection??{})){const i=n.name;let r=`${i}${td}, ${n.resolve==="global"?"true":`{unit: ${Oh(t)}}`}`;for(const s of aA)s.defined(n)&&(s.signals&&(e=s.signals(t,n,e)),s.modifyExpr&&(r=s.modifyExpr(t,n,r)));e.push({name:i+Kze,on:[{events:{signal:n.name+td},update:`modify(${ae(n.name+df)}, ${r})`}]})}return N5(e)}function vze(t,e){if(t.component.selection&&J(t.component.selection).length){const n=ae(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:bd("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return N5(e)}function Cze(t,e){let n=!1;for(const i of ii(t.component.selection??{})){const r=i.name,s=ae(r+df);if(e.filter(a=>a.name===r).length===0){const a=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";e.push({name:i.name,update:`${yoe}(${s}, ${ae(a)}${l}`})}n=!0;for(const a of aA)a.defined(i)&&a.topLevelSignals&&(e=a.topLevelSignals(t,i,e))}return n&&e.filter(r=>r.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),N5(e)}function wze(t,e){const n=[...e],i=Oh(t,{escape:!1});for(const r of ii(t.component.selection??{})){const s={name:r.name+df};if(r.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:sa}}]),r.init){const a=r.project.items.map(eoe);s.values=r.project.hasSelectionId?r.init.map(l=>({unit:i,[sa]:cf(l,!1)[0]})):r.init.map(l=>({unit:i,fields:a,values:cf(l,!1)}))}n.filter(a=>a.name===r.name+df).length||n.push(s)}return n}function toe(t,e){for(const n of ii(t.component.selection??{}))for(const i of aA)i.defined(n)&&i.marks&&(e=i.marks(t,n,e));return e}function Sze(t,e){for(const n of t.children)on(n)&&(e=toe(n,e));return e}function Eze(t,e,n,i){const r=Eoe(t,e.param,e);return{signal:xs(n.get("type"))&&j(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function N5(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}class Tt{constructor(e,n){this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,n){if(this._children.includes(e)){ee(S7e);return}n!==void 0?this._children.splice(n,0,e):this._children.push(e)}removeChild(e){const n=this._children.indexOf(e);return this._children.splice(n,1),n}remove(){let e=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,e++)}insertAsParentOf(e){const n=e.parent;n.removeChild(this),this.parent=n,e.parent=this}swapWithParent(){const e=this._parent,n=e.parent;for(const r of this._children)r.parent=e;this._children=[],e.removeChild(this);const i=e.parent.removeChild(e);this._parent=n,n.addChild(this,i),e.parent=this}}class ir extends Tt{clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}constructor(e,n,i,r){super(e,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Xie()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}function PO(t){return t.as!==void 0}function EV(t){return`${t}_end`}class Xa extends Tt{clone(){return new Xa(null,$e(this.formula))}constructor(e,n){super(e),this.formula=n}static makeFromEncoding(e,n){const i=n.reduceFieldDef((r,s)=>{const{field:o,timeUnit:a}=s;if(a){let l;if(jf(a)){if(on(n)){const{mark:u}=n;(c5(u)||s.bandPosition)&&(l={timeUnit:Bn(a),field:o})}}else l={as:ue(s,{forAs:!0}),field:o,timeUnit:a};l&&(r[tt(l)]=l)}return r},{});return Dt(i)?null:new Xa(e,i)}static makeFromTransform(e,n){const{timeUnit:i,...r}={...n},s=Bn(i),o={...r,timeUnit:s};return new Xa(e,{[tt(o)]:o})}merge(e){this.formula={...this.formula};for(const n in e.formula)this.formula[n]||(this.formula[n]=e.formula[n]);for(const n of e.children)e.removeChild(n),n.parent=this;e.remove()}removeFormulas(e){const n={};for(const[i,r]of Qc(this.formula)){const s=PO(r)?r.as:`${r.field}_end`;e.has(s)||(n[i]=r)}this.formula=n}producedFields(){return new Set(ii(this.formula).map(e=>PO(e)?e.as:EV(e.field)))}dependentFields(){return new Set(ii(this.formula).map(e=>e.field))}hash(){return`TimeUnit ${tt(this.formula)}`}assemble(){const e=[];for(const n of ii(this.formula))if(PO(n)){const{field:i,as:r,timeUnit:s}=n,{unit:o,utc:a,...l}=Bn(s);e.push({field:lo(i),type:"timeunit",...o?{units:zT(o)}:{},...a?{timezone:"utc"}:{},...l,as:[r,`${r}_end`]})}else if(n){const{field:i,timeUnit:r}=n,s=i.replaceAll("\\.","."),o=Mre(r==null?void 0:r.unit),{part:a,step:l}=kre(o,r.step);e.push({type:"formula",expr:`timeOffset('${a}', datum['${s}'], ${l})`,as:EV(s)})}return e}}const iw="_tuple_fields";class bze{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const xze={defined:()=>!0,parse:(t,e,n)=>{const i=e.name,r=e.project??(e.project=new bze),s={},o={},a=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=Kt(`${i}_${m}`);for(let v=1;a.has(y);v++)y=Kt(`${i}_${m}_${v}`);return a.add(y),{[g]:y}},u=e.type,c=t.config.selection[u],d=n.value!==void 0?de(n.value):null;let{fields:h,encodings:f}=he(n.select)?n.select:{};if(!h&&!f&&d){for(const p of d)if(he(p))for(const g of J(p))G8e(g)?(f||(f=[])).push(g):u==="interval"?(ee(y7e),f=c.encodings):(h??(h=[])).push(g)}!h&&!f&&(f=c.encodings,"fields"in c&&(h=c.fields));for(const p of f??[]){const g=t.fieldDef(p);if(g){let m=g.field;if(g.aggregate){ee(u7e(p,g.aggregate));continue}else if(!m){ee(qW(p));continue}if(g.timeUnit&&!jf(g.timeUnit)){m=t.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};o[tt(y)]=y}if(!s[m]){const y=u==="interval"&&Lu(p)&&xs(t.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:r.items.length};v.signals={...l(v,"data"),...l(v,"visual")},r.items.push(s[m]=v),r.hasField[m]=s[m],r.hasSelectionId=r.hasSelectionId||m===sa,nre(p)?(v.geoChannel=p,v.channel=tre(p),r.hasChannel[v.channel]=s[m]):r.hasChannel[p]=s[m]}}else ee(qW(p))}for(const p of h??[]){if(r.hasField[p])continue;const g={type:"E",field:p,index:r.items.length};g.signals={...l(g,"data")},r.items.push(g),r.hasField[p]=g,r.hasSelectionId=r.hasSelectionId||p===sa}d&&(e.init=d.map(p=>r.items.map(g=>he(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),Dt(o)||(r.timeUnit=new Xa(null,o))},signals:(t,e,n)=>{const i=e.name+iw;return n.filter(s=>s.name===i).length>0||e.project.hasSelectionId?n:n.concat({name:i,value:e.project.items.map(eoe)})}},au={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{const n=e.scales=[];for(const i of e.project.items){const r=i.channel;if(!Lu(r))continue;const s=t.getScaleComponent(r),o=s?s.get("type"):void 0;if(!s||!xs(o)){ee(h7e);continue}s.set("selectionExtent",{param:e.name,field:i.field},!0),n.push(i)}},topLevelSignals:(t,e,n)=>{const i=e.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!t.parent||bV(t)||i.length===0)return n;const r=n.filter(o=>o.name===e.name)[0];let s=r.update;if(s.indexOf(yoe)>=0)r.update=`{${i.map(o=>`${ae(lo(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const a=`${ae(lo(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}r.update=s}return n.concat(i.map(o=>({name:o.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!bV(t))for(const i of e.scales){const r=n.filter(s=>s.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function DM(t,e){return`domain(${ae(t.scaleName(e))})`}function bV(t){return t.parent&&oy(t.parent)&&!t.parent.parent}const Zp="_brush",noe="_scale_trigger",Gy="geo_interval_init_tick",ioe="_init",_ze="_center",Rze={defined:t=>t.type==="interval",parse:(t,e,n)=>{var i;if(t.hasProjection){const r={...he(n.select)?n.select:{}};r.fields=[sa],r.encodings||(r.encodings=n.value?J(n.value):[pa,fa]),n.select={type:"interval",...r}}if(e.translate&&!au.defined(e)){const r=`!event.item || event.item.mark.name !== ${ae(e.name+Zp)}`;for(const s of e.events){if(!s.between){ee(`${s} is not an ordered event stream for interval selections.`);continue}const o=de((i=s.between[0]).filter??(i.filter=[]));o.indexOf(r)<0&&o.push(r)}}},signals:(t,e,n)=>{const i=e.name,r=i+td,s=ii(e.project.hasChannel).filter(a=>a.channel===Qt||a.channel===Un),o=e.init?e.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(Tze(t,e,l,o&&o[l.index])),[])),t.hasProjection){const a=ae(t.projectionName()),l=t.projectionName()+_ze,{x:u,y:c}=e.project.hasChannel,d=u&&u.signals.visual,h=c&&c.signals.visual,f=u?o&&o[u.index]:`${l}[0]`,p=c?o&&o[c.index]:`${l}[1]`,g=E=>t.getSizeSignalRef(E).signal,m=`[[${d?d+"[0]":"0"}, ${h?h+"[0]":"0"}],[${d?d+"[1]":g("width")}, ${h?h+"[1]":g("height")}]]`;o&&(n.unshift({name:i+ioe,init:`[scale(${a}, [${u?f[0]:f}, ${c?p[0]:p}]), scale(${a}, [${u?f[1]:f}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(b=>b.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${ae(t.getName("marks"))}}, unit.mark)`,v=`{unit: ${Oh(t)}}`,C=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:r,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:Gy}]:[]],update:C}]})}else{if(!au.defined(e)){const u=i+noe,c=s.map(d=>{const h=d.channel,{data:f,visual:p}=d.signals,g=ae(t.scaleName(h)),m=t.getScaleComponent(h).get("type"),y=xs(m)?"+":"";return`(!isArray(${f}) || (${y}invert(${g}, ${p})[0] === ${y}${f}[0] && ${y}invert(${g}, ${p})[1] === ${y}${f}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:s.map(d=>({scale:t.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${Oh(t)}, fields: ${i+iw}, values`;return n.concat({name:r,...o?{init:`{${l}: ${cf(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(t,e,n)=>(on(t)&&t.hasProjection&&e.init&&(n.filter(r=>r.name===Gy).length||n.unshift({name:Gy,value:null,on:[{events:"timer{1}",update:`${Gy} === null ? {} : ${Gy}`}]})),n),marks:(t,e,n)=>{const i=e.name,{x:r,y:s}=e.project.hasChannel,o=r==null?void 0:r.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${ae(e.name+df)})`;if(au.defined(e)||!r&&!s)return n;const u={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(const g of J(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${Oh(t)}`,...u[g]},{value:0}];const{fill:c,fillOpacity:d,cursor:h,...f}=e.mark,p=J(f).reduce((g,m)=>(g[m]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:f[m]},{value:null}],g),{});return[{name:`${i+Zp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:i+Zp,type:"rect",clip:!0,encode:{enter:{...h?{cursor:{value:h}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function Tze(t,e,n,i){const r=!t.hasProjection,s=n.channel,o=n.signals.visual,a=ae(r?t.scaleName(s):t.projectionName()),l=h=>`scale(${a}, ${h})`,u=t.getSizeSignalRef(s===Qt?"width":"height").signal,c=`${s}(unit)`,d=e.events.reduce((h,f)=>[...h,{events:f.between[0],update:`[${c}, ${c}]`},{events:f,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(r){const h=n.signals.data,f=au.defined(e),p=t.getScaleComponent(s),g=p?p.get("type"):void 0,m=i?{init:cf(i,!0,l)}:{value:[]};return d.push({events:{signal:e.name+noe},update:xs(g)?`[${l(`${h}[0]`)}, ${l(`${h}[1]`)}]`:"[0, 0]"}),f?[{name:h,on:[]}]:[{name:o,...m,on:d},{name:h,...i?{init:cf(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const h=s===Qt?0:1,f=e.name+ioe,p=i?{init:`[${f}[0][${h}], ${f}[1][${h}]]`}:{value:[]};return[{name:o,...p,on:d}]}}const Aze={defined:t=>t.type==="point",signals:(t,e,n)=>{const i=e.name,r=i+iw,s=e.project,o="(item().isVoronoi ? datum.datum : datum)",a=ii(t.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+Zp):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Oh(t)}, `;if(e.project.hasSelectionId)u+=`${sa}: ${o}[${ae(sa)}]`;else{const d=s.items.map(h=>{const f=t.fieldDef(h.channel);return f!=null&&f.bin?`[${o}[${ae(t.vgField(h.channel,{}))}], ${o}[${ae(t.vgField(h.channel,{binSuffix:"end"}))}]]`:`${o}[${ae(h.field)}]`}).join(", ");u+=`fields: ${r}, values: [${d}]`}const c=e.events;return n.concat([{name:i+td,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function ny(t,e,n,i){const r=QT(e)&&e.condition,s=i(e);if(r){const a=de(r).map(l=>{const u=i(l);if(vVe(l)){const{param:c,empty:d}=l;return{test:Soe(t,{param:c,empty:d}),...u}}else return{test:qx(t,l.test),...u}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function L5(t,e="text"){const n=t.encoding[e];return ny(t,n,e,i=>oA(i,t.config))}function oA(t,e,n="datum"){if(t){if(ra(t))return zt(t.value);if(We(t)){const{format:i,formatType:r}=Wx(t);return p5({fieldOrDatumDef:t,format:i,formatType:r,expr:n,config:e})}}}function roe(t,e={}){const{encoding:n,markDef:i,config:r,stack:s}=t,o=n.tooltip;if(j(o))return{tooltip:xV({tooltip:o},s,r,e)};{const a=e.reactiveGeom?"datum.datum":"datum";return ny(t,o,"tooltip",l=>{const u=oA(l,r,a);if(u)return u;if(l===null)return;let c=Et("tooltip",i,r);if(c===!0&&(c={content:"encoding"}),ce(c))return{value:c};if(he(c))return we(c)?c:c.content==="encoding"?xV(n,s,r,e):{signal:a}})}}function soe(t,e,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},s={},o=i?"datum.datum":"datum",a=[];function l(c,d){const h=Bf(d),f=or(c)?c:{...c,type:t[h].type},p=f.title||v5(f,r),g=de(p).join(", ").replaceAll(/"/g,'\\"');let m;if(jn(d)){const y=d==="x"?"x2":"y2",v=ll(t[y]);if(Xn(f.bin)&&v){const C=ue(f,{expr:o}),w=ue(v,{expr:o}),{format:E,formatType:b}=Wx(f);m=JC(C,w,E,b,r),s[y]=!0}}if((jn(d)||d===go||d===ha)&&e&&e.fieldChannel===d&&e.offset==="normalize"){const{format:y,formatType:v}=Wx(f);m=p5({fieldOrDatumDef:f,format:y,formatType:v,expr:o,config:r,normalizeStack:!0}).signal}m??(m=oA(f,r,o).signal),a.push({channel:d,key:g,value:m})}S5(t,(c,d)=>{ie(c)?l(c,d):JT(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:h}of a)!s[c]&&!u[d]&&(u[d]=h);return u}function xV(t,e,n,{reactiveGeom:i}={}){const r=soe(t,e,n,{reactiveGeom:i}),s=Qc(r).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Dze(t){const{markDef:e,config:n}=t,i=Et("aria",e,n);return i===!1?{}:{...i?{aria:i}:{},...Oze(t),...Pze(t)}}function Oze(t){const{mark:e,markDef:n,config:i}=t;if(i.aria===!1)return{};const r=Et("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:e in s7e?{}:{ariaRoleDescription:{value:e}}}function Pze(t){const{encoding:e,markDef:n,config:i,stack:r}=t,s=e.description;if(s)return ny(t,s,"description",l=>oA(l,t.config));const o=Et("description",n,i);if(o!=null)return{description:zt(o)};if(i.aria===!1)return{};const a=soe(e,r,i);if(!Dt(a))return{description:{signal:Qc(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function In(t,e,n={}){const{markDef:i,encoding:r,config:s}=e,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;a===void 0&&(l??(l=Et(t,i,s,{vgChannel:o,ignoreVgConfig:!0})),l!==void 0&&(a=zt(l)));const u=r[t];return ny(e,u,o??t,c=>f5({channel:t,channelDef:c,markDef:i,config:s,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:a}))}function ooe(t,e={filled:void 0}){const{markDef:n,encoding:i,config:r}=t,{type:s}=n,o=e.filled??Et("filled",n,r),a=nt(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Et(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??a,u=Et(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...l?{fill:zt(l)}:{},...u?{stroke:zt(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&ee(xre("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...In("color",t,{vgChannel:c,defaultValue:o?l:u}),...In("fill",t,{defaultValue:i.fill?l:void 0}),...In("stroke",t,{defaultValue:i.stroke?u:void 0})}}function Fze(t){const{encoding:e,mark:n}=t,i=e.order;return!Pd(n)&&ra(i)?ny(t,i,"zindex",r=>zt(r.value)):{}}function im({channel:t,markDef:e,encoding:n={},model:i,bandPosition:r}){const s=`${t}Offset`,o=e[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:f5({channel:s,channelDef:a,markDef:e,config:i==null?void 0:i.config,scaleName:i.scaleName(s),scale:i.getScaleComponent(s),stack:null,defaultRef:zt(o),bandPosition:r})};const l=e[s];return l?{offsetType:"visual",offset:l}:{}}function _i(t,e,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:s,config:o,stack:a}=e,l=r[t],u=r[_l(t)],c=e.scaleName(t),d=e.getScaleComponent(t),{offset:h,offsetType:f}=im({channel:t,markDef:s,encoding:r,model:e,bandPosition:.5}),p=I5({model:e,defaultPos:n,channel:t,scaleName:c,scale:d}),g=!l&&jn(t)&&(r.latitude||r.longitude)?{field:e.getName(t)}:Mze({channel:t,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:h,defaultRef:p,bandPosition:f==="encoding"?0:void 0});return g?{[i||t]:g}:void 0}function Mze(t){const{channel:e,channelDef:n,scaleName:i,stack:r,offset:s,markDef:o}=t;if(We(n)&&r&&e===r.fieldChannel){if(ie(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(e==="radius"||e==="theta")&&(a=.5),a!==void 0)return Gx({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Ah(n,i,{suffix:"end"},{offset:s})}return d5(t)}function I5({model:t,defaultPos:e,channel:n,scaleName:i,scale:r}){const{markDef:s,config:o}=t;return()=>{const a=Bf(n),l=Jc(n),u=Et(n,s,o,{vgChannel:l});if(u!==void 0)return Y0(n,u);switch(e){case"zeroOrMin":case"zeroOrMax":if(i){const c=r.get("type");if(!nt([Lr.LOG,Lr.TIME,Lr.UTC],c)){if(r.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(e==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...t[zr(n)],mult:.5}}}}const Nze={left:"x",center:"xc",right:"x2"},Lze={top:"y",middle:"yc",bottom:"y2"};function aoe(t,e,n,i="middle"){if(t==="radius"||t==="theta")return Jc(t);const r=t==="x"?"align":"baseline",s=Et(r,e,n);let o;return we(s)?(ee(G7e(r)),o=void 0):o=s,t==="x"?Nze[o||(i==="top"?"left":"center")]:Lze[o||i]}function jx(t,e,{defaultPos:n,defaultPos2:i,range:r}){return r?loe(t,e,{defaultPos:n,defaultPos2:i}):_i(t,e,{defaultPos:n})}function loe(t,e,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:s}=e,o=_l(t),a=zr(t),l=Ize(e,i,o),u=l[a]?aoe(t,r,s):Jc(t);return{..._i(t,e,{defaultPos:n,vgChannel:u}),...l}}function Ize(t,e,n){const{encoding:i,mark:r,markDef:s,stack:o,config:a}=t,l=Bf(n),u=zr(n),c=Jc(n),d=i[l],h=t.scaleName(l),f=t.getScaleComponent(l),{offset:p}=n in i||n in s?im({channel:n,markDef:s,encoding:i,model:t}):im({channel:l,markDef:s,encoding:i,model:t});if(!d&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const m=zr(n),y=t.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:t.getName(n)}}}const g=kze({channel:n,channelDef:d,channel2Def:i[n],markDef:s,config:a,scaleName:h,scale:f,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:aS(n,s)||aS(n,{[n]:Lx(n,s,a.style),[u]:Lx(u,s,a.style)})||aS(n,a[r])||aS(n,a.mark)||{[c]:I5({model:t,defaultPos:e,channel:n,scaleName:h,scale:f})()}}function kze({channel:t,channelDef:e,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return We(e)&&a&&t.charAt(0)===a.fieldChannel.charAt(0)?Ah(e,s,{suffix:"start"},{offset:l}):d5({channel:t,channelDef:n,scaleName:s,scale:o,stack:a,markDef:i,config:r,offset:l,defaultRef:u})}function aS(t,e){const n=zr(t),i=Jc(t);if(e[i]!==void 0)return{[i]:Y0(t,e[i])};if(e[t]!==void 0)return{[i]:Y0(t,e[t])};if(e[n]){const r=e[n];if(lf(r))ee(P7e(n));else return{[n]:Y0(t,r)}}}function ed(t,e){const{config:n,encoding:i,markDef:r}=t,s=r.type,o=_l(e),a=zr(e),l=i[e],u=i[o],c=t.getScaleComponent(e),d=c?c.get("type"):void 0,h=r.orient,f=i[a]??i.size??Et("size",r,n,{vgChannel:a}),p=ore(e),g=s==="bar"&&(e==="x"?h==="vertical":h==="horizontal");return ie(l)&&(Gt(l.bin)||Xn(l.bin)||l.timeUnit&&!u)&&!(f&&!lf(f))&&!i[p]&&!Yn(d)?Hze({fieldDef:l,fieldDef2:u,channel:e,model:t}):(We(l)&&Yn(d)||g)&&!u?$ze(l,e,t):loe(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Gze(t,e,n,i,r,s,o){if(lf(r))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${e}')`;r.band!==1&&(u=`${r.band} * ${u}`);const c=Su("minBandSize",{type:o},i);return{signal:c?`max(${$o(c)}, ${u})`:u}}else r.band!==1&&(ee(V7e(l)),r=void 0)}else return{mult:r.band,field:{group:t}};else{if(we(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(Od(l)&&ft(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c}=i.scale,d=gn(l,o==="bar"?u:c);if(we(d))return{signal:`(1 - (${d.signal})) * ${t}`};if(ft(d))return{signal:`${1-d} * ${t}`}}return{value:zx(i.view,t)-2}}function $ze(t,e,n){const{markDef:i,encoding:r,config:s,stack:o}=n,a=i.orient,l=n.scaleName(e),u=n.getScaleComponent(e),c=zr(e),d=_l(e),h=ore(e),f=n.scaleName(h),p=n.getScaleComponent(W9(e)),g=a==="horizontal"&&e==="y"||a==="vertical"&&e==="x";let m;(r.size||i.size)&&(g?m=In("size",n,{vgChannel:c,defaultRef:zt(i.size)}):ee(j7e(i.type)));const y=!!m,v=ose({channel:e,fieldDef:t,markDef:i,config:s,scaleType:u==null?void 0:u.get("type"),useVlSizeChannel:g});m=m||{[c]:Gze(c,f||l,p||u,s,v,!!t,i.type)};const C=(u==null?void 0:u.get("type"))==="band"&&lf(v)&&!y?"top":"middle",w=aoe(e,i,s,C),E=w==="xc"||w==="yc",{offset:b,offsetType:S}=im({channel:e,markDef:i,encoding:r,model:n,bandPosition:E?.5:0}),_=d5({channel:e,channelDef:t,markDef:i,config:s,scaleName:l,scale:u,stack:o,offset:b,defaultRef:I5({model:n,defaultPos:"mid",channel:e,scaleName:l,scale:u}),bandPosition:E?S==="encoding"?0:.5:we(v)?{signal:`(1-${v})/2`}:lf(v)?(1-v.band)/2:0});if(c)return{[w]:_,...m};{const A=Jc(d),D=m[c],P=b?{...D,offset:b}:D;return{[w]:_,[A]:j(_)?[_[0],{..._[1],offset:P}]:{..._,offset:P}}}}function _V(t,e,n,i,r,s,o){if(ere(t))return 0;const a=t==="x"||t==="y2",l=a?-e/2:e/2;if(we(n)||we(r)||we(i)||s){const u=$o(n),c=$o(r),d=$o(i),h=$o(s),p=s?`(${o} < ${h} ? ${a?"":"-"}0.5 * (${h} - (${o})) : ${l})`:l,g=d?`${d} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return r=r||0,i+(n?-r-l:+r+l)}function Hze({fieldDef:t,fieldDef2:e,channel:n,model:i}){var A;const{config:r,markDef:s,encoding:o}=i,a=i.getScaleComponent(n),l=i.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=ose({channel:n,fieldDef:t,markDef:s,config:r,scaleType:u}),h=(A=i.component.axes[n])==null?void 0:A[0],f=(h==null?void 0:h.get("translate"))??.5,p=jn(n)?Et("binSpacing",s,r)??0:0,g=_l(n),m=Jc(n),y=Jc(g),v=Su("minBandSize",s,r),{offset:C}=im({channel:n,markDef:s,encoding:o,model:i,bandPosition:0}),{offset:w}=im({channel:g,markDef:s,encoding:o,model:i,bandPosition:0}),E=fVe({fieldDef:t,scaleName:l}),b=_V(n,p,c,f,C,v,E),S=_V(g,p,c,f,w??C,v,E),_=we(d)?{signal:`(1-${d.signal})/2`}:lf(d)?(1-d.band)/2:.5;if(Gt(t.bin)||t.timeUnit)return{[y]:RV({fieldDef:t,scaleName:l,bandPosition:_,offset:S}),[m]:RV({fieldDef:t,scaleName:l,bandPosition:we(_)?{signal:`1-${_.signal}`}:1-_,offset:b})};if(Xn(t.bin)){const D=Ah(t,l,{},{offset:S});if(ie(e))return{[y]:D,[m]:Ah(e,l,{},{offset:b})};if(zf(t.bin)&&t.bin.step)return{[y]:D,[m]:{signal:`scale("${l}", ${ue(t,{expr:"datum"})} + ${t.bin.step})`,offset:b}}}ee(Tre(g))}function RV({fieldDef:t,scaleName:e,bandPosition:n,offset:i}){return Gx({scaleName:e,fieldOrDatumDef:t,bandPosition:n,offset:i})}const Wze=new Set(["aria","width","height"]);function mo(t,e){const{fill:n=void 0,stroke:i=void 0}=e.color==="include"?ooe(t):{};return{...Vze(t.markDef,e),...TV(t,"fill",n),...TV(t,"stroke",i),...In("opacity",t),...In("fillOpacity",t),...In("strokeOpacity",t),...In("strokeWidth",t),...In("strokeDash",t),...Fze(t),...roe(t),...L5(t,"href"),...Dze(t)}}function TV(t,e,n){const{config:i,mark:r,markDef:s}=t;if(Et("invalid",s,i)==="hide"&&n&&!Pd(r)){const a=Bze(t,{invalid:!0,channels:WT});if(a)return{[e]:[{test:a,value:null},...de(n)]}}return n?{[e]:n}:{}}function Vze(t,e){return r7e.reduce((n,i)=>(!Wze.has(i)&&t[i]!==void 0&&e[i]!=="ignore"&&(n[i]=zt(t[i])),n),{})}function Bze(t,{invalid:e=!1,channels:n}){const i=n.reduce((s,o)=>{const a=t.getScaleComponent(o);if(a){const l=a.get("type"),u=t.vgField(o,{expr:"datum"});u&&xs(l)&&(s[u]=!0)}return s},{}),r=J(i);if(r.length>0){const s=e?"||":"&&";return r.map(o=>h5(o,e)).join(` ${s} `)}}function k5(t){const{config:e,markDef:n}=t;if(Et("invalid",n,e)){const r=zze(t,{channels:Rl});if(r)return{defined:{signal:r}}}return{}}function zze(t,{invalid:e=!1,channels:n}){const i=n.reduce((s,o)=>{var l;const a=t.getScaleComponent(o);if(a){const u=a.get("type"),c=t.vgField(o,{expr:"datum",binSuffix:(l=t.stack)!=null&&l.impute?"mid":void 0});c&&xs(u)&&(s[c]=!0)}return s},{}),r=J(i);if(r.length>0){const s=e?"||":"&&";return r.map(o=>h5(o,e)).join(` ${s} `)}}function AV(t,e){if(e!==void 0)return{[t]:zt(e)}}const FO="voronoi",uoe={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(FO)},marks:(t,e,n)=>{const{x:i,y:r}=e.project.hasChannel,s=t.mark;if(Pd(s))return ee(c7e(s)),n;const o={name:t.getName(FO),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...roe(t,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===t.component.mark[0].name?a=c:d.indexOf(FO)>=0&&(l=!0)}),l||n.splice(a+1,0,o),n}},coe={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!T5(t.bind),parse:(t,e,n)=>voe(e,n),topLevelSignals:(t,e,n)=>{const i=e.name,r=e.project,s=e.bind,o=e.init&&e.init[0],a=uoe.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{const c=Kt(`${i}_${l.field}`);n.filter(h=>h.name===c).length||n.unshift({name:c,...o?{init:cf(o[u])}:{value:null},on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ae(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(t,e,n)=>{const i=e.name,r=e.project,s=n.filter(u=>u.name===i+td)[0],o=i+iw,a=r.items.map(u=>Kt(`${i}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},Yx="_toggle",doe={defined:t=>t.type==="point"&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+Yx,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+td,i=e.name+Yx;return`${i} ? null : ${n}, `+(e.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Oh(t)}}, `)+`${i} ? ${n} : null`}},Uze={defined:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,e)=>{e.clear&&(e.clear=ce(e.clear)?bd(e.clear,"view"):e.clear)},topLevelSignals:(t,e,n)=>{if(coe.defined(e))for(const i of e.project.items){const r=n.findIndex(s=>s.name===Kt(`${e.name}_${i.field}`));r!==-1&&n[r].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function i(r,s){r!==-1&&n[r].on&&n[r].on.push({events:e.clear,update:s})}if(e.type==="interval")for(const r of e.project.items){const s=n.findIndex(o=>o.name===r.signals.visual);if(i(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===r.signals.data);i(o,"null")}}else{let r=n.findIndex(s=>s.name===e.name+td);i(r,"null"),doe.defined(e)&&(r=n.findIndex(s=>s.name===e.name+Yx),i(r,"false"))}return n}},hoe={defined:t=>{const e=t.resolve==="global"&&t.bind&&T5(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==sa;return e&&!n&&ee(f7e),e&&n},parse:(t,e,n)=>{const i=$e(n);if(i.select=ce(i.select)?{type:i.select,toggle:e.toggle}:{...i.select,toggle:e.toggle},voe(e,i),he(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of e.events)a.filter=de(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const r=AO(e.bind)?e.bind.legend:"click",s=ce(r)?bd(r,"view"):de(r);e.bind={legend:{merge:s}}},topLevelSignals:(t,e,n)=>{const i=e.name,r=AO(e.bind)&&e.bind.legend,s=o=>a=>{const l=$e(a);return l.markname=o,l};for(const o of e.project.items){if(!o.hasLegend)continue;const a=`${Kt(o.field)}_legend`,l=`${i}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=r.merge.map(s(`${a}_symbols`)).concat(r.merge.map(s(`${a}_labels`))).concat(r.merge.map(s(`${a}_entries`)));n.unshift({name:l,...e.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(t,e,n)=>{const i=e.name,r=e.project,s=n.find(h=>h.name===i+td),o=i+iw,a=r.items.filter(h=>h.hasLegend).map(h=>Kt(`${i}_${Kt(h.field)}_legend`)),u=`${a.map(h=>`${h} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;e.events&&a.length>0?s.on.push({events:a.map(h=>({signal:h})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(h=>h.name===i+Yx),d=AO(e.bind)&&e.bind.legend;return c&&(e.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function jze(t,e,n){var r;const i=(r=t.fieldDef(e))==null?void 0:r.field;for(const s of ii(t.component.selection??{})){const o=s.project.hasField[i]??s.project.hasChannel[e];if(o&&hoe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const foe="_translate_anchor",poe="_translate_delta",Yze={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,n)=>{const i=e.name,r=au.defined(e),s=i+foe,{x:o,y:a}=e.project.hasChannel;let l=bd(e.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+Zp,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${r?DM(t,Qt):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${r?DM(t,Un):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+poe,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&DV(t,e,o,"width",n),a!==void 0&&DV(t,e,a,"height",n),n}};function DV(t,e,n,i,r){const s=e.name,o=s+foe,a=s+poe,l=n.channel,u=au.defined(e),c=r.filter(E=>E.name===n.signals[u?"data":"visual"])[0],d=t.getSizeSignalRef(i).signal,h=t.getScaleComponent(l),f=h&&h.get("type"),p=h&&h.get("reverse"),g=u?l===Qt?p?"":"-":p?"-":"":"",m=`${o}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${d}`:`span(${m})`}`,v=!u||!h?"panLinear":f==="log"?"panLog":f==="symlog"?"panSymlog":f==="pow"?"panPow":"panLinear",C=u?f==="pow"?`, ${h.get("exponent")??1}`:f==="symlog"?`, ${h.get("constant")??1}`:"":"",w=`${v}(${m}, ${y}${C})`;c.on.push({events:{signal:a},update:u?w:`clampRange(${w}, 0, ${d})`})}const goe="_zoom_anchor",moe="_zoom_delta",qze={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,n)=>{const i=e.name,r=au.defined(e),s=i+moe,{x:o,y:a}=e.project.hasChannel,l=ae(t.scaleName(Qt)),u=ae(t.scaleName(Un));let c=bd(e.zoom,"scope");return r||(c=c.map(d=>(d.markname=i+Zp,d))),n.push({name:i+goe,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&OV(t,e,o,"width",n),a!==void 0&&OV(t,e,a,"height",n),n}};function OV(t,e,n,i,r){const s=e.name,o=n.channel,a=au.defined(e),l=r.filter(v=>v.name===n.signals[a?"data":"visual"])[0],u=t.getSizeSignalRef(i).signal,c=t.getScaleComponent(o),d=c&&c.get("type"),h=a?DM(t,o):l.name,f=s+moe,p=`${s}${goe}.${o}`,g=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",m=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${h}, ${p}, ${f}${m})`;l.on.push({events:{signal:f},update:a?y:`clampRange(${y}, 0, ${u})`})}const df="_store",td="_tuple",Kze="_modify",yoe="vlSelectionResolve",aA=[Aze,Rze,xze,doe,coe,au,hoe,Uze,Yze,qze,uoe];function Xze(t){let e=t.parent;for(;e&&!Xo(e);)e=e.parent;return e}function Oh(t,{escape:e}={escape:!0}){let n=e?ae(t.name):t.name;const i=Xze(t);if(i){const{facet:r}=i;for(const s of js)r[s]&&(n+=` + '__facet_${s}_' + (facet[${ae(i.vgField(s))}])`)}return n}function G5(t){return ii(t.component.selection??{}).reduce((e,n)=>e||n.project.hasSelectionId,!1)}function voe(t,e){(ce(e.select)||!e.select.on)&&delete t.events,(ce(e.select)||!e.select.clear)&&delete t.clear,(ce(e.select)||!e.select.toggle)&&delete t.toggle}function OM(t){const e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...OM(t.object)),e.push(...OM(t.property))),e)}function Coe(t){return t.object.type==="MemberExpression"?Coe(t.object):t.object.name==="datum"}function woe(t){const e=n9(t),n=new Set;return e.visit(i=>{i.type==="MemberExpression"&&Coe(i)&&n.add(OM(i).slice(1).join("."))}),n}class iy extends Tt{clone(){return new iy(null,this.model,$e(this.filter))}constructor(e,n,i){super(e),this.model=n,this.filter=i,this.expr=qx(this.model,this.filter,this),this._dependentFields=woe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Qze(t,e){const n={},i=t.config.selection;if(!e||!e.length)return n;for(const r of e){const s=Kt(r.name),o=r.select,a=ce(o)?o:o.type,l=he(o)?$e(o):{type:a},u=i[a];for(const h in u)h==="fields"||h==="encodings"||(h==="mark"&&(l[h]={...u[h],...l[h]}),(l[h]===void 0||l[h]===!0)&&(l[h]=$e(u[h]??l[h])));const c=n[s]={...l,name:s,type:a,init:r.value,bind:r.bind,events:ce(l.on)?bd(l.on,"scope"):de($e(l.on))},d=$e(r);for(const h of aA)h.defined(c)&&h.parse&&h.parse(t,c,d)}return n}function Soe(t,e,n,i="datum"){const r=ce(e)?e:e.param,s=Kt(r),o=ae(s+df);let a;try{a=t.getSelectionComponent(s,r)}catch{return`!!${s}`}if(a.project.timeUnit){const h=n??t.component.data.raw,f=a.project.timeUnit.clone();h.parent?f.insertAsParentOf(h):h.parent=f}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ae(a.resolve)})`,c=`${l}${o}, ${i}${u}`,d=`length(data(${o}))`;return e.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function Eoe(t,e,n){const i=Kt(e),r=n.encoding;let s=n.field,o;try{o=t.getSelectionComponent(i,e)}catch{return i}if(!r&&!s)s=o.project.items[0].field,o.project.items.length>1&&ee(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ae(s)}.`);else if(r&&!s){const a=o.project.items.filter(l=>l.channel===r);!a.length||a.length>1?(s=o.project.items[0].field,ee((a.length?"Multiple ":"No ")+`matching ${ae(r)} encoding found for selection ${ae(n.param)}. Using "field": ${ae(s)}.`)):s=a[0].field}return`${o.name}[${ae(lo(s))}]`}function Jze(t,e){for(const[n,i]of Qc(t.component.selection??{})){const r=t.getName(`lookup_${n}`);t.component.data.outputNodes[r]=i.materialized=new ir(new iy(e,t,{param:n}),r,Lt.Lookup,t.component.data.outputNodeRefCounts)}}function qx(t,e,n){return j0(e,i=>ce(i)?i:DWe(i)?Soe(t,i,n):$re(i))}function Zze(t,e){if(t)return j(t)&&!Ju(t)?t.map(n=>v5(n,e)).join(", "):t}function MO(t,e,n,i){var r,s;t.encode??(t.encode={}),(r=t.encode)[e]??(r[e]={}),(s=t.encode[e]).update??(s.update={}),t.encode[e].update[n]=i}function w0(t,e,n,i={header:!1}){var d,h;const{disable:r,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=t.combine();if(!r){for(const f in c){const p=FVe[f],g=c[f];if(p&&p!==e&&p!=="both")delete c[f];else if(nw(g)){const{condition:m,...y}=g,v=de(m),C=oV[f];if(C){const{vgProp:w,part:E}=C,b=[...v.map(S=>{const{test:_,...A}=S;return{test:qx(null,_),...A}}),y];MO(c,E,w,b),delete c[f]}else if(C===null){const w={signal:v.map(E=>{const{test:b,...S}=E;return`${qx(null,b)} ? ${zW(S)} : `}).join("")+zW(y)};c[f]=w}}else if(we(g)){const m=oV[f];if(m){const{vgProp:y,part:v}=m;MO(c,v,y,g),delete c[f]}}nt(["labelAlign","labelBaseline"],f)&&c[f]===null&&delete c[f]}if(e==="grid"){if(!c.grid)return;if(c.encode){const{grid:f}=c.encode;c.encode={...f?{grid:f}:{}},Dt(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:gn(u,0)}}else{if(!i.header&&t.mainExtracted)return;if(a!==void 0){let p=a;(h=(d=c.encode)==null?void 0:d.labels)!=null&&h.update&&we(c.encode.labels.update.text)&&(p=rf(a,"datum.label",c.encode.labels.update.text.signal)),MO(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of mse)t.hasAxisPart(p)||delete c.encode[p];Dt(c.encode)&&delete c.encode}const f=Zze(l,n);return{scale:o,orient:s,grid:!1,...f?{title:f}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:gn(u,0)}}}}function boe(t){const{axes:e}=t.component,n=[];for(const i of Rl)if(e[i]){for(const r of e[i])if(!r.get("disable")&&!r.get("gridScale")){const s=i==="x"?"height":"width",o=t.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function eUe(t,e){const{x:n=[],y:i=[]}=t;return[...n.map(r=>w0(r,"grid",e)),...i.map(r=>w0(r,"grid",e)),...n.map(r=>w0(r,"main",e)),...i.map(r=>w0(r,"main",e))].filter(r=>r)}function PV(t,e,n,i){return Object.assign.apply(null,[{},...t.map(r=>{if(r==="axisOrient"){const s=n==="x"?"bottom":"left",o=e[n==="x"?"axisBottom":"axisLeft"]||{},a=e[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...J(o),...J(a)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${s}" ? ${$o(o[c])} : ${$o(a[c])}`};return u}return e[r]})])}function tUe(t,e,n,i){const r=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:Bre(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",o=we(n)?"axisOrient":`axis${YC(n)}`,a=[...r,...r.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:PV(a,i,t,n),vgAxisConfig:PV(l,i,t,n),axisConfigStyle:nUe([...l,...a],i)}}function nUe(t,e){var i;const n=[{}];for(const r of t){let s=(i=e[r])==null?void 0:i.style;if(s){s=de(s);for(const o of s)n.push(e.style[o])}}return Object.assign.apply(null,n)}function PM(t,e,n,i={}){var s;const r=yre(t,n,e);if(r!==void 0)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=i[o])==null?void 0:s[t])!==void 0)return{configFrom:o,configValue:i[o][t]};return{}}const FV={scale:({model:t,channel:e})=>t.scaleName(e),format:({format:t})=>t,formatType:({formatType:t})=>t,grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>e.grid??iUe(n,t),gridScale:({model:t,channel:e})=>rUe(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelAlign||_oe(e,n,i),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelBaseline||xoe(e,n,i),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>t.labelFlush??oUe(e.type,n),labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>t.labelOverlap??aUe(e.type,n,ie(e)&&!!e.timeUnit,ie(e)?e.sort:void 0),orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const s=t==="x"?"width":t==="y"?"height":void 0,o=s?e.getSizeSignalRef(s):void 0;return n.tickCount??uUe({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},tickMinStep:cUe,title:({axis:t,model:e,channel:n})=>{if(t.title!==void 0)return t.title;const i=Roe(e,n);if(i!==void 0)return i;const r=e.typedFieldDef(n),s=n==="x"?"x2":"y2",o=e.fieldDef(s);return Cre(r?[rV(r)]:[],ie(o)?[rV(o)]:[])},values:({axis:t,fieldOrDatumDef:e})=>dUe(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>t.zindex??hUe(n,e)};function iUe(t,e){return!Yn(t)&&ie(e)&&!Gt(e==null?void 0:e.bin)&&!Xn(e==null?void 0:e.bin)}function rUe(t,e){const n=e==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function sUe(t,e,n,i,r){const s=e==null?void 0:e.labelAngle;if(s!==void 0)return we(s)?s:p1(s);{const{configValue:o}=PM("labelAngle",i,e==null?void 0:e.style,r);return o!==void 0?p1(o):n===Qt&&nt([o5,s5],t.type)&&!(ie(t)&&t.timeUnit)?270:void 0}}function FM(t){return`(((${t.signal} % 360) + 360) % 360)`}function xoe(t,e,n,i){if(t!==void 0)if(n==="x"){if(we(t)){const r=FM(t),s=we(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(we(e)){const r=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${r} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(we(t)){const r=FM(t),s=we(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return i?"middle":null;if(we(e)){const r=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function _oe(t,e,n){if(t===void 0)return;const i=n==="x",r=i?0:90,s=i?"bottom":"left";if(we(t)){const o=FM(t),a=we(e)?`(${e.signal} === "${s}")`:e===s;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${a} ? "left" : "right"`}}if((t+r)%180===0)return i?null:"center";if(we(e)){const o=r<t&&t<180+r?"===":"!==";return{signal:`${`${e.signal} ${o} "${s}"`} ? "left" : "right"`}}return(r<t&&t<180+r)==(e===s)?"left":"right"}function oUe(t,e){if(e==="x"&&nt(["quantitative","temporal"],t))return!0}function aUe(t,e,n,i){if(n&&!he(i)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function lUe(t){return t==="x"?"bottom":"left"}function uUe({fieldOrDatumDef:t,scaleType:e,size:n,values:i}){var r;if(!i&&!Yn(e)&&e!=="log"){if(ie(t)){if(Gt(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&nt(["month","hours","day","quarter"],(r=Bn(t.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function cUe({format:t,fieldOrDatumDef:e}){if(t==="d")return 1;if(ie(e)){const{timeUnit:n}=e;if(n){const i=Ire(n);if(i)return{signal:i}}}}function Roe(t,e){const n=e==="x"?"x2":"y2",i=t.fieldDef(e),r=t.fieldDef(n),s=i?i.title:void 0,o=r?r.title:void 0;if(s&&o)return wre(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function dUe(t,e){const n=t.values;if(j(n))return gse(e,n);if(we(n))return n}function hUe(t,e){return t==="rect"&&Hx(e)?1:0}class rm extends Tt{clone(){return new rm(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this._dependentFields=woe(this.transform.calculate)}static parseAllForSortIndex(e,n){return n.forEachFieldDef((i,r)=>{if(Yf(i)&&rse(i.sort)){const{field:s,timeUnit:o}=i,a=i.sort,l=a.map((u,c)=>`${$re({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;e=new rm(e,{calculate:l,as:sm(i,r,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${tt(this.transform)}`}}function sm(t,e,n){return ue(t,{prefix:e,suffix:"sort_index",...n??{}})}function lA(t,e){return nt(["top","bottom"],e)?"column":nt(["left","right"],e)||t==="row"?"row":"column"}function om(t,e,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return gn((e||{})[t],r[t],n.header[t])}function uA(t,e,n,i){const r={};for(const s of t){const o=om(s,e||{},n,i);o!==void 0&&(r[s]=o)}return r}const $5=["row","column"],H5=["header","footer"];function fUe(t,e){const n=t.component.layoutHeaders[e].title,i=t.config?t.config:void 0,r=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=uA(["titleAnchor","titleAngle","titleOrient"],r.header,i,e),l=lA(e,a),u=p1(o);return{name:`${e}-title`,type:"group",role:`${l}-title`,title:{text:n,...e==="row"?{orient:"left"}:{},style:"guide-title",...Aoe(u,l),...Toe(l,u,s),...Doe(i,r,e,eBe,Fse)}}}function Toe(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=_oe(e,t==="row"?"left":"top",t==="row"?"y":"x");return i?{align:i}:{}}function Aoe(t,e){const n=xoe(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return n?{baseline:n}:{}}function pUe(t,e){const n=t.component.layoutHeaders[e],i=[];for(const r of H5)if(n[r])for(const s of n[r]){const o=mUe(t,e,r,n,s);o!=null&&i.push(o)}return i}function gUe(t,e){const{sort:n}=t;return Ka(n)?{field:ue(n,{expr:"datum"}),order:n.order??"ascending"}:j(n)?{field:sm(t,e,{expr:"datum"}),order:"ascending"}:{field:ue(t,{expr:"datum"}),order:n??"ascending"}}function MM(t,e,n){const{format:i,formatType:r,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=uA(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),u=p5({fieldOrDatumDef:t,format:i,formatType:r,expr:"parent",config:n}).signal,c=lA(e,a);return{text:{signal:l?rf(rf(l,"datum.label",u),"datum.value",ue(t,{expr:"parent"})):u},...e==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Aoe(s,c),...Toe(c,s,o),...Doe(n,t,e,tBe,Mse)}}function mUe(t,e,n,i,r){if(r){let s=null;const{facetFieldDef:o}=i,a=t.config?t.config:void 0;if(o&&r.labels){const{labelOrient:d}=uA(["labelOrient"],o.header,a,e);(e==="row"&&!nt(["top","bottom"],d)||e==="column"&&!nt(["left","right"],d))&&(s=MM(o,e,a))}const l=Xo(t)&&!ZC(t.facet),u=r.axes,c=(u==null?void 0:u.length)>0;if(s||c){const d=e==="row"?"height":"width";return{name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`,...i.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:gUe(o,e)}:{},...c&&l?{from:{data:t.getName(`facet_domain_${e}`)}}:{},...s?{title:s}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const yUe={column:{start:0,end:1},row:{start:1,end:0}};function vUe(t,e){return yUe[e][t]}function CUe(t,e){const n={};for(const i of js){const r=t[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:s,titleOrient:o}=uA(["titleAnchor","titleOrient"],r.facetFieldDef.header,e,i),a=lA(i,o),l=vUe(s,a);l!==void 0&&(n[a]=l)}}return Dt(n)?void 0:n}function Doe(t,e,n,i,r){const s={};for(const o of i){if(!r[o])continue;const a=om(o,e==null?void 0:e.header,t,n);a!==void 0&&(s[r[o]]=a)}return s}function W5(t){return[...lS(t,"width"),...lS(t,"height"),...lS(t,"childWidth"),...lS(t,"childHeight")]}function lS(t,e){const n=e==="width"?"x":"y",i=t.component.layoutSize.get(e);if(!i||i==="merged")return[];const r=t.getSizeSignalRef(e).signal;if(i==="step"){const s=t.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Yn(o)&&Od(a)){const l=t.scaleName(n);return Xo(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[MV(l,a)]:[MV(l,a),{name:r,update:Ooe(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const s=r.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=_M(t.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function MV(t,e){const n=`${t}_step`;return we(e.step)?{name:n,update:e.step.signal}:{name:n,value:e.step}}function Ooe(t,e,n){const i=e.get("type"),r=e.get("padding"),s=gn(e.get("paddingOuter"),r);let o=e.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${$o(o)}, ${$o(s)}) * ${t}_step`}function Poe(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function Foe(t,e){return J(t).reduce((n,i)=>{const r=t[i];return{...n,...ny(e,r,i,s=>zt(s.value))}},{})}function Moe(t,e){if(Xo(e))return t==="theta"?"independent":"shared";if(oy(e))return"shared";if(q5(e))return jn(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function V5(t,e){const n=t.scale[e],i=jn(e)?"axis":"legend";return n==="independent"?(t[i][e]==="shared"&&ee(Q7e(e)),"independent"):t[i][e]||"shared"}const wUe={...rBe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Noe=J(wUe);class SUe extends ku{}const NV={symbols:EUe,gradient:bUe,labels:xUe,entries:_Ue};function EUe(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:r,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,c=o.filled&&u!=="trail";let d={...a7e({},n,eVe),...ooe(n,{filled:c})};const h=r.get("symbolOpacity")??l.legend.symbolOpacity,f=r.get("symbolFillColor")??l.legend.symbolFillColor,p=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=h===void 0?Loe(a.opacity)??o.opacity:void 0;if(d.fill){if(i==="fill"||c&&i===Vr)delete d.fill;else if(d.fill.field)f?delete d.fill:(d.fill=zt(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=zt(g??1));else if(j(d.fill)){const m=NM(a.fill??a.color)??o.fill??(c&&o.color);m&&(d.fill=zt(m))}}if(d.stroke){if(i==="stroke"||!c&&i===Vr)delete d.stroke;else if(d.stroke.field||p)delete d.stroke;else if(j(d.stroke)){const m=gn(NM(a.stroke||a.color),o.stroke,c?o.color:void 0);m&&(d.stroke={value:m})}}if(i!==Nu){const m=ie(e)&&koe(n,r,e);m?d.opacity=[{test:m,...zt(g??1)},zt(l.legend.unselectedOpacity)]:g&&(d.opacity=zt(g))}return d={...d,...t},Dt(d)?void 0:d}function bUe(t,{model:e,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:s,encoding:o}=e;let a={};const u=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?Loe(o.opacity)||s.opacity:void 0;return u&&(a.opacity=zt(u)),a={...a,...t},Dt(a)?void 0:a}function xUe(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:r}){const s=n.legend(i)||{},o=n.config,a=ie(e)?koe(n,r,e):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s;let d;uf(c)?d=Wo({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(e.type==="quantitative"&&o.numberFormatType?d=Wo({fieldOrDatumDef:e,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):e.type==="temporal"&&o.timeFormatType&&ie(e)&&e.timeUnit===void 0&&(d=Wo({fieldOrDatumDef:e,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const h={...l?{opacity:l}:{},...d?{text:d}:{},...t};return Dt(h)?void 0:h}function _Ue(t,{legendCmpt:e}){const n=e.get("selections");return n!=null&&n.length?{...t,fill:{value:"transparent"}}:t}function Loe(t){return Ioe(t,(e,n)=>Math.max(e,n.value))}function NM(t){return Ioe(t,(e,n)=>gn(e,n.value))}function Ioe(t,e){if(wVe(t))return de(t.condition).reduce(e,t.value);if(ra(t))return t.value}function koe(t,e,n){const i=e.get("selections");if(!(i!=null&&i.length))return;const r=ae(n.field);return i.map(s=>`(!length(data(${ae(Kt(s)+df)})) || (${s}[${r}] && indexof(${s}[${r}], datum.value) >= 0))`).join(" || ")}const LV={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:i,formatType:r}=e;return ese(t,t.type,i,r,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return tse(i,e,n)},gradientLength:t=>{const{legend:e,legendConfig:n}=t;return e.gradientLength??n.gradientLength??FUe(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>t.labelOverlap??e.labelOverlap??MUe(n),symbolType:({legend:t,markDef:e,channel:n,encoding:i})=>t.symbolType??TUe(e.type,n,i.shape,e.shape),title:({fieldOrDatumDef:t,config:e})=>Jp(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(Qp(n)&&Ho(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>RUe(e,t)};function RUe(t,e){const n=t.values;if(j(n))return gse(e,n);if(we(n))return n}function TUe(t,e,n,i){if(e!=="shape"){const r=NM(n)??i;if(r)return r}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function AUe(t){const{legend:e}=t;return gn(e.type,DUe(t))}function DUe({channel:t,timeUnit:e,scaleType:n}){if(Qp(t)){if(nt(["quarter","month","day"],e))return"symbol";if(Ho(n))return"gradient"}return"symbol"}function OUe({legendConfig:t,legendType:e,orient:n,legend:i}){return i.direction??t[e?"gradientDirection":"symbolDirection"]??PUe(n,e)}function PUe(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function FUe({legendConfig:t,model:e,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=t;if(Ho(r))return n==="horizontal"?i==="top"||i==="bottom"?IV(e,"width",o,s):o:IV(e,"height",l,a)}function IV(t,e,n,i){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${n}, ${i})`}}function MUe(t){if(nt(["quantile","threshold","log","symlog"],t))return"greedy"}function Goe(t){const e=on(t)?NUe(t):GUe(t);return t.component.legends=e,e}function NUe(t){const{encoding:e}=t,n={};for(const i of[Vr,...Lse]){const r=Rn(e[i]);!r||!t.getScaleComponent(i)||i===Br&&ie(r)&&r.type===ty||(n[i]=kUe(t,i))}return n}function LUe(t,e){const n=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:n};if(e==="size")return{strokeWidth:n}}return e==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function IUe(t,e,n,i){switch(e){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(e==="title"&&t===(i==null?void 0:i.title))return!0}return t===(n||{})[e]}function kUe(t,e){var w;let n=t.legend(e);const{markDef:i,encoding:r,config:s}=t,o=s.legend,a=new SUe({},LUe(t,e));jze(t,e,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=t.getScaleComponent(e).get("type"),c=Rn(r[e]),d=ie(c)?(w=Bn(c.timeUnit))==null?void 0:w.unit:void 0,h=n.orient||s.legend.orient||"right",f=AUe({legend:n,channel:e,timeUnit:d,scaleType:u}),p=OUe({legend:n,legendType:f,orient:h,legendConfig:o}),g={legend:n,channel:e,model:t,markDef:i,encoding:r,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:h,legendType:f,direction:p};for(const E of Noe){if(f==="gradient"&&E.startsWith("symbol")||f==="symbol"&&E.startsWith("gradient"))continue;const b=E in LV?LV[E](g):n[E];if(b!==void 0){const S=IUe(b,E,n,t.fieldDef(e));(S||s.legend[E]===void 0)&&a.set(E,b,S)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},C={fieldOrDatumDef:c,model:t,channel:e,legendCmpt:a,legendType:f};for(const E of["labels","legend","title","symbols","gradient","entries"]){const b=Foe(m[E]??{},t),S=E in NV?NV[E](b,C):b;S!==void 0&&!Dt(S)&&(v[E]={...y!=null&&y.length&&ie(c)?{name:`${Kt(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return Dt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function GUe(t){const{legends:e,resolve:n}=t.component;for(const i of t.children){Goe(i);for(const r of J(i.component.legends))n.legend[r]=V5(t.component.resolve,r),n.legend[r]==="shared"&&(e[r]=$oe(e[r],i.component.legends[r]),e[r]||(n.legend[r]="independent",delete e[r]))}for(const i of J(e))for(const r of t.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return e}function $oe(t,e){var s,o,a,l;if(!t)return e.clone();const n=t.getWithExplicit("orient"),i=e.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const u of Noe){const c=Zc(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",(d,h)=>{switch(u){case"symbolType":return $Ue(d,h);case"title":return Sre(d,h);case"type":return r=!0,es("symbol")}return sA(d,h,u,"legend")});t.setWithExplicit(u,c)}return r&&((o=(s=t.implicit)==null?void 0:s.encode)!=null&&o.gradient&&Nx(t.implicit,["encode","gradient"]),(l=(a=t.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Nx(t.explicit,["encode","gradient"])),t}function $Ue(t,e){return e.value==="circle"?e:t}function HUe(t,e,n,i){var r,s;t.encode??(t.encode={}),(r=t.encode)[e]??(r[e]={}),(s=t.encode[e]).update??(s.update={}),t.encode[e].update[n]=i}function Hoe(t){const e=t.component.legends,n={};for(const r of J(e)){const s=t.getScaleComponent(r),o=Ot(s.get("domains"));if(n[o])for(const a of n[o])$oe(a,e[r])||n[o].push(e[r]);else n[o]=[e[r].clone()]}return ii(n).flat().map(r=>WUe(r,t.config)).filter(r=>r!==void 0)}function WUe(t,e){var o,a,l;const{disable:n,labelExpr:i,selections:r,...s}=t.combine();if(!n){if(e.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const c of Lse)s[c]&&delete u[c]}if(s.title||delete s.title,i!==void 0){let u=i;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&we(s.encode.labels.update.text)&&(u=rf(i,"datum.label",s.encode.labels.update.text.signal)),HUe(s,"labels","text",{signal:u})}return s}}function VUe(t){return oy(t)||q5(t)?BUe(t):Woe(t)}function BUe(t){return t.children.reduce((e,n)=>e.concat(n.assembleProjections()),Woe(t))}function Woe(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:i}=n;if(e.data){const r={signal:`[${e.size.map(o=>o.signal).join(", ")}]`},s=e.data.reduce((o,a)=>{const l=we(a)?a.signal:`data('${t.lookupDataSource(a)}')`;return nt(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const zUe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Voe extends ku{constructor(e,n,i,r){super({...n},{name:e}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Boe(t){t.component.projection=on(t)?UUe(t):qUe(t)}function UUe(t){if(t.hasProjection){const e=xr(t.specifiedProjection),n=!(e&&(e.scale!=null||e.translate!=null)),i=n?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,r=n?jUe(t):void 0,s=new Voe(t.projectionName(!0),{...xr(t.config.projection)??{},...e??{}},i,r);return s.get("type")||s.set("type","equalEarth",!1),s}}function jUe(t){const e=[],{encoding:n}=t;for(const i of[[pa,fa],[uo,ga]])(Rn(n[i[0]])||Rn(n[i[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(Br)&&t.typedFieldDef(Br).type===ty&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(Lt.Main)),e}function YUe(t,e){const n=M9(zUe,r=>!!(!Ae(t.explicit,r)&&!Ae(e.explicit,r)||Ae(t.explicit,r)&&Ae(e.explicit,r)&&gs(t.get(r),e.get(r))));if(gs(t.size,e.size)){if(n)return t;if(gs(t.explicit,{}))return e;if(gs(e.explicit,{}))return t}return null}function qUe(t){if(t.children.length===0)return;let e;for(const i of t.children)Boe(i);const n=M9(t.children,i=>{const r=i.component.projection;if(r)if(e){const s=YUe(e,r);return s&&(e=s),!!s}else return e=r,!0;else return!0});if(e&&n){const i=t.projectionName(!0),r=new Voe(i,e.specifiedProjection,e.size,$e(e.data));for(const s of t.children){const o=s.component.projection;o&&(o.isFit&&r.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),i),o.merged=!0)}return r}}function KUe(t,e,n,i){if(tw(e,n)){const r=on(t)?t.axis(n)??t.legend(n)??{}:{},s=ue(e,{expr:"datum"}),o=ue(e,{expr:"datum",binSuffix:"end"});return{formulaAs:ue(e,{binSuffix:"range",forAs:!0}),formula:JC(s,o,r.format,r.formatType,i)}}return{}}function zoe(t,e){return`${fre(t)}_${e}`}function XUe(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function B5(t,e,n){const i=ZT(n,void 0)??{},r=zoe(i,e);return t.getName(`${r}_bins`)}function QUe(t){return"as"in t}function kV(t,e,n){let i,r;QUe(t)?i=ce(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:i=[ue(t,{forAs:!0}),ue(t,{binSuffix:"end",forAs:!0})];const s={...ZT(e,void 0)},o=zoe(s,t.field),{signal:a,extentSignal:l}=XUe(n,o);if(VT(s.extent)){const c=s.extent;r=Eoe(n,c.param,c),delete s.extent}const u={bin:s,field:t.field,as:[i],...a?{signal:a}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:o,binComponent:u}}class Qa extends Tt{clone(){return new Qa(null,$e(this.bins))}constructor(e,n){super(e),this.bins=n}static makeFromEncoding(e,n){const i=n.reduceFieldDef((r,s,o)=>{if(or(s)&&Gt(s.bin)){const{key:a,binComponent:l}=kV(s,s.bin,n);r[a]={...l,...r[a],...KUe(n,s,o,n.config)}}return r},{});return Dt(i)?null:new Qa(e,i)}static makeFromTransform(e,n,i){const{key:r,binComponent:s}=kV(n,n.bin,i);return new Qa(e,{[r]:s})}merge(e,n){for(const i of J(e.bins))i in this.bins?(n(e.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ha([...this.bins[i].as,...e.bins[i].as],tt)):this.bins[i]=e.bins[i];for(const i of e.children)e.removeChild(i),i.parent=this;e.remove()}producedFields(){return new Set(ii(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(ii(this.bins).map(e=>e.field))}hash(){return`Bin ${tt(this.bins)}`}assemble(){return ii(this.bins).flatMap(e=>{const n=[],[i,...r]=e.as,{extent:s,...o}=e.bin,a={type:"bin",field:lo(e.field),as:i,signal:e.signal,...VT(s)?{extent:null}:{extent:s},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!s&&e.extentSignal&&(n.push({type:"extent",field:lo(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),n.push(a);for(const l of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:ue({field:i[u]},{expr:"datum"}),as:l[u]});return e.formula&&n.push({type:"formula",expr:e.formula,as:e.formulaAs}),n})}}function JUe(t,e,n,i){var s;const r=on(i)?i.encoding[_l(e)]:void 0;if(or(n)&&on(i)&&ase(n,r,i.markDef,i.config))t.add(ue(n,{})),t.add(ue(n,{suffix:"end"})),n.bin&&tw(n,e)&&t.add(ue(n,{binSuffix:"range"}));else if(nre(e)){const o=tre(e);t.add(i.getName(o))}else t.add(ue(n));return Yf(n)&&VWe((s=n.scale)==null?void 0:s.range)&&t.add(n.scale.range.field),t}function ZUe(t,e){for(const n of J(e)){const i=e[n];for(const r of J(i))n in t?t[n][r]=new Set([...t[n][r]??[],...i[r]]):t[n]={[r]:i[r]}}}class Ko extends Tt{clone(){return new Ko(null,new Set(this.dimensions),$e(this.measures))}constructor(e,n,i){super(e),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(e,n){let i=!1;n.forEachFieldDef(o=>{o.aggregate&&(i=!0)});const r={},s=new Set;return!i||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([ue(o,{forAs:!0})]);else{if(wu(l)||Dd(l)){const c=wu(l)?"argmin":"argmax",d=l[c];r[d]??(r[d]={}),r[d][c]=new Set([ue({op:c,field:d},{forAs:!0})])}else r[u]??(r[u]={}),r[u][l]=new Set([ue(o,{forAs:!0})]);Lu(a)&&n.scaleDomain(a)==="unaggregated"&&(r[u]??(r[u]={}),r[u].min=new Set([ue({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([ue({field:u,aggregate:"max"},{forAs:!0})]))}else JUe(s,a,o,n)}),s.size+J(r).length===0)?null:new Ko(e,s,r)}static makeFromTransform(e,n){const i=new Set,r={};for(const s of n.aggregate){const{op:o,field:a,as:l}=s;o&&(o==="count"?(r["*"]??(r["*"]={}),r["*"].count=new Set([l||ue(s,{forAs:!0})])):(r[a]??(r[a]={}),r[a][o]=new Set([l||ue(s,{forAs:!0})])))}for(const s of n.groupby??[])i.add(s);return i.size+J(r).length===0?null:new Ko(e,i,r)}merge(e){return Yie(this.dimensions,e.dimensions)?(ZUe(this.measures,e.measures),!0):(fWe("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...J(this.measures)])}producedFields(){const e=new Set;for(const n of J(this.measures))for(const i of J(this.measures[n])){const r=this.measures[n][i];r.size===0?e.add(`${i}_${n}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${tt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],n=[],i=[];for(const s of J(this.measures))for(const o of J(this.measures[s]))for(const a of this.measures[s][o])i.push(a),e.push(o),n.push(s==="*"?null:lo(s));return{type:"aggregate",groupby:[...this.dimensions].map(lo),ops:e,fields:n,as:i}}}class ry extends Tt{constructor(e,n,i,r){super(e),this.model=n,this.name=i,this.data=r;for(const s of js){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[ue(o),...Gt(a)?[ue(o,{binSuffix:"end"})]:[]],...Ka(l)?{sortField:l}:j(l)?{sortIndexField:sm(o,s)}:{}}}}this.childModel=n.child}hash(){let e="Facet";for(const n of js)this[n]&&(e+=` ${n.charAt(0)}:${tt(this[n])}`);return e}get fields(){var n;const e=[];for(const i of js)(n=this[i])!=null&&n.fields&&e.push(...this[i].fields);return e}dependentFields(){const e=new Set(this.fields);for(const n of js)this[n]&&(this[n].sortField&&e.add(this[n].sortField.field),this[n].sortIndexField&&e.add(this[n].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const n of Rl){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),s=i.get("range");if(Yn(r)&&Od(s)){const o=cA(this.childModel,n),a=Y5(o);a?e[n]=a:ee(Y9(n))}}}return e}assembleRowColumnHeaderData(e,n,i){const r={row:"y",column:"x",facet:void 0}[e],s=[],o=[],a=[];r&&i&&i[r]&&(n?(s.push(`distinct_${i[r]}`),o.push("max")):(s.push(i[r]),o.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[e];if(l){const{op:c=KT,field:d}=l;s.push(d),o.push(c),a.push(ue(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){var l;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],s={};for(const u of $5){for(const c of H5){const d=(i[u]&&i[u][c])??[];for(const h of d)if(((l=h.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:a}=s;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:s,facet:o}=this;if(r&&s&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),l=a.map(()=>"distinct");e.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[ou,su])this[a]&&e.push(this.assembleRowColumnHeaderData(a,n,i));if(o){const a=this.assembleFacetHeaderData(i);a&&e.push(...a)}return e}}function GV(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function eje(t,e){const n=I9(t);if(e==="number")return`toNumber(${n})`;if(e==="boolean")return`toBoolean(${n})`;if(e==="string")return`toString(${n})`;if(e==="date")return`toDate(${n})`;if(e==="flatten")return n;if(e.startsWith("date:")){const i=GV(e.slice(5,e.length));return`timeParse(${n},'${i}')`}else if(e.startsWith("utc:")){const i=GV(e.slice(4,e.length));return`utcParse(${n},'${i}')`}else return ee(w7e(e)),null}function tje(t){const e={};return hE(t.filter,n=>{if(Gre(n)){let i=null;Q9(n)?i=us(n.equal):Z9(n)?i=us(n.lte):J9(n)?i=us(n.lt):e5(n)?i=us(n.gt):t5(n)?i=us(n.gte):n5(n)?i=n.range[0]:i5(n)&&(i=(n.oneOf??n.in)[0]),i&&(Uf(i)?e[n.field]="date":ft(i)?e[n.field]="number":ce(i)&&(e[n.field]="string")),n.timeUnit&&(e[n.field]="date")}}),e}function nje(t){const e={};function n(i){tm(i)?e[i.field]="date":i.type==="quantitative"&&J8e(i.aggregate)?e[i.field]="number":qg(i.field)>1?i.field in e||(e[i.field]="flatten"):Yf(i)&&Ka(i.sort)&&qg(i.sort.field)>1&&(i.sort.field in e||(e[i.sort.field]="flatten"))}if((on(t)||Xo(t))&&t.forEachFieldDef((i,r)=>{if(or(i))n(i);else{const s=Bf(r),o=t.fieldDef(s);n({...i,type:o.type})}}),on(t)){const{mark:i,markDef:r,encoding:s}=t;if(Pd(i)&&!t.encoding.order){const o=r.orient==="horizontal"?"y":"x",a=s[o];ie(a)&&a.type==="quantitative"&&!(a.field in e)&&(e[a.field]="number")}}return e}function ije(t){const e={};if(on(t)&&t.component.selection)for(const n of J(t.component.selection)){const i=t.component.selection[n];for(const r of i.project.items)!r.channel&&qg(r.field)>1&&(e[r.field]="flatten")}return e}class Ri extends Tt{clone(){return new Ri(null,$e(this._parse))}constructor(e,n){super(e),this._parse=n}hash(){return`Parse ${tt(this._parse)}`}static makeExplicit(e,n,i){var o;let r={};const s=n.data;return!Pc(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(r=s.format.parse),this.makeWithAncestors(e,r,{},i)}static makeWithAncestors(e,n,i,r){for(const a of J(i)){const l=r.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===i[a]||l.value==="derived"||i[a]==="flatten"?delete i[a]:ee(XW(a,i[a],l.value)))}for(const a of J(n)){const l=r.get(a);l!==void 0&&(l===n[a]?delete n[a]:ee(XW(a,n[a],l)))}const s=new ku(n,i);r.copyAll(s);const o={};for(const a of J(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return J(o).length===0||r.parseNothing?null:new Ri(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const n of J(this._parse)){const i=this._parse[n];qg(n)===1&&(e[n]=i)}return e}producedFields(){return new Set(J(this._parse))}dependentFields(){return new Set(J(this._parse))}assembleTransforms(e=!1){return J(this._parse).filter(n=>e?qg(n)>1:!0).map(n=>{const i=eje(n,this._parse[n]);return i?{type:"formula",expr:i,as:k9(n)}:null}).filter(n=>n!==null)}}class nd extends Tt{clone(){return new nd(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([sa])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:sa}}}class rw extends Tt{clone(){return new rw(null,this.params)}constructor(e,n){super(e),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${tt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class sw extends Tt{clone(){return new sw(null,this.params)}constructor(e,n){super(e),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${tt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class hf extends Tt{constructor(e){super(null),e??(e={name:"source"});let n;if(Pc(e)||(n=e.format?{...Nr(e.format,["parse"])}:{}),g1(e))this._data={values:e.values};else if(nm(e)){if(this._data={url:e.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(e.url)[1];nt(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else Zse(e)?this._data={values:[{type:"Sphere"}]}:(Qse(e)||Pc(e))&&(this._data={});this._generator=Pc(e),e.name&&(this._name=e.name),n&&!Dt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var $V=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},rje=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},S0;function z5(t){return t instanceof hf||t instanceof rw||t instanceof sw}class U5{constructor(){S0.set(this,void 0),$V(this,S0,!1,"f")}setModified(){$V(this,S0,!0,"f")}get modifiedFlag(){return rje(this,S0,"f")}}S0=new WeakMap;class qf extends U5{getNodeDepths(e,n,i){i.set(e,n);for(const r of e.children)this.getNodeDepths(r,n+1,i);return i}optimize(e){const i=[...this.getNodeDepths(e,0,new Map).entries()].sort((r,s)=>s[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class j5 extends U5{optimize(e){this.run(e);for(const n of e.children)this.optimize(n);return this.modifiedFlag}}class sje extends j5{mergeNodes(e,n){const i=n.shift();for(const r of n)e.removeChild(r),r.parent=i,r.remove()}run(e){const n=e.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[e.children[r]]:i[n[r]].push(e.children[r]);for(const r of J(i))i[r].length>1&&(this.setModified(),this.mergeNodes(e,i[r]))}}class oje extends j5{constructor(e){super(),this.requiresSelectionId=e&&G5(e)}run(e){e instanceof nd&&(this.requiresSelectionId&&(z5(e.parent)||e.parent instanceof Ko||e.parent instanceof Ri)||(this.setModified(),e.remove()))}}class aje extends U5{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,n){let i=new Set;e instanceof Xa&&(i=e.producedFields(),N9(i,n)&&(this.setModified(),e.removeFormulas(n),e.producedFields.length===0&&e.remove()));for(const r of e.children)this.run(r,new Set([...n,...i]))}}class lje extends j5{constructor(){super()}run(e){e instanceof ir&&!e.isRequired()&&(this.setModified(),e.remove())}}class uje extends qf{run(e){if(!z5(e)&&!(e.numChildren()>1)){for(const n of e.children)if(n instanceof Ri)if(e instanceof Ri)this.setModified(),e.merge(n);else{if(L9(e.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class cje extends qf{run(e){const n=[...e.children],i=e.children.filter(r=>r instanceof Ri);if(e.numChildren()>1&&i.length>=1){const r={},s=new Set;for(const o of i){const a=o.parse;for(const l of J(a))l in r?r[l]!==a[l]&&s.add(l):r[l]=a[l]}for(const o of s)delete r[o];if(!Dt(r)){this.setModified();const o=new Ri(e,r);for(const a of n){if(a instanceof Ri)for(const l of J(r))delete a.parse[l];e.removeChild(a),a.parent=o,a instanceof Ri&&J(a.parse).length===0&&a.remove()}}}}}class dje extends qf{run(e){e instanceof ir||e.numChildren()>0||e instanceof ry||e instanceof hf||(this.setModified(),e.remove())}}class hje extends qf{run(e){const n=e.children.filter(r=>r instanceof Xa),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class fje extends qf{run(e){const n=e.children.filter(r=>r instanceof Ko),i={};for(const r of n){const s=tt(r.groupBy);s in i||(i[s]=[]),i[s].push(r)}for(const r of J(i)){const s=i[r];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(e.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class pje extends qf{constructor(e){super(),this.model=e}run(e){const n=!(z5(e)||e instanceof iy||e instanceof Ri||e instanceof nd),i=[],r=[];for(const s of e.children)s instanceof Qa&&(n&&!L9(e.producedFields(),s.dependentFields())?i.push(s):r.push(s));if(i.length>0){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof Qa?e.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(r.length>1){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class gje extends qf{run(e){const n=[...e.children];if(!nf(n,o=>o instanceof ir)||e.numChildren()<=1)return;const r=[];let s;for(const o of n)if(o instanceof ir){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof ir)a=l;else break}r.push(...a.children),s?(e.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=s}}}class Kf extends Tt{clone(){return new Kf(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n}addDimensions(e){this.transform.groupby=Ha(this.transform.groupby.concat(e),n=>n)}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??ue(e)}hash(){return`JoinAggregateTransform ${tt(this.transform)}`}assemble(){const e=[],n=[],i=[];for(const s of this.transform.joinaggregate)n.push(s.op),i.push(this.getDefaultName(s)),e.push(s.field===void 0?null:s.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:e,...r!==void 0?{groupby:r}:{}}}}function mje(t){return t.stack.stackBy.reduce((e,n)=>{const i=n.fieldDef,r=ue(i);return r&&e.push(r),e},[])}function yje(t){return j(t)&&t.every(e=>ce(e))&&t.length>1}class lu extends Tt{clone(){return new lu(null,$e(this._stack))}constructor(e,n){super(e),this._stack=n}static makeFromTransform(e,n){const{stack:i,groupby:r,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),l.push(gn(d.order,"ascending"));const u={field:a,order:l};let c;return yje(s)?c=s:ce(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new lu(e,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(e,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=i,u=s.map(f=>{const p=r[f];return ll(p)}).filter(f=>!!f),c=mje(n),d=n.encoding.order;let h;if(j(d)||ie(d))h=vre(d);else{const f=lse(d)?d.sort:o==="y"?"descending":"ascending";h=c.reduce((p,g)=>(p.field.push(g),p.order.push(f),p),{field:[],order:[]})}return new lu(e,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:h,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${tt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:n,groupby:i}=this._stack;return e.length>0?e.map(r=>r.bin?n?[ue(r,{binSuffix:"mid"})]:[ue(r,{}),ue(r,{binSuffix:"end"})]:[ue(r)]).flat():i??[]}assemble(){const e=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:d=.5,bin:h}=c;if(h){const f=ue(c,{expr:"datum"}),p=ue(c,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${d}*${f}+${1-d}*${p}`,as:ue(c,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:r,groupby:[...s,...n],key:ue(c,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:o,as:u,offset:a}),e}}class sy extends Tt{clone(){return new sy(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n}addDimensions(e){this.transform.groupby=Ha(this.transform.groupby.concat(e),n=>n)}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach(n=>e.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??ue(e)}hash(){return`WindowTransform ${tt(this.transform)}`}assemble(){const e=[],n=[],i=[],r=[];for(const d of this.transform.window)n.push(d.op),i.push(this.getDefaultName(d)),r.push(d.param===void 0?null:d.param),e.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>U9(d)))return{type:"joinaggregate",as:i,ops:n,fields:e,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:e,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function vje(t){function e(n){if(!(n instanceof ry)){const i=n.clone();if(i instanceof ir){const r=IM+i.getSource();i.setSource(r),t.model.component.data.outputNodes[r]=i}else(i instanceof Ko||i instanceof lu||i instanceof sy||i instanceof Kf)&&i.addDimensions(t.fields);for(const r of n.children.flatMap(e))r.parent=i;return[i]}return n.children.flatMap(e)}return e}function LM(t){if(t instanceof ry)if(t.numChildren()===1&&!(t.children[0]instanceof ir)){const e=t.children[0];(e instanceof Ko||e instanceof lu||e instanceof sy||e instanceof Kf)&&e.addDimensions(t.fields),e.swapWithParent(),LM(t)}else{const e=t.model.component.data.main;Uoe(e);const n=vje(t),i=t.children.map(n).flat();for(const r of i)r.parent=e}else t.children.map(LM)}function Uoe(t){if(t instanceof ir&&t.type===Lt.Main&&t.numChildren()===1){const e=t.children[0];e instanceof ry||(e.swapWithParent(),Uoe(t))}}const IM="scale_",uS=5;function kM(t){for(const e of t){for(const n of e.children)if(n.parent!==e)return!1;if(!kM(e.children))return!1}return!0}function Co(t,e){let n=!1;for(const i of e)n=t.optimize(i)||n;return n}function HV(t,e,n){let i=t.sources,r=!1;return r=Co(new lje,i)||r,r=Co(new oje(e),i)||r,i=i.filter(s=>s.numChildren()>0),r=Co(new dje,i)||r,i=i.filter(s=>s.numChildren()>0),n||(r=Co(new uje,i)||r,r=Co(new pje(e),i)||r,r=Co(new aje,i)||r,r=Co(new cje,i)||r,r=Co(new fje,i)||r,r=Co(new hje,i)||r,r=Co(new sje,i)||r,r=Co(new gje,i)||r),t.sources=i,r}function Cje(t,e){kM(t.sources);let n=0,i=0;for(let r=0;r<uS&&HV(t,e,!0);r++)n++;t.sources.map(LM);for(let r=0;r<uS&&HV(t,e,!1);r++)i++;kM(t.sources),Math.max(n,i)===uS&&ee(`Maximum optimization runs(${uS}) reached.`)}class Ir{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,n){return new Ir(()=>e(n))}}function joe(t){on(t)?wje(t):Sje(t)}function wje(t){const e=t.component.scales;for(const n of J(e)){const i=bje(t,n);if(e[n].setWithExplicit("domains",i),_je(t,n),t.component.data.isFaceted){let s=t;for(;!Xo(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of i.value)Xl(a)&&(a.data=IM+a.data.replace(IM,""))}}}function Sje(t){for(const n of t.children)joe(n);const e=t.component.scales;for(const n of J(e)){let i,r=null;for(const s of t.children){const o=s.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=Zc(i,o.getWithExplicit("domains"),"domains","scale",GM);const a=o.get("selectionExtent");r&&a&&r.param!==a.param&&ee(m7e),r=a}}e[n].setWithExplicit("domains",i),r&&e[n].set("selectionExtent",r,!0)}}function Eje(t,e,n,i){if(t==="unaggregated"){const{valid:r,reason:s}=WV(e,n);if(!r){ee(s);return}}else if(t===void 0&&i.useUnaggregatedDomain){const{valid:r}=WV(e,n);if(r)return"unaggregated"}return t}function bje(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:i}=t,r=Eje(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return r!==t.scaleDomain(e)&&(t.specifiedScales[e]={...t.specifiedScales[e],domain:r}),e==="x"&&Rn(i.x2)?Rn(i.x)?Zc(zu(n,r,t,"x"),zu(n,r,t,"x2"),"domain","scale",GM):zu(n,r,t,"x2"):e==="y"&&Rn(i.y2)?Rn(i.y)?Zc(zu(n,r,t,"y"),zu(n,r,t,"y2"),"domain","scale",GM):zu(n,r,t,"y2"):zu(n,r,t,e)}function xje(t,e,n){return t.map(i=>({signal:`{data: ${eA(i,{timeUnit:n,type:e})}}`}))}function NO(t,e,n){var r;const i=(r=Bn(n))==null?void 0:r.unit;return e==="temporal"||i?xje(t,e,i):[t]}function zu(t,e,n,i){const{encoding:r}=n,s=Rn(r[i]),{type:o}=s,a=s.timeUnit;if(WWe(e)){const d=zu(t,void 0,n,i),h=NO(e.unionWith,o,a);return Oa([...h,...d.value])}else{if(we(e))return Oa([e]);if(e&&e!=="unaggregated"&&!Ure(e))return Oa(NO(e,o,a))}const l=n.stack;if(l&&i===l.fieldChannel){if(l.offset==="normalize")return es([[0,1]]);const d=n.requestDataName(Lt.Main);return es([{data:d,field:n.vgField(i,{suffix:"start"})},{data:d,field:n.vgField(i,{suffix:"end"})}])}const u=Lu(i)&&ie(s)?Rje(n,i,t):void 0;if(Tl(s)){const d=NO([s.datum],o,a);return es(d)}const c=s;if(e==="unaggregated"){const d=n.requestDataName(Lt.Main),{field:h}=s;return es([{data:d,field:ue({field:h,aggregate:"min"})},{data:d,field:ue({field:h,aggregate:"max"})}])}else if(Gt(c.bin)){if(Yn(t))return es(t==="bin-ordinal"?[]:[{data:f1(u)?n.requestDataName(Lt.Main):n.requestDataName(Lt.Raw),field:n.vgField(i,tw(c,i)?{binSuffix:"range"}:{}),sort:u===!0||!he(u)?{field:n.vgField(i,{}),op:"min"}:u}]);{const{bin:d}=c;if(Gt(d)){const h=B5(n,c.field,d);return es([new Ir(()=>{const f=n.getSignalName(h);return`[${f}.start, ${f}.stop]`})])}else return es([{data:n.requestDataName(Lt.Main),field:n.vgField(i,{})}])}}else if(c.timeUnit&&nt(["time","utc"],t)&&ase(c,on(n)?n.encoding[_l(i)]:void 0,n.markDef,n.config)){const d=n.requestDataName(Lt.Main);return es([{data:d,field:n.vgField(i)},{data:d,field:n.vgField(i,{suffix:"end"})}])}else return es(u?[{data:f1(u)?n.requestDataName(Lt.Main):n.requestDataName(Lt.Raw),field:n.vgField(i),sort:u}]:[{data:n.requestDataName(Lt.Main),field:n.vgField(i)}])}function LO(t,e){const{op:n,field:i,order:r}=t;return{op:n??(e?"sum":KT),...i?{field:lo(i)}:{},...r?{order:r}:{}}}function _je(t,e){var a;const n=t.component.scales[e],i=t.specifiedScales[e].domain,r=(a=t.fieldDef(e))==null?void 0:a.bin,s=Ure(i)&&i,o=zf(r)&&VT(r.extent)&&r.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Rje(t,e,n){if(!Yn(n))return;const i=t.fieldDef(e),r=i.sort;if(rse(r))return{op:"min",field:sm(i,e),order:"ascending"};const{stack:s}=t,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Ka(r)){const a=s&&!o.has(r.field);return LO(r,a)}else if(ise(r)){const{encoding:a,order:l}=r,u=t.fieldDef(a),{aggregate:c,field:d}=u,h=s&&!o.has(d);if(wu(c)||Dd(c))return LO({field:ue(u),order:l},h);if(U9(c)||!c)return LO({op:c,field:d,order:l},h)}else{if(r==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(nt(["ascending",void 0],r))return!0}}function WV(t,e){const{aggregate:n,type:i}=t;return n?ce(n)&&!e7e.has(n)?{valid:!1,reason:z7e(n)}:i==="quantitative"&&e==="log"?{valid:!1,reason:U7e(t)}:{valid:!0}:{valid:!1,reason:B7e(t)}}function GM(t,e,n,i){return t.explicit&&e.explicit&&ee(X7e(n,i,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function Tje(t){const e=Ha(t.map(o=>{if(Xl(o)){const{sort:a,...l}=o;return l}return o}),tt),n=Ha(t.map(o=>{if(Xl(o)){const a=o.sort;return a!==void 0&&!f1(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),tt);if(e.length===0)return;if(e.length===1){const o=t[0];if(Xl(o)&&n.length>0){let a=n[0];if(n.length>1){ee(JW);const l=n.filter(u=>he(u)&&"op"in u&&u.op!=="min");n.every(u=>he(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(he(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const i=Ha(n.map(o=>f1(o)||!("op"in o)||ce(o.op)&&o.op in X8e?o:(ee(J7e(o)),!0)),tt);let r;i.length===1?r=i[0]:i.length>1&&(ee(JW),r=!0);const s=Ha(t.map(o=>Xl(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:e.map(a=>a.field),...r?{sort:r}:{}}:{fields:e,...r?{sort:r}:{}}}function Y5(t){if(Xl(t)&&ce(t.field))return t.field;if(t7e(t)){let e;for(const n of t.fields)if(Xl(n)&&ce(n.field)){if(!e)e=n.field;else if(e!==n.field)return ee(Z7e),e}return ee(eWe),e}else if(n7e(t)){ee(tWe);const e=t.fields[0];return ce(e)?e:void 0}}function cA(t,e){const i=t.component.scales[e].get("domains").map(r=>(Xl(r)&&(r.data=t.lookupDataSource(r.data)),r));return Tje(i)}function Yoe(t){return oy(t)||q5(t)?t.children.reduce((e,n)=>e.concat(Yoe(n)),VV(t)):VV(t)}function VV(t){return J(t.component.scales).reduce((e,n)=>{const i=t.component.scales[n];if(i.merged)return e;const r=i.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...d}=r,h=Aje(r.range,s,n,t),f=cA(t,n),p=a?Eze(t,a,i,f):null;return e.push({name:s,type:o,...f?{domain:f}:{},...p?{domainRaw:p}:{},range:h,...c!==void 0?{reverse:c}:{},...d}),e},[])}function Aje(t,e,n,i){if(jn(n)){if(Od(t))return{step:{signal:`${e}_step`}}}else if(he(t)&&Xl(t))return{...t,data:i.lookupDataSource(t.data)};return t}class qoe extends ku{constructor(e,n){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:nf(this.get("domains"),e=>j(e)&&e.length===2&&ft(e[0])&&e[0]<=0&&ft(e[1])&&e[1]>=0)}}const Dje=["range","scheme"];function Oje(t){const e=t.component.scales;for(const n of WT){const i=e[n];if(!i)continue;const r=Pje(n,t);i.setWithExplicit("range",r)}}function BV(t,e){const n=t.fieldDef(e);if(n!=null&&n.bin){const{bin:i,field:r}=n,s=zr(e),o=t.getName(s);if(he(i)&&i.binned&&i.step!==void 0)return new Ir(()=>{const a=t.scaleName(e),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${t.getSignalName(o)} / (${l})`});if(Gt(i)){const a=B5(t,r,i);return new Ir(()=>{const l=t.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${t.getSignalName(o)} / (${u})`})}}}function Pje(t,e){const n=e.specifiedScales[t],{size:i}=e,s=e.getScaleComponent(t).get("type");for(const d of Dje)if(n[d]!==void 0){const h=SM(s,d),f=jre(t,d);if(!h)ee(_re(s,d,t));else if(f)ee(f);else switch(d){case"range":{const p=n.range;if(j(p)){if(jn(t))return Oa(p.map(g=>{if(g==="width"||g==="height"){const m=e.getName(g),y=e.getSignalName.bind(e);return Ir.fromName(y,m)}return g}))}else if(he(p))return Oa({data:e.requestDataName(Lt.Main),field:p.field,sort:{op:"min",field:e.vgField(t)}});return Oa(p)}case"scheme":return Oa(Fje(n[d]))}}const o=t===Qt||t==="xOffset"?"width":"height",a=i[o];if(ul(a)){if(jn(t))if(Yn(s)){const d=Koe(a,e,t);if(d)return Oa({step:d})}else ee(Rre(o));else if(ey(t)){const d=t===xd?"x":"y";if(e.getScaleComponent(d).get("type")==="band"){const p=Xoe(a,s);if(p)return Oa(p)}}}const{rangeMin:l,rangeMax:u}=n,c=Mje(t,e);return(l!==void 0||u!==void 0)&&SM(s,"rangeMin")&&j(c)&&c.length===2?Oa([l??c[0],u??c[1]]):es(c)}function Fje(t){return HWe(t)?{scheme:t.name,...Nr(t,["name"])}:{scheme:t}}function Mje(t,e){const{size:n,config:i,mark:r,encoding:s}=e,o=e.getSignalName.bind(e),{type:a}=Rn(s[t]),u=e.getScaleComponent(t).get("type"),{domain:c,domainMid:d}=e.specifiedScales[t];switch(t){case Qt:case Un:{if(nt(["point","band"],u)){const p=Qoe(t,n,i.view);if(ul(p))return{step:Koe(p,e,t)}}const h=zr(t),f=e.getName(h);return t===Un&&xs(u)?[Ir.fromName(o,f),0]:[0,Ir.fromName(o,f)]}case xd:case Zm:return Nje(t,e,u);case Mu:{const h=e.component.scales[t].get("zero"),f=Joe(r,h,i),p=kje(r,n,e,i);return Jg(u)?Ije(f,p,Lje(u,i,c,t)):[f,p]}case go:return[0,Math.PI*2];case Vf:return[0,360];case ha:return[0,new Ir(()=>{const h=e.getSignalName("width"),f=e.getSignalName("height");return`min(${h},${f})/2`})];case Td:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Ad:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Br:return"symbol";case Vr:case bl:case xl:return u==="ordinal"?a==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Nu:case _d:case Rd:return[i.scale.minOpacity,i.scale.maxOpacity]}}function Koe(t,e,n){const{encoding:i}=e,r=e.getScaleComponent(n),s=W9(n),o=i[s];if(kse({step:t,offsetIsDiscrete:We(o)&&Hre(o.type)})==="offset"&&Cse(i,s)){const l=e.getScaleComponent(s);let c=`domain('${e.scaleName(s)}').length`;if(l.get("type")==="band"){const h=l.get("paddingInner")??l.get("padding")??0,f=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${h}, ${f})`}const d=r.get("paddingInner")??r.get("padding");return{signal:`${t.step} * ${c} / (1-${o7e(d)})`}}else return t.step}function Xoe(t,e){if(kse({step:t,offsetIsDiscrete:Yn(e)})==="offset")return{step:t.step}}function Nje(t,e,n){const i=t===xd?"x":"y",s=e.getScaleComponent(i).get("type"),o=e.scaleName(i);if(s==="band"){const a=Qoe(i,e.size,e.config.view);if(ul(a)){const l=Xoe(a,n);if(l)return l}return[0,{signal:`bandwidth('${o}')`}]}else{const a=e.encoding[i];if(ie(a)&&a.timeUnit){const l=Ire(a.timeUnit,c=>`scale('${o}', ${c})`),u=e.config.scale.bandWithNestedOffsetPaddingInner;if(u){const c=we(u)?`${u.signal}/2`:`${u/2}`,d=we(u)?`(1 - ${u.signal}/2)`:`${1-u/2}`;return[{signal:`${c} * (${l})`},{signal:`${d} * (${l})`}]}return[0,{signal:l}]}return Uie(`Cannot use ${t} scale if ${i} scale is not discrete.`)}}function Qoe(t,e,n){const i=t===Qt?"width":"height",r=e[i];return r||Ux(n,i)}function Lje(t,e,n,i){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return n!==void 0&&j(n)?n.length+1:(ee(cWe(i)),3)}}function Ije(t,e,n){const i=()=>{const r=$o(e),s=$o(t),o=`(${r} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${r} + ${o}, ${o})`};return we(e)?new Ir(i):{signal:i()}}function Joe(t,e,n){if(e)return we(e)?{signal:`${e.signal} ? 0 : ${Joe(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(BT("size",t))}const zV=.95;function kje(t,e,n,i){const r={x:BV(n,"x"),y:BV(n,"y")};switch(t){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const s=UV(e,r,i.view);return ft(s)?s-1:new Ir(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const s=UV(e,r,i.view);return ft(s)?Math.pow(zV*s,2):new Ir(()=>`pow(${zV} * ${s.signal}, 2)`)}}throw new Error(BT("size",t))}function UV(t,e,n){const i=ul(t.width)?t.width.step:zx(n,"width"),r=ul(t.height)?t.height.step:zx(n,"height");return e.x||e.y?new Ir(()=>`min(${[e.x?e.x.signal:i,e.y?e.y.signal:r].join(", ")})`):Math.min(i,r)}function Zoe(t,e){on(t)?Gje(t,e):tae(t,e)}function Gje(t,e){const n=t.component.scales,{config:i,encoding:r,markDef:s,specifiedScales:o}=t;for(const a of J(n)){const l=o[a],u=n[a],c=t.getScaleComponent(a),d=Rn(r[a]),h=l[e],f=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=SM(f,e),y=jre(a,e);if(h!==void 0&&(m?y&&ee(y):ee(_re(f,e,a))),m&&y===void 0)if(h!==void 0){const v=d.timeUnit,C=d.type;switch(e){case"domainMax":case"domainMin":Uf(l[e])||C==="temporal"||v?u.set(e,{signal:eA(l[e],{type:C,timeUnit:v})},!0):u.set(e,l[e],!0);break;default:u.copyKeyFromObject(e,l)}}else{const v=e in jV?jV[e]({model:t,channel:a,fieldOrDatumDef:d,scaleType:f,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:i,hasNestedOffsetScale:bM(r,a),hasSecondaryRangeChannel:!!r[_l(a)]}):i.scale[e];v!==void 0&&u.set(e,v,!1)}}}const jV={bins:({model:t,fieldOrDatumDef:e})=>ie(e)?$je(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>Hje(t,e.type),nice:({scaleType:t,channel:e,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:s})=>Wje(t,e,n,i,r,s),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:i,config:r})=>Vje(t,e,r.scale,n,i,r.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:s})=>Bje(t,e,n.type,i,r.scale,s),paddingOuter:({scalePadding:t,channel:e,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:s})=>zje(t,e,n,i,r.scale,s),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:i})=>{const r=ie(t)?t.sort:void 0;return Uje(e,r,n,i.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:i,scaleType:r,config:s,hasSecondaryRangeChannel:o})=>jje(t,e,n,i,r,s.scale,o)};function eae(t){on(t)?Oje(t):tae(t,"range")}function tae(t,e){const n=t.component.scales;for(const i of t.children)e==="range"?eae(i):Zoe(i,e);for(const i of J(n)){let r;for(const s of t.children){const o=s.component.scales[i];if(o){const a=o.getWithExplicit(e);r=Zc(r,a,e,"scale",Xse((l,u)=>{switch(e){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[i].setWithExplicit(e,r)}}function $je(t,e){const n=e.bin;if(Gt(n)){const i=B5(t,e.field,n);return new Ir(()=>t.getSignalName(i))}else if(Xn(n)&&zf(n)&&n.step!==void 0)return{step:n.step}}function Hje(t,e){if(nt([Vr,bl,xl],t)&&e!=="nominal")return"hcl"}function Wje(t,e,n,i,r,s){var o;if(!((o=ll(s))!=null&&o.bin||j(n)||r!=null||i!=null||nt([Lr.TIME,Lr.UTC],t)))return jn(e)?!0:void 0}function Vje(t,e,n,i,r,s){if(jn(t)){if(Ho(e)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=r;if(o==="bar"&&!(ie(i)&&(i.bin||i.timeUnit))&&(a==="vertical"&&t==="x"||a==="horizontal"&&t==="y"))return s.continuousBandSize}if(e===Lr.POINT)return n.pointPadding}}function Bje(t,e,n,i,r,s=!1){if(t===void 0){if(jn(e)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=r;return s?u:gn(o,n==="bar"?a:l)}else if(ey(e)&&i===Lr.BAND)return r.offsetBandPaddingInner}}function zje(t,e,n,i,r,s=!1){if(t===void 0){if(jn(e)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=r;if(s)return a;if(n===Lr.BAND)return gn(o,we(i)?{signal:`${i.signal}/2`}:i/2)}else if(ey(e)){if(n===Lr.POINT)return .5;if(n===Lr.BAND)return r.offsetBandPaddingOuter}}}function Uje(t,e,n,i){if(n==="x"&&i.xReverse!==void 0)return xs(t)&&e==="descending"?we(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(xs(t)&&e==="descending")return!0}function jje(t,e,n,i,r,s,o){if(!!n&&n!=="unaggregated"&&xs(r)){if(j(n)){const l=n[0],u=n[n.length-1];if(ft(l)&&l<=0&&ft(u)&&u>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!Jg(r))return!0;if(!(ie(e)&&e.bin)&&nt([...Rl,...V8e],t)){const{orient:l,type:u}=i;return nt(["bar","area","line","trail"],u)&&(l==="horizontal"&&t==="y"||l==="vertical"&&t==="x")?!1:nt(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function Yje(t,e,n,i,r=!1){const s=qje(e,n,i,r),{type:o}=t;return Lu(e)?o!==void 0?YWe(e,o)?ie(n)&&!jWe(o,n.type)?(ee(q7e(o,s)),s):o:(ee(Y7e(e,o,s)),s):s:null}function qje(t,e,n,i){var r;switch(e.type){case"nominal":case"ordinal":{if(Qp(t)||RO(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&ee(TO(t,"ordinal")),"ordinal";if(jn(t)||ey(t)){if(nt(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&t in z9)return"band";const s=n[zr(t)];return lf(s)||em(e)&&((r=e.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return Qp(t)?"time":RO(t)==="discrete"?(ee(TO(t,"temporal")),"ordinal"):ie(e)&&e.timeUnit&&Bn(e.timeUnit).utc?"utc":"time";case"quantitative":return Qp(t)?ie(e)&&Gt(e.bin)?"bin-ordinal":"linear":RO(t)==="discrete"?(ee(TO(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(bre(e.type))}function Kje(t,{ignoreRange:e}={}){nae(t),joe(t);for(const n of UWe)Zoe(t,n);e||eae(t)}function nae(t){on(t)?t.component.scales=Xje(t):t.component.scales=Jje(t)}function Xje(t){const{encoding:e,mark:n,markDef:i}=t,r={};for(const s of WT){const o=Rn(e[s]);if(o&&n===Kre&&s===Br&&o.type===ty)continue;let a=o&&o.scale;if(ey(s)){const l=are(s);if(!bM(e,l)){a&&ee(M7e(s));continue}}if(o&&a!==null&&a!==!1){a??(a={});const l=bM(e,s),u=Yje(a,s,o,i,l);r[s]=new qoe(t.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return r}const Qje=Xse((t,e)=>eV(t)-eV(e));function Jje(t){var e;const n=t.component.scales={},i={},r=t.component.resolve;for(const s of t.children){nae(s);for(const o of J(s.component.scales))if((e=r.scale)[o]??(e[o]=Moe(o,t)),r.scale[o]==="shared"){const a=i[o],l=s.component.scales[o].getWithExplicit("type");a?LWe(a.value,l.value)?i[o]=Zc(a,l,"type","scale",Qje):(r.scale[o]="independent",delete i[o]):i[o]=l}}for(const s of J(i)){const o=t.scaleName(s,!0),a=i[s];n[s]=new qoe(o,a);for(const l of t.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class IO{constructor(){this.nameMap={}}rename(e,n){this.nameMap[e]=n}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function on(t){return(t==null?void 0:t.type)==="unit"}function Xo(t){return(t==null?void 0:t.type)==="facet"}function q5(t){return(t==null?void 0:t.type)==="concat"}function oy(t){return(t==null?void 0:t.type)==="layer"}class K5{constructor(e,n,i,r,s,o,a){this.type=n,this.parent=i,this.config=s,this.correctDataNames=l=>{var u,c,d;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(d=(c=l.from)==null?void 0:c.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=i,this.config=s,this.view=xr(a),this.name=e.name??r,this.title=Ju(e.title)?{text:e.title}:e.title?xr(e.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new IO,this.projectionNameMap=i?i.projectionNameMap:new IO,this.signalNameMap=i?i.signalNameMap:new IO,this.data=e.data,this.description=e.description,this.transforms=sze(e.transform??[]),this.layout=n==="layer"||n==="unit"?{}:uBe(e,n,s),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:XT(e)||(i==null?void 0:i.component.data.isFaceted)&&e.data===void 0},layoutSize:new ku,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?$e(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Kje(this)}parseProjection(){Boe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Goe(this)}assembleEncodeFromView(e){const{style:n,...i}=e,r={};for(const s of J(i)){const o=i[s];o!==void 0&&(r[s]=zt(o))}return r}assembleGroupEncodeEntry(e){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(n.description=zt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:Dt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:e,...n}=this.layout,{component:i,config:r}=this,s=CUe(i.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let n=[];for(const i of js)e[i].title&&n.push(fUe(this,i));for(const i of $5)n=n.concat(pUe(this,i));return n}assembleAxes(){return eUe(this.component.axes,this.config)}assembleLegends(){return Hoe(this)}assembleProjections(){return VUe(this)}assembleTitle(){const{encoding:e,...n}=this.title??{},i={...pre(this.config.title).nonMarkTitleProperties,...n,...e?{encode:{update:e}}:{}};if(i.text)return nt(["unit","layer"],this.type)?nt(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),Dt(i)?void 0:i}assembleGroup(e=[]){const n={};e=e.concat(this.assembleSignals()),e.length>0&&(n.signals=e);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Xo(this.parent)?Yoe(this):[];r.length>0&&(n.scales=r);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(e){return Kt((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(Lt[e].toLowerCase())}requestDataName(e){const n=this.getDataName(e),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(e){if(Xo(this.parent)){const n=Poe(e),i=HT(n),r=this.component.scales[i];if(r&&!r.merged){const s=r.get("type"),o=r.get("range");if(Yn(s)&&Od(o)){const a=r.get("name"),l=cA(this,i),u=Y5(l);if(u){const c=ue({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Ooe(a,r,c)}}else return ee(Y9(i)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const n=this.component.data.outputNodes[e];return n?n.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,n){this.signalNameMap.rename(e,n)}renameScale(e,n){this.scaleNameMap.rename(e,n)}renameProjection(e,n){this.projectionNameMap.rename(e,n)}scaleName(e,n){if(n)return this.getName(e);if(rre(e)&&Lu(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[e];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,n){let i=this.component.selection[e];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(e,n)),!i)throw new Error(d7e(n));return i}hasAxisOrientSignalRef(){var e,n;return((e=this.component.axes.x)==null?void 0:e.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class iae extends K5{vgField(e,n={}){const i=this.fieldDef(e);if(i)return ue(i,n)}reduceFieldDef(e,n){return GVe(this.getMapping(),(i,r,s)=>{const o=ll(r);return o?e(i,o,s):i},n)}forEachFieldDef(e,n){S5(this.getMapping(),(i,r)=>{const s=ll(i);s&&e(s,r)},n)}}class dA extends Tt{clone(){return new dA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=$e(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${tt(this.transform)}`}assemble(){const{density:e,...n}=this.transform;return{type:"kde",field:e,...n}}}class hA extends Tt{clone(){return new hA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=$e(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${tt(this.transform)}`}assemble(){const{extent:e,param:n}=this.transform;return{type:"extent",field:e,signal:n}}}class m1 extends Tt{clone(){return new m1(null,{...this.filter})}constructor(e,n){super(e),this.filter=n}static make(e,n){const{config:i,mark:r,markDef:s}=n;if(Et("invalid",s,i)!=="filter")return null;const a=n.reduceFieldDef((l,u,c)=>{const d=Lu(c)&&n.getScaleComponent(c);if(d){const h=d.get("type");xs(h)&&u.aggregate!=="count"&&!Pd(r)&&(l[u.field]=u)}return l},{});return J(a).length?new m1(e,a):null}dependentFields(){return new Set(J(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${tt(this.filter)}`}assemble(){const e=J(this.filter).reduce((n,i)=>{const r=this.filter[i],s=ue(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):r.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class fA extends Tt{clone(){return new fA(this.parent,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=$e(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((s,o)=>r[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${tt(this.transform)}`}assemble(){const{flatten:e,as:n}=this.transform;return{type:"flatten",fields:e,as:n}}}class pA extends Tt{clone(){return new pA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=$e(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${tt(this.transform)}`}assemble(){const{fold:e,as:n}=this.transform;return{type:"fold",fields:e,as:n}}}class eg extends Tt{clone(){return new eg(null,$e(this.fields),this.geojson,this.signal)}static parseAll(e,n){if(n.component.projection&&!n.component.projection.isFit)return e;let i=0;for(const r of[[pa,fa],[uo,ga]]){const s=r.map(o=>{const a=Rn(n.encoding[o]);return ie(a)?a.field:Tl(a)?{expr:`${a.datum}`}:ra(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(e=new eg(e,s,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Br)){const r=n.typedFieldDef(Br);r.type===ty&&(e=new eg(e,null,r.field,n.getName(`geojson_${i++}`)))}return e}constructor(e,n,i,r){super(e),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const e=(this.fields??[]).filter(ce);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${tt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class y1 extends Tt{clone(){return new y1(null,this.projection,$e(this.fields),$e(this.as))}constructor(e,n,i,r){super(e),this.projection=n,this.fields=i,this.as=r}static parseAll(e,n){if(!n.projectionName())return e;for(const i of[[pa,fa],[uo,ga]]){const r=i.map(o=>{const a=Rn(n.encoding[o]);return ie(a)?a.field:Tl(a)?{expr:`${a.datum}`}:ra(a)?{expr:`${a.value}`}:void 0}),s=i[0]===uo?"2":"";(r[0]||r[1])&&(e=new y1(e,n.projectionName(),r,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return e}dependentFields(){return new Set(this.fields.filter(ce))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${tt(this.fields)} ${tt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ph extends Tt{clone(){return new Ph(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:n=0,stop:i,step:r}=e;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,n){return new Ph(e,n)}static makeFromEncoding(e,n){const i=n.encoding,r=i.x,s=i.y;if(ie(r)&&ie(s)){const o=r.impute?r:s.impute?s:void 0;if(o===void 0)return;const a=r.impute?s:s.impute?r:void 0,{method:l,value:u,frame:c,keyvals:d}=o.impute,h=Sse(n.mark,i);return new Ph(e,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${tt(this.transform)}`}assemble(){const{impute:e,key:n,keyvals:i,method:r,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:e,key:n,...i?{keyvals:HBe(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!r||r==="value"?o:null};if(r&&r!=="value"){const u={type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e};return[l,u,c]}else return[l]}}class gA extends Tt{clone(){return new gA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=$e(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${tt(this.transform)}`}assemble(){const{loess:e,on:n,...i}=this.transform;return{type:"loess",x:n,y:e,...i}}}class v1 extends Tt{clone(){return new v1(null,$e(this.transform),this.secondary)}constructor(e,n,i){super(e),this.transform=n,this.secondary=i}static make(e,n,i,r){const s=n.component.data.sources,{from:o}=i;let a=null;if(WBe(o)){let l=oae(o.data,s);l||(l=new hf(o.data),s.push(l));const u=n.getName(`lookup_${r}`);a=new ir(l,u,Lt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(VBe(o)){const l=o.param;i={as:l,...i};let u;try{u=n.getSelectionComponent(Kt(l),l)}catch{throw new Error(p7e(l))}if(a=u.materialized,!a)throw new Error(g7e(l))}return new v1(e,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?de(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${tt({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:de(this.transform.as)}:{}};else{let n=this.transform.as;ce(n)||(ee(b7e),n="_lookup"),e={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class mA extends Tt{clone(){return new mA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=$e(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${tt(this.transform)}`}assemble(){const{quantile:e,...n}=this.transform;return{type:"quantile",field:e,...n}}}class yA extends Tt{clone(){return new yA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=$e(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${tt(this.transform)}`}assemble(){const{regression:e,on:n,...i}=this.transform;return{type:"regression",x:n,y:e,...i}}}class vA extends Tt{clone(){return new vA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n}addDimensions(e){this.transform.groupby=Ha((this.transform.groupby??[]).concat(e),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${tt(this.transform)}`}assemble(){const{pivot:e,value:n,groupby:i,limit:r,op:s}=this.transform;return{type:"pivot",field:e,value:n,...r!==void 0?{limit:r}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}}}}class CA extends Tt{clone(){return new CA(null,$e(this.transform))}constructor(e,n){super(e),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${tt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function rae(t){let e=0;function n(i,r){if(i instanceof hf&&!i.isGenerator&&!nm(i.data)&&(t.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Ri&&(i.parent instanceof hf&&!r.source?(r.format={...r.format??{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof ry){r.name||(r.name=`data_${e++}`),!r.source||r.transform.length>0?(t.push(r),i.data=r.name):i.data=r.source,t.push(...i.assemble());return}switch((i instanceof rw||i instanceof sw||i instanceof m1||i instanceof iy||i instanceof rm||i instanceof y1||i instanceof Ko||i instanceof v1||i instanceof sy||i instanceof Kf||i instanceof pA||i instanceof fA||i instanceof dA||i instanceof gA||i instanceof mA||i instanceof yA||i instanceof nd||i instanceof CA||i instanceof vA||i instanceof hA)&&r.transform.push(i.assemble()),(i instanceof Qa||i instanceof Xa||i instanceof Ph||i instanceof lu||i instanceof eg)&&r.transform.push(...i.assemble()),i instanceof ir&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof ir?i.setSource(r.name):(r.name||(r.name=`data_${e++}`),i.setSource(r.name),i.numChildren()===1&&(t.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof ir&&(!r.source||r.transform.length>0)&&t.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${e++}`);let s=r.name;!r.source||r.transform.length>0?t.push(r):s=r.source;for(const o of i.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Zje(t){const e=[],n=rae(e);for(const i of t.children)n(i,{source:t.name,name:null,transform:[]});return e}function eYe(t,e){const n=[],i=rae(n);let r=0;for(const o of t.sources){o.hasName()||(o.dataName=`source_${r++}`);const a=o.assemble();i(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=t.outputNodes[a.from].getSource());for(const o of n)o.name in e&&(o.values=e[o.name]);return n}function tYe(t){return t==="top"||t==="left"||we(t)?"header":"footer"}function nYe(t){for(const e of js)iYe(t,e);YV(t,"x"),YV(t,"y")}function iYe(t,e){var o;const{facet:n,config:i,child:r,component:s}=t;if(t.channelHasField(e)){const a=n[e],l=om("title",null,i,e);let u=Jp(a,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[e].title&&(u=j(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[e].title}`,r.component.layoutHeaders[e].title=null);const c=om("labelOrient",a.header,i,e),d=a.header!==null?gn((o=a.header)==null?void 0:o.labels,i.header.labels,!0):!1,h=nt(["bottom","right"],c)?"footer":"header";s.layoutHeaders[e]={title:a.header!==null?u:null,facetFieldDef:a,[h]:e==="facet"?[]:[sae(t,e,d)]}}}function sae(t,e,n){const i=e==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(i)?t.child.getSizeSignalRef(i):void 0,axes:[]}}function YV(t,e){const{child:n}=t;if(n.component.axes[e]){const{layoutHeaders:i,resolve:r}=t.component;if(r.axis[e]=V5(r,e),r.axis[e]==="shared"){const s=e==="x"?"column":"row",o=i[s];for(const a of n.component.axes[e]){const l=tYe(a.get("orient"));o[l]??(o[l]=[sae(t,s,!1)]);const u=w0(a,"main",t.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function rYe(t){X5(t),Kx(t,"width"),Kx(t,"height")}function sYe(t){X5(t);const e=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";Kx(t,e),Kx(t,n)}function X5(t){for(const e of t.children)e.parseLayoutSize()}function Kx(t,e){const n=Poe(e),i=HT(n),r=t.component.resolve,s=t.component.layoutSize;let o;for(const a of t.children){const l=a.component.layoutSize.getWithExplicit(n),u=r.scale[i]??Moe(i,t);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Zc(o,l,n,"")}else o=l}if(o){for(const a of t.children)t.renameSignal(a.getName(n),t.getName(e)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(e,o)}else s.setWithExplicit(e,{explicit:!1,value:void 0})}function oYe(t){const{size:e,component:n}=t;for(const i of Rl){const r=zr(i);if(e[r]){const s=e[r];n.layoutSize.set(r,ul(s)?"step":s,!0)}else{const s=aYe(t,r);n.layoutSize.set(r,s,!1)}}}function aYe(t,e){const n=e==="width"?"x":"y",i=t.config,r=t.getScaleComponent(n);if(r){const s=r.get("type"),o=r.get("range");if(Yn(s)){const a=Ux(i.view,e);return Od(o)||ul(a)?"step":a}else return _M(i.view,e)}else{if(t.hasProjection||t.mark==="arc")return _M(i.view,e);{const s=Ux(i.view,e);return ul(s)?s.step:s}}}function $M(t,e,n){return ue(e,{suffix:`by_${ue(t)}`,...n??{}})}class q0 extends iae{constructor(e,n,i,r){super(e,"facet",n,i,r,e.resolve),this.child=t$(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!ZC(e))return{facet:this.initFacetFieldDef(e,"facet")};const n=J(e),i={};for(const r of n){if(![su,ou].includes(r)){ee(BT(r,"facet"));break}const s=e[r];if(s.field===void 0){ee(CM(s,r));break}i[r]=this.initFacetFieldDef(s,r)}return i}initFacetFieldDef(e,n){const i=C5(e,n);return i.header?i.header=xr(i.header):i.header===null&&(i.header=null),i}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=wA(this),this.child.parseData()}parseLayoutSize(){X5(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),nYe(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const n of js)for(const i of H5){const r=this.component.layoutHeaders[n],s=r[i],{facetFieldDef:o}=r;if(o){const a=om("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=lA(n,a);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(e[l]??(e[l]={}),e[l][n]=.5),r.title&&(e.offset??(e.offset={}),e.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:n}=this.facet,i=e?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!e&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof q0))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof q0?{...this.channelHasField("column")?{encode:{update:{columns:{field:ue(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],n=[],i=[];if(this.child instanceof q0){if(this.child.channelHasField("column")){const r=ue(this.child.facet.column);e.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Rl){const s=this.child.component.scales[r];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Yn(o)&&Od(a)){const l=cA(this.child,r),u=Y5(l);u?(e.push(u),n.push("distinct"),i.push(`distinct_${u}`)):ee(Y9(r))}}}return{fields:e,ops:n,as:i}}assembleFacet(){const{name:e,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of js){const d=this.facet[c];if(d){l.push(ue(d));const{bin:h,sort:f}=d;if(Gt(h)&&l.push(ue(d,{binSuffix:"end"})),Ka(f)){const{field:p,op:g=KT}=f,m=$M(d,f);i&&r?(s.push(m),o.push("max"),a.push(m)):(s.push(p),o.push(g),a.push(m))}else if(j(f)){const p=sm(d,c);s.push(p),o.push("max"),a.push(p)}}}const u=!!i&&!!r;return{name:e,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:n}=this,i=n[e];return i?Ka(i.sort)?[$M(i,i.sort,{expr:"datum"})]:j(i.sort)?[sm(i,e,{expr:"datum"})]:[ue(i,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:n}=this,i=n[e];if(i){const{sort:r}=i;return[(Ka(r)?r.order:!j(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var r;const{facet:e,config:n}=this;if(e.facet)return MM(e.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const s of $5)if(e[s]){const o=om("labelOrient",(r=e[s])==null?void 0:r.header,n,s);if(i[s].includes(o))return MM(e[s],s,n)}}assembleMarks(){const{child:e}=this,n=this.component.data.facetRoot,i=Zje(n),r=e.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||e.assembleTitle(),o=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:js.map(l=>this.facetSortFields(l)).flat(),order:js.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...e.assembleGroup(vze(this,[]))}]}getMapping(){return this.facet}}function lYe(t,e){const{row:n,column:i}=e;if(n&&i){let r=null;for(const s of[n,i])if(Ka(s.sort)){const{field:o,op:a=KT}=s.sort;t=r=new Kf(t,{joinaggregate:[{op:a,field:o,as:$M(s,s.sort,{forAs:!0})}],groupby:[ue(s)]})}return r}return null}function oae(t,e){var n,i,r,s;for(const o of e){const a=o.data;if(t.name&&o.hasName()&&t.name!==o.dataName)continue;const l=(n=t.format)==null?void 0:n.mesh,u=(i=a.format)==null?void 0:i.feature;if(l&&u)continue;const c=(r=t.format)==null?void 0:r.feature;if((c||u)&&c!==u)continue;const d=(s=a.format)==null?void 0:s.mesh;if(!((l||d)&&l!==d)){if(g1(t)&&g1(a)){if(gs(t.values,a.values))return o}else if(nm(t)&&nm(a)){if(t.url===a.url)return o}else if(Qse(t)&&t.name===o.dataName)return o}}return null}function uYe(t,e){if(t.data||!t.parent){if(t.data===null){const i=new hf({values:[]});return e.push(i),i}const n=oae(t.data,e);if(n)return Pc(t.data)||(n.data.format=jie({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const i=new hf(t.data);return e.push(i),i}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function cYe(t,e,n){let i=0;for(const r of e.transforms){let s,o;if(JBe(r))o=t=new rm(t,r),s="derived";else if(F5(r)){const a=tje(r);o=t=Ri.makeWithAncestors(t,{},a,n)??t,t=new iy(t,e,r.filter)}else if(jse(r))o=t=Qa.makeFromTransform(t,r,e),s="number";else if(eze(r))s="date",n.getWithExplicit(r.field).value===void 0&&(t=new Ri(t,{[r.field]:s}),n.set(r.field,s,!1)),o=t=Xa.makeFromTransform(t,r);else if(tze(r))o=t=Ko.makeFromTransform(t,r),s="number",G5(e)&&(t=new nd(t));else if(Use(r))o=t=v1.make(t,e,r,i++),s="derived";else if(KBe(r))o=t=new sy(t,r),s="number";else if(XBe(r))o=t=new Kf(t,r),s="number";else if(nze(r))o=t=lu.makeFromTransform(t,r),s="derived";else if(ize(r))o=t=new pA(t,r),s="derived";else if(rze(r))o=t=new hA(t,r),s="derived";else if(QBe(r))o=t=new fA(t,r),s="derived";else if(BBe(r))o=t=new vA(t,r),s="derived";else if(qBe(r))t=new CA(t,r);else if(ZBe(r))o=t=Ph.makeFromTransform(t,r),s="derived";else if(zBe(r))o=t=new dA(t,r),s="derived";else if(UBe(r))o=t=new mA(t,r),s="derived";else if(jBe(r))o=t=new yA(t,r),s="derived";else if(YBe(r))o=t=new gA(t,r),s="derived";else{ee(E7e(r));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return t}function wA(t){var g;let e=uYe(t,t.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=t.component.data,r=t.data,o=!(r&&(Pc(r)||nm(r)||g1(r)))&&t.parent?t.parent.component.data.ancestorParse.clone():new mze;Pc(r)?(Jse(r)?e=new sw(e,r.sequence):M5(r)&&(e=new rw(e,r.graticule)),o.parseNothing=!0):((g=r==null?void 0:r.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),e=Ri.makeExplicit(e,t,o)??e,e=new nd(e);const a=t.parent&&oy(t.parent);(on(t)||Xo(t))&&a&&(e=Qa.makeFromEncoding(e,t)??e),t.transforms.length>0&&(e=cYe(e,t,o));const l=ije(t),u=nje(t);e=Ri.makeWithAncestors(e,{},{...l,...u},o)??e,on(t)&&(e=eg.parseAll(e,t),e=y1.parseAll(e,t)),(on(t)||Xo(t))&&(a||(e=Qa.makeFromEncoding(e,t)??e),e=Xa.makeFromEncoding(e,t)??e,e=rm.parseAllForSortIndex(e,t));const c=t.getDataName(Lt.Raw),d=new ir(e,c,Lt.Raw,i);if(n[c]=d,e=d,on(t)){const m=Ko.makeFromEncoding(e,t);m&&(e=m,G5(t)&&(e=new nd(e))),e=Ph.makeFromEncoding(e,t)??e,e=lu.makeFromEncoding(e,t)??e}on(t)&&(e=m1.make(e,t)??e);const h=t.getDataName(Lt.Main),f=new ir(e,h,Lt.Main,i);n[h]=f,e=f,on(t)&&Jze(t,f);let p=null;if(Xo(t)){const m=t.getName("facet");e=lYe(e,t.facet)??e,p=new ry(e,t,m,f.getSource()),n[m]=p}return{...t.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:f,facetRoot:p,ancestorParse:o}}class dYe extends K5{constructor(e,n,i,r){var s,o,a,l;super(e,"concat",n,i,r,e.resolve),(((o=(s=e.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=e.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&ee(C7e),this.children=this.getChildren(e).map((u,c)=>t$(u,this,this.getName(`concat_${c}`),void 0,r))}parseData(){this.component.data=wA(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of J(e.component.selection))this.component.selection[n]=e.component.selection[n]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return iA(e)?e.vconcat:O5(e)?e.hconcat:e.concat}parseLayoutSize(){sYe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){const e=W5(this);for(const n of this.children)e.push(...n.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((n,i)=>i.assembleSelectionData(n),e)}assembleMarks(){return this.children.map(e=>{const n=e.assembleTitle(),i=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return{...e!=null?{columns:e}:{},bounds:"full",align:"each"}}}function hYe(t){return t===!1||t===null}const fYe={disable:1,gridScale:1,scale:1,...yse,labelExpr:1,encode:1},aae=J(fYe);class Q5 extends ku{constructor(e={},n={},i=!1){super(),this.explicit=e,this.implicit=n,this.mainExtracted=i}clone(){return new Q5($e(this.explicit),$e(this.implicit),this.mainExtracted)}hasAxisPart(e){return e==="axis"?!0:e==="grid"||e==="title"?!!this.get(e):!hYe(this.get(e))}hasOrientSignalRef(){return we(this.explicit.orient)}}function pYe(t,e,n){const{encoding:i,config:r}=t,s=Rn(i[e])??Rn(i[_l(e)]),o=t.axis(e)||{},{format:a,formatType:l}=o;if(uf(l))return{text:Wo({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:r}),...n};if(a===void 0&&l===void 0&&r.customFormatTypes){if(Zg(s)==="quantitative"){if(em(s)&&s.stack==="normalize"&&r.normalizedNumberFormatType)return{text:Wo({fieldOrDatumDef:s,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Wo({fieldOrDatumDef:s,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(Zg(s)==="temporal"&&r.timeFormatType&&ie(s)&&!s.timeUnit)return{text:Wo({fieldOrDatumDef:s,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function gYe(t){return Rl.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[EYe(n,t)]),e),{})}const mYe={bottom:"top",top:"bottom",left:"right",right:"left"};function yYe(t){const{axes:e,resolve:n}=t.component,i={top:0,bottom:0,right:0,left:0};for(const r of t.children){r.parseAxesAndHeaders();for(const s of J(r.component.axes))n.axis[s]=V5(t.component.resolve,s),n.axis[s]==="shared"&&(e[s]=vYe(e[s],r.component.axes[s]),e[s]||(n.axis[s]="independent",delete e[s]))}for(const r of Rl){for(const s of t.children)if(s.component.axes[r]){if(n.axis[r]==="independent"){e[r]=(e[r]??[]).concat(s.component.axes[r]);for(const o of s.component.axes[r]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!we(a)){if(i[a]>0&&!l){const u=mYe[a];i[a]>i[u]&&o.set("orient",u,!1)}i[a]++}}}delete s.component.axes[r]}if(n.axis[r]==="independent"&&e[r]&&e[r].length>1)for(const[s,o]of(e[r]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function vYe(t,e){if(t){if(t.length!==e.length)return;const n=t.length;for(let i=0;i<n;i++){const r=t[i],s=e[i];if(!!r!=!!s)return;if(r&&s){const o=r.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;t[i]=CYe(r,s)}}}else return e.map(n=>n.clone());return t}function CYe(t,e){for(const n of aae){const i=Zc(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(r,s)=>{switch(n){case"title":return Sre(r,s);case"gridScale":return{explicit:r.explicit,value:gn(r.value,s.value)}}return sA(r,s,n,"axis")});t.setWithExplicit(n,i)}return t}function wYe(t,e,n,i,r){if(e==="disable")return n!==void 0;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(we(n.labelAngle)?n.labelAngle:p1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Roe(i,r))return!0}return t===n[e]}const SYe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function EYe(t,e){var y,v;let n=e.axis(t);const i=new Q5,r=Rn(e.encoding[t]),{mark:s,config:o}=e,a=(n==null?void 0:n.orient)||((y=o[t==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||lUe(t),l=e.getScaleComponent(t).get("type"),u=tUe(t,l,a,e.config),c=n!==void 0?!n:PM("disable",o.style,n==null?void 0:n.style,u).configValue;if(i.set("disable",c,n!==void 0),c)return i;n=n||{};const d=sUe(r,n,t,o.style,u),h=tse(n.formatType,r,l),f=ese(r,r.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:r,axis:n,channel:t,model:e,scaleType:l,orient:a,labelAngle:d,format:f,formatType:h,mark:s,config:o};for(const C of aae){const w=C in FV?FV[C](p):aV(C)?n[C]:void 0,E=w!==void 0,b=wYe(w,C,n,e,t);if(E&&b)i.set(C,w,b);else{const{configValue:S=void 0,configFrom:_=void 0}=aV(C)&&C!=="values"?PM(C,o.style,n.style,u):{},A=S!==void 0;E&&!A?i.set(C,w,b):(_!=="vgAxisConfig"||SYe.has(C)&&A||nw(S)||we(S))&&i.set(C,S,!1)}}const g=n.encoding??{},m=mse.reduce((C,w)=>{if(!i.hasAxisPart(w))return C;const E=Foe(g[w]??{},e),b=w==="labels"?pYe(e,t,E):E;return b!==void 0&&!Dt(b)&&(C[w]={update:b}),C},{});return Dt(m)||i.set("encode",m,!!n.encoding||n.labelAngle!==void 0),i}function bYe({encoding:t,size:e}){for(const n of Rl){const i=zr(n);ul(e[i])&&yc(t[n])&&(delete e[i],ee(Rre(i)))}return e}const xYe={vgMark:"arc",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._i("x",t,{defaultPos:"mid"}),..._i("y",t,{defaultPos:"mid"}),...ed(t,"radius"),...ed(t,"theta")})},_Ye={vgMark:"area",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...jx("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"}),...jx("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"}),...k5(t)})},RYe={vgMark:"rect",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ed(t,"x"),...ed(t,"y")})},TYe={vgMark:"shape",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape;return[{type:"geoshape",projection:t.projectionName(),...n&&ie(n)&&n.type===ty?{field:ue(n,{expr:"datum"})}:{}}]}},AYe={vgMark:"image",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ed(t,"x"),...ed(t,"y"),...L5(t,"url")})},DYe={vgMark:"line",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._i("x",t,{defaultPos:"mid"}),..._i("y",t,{defaultPos:"mid"}),...In("size",t,{vgChannel:"strokeWidth"}),...k5(t)})},OYe={vgMark:"trail",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._i("x",t,{defaultPos:"mid"}),..._i("y",t,{defaultPos:"mid"}),...In("size",t),...k5(t)})};function J5(t,e){const{config:n}=t;return{...mo(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._i("x",t,{defaultPos:"mid"}),..._i("y",t,{defaultPos:"mid"}),...In("size",t),...In("angle",t),...PYe(t,n,e)}}function PYe(t,e,n){return n?{shape:{value:n}}:In("shape",t)}const FYe={vgMark:"symbol",encodeEntry:t=>J5(t)},MYe={vgMark:"symbol",encodeEntry:t=>J5(t,"circle")},NYe={vgMark:"symbol",encodeEntry:t=>J5(t,"square")},LYe={vgMark:"rect",encodeEntry:t=>({...mo(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ed(t,"x"),...ed(t,"y")})},IYe={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:{...mo(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...jx("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...jx("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...In("size",t,{vgChannel:"strokeWidth"})}}},kYe={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return{...mo(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),..._i("x",t,{defaultPos:"mid"}),..._i("y",t,{defaultPos:"mid"}),...L5(t),...In("size",t,{vgChannel:"fontSize"}),...In("angle",t),...AV("align",GYe(t.markDef,n,e)),...AV("baseline",$Ye(t.markDef,n,e)),..._i("radius",t,{defaultPos:null}),..._i("theta",t,{defaultPos:null})}}};function GYe(t,e,n){if(Et("align",t,n)===void 0)return"center"}function $Ye(t,e,n){if(Et("baseline",t,n)===void 0)return"middle"}const HYe={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,i=n.orient,r=i==="horizontal"?"width":"height",s=i==="horizontal"?"height":"width";return{...mo(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),..._i("x",t,{defaultPos:"mid",vgChannel:"xc"}),..._i("y",t,{defaultPos:"mid",vgChannel:"yc"}),...In("size",t,{defaultValue:WYe(t),vgChannel:r}),[s]:zt(Et("thickness",n,e))}}};function WYe(t){const{config:e,markDef:n}=t,{orient:i}=n,r=i==="horizontal"?"width":"height",s=t.getScaleComponent(i==="horizontal"?"x":"y"),o=Et("size",n,e,{vgChannel:r})??e.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Od(a)&&ft(a.step)?a.step*3/4:zx(e.view,r)*3/4}}const cS={arc:xYe,area:_Ye,bar:RYe,circle:MYe,geoshape:TYe,image:AYe,line:DYe,point:FYe,rect:LYe,rule:IYe,square:NYe,text:kYe,tick:HYe,trail:OYe};function VYe(t){if(nt([YT,UT,XWe],t.mark)){const e=Sse(t.mark,t.encoding);if(e.length>0)return BYe(t,e)}else if(t.mark===jT){const e=vM.some(n=>Et(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return zYe(t)}return Z5(t)}const qV="faceted_path_";function BYe(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:qV+t.requestDataName(Lt.Main),data:t.requestDataName(Lt.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Z5(t,{fromPrefix:qV})}]}const KV="stack_group_";function zYe(t){var u;const[e]=Z5(t,{fromPrefix:KV}),n=t.scaleName(t.stack.fieldChannel),i=(c={})=>t.vgField(t.stack.fieldChannel,c),r=(c,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${c}(${h.map(f=>`scale('${n}',${f})`).join(",")})`};let s,o;t.stack.fieldChannel==="x"?(s={...Yg(e.encode.update,["y","yc","y2","height",...vM]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update={...Nr(e.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Yg(e.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update={...Nr(e.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of vM){const d=Su(c,t.markDef,t.config);e.encode.update[c]?(s[c]=e.encode.update[c],delete e.encode.update[c]):d&&(s[c]=zt(d)),d&&(e.encode.update[c]={value:0})}const a=[];if(((u=t.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of t.stack.groupbyChannels){const d=t.fieldDef(c),h=ue(d);h&&a.push(h),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(ue(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(e.encode.update[d])return{...c,[d]:e.encode.update[d]};{const h=Su(d,t.markDef,t.config);return h!==void 0?{...c,[d]:zt(h)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(Lt.Main),name:KV+t.requestDataName(Lt.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[e]}]}]}function UYe(t){var a;const{encoding:e,stack:n,mark:i,markDef:r,config:s}=t,o=e.order;if(!(!j(o)&&ra(o)&&mM(o.value)||!o&&mM(Et("order",r,s)))){if((j(o)||ie(o))&&!n)return vre(o,{expr:"datum"});if(Pd(i)){const l=r.orient==="horizontal"?"y":"x",u=e[l];if(ie(u)){const c=u.sort;if(j(c))return{field:ue(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(Ka(c))return{field:ue({aggregate:w5(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(ise(c)){const d=t.fieldDef(c.encoding);return{field:ue(d,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ue(u,{binSuffix:(a=t.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Z5(t,e={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:s}=t,o=gn(i.clip,jYe(t),YYe(t)),a=mre(i),l=r.key,u=UYe(t),c=qYe(t),d=Et("aria",i,s),h=cS[n].postEncodingTransform?cS[n].postEncodingTransform(t):null;return[{name:t.getName("marks"),type:cS[n].vgMark,...o?{clip:!0}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:e.fromPrefix+t.requestDataName(Lt.Main)},encode:{update:cS[n].encodeEntry(t)},...h?{transform:h}:{}}]}function jYe(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return e!=null&&e.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function YYe(t){const e=t.component.projection;return e&&!e.isFit?!0:void 0}function qYe(t){if(!t.component.selection)return null;const e=J(t.component.selection).length;let n=e,i=t.parent;for(;i&&n===0;)n=J(i.component.selection).length,i=i.parent;return n?{interactive:e>0||t.mark==="geoshape"||!!t.encoding.tooltip}:null}class lae extends iae{constructor(e,n,i,r={},s){super(e,"unit",n,i,s,void 0,uV(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=al(e.mark)?{...e.mark}:{type:e.mark},a=o.type;o.filled===void 0&&(o.filled=FBe(o,s,{graticule:e.data&&M5(e.data)}));const l=this.encoding=IVe(e.encoding||{},a,o.filled,s);this.markDef=Vse(o,l,s),this.size=bYe({encoding:l,size:uV(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=Wse(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter(u=>A5(u))}get hasProjection(){const{encoding:e}=this,n=this.mark===Kre,i=e&&N8e.some(r=>We(e[r]));return n||i}scaleDomain(e){const n=this.specifiedScales[e];return n?n.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,n){return WT.reduce((i,r)=>{const s=Rn(n[r]);return s&&(i[r]=this.initScale(s.scale??{})),i},{})}initScale(e){const{domain:n,range:i}=e,r=xr(e);return j(n)&&(r.domain=n.map(us)),j(i)&&(r.range=i.map(us)),r}initAxes(e){return Rl.reduce((n,i)=>{const r=e[i];if(We(r)||i===Qt&&We(e.x2)||i===Un&&We(e.y2)){const s=We(r)?r.axis:void 0;n[i]=s&&this.initAxis({...s})}return n},{})}initAxis(e){const n=J(e),i={};for(const r of n){const s=e[r];i[r]=nw(s)?gre(s):us(s)}return i}initLegends(e){return B8e.reduce((n,i)=>{const r=Rn(e[i]);if(r&&U8e(i)){const s=r.legend;n[i]=s&&xr(s)}return n},{})}parseData(){this.component.data=wA(this)}parseLayoutSize(){oYe(this)}parseSelections(){this.component.selection=Qze(this,this.selection)}parseMarkGroup(){this.component.mark=VYe(this)}parseAxesAndHeaders(){this.component.axes=gYe(this)}assembleSelectionTopLevelSignals(e){return Cze(this,e)}assembleSignals(){return[...boe(this),...yze(this,[])]}assembleSelectionData(e){return wze(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return W5(this)}assembleMarks(){let e=this.component.mark??[];return(!this.parent||!oy(this.parent))&&(e=toe(this,e)),e.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};return e!==void 0?e:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Dh(this.encoding,e)}fieldDef(e){const n=this.encoding[e];return ll(n)}typedFieldDef(e){const n=this.fieldDef(e);return or(n)?n:null}}class e$ extends K5{constructor(e,n,i,r,s){super(e,"layer",n,i,s,e.resolve,e.view);const o={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map((a,l)=>{if(rA(a))return new e$(a,this,this.getName(`layer_${l}`),o,s);if(Iu(a))return new lae(a,this,this.getName(`layer_${l}`),o,s);throw new Error(j9(a))})}parseData(){this.component.data=wA(this);for(const e of this.children)e.parseData()}parseLayoutSize(){rYe(this)}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of J(e.component.selection))this.component.selection[n]=e.component.selection[n]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){yYe(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleSignals()),boe(this))}assembleLayoutSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleLayoutSignals()),W5(this))}assembleSelectionData(e){return this.children.reduce((n,i)=>i.assembleSelectionData(n),e)}assembleGroupStyle(){const e=new Set;for(const i of this.children)for(const r of de(i.assembleGroupStyle()))e.add(r);const n=Array.from(e);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const n of this.children)if(e=n.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return Sze(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,n)=>e.concat(n.assembleLegends()),Hoe(this))}}function t$(t,e,n,i,r){if(XT(t))return new q0(t,e,n,r);if(rA(t))return new e$(t,e,n,i,r);if(Iu(t))return new lae(t,e,n,i,r);if(oBe(t))return new dYe(t,e,n,r);throw new Error(j9(t))}function KYe(t,e={}){e.logger&&dWe(e.logger),e.fieldTitle&&fse(e.fieldTitle);try{const n=Hse(Gm(e.config,t.config)),i=Kse(t,n),r=t$(i,null,"",void 0,n);return r.parse(),Cje(r.component.data,r),{spec:QYe(r,XYe(t,i.autosize,n,r),t.datasets,t.usermeta),normalized:i}}finally{e.logger&&hWe(),e.fieldTitle&&TVe()}}function XYe(t,e,n,i){const r=i.component.layoutSize.get("width"),s=i.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},i.hasAxisOrientSignalRef()&&(e.resize=!0)):ce(e)&&(e={type:e}),r&&s&&fze(e.type)){if(r==="step"&&s==="step")ee(YW()),e.type="pad";else if(r==="step"||s==="step"){const o=r==="step"?"width":"height";ee(YW(HT(o)));const a=o==="width"?"height":"width";e.type=pze(a)}}return{...J(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e},...SV(n,!1),...SV(t,!0)}}function QYe(t,e,n={},i){const r=t.config?wBe(t.config):void 0,s=[].concat(t.assembleSelectionData([]),eYe(t.component.data,n)),o=t.assembleProjections(),a=t.assembleTitle(),l=t.assembleGroupStyle(),u=t.assembleGroupEncodeEntry(!0);let c=t.assembleLayoutSignals();c=c.filter(f=>(f.name==="width"||f.name==="height")&&f.value!==void 0?(e[f.name]=+f.value,!1):!0);const{params:d,...h}=e;return{$schema:"https://vega.github.io/schema/vega/v5.json",...t.description?{description:t.description}:{},...h,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:s,...o.length>0?{projections:o}:{},...t.assembleGroup([...c,...t.assembleSelectionTopLevelSignals([]),...Ise(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const JYe=A8e.version,ZYe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:qg,accessPathWithDatum:I9,compile:KYe,contains:nt,deepEqual:gs,deleteNestedProperty:Nx,duplicate:$e,entries:Qc,every:M9,fieldIntersection:L9,flatAccessWithDatum:qie,getFirstDefined:gn,hasIntersection:N9,hash:tt,internalField:Qie,isBoolean:f1,isEmpty:Dt,isEqual:O8e,isInternalField:Jie,isNullOrFalse:mM,isNumeric:NT,keys:J,logicalExpr:j0,mergeDeep:jie,never:Uie,normalize:Kse,normalizeAngle:p1,omit:Nr,pick:Yg,prefixGenerator:yM,removePathFromField:k9,replaceAll:rf,replacePathInField:lo,resetIdCounter:F8e,setEqual:Yie,some:nf,stringify:Ot,titleCase:YC,unique:Ha,uniqueId:Xie,vals:ii,varName:Kt,version:JYe},Symbol.toStringTag,{value:"Module"}));function uae(t){const[e,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}}var eqe="vega-themes",tqe="2.14.0",nqe="Themes for stylized Vega and Vega-Lite visualizations.",iqe=["vega","vega-lite","themes","style"],rqe="BSD-3-Clause",sqe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},oqe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],aqe="build/vega-themes.js",n$="build/vega-themes.module.js",lqe="build/vega-themes.min.js",uqe="build/vega-themes.min.js",cqe="build/vega-themes.module.d.ts",dqe={type:"git",url:"https://github.com/vega/vega-themes.git"},hqe=["src","build"],fqe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},pqe={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},gqe={vega:"*","vega-lite":"*"},mqe={},yqe={name:eqe,version:tqe,description:nqe,keywords:iqe,license:rqe,author:sqe,contributors:oqe,main:aqe,module:n$,unpkg:lqe,jsdelivr:uqe,types:cqe,repository:dqe,files:hqe,scripts:fqe,devDependencies:pqe,peerDependencies:gqe,dependencies:mqe};const lp="#fff",XV="#888",vqe={background:"#333",view:{stroke:XV},title:{color:lp,subtitleColor:lp},style:{"guide-label":{fill:lp},"guide-title":{fill:lp}},axis:{domainColor:lp,gridColor:XV,tickColor:lp}},Id="#4572a7",Cqe={background:"#fff",arc:{fill:Id},area:{fill:Id},line:{stroke:Id,strokeWidth:2},path:{stroke:Id},rect:{fill:Id},shape:{stroke:Id},symbol:{fill:Id,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},kd="#30a2da",kO="#cbcbcb",wqe="#999",Sqe="#333",QV="#f0f0f0",JV="#333",Eqe={arc:{fill:kd},area:{fill:kd},axis:{domainColor:kO,grid:!0,gridColor:kO,gridWidth:1,labelColor:wqe,labelFontSize:10,titleColor:Sqe,tickColor:kO,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:QV,group:{fill:QV},legend:{labelColor:JV,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:JV,titleFontSize:14,titlePadding:10},line:{stroke:kd,strokeWidth:2},path:{stroke:kd,strokeWidth:.5},rect:{fill:kd},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:kd},bar:{binSpacing:2,fill:kd,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Gd="#000",bqe={group:{fill:"#e5e5e5"},arc:{fill:Gd},area:{fill:Gd},line:{stroke:Gd},path:{stroke:Gd},rect:{fill:Gd},shape:{stroke:Gd},symbol:{fill:Gd,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},xqe=22,_qe="normal",ZV="Benton Gothic, sans-serif",eB=11.5,Rqe="normal",$d="#82c6df",GO="Benton Gothic Bold, sans-serif",tB="normal",nB=13,$y={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Tqe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:GO,fontSize:xqe,fontWeight:_qe},arc:{fill:$d},area:{fill:$d},line:{stroke:$d,strokeWidth:2},path:{stroke:$d},rect:{fill:$d},shape:{stroke:$d},symbol:{fill:$d,size:30},axis:{labelFont:ZV,labelFontSize:eB,labelFontWeight:Rqe,titleFont:GO,titleFontSize:nB,titleFontWeight:tB},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:ZV,labelFontSize:eB,symbolType:"square",titleFont:GO,titleFontSize:nB,titleFontWeight:tB},range:{category:$y["category-6"],diverging:$y["fireandice-6"],heatmap:$y["fire-7"],ordinal:$y["fire-7"],ramp:$y["fire-7"]}},Hd="#ab5787",dS="#979797",Aqe={background:"#f9f9f9",arc:{fill:Hd},area:{fill:Hd},line:{stroke:Hd},path:{stroke:Hd},rect:{fill:Hd},shape:{stroke:Hd},symbol:{fill:Hd,size:30},axis:{domainColor:dS,domainWidth:.5,gridWidth:.2,labelColor:dS,tickColor:dS,tickWidth:.2,titleColor:dS},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Wd="#3e5c69",Dqe={background:"#fff",arc:{fill:Wd},area:{fill:Wd},line:{stroke:Wd},path:{stroke:Wd},rect:{fill:Wd},shape:{stroke:Wd},symbol:{fill:Wd},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ls="#1696d2",iB="#000000",Oqe="#FFFFFF",hS="Lato",$O="Lato",Pqe="Lato",Fqe="#DEDDDD",Mqe=18,Hy={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Nqe={background:Oqe,title:{anchor:"start",fontSize:Mqe,font:hS},axisX:{domain:!0,domainColor:iB,domainWidth:1,grid:!1,labelFontSize:12,labelFont:$O,labelAngle:0,tickColor:iB,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:hS},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Fqe,gridWidth:1,labelFontSize:12,labelFont:$O,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:hS,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:$O,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:hS,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Hy["six-groups-cat-1"],diverging:Hy["diverging-colors"],heatmap:Hy["diverging-colors"],ordinal:Hy["six-groups-seq"],ramp:Hy["shades-blue"]},area:{fill:Ls},rect:{fill:Ls},line:{color:Ls,stroke:Ls,strokeWidth:5},trail:{color:Ls,stroke:Ls,strokeWidth:0,size:1},path:{stroke:Ls,strokeWidth:.5},point:{filled:!0},text:{font:Pqe,color:Ls,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ls,stroke:null}},arc:{fill:Ls},shape:{stroke:Ls},symbol:{fill:Ls,size:30}},Vd="#3366CC",rB="#ccc",fS="Arial, sans-serif",Lqe={arc:{fill:Vd},area:{fill:Vd},path:{stroke:Vd},rect:{fill:Vd},shape:{stroke:Vd},symbol:{stroke:Vd},circle:{fill:Vd},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:fS,fontSize:12},"guide-title":{font:fS,fontSize:12},"group-title":{font:fS,fontSize:12}},title:{font:fS,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:rB,tickColor:rB,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},i$=t=>t*(1/3+1),sB=i$(9),oB=i$(10),aB=i$(12),Wy="Segoe UI",lB="wf_standard-font, helvetica, arial, sans-serif",uB="#252423",Vy="#605E5C",cB="transparent",Iqe="#C8C6C4",So="#118DFF",kqe="#12239E",Gqe="#E66C37",$qe="#6B007B",Hqe="#E044A7",Wqe="#744EC2",Vqe="#D9B300",Bqe="#D64550",cae=So,dae="#DEEFFF",dB=[dae,cae],zqe=[dae,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",cae],Uqe={view:{stroke:cB},background:cB,font:Wy,header:{titleFont:lB,titleFontSize:aB,titleColor:uB,labelFont:Wy,labelFontSize:oB,labelColor:Vy},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Vy,labelFontSize:sB,titleFont:lB,titleColor:uB,titleFontSize:aB,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Iqe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:So},line:{stroke:So,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Wy,fontSize:sB,fill:Vy},arc:{fill:So},area:{fill:So,line:!0,opacity:.6},path:{stroke:So},rect:{fill:So},point:{fill:So,filled:!0,size:75},shape:{stroke:So},symbol:{fill:So,strokeWidth:1.5,size:50},legend:{titleFont:Wy,titleFontWeight:"bold",titleColor:Vy,labelFont:Wy,labelFontSize:oB,labelColor:Vy,symbolType:"circle",symbolSize:75},range:{category:[So,kqe,Gqe,$qe,Hqe,Wqe,Vqe,Bqe],diverging:dB,heatmap:dB,ordinal:zqe}},HO='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',hB=400,jqe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Yqe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function SA({type:t,background:e}){const n=t==="dark"?"#161616":"#ffffff",i=t==="dark"?"#f4f4f4":"#161616",r=t==="dark"?jqe:Yqe,s=t==="dark"?"#d4bbff":"#6929c4";return{background:e,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:HO,fontWeight:600},axis:{labelColor:i,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:i,labelAngle:0},style:{"guide-label":{font:HO,fill:i,fontWeight:hB},"guide-title":{font:HO,fill:i,fontWeight:hB}},range:{category:r,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const qqe=SA({type:"light",background:"#ffffff"}),Kqe=SA({type:"light",background:"#f4f4f4"}),Xqe=SA({type:"dark",background:"#262626"}),Qqe=SA({type:"dark",background:"#161616"}),Jqe=yqe.version,Zqe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Kqe,carbong100:Qqe,carbong90:Xqe,carbonwhite:qqe,dark:vqe,excel:Cqe,fivethirtyeight:Eqe,ggplot2:bqe,googlecharts:Lqe,latimes:Tqe,powerbi:Uqe,quartz:Aqe,urbaninstitute:Nqe,version:Jqe,vox:Dqe},Symbol.toStringTag,{value:"Module"}));function C1(t){"@babel/helpers - typeof";return C1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C1(t)}function eKe(t,e){if(C1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(C1(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tKe(t){var e=eKe(t,"string");return C1(e)==="symbol"?e:String(e)}function nKe(t,e,n){return e=tKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iKe(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function rKe(t,e){if(t==null)return{};var n=iKe(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}const sKe=["title","image"];function oKe(t,e,n){if(j(t))return`[${t.map(i=>e(ce(i)?i:fB(i,n))).join(", ")}]`;if(he(t)){let i="";const r=t,{title:s,image:o}=r,a=rKe(r,sKe);s&&(i+=`<h2>${e(s)}</h2>`),o&&(i+=`<img src="${e(o)}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(he(c)&&(c=fB(c,n)),i+=`<tr><td class="key">${e(u)}:</td><td class="value">${e(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return e(t)}function aKe(t){const e=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=e.indexOf(this)+1;return e.length=r,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}function fB(t,e){return JSON.stringify(t,aKe(e))}var lKe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const hae="vg-tooltip-element",uKe={offsetX:10,offsetY:10,id:hae,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:cKe,maxDepth:2,formatTooltip:oKe};function cKe(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function dKe(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return lKe.toString().replace(hae,t)}function hKe(t,e,n,i){let r=t.clientX+n;r+e.width>window.innerWidth&&(r=+t.clientX-n-e.width);let s=t.clientY+i;return s+e.height>window.innerHeight&&(s=+t.clientY-i-e.height),{x:r,y:s}}function pB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function gB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pB(Object(n),!0).forEach(function(i){nKe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pB(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}class fKe{constructor(e){this.options=gB(gB({},uKe),e);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=dKe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(e,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=hKe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}function w1(t){"@babel/helpers - typeof";return w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w1(t)}function pKe(t,e){if(w1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(w1(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gKe(t){var e=pKe(t,"string");return w1(e)==="symbol"?e:String(e)}function mKe(t,e,n){return e=gKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yKe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WO,mB;function vKe(){return mB||(mB=1,WO=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),WO}var CKe=yt;yt.Node=ff;yt.create=yt;function yt(t){var e=this;if(e instanceof yt||(e=new yt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(r){e.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}yt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};yt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};yt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};yt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)SKe(this,arguments[t]);return this.length};yt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)EKe(this,arguments[t]);return this.length};yt.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};yt.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};yt.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,i=0;n!==null;i++)t.call(e,n.value,i,this),n=n.next};yt.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,i=this.length-1;n!==null;i--)t.call(e,n.value,i,this),n=n.prev};yt.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};yt.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};yt.prototype.map=function(t,e){e=e||this;for(var n=new yt,i=this.head;i!==null;)n.push(t.call(e,i.value,this)),i=i.next;return n};yt.prototype.mapReverse=function(t,e){e=e||this;for(var n=new yt,i=this.tail;i!==null;)n.push(t.call(e,i.value,this)),i=i.prev;return n};yt.prototype.reduce=function(t,e){var n,i=this.head;if(arguments.length>1)n=e;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=t(n,i.value,r),i=i.next;return n};yt.prototype.reduceReverse=function(t,e){var n,i=this.tail;if(arguments.length>1)n=e;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=t(n,i.value,r),i=i.prev;return n};yt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};yt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};yt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new yt;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,r=this.head;r!==null&&i<t;i++)r=r.next;for(;r!==null&&i<e;i++,r=r.next)n.push(r.value);return n};yt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new yt;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,r=this.tail;r!==null&&i>e;i--)r=r.prev;for(;r!==null&&i>t;i--,r=r.prev)n.push(r.value);return n};yt.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;r!==null&&i<t;i++)r=r.next;for(var s=[],i=0;r&&i<e;i++)s.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=wKe(this,r,n[i]);return s};yt.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=e,this.tail=t,this};function wKe(t,e,n){var i=e===t.head?new ff(n,null,e,t):new ff(n,e,e.next,t);return i.next===null&&(t.tail=i),i.prev===null&&(t.head=i),t.length++,i}function SKe(t,e){t.tail=new ff(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function EKe(t,e){t.head=new ff(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ff(t,e,n,i){if(!(this instanceof ff))return new ff(t,e,n,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{vKe()(yt)}catch{}const bKe=CKe,ih=Symbol("max"),$l=Symbol("length"),up=Symbol("lengthCalculator"),K0=Symbol("allowStale"),ph=Symbol("maxAge"),Ll=Symbol("dispose"),yB=Symbol("noDisposeOnSet"),Pn=Symbol("lruList"),bo=Symbol("cache"),fae=Symbol("updateAgeOnGet"),VO=()=>1;class xKe{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[ih]=e.max||1/0;const n=e.length||VO;if(this[up]=typeof n!="function"?VO:n,this[K0]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[ph]=e.maxAge||0,this[Ll]=e.dispose,this[yB]=e.noDisposeOnSet||!1,this[fae]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[ih]=e||1/0,By(this)}get max(){return this[ih]}set allowStale(e){this[K0]=!!e}get allowStale(){return this[K0]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[ph]=e,By(this)}get maxAge(){return this[ph]}set lengthCalculator(e){typeof e!="function"&&(e=VO),e!==this[up]&&(this[up]=e,this[$l]=0,this[Pn].forEach(n=>{n.length=this[up](n.value,n.key),this[$l]+=n.length})),By(this)}get lengthCalculator(){return this[up]}get length(){return this[$l]}get itemCount(){return this[Pn].length}rforEach(e,n){n=n||this;for(let i=this[Pn].tail;i!==null;){const r=i.prev;vB(this,e,i,n),i=r}}forEach(e,n){n=n||this;for(let i=this[Pn].head;i!==null;){const r=i.next;vB(this,e,i,n),i=r}}keys(){return this[Pn].toArray().map(e=>e.key)}values(){return this[Pn].toArray().map(e=>e.value)}reset(){this[Ll]&&this[Pn]&&this[Pn].length&&this[Pn].forEach(e=>this[Ll](e.key,e.value)),this[bo]=new Map,this[Pn]=new bKe,this[$l]=0}dump(){return this[Pn].map(e=>Xx(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Pn]}set(e,n,i){if(i=i||this[ph],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,s=this[up](n,e);if(this[bo].has(e)){if(s>this[ih])return tg(this,this[bo].get(e)),!1;const l=this[bo].get(e).value;return this[Ll]&&(this[yB]||this[Ll](e,l.value)),l.now=r,l.maxAge=i,l.value=n,this[$l]+=s-l.length,l.length=s,this.get(e),By(this),!0}const o=new _Ke(e,n,s,r,i);return o.length>this[ih]?(this[Ll]&&this[Ll](e,n),!1):(this[$l]+=o.length,this[Pn].unshift(o),this[bo].set(e,this[Pn].head),By(this),!0)}has(e){if(!this[bo].has(e))return!1;const n=this[bo].get(e).value;return!Xx(this,n)}get(e){return BO(this,e,!0)}peek(e){return BO(this,e,!1)}pop(){const e=this[Pn].tail;return e?(tg(this,e),e.value):null}del(e){tg(this,this[bo].get(e))}load(e){this.reset();const n=Date.now();for(let i=e.length-1;i>=0;i--){const r=e[i],s=r.e||0;if(s===0)this.set(r.k,r.v);else{const o=s-n;o>0&&this.set(r.k,r.v,o)}}}prune(){this[bo].forEach((e,n)=>BO(this,n,!1))}}const BO=(t,e,n)=>{const i=t[bo].get(e);if(i){const r=i.value;if(Xx(t,r)){if(tg(t,i),!t[K0])return}else n&&(t[fae]&&(i.value.now=Date.now()),t[Pn].unshiftNode(i));return r.value}},Xx=(t,e)=>{if(!e||!e.maxAge&&!t[ph])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[ph]&&n>t[ph]},By=t=>{if(t[$l]>t[ih])for(let e=t[Pn].tail;t[$l]>t[ih]&&e!==null;){const n=e.prev;tg(t,e),e=n}},tg=(t,e)=>{if(e){const n=e.value;t[Ll]&&t[Ll](n.key,n.value),t[$l]-=n.length,t[bo].delete(n.key),t[Pn].removeNode(e)}};class _Ke{constructor(e,n,i,r,s){this.key=e,this.value=n,this.length=i,this.now=r,this.maxAge=s||0}}const vB=(t,e,n,i)=>{let r=n.value;Xx(t,r)&&(tg(t,n),t[K0]||(r=void 0)),r&&e.call(i,r.value,r.key,t)};var RKe=xKe;const TKe=Object.freeze({loose:!0}),AKe=Object.freeze({}),DKe=t=>t?typeof t!="object"?TKe:t:AKe;var r$=DKe,HM={exports:{}};const OKe="2.0.0",pae=256,PKe=Number.MAX_SAFE_INTEGER||9007199254740991,FKe=16,MKe=pae-6,NKe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var s$={MAX_LENGTH:pae,MAX_SAFE_COMPONENT_LENGTH:FKe,MAX_SAFE_BUILD_LENGTH:MKe,MAX_SAFE_INTEGER:PKe,RELEASE_TYPES:NKe,SEMVER_SPEC_VERSION:OKe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const LKe=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var EA=LKe;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=s$,s=EA;e=t.exports={};const o=e.re=[],a=e.safeRe=[],l=e.src=[],u=e.t={};let c=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",r],[d,i]],f=g=>{for(const[m,y]of h)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const v=f(m),C=c++;s(g,C,m),u[g]=C,l[C]=m,o[C]=new RegExp(m,y?"g":void 0),a[C]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(HM,HM.exports);var o$=HM.exports;const CB=/^[0-9]+$/,gae=(t,e)=>{const n=CB.test(t),i=CB.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1},IKe=(t,e)=>gae(e,t);var kKe={compareIdentifiers:gae,rcompareIdentifiers:IKe};const pS=EA,{MAX_LENGTH:wB,MAX_SAFE_INTEGER:gS}=s$,{safeRe:SB,t:EB}=o$,GKe=r$,{compareIdentifiers:cp}=kKe;let $Ke=class _a{constructor(e,n){if(n=GKe(n),e instanceof _a){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>wB)throw new TypeError(`version is longer than ${wB} characters`);pS("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=e.trim().match(n.loose?SB[EB.LOOSE]:SB[EB.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>gS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gS||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const s=+r;if(s>=0&&s<gS)return s}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(pS("SemVer.compare",this.version,this.options,e),!(e instanceof _a)){if(typeof e=="string"&&e===this.version)return 0;e=new _a(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof _a||(e=new _a(e,this.options)),cp(this.major,e.major)||cp(this.minor,e.minor)||cp(this.patch,e.patch)}comparePre(e){if(e instanceof _a||(e=new _a(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=e.prerelease[n];if(pS("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return cp(i,r)}while(++n)}compareBuild(e){e instanceof _a||(e=new _a(e,this.options));let n=0;do{const i=this.build[n],r=e.build[n];if(pS("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return cp(i,r)}while(++n)}inc(e,n,i){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let s=[n,r];i===!1&&(s=[n]),cp(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var a$=$Ke;const bB=a$,HKe=(t,e,n)=>new bB(t,n).compare(new bB(e,n));var ay=HKe;const WKe=ay,VKe=(t,e,n)=>WKe(t,e,n)===0;var BKe=VKe;const zKe=ay,UKe=(t,e,n)=>zKe(t,e,n)!==0;var jKe=UKe;const YKe=ay,qKe=(t,e,n)=>YKe(t,e,n)>0;var KKe=qKe;const XKe=ay,QKe=(t,e,n)=>XKe(t,e,n)>=0;var JKe=QKe;const ZKe=ay,eXe=(t,e,n)=>ZKe(t,e,n)<0;var tXe=eXe;const nXe=ay,iXe=(t,e,n)=>nXe(t,e,n)<=0;var rXe=iXe;const sXe=BKe,oXe=jKe,aXe=KKe,lXe=JKe,uXe=tXe,cXe=rXe,dXe=(t,e,n,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return sXe(t,n,i);case"!=":return oXe(t,n,i);case">":return aXe(t,n,i);case">=":return lXe(t,n,i);case"<":return uXe(t,n,i);case"<=":return cXe(t,n,i);default:throw new TypeError(`Invalid operator: ${e}`)}};var hXe=dXe,zO,xB;function fXe(){if(xB)return zO;xB=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(c,d){if(d=n(d),c instanceof e){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],h=c.match(d);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new a(h[2],this.options.loose):this.semver=t}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===t||c===t)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}zO=e;const n=r$,{safeRe:i,t:r}=o$,s=hXe,o=EA,a=a$,l=mae();return zO}var UO,_B;function mae(){if(_B)return UO;_B=1;class t{constructor(M,F){if(F=i(F),M instanceof t)return M.loose===!!F.loose&&M.includePrerelease===!!F.includePrerelease?M:new t(M.raw,F);if(M instanceof r)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(H=>!p(H[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&g(H[0])){this.set=[H];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const I=((this.options.includePrerelease&&h)|(this.options.loose&&f))+":"+M,H=n.get(I);if(H)return H;const N=this.options.loose,G=N?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];M=M.replace(G,P(this.options.includePrerelease)),s("hyphen replace",M),M=M.replace(a[l.COMPARATORTRIM],u),s("comparator trim",M),M=M.replace(a[l.TILDETRIM],c),s("tilde trim",M),M=M.replace(a[l.CARETTRIM],d),s("caret trim",M);let W=M.split(" ").map(xe=>y(xe,this.options)).join(" ").split(/\s+/).map(xe=>D(xe,this.options));N&&(W=W.filter(xe=>(s("loose invalid filter",xe,this.options),!!xe.match(a[l.COMPARATORLOOSE])))),s("range list",W);const X=new Map,ne=W.map(xe=>new r(xe,this.options));for(const xe of ne){if(p(xe))return[xe];X.set(xe.value,xe)}X.size>1&&X.has("")&&X.delete("");const Se=[...X.values()];return n.set(I,Se),Se}intersects(M,F){if(!(M instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>m(I,F)&&M.set.some(H=>m(H,F)&&I.every(N=>H.every(G=>N.intersects(G,F)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new o(M,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(L(this.set[F],M,this.options))return!0;return!1}}UO=t;const e=RKe,n=new e({max:1e3}),i=r$,r=fXe(),s=EA,o=a$,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=o$,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:f}=s$,p=O=>O.value==="<0.0.0-0",g=O=>O.value==="",m=(O,M)=>{let F=!0;const I=O.slice();let H=I.pop();for(;F&&I.length;)F=I.every(N=>H.intersects(N,M)),H=I.pop();return F},y=(O,M)=>(s("comp",O,M),O=E(O,M),s("caret",O),O=C(O,M),s("tildes",O),O=S(O,M),s("xrange",O),O=A(O,M),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",C=(O,M)=>O.trim().split(/\s+/).map(F=>w(F,M)).join(" "),w=(O,M)=>{const F=M.loose?a[l.TILDELOOSE]:a[l.TILDE];return O.replace(F,(I,H,N,G,W)=>{s("tilde",O,I,H,N,G,W);let X;return v(H)?X="":v(N)?X=`>=${H}.0.0 <${+H+1}.0.0-0`:v(G)?X=`>=${H}.${N}.0 <${H}.${+N+1}.0-0`:W?(s("replaceTilde pr",W),X=`>=${H}.${N}.${G}-${W} <${H}.${+N+1}.0-0`):X=`>=${H}.${N}.${G} <${H}.${+N+1}.0-0`,s("tilde return",X),X})},E=(O,M)=>O.trim().split(/\s+/).map(F=>b(F,M)).join(" "),b=(O,M)=>{s("caret",O,M);const F=M.loose?a[l.CARETLOOSE]:a[l.CARET],I=M.includePrerelease?"-0":"";return O.replace(F,(H,N,G,W,X)=>{s("caret",O,H,N,G,W,X);let ne;return v(N)?ne="":v(G)?ne=`>=${N}.0.0${I} <${+N+1}.0.0-0`:v(W)?N==="0"?ne=`>=${N}.${G}.0${I} <${N}.${+G+1}.0-0`:ne=`>=${N}.${G}.0${I} <${+N+1}.0.0-0`:X?(s("replaceCaret pr",X),N==="0"?G==="0"?ne=`>=${N}.${G}.${W}-${X} <${N}.${G}.${+W+1}-0`:ne=`>=${N}.${G}.${W}-${X} <${N}.${+G+1}.0-0`:ne=`>=${N}.${G}.${W}-${X} <${+N+1}.0.0-0`):(s("no pr"),N==="0"?G==="0"?ne=`>=${N}.${G}.${W}${I} <${N}.${G}.${+W+1}-0`:ne=`>=${N}.${G}.${W}${I} <${N}.${+G+1}.0-0`:ne=`>=${N}.${G}.${W} <${+N+1}.0.0-0`),s("caret return",ne),ne})},S=(O,M)=>(s("replaceXRanges",O,M),O.split(/\s+/).map(F=>_(F,M)).join(" ")),_=(O,M)=>{O=O.trim();const F=M.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return O.replace(F,(I,H,N,G,W,X)=>{s("xRange",O,I,H,N,G,W,X);const ne=v(N),Se=ne||v(G),xe=Se||v(W),rt=xe;return H==="="&&rt&&(H=""),X=M.includePrerelease?"-0":"",ne?H===">"||H==="<"?I="<0.0.0-0":I="*":H&&rt?(Se&&(G=0),W=0,H===">"?(H=">=",Se?(N=+N+1,G=0,W=0):(G=+G+1,W=0)):H==="<="&&(H="<",Se?N=+N+1:G=+G+1),H==="<"&&(X="-0"),I=`${H+N}.${G}.${W}${X}`):Se?I=`>=${N}.0.0${X} <${+N+1}.0.0-0`:xe&&(I=`>=${N}.${G}.0${X} <${N}.${+G+1}.0-0`),s("xRange return",I),I})},A=(O,M)=>(s("replaceStars",O,M),O.trim().replace(a[l.STAR],"")),D=(O,M)=>(s("replaceGTE0",O,M),O.trim().replace(a[M.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=O=>(M,F,I,H,N,G,W,X,ne,Se,xe,rt,cn)=>(v(I)?F="":v(H)?F=`>=${I}.0.0${O?"-0":""}`:v(N)?F=`>=${I}.${H}.0${O?"-0":""}`:G?F=`>=${F}`:F=`>=${F}${O?"-0":""}`,v(ne)?X="":v(Se)?X=`<${+ne+1}.0.0-0`:v(xe)?X=`<${ne}.${+Se+1}.0-0`:rt?X=`<=${ne}.${Se}.${xe}-${rt}`:O?X=`<${ne}.${Se}.${+xe+1}-0`:X=`<=${X}`,`${F} ${X}`.trim()),L=(O,M,F)=>{for(let I=0;I<O.length;I++)if(!O[I].test(M))return!1;if(M.prerelease.length&&!F.includePrerelease){for(let I=0;I<O.length;I++)if(s(O[I].semver),O[I].semver!==r.ANY&&O[I].semver.prerelease.length>0){const H=O[I].semver;if(H.major===M.major&&H.minor===M.minor&&H.patch===M.patch)return!0}return!1}return!0};return UO}const pXe=mae(),gXe=(t,e,n)=>{try{e=new pXe(e,n)}catch{return!1}return e.test(t)};var mXe=gXe,yae=yKe(mXe);function yXe(t,e,n){const i=t.open(e),r=1e4,s=250,{origin:o}=new URL(e);let a=~~(r/s);function l(c){c.source===i&&(a=0,t.removeEventListener("message",l,!1))}t.addEventListener("message",l,!1);function u(){a<=0||(i.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var vXe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function vae(t,...e){for(const n of e)CXe(t,n);return t}function CXe(t,e){for(const n of Object.keys(e))$m(t,n,e[n],!0)}function RB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(n),!0).forEach(function(i){mKe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const _o=K6e;let S1=ZYe;const mS=typeof window<"u"?window:void 0;var FB;S1===void 0&&((FB=mS==null?void 0:mS.vl)!=null&&FB.compile)&&(S1=mS.vl);const wXe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},SXe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},E0={vega:"Vega","vega-lite":"Vega-Lite"},Qx={vega:_o.version,"vega-lite":S1?S1.version:"not available"},EXe={vega:t=>t,"vega-lite":(t,e)=>S1.compile(t,{config:e}).spec},bXe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,xXe="chart-wrapper";function _Xe(t){return typeof t=="function"}function TB(t,e,n,i){const r=`<html><head>${e}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(r+t+s),o.document.title=`${E0[i]} JSON Source`}function RXe(t,e){if(t.$schema){const n=uae(t.$schema);e&&e!==n.library&&console.warn(`The given visualization spec is written in ${E0[n.library]}, but mode argument sets ${E0[e]??e}.`);const i=n.library;return yae(Qx[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${E0[i]} ${n.version}, but the current version of ${E0[i]} is v${Qx[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e??"vega"}function TXe(t){return!!(t&&"load"in t)}function AB(t){return TXe(t)?t:_o.loader(t)}function AXe(t){var n;const e=((n=t.usermeta)==null?void 0:n.embedOptions)??{};return ce(e.defaultStyle)&&(e.defaultStyle=!1),e}async function DXe(t,e,n={}){let i,r;ce(e)?(r=AB(n.loader),i=JSON.parse(await r.load(e))):i=e;const s=AXe(i),o=s.loader;(!r||o)&&(r=AB(n.loader??o));const a=await DB(s,r),l=await DB(n,r),u=Fc(Fc({},vae(l,a)),{},{config:Gm(l.config??{},a.config??{})});return await PXe(t,i,u,r)}async function DB(t,e){const n=ce(t.config)?JSON.parse(await e.load(t.config)):t.config??{},i=ce(t.patch)?JSON.parse(await e.load(t.patch)):t.patch;return Fc(Fc(Fc({},t),i?{patch:i}:{}),n?{config:n}:{})}function OXe(t){const e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:document.head??document.body}}async function PXe(t,e,n={},i){const r=n.theme?Gm(Zqe[n.theme],n.config??{}):n.config,s=yd(n.actions)?n.actions:vae({},wXe,n.actions??{}),o=Fc(Fc({},SXe),n.i18n),a=n.renderer??"canvas",l=n.logLevel??_o.Warn,u=n.downloadFileName??"visualization",c=typeof t=="string"?document.querySelector(t):t;if(!c)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:b,rootContainer:S}=OXe(c);if(!b.getElementById(E)){const _=document.createElement("style");_.id=E,_.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?vXe.toString():n.defaultStyle,S.appendChild(_)}}const d=RXe(e,n.mode);let h=EXe[d](e,r);if(d==="vega-lite"&&h.$schema){const E=uae(h.$schema);yae(Qx.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${Qx.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let f=c;if(s){const E=document.createElement("div");E.classList.add(xXe),c.appendChild(E),f=E}const p=n.patch;if(p&&(h=p instanceof Function?p(h):CR(h,p,!0,!1).newDocument),n.formatLocale&&_o.formatLocale(n.formatLocale),n.timeFormatLocale&&_o.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const b=n.expressionFunctions[E];"fn"in b?_o.expressionFunction(E,b.fn,b.visitor):b instanceof Function&&_o.expressionFunction(E,b)}const{ast:g}=n,m=_o.parse(h,d==="vega-lite"?{}:r,{ast:g}),y=new(n.viewClass||_o.View)(m,Fc({loader:i,logLevel:l,renderer:a},g?{expr:_o.expressionInterpreter??n.expr??s8e}:{}));if(y.addSignalListener("autosize",(E,b)=>{const{type:S}=b;S=="fit-x"?(f.classList.add("fit-x"),f.classList.remove("fit-y")):S=="fit-y"?(f.classList.remove("fit-x"),f.classList.add("fit-y")):S=="fit"?f.classList.add("fit-x","fit-y"):f.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const E=_Xe(n.tooltip)?n.tooltip:new fKe(n.tooltip===!0?{}:n.tooltip).call;y.tooltip(E)}let{hover:v}=n;if(v===void 0&&(v=d==="vega"),v){const{hoverSet:E,updateSet:b}=typeof v=="boolean"?{}:v;y.hover(E,b)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(f,n.bind).runAsync();let C;if(s!==!1){let E=c;if(n.defaultStyle!==!1){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const _=document.createElement("summary");_.innerHTML=bXe,S.append(_),C=A=>{S.contains(A.target)||S.removeAttribute("open")},document.addEventListener("click",C)}const b=document.createElement("div");if(E.append(b),b.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const _=o[`${S.toUpperCase()}_ACTION`],A=document.createElement("a"),D=he(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;A.text=_,A.href="#",A.target="_blank",A.download=`${u}.${S}`,A.addEventListener("mousedown",async function(P){P.preventDefault();const L=await y.toImageURL(S,D);this.href=L}),b.append(A)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(_){TB(CD(e),n.sourceHeader??"",n.sourceFooter??"",d),_.preventDefault()}),b.append(S)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(_){TB(CD(h),n.sourceHeader??"",n.sourceFooter??"","vega"),_.preventDefault()}),b.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",_=document.createElement("a");_.text=o.EDITOR_ACTION,_.href="#",_.addEventListener("click",function(A){yXe(window,S,{config:r,mode:d,renderer:a,spec:CD(e)}),A.preventDefault()}),b.append(_)}}function w(){C&&document.removeEventListener("click",C),y.finalize()}return{view:y,spec:e,vgSpec:h,finalize:w,embedOptions:n}}function FXe(t){return!!t&&{}.toString.call(t)==="[object Function]"}function MXe(t,e,n){n&&(FXe(n)?n(t.data(e)):t.change(e,_o.changeset().remove(()=>!0).insert(n)))}function NXe(t,e){Object.keys(e).forEach(n=>{MXe(t,n,e[n])})}function Cae(t){const e=new Set;return t.forEach(n=>{Object.keys(n).forEach(i=>{e.add(i)})}),e}const wae=()=>{};function jO(t,e){const n=Object.keys(e);return n.forEach(i=>{try{t.addSignalListener(i,e[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}}),n.length>0}var LXe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const IXe=pf(LXe);function kXe(t,e){if(t===e)return!1;const n={width:!1,height:!1,isExpensive:!1},i=Cae([t,e]);return i.has("width")&&(!("width"in t)||!("width"in e)||t.width!==e.width)&&("width"in t&&typeof t.width=="number"?n.width=t.width:n.isExpensive=!0),i.has("height")&&(!("height"in t)||!("height"in e)||t.height!==e.height)&&("height"in t&&typeof t.height=="number"?n.height=t.height:n.isExpensive=!0),i.delete("width"),i.delete("height"),[...i].some(r=>!(r in t)||!(r in e)||!IXe(t[r],e[r]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function OB(t,e){const n=Object.keys(e);return n.forEach(i=>{try{t.removeSignalListener(i,e[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}}),n.length>0}function YO(t){const{spec:e,width:n,height:i}=t;return typeof n<"u"&&typeof i<"u"?{...e,width:n,height:i}:typeof n<"u"?{...e,width:n}:typeof i<"u"?{...e,height:i}:e}function b0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Sae extends Q.PureComponent{constructor(){super(...arguments),b0(this,"containerRef",Q.createRef()),b0(this,"resultPromise",void 0),b0(this,"handleError",e=>{const{onError:n=wae}=this.props;n(e,this.containerRef.current),console.warn(e)}),b0(this,"modifyView",e=>{this.resultPromise&&this.resultPromise.then(n=>(n&&e(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(e){const n=Cae([this.props,e]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(i=>this.props[i]!==e[i]))this.clearView(),this.createView();else{const i=kXe(YO(this.props),YO(e)),{signalListeners:r}=this.props,{signalListeners:s}=e;if(i)if(i.isExpensive)this.clearView(),this.createView();else{const o=!AP(r,s);this.modifyView(a=>{i.width!==!1&&a.width(i.width),i.height!==!1&&a.height(i.height),o&&(s&&OB(a,s),r&&jO(a,r)),a.run()})}else AP(r,s)||this.modifyView(o=>{s&&OB(o,s),r&&jO(o,r),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:e,onNewView:n,signalListeners:i={},width:r,height:s,...o}=this.props;if(this.containerRef.current){const a=YO(this.props);this.resultPromise=DXe(this.containerRef.current,a,o).then(l=>{if(l){const{view:u}=l;jO(u,i)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(e=>{e&&e.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:e,style:n}=this.props;return Q.createElement("div",{ref:this.containerRef,className:e,style:n})}}b0(Sae,"propTypes",{className:el.string,onError:el.func});function WM(){return WM=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},WM.apply(this,arguments)}function VM(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const GXe={};class Eae extends Q.PureComponent{constructor(){super(...arguments),VM(this,"vegaEmbed",Q.createRef()),VM(this,"handleNewView",e=>{this.update();const{onNewView:n=wae}=this.props;n(e)})}componentDidMount(){this.update()}componentDidUpdate(e){AP(this.props.data,e.data)||this.update()}update(){const{data:e}=this.props;this.vegaEmbed.current&&e&&Object.keys(e).length>0&&this.vegaEmbed.current.modifyView(n=>{NXe(n,e),n.resize().run()})}render(){const{data:e,...n}=this.props;return Q.createElement(Sae,WM({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}VM(Eae,"defaultProps",{data:GXe});function l$({data:t,spec:e,className:n}){var i,r,s;return e||(e={}),!((i=e.encoding)!=null&&i.column)&&!((r=e.encoding)!=null&&r.row)&&!((s=e.encoding)!=null&&s.facet)&&(e.height||(e.height="container"),e.width||(e.width="container")),K.jsx(Eae,{className:n,spec:e,data:{dataset1:t}})}function $Xe({demo:t,dataset:e,columnTypes:n}){const[i,r]=T.useState();return K.jsxs("div",{className:Ln.DemoWrapper,children:[K.jsxs("div",{children:[K.jsx(MI,{demo:t}),K.jsxs("div",{className:Ln.BuilderWrapper,children:[K.jsx(AI,{columnTypes:n,setGeneratedSpec:r,ui:FI,presets:$K}),K.jsx(l$,{className:Ln.PreviewPane,spec:i,data:e})]})]}),K.jsx(NI,{generatedSpec:i})]})}function HXe({demo:t,dataset:e,columnTypes:n}){const[i,r]=T.useState();return K.jsxs("div",{className:Ln.DemoWrapper,children:[K.jsxs("div",{children:[K.jsx(MI,{demo:t}),K.jsxs("div",{className:Ln.BuilderWrapper,children:[K.jsx(AI,{columnTypes:n,setGeneratedSpec:r,ui:FI,presets:$K,modes:WXe}),K.jsx(l$,{className:Ln.PreviewPane,spec:i,data:e})]})]}),K.jsx(NI,{generatedSpec:i})]})}const WXe={Base:{presets:!0,encoding:new Set(["x","y","theta","latitude","longitude","color"]),channelProperties:new Set(["field"]),else:!1},Agg:{encoding:new Set(["x","y","theta","latitude","longitude","color"]),channelProperties:new Set(["aggregate","bin","binStep","maxBins"]),else:!1},Axis:{encoding:new Set(["x","y","theta","latitude","longitude","color"]),channelProperties:new Set(["scaleType","scheme","domain","range","zero","sort","stack","timeUnit","title","legend"]),else:!1},Mark:{mark:!0,else:!1},Adv:{presets:!1,else:!0}};function VXe({demo:t,dataset:e,columnTypes:n}){const[i,r]=T.useState();return K.jsxs("div",{className:Ln.DemoWrapper,children:[K.jsxs("div",{children:[K.jsx(MI,{demo:t}),K.jsxs("div",{className:Ln.BuilderWrapper,children:[K.jsx(AI,{columnTypes:n,setGeneratedSpec:r,ui:FI,modes:BXe}),K.jsx(l$,{className:Ln.PreviewPane,spec:i,data:e})]})]}),K.jsx(NI,{generatedSpec:i})]})}const BXe={Default:{mark:new Set(["type","shape","filled"]),encoding:new Set(["x","y","color","size","opacity"]),channelProperties:new Set(["field","value","type","aggregate","bin","binStep","maxBins","stack","sort","scale"]),else:!1}},zXe=[{yield:27,variety:"Manchuria",year:1931,site:"University Farm"},{yield:48.86667,variety:"Manchuria",year:1931,site:"Waseca"},{yield:27.43334,variety:"Manchuria",year:1931,site:"Morris"},{yield:39.93333,variety:"Manchuria",year:1931,site:"Crookston"},{yield:32.96667,variety:"Manchuria",year:1931,site:"Grand Rapids"},{yield:28.96667,variety:"Manchuria",year:1931,site:"Duluth"},{yield:43.06666,variety:"Glabron",year:1931,site:"University Farm"},{yield:55.2,variety:"Glabron",year:1931,site:"Waseca"},{yield:28.76667,variety:"Glabron",year:1931,site:"Morris"},{yield:38.13333,variety:"Glabron",year:1931,site:"Crookston"},{yield:29.13333,variety:"Glabron",year:1931,site:"Grand Rapids"},{yield:29.66667,variety:"Glabron",year:1931,site:"Duluth"},{yield:35.13333,variety:"Svansota",year:1931,site:"University Farm"},{yield:47.33333,variety:"Svansota",year:1931,site:"Waseca"},{yield:25.76667,variety:"Svansota",year:1931,site:"Morris"},{yield:40.46667,variety:"Svansota",year:1931,site:"Crookston"},{yield:29.66667,variety:"Svansota",year:1931,site:"Grand Rapids"},{yield:25.7,variety:"Svansota",year:1931,site:"Duluth"},{yield:39.9,variety:"Velvet",year:1931,site:"University Farm"},{yield:50.23333,variety:"Velvet",year:1931,site:"Waseca"},{yield:26.13333,variety:"Velvet",year:1931,site:"Morris"},{yield:41.33333,variety:"Velvet",year:1931,site:"Crookston"},{yield:23.03333,variety:"Velvet",year:1931,site:"Grand Rapids"},{yield:26.3,variety:"Velvet",year:1931,site:"Duluth"},{yield:36.56666,variety:"Trebi",year:1931,site:"University Farm"},{yield:63.8333,variety:"Trebi",year:1931,site:"Waseca"},{yield:43.76667,variety:"Trebi",year:1931,site:"Morris"},{yield:46.93333,variety:"Trebi",year:1931,site:"Crookston"},{yield:29.76667,variety:"Trebi",year:1931,site:"Grand Rapids"},{yield:33.93333,variety:"Trebi",year:1931,site:"Duluth"},{yield:43.26667,variety:"No. 457",year:1931,site:"University Farm"},{yield:58.1,variety:"No. 457",year:1931,site:"Waseca"},{yield:28.7,variety:"No. 457",year:1931,site:"Morris"},{yield:45.66667,variety:"No. 457",year:1931,site:"Crookston"},{yield:32.16667,variety:"No. 457",year:1931,site:"Grand Rapids"},{yield:33.6,variety:"No. 457",year:1931,site:"Duluth"},{yield:36.6,variety:"No. 462",year:1931,site:"University Farm"},{yield:65.7667,variety:"No. 462",year:1931,site:"Waseca"},{yield:30.36667,variety:"No. 462",year:1931,site:"Morris"},{yield:48.56666,variety:"No. 462",year:1931,site:"Crookston"},{yield:24.93334,variety:"No. 462",year:1931,site:"Grand Rapids"},{yield:28.1,variety:"No. 462",year:1931,site:"Duluth"},{yield:32.76667,variety:"Peatland",year:1931,site:"University Farm"},{yield:48.56666,variety:"Peatland",year:1931,site:"Waseca"},{yield:29.86667,variety:"Peatland",year:1931,site:"Morris"},{yield:41.6,variety:"Peatland",year:1931,site:"Crookston"},{yield:34.7,variety:"Peatland",year:1931,site:"Grand Rapids"},{yield:32,variety:"Peatland",year:1931,site:"Duluth"},{yield:24.66667,variety:"No. 475",year:1931,site:"University Farm"},{yield:46.76667,variety:"No. 475",year:1931,site:"Waseca"},{yield:22.6,variety:"No. 475",year:1931,site:"Morris"},{yield:44.1,variety:"No. 475",year:1931,site:"Crookston"},{yield:19.7,variety:"No. 475",year:1931,site:"Grand Rapids"},{yield:33.06666,variety:"No. 475",year:1931,site:"Duluth"},{yield:39.3,variety:"Wisconsin No. 38",year:1931,site:"University Farm"},{yield:58.8,variety:"Wisconsin No. 38",year:1931,site:"Waseca"},{yield:29.46667,variety:"Wisconsin No. 38",year:1931,site:"Morris"},{yield:49.86667,variety:"Wisconsin No. 38",year:1931,site:"Crookston"},{yield:34.46667,variety:"Wisconsin No. 38",year:1931,site:"Grand Rapids"},{yield:31.6,variety:"Wisconsin No. 38",year:1931,site:"Duluth"},{yield:26.9,variety:"Manchuria",year:1932,site:"University Farm"},{yield:33.46667,variety:"Manchuria",year:1932,site:"Waseca"},{yield:34.36666,variety:"Manchuria",year:1932,site:"Morris"},{yield:32.96667,variety:"Manchuria",year:1932,site:"Crookston"},{yield:22.13333,variety:"Manchuria",year:1932,site:"Grand Rapids"},{yield:22.56667,variety:"Manchuria",year:1932,site:"Duluth"},{yield:36.8,variety:"Glabron",year:1932,site:"University Farm"},{yield:37.73333,variety:"Glabron",year:1932,site:"Waseca"},{yield:35.13333,variety:"Glabron",year:1932,site:"Morris"},{yield:26.16667,variety:"Glabron",year:1932,site:"Crookston"},{yield:14.43333,variety:"Glabron",year:1932,site:"Grand Rapids"},{yield:25.86667,variety:"Glabron",year:1932,site:"Duluth"},{yield:27.43334,variety:"Svansota",year:1932,site:"University Farm"},{yield:38.5,variety:"Svansota",year:1932,site:"Waseca"},{yield:35.03333,variety:"Svansota",year:1932,site:"Morris"},{yield:20.63333,variety:"Svansota",year:1932,site:"Crookston"},{yield:16.63333,variety:"Svansota",year:1932,site:"Grand Rapids"},{yield:22.23333,variety:"Svansota",year:1932,site:"Duluth"},{yield:26.8,variety:"Velvet",year:1932,site:"University Farm"},{yield:37.4,variety:"Velvet",year:1932,site:"Waseca"},{yield:38.83333,variety:"Velvet",year:1932,site:"Morris"},{yield:32.06666,variety:"Velvet",year:1932,site:"Crookston"},{yield:32.23333,variety:"Velvet",year:1932,site:"Grand Rapids"},{yield:22.46667,variety:"Velvet",year:1932,site:"Duluth"},{yield:29.06667,variety:"Trebi",year:1932,site:"University Farm"},{yield:49.2333,variety:"Trebi",year:1932,site:"Waseca"},{yield:46.63333,variety:"Trebi",year:1932,site:"Morris"},{yield:41.83333,variety:"Trebi",year:1932,site:"Crookston"},{yield:20.63333,variety:"Trebi",year:1932,site:"Grand Rapids"},{yield:30.6,variety:"Trebi",year:1932,site:"Duluth"},{yield:26.43334,variety:"No. 457",year:1932,site:"University Farm"},{yield:42.2,variety:"No. 457",year:1932,site:"Waseca"},{yield:43.53334,variety:"No. 457",year:1932,site:"Morris"},{yield:34.33333,variety:"No. 457",year:1932,site:"Crookston"},{yield:19.46667,variety:"No. 457",year:1932,site:"Grand Rapids"},{yield:22.7,variety:"No. 457",year:1932,site:"Duluth"},{yield:25.56667,variety:"No. 462",year:1932,site:"University Farm"},{yield:44.7,variety:"No. 462",year:1932,site:"Waseca"},{yield:47,variety:"No. 462",year:1932,site:"Morris"},{yield:30.53333,variety:"No. 462",year:1932,site:"Crookston"},{yield:19.9,variety:"No. 462",year:1932,site:"Grand Rapids"},{yield:22.5,variety:"No. 462",year:1932,site:"Duluth"},{yield:28.06667,variety:"Peatland",year:1932,site:"University Farm"},{yield:36.03333,variety:"Peatland",year:1932,site:"Waseca"},{yield:43.2,variety:"Peatland",year:1932,site:"Morris"},{yield:25.23333,variety:"Peatland",year:1932,site:"Crookston"},{yield:26.76667,variety:"Peatland",year:1932,site:"Grand Rapids"},{yield:31.36667,variety:"Peatland",year:1932,site:"Duluth"},{yield:30,variety:"No. 475",year:1932,site:"University Farm"},{yield:41.26667,variety:"No. 475",year:1932,site:"Waseca"},{yield:44.23333,variety:"No. 475",year:1932,site:"Morris"},{yield:32.13333,variety:"No. 475",year:1932,site:"Crookston"},{yield:15.23333,variety:"No. 475",year:1932,site:"Grand Rapids"},{yield:27.36667,variety:"No. 475",year:1932,site:"Duluth"},{yield:38,variety:"Wisconsin No. 38",year:1932,site:"University Farm"},{yield:58.16667,variety:"Wisconsin No. 38",year:1932,site:"Waseca"},{yield:47.16667,variety:"Wisconsin No. 38",year:1932,site:"Morris"},{yield:35.9,variety:"Wisconsin No. 38",year:1932,site:"Crookston"},{yield:20.66667,variety:"Wisconsin No. 38",year:1932,site:"Grand Rapids"},{yield:29.33333,variety:"Wisconsin No. 38",year:1932,site:"Duluth"}],UXe=[{Name:"chevrolet chevelle malibu",Miles_per_Gallon:18,Cylinders:8,Displacement:307,Horsepower:130,Weight_in_lbs:3504,Acceleration:12,Year:"1970-01-01",Origin:"USA"},{Name:"buick skylark 320",Miles_per_Gallon:15,Cylinders:8,Displacement:350,Horsepower:165,Weight_in_lbs:3693,Acceleration:11.5,Year:"1970-01-01",Origin:"USA"},{Name:"plymouth satellite",Miles_per_Gallon:18,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:3436,Acceleration:11,Year:"1970-01-01",Origin:"USA"},{Name:"amc rebel sst",Miles_per_Gallon:16,Cylinders:8,Displacement:304,Horsepower:150,Weight_in_lbs:3433,Acceleration:12,Year:"1970-01-01",Origin:"USA"},{Name:"ford torino",Miles_per_Gallon:17,Cylinders:8,Displacement:302,Horsepower:140,Weight_in_lbs:3449,Acceleration:10.5,Year:"1970-01-01",Origin:"USA"},{Name:"ford galaxie 500",Miles_per_Gallon:15,Cylinders:8,Displacement:429,Horsepower:198,Weight_in_lbs:4341,Acceleration:10,Year:"1970-01-01",Origin:"USA"},{Name:"chevrolet impala",Miles_per_Gallon:14,Cylinders:8,Displacement:454,Horsepower:220,Weight_in_lbs:4354,Acceleration:9,Year:"1970-01-01",Origin:"USA"},{Name:"plymouth fury iii",Miles_per_Gallon:14,Cylinders:8,Displacement:440,Horsepower:215,Weight_in_lbs:4312,Acceleration:8.5,Year:"1970-01-01",Origin:"USA"},{Name:"pontiac catalina",Miles_per_Gallon:14,Cylinders:8,Displacement:455,Horsepower:225,Weight_in_lbs:4425,Acceleration:10,Year:"1970-01-01",Origin:"USA"},{Name:"amc ambassador dpl",Miles_per_Gallon:15,Cylinders:8,Displacement:390,Horsepower:190,Weight_in_lbs:3850,Acceleration:8.5,Year:"1970-01-01",Origin:"USA"},{Name:"citroen ds-21 pallas",Miles_per_Gallon:null,Cylinders:4,Displacement:133,Horsepower:115,Weight_in_lbs:3090,Acceleration:17.5,Year:"1970-01-01",Origin:"Europe"},{Name:"chevrolet chevelle concours (sw)",Miles_per_Gallon:null,Cylinders:8,Displacement:350,Horsepower:165,Weight_in_lbs:4142,Acceleration:11.5,Year:"1970-01-01",Origin:"USA"},{Name:"ford torino (sw)",Miles_per_Gallon:null,Cylinders:8,Displacement:351,Horsepower:153,Weight_in_lbs:4034,Acceleration:11,Year:"1970-01-01",Origin:"USA"},{Name:"plymouth satellite (sw)",Miles_per_Gallon:null,Cylinders:8,Displacement:383,Horsepower:175,Weight_in_lbs:4166,Acceleration:10.5,Year:"1970-01-01",Origin:"USA"},{Name:"amc rebel sst (sw)",Miles_per_Gallon:null,Cylinders:8,Displacement:360,Horsepower:175,Weight_in_lbs:3850,Acceleration:11,Year:"1970-01-01",Origin:"USA"},{Name:"dodge challenger se",Miles_per_Gallon:15,Cylinders:8,Displacement:383,Horsepower:170,Weight_in_lbs:3563,Acceleration:10,Year:"1970-01-01",Origin:"USA"},{Name:"plymouth 'cuda 340",Miles_per_Gallon:14,Cylinders:8,Displacement:340,Horsepower:160,Weight_in_lbs:3609,Acceleration:8,Year:"1970-01-01",Origin:"USA"},{Name:"ford mustang boss 302",Miles_per_Gallon:null,Cylinders:8,Displacement:302,Horsepower:140,Weight_in_lbs:3353,Acceleration:8,Year:"1970-01-01",Origin:"USA"},{Name:"chevrolet monte carlo",Miles_per_Gallon:15,Cylinders:8,Displacement:400,Horsepower:150,Weight_in_lbs:3761,Acceleration:9.5,Year:"1970-01-01",Origin:"USA"},{Name:"buick estate wagon (sw)",Miles_per_Gallon:14,Cylinders:8,Displacement:455,Horsepower:225,Weight_in_lbs:3086,Acceleration:10,Year:"1970-01-01",Origin:"USA"},{Name:"toyota corona mark ii",Miles_per_Gallon:24,Cylinders:4,Displacement:113,Horsepower:95,Weight_in_lbs:2372,Acceleration:15,Year:"1970-01-01",Origin:"Japan"},{Name:"plymouth duster",Miles_per_Gallon:22,Cylinders:6,Displacement:198,Horsepower:95,Weight_in_lbs:2833,Acceleration:15.5,Year:"1970-01-01",Origin:"USA"},{Name:"amc hornet",Miles_per_Gallon:18,Cylinders:6,Displacement:199,Horsepower:97,Weight_in_lbs:2774,Acceleration:15.5,Year:"1970-01-01",Origin:"USA"},{Name:"ford maverick",Miles_per_Gallon:21,Cylinders:6,Displacement:200,Horsepower:85,Weight_in_lbs:2587,Acceleration:16,Year:"1970-01-01",Origin:"USA"},{Name:"datsun pl510",Miles_per_Gallon:27,Cylinders:4,Displacement:97,Horsepower:88,Weight_in_lbs:2130,Acceleration:14.5,Year:"1970-01-01",Origin:"Japan"},{Name:"volkswagen 1131 deluxe sedan",Miles_per_Gallon:26,Cylinders:4,Displacement:97,Horsepower:46,Weight_in_lbs:1835,Acceleration:20.5,Year:"1970-01-01",Origin:"Europe"},{Name:"peugeot 504",Miles_per_Gallon:25,Cylinders:4,Displacement:110,Horsepower:87,Weight_in_lbs:2672,Acceleration:17.5,Year:"1970-01-01",Origin:"Europe"},{Name:"audi 100 ls",Miles_per_Gallon:24,Cylinders:4,Displacement:107,Horsepower:90,Weight_in_lbs:2430,Acceleration:14.5,Year:"1970-01-01",Origin:"Europe"},{Name:"saab 99e",Miles_per_Gallon:25,Cylinders:4,Displacement:104,Horsepower:95,Weight_in_lbs:2375,Acceleration:17.5,Year:"1970-01-01",Origin:"Europe"},{Name:"bmw 2002",Miles_per_Gallon:26,Cylinders:4,Displacement:121,Horsepower:113,Weight_in_lbs:2234,Acceleration:12.5,Year:"1970-01-01",Origin:"Europe"},{Name:"amc gremlin",Miles_per_Gallon:21,Cylinders:6,Displacement:199,Horsepower:90,Weight_in_lbs:2648,Acceleration:15,Year:"1970-01-01",Origin:"USA"},{Name:"ford f250",Miles_per_Gallon:10,Cylinders:8,Displacement:360,Horsepower:215,Weight_in_lbs:4615,Acceleration:14,Year:"1970-01-01",Origin:"USA"},{Name:"chevy c20",Miles_per_Gallon:10,Cylinders:8,Displacement:307,Horsepower:200,Weight_in_lbs:4376,Acceleration:15,Year:"1970-01-01",Origin:"USA"},{Name:"dodge d200",Miles_per_Gallon:11,Cylinders:8,Displacement:318,Horsepower:210,Weight_in_lbs:4382,Acceleration:13.5,Year:"1970-01-01",Origin:"USA"},{Name:"hi 1200d",Miles_per_Gallon:9,Cylinders:8,Displacement:304,Horsepower:193,Weight_in_lbs:4732,Acceleration:18.5,Year:"1970-01-01",Origin:"USA"},{Name:"datsun pl510",Miles_per_Gallon:27,Cylinders:4,Displacement:97,Horsepower:88,Weight_in_lbs:2130,Acceleration:14.5,Year:"1971-01-01",Origin:"Japan"},{Name:"chevrolet vega 2300",Miles_per_Gallon:28,Cylinders:4,Displacement:140,Horsepower:90,Weight_in_lbs:2264,Acceleration:15.5,Year:"1971-01-01",Origin:"USA"},{Name:"toyota corona",Miles_per_Gallon:25,Cylinders:4,Displacement:113,Horsepower:95,Weight_in_lbs:2228,Acceleration:14,Year:"1971-01-01",Origin:"Japan"},{Name:"ford pinto",Miles_per_Gallon:25,Cylinders:4,Displacement:98,Horsepower:null,Weight_in_lbs:2046,Acceleration:19,Year:"1971-01-01",Origin:"USA"},{Name:"volkswagen super beetle 117",Miles_per_Gallon:null,Cylinders:4,Displacement:97,Horsepower:48,Weight_in_lbs:1978,Acceleration:20,Year:"1971-01-01",Origin:"Europe"},{Name:"amc gremlin",Miles_per_Gallon:19,Cylinders:6,Displacement:232,Horsepower:100,Weight_in_lbs:2634,Acceleration:13,Year:"1971-01-01",Origin:"USA"},{Name:"plymouth satellite custom",Miles_per_Gallon:16,Cylinders:6,Displacement:225,Horsepower:105,Weight_in_lbs:3439,Acceleration:15.5,Year:"1971-01-01",Origin:"USA"},{Name:"chevrolet chevelle malibu",Miles_per_Gallon:17,Cylinders:6,Displacement:250,Horsepower:100,Weight_in_lbs:3329,Acceleration:15.5,Year:"1971-01-01",Origin:"USA"},{Name:"ford torino 500",Miles_per_Gallon:19,Cylinders:6,Displacement:250,Horsepower:88,Weight_in_lbs:3302,Acceleration:15.5,Year:"1971-01-01",Origin:"USA"},{Name:"amc matador",Miles_per_Gallon:18,Cylinders:6,Displacement:232,Horsepower:100,Weight_in_lbs:3288,Acceleration:15.5,Year:"1971-01-01",Origin:"USA"},{Name:"chevrolet impala",Miles_per_Gallon:14,Cylinders:8,Displacement:350,Horsepower:165,Weight_in_lbs:4209,Acceleration:12,Year:"1971-01-01",Origin:"USA"},{Name:"pontiac catalina brougham",Miles_per_Gallon:14,Cylinders:8,Displacement:400,Horsepower:175,Weight_in_lbs:4464,Acceleration:11.5,Year:"1971-01-01",Origin:"USA"},{Name:"ford galaxie 500",Miles_per_Gallon:14,Cylinders:8,Displacement:351,Horsepower:153,Weight_in_lbs:4154,Acceleration:13.5,Year:"1971-01-01",Origin:"USA"},{Name:"plymouth fury iii",Miles_per_Gallon:14,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:4096,Acceleration:13,Year:"1971-01-01",Origin:"USA"},{Name:"dodge monaco (sw)",Miles_per_Gallon:12,Cylinders:8,Displacement:383,Horsepower:180,Weight_in_lbs:4955,Acceleration:11.5,Year:"1971-01-01",Origin:"USA"},{Name:"ford country squire (sw)",Miles_per_Gallon:13,Cylinders:8,Displacement:400,Horsepower:170,Weight_in_lbs:4746,Acceleration:12,Year:"1971-01-01",Origin:"USA"},{Name:"pontiac safari (sw)",Miles_per_Gallon:13,Cylinders:8,Displacement:400,Horsepower:175,Weight_in_lbs:5140,Acceleration:12,Year:"1971-01-01",Origin:"USA"},{Name:"amc hornet sportabout (sw)",Miles_per_Gallon:18,Cylinders:6,Displacement:258,Horsepower:110,Weight_in_lbs:2962,Acceleration:13.5,Year:"1971-01-01",Origin:"USA"},{Name:"chevrolet vega (sw)",Miles_per_Gallon:22,Cylinders:4,Displacement:140,Horsepower:72,Weight_in_lbs:2408,Acceleration:19,Year:"1971-01-01",Origin:"USA"},{Name:"pontiac firebird",Miles_per_Gallon:19,Cylinders:6,Displacement:250,Horsepower:100,Weight_in_lbs:3282,Acceleration:15,Year:"1971-01-01",Origin:"USA"},{Name:"ford mustang",Miles_per_Gallon:18,Cylinders:6,Displacement:250,Horsepower:88,Weight_in_lbs:3139,Acceleration:14.5,Year:"1971-01-01",Origin:"USA"},{Name:"mercury capri 2000",Miles_per_Gallon:23,Cylinders:4,Displacement:122,Horsepower:86,Weight_in_lbs:2220,Acceleration:14,Year:"1971-01-01",Origin:"USA"},{Name:"opel 1900",Miles_per_Gallon:28,Cylinders:4,Displacement:116,Horsepower:90,Weight_in_lbs:2123,Acceleration:14,Year:"1971-01-01",Origin:"Europe"},{Name:"peugeot 304",Miles_per_Gallon:30,Cylinders:4,Displacement:79,Horsepower:70,Weight_in_lbs:2074,Acceleration:19.5,Year:"1971-01-01",Origin:"Europe"},{Name:"fiat 124b",Miles_per_Gallon:30,Cylinders:4,Displacement:88,Horsepower:76,Weight_in_lbs:2065,Acceleration:14.5,Year:"1971-01-01",Origin:"Europe"},{Name:"toyota corolla 1200",Miles_per_Gallon:31,Cylinders:4,Displacement:71,Horsepower:65,Weight_in_lbs:1773,Acceleration:19,Year:"1971-01-01",Origin:"Japan"},{Name:"datsun 1200",Miles_per_Gallon:35,Cylinders:4,Displacement:72,Horsepower:69,Weight_in_lbs:1613,Acceleration:18,Year:"1971-01-01",Origin:"Japan"},{Name:"volkswagen model 111",Miles_per_Gallon:27,Cylinders:4,Displacement:97,Horsepower:60,Weight_in_lbs:1834,Acceleration:19,Year:"1971-01-01",Origin:"Europe"},{Name:"plymouth cricket",Miles_per_Gallon:26,Cylinders:4,Displacement:91,Horsepower:70,Weight_in_lbs:1955,Acceleration:20.5,Year:"1971-01-01",Origin:"USA"},{Name:"toyota corona hardtop",Miles_per_Gallon:24,Cylinders:4,Displacement:113,Horsepower:95,Weight_in_lbs:2278,Acceleration:15.5,Year:"1972-01-01",Origin:"Japan"},{Name:"dodge colt hardtop",Miles_per_Gallon:25,Cylinders:4,Displacement:97.5,Horsepower:80,Weight_in_lbs:2126,Acceleration:17,Year:"1972-01-01",Origin:"USA"},{Name:"volkswagen type 3",Miles_per_Gallon:23,Cylinders:4,Displacement:97,Horsepower:54,Weight_in_lbs:2254,Acceleration:23.5,Year:"1972-01-01",Origin:"Europe"},{Name:"chevrolet vega",Miles_per_Gallon:20,Cylinders:4,Displacement:140,Horsepower:90,Weight_in_lbs:2408,Acceleration:19.5,Year:"1972-01-01",Origin:"USA"},{Name:"ford pinto runabout",Miles_per_Gallon:21,Cylinders:4,Displacement:122,Horsepower:86,Weight_in_lbs:2226,Acceleration:16.5,Year:"1972-01-01",Origin:"USA"},{Name:"chevrolet impala",Miles_per_Gallon:13,Cylinders:8,Displacement:350,Horsepower:165,Weight_in_lbs:4274,Acceleration:12,Year:"1972-01-01",Origin:"USA"},{Name:"pontiac catalina",Miles_per_Gallon:14,Cylinders:8,Displacement:400,Horsepower:175,Weight_in_lbs:4385,Acceleration:12,Year:"1972-01-01",Origin:"USA"},{Name:"plymouth fury iii",Miles_per_Gallon:15,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:4135,Acceleration:13.5,Year:"1972-01-01",Origin:"USA"},{Name:"ford galaxie 500",Miles_per_Gallon:14,Cylinders:8,Displacement:351,Horsepower:153,Weight_in_lbs:4129,Acceleration:13,Year:"1972-01-01",Origin:"USA"},{Name:"amc ambassador sst",Miles_per_Gallon:17,Cylinders:8,Displacement:304,Horsepower:150,Weight_in_lbs:3672,Acceleration:11.5,Year:"1972-01-01",Origin:"USA"},{Name:"mercury marquis",Miles_per_Gallon:11,Cylinders:8,Displacement:429,Horsepower:208,Weight_in_lbs:4633,Acceleration:11,Year:"1972-01-01",Origin:"USA"},{Name:"buick lesabre custom",Miles_per_Gallon:13,Cylinders:8,Displacement:350,Horsepower:155,Weight_in_lbs:4502,Acceleration:13.5,Year:"1972-01-01",Origin:"USA"},{Name:"oldsmobile delta 88 royale",Miles_per_Gallon:12,Cylinders:8,Displacement:350,Horsepower:160,Weight_in_lbs:4456,Acceleration:13.5,Year:"1972-01-01",Origin:"USA"},{Name:"chrysler newport royal",Miles_per_Gallon:13,Cylinders:8,Displacement:400,Horsepower:190,Weight_in_lbs:4422,Acceleration:12.5,Year:"1972-01-01",Origin:"USA"},{Name:"mazda rx2 coupe",Miles_per_Gallon:19,Cylinders:3,Displacement:70,Horsepower:97,Weight_in_lbs:2330,Acceleration:13.5,Year:"1972-01-01",Origin:"Japan"},{Name:"amc matador (sw)",Miles_per_Gallon:15,Cylinders:8,Displacement:304,Horsepower:150,Weight_in_lbs:3892,Acceleration:12.5,Year:"1972-01-01",Origin:"USA"},{Name:"chevrolet chevelle concours (sw)",Miles_per_Gallon:13,Cylinders:8,Displacement:307,Horsepower:130,Weight_in_lbs:4098,Acceleration:14,Year:"1972-01-01",Origin:"USA"},{Name:"ford gran torino (sw)",Miles_per_Gallon:13,Cylinders:8,Displacement:302,Horsepower:140,Weight_in_lbs:4294,Acceleration:16,Year:"1972-01-01",Origin:"USA"},{Name:"plymouth satellite custom (sw)",Miles_per_Gallon:14,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:4077,Acceleration:14,Year:"1972-01-01",Origin:"USA"},{Name:"volvo 145e (sw)",Miles_per_Gallon:18,Cylinders:4,Displacement:121,Horsepower:112,Weight_in_lbs:2933,Acceleration:14.5,Year:"1972-01-01",Origin:"Europe"},{Name:"volkswagen 411 (sw)",Miles_per_Gallon:22,Cylinders:4,Displacement:121,Horsepower:76,Weight_in_lbs:2511,Acceleration:18,Year:"1972-01-01",Origin:"Europe"},{Name:"peugeot 504 (sw)",Miles_per_Gallon:21,Cylinders:4,Displacement:120,Horsepower:87,Weight_in_lbs:2979,Acceleration:19.5,Year:"1972-01-01",Origin:"Europe"},{Name:"renault 12 (sw)",Miles_per_Gallon:26,Cylinders:4,Displacement:96,Horsepower:69,Weight_in_lbs:2189,Acceleration:18,Year:"1972-01-01",Origin:"Europe"},{Name:"ford pinto (sw)",Miles_per_Gallon:22,Cylinders:4,Displacement:122,Horsepower:86,Weight_in_lbs:2395,Acceleration:16,Year:"1972-01-01",Origin:"USA"},{Name:"datsun 510 (sw)",Miles_per_Gallon:28,Cylinders:4,Displacement:97,Horsepower:92,Weight_in_lbs:2288,Acceleration:17,Year:"1972-01-01",Origin:"Japan"},{Name:"toyouta corona mark ii (sw)",Miles_per_Gallon:23,Cylinders:4,Displacement:120,Horsepower:97,Weight_in_lbs:2506,Acceleration:14.5,Year:"1972-01-01",Origin:"Japan"},{Name:"dodge colt (sw)",Miles_per_Gallon:28,Cylinders:4,Displacement:98,Horsepower:80,Weight_in_lbs:2164,Acceleration:15,Year:"1972-01-01",Origin:"USA"},{Name:"toyota corolla 1600 (sw)",Miles_per_Gallon:27,Cylinders:4,Displacement:97,Horsepower:88,Weight_in_lbs:2100,Acceleration:16.5,Year:"1972-01-01",Origin:"Japan"},{Name:"buick century 350",Miles_per_Gallon:13,Cylinders:8,Displacement:350,Horsepower:175,Weight_in_lbs:4100,Acceleration:13,Year:"1973-01-01",Origin:"USA"},{Name:"amc matador",Miles_per_Gallon:14,Cylinders:8,Displacement:304,Horsepower:150,Weight_in_lbs:3672,Acceleration:11.5,Year:"1973-01-01",Origin:"USA"},{Name:"chevrolet malibu",Miles_per_Gallon:13,Cylinders:8,Displacement:350,Horsepower:145,Weight_in_lbs:3988,Acceleration:13,Year:"1973-01-01",Origin:"USA"},{Name:"ford gran torino",Miles_per_Gallon:14,Cylinders:8,Displacement:302,Horsepower:137,Weight_in_lbs:4042,Acceleration:14.5,Year:"1973-01-01",Origin:"USA"},{Name:"dodge coronet custom",Miles_per_Gallon:15,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:3777,Acceleration:12.5,Year:"1973-01-01",Origin:"USA"},{Name:"mercury marquis brougham",Miles_per_Gallon:12,Cylinders:8,Displacement:429,Horsepower:198,Weight_in_lbs:4952,Acceleration:11.5,Year:"1973-01-01",Origin:"USA"},{Name:"chevrolet caprice classic",Miles_per_Gallon:13,Cylinders:8,Displacement:400,Horsepower:150,Weight_in_lbs:4464,Acceleration:12,Year:"1973-01-01",Origin:"USA"},{Name:"ford ltd",Miles_per_Gallon:13,Cylinders:8,Displacement:351,Horsepower:158,Weight_in_lbs:4363,Acceleration:13,Year:"1973-01-01",Origin:"USA"},{Name:"plymouth fury gran sedan",Miles_per_Gallon:14,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:4237,Acceleration:14.5,Year:"1973-01-01",Origin:"USA"},{Name:"chrysler new yorker brougham",Miles_per_Gallon:13,Cylinders:8,Displacement:440,Horsepower:215,Weight_in_lbs:4735,Acceleration:11,Year:"1973-01-01",Origin:"USA"},{Name:"buick electra 225 custom",Miles_per_Gallon:12,Cylinders:8,Displacement:455,Horsepower:225,Weight_in_lbs:4951,Acceleration:11,Year:"1973-01-01",Origin:"USA"},{Name:"amc ambassador brougham",Miles_per_Gallon:13,Cylinders:8,Displacement:360,Horsepower:175,Weight_in_lbs:3821,Acceleration:11,Year:"1973-01-01",Origin:"USA"},{Name:"plymouth valiant",Miles_per_Gallon:18,Cylinders:6,Displacement:225,Horsepower:105,Weight_in_lbs:3121,Acceleration:16.5,Year:"1973-01-01",Origin:"USA"},{Name:"chevrolet nova custom",Miles_per_Gallon:16,Cylinders:6,Displacement:250,Horsepower:100,Weight_in_lbs:3278,Acceleration:18,Year:"1973-01-01",Origin:"USA"},{Name:"amc hornet",Miles_per_Gallon:18,Cylinders:6,Displacement:232,Horsepower:100,Weight_in_lbs:2945,Acceleration:16,Year:"1973-01-01",Origin:"USA"},{Name:"ford maverick",Miles_per_Gallon:18,Cylinders:6,Displacement:250,Horsepower:88,Weight_in_lbs:3021,Acceleration:16.5,Year:"1973-01-01",Origin:"USA"},{Name:"plymouth duster",Miles_per_Gallon:23,Cylinders:6,Displacement:198,Horsepower:95,Weight_in_lbs:2904,Acceleration:16,Year:"1973-01-01",Origin:"USA"},{Name:"volkswagen super beetle",Miles_per_Gallon:26,Cylinders:4,Displacement:97,Horsepower:46,Weight_in_lbs:1950,Acceleration:21,Year:"1973-01-01",Origin:"Europe"},{Name:"chevrolet impala",Miles_per_Gallon:11,Cylinders:8,Displacement:400,Horsepower:150,Weight_in_lbs:4997,Acceleration:14,Year:"1973-01-01",Origin:"USA"},{Name:"ford country",Miles_per_Gallon:12,Cylinders:8,Displacement:400,Horsepower:167,Weight_in_lbs:4906,Acceleration:12.5,Year:"1973-01-01",Origin:"USA"},{Name:"plymouth custom suburb",Miles_per_Gallon:13,Cylinders:8,Displacement:360,Horsepower:170,Weight_in_lbs:4654,Acceleration:13,Year:"1973-01-01",Origin:"USA"},{Name:"oldsmobile vista cruiser",Miles_per_Gallon:12,Cylinders:8,Displacement:350,Horsepower:180,Weight_in_lbs:4499,Acceleration:12.5,Year:"1973-01-01",Origin:"USA"},{Name:"amc gremlin",Miles_per_Gallon:18,Cylinders:6,Displacement:232,Horsepower:100,Weight_in_lbs:2789,Acceleration:15,Year:"1973-01-01",Origin:"USA"},{Name:"toyota carina",Miles_per_Gallon:20,Cylinders:4,Displacement:97,Horsepower:88,Weight_in_lbs:2279,Acceleration:19,Year:"1973-01-01",Origin:"Japan"},{Name:"chevrolet vega",Miles_per_Gallon:21,Cylinders:4,Displacement:140,Horsepower:72,Weight_in_lbs:2401,Acceleration:19.5,Year:"1973-01-01",Origin:"USA"},{Name:"datsun 610",Miles_per_Gallon:22,Cylinders:4,Displacement:108,Horsepower:94,Weight_in_lbs:2379,Acceleration:16.5,Year:"1973-01-01",Origin:"Japan"},{Name:"maxda rx3",Miles_per_Gallon:18,Cylinders:3,Displacement:70,Horsepower:90,Weight_in_lbs:2124,Acceleration:13.5,Year:"1973-01-01",Origin:"Japan"},{Name:"ford pinto",Miles_per_Gallon:19,Cylinders:4,Displacement:122,Horsepower:85,Weight_in_lbs:2310,Acceleration:18.5,Year:"1973-01-01",Origin:"USA"},{Name:"mercury capri v6",Miles_per_Gallon:21,Cylinders:6,Displacement:155,Horsepower:107,Weight_in_lbs:2472,Acceleration:14,Year:"1973-01-01",Origin:"USA"},{Name:"fiat 124 sport coupe",Miles_per_Gallon:26,Cylinders:4,Displacement:98,Horsepower:90,Weight_in_lbs:2265,Acceleration:15.5,Year:"1973-01-01",Origin:"Europe"},{Name:"chevrolet monte carlo s",Miles_per_Gallon:15,Cylinders:8,Displacement:350,Horsepower:145,Weight_in_lbs:4082,Acceleration:13,Year:"1973-01-01",Origin:"USA"},{Name:"pontiac grand prix",Miles_per_Gallon:16,Cylinders:8,Displacement:400,Horsepower:230,Weight_in_lbs:4278,Acceleration:9.5,Year:"1973-01-01",Origin:"USA"},{Name:"fiat 128",Miles_per_Gallon:29,Cylinders:4,Displacement:68,Horsepower:49,Weight_in_lbs:1867,Acceleration:19.5,Year:"1973-01-01",Origin:"Europe"},{Name:"opel manta",Miles_per_Gallon:24,Cylinders:4,Displacement:116,Horsepower:75,Weight_in_lbs:2158,Acceleration:15.5,Year:"1973-01-01",Origin:"Europe"},{Name:"audi 100ls",Miles_per_Gallon:20,Cylinders:4,Displacement:114,Horsepower:91,Weight_in_lbs:2582,Acceleration:14,Year:"1973-01-01",Origin:"Europe"},{Name:"volvo 144ea",Miles_per_Gallon:19,Cylinders:4,Displacement:121,Horsepower:112,Weight_in_lbs:2868,Acceleration:15.5,Year:"1973-01-01",Origin:"Europe"},{Name:"dodge dart custom",Miles_per_Gallon:15,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:3399,Acceleration:11,Year:"1973-01-01",Origin:"USA"},{Name:"saab 99le",Miles_per_Gallon:24,Cylinders:4,Displacement:121,Horsepower:110,Weight_in_lbs:2660,Acceleration:14,Year:"1973-01-01",Origin:"Europe"},{Name:"toyota mark ii",Miles_per_Gallon:20,Cylinders:6,Displacement:156,Horsepower:122,Weight_in_lbs:2807,Acceleration:13.5,Year:"1973-01-01",Origin:"Japan"},{Name:"oldsmobile omega",Miles_per_Gallon:11,Cylinders:8,Displacement:350,Horsepower:180,Weight_in_lbs:3664,Acceleration:11,Year:"1973-01-01",Origin:"USA"},{Name:"plymouth duster",Miles_per_Gallon:20,Cylinders:6,Displacement:198,Horsepower:95,Weight_in_lbs:3102,Acceleration:16.5,Year:"1974-01-01",Origin:"USA"},{Name:"ford maverick",Miles_per_Gallon:21,Cylinders:6,Displacement:200,Horsepower:null,Weight_in_lbs:2875,Acceleration:17,Year:"1974-01-01",Origin:"USA"},{Name:"amc hornet",Miles_per_Gallon:19,Cylinders:6,Displacement:232,Horsepower:100,Weight_in_lbs:2901,Acceleration:16,Year:"1974-01-01",Origin:"USA"},{Name:"chevrolet nova",Miles_per_Gallon:15,Cylinders:6,Displacement:250,Horsepower:100,Weight_in_lbs:3336,Acceleration:17,Year:"1974-01-01",Origin:"USA"},{Name:"datsun b210",Miles_per_Gallon:31,Cylinders:4,Displacement:79,Horsepower:67,Weight_in_lbs:1950,Acceleration:19,Year:"1974-01-01",Origin:"Japan"},{Name:"ford pinto",Miles_per_Gallon:26,Cylinders:4,Displacement:122,Horsepower:80,Weight_in_lbs:2451,Acceleration:16.5,Year:"1974-01-01",Origin:"USA"},{Name:"toyota corolla 1200",Miles_per_Gallon:32,Cylinders:4,Displacement:71,Horsepower:65,Weight_in_lbs:1836,Acceleration:21,Year:"1974-01-01",Origin:"Japan"},{Name:"chevrolet vega",Miles_per_Gallon:25,Cylinders:4,Displacement:140,Horsepower:75,Weight_in_lbs:2542,Acceleration:17,Year:"1974-01-01",Origin:"USA"},{Name:"chevrolet chevelle malibu classic",Miles_per_Gallon:16,Cylinders:6,Displacement:250,Horsepower:100,Weight_in_lbs:3781,Acceleration:17,Year:"1974-01-01",Origin:"USA"},{Name:"amc matador",Miles_per_Gallon:16,Cylinders:6,Displacement:258,Horsepower:110,Weight_in_lbs:3632,Acceleration:18,Year:"1974-01-01",Origin:"USA"},{Name:"plymouth satellite sebring",Miles_per_Gallon:18,Cylinders:6,Displacement:225,Horsepower:105,Weight_in_lbs:3613,Acceleration:16.5,Year:"1974-01-01",Origin:"USA"},{Name:"ford gran torino",Miles_per_Gallon:16,Cylinders:8,Displacement:302,Horsepower:140,Weight_in_lbs:4141,Acceleration:14,Year:"1974-01-01",Origin:"USA"},{Name:"buick century luxus (sw)",Miles_per_Gallon:13,Cylinders:8,Displacement:350,Horsepower:150,Weight_in_lbs:4699,Acceleration:14.5,Year:"1974-01-01",Origin:"USA"},{Name:"dodge coronet custom (sw)",Miles_per_Gallon:14,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:4457,Acceleration:13.5,Year:"1974-01-01",Origin:"USA"},{Name:"ford gran torino (sw)",Miles_per_Gallon:14,Cylinders:8,Displacement:302,Horsepower:140,Weight_in_lbs:4638,Acceleration:16,Year:"1974-01-01",Origin:"USA"},{Name:"amc matador (sw)",Miles_per_Gallon:14,Cylinders:8,Displacement:304,Horsepower:150,Weight_in_lbs:4257,Acceleration:15.5,Year:"1974-01-01",Origin:"USA"},{Name:"audi fox",Miles_per_Gallon:29,Cylinders:4,Displacement:98,Horsepower:83,Weight_in_lbs:2219,Acceleration:16.5,Year:"1974-01-01",Origin:"Europe"},{Name:"volkswagen dasher",Miles_per_Gallon:26,Cylinders:4,Displacement:79,Horsepower:67,Weight_in_lbs:1963,Acceleration:15.5,Year:"1974-01-01",Origin:"Europe"},{Name:"opel manta",Miles_per_Gallon:26,Cylinders:4,Displacement:97,Horsepower:78,Weight_in_lbs:2300,Acceleration:14.5,Year:"1974-01-01",Origin:"Europe"},{Name:"toyota corona",Miles_per_Gallon:31,Cylinders:4,Displacement:76,Horsepower:52,Weight_in_lbs:1649,Acceleration:16.5,Year:"1974-01-01",Origin:"Japan"},{Name:"datsun 710",Miles_per_Gallon:32,Cylinders:4,Displacement:83,Horsepower:61,Weight_in_lbs:2003,Acceleration:19,Year:"1974-01-01",Origin:"Japan"},{Name:"dodge colt",Miles_per_Gallon:28,Cylinders:4,Displacement:90,Horsepower:75,Weight_in_lbs:2125,Acceleration:14.5,Year:"1974-01-01",Origin:"USA"},{Name:"fiat 128",Miles_per_Gallon:24,Cylinders:4,Displacement:90,Horsepower:75,Weight_in_lbs:2108,Acceleration:15.5,Year:"1974-01-01",Origin:"Europe"},{Name:"fiat 124 tc",Miles_per_Gallon:26,Cylinders:4,Displacement:116,Horsepower:75,Weight_in_lbs:2246,Acceleration:14,Year:"1974-01-01",Origin:"Europe"},{Name:"honda civic",Miles_per_Gallon:24,Cylinders:4,Displacement:120,Horsepower:97,Weight_in_lbs:2489,Acceleration:15,Year:"1974-01-01",Origin:"Japan"},{Name:"subaru",Miles_per_Gallon:26,Cylinders:4,Displacement:108,Horsepower:93,Weight_in_lbs:2391,Acceleration:15.5,Year:"1974-01-01",Origin:"Japan"},{Name:"fiat x1.9",Miles_per_Gallon:31,Cylinders:4,Displacement:79,Horsepower:67,Weight_in_lbs:2e3,Acceleration:16,Year:"1974-01-01",Origin:"Europe"},{Name:"plymouth valiant custom",Miles_per_Gallon:19,Cylinders:6,Displacement:225,Horsepower:95,Weight_in_lbs:3264,Acceleration:16,Year:"1975-01-01",Origin:"USA"},{Name:"chevrolet nova",Miles_per_Gallon:18,Cylinders:6,Displacement:250,Horsepower:105,Weight_in_lbs:3459,Acceleration:16,Year:"1975-01-01",Origin:"USA"},{Name:"mercury monarch",Miles_per_Gallon:15,Cylinders:6,Displacement:250,Horsepower:72,Weight_in_lbs:3432,Acceleration:21,Year:"1975-01-01",Origin:"USA"},{Name:"ford maverick",Miles_per_Gallon:15,Cylinders:6,Displacement:250,Horsepower:72,Weight_in_lbs:3158,Acceleration:19.5,Year:"1975-01-01",Origin:"USA"},{Name:"pontiac catalina",Miles_per_Gallon:16,Cylinders:8,Displacement:400,Horsepower:170,Weight_in_lbs:4668,Acceleration:11.5,Year:"1975-01-01",Origin:"USA"},{Name:"chevrolet bel air",Miles_per_Gallon:15,Cylinders:8,Displacement:350,Horsepower:145,Weight_in_lbs:4440,Acceleration:14,Year:"1975-01-01",Origin:"USA"},{Name:"plymouth grand fury",Miles_per_Gallon:16,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:4498,Acceleration:14.5,Year:"1975-01-01",Origin:"USA"},{Name:"ford ltd",Miles_per_Gallon:14,Cylinders:8,Displacement:351,Horsepower:148,Weight_in_lbs:4657,Acceleration:13.5,Year:"1975-01-01",Origin:"USA"},{Name:"buick century",Miles_per_Gallon:17,Cylinders:6,Displacement:231,Horsepower:110,Weight_in_lbs:3907,Acceleration:21,Year:"1975-01-01",Origin:"USA"},{Name:"chevroelt chevelle malibu",Miles_per_Gallon:16,Cylinders:6,Displacement:250,Horsepower:105,Weight_in_lbs:3897,Acceleration:18.5,Year:"1975-01-01",Origin:"USA"},{Name:"amc matador",Miles_per_Gallon:15,Cylinders:6,Displacement:258,Horsepower:110,Weight_in_lbs:3730,Acceleration:19,Year:"1975-01-01",Origin:"USA"},{Name:"plymouth fury",Miles_per_Gallon:18,Cylinders:6,Displacement:225,Horsepower:95,Weight_in_lbs:3785,Acceleration:19,Year:"1975-01-01",Origin:"USA"},{Name:"buick skyhawk",Miles_per_Gallon:21,Cylinders:6,Displacement:231,Horsepower:110,Weight_in_lbs:3039,Acceleration:15,Year:"1975-01-01",Origin:"USA"},{Name:"chevrolet monza 2+2",Miles_per_Gallon:20,Cylinders:8,Displacement:262,Horsepower:110,Weight_in_lbs:3221,Acceleration:13.5,Year:"1975-01-01",Origin:"USA"},{Name:"ford mustang ii",Miles_per_Gallon:13,Cylinders:8,Displacement:302,Horsepower:129,Weight_in_lbs:3169,Acceleration:12,Year:"1975-01-01",Origin:"USA"},{Name:"toyota corolla",Miles_per_Gallon:29,Cylinders:4,Displacement:97,Horsepower:75,Weight_in_lbs:2171,Acceleration:16,Year:"1975-01-01",Origin:"Japan"},{Name:"ford pinto",Miles_per_Gallon:23,Cylinders:4,Displacement:140,Horsepower:83,Weight_in_lbs:2639,Acceleration:17,Year:"1975-01-01",Origin:"USA"},{Name:"amc gremlin",Miles_per_Gallon:20,Cylinders:6,Displacement:232,Horsepower:100,Weight_in_lbs:2914,Acceleration:16,Year:"1975-01-01",Origin:"USA"},{Name:"pontiac astro",Miles_per_Gallon:23,Cylinders:4,Displacement:140,Horsepower:78,Weight_in_lbs:2592,Acceleration:18.5,Year:"1975-01-01",Origin:"USA"},{Name:"toyota corona",Miles_per_Gallon:24,Cylinders:4,Displacement:134,Horsepower:96,Weight_in_lbs:2702,Acceleration:13.5,Year:"1975-01-01",Origin:"Japan"},{Name:"volkswagen dasher",Miles_per_Gallon:25,Cylinders:4,Displacement:90,Horsepower:71,Weight_in_lbs:2223,Acceleration:16.5,Year:"1975-01-01",Origin:"Europe"},{Name:"datsun 710",Miles_per_Gallon:24,Cylinders:4,Displacement:119,Horsepower:97,Weight_in_lbs:2545,Acceleration:17,Year:"1975-01-01",Origin:"Japan"},{Name:"ford pinto",Miles_per_Gallon:18,Cylinders:6,Displacement:171,Horsepower:97,Weight_in_lbs:2984,Acceleration:14.5,Year:"1975-01-01",Origin:"USA"},{Name:"volkswagen rabbit",Miles_per_Gallon:29,Cylinders:4,Displacement:90,Horsepower:70,Weight_in_lbs:1937,Acceleration:14,Year:"1975-01-01",Origin:"Europe"},{Name:"amc pacer",Miles_per_Gallon:19,Cylinders:6,Displacement:232,Horsepower:90,Weight_in_lbs:3211,Acceleration:17,Year:"1975-01-01",Origin:"USA"},{Name:"audi 100ls",Miles_per_Gallon:23,Cylinders:4,Displacement:115,Horsepower:95,Weight_in_lbs:2694,Acceleration:15,Year:"1975-01-01",Origin:"Europe"},{Name:"peugeot 504",Miles_per_Gallon:23,Cylinders:4,Displacement:120,Horsepower:88,Weight_in_lbs:2957,Acceleration:17,Year:"1975-01-01",Origin:"Europe"},{Name:"volvo 244dl",Miles_per_Gallon:22,Cylinders:4,Displacement:121,Horsepower:98,Weight_in_lbs:2945,Acceleration:14.5,Year:"1975-01-01",Origin:"Europe"},{Name:"saab 99le",Miles_per_Gallon:25,Cylinders:4,Displacement:121,Horsepower:115,Weight_in_lbs:2671,Acceleration:13.5,Year:"1975-01-01",Origin:"Europe"},{Name:"honda civic cvcc",Miles_per_Gallon:33,Cylinders:4,Displacement:91,Horsepower:53,Weight_in_lbs:1795,Acceleration:17.5,Year:"1975-01-01",Origin:"Japan"},{Name:"fiat 131",Miles_per_Gallon:28,Cylinders:4,Displacement:107,Horsepower:86,Weight_in_lbs:2464,Acceleration:15.5,Year:"1976-01-01",Origin:"Europe"},{Name:"opel 1900",Miles_per_Gallon:25,Cylinders:4,Displacement:116,Horsepower:81,Weight_in_lbs:2220,Acceleration:16.9,Year:"1976-01-01",Origin:"Europe"},{Name:"capri ii",Miles_per_Gallon:25,Cylinders:4,Displacement:140,Horsepower:92,Weight_in_lbs:2572,Acceleration:14.9,Year:"1976-01-01",Origin:"USA"},{Name:"dodge colt",Miles_per_Gallon:26,Cylinders:4,Displacement:98,Horsepower:79,Weight_in_lbs:2255,Acceleration:17.7,Year:"1976-01-01",Origin:"USA"},{Name:"renault 12tl",Miles_per_Gallon:27,Cylinders:4,Displacement:101,Horsepower:83,Weight_in_lbs:2202,Acceleration:15.3,Year:"1976-01-01",Origin:"Europe"},{Name:"chevrolet chevelle malibu classic",Miles_per_Gallon:17.5,Cylinders:8,Displacement:305,Horsepower:140,Weight_in_lbs:4215,Acceleration:13,Year:"1976-01-01",Origin:"USA"},{Name:"dodge coronet brougham",Miles_per_Gallon:16,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:4190,Acceleration:13,Year:"1976-01-01",Origin:"USA"},{Name:"amc matador",Miles_per_Gallon:15.5,Cylinders:8,Displacement:304,Horsepower:120,Weight_in_lbs:3962,Acceleration:13.9,Year:"1976-01-01",Origin:"USA"},{Name:"ford gran torino",Miles_per_Gallon:14.5,Cylinders:8,Displacement:351,Horsepower:152,Weight_in_lbs:4215,Acceleration:12.8,Year:"1976-01-01",Origin:"USA"},{Name:"plymouth valiant",Miles_per_Gallon:22,Cylinders:6,Displacement:225,Horsepower:100,Weight_in_lbs:3233,Acceleration:15.4,Year:"1976-01-01",Origin:"USA"},{Name:"chevrolet nova",Miles_per_Gallon:22,Cylinders:6,Displacement:250,Horsepower:105,Weight_in_lbs:3353,Acceleration:14.5,Year:"1976-01-01",Origin:"USA"},{Name:"ford maverick",Miles_per_Gallon:24,Cylinders:6,Displacement:200,Horsepower:81,Weight_in_lbs:3012,Acceleration:17.6,Year:"1976-01-01",Origin:"USA"},{Name:"amc hornet",Miles_per_Gallon:22.5,Cylinders:6,Displacement:232,Horsepower:90,Weight_in_lbs:3085,Acceleration:17.6,Year:"1976-01-01",Origin:"USA"},{Name:"chevrolet chevette",Miles_per_Gallon:29,Cylinders:4,Displacement:85,Horsepower:52,Weight_in_lbs:2035,Acceleration:22.2,Year:"1976-01-01",Origin:"USA"},{Name:"chevrolet woody",Miles_per_Gallon:24.5,Cylinders:4,Displacement:98,Horsepower:60,Weight_in_lbs:2164,Acceleration:22.1,Year:"1976-01-01",Origin:"USA"},{Name:"vw rabbit",Miles_per_Gallon:29,Cylinders:4,Displacement:90,Horsepower:70,Weight_in_lbs:1937,Acceleration:14.2,Year:"1976-01-01",Origin:"Europe"},{Name:"honda civic",Miles_per_Gallon:33,Cylinders:4,Displacement:91,Horsepower:53,Weight_in_lbs:1795,Acceleration:17.4,Year:"1976-01-01",Origin:"Japan"},{Name:"dodge aspen se",Miles_per_Gallon:20,Cylinders:6,Displacement:225,Horsepower:100,Weight_in_lbs:3651,Acceleration:17.7,Year:"1976-01-01",Origin:"USA"},{Name:"ford granada ghia",Miles_per_Gallon:18,Cylinders:6,Displacement:250,Horsepower:78,Weight_in_lbs:3574,Acceleration:21,Year:"1976-01-01",Origin:"USA"},{Name:"pontiac ventura sj",Miles_per_Gallon:18.5,Cylinders:6,Displacement:250,Horsepower:110,Weight_in_lbs:3645,Acceleration:16.2,Year:"1976-01-01",Origin:"USA"},{Name:"amc pacer d/l",Miles_per_Gallon:17.5,Cylinders:6,Displacement:258,Horsepower:95,Weight_in_lbs:3193,Acceleration:17.8,Year:"1976-01-01",Origin:"USA"},{Name:"volkswagen rabbit",Miles_per_Gallon:29.5,Cylinders:4,Displacement:97,Horsepower:71,Weight_in_lbs:1825,Acceleration:12.2,Year:"1976-01-01",Origin:"Europe"},{Name:"datsun b-210",Miles_per_Gallon:32,Cylinders:4,Displacement:85,Horsepower:70,Weight_in_lbs:1990,Acceleration:17,Year:"1976-01-01",Origin:"Japan"},{Name:"toyota corolla",Miles_per_Gallon:28,Cylinders:4,Displacement:97,Horsepower:75,Weight_in_lbs:2155,Acceleration:16.4,Year:"1976-01-01",Origin:"Japan"},{Name:"ford pinto",Miles_per_Gallon:26.5,Cylinders:4,Displacement:140,Horsepower:72,Weight_in_lbs:2565,Acceleration:13.6,Year:"1976-01-01",Origin:"USA"},{Name:"volvo 245",Miles_per_Gallon:20,Cylinders:4,Displacement:130,Horsepower:102,Weight_in_lbs:3150,Acceleration:15.7,Year:"1976-01-01",Origin:"Europe"},{Name:"plymouth volare premier v8",Miles_per_Gallon:13,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:3940,Acceleration:13.2,Year:"1976-01-01",Origin:"USA"},{Name:"peugeot 504",Miles_per_Gallon:19,Cylinders:4,Displacement:120,Horsepower:88,Weight_in_lbs:3270,Acceleration:21.9,Year:"1976-01-01",Origin:"Europe"},{Name:"toyota mark ii",Miles_per_Gallon:19,Cylinders:6,Displacement:156,Horsepower:108,Weight_in_lbs:2930,Acceleration:15.5,Year:"1976-01-01",Origin:"Japan"},{Name:"mercedes-benz 280s",Miles_per_Gallon:16.5,Cylinders:6,Displacement:168,Horsepower:120,Weight_in_lbs:3820,Acceleration:16.7,Year:"1976-01-01",Origin:"Europe"},{Name:"cadillac seville",Miles_per_Gallon:16.5,Cylinders:8,Displacement:350,Horsepower:180,Weight_in_lbs:4380,Acceleration:12.1,Year:"1976-01-01",Origin:"USA"},{Name:"chevy c10",Miles_per_Gallon:13,Cylinders:8,Displacement:350,Horsepower:145,Weight_in_lbs:4055,Acceleration:12,Year:"1976-01-01",Origin:"USA"},{Name:"ford f108",Miles_per_Gallon:13,Cylinders:8,Displacement:302,Horsepower:130,Weight_in_lbs:3870,Acceleration:15,Year:"1976-01-01",Origin:"USA"},{Name:"dodge d100",Miles_per_Gallon:13,Cylinders:8,Displacement:318,Horsepower:150,Weight_in_lbs:3755,Acceleration:14,Year:"1976-01-01",Origin:"USA"},{Name:"honda Accelerationord cvcc",Miles_per_Gallon:31.5,Cylinders:4,Displacement:98,Horsepower:68,Weight_in_lbs:2045,Acceleration:18.5,Year:"1977-01-01",Origin:"Japan"},{Name:"buick opel isuzu deluxe",Miles_per_Gallon:30,Cylinders:4,Displacement:111,Horsepower:80,Weight_in_lbs:2155,Acceleration:14.8,Year:"1977-01-01",Origin:"USA"},{Name:"renault 5 gtl",Miles_per_Gallon:36,Cylinders:4,Displacement:79,Horsepower:58,Weight_in_lbs:1825,Acceleration:18.6,Year:"1977-01-01",Origin:"Europe"},{Name:"plymouth arrow gs",Miles_per_Gallon:25.5,Cylinders:4,Displacement:122,Horsepower:96,Weight_in_lbs:2300,Acceleration:15.5,Year:"1977-01-01",Origin:"USA"},{Name:"datsun f-10 hatchback",Miles_per_Gallon:33.5,Cylinders:4,Displacement:85,Horsepower:70,Weight_in_lbs:1945,Acceleration:16.8,Year:"1977-01-01",Origin:"Japan"},{Name:"chevrolet caprice classic",Miles_per_Gallon:17.5,Cylinders:8,Displacement:305,Horsepower:145,Weight_in_lbs:3880,Acceleration:12.5,Year:"1977-01-01",Origin:"USA"},{Name:"oldsmobile cutlass supreme",Miles_per_Gallon:17,Cylinders:8,Displacement:260,Horsepower:110,Weight_in_lbs:4060,Acceleration:19,Year:"1977-01-01",Origin:"USA"},{Name:"dodge monaco brougham",Miles_per_Gallon:15.5,Cylinders:8,Displacement:318,Horsepower:145,Weight_in_lbs:4140,Acceleration:13.7,Year:"1977-01-01",Origin:"USA"},{Name:"mercury cougar brougham",Miles_per_Gallon:15,Cylinders:8,Displacement:302,Horsepower:130,Weight_in_lbs:4295,Acceleration:14.9,Year:"1977-01-01",Origin:"USA"},{Name:"chevrolet concours",Miles_per_Gallon:17.5,Cylinders:6,Displacement:250,Horsepower:110,Weight_in_lbs:3520,Acceleration:16.4,Year:"1977-01-01",Origin:"USA"},{Name:"buick skylark",Miles_per_Gallon:20.5,Cylinders:6,Displacement:231,Horsepower:105,Weight_in_lbs:3425,Acceleration:16.9,Year:"1977-01-01",Origin:"USA"},{Name:"plymouth volare custom",Miles_per_Gallon:19,Cylinders:6,Displacement:225,Horsepower:100,Weight_in_lbs:3630,Acceleration:17.7,Year:"1977-01-01",Origin:"USA"},{Name:"ford granada",Miles_per_Gallon:18.5,Cylinders:6,Displacement:250,Horsepower:98,Weight_in_lbs:3525,Acceleration:19,Year:"1977-01-01",Origin:"USA"},{Name:"pontiac grand prix lj",Miles_per_Gallon:16,Cylinders:8,Displacement:400,Horsepower:180,Weight_in_lbs:4220,Acceleration:11.1,Year:"1977-01-01",Origin:"USA"},{Name:"chevrolet monte carlo landau",Miles_per_Gallon:15.5,Cylinders:8,Displacement:350,Horsepower:170,Weight_in_lbs:4165,Acceleration:11.4,Year:"1977-01-01",Origin:"USA"},{Name:"chrysler cordoba",Miles_per_Gallon:15.5,Cylinders:8,Displacement:400,Horsepower:190,Weight_in_lbs:4325,Acceleration:12.2,Year:"1977-01-01",Origin:"USA"},{Name:"ford thunderbird",Miles_per_Gallon:16,Cylinders:8,Displacement:351,Horsepower:149,Weight_in_lbs:4335,Acceleration:14.5,Year:"1977-01-01",Origin:"USA"},{Name:"volkswagen rabbit custom",Miles_per_Gallon:29,Cylinders:4,Displacement:97,Horsepower:78,Weight_in_lbs:1940,Acceleration:14.5,Year:"1977-01-01",Origin:"Europe"},{Name:"pontiac sunbird coupe",Miles_per_Gallon:24.5,Cylinders:4,Displacement:151,Horsepower:88,Weight_in_lbs:2740,Acceleration:16,Year:"1977-01-01",Origin:"USA"},{Name:"toyota corolla liftback",Miles_per_Gallon:26,Cylinders:4,Displacement:97,Horsepower:75,Weight_in_lbs:2265,Acceleration:18.2,Year:"1977-01-01",Origin:"Japan"},{Name:"ford mustang ii 2+2",Miles_per_Gallon:25.5,Cylinders:4,Displacement:140,Horsepower:89,Weight_in_lbs:2755,Acceleration:15.8,Year:"1977-01-01",Origin:"USA"},{Name:"chevrolet chevette",Miles_per_Gallon:30.5,Cylinders:4,Displacement:98,Horsepower:63,Weight_in_lbs:2051,Acceleration:17,Year:"1977-01-01",Origin:"USA"},{Name:"dodge colt m/m",Miles_per_Gallon:33.5,Cylinders:4,Displacement:98,Horsepower:83,Weight_in_lbs:2075,Acceleration:15.9,Year:"1977-01-01",Origin:"USA"},{Name:"subaru dl",Miles_per_Gallon:30,Cylinders:4,Displacement:97,Horsepower:67,Weight_in_lbs:1985,Acceleration:16.4,Year:"1977-01-01",Origin:"Japan"},{Name:"volkswagen dasher",Miles_per_Gallon:30.5,Cylinders:4,Displacement:97,Horsepower:78,Weight_in_lbs:2190,Acceleration:14.1,Year:"1977-01-01",Origin:"Europe"},{Name:"datsun 810",Miles_per_Gallon:22,Cylinders:6,Displacement:146,Horsepower:97,Weight_in_lbs:2815,Acceleration:14.5,Year:"1977-01-01",Origin:"Japan"},{Name:"bmw 320i",Miles_per_Gallon:21.5,Cylinders:4,Displacement:121,Horsepower:110,Weight_in_lbs:2600,Acceleration:12.8,Year:"1977-01-01",Origin:"Europe"},{Name:"mazda rx-4",Miles_per_Gallon:21.5,Cylinders:3,Displacement:80,Horsepower:110,Weight_in_lbs:2720,Acceleration:13.5,Year:"1977-01-01",Origin:"Japan"},{Name:"volkswagen rabbit custom diesel",Miles_per_Gallon:43.1,Cylinders:4,Displacement:90,Horsepower:48,Weight_in_lbs:1985,Acceleration:21.5,Year:"1978-01-01",Origin:"Europe"},{Name:"ford fiesta",Miles_per_Gallon:36.1,Cylinders:4,Displacement:98,Horsepower:66,Weight_in_lbs:1800,Acceleration:14.4,Year:"1978-01-01",Origin:"USA"},{Name:"mazda glc deluxe",Miles_per_Gallon:32.8,Cylinders:4,Displacement:78,Horsepower:52,Weight_in_lbs:1985,Acceleration:19.4,Year:"1978-01-01",Origin:"Japan"},{Name:"datsun b210 gx",Miles_per_Gallon:39.4,Cylinders:4,Displacement:85,Horsepower:70,Weight_in_lbs:2070,Acceleration:18.6,Year:"1978-01-01",Origin:"Japan"},{Name:"honda civic cvcc",Miles_per_Gallon:36.1,Cylinders:4,Displacement:91,Horsepower:60,Weight_in_lbs:1800,Acceleration:16.4,Year:"1978-01-01",Origin:"Japan"},{Name:"oldsmobile cutlass salon brougham",Miles_per_Gallon:19.9,Cylinders:8,Displacement:260,Horsepower:110,Weight_in_lbs:3365,Acceleration:15.5,Year:"1978-01-01",Origin:"USA"},{Name:"dodge diplomat",Miles_per_Gallon:19.4,Cylinders:8,Displacement:318,Horsepower:140,Weight_in_lbs:3735,Acceleration:13.2,Year:"1978-01-01",Origin:"USA"},{Name:"mercury monarch ghia",Miles_per_Gallon:20.2,Cylinders:8,Displacement:302,Horsepower:139,Weight_in_lbs:3570,Acceleration:12.8,Year:"1978-01-01",Origin:"USA"},{Name:"pontiac phoenix lj",Miles_per_Gallon:19.2,Cylinders:6,Displacement:231,Horsepower:105,Weight_in_lbs:3535,Acceleration:19.2,Year:"1978-01-01",Origin:"USA"},{Name:"chevrolet malibu",Miles_per_Gallon:20.5,Cylinders:6,Displacement:200,Horsepower:95,Weight_in_lbs:3155,Acceleration:18.2,Year:"1978-01-01",Origin:"USA"},{Name:"ford fairmont (auto)",Miles_per_Gallon:20.2,Cylinders:6,Displacement:200,Horsepower:85,Weight_in_lbs:2965,Acceleration:15.8,Year:"1978-01-01",Origin:"USA"},{Name:"ford fairmont (man)",Miles_per_Gallon:25.1,Cylinders:4,Displacement:140,Horsepower:88,Weight_in_lbs:2720,Acceleration:15.4,Year:"1978-01-01",Origin:"USA"},{Name:"plymouth volare",Miles_per_Gallon:20.5,Cylinders:6,Displacement:225,Horsepower:100,Weight_in_lbs:3430,Acceleration:17.2,Year:"1978-01-01",Origin:"USA"},{Name:"amc concord",Miles_per_Gallon:19.4,Cylinders:6,Displacement:232,Horsepower:90,Weight_in_lbs:3210,Acceleration:17.2,Year:"1978-01-01",Origin:"USA"},{Name:"buick century special",Miles_per_Gallon:20.6,Cylinders:6,Displacement:231,Horsepower:105,Weight_in_lbs:3380,Acceleration:15.8,Year:"1978-01-01",Origin:"USA"},{Name:"mercury zephyr",Miles_per_Gallon:20.8,Cylinders:6,Displacement:200,Horsepower:85,Weight_in_lbs:3070,Acceleration:16.7,Year:"1978-01-01",Origin:"USA"},{Name:"dodge aspen",Miles_per_Gallon:18.6,Cylinders:6,Displacement:225,Horsepower:110,Weight_in_lbs:3620,Acceleration:18.7,Year:"1978-01-01",Origin:"USA"},{Name:"amc concord d/l",Miles_per_Gallon:18.1,Cylinders:6,Displacement:258,Horsepower:120,Weight_in_lbs:3410,Acceleration:15.1,Year:"1978-01-01",Origin:"USA"},{Name:"chevrolet monte carlo landau",Miles_per_Gallon:19.2,Cylinders:8,Displacement:305,Horsepower:145,Weight_in_lbs:3425,Acceleration:13.2,Year:"1978-01-01",Origin:"USA"},{Name:"buick regal sport coupe (turbo)",Miles_per_Gallon:17.7,Cylinders:6,Displacement:231,Horsepower:165,Weight_in_lbs:3445,Acceleration:13.4,Year:"1978-01-01",Origin:"USA"},{Name:"ford futura",Miles_per_Gallon:18.1,Cylinders:8,Displacement:302,Horsepower:139,Weight_in_lbs:3205,Acceleration:11.2,Year:"1978-01-01",Origin:"USA"},{Name:"dodge magnum xe",Miles_per_Gallon:17.5,Cylinders:8,Displacement:318,Horsepower:140,Weight_in_lbs:4080,Acceleration:13.7,Year:"1978-01-01",Origin:"USA"},{Name:"chevrolet chevette",Miles_per_Gallon:30,Cylinders:4,Displacement:98,Horsepower:68,Weight_in_lbs:2155,Acceleration:16.5,Year:"1978-01-01",Origin:"USA"},{Name:"toyota corona",Miles_per_Gallon:27.5,Cylinders:4,Displacement:134,Horsepower:95,Weight_in_lbs:2560,Acceleration:14.2,Year:"1978-01-01",Origin:"Japan"},{Name:"datsun 510",Miles_per_Gallon:27.2,Cylinders:4,Displacement:119,Horsepower:97,Weight_in_lbs:2300,Acceleration:14.7,Year:"1978-01-01",Origin:"Japan"},{Name:"dodge omni",Miles_per_Gallon:30.9,Cylinders:4,Displacement:105,Horsepower:75,Weight_in_lbs:2230,Acceleration:14.5,Year:"1978-01-01",Origin:"USA"},{Name:"toyota celica gt liftback",Miles_per_Gallon:21.1,Cylinders:4,Displacement:134,Horsepower:95,Weight_in_lbs:2515,Acceleration:14.8,Year:"1978-01-01",Origin:"Japan"},{Name:"plymouth sapporo",Miles_per_Gallon:23.2,Cylinders:4,Displacement:156,Horsepower:105,Weight_in_lbs:2745,Acceleration:16.7,Year:"1978-01-01",Origin:"USA"},{Name:"oldsmobile starfire sx",Miles_per_Gallon:23.8,Cylinders:4,Displacement:151,Horsepower:85,Weight_in_lbs:2855,Acceleration:17.6,Year:"1978-01-01",Origin:"USA"},{Name:"datsun 200-sx",Miles_per_Gallon:23.9,Cylinders:4,Displacement:119,Horsepower:97,Weight_in_lbs:2405,Acceleration:14.9,Year:"1978-01-01",Origin:"Japan"},{Name:"audi 5000",Miles_per_Gallon:20.3,Cylinders:5,Displacement:131,Horsepower:103,Weight_in_lbs:2830,Acceleration:15.9,Year:"1978-01-01",Origin:"Europe"},{Name:"volvo 264gl",Miles_per_Gallon:17,Cylinders:6,Displacement:163,Horsepower:125,Weight_in_lbs:3140,Acceleration:13.6,Year:"1978-01-01",Origin:"Europe"},{Name:"saab 99gle",Miles_per_Gallon:21.6,Cylinders:4,Displacement:121,Horsepower:115,Weight_in_lbs:2795,Acceleration:15.7,Year:"1978-01-01",Origin:"Europe"},{Name:"peugeot 604sl",Miles_per_Gallon:16.2,Cylinders:6,Displacement:163,Horsepower:133,Weight_in_lbs:3410,Acceleration:15.8,Year:"1978-01-01",Origin:"Europe"},{Name:"volkswagen scirocco",Miles_per_Gallon:31.5,Cylinders:4,Displacement:89,Horsepower:71,Weight_in_lbs:1990,Acceleration:14.9,Year:"1978-01-01",Origin:"Europe"},{Name:"honda Accelerationord lx",Miles_per_Gallon:29.5,Cylinders:4,Displacement:98,Horsepower:68,Weight_in_lbs:2135,Acceleration:16.6,Year:"1978-01-01",Origin:"Japan"},{Name:"pontiac lemans v6",Miles_per_Gallon:21.5,Cylinders:6,Displacement:231,Horsepower:115,Weight_in_lbs:3245,Acceleration:15.4,Year:"1979-01-01",Origin:"USA"},{Name:"mercury zephyr 6",Miles_per_Gallon:19.8,Cylinders:6,Displacement:200,Horsepower:85,Weight_in_lbs:2990,Acceleration:18.2,Year:"1979-01-01",Origin:"USA"},{Name:"ford fairmont 4",Miles_per_Gallon:22.3,Cylinders:4,Displacement:140,Horsepower:88,Weight_in_lbs:2890,Acceleration:17.3,Year:"1979-01-01",Origin:"USA"},{Name:"amc concord dl 6",Miles_per_Gallon:20.2,Cylinders:6,Displacement:232,Horsepower:90,Weight_in_lbs:3265,Acceleration:18.2,Year:"1979-01-01",Origin:"USA"},{Name:"dodge aspen 6",Miles_per_Gallon:20.6,Cylinders:6,Displacement:225,Horsepower:110,Weight_in_lbs:3360,Acceleration:16.6,Year:"1979-01-01",Origin:"USA"},{Name:"chevrolet caprice classic",Miles_per_Gallon:17,Cylinders:8,Displacement:305,Horsepower:130,Weight_in_lbs:3840,Acceleration:15.4,Year:"1979-01-01",Origin:"USA"},{Name:"ford ltd landau",Miles_per_Gallon:17.6,Cylinders:8,Displacement:302,Horsepower:129,Weight_in_lbs:3725,Acceleration:13.4,Year:"1979-01-01",Origin:"USA"},{Name:"mercury grand marquis",Miles_per_Gallon:16.5,Cylinders:8,Displacement:351,Horsepower:138,Weight_in_lbs:3955,Acceleration:13.2,Year:"1979-01-01",Origin:"USA"},{Name:"dodge st. regis",Miles_per_Gallon:18.2,Cylinders:8,Displacement:318,Horsepower:135,Weight_in_lbs:3830,Acceleration:15.2,Year:"1979-01-01",Origin:"USA"},{Name:"buick estate wagon (sw)",Miles_per_Gallon:16.9,Cylinders:8,Displacement:350,Horsepower:155,Weight_in_lbs:4360,Acceleration:14.9,Year:"1979-01-01",Origin:"USA"},{Name:"ford country squire (sw)",Miles_per_Gallon:15.5,Cylinders:8,Displacement:351,Horsepower:142,Weight_in_lbs:4054,Acceleration:14.3,Year:"1979-01-01",Origin:"USA"},{Name:"chevrolet malibu classic (sw)",Miles_per_Gallon:19.2,Cylinders:8,Displacement:267,Horsepower:125,Weight_in_lbs:3605,Acceleration:15,Year:"1979-01-01",Origin:"USA"},{Name:"chrysler lebaron town @ country (sw)",Miles_per_Gallon:18.5,Cylinders:8,Displacement:360,Horsepower:150,Weight_in_lbs:3940,Acceleration:13,Year:"1979-01-01",Origin:"USA"},{Name:"vw rabbit custom",Miles_per_Gallon:31.9,Cylinders:4,Displacement:89,Horsepower:71,Weight_in_lbs:1925,Acceleration:14,Year:"1979-01-01",Origin:"Europe"},{Name:"maxda glc deluxe",Miles_per_Gallon:34.1,Cylinders:4,Displacement:86,Horsepower:65,Weight_in_lbs:1975,Acceleration:15.2,Year:"1979-01-01",Origin:"Japan"},{Name:"dodge colt hatchback custom",Miles_per_Gallon:35.7,Cylinders:4,Displacement:98,Horsepower:80,Weight_in_lbs:1915,Acceleration:14.4,Year:"1979-01-01",Origin:"USA"},{Name:"amc spirit dl",Miles_per_Gallon:27.4,Cylinders:4,Displacement:121,Horsepower:80,Weight_in_lbs:2670,Acceleration:15,Year:"1979-01-01",Origin:"USA"},{Name:"mercedes benz 300d",Miles_per_Gallon:25.4,Cylinders:5,Displacement:183,Horsepower:77,Weight_in_lbs:3530,Acceleration:20.1,Year:"1979-01-01",Origin:"Europe"},{Name:"cadillac eldorado",Miles_per_Gallon:23,Cylinders:8,Displacement:350,Horsepower:125,Weight_in_lbs:3900,Acceleration:17.4,Year:"1979-01-01",Origin:"USA"},{Name:"peugeot 504",Miles_per_Gallon:27.2,Cylinders:4,Displacement:141,Horsepower:71,Weight_in_lbs:3190,Acceleration:24.8,Year:"1979-01-01",Origin:"Europe"},{Name:"oldsmobile cutlass salon brougham",Miles_per_Gallon:23.9,Cylinders:8,Displacement:260,Horsepower:90,Weight_in_lbs:3420,Acceleration:22.2,Year:"1979-01-01",Origin:"USA"},{Name:"plymouth horizon",Miles_per_Gallon:34.2,Cylinders:4,Displacement:105,Horsepower:70,Weight_in_lbs:2200,Acceleration:13.2,Year:"1979-01-01",Origin:"USA"},{Name:"plymouth horizon tc3",Miles_per_Gallon:34.5,Cylinders:4,Displacement:105,Horsepower:70,Weight_in_lbs:2150,Acceleration:14.9,Year:"1979-01-01",Origin:"USA"},{Name:"datsun 210",Miles_per_Gallon:31.8,Cylinders:4,Displacement:85,Horsepower:65,Weight_in_lbs:2020,Acceleration:19.2,Year:"1979-01-01",Origin:"Japan"},{Name:"fiat strada custom",Miles_per_Gallon:37.3,Cylinders:4,Displacement:91,Horsepower:69,Weight_in_lbs:2130,Acceleration:14.7,Year:"1979-01-01",Origin:"Europe"},{Name:"buick skylark limited",Miles_per_Gallon:28.4,Cylinders:4,Displacement:151,Horsepower:90,Weight_in_lbs:2670,Acceleration:16,Year:"1979-01-01",Origin:"USA"},{Name:"chevrolet citation",Miles_per_Gallon:28.8,Cylinders:6,Displacement:173,Horsepower:115,Weight_in_lbs:2595,Acceleration:11.3,Year:"1979-01-01",Origin:"USA"},{Name:"oldsmobile omega brougham",Miles_per_Gallon:26.8,Cylinders:6,Displacement:173,Horsepower:115,Weight_in_lbs:2700,Acceleration:12.9,Year:"1979-01-01",Origin:"USA"},{Name:"pontiac phoenix",Miles_per_Gallon:33.5,Cylinders:4,Displacement:151,Horsepower:90,Weight_in_lbs:2556,Acceleration:13.2,Year:"1979-01-01",Origin:"USA"},{Name:"vw rabbit",Miles_per_Gallon:41.5,Cylinders:4,Displacement:98,Horsepower:76,Weight_in_lbs:2144,Acceleration:14.7,Year:"1980-01-01",Origin:"Europe"},{Name:"toyota corolla tercel",Miles_per_Gallon:38.1,Cylinders:4,Displacement:89,Horsepower:60,Weight_in_lbs:1968,Acceleration:18.8,Year:"1980-01-01",Origin:"Japan"},{Name:"chevrolet chevette",Miles_per_Gallon:32.1,Cylinders:4,Displacement:98,Horsepower:70,Weight_in_lbs:2120,Acceleration:15.5,Year:"1980-01-01",Origin:"USA"},{Name:"datsun 310",Miles_per_Gallon:37.2,Cylinders:4,Displacement:86,Horsepower:65,Weight_in_lbs:2019,Acceleration:16.4,Year:"1980-01-01",Origin:"Japan"},{Name:"chevrolet citation",Miles_per_Gallon:28,Cylinders:4,Displacement:151,Horsepower:90,Weight_in_lbs:2678,Acceleration:16.5,Year:"1980-01-01",Origin:"USA"},{Name:"ford fairmont",Miles_per_Gallon:26.4,Cylinders:4,Displacement:140,Horsepower:88,Weight_in_lbs:2870,Acceleration:18.1,Year:"1980-01-01",Origin:"USA"},{Name:"amc concord",Miles_per_Gallon:24.3,Cylinders:4,Displacement:151,Horsepower:90,Weight_in_lbs:3003,Acceleration:20.1,Year:"1980-01-01",Origin:"USA"},{Name:"dodge aspen",Miles_per_Gallon:19.1,Cylinders:6,Displacement:225,Horsepower:90,Weight_in_lbs:3381,Acceleration:18.7,Year:"1980-01-01",Origin:"USA"},{Name:"audi 4000",Miles_per_Gallon:34.3,Cylinders:4,Displacement:97,Horsepower:78,Weight_in_lbs:2188,Acceleration:15.8,Year:"1980-01-01",Origin:"Europe"},{Name:"toyota corona liftback",Miles_per_Gallon:29.8,Cylinders:4,Displacement:134,Horsepower:90,Weight_in_lbs:2711,Acceleration:15.5,Year:"1980-01-01",Origin:"Japan"},{Name:"mazda 626",Miles_per_Gallon:31.3,Cylinders:4,Displacement:120,Horsepower:75,Weight_in_lbs:2542,Acceleration:17.5,Year:"1980-01-01",Origin:"Japan"},{Name:"datsun 510 hatchback",Miles_per_Gallon:37,Cylinders:4,Displacement:119,Horsepower:92,Weight_in_lbs:2434,Acceleration:15,Year:"1980-01-01",Origin:"Japan"},{Name:"toyota corolla",Miles_per_Gallon:32.2,Cylinders:4,Displacement:108,Horsepower:75,Weight_in_lbs:2265,Acceleration:15.2,Year:"1980-01-01",Origin:"Japan"},{Name:"mazda glc",Miles_per_Gallon:46.6,Cylinders:4,Displacement:86,Horsepower:65,Weight_in_lbs:2110,Acceleration:17.9,Year:"1980-01-01",Origin:"Japan"},{Name:"dodge colt",Miles_per_Gallon:27.9,Cylinders:4,Displacement:156,Horsepower:105,Weight_in_lbs:2800,Acceleration:14.4,Year:"1980-01-01",Origin:"USA"},{Name:"datsun 210",Miles_per_Gallon:40.8,Cylinders:4,Displacement:85,Horsepower:65,Weight_in_lbs:2110,Acceleration:19.2,Year:"1980-01-01",Origin:"Japan"},{Name:"vw rabbit c (diesel)",Miles_per_Gallon:44.3,Cylinders:4,Displacement:90,Horsepower:48,Weight_in_lbs:2085,Acceleration:21.7,Year:"1980-01-01",Origin:"Europe"},{Name:"vw dasher (diesel)",Miles_per_Gallon:43.4,Cylinders:4,Displacement:90,Horsepower:48,Weight_in_lbs:2335,Acceleration:23.7,Year:"1980-01-01",Origin:"Europe"},{Name:"audi 5000s (diesel)",Miles_per_Gallon:36.4,Cylinders:5,Displacement:121,Horsepower:67,Weight_in_lbs:2950,Acceleration:19.9,Year:"1980-01-01",Origin:"Europe"},{Name:"mercedes-benz 240d",Miles_per_Gallon:30,Cylinders:4,Displacement:146,Horsepower:67,Weight_in_lbs:3250,Acceleration:21.8,Year:"1980-01-01",Origin:"Europe"},{Name:"honda civic 1500 gl",Miles_per_Gallon:44.6,Cylinders:4,Displacement:91,Horsepower:67,Weight_in_lbs:1850,Acceleration:13.8,Year:"1980-01-01",Origin:"Japan"},{Name:"renault lecar deluxe",Miles_per_Gallon:40.9,Cylinders:4,Displacement:85,Horsepower:null,Weight_in_lbs:1835,Acceleration:17.3,Year:"1980-01-01",Origin:"Europe"},{Name:"subaru dl",Miles_per_Gallon:33.8,Cylinders:4,Displacement:97,Horsepower:67,Weight_in_lbs:2145,Acceleration:18,Year:"1980-01-01",Origin:"Japan"},{Name:"vokswagen rabbit",Miles_per_Gallon:29.8,Cylinders:4,Displacement:89,Horsepower:62,Weight_in_lbs:1845,Acceleration:15.3,Year:"1980-01-01",Origin:"Europe"},{Name:"datsun 280-zx",Miles_per_Gallon:32.7,Cylinders:6,Displacement:168,Horsepower:132,Weight_in_lbs:2910,Acceleration:11.4,Year:"1980-01-01",Origin:"Japan"},{Name:"mazda rx-7 gs",Miles_per_Gallon:23.7,Cylinders:3,Displacement:70,Horsepower:100,Weight_in_lbs:2420,Acceleration:12.5,Year:"1980-01-01",Origin:"Japan"},{Name:"triumph tr7 coupe",Miles_per_Gallon:35,Cylinders:4,Displacement:122,Horsepower:88,Weight_in_lbs:2500,Acceleration:15.1,Year:"1980-01-01",Origin:"Europe"},{Name:"ford mustang cobra",Miles_per_Gallon:23.6,Cylinders:4,Displacement:140,Horsepower:null,Weight_in_lbs:2905,Acceleration:14.3,Year:"1980-01-01",Origin:"USA"},{Name:"honda Accelerationord",Miles_per_Gallon:32.4,Cylinders:4,Displacement:107,Horsepower:72,Weight_in_lbs:2290,Acceleration:17,Year:"1980-01-01",Origin:"Japan"},{Name:"plymouth reliant",Miles_per_Gallon:27.2,Cylinders:4,Displacement:135,Horsepower:84,Weight_in_lbs:2490,Acceleration:15.7,Year:"1982-01-01",Origin:"USA"},{Name:"buick skylark",Miles_per_Gallon:26.6,Cylinders:4,Displacement:151,Horsepower:84,Weight_in_lbs:2635,Acceleration:16.4,Year:"1982-01-01",Origin:"USA"},{Name:"dodge aries wagon (sw)",Miles_per_Gallon:25.8,Cylinders:4,Displacement:156,Horsepower:92,Weight_in_lbs:2620,Acceleration:14.4,Year:"1982-01-01",Origin:"USA"},{Name:"chevrolet citation",Miles_per_Gallon:23.5,Cylinders:6,Displacement:173,Horsepower:110,Weight_in_lbs:2725,Acceleration:12.6,Year:"1982-01-01",Origin:"USA"},{Name:"plymouth reliant",Miles_per_Gallon:30,Cylinders:4,Displacement:135,Horsepower:84,Weight_in_lbs:2385,Acceleration:12.9,Year:"1982-01-01",Origin:"USA"},{Name:"toyota starlet",Miles_per_Gallon:39.1,Cylinders:4,Displacement:79,Horsepower:58,Weight_in_lbs:1755,Acceleration:16.9,Year:"1982-01-01",Origin:"Japan"},{Name:"plymouth champ",Miles_per_Gallon:39,Cylinders:4,Displacement:86,Horsepower:64,Weight_in_lbs:1875,Acceleration:16.4,Year:"1982-01-01",Origin:"USA"},{Name:"honda civic 1300",Miles_per_Gallon:35.1,Cylinders:4,Displacement:81,Horsepower:60,Weight_in_lbs:1760,Acceleration:16.1,Year:"1982-01-01",Origin:"Japan"},{Name:"subaru",Miles_per_Gallon:32.3,Cylinders:4,Displacement:97,Horsepower:67,Weight_in_lbs:2065,Acceleration:17.8,Year:"1982-01-01",Origin:"Japan"},{Name:"datsun 210",Miles_per_Gallon:37,Cylinders:4,Displacement:85,Horsepower:65,Weight_in_lbs:1975,Acceleration:19.4,Year:"1982-01-01",Origin:"Japan"},{Name:"toyota tercel",Miles_per_Gallon:37.7,Cylinders:4,Displacement:89,Horsepower:62,Weight_in_lbs:2050,Acceleration:17.3,Year:"1982-01-01",Origin:"Japan"},{Name:"mazda glc 4",Miles_per_Gallon:34.1,Cylinders:4,Displacement:91,Horsepower:68,Weight_in_lbs:1985,Acceleration:16,Year:"1982-01-01",Origin:"Japan"},{Name:"plymouth horizon 4",Miles_per_Gallon:34.7,Cylinders:4,Displacement:105,Horsepower:63,Weight_in_lbs:2215,Acceleration:14.9,Year:"1982-01-01",Origin:"USA"},{Name:"ford escort 4w",Miles_per_Gallon:34.4,Cylinders:4,Displacement:98,Horsepower:65,Weight_in_lbs:2045,Acceleration:16.2,Year:"1982-01-01",Origin:"USA"},{Name:"ford escort 2h",Miles_per_Gallon:29.9,Cylinders:4,Displacement:98,Horsepower:65,Weight_in_lbs:2380,Acceleration:20.7,Year:"1982-01-01",Origin:"USA"},{Name:"volkswagen jetta",Miles_per_Gallon:33,Cylinders:4,Displacement:105,Horsepower:74,Weight_in_lbs:2190,Acceleration:14.2,Year:"1982-01-01",Origin:"Europe"},{Name:"renault 18i",Miles_per_Gallon:34.5,Cylinders:4,Displacement:100,Horsepower:null,Weight_in_lbs:2320,Acceleration:15.8,Year:"1982-01-01",Origin:"Europe"},{Name:"honda prelude",Miles_per_Gallon:33.7,Cylinders:4,Displacement:107,Horsepower:75,Weight_in_lbs:2210,Acceleration:14.4,Year:"1982-01-01",Origin:"Japan"},{Name:"toyota corolla",Miles_per_Gallon:32.4,Cylinders:4,Displacement:108,Horsepower:75,Weight_in_lbs:2350,Acceleration:16.8,Year:"1982-01-01",Origin:"Japan"},{Name:"datsun 200sx",Miles_per_Gallon:32.9,Cylinders:4,Displacement:119,Horsepower:100,Weight_in_lbs:2615,Acceleration:14.8,Year:"1982-01-01",Origin:"Japan"},{Name:"mazda 626",Miles_per_Gallon:31.6,Cylinders:4,Displacement:120,Horsepower:74,Weight_in_lbs:2635,Acceleration:18.3,Year:"1982-01-01",Origin:"Japan"},{Name:"peugeot 505s turbo diesel",Miles_per_Gallon:28.1,Cylinders:4,Displacement:141,Horsepower:80,Weight_in_lbs:3230,Acceleration:20.4,Year:"1982-01-01",Origin:"Europe"},{Name:"saab 900s",Miles_per_Gallon:null,Cylinders:4,Displacement:121,Horsepower:110,Weight_in_lbs:2800,Acceleration:15.4,Year:"1982-01-01",Origin:"Europe"},{Name:"volvo diesel",Miles_per_Gallon:30.7,Cylinders:6,Displacement:145,Horsepower:76,Weight_in_lbs:3160,Acceleration:19.6,Year:"1982-01-01",Origin:"Europe"},{Name:"toyota cressida",Miles_per_Gallon:25.4,Cylinders:6,Displacement:168,Horsepower:116,Weight_in_lbs:2900,Acceleration:12.6,Year:"1982-01-01",Origin:"Japan"},{Name:"datsun 810 maxima",Miles_per_Gallon:24.2,Cylinders:6,Displacement:146,Horsepower:120,Weight_in_lbs:2930,Acceleration:13.8,Year:"1982-01-01",Origin:"Japan"},{Name:"buick century",Miles_per_Gallon:22.4,Cylinders:6,Displacement:231,Horsepower:110,Weight_in_lbs:3415,Acceleration:15.8,Year:"1982-01-01",Origin:"USA"},{Name:"oldsmobile cutlass ls",Miles_per_Gallon:26.6,Cylinders:8,Displacement:350,Horsepower:105,Weight_in_lbs:3725,Acceleration:19,Year:"1982-01-01",Origin:"USA"},{Name:"ford granada gl",Miles_per_Gallon:20.2,Cylinders:6,Displacement:200,Horsepower:88,Weight_in_lbs:3060,Acceleration:17.1,Year:"1982-01-01",Origin:"USA"},{Name:"chrysler lebaron salon",Miles_per_Gallon:17.6,Cylinders:6,Displacement:225,Horsepower:85,Weight_in_lbs:3465,Acceleration:16.6,Year:"1982-01-01",Origin:"USA"},{Name:"chevrolet cavalier",Miles_per_Gallon:28,Cylinders:4,Displacement:112,Horsepower:88,Weight_in_lbs:2605,Acceleration:19.6,Year:"1982-01-01",Origin:"USA"},{Name:"chevrolet cavalier wagon",Miles_per_Gallon:27,Cylinders:4,Displacement:112,Horsepower:88,Weight_in_lbs:2640,Acceleration:18.6,Year:"1982-01-01",Origin:"USA"},{Name:"chevrolet cavalier 2-door",Miles_per_Gallon:34,Cylinders:4,Displacement:112,Horsepower:88,Weight_in_lbs:2395,Acceleration:18,Year:"1982-01-01",Origin:"USA"},{Name:"pontiac j2000 se hatchback",Miles_per_Gallon:31,Cylinders:4,Displacement:112,Horsepower:85,Weight_in_lbs:2575,Acceleration:16.2,Year:"1982-01-01",Origin:"USA"},{Name:"dodge aries se",Miles_per_Gallon:29,Cylinders:4,Displacement:135,Horsepower:84,Weight_in_lbs:2525,Acceleration:16,Year:"1982-01-01",Origin:"USA"},{Name:"pontiac phoenix",Miles_per_Gallon:27,Cylinders:4,Displacement:151,Horsepower:90,Weight_in_lbs:2735,Acceleration:18,Year:"1982-01-01",Origin:"USA"},{Name:"ford fairmont futura",Miles_per_Gallon:24,Cylinders:4,Displacement:140,Horsepower:92,Weight_in_lbs:2865,Acceleration:16.4,Year:"1982-01-01",Origin:"USA"},{Name:"amc concord dl",Miles_per_Gallon:23,Cylinders:4,Displacement:151,Horsepower:null,Weight_in_lbs:3035,Acceleration:20.5,Year:"1982-01-01",Origin:"USA"},{Name:"volkswagen rabbit l",Miles_per_Gallon:36,Cylinders:4,Displacement:105,Horsepower:74,Weight_in_lbs:1980,Acceleration:15.3,Year:"1982-01-01",Origin:"Europe"},{Name:"mazda glc custom l",Miles_per_Gallon:37,Cylinders:4,Displacement:91,Horsepower:68,Weight_in_lbs:2025,Acceleration:18.2,Year:"1982-01-01",Origin:"Japan"},{Name:"mazda glc custom",Miles_per_Gallon:31,Cylinders:4,Displacement:91,Horsepower:68,Weight_in_lbs:1970,Acceleration:17.6,Year:"1982-01-01",Origin:"Japan"},{Name:"plymouth horizon miser",Miles_per_Gallon:38,Cylinders:4,Displacement:105,Horsepower:63,Weight_in_lbs:2125,Acceleration:14.7,Year:"1982-01-01",Origin:"USA"},{Name:"mercury lynx l",Miles_per_Gallon:36,Cylinders:4,Displacement:98,Horsepower:70,Weight_in_lbs:2125,Acceleration:17.3,Year:"1982-01-01",Origin:"USA"},{Name:"nissan stanza xe",Miles_per_Gallon:36,Cylinders:4,Displacement:120,Horsepower:88,Weight_in_lbs:2160,Acceleration:14.5,Year:"1982-01-01",Origin:"Japan"},{Name:"honda Accelerationord",Miles_per_Gallon:36,Cylinders:4,Displacement:107,Horsepower:75,Weight_in_lbs:2205,Acceleration:14.5,Year:"1982-01-01",Origin:"Japan"},{Name:"toyota corolla",Miles_per_Gallon:34,Cylinders:4,Displacement:108,Horsepower:70,Weight_in_lbs:2245,Acceleration:16.9,Year:"1982-01-01",Origin:"Japan"},{Name:"honda civic",Miles_per_Gallon:38,Cylinders:4,Displacement:91,Horsepower:67,Weight_in_lbs:1965,Acceleration:15,Year:"1982-01-01",Origin:"Japan"},{Name:"honda civic (auto)",Miles_per_Gallon:32,Cylinders:4,Displacement:91,Horsepower:67,Weight_in_lbs:1965,Acceleration:15.7,Year:"1982-01-01",Origin:"Japan"},{Name:"datsun 310 gx",Miles_per_Gallon:38,Cylinders:4,Displacement:91,Horsepower:67,Weight_in_lbs:1995,Acceleration:16.2,Year:"1982-01-01",Origin:"Japan"},{Name:"buick century limited",Miles_per_Gallon:25,Cylinders:6,Displacement:181,Horsepower:110,Weight_in_lbs:2945,Acceleration:16.4,Year:"1982-01-01",Origin:"USA"},{Name:"oldsmobile cutlass ciera (diesel)",Miles_per_Gallon:38,Cylinders:6,Displacement:262,Horsepower:85,Weight_in_lbs:3015,Acceleration:17,Year:"1982-01-01",Origin:"USA"},{Name:"chrysler lebaron medallion",Miles_per_Gallon:26,Cylinders:4,Displacement:156,Horsepower:92,Weight_in_lbs:2585,Acceleration:14.5,Year:"1982-01-01",Origin:"USA"},{Name:"ford granada l",Miles_per_Gallon:22,Cylinders:6,Displacement:232,Horsepower:112,Weight_in_lbs:2835,Acceleration:14.7,Year:"1982-01-01",Origin:"USA"},{Name:"toyota celica gt",Miles_per_Gallon:32,Cylinders:4,Displacement:144,Horsepower:96,Weight_in_lbs:2665,Acceleration:13.9,Year:"1982-01-01",Origin:"Japan"},{Name:"dodge charger 2.2",Miles_per_Gallon:36,Cylinders:4,Displacement:135,Horsepower:84,Weight_in_lbs:2370,Acceleration:13,Year:"1982-01-01",Origin:"USA"},{Name:"chevrolet camaro",Miles_per_Gallon:27,Cylinders:4,Displacement:151,Horsepower:90,Weight_in_lbs:2950,Acceleration:17.3,Year:"1982-01-01",Origin:"USA"},{Name:"ford mustang gl",Miles_per_Gallon:27,Cylinders:4,Displacement:140,Horsepower:86,Weight_in_lbs:2790,Acceleration:15.6,Year:"1982-01-01",Origin:"USA"},{Name:"vw pickup",Miles_per_Gallon:44,Cylinders:4,Displacement:97,Horsepower:52,Weight_in_lbs:2130,Acceleration:24.6,Year:"1982-01-01",Origin:"Europe"},{Name:"dodge rampage",Miles_per_Gallon:32,Cylinders:4,Displacement:135,Horsepower:84,Weight_in_lbs:2295,Acceleration:11.6,Year:"1982-01-01",Origin:"USA"},{Name:"ford ranger",Miles_per_Gallon:28,Cylinders:4,Displacement:120,Horsepower:79,Weight_in_lbs:2625,Acceleration:18.6,Year:"1982-01-01",Origin:"USA"},{Name:"chevy s-10",Miles_per_Gallon:31,Cylinders:4,Displacement:119,Horsepower:82,Weight_in_lbs:2720,Acceleration:19.4,Year:"1982-01-01",Origin:"USA"}],jXe=[{entity:"All natural disasters",year:1900,deaths:1267360},{entity:"All natural disasters",year:1901,deaths:200018},{entity:"All natural disasters",year:1902,deaths:46037},{entity:"All natural disasters",year:1903,deaths:6506},{entity:"All natural disasters",year:1905,deaths:22758},{entity:"All natural disasters",year:1906,deaths:42970},{entity:"All natural disasters",year:1907,deaths:1325641},{entity:"All natural disasters",year:1908,deaths:75033},{entity:"All natural disasters",year:1909,deaths:1511524},{entity:"All natural disasters",year:1910,deaths:148233},{entity:"All natural disasters",year:1911,deaths:102408},{entity:"All natural disasters",year:1912,deaths:52093},{entity:"All natural disasters",year:1913,deaths:882},{entity:"All natural disasters",year:1914,deaths:289},{entity:"All natural disasters",year:1915,deaths:32167},{entity:"All natural disasters",year:1916,deaths:300},{entity:"All natural disasters",year:1917,deaths:2523507},{entity:"All natural disasters",year:1918,deaths:461113},{entity:"All natural disasters",year:1919,deaths:5500},{entity:"All natural disasters",year:1920,deaths:3204224},{entity:"All natural disasters",year:1921,deaths:12e5},{entity:"All natural disasters",year:1922,deaths:101243},{entity:"All natural disasters",year:1923,deaths:255701},{entity:"All natural disasters",year:1924,deaths:303009},{entity:"All natural disasters",year:1925,deaths:5832},{entity:"All natural disasters",year:1926,deaths:427852},{entity:"All natural disasters",year:1927,deaths:215160},{entity:"All natural disasters",year:1928,deaths:3004895},{entity:"All natural disasters",year:1929,deaths:8377},{entity:"All natural disasters",year:1930,deaths:10572},{entity:"All natural disasters",year:1931,deaths:3706227},{entity:"All natural disasters",year:1932,deaths:73296},{entity:"All natural disasters",year:1933,deaths:34296},{entity:"All natural disasters",year:1934,deaths:21087},{entity:"All natural disasters",year:1935,deaths:272817},{entity:"All natural disasters",year:1936,deaths:5301},{entity:"All natural disasters",year:1937,deaths:12025},{entity:"All natural disasters",year:1938,deaths:2225},{entity:"All natural disasters",year:1939,deaths:563178},{entity:"All natural disasters",year:1940,deaths:23023},{entity:"All natural disasters",year:1941,deaths:10195},{entity:"All natural disasters",year:1942,deaths:1608235},{entity:"All natural disasters",year:1943,deaths:1910322},{entity:"All natural disasters",year:1944,deaths:15906},{entity:"All natural disasters",year:1945,deaths:10376},{entity:"All natural disasters",year:1946,deaths:35490},{entity:"All natural disasters",year:1947,deaths:17647},{entity:"All natural disasters",year:1948,deaths:120131},{entity:"All natural disasters",year:1949,deaths:120370},{entity:"All natural disasters",year:1950,deaths:6728},{entity:"All natural disasters",year:1951,deaths:15042},{entity:"All natural disasters",year:1952,deaths:8965},{entity:"All natural disasters",year:1953,deaths:12956},{entity:"All natural disasters",year:1954,deaths:41872},{entity:"All natural disasters",year:1955,deaths:6026},{entity:"All natural disasters",year:1956,deaths:7737},{entity:"All natural disasters",year:1957,deaths:10603},{entity:"All natural disasters",year:1958,deaths:3950},{entity:"All natural disasters",year:1959,deaths:2013242},{entity:"All natural disasters",year:1960,deaths:39188},{entity:"All natural disasters",year:1961,deaths:17341},{entity:"All natural disasters",year:1962,deaths:17370},{entity:"All natural disasters",year:1963,deaths:37746},{entity:"All natural disasters",year:1964,deaths:12892},{entity:"All natural disasters",year:1965,deaths:1565517},{entity:"All natural disasters",year:1966,deaths:17181},{entity:"All natural disasters",year:1967,deaths:10103},{entity:"All natural disasters",year:1968,deaths:21461},{entity:"All natural disasters",year:1969,deaths:11687},{entity:"All natural disasters",year:1970,deaths:387507},{entity:"All natural disasters",year:1971,deaths:18086},{entity:"All natural disasters",year:1972,deaths:20045},{entity:"All natural disasters",year:1973,deaths:110555},{entity:"All natural disasters",year:1974,deaths:87504},{entity:"All natural disasters",year:1975,deaths:14858},{entity:"All natural disasters",year:1976,deaths:280469},{entity:"All natural disasters",year:1977,deaths:22406},{entity:"All natural disasters",year:1978,deaths:38096},{entity:"All natural disasters",year:1979,deaths:7341},{entity:"All natural disasters",year:1980,deaths:23089},{entity:"All natural disasters",year:1981,deaths:119697},{entity:"All natural disasters",year:1982,deaths:13973},{entity:"All natural disasters",year:1983,deaths:461561},{entity:"All natural disasters",year:1984,deaths:16273},{entity:"All natural disasters",year:1985,deaths:60232},{entity:"All natural disasters",year:1986,deaths:10349},{entity:"All natural disasters",year:1987,deaths:21533},{entity:"All natural disasters",year:1988,deaths:57464},{entity:"All natural disasters",year:1989,deaths:12611},{entity:"All natural disasters",year:1990,deaths:53141},{entity:"All natural disasters",year:1991,deaths:189707},{entity:"All natural disasters",year:1992,deaths:18911},{entity:"All natural disasters",year:1993,deaths:21821},{entity:"All natural disasters",year:1994,deaths:15590},{entity:"All natural disasters",year:1995,deaths:27166},{entity:"All natural disasters",year:1996,deaths:31595},{entity:"All natural disasters",year:1997,deaths:30124},{entity:"All natural disasters",year:1998,deaths:62672},{entity:"All natural disasters",year:1999,deaths:76886},{entity:"All natural disasters",year:2e3,deaths:16667},{entity:"All natural disasters",year:2001,deaths:39493},{entity:"All natural disasters",year:2002,deaths:21342},{entity:"All natural disasters",year:2003,deaths:113558},{entity:"All natural disasters",year:2004,deaths:244772},{entity:"All natural disasters",year:2005,deaths:93566},{entity:"All natural disasters",year:2006,deaths:29893},{entity:"All natural disasters",year:2007,deaths:22422},{entity:"All natural disasters",year:2008,deaths:242236},{entity:"All natural disasters",year:2009,deaths:16037},{entity:"All natural disasters",year:2010,deaths:329900},{entity:"All natural disasters",year:2011,deaths:34143},{entity:"All natural disasters",year:2012,deaths:11619},{entity:"All natural disasters",year:2013,deaths:22225},{entity:"All natural disasters",year:2014,deaths:20882},{entity:"All natural disasters",year:2015,deaths:23893},{entity:"All natural disasters",year:2016,deaths:10201},{entity:"All natural disasters",year:2017,deaths:2087},{entity:"Drought",year:1900,deaths:1261e3},{entity:"Drought",year:1910,deaths:85e3},{entity:"Drought",year:1920,deaths:524e3},{entity:"Drought",year:1921,deaths:12e5},{entity:"Drought",year:1928,deaths:3e6},{entity:"Drought",year:1940,deaths:2e4},{entity:"Drought",year:1942,deaths:15e5},{entity:"Drought",year:1943,deaths:19e5},{entity:"Drought",year:1946,deaths:3e4},{entity:"Drought",year:1964,deaths:50},{entity:"Drought",year:1965,deaths:1502e3},{entity:"Drought",year:1966,deaths:8e3},{entity:"Drought",year:1967,deaths:600},{entity:"Drought",year:1973,deaths:1e5},{entity:"Drought",year:1974,deaths:19e3},{entity:"Drought",year:1978,deaths:63},{entity:"Drought",year:1979,deaths:18},{entity:"Drought",year:1981,deaths:103e3},{entity:"Drought",year:1982,deaths:280},{entity:"Drought",year:1983,deaths:450520},{entity:"Drought",year:1984,deaths:230},{entity:"Drought",year:1986,deaths:84},{entity:"Drought",year:1987,deaths:1317},{entity:"Drought",year:1988,deaths:1600},{entity:"Drought",year:1989,deaths:237},{entity:"Drought",year:1991,deaths:2e3},{entity:"Drought",year:1997,deaths:732},{entity:"Drought",year:1998,deaths:20},{entity:"Drought",year:1999,deaths:361},{entity:"Drought",year:2e3,deaths:80},{entity:"Drought",year:2001,deaths:99},{entity:"Drought",year:2002,deaths:588},{entity:"Drought",year:2003,deaths:9},{entity:"Drought",year:2004,deaths:80},{entity:"Drought",year:2005,deaths:149},{entity:"Drought",year:2006,deaths:134},{entity:"Drought",year:2008,deaths:8},{entity:"Drought",year:2010,deaths:2e4},{entity:"Drought",year:2015,deaths:35},{entity:"Earthquake",year:1901,deaths:18},{entity:"Earthquake",year:1902,deaths:6747},{entity:"Earthquake",year:1903,deaths:6e3},{entity:"Earthquake",year:1905,deaths:22500},{entity:"Earthquake",year:1906,deaths:31966},{entity:"Earthquake",year:1907,deaths:25641},{entity:"Earthquake",year:1908,deaths:75e3},{entity:"Earthquake",year:1909,deaths:5146},{entity:"Earthquake",year:1910,deaths:1762},{entity:"Earthquake",year:1912,deaths:923},{entity:"Earthquake",year:1913,deaths:150},{entity:"Earthquake",year:1914,deaths:149},{entity:"Earthquake",year:1915,deaths:29986},{entity:"Earthquake",year:1917,deaths:19450},{entity:"Earthquake",year:1918,deaths:10379},{entity:"Earthquake",year:1920,deaths:18e4},{entity:"Earthquake",year:1922,deaths:1100},{entity:"Earthquake",year:1923,deaths:152362},{entity:"Earthquake",year:1924,deaths:767},{entity:"Earthquake",year:1925,deaths:5013},{entity:"Earthquake",year:1926,deaths:12},{entity:"Earthquake",year:1927,deaths:206142},{entity:"Earthquake",year:1928,deaths:635},{entity:"Earthquake",year:1929,deaths:3317},{entity:"Earthquake",year:1930,deaths:5081},{entity:"Earthquake",year:1931,deaths:1537},{entity:"Earthquake",year:1932,deaths:70006},{entity:"Earthquake",year:1933,deaths:16180},{entity:"Earthquake",year:1934,deaths:15496},{entity:"Earthquake",year:1935,deaths:66110},{entity:"Earthquake",year:1936,deaths:26},{entity:"Earthquake",year:1938,deaths:166},{entity:"Earthquake",year:1939,deaths:63094},{entity:"Earthquake",year:1940,deaths:1275},{entity:"Earthquake",year:1941,deaths:189},{entity:"Earthquake",year:1942,deaths:7235},{entity:"Earthquake",year:1943,deaths:4332},{entity:"Earthquake",year:1944,deaths:14984},{entity:"Earthquake",year:1945,deaths:5961},{entity:"Earthquake",year:1946,deaths:5153},{entity:"Earthquake",year:1947,deaths:633},{entity:"Earthquake",year:1948,deaths:115618},{entity:"Earthquake",year:1949,deaths:6486},{entity:"Earthquake",year:1950,deaths:1833},{entity:"Earthquake",year:1951,deaths:1554},{entity:"Earthquake",year:1952,deaths:2432},{entity:"Earthquake",year:1953,deaths:2717},{entity:"Earthquake",year:1954,deaths:3344},{entity:"Earthquake",year:1955,deaths:959},{entity:"Earthquake",year:1956,deaths:763},{entity:"Earthquake",year:1957,deaths:6993},{entity:"Earthquake",year:1958,deaths:227},{entity:"Earthquake",year:1959,deaths:103},{entity:"Earthquake",year:1960,deaths:19395},{entity:"Earthquake",year:1961,deaths:60},{entity:"Earthquake",year:1962,deaths:12209},{entity:"Earthquake",year:1963,deaths:1700},{entity:"Earthquake",year:1964,deaths:335},{entity:"Earthquake",year:1965,deaths:683},{entity:"Earthquake",year:1966,deaths:2752},{entity:"Earthquake",year:1967,deaths:1013},{entity:"Earthquake",year:1968,deaths:10858},{entity:"Earthquake",year:1969,deaths:3353},{entity:"Earthquake",year:1970,deaths:78599},{entity:"Earthquake",year:1971,deaths:1107},{entity:"Earthquake",year:1972,deaths:15170},{entity:"Earthquake",year:1973,deaths:552},{entity:"Earthquake",year:1974,deaths:24808},{entity:"Earthquake",year:1975,deaths:12632},{entity:"Earthquake",year:1976,deaths:276994},{entity:"Earthquake",year:1977,deaths:3098},{entity:"Earthquake",year:1978,deaths:25162},{entity:"Earthquake",year:1979,deaths:2100},{entity:"Earthquake",year:1980,deaths:7730},{entity:"Earthquake",year:1981,deaths:4206},{entity:"Earthquake",year:1982,deaths:2120},{entity:"Earthquake",year:1983,deaths:2148},{entity:"Earthquake",year:1984,deaths:57},{entity:"Earthquake",year:1985,deaths:9853},{entity:"Earthquake",year:1986,deaths:1181},{entity:"Earthquake",year:1987,deaths:5160},{entity:"Earthquake",year:1988,deaths:27049},{entity:"Earthquake",year:1989,deaths:650},{entity:"Earthquake",year:1990,deaths:42853},{entity:"Earthquake",year:1991,deaths:2454},{entity:"Earthquake",year:1992,deaths:4033},{entity:"Earthquake",year:1993,deaths:10088},{entity:"Earthquake",year:1994,deaths:1242},{entity:"Earthquake",year:1995,deaths:7739},{entity:"Earthquake",year:1996,deaths:576},{entity:"Earthquake",year:1997,deaths:3159},{entity:"Earthquake",year:1998,deaths:9573},{entity:"Earthquake",year:1999,deaths:21869},{entity:"Earthquake",year:2e3,deaths:217},{entity:"Earthquake",year:2001,deaths:21348},{entity:"Earthquake",year:2002,deaths:1639},{entity:"Earthquake",year:2003,deaths:29617},{entity:"Earthquake",year:2004,deaths:227290},{entity:"Earthquake",year:2005,deaths:76241},{entity:"Earthquake",year:2006,deaths:6692},{entity:"Earthquake",year:2007,deaths:780},{entity:"Earthquake",year:2008,deaths:87918},{entity:"Earthquake",year:2009,deaths:1893},{entity:"Earthquake",year:2010,deaths:226733},{entity:"Earthquake",year:2011,deaths:20946},{entity:"Earthquake",year:2012,deaths:711},{entity:"Earthquake",year:2013,deaths:1120},{entity:"Earthquake",year:2014,deaths:774},{entity:"Earthquake",year:2015,deaths:9550},{entity:"Earthquake",year:2016,deaths:1311},{entity:"Earthquake",year:2017,deaths:49},{entity:"Epidemic",year:1900,deaths:30},{entity:"Epidemic",year:1901,deaths:2e5},{entity:"Epidemic",year:1907,deaths:13e5},{entity:"Epidemic",year:1909,deaths:1500040},{entity:"Epidemic",year:1910,deaths:6e4},{entity:"Epidemic",year:1917,deaths:25e5},{entity:"Epidemic",year:1918,deaths:449700},{entity:"Epidemic",year:1920,deaths:25e5},{entity:"Epidemic",year:1923,deaths:1e5},{entity:"Epidemic",year:1924,deaths:3e5},{entity:"Epidemic",year:1926,deaths:423e3},{entity:"Epidemic",year:1932,deaths:16},{entity:"Epidemic",year:1935,deaths:2e3},{entity:"Epidemic",year:1940,deaths:1500},{entity:"Epidemic",year:1947,deaths:10276},{entity:"Epidemic",year:1953,deaths:481},{entity:"Epidemic",year:1963,deaths:1e3},{entity:"Epidemic",year:1964,deaths:617},{entity:"Epidemic",year:1965,deaths:816},{entity:"Epidemic",year:1966,deaths:200},{entity:"Epidemic",year:1967,deaths:3137},{entity:"Epidemic",year:1968,deaths:177},{entity:"Epidemic",year:1969,deaths:3520},{entity:"Epidemic",year:1970,deaths:939},{entity:"Epidemic",year:1971,deaths:2313},{entity:"Epidemic",year:1972,deaths:35},{entity:"Epidemic",year:1974,deaths:1500},{entity:"Epidemic",year:1976,deaths:396},{entity:"Epidemic",year:1977,deaths:1184},{entity:"Epidemic",year:1978,deaths:3060},{entity:"Epidemic",year:1979,deaths:486},{entity:"Epidemic",year:1980,deaths:1685},{entity:"Epidemic",year:1981,deaths:2497},{entity:"Epidemic",year:1982,deaths:2912},{entity:"Epidemic",year:1983,deaths:1219},{entity:"Epidemic",year:1984,deaths:7016},{entity:"Epidemic",year:1985,deaths:5854},{entity:"Epidemic",year:1986,deaths:3046},{entity:"Epidemic",year:1987,deaths:2592},{entity:"Epidemic",year:1988,deaths:15216},{entity:"Epidemic",year:1989,deaths:1870},{entity:"Epidemic",year:1990,deaths:2207},{entity:"Epidemic",year:1991,deaths:30682},{entity:"Epidemic",year:1992,deaths:6675},{entity:"Epidemic",year:1993,deaths:651},{entity:"Epidemic",year:1994,deaths:2505},{entity:"Epidemic",year:1995,deaths:4428},{entity:"Epidemic",year:1996,deaths:16887},{entity:"Epidemic",year:1997,deaths:10674},{entity:"Epidemic",year:1998,deaths:12931},{entity:"Epidemic",year:1999,deaths:6293},{entity:"Epidemic",year:2e3,deaths:6980},{entity:"Epidemic",year:2001,deaths:8515},{entity:"Epidemic",year:2002,deaths:8762},{entity:"Epidemic",year:2003,deaths:3522},{entity:"Epidemic",year:2004,deaths:3245},{entity:"Epidemic",year:2005,deaths:3909},{entity:"Epidemic",year:2006,deaths:6402},{entity:"Epidemic",year:2007,deaths:5484},{entity:"Epidemic",year:2008,deaths:6904},{entity:"Epidemic",year:2009,deaths:4895},{entity:"Epidemic",year:2010,deaths:12143},{entity:"Epidemic",year:2011,deaths:3174},{entity:"Epidemic",year:2012,deaths:1887},{entity:"Epidemic",year:2013,deaths:529},{entity:"Epidemic",year:2014,deaths:12911},{entity:"Epidemic",year:2015,deaths:1032},{entity:"Epidemic",year:2016,deaths:1520},{entity:"Epidemic",year:2017,deaths:386},{entity:"Extreme temperature",year:1936,deaths:1693},{entity:"Extreme temperature",year:1951,deaths:69},{entity:"Extreme temperature",year:1953,deaths:669},{entity:"Extreme temperature",year:1955,deaths:107},{entity:"Extreme temperature",year:1958,deaths:651},{entity:"Extreme temperature",year:1961,deaths:400},{entity:"Extreme temperature",year:1962,deaths:50},{entity:"Extreme temperature",year:1963,deaths:162},{entity:"Extreme temperature",year:1965,deaths:100},{entity:"Extreme temperature",year:1966,deaths:262},{entity:"Extreme temperature",year:1968,deaths:153},{entity:"Extreme temperature",year:1971,deaths:400},{entity:"Extreme temperature",year:1972,deaths:110},{entity:"Extreme temperature",year:1973,deaths:283},{entity:"Extreme temperature",year:1975,deaths:140},{entity:"Extreme temperature",year:1978,deaths:150},{entity:"Extreme temperature",year:1979,deaths:470},{entity:"Extreme temperature",year:1980,deaths:1389},{entity:"Extreme temperature",year:1981,deaths:300},{entity:"Extreme temperature",year:1982,deaths:400},{entity:"Extreme temperature",year:1983,deaths:205},{entity:"Extreme temperature",year:1984,deaths:290},{entity:"Extreme temperature",year:1985,deaths:456},{entity:"Extreme temperature",year:1986,deaths:50},{entity:"Extreme temperature",year:1987,deaths:1220},{entity:"Extreme temperature",year:1988,deaths:644},{entity:"Extreme temperature",year:1989,deaths:381},{entity:"Extreme temperature",year:1990,deaths:979},{entity:"Extreme temperature",year:1991,deaths:835},{entity:"Extreme temperature",year:1992,deaths:388},{entity:"Extreme temperature",year:1993,deaths:106},{entity:"Extreme temperature",year:1994,deaths:341},{entity:"Extreme temperature",year:1995,deaths:1730},{entity:"Extreme temperature",year:1996,deaths:300},{entity:"Extreme temperature",year:1997,deaths:604},{entity:"Extreme temperature",year:1998,deaths:3269},{entity:"Extreme temperature",year:1999,deaths:771},{entity:"Extreme temperature",year:2e3,deaths:941},{entity:"Extreme temperature",year:2001,deaths:1787},{entity:"Extreme temperature",year:2002,deaths:3369},{entity:"Extreme temperature",year:2003,deaths:74698},{entity:"Extreme temperature",year:2004,deaths:255},{entity:"Extreme temperature",year:2005,deaths:1550},{entity:"Extreme temperature",year:2006,deaths:4826},{entity:"Extreme temperature",year:2007,deaths:1086},{entity:"Extreme temperature",year:2008,deaths:1688},{entity:"Extreme temperature",year:2009,deaths:1386},{entity:"Extreme temperature",year:2010,deaths:57188},{entity:"Extreme temperature",year:2011,deaths:435},{entity:"Extreme temperature",year:2012,deaths:1834},{entity:"Extreme temperature",year:2013,deaths:1821},{entity:"Extreme temperature",year:2014,deaths:1168},{entity:"Extreme temperature",year:2015,deaths:7425},{entity:"Extreme temperature",year:2016,deaths:490},{entity:"Extreme temperature",year:2017,deaths:130},{entity:"Extreme weather",year:1900,deaths:6e3},{entity:"Extreme weather",year:1902,deaths:600},{entity:"Extreme weather",year:1903,deaths:163},{entity:"Extreme weather",year:1905,deaths:240},{entity:"Extreme weather",year:1906,deaths:10298},{entity:"Extreme weather",year:1909,deaths:713},{entity:"Extreme weather",year:1910,deaths:30},{entity:"Extreme weather",year:1911,deaths:1e3},{entity:"Extreme weather",year:1912,deaths:51170},{entity:"Extreme weather",year:1913,deaths:732},{entity:"Extreme weather",year:1915,deaths:2125},{entity:"Extreme weather",year:1916,deaths:300},{entity:"Extreme weather",year:1917,deaths:4057},{entity:"Extreme weather",year:1918,deaths:34},{entity:"Extreme weather",year:1919,deaths:500},{entity:"Extreme weather",year:1920,deaths:224},{entity:"Extreme weather",year:1922,deaths:1e5},{entity:"Extreme weather",year:1923,deaths:3139},{entity:"Extreme weather",year:1924,deaths:2242},{entity:"Extreme weather",year:1925,deaths:819},{entity:"Extreme weather",year:1926,deaths:3568},{entity:"Extreme weather",year:1927,deaths:5772},{entity:"Extreme weather",year:1928,deaths:4224},{entity:"Extreme weather",year:1930,deaths:4082},{entity:"Extreme weather",year:1931,deaths:3200},{entity:"Extreme weather",year:1932,deaths:3244},{entity:"Extreme weather",year:1933,deaths:63},{entity:"Extreme weather",year:1934,deaths:5091},{entity:"Extreme weather",year:1935,deaths:62707},{entity:"Extreme weather",year:1936,deaths:3309},{entity:"Extreme weather",year:1937,deaths:11231},{entity:"Extreme weather",year:1938,deaths:905},{entity:"Extreme weather",year:1939,deaths:3},{entity:"Extreme weather",year:1940,deaths:123},{entity:"Extreme weather",year:1941,deaths:5006},{entity:"Extreme weather",year:1942,deaths:101e3},{entity:"Extreme weather",year:1943,deaths:5e3},{entity:"Extreme weather",year:1944,deaths:726},{entity:"Extreme weather",year:1945,deaths:4415},{entity:"Extreme weather",year:1946,deaths:337},{entity:"Extreme weather",year:1947,deaths:4738},{entity:"Extreme weather",year:1948,deaths:2971},{entity:"Extreme weather",year:1949,deaths:2804},{entity:"Extreme weather",year:1950,deaths:873},{entity:"Extreme weather",year:1951,deaths:2861},{entity:"Extreme weather",year:1952,deaths:6277},{entity:"Extreme weather",year:1953,deaths:1814},{entity:"Extreme weather",year:1954,deaths:2969},{entity:"Extreme weather",year:1955,deaths:3895},{entity:"Extreme weather",year:1956,deaths:3114},{entity:"Extreme weather",year:1957,deaths:1139},{entity:"Extreme weather",year:1958,deaths:2620},{entity:"Extreme weather",year:1959,deaths:9695},{entity:"Extreme weather",year:1960,deaths:9164},{entity:"Extreme weather",year:1961,deaths:12852},{entity:"Extreme weather",year:1962,deaths:1860},{entity:"Extreme weather",year:1963,deaths:29965},{entity:"Extreme weather",year:1964,deaths:10655},{entity:"Extreme weather",year:1965,deaths:59932},{entity:"Extreme weather",year:1966,deaths:2327},{entity:"Extreme weather",year:1967,deaths:2255},{entity:"Extreme weather",year:1968,deaths:1669},{entity:"Extreme weather",year:1969,deaths:3252},{entity:"Extreme weather",year:1970,deaths:304495},{entity:"Extreme weather",year:1971,deaths:10811},{entity:"Extreme weather",year:1972,deaths:1427},{entity:"Extreme weather",year:1973,deaths:4344},{entity:"Extreme weather",year:1974,deaths:11861},{entity:"Extreme weather",year:1975,deaths:1041},{entity:"Extreme weather",year:1976,deaths:1763},{entity:"Extreme weather",year:1977,deaths:15298},{entity:"Extreme weather",year:1978,deaths:3676},{entity:"Extreme weather",year:1979,deaths:2623},{entity:"Extreme weather",year:1980,deaths:1379},{entity:"Extreme weather",year:1981,deaths:3790},{entity:"Extreme weather",year:1982,deaths:2782},{entity:"Extreme weather",year:1983,deaths:3656},{entity:"Extreme weather",year:1984,deaths:5468},{entity:"Extreme weather",year:1985,deaths:17165},{entity:"Extreme weather",year:1986,deaths:1939},{entity:"Extreme weather",year:1987,deaths:2900},{entity:"Extreme weather",year:1988,deaths:3335},{entity:"Extreme weather",year:1989,deaths:4256},{entity:"Extreme weather",year:1990,deaths:4604},{entity:"Extreme weather",year:1991,deaths:146297},{entity:"Extreme weather",year:1992,deaths:1342},{entity:"Extreme weather",year:1993,deaths:2965},{entity:"Extreme weather",year:1994,deaths:4239},{entity:"Extreme weather",year:1995,deaths:3763},{entity:"Extreme weather",year:1996,deaths:4581},{entity:"Extreme weather",year:1997,deaths:6150},{entity:"Extreme weather",year:1998,deaths:24935},{entity:"Extreme weather",year:1999,deaths:12270},{entity:"Extreme weather",year:2e3,deaths:1354},{entity:"Extreme weather",year:2001,deaths:1911},{entity:"Extreme weather",year:2002,deaths:1382},{entity:"Extreme weather",year:2003,deaths:1049},{entity:"Extreme weather",year:2004,deaths:6547},{entity:"Extreme weather",year:2005,deaths:5251},{entity:"Extreme weather",year:2006,deaths:4329},{entity:"Extreme weather",year:2007,deaths:6035},{entity:"Extreme weather",year:2008,deaths:140985},{entity:"Extreme weather",year:2009,deaths:3287},{entity:"Extreme weather",year:2010,deaths:1564},{entity:"Extreme weather",year:2011,deaths:3103},{entity:"Extreme weather",year:2012,deaths:3105},{entity:"Extreme weather",year:2013,deaths:8603},{entity:"Extreme weather",year:2014,deaths:1424},{entity:"Extreme weather",year:2015,deaths:1270},{entity:"Extreme weather",year:2016,deaths:1760},{entity:"Extreme weather",year:2017,deaths:394},{entity:"Flood",year:1900,deaths:300},{entity:"Flood",year:1903,deaths:250},{entity:"Flood",year:1906,deaths:6},{entity:"Flood",year:1909,deaths:72},{entity:"Flood",year:1910,deaths:1379},{entity:"Flood",year:1911,deaths:1e5},{entity:"Flood",year:1926,deaths:1e3},{entity:"Flood",year:1927,deaths:3246},{entity:"Flood",year:1928,deaths:36},{entity:"Flood",year:1931,deaths:37e5},{entity:"Flood",year:1933,deaths:18053},{entity:"Flood",year:1935,deaths:142e3},{entity:"Flood",year:1936,deaths:200},{entity:"Flood",year:1937,deaths:248},{entity:"Flood",year:1938,deaths:954},{entity:"Flood",year:1939,deaths:500010},{entity:"Flood",year:1940,deaths:125},{entity:"Flood",year:1943,deaths:990},{entity:"Flood",year:1947,deaths:2e3},{entity:"Flood",year:1948,deaths:917},{entity:"Flood",year:1949,deaths:97e3},{entity:"Flood",year:1950,deaths:3808},{entity:"Flood",year:1951,deaths:5666},{entity:"Flood",year:1952,deaths:199},{entity:"Flood",year:1953,deaths:7125},{entity:"Flood",year:1954,deaths:34436},{entity:"Flood",year:1955,deaths:584},{entity:"Flood",year:1956,deaths:3613},{entity:"Flood",year:1957,deaths:2471},{entity:"Flood",year:1958,deaths:400},{entity:"Flood",year:1959,deaths:2003396},{entity:"Flood",year:1960,deaths:10577},{entity:"Flood",year:1961,deaths:3863},{entity:"Flood",year:1962,deaths:1180},{entity:"Flood",year:1963,deaths:1031},{entity:"Flood",year:1964,deaths:1123},{entity:"Flood",year:1965,deaths:1401},{entity:"Flood",year:1966,deaths:1923},{entity:"Flood",year:1967,deaths:2446},{entity:"Flood",year:1968,deaths:7306},{entity:"Flood",year:1969,deaths:1544},{entity:"Flood",year:1970,deaths:3246},{entity:"Flood",year:1971,deaths:2404},{entity:"Flood",year:1972,deaths:2548},{entity:"Flood",year:1973,deaths:1835},{entity:"Flood",year:1974,deaths:29431},{entity:"Flood",year:1975,deaths:848},{entity:"Flood",year:1976,deaths:960},{entity:"Flood",year:1977,deaths:2568},{entity:"Flood",year:1978,deaths:5897},{entity:"Flood",year:1979,deaths:1038},{entity:"Flood",year:1980,deaths:10466},{entity:"Flood",year:1981,deaths:5283},{entity:"Flood",year:1982,deaths:4648},{entity:"Flood",year:1983,deaths:2082},{entity:"Flood",year:1984,deaths:2930},{entity:"Flood",year:1985,deaths:4376},{entity:"Flood",year:1986,deaths:1782},{entity:"Flood",year:1987,deaths:6766},{entity:"Flood",year:1988,deaths:8504},{entity:"Flood",year:1989,deaths:4716},{entity:"Flood",year:1990,deaths:2251},{entity:"Flood",year:1991,deaths:5852},{entity:"Flood",year:1992,deaths:5315},{entity:"Flood",year:1993,deaths:6150},{entity:"Flood",year:1994,deaths:6771},{entity:"Flood",year:1995,deaths:7956},{entity:"Flood",year:1996,deaths:8047},{entity:"Flood",year:1997,deaths:7685},{entity:"Flood",year:1998,deaths:10653},{entity:"Flood",year:1999,deaths:34807},{entity:"Flood",year:2e3,deaths:6025},{entity:"Flood",year:2001,deaths:5014},{entity:"Flood",year:2002,deaths:4236},{entity:"Flood",year:2003,deaths:3910},{entity:"Flood",year:2004,deaths:6982},{entity:"Flood",year:2005,deaths:5754},{entity:"Flood",year:2006,deaths:5843},{entity:"Flood",year:2007,deaths:8607},{entity:"Flood",year:2008,deaths:4007},{entity:"Flood",year:2009,deaths:3627},{entity:"Flood",year:2010,deaths:8356},{entity:"Flood",year:2011,deaths:6163},{entity:"Flood",year:2012,deaths:3544},{entity:"Flood",year:2013,deaths:9836},{entity:"Flood",year:2014,deaths:3532},{entity:"Flood",year:2015,deaths:3495},{entity:"Flood",year:2016,deaths:4720},{entity:"Flood",year:2017,deaths:648},{entity:"Landslide",year:1909,deaths:53},{entity:"Landslide",year:1922,deaths:100},{entity:"Landslide",year:1923,deaths:200},{entity:"Landslide",year:1926,deaths:128},{entity:"Landslide",year:1930,deaths:40},{entity:"Landslide",year:1931,deaths:190},{entity:"Landslide",year:1932,deaths:30},{entity:"Landslide",year:1934,deaths:500},{entity:"Landslide",year:1936,deaths:73},{entity:"Landslide",year:1938,deaths:200},{entity:"Landslide",year:1941,deaths:5e3},{entity:"Landslide",year:1948,deaths:525},{entity:"Landslide",year:1949,deaths:12e3},{entity:"Landslide",year:1950,deaths:130},{entity:"Landslide",year:1951,deaths:92},{entity:"Landslide",year:1952,deaths:28},{entity:"Landslide",year:1954,deaths:1086},{entity:"Landslide",year:1955,deaths:478},{entity:"Landslide",year:1956,deaths:236},{entity:"Landslide",year:1958,deaths:52},{entity:"Landslide",year:1959,deaths:48},{entity:"Landslide",year:1960,deaths:52},{entity:"Landslide",year:1961,deaths:166},{entity:"Landslide",year:1962,deaths:71},{entity:"Landslide",year:1963,deaths:2033},{entity:"Landslide",year:1964,deaths:108},{entity:"Landslide",year:1965,deaths:204},{entity:"Landslide",year:1966,deaths:604},{entity:"Landslide",year:1967,deaths:590},{entity:"Landslide",year:1968,deaths:1196},{entity:"Landslide",year:1969,deaths:18},{entity:"Landslide",year:1970,deaths:186},{entity:"Landslide",year:1971,deaths:1020},{entity:"Landslide",year:1972,deaths:755},{entity:"Landslide",year:1973,deaths:3541},{entity:"Landslide",year:1974,deaths:904},{entity:"Landslide",year:1975,deaths:195},{entity:"Landslide",year:1976,deaths:315},{entity:"Landslide",year:1977,deaths:40},{entity:"Landslide",year:1978,deaths:86},{entity:"Landslide",year:1979,deaths:338},{entity:"Landslide",year:1980,deaths:300},{entity:"Landslide",year:1981,deaths:421},{entity:"Landslide",year:1982,deaths:640},{entity:"Landslide",year:1983,deaths:1159},{entity:"Landslide",year:1984,deaths:228},{entity:"Landslide",year:1985,deaths:377},{entity:"Landslide",year:1986,deaths:501},{entity:"Landslide",year:1987,deaths:1204},{entity:"Landslide",year:1988,deaths:952},{entity:"Landslide",year:1989,deaths:445},{entity:"Landslide",year:1990,deaths:98},{entity:"Landslide",year:1991,deaths:728},{entity:"Landslide",year:1992,deaths:712},{entity:"Landslide",year:1993,deaths:1418},{entity:"Landslide",year:1994,deaths:307},{entity:"Landslide",year:1995,deaths:1521},{entity:"Landslide",year:1996,deaths:1155},{entity:"Landslide",year:1997,deaths:801},{entity:"Landslide",year:1998,deaths:1141},{entity:"Landslide",year:1999,deaths:445},{entity:"Landslide",year:2e3,deaths:1012},{entity:"Landslide",year:2001,deaths:786},{entity:"Landslide",year:2002,deaths:1100},{entity:"Landslide",year:2003,deaths:706},{entity:"Landslide",year:2004,deaths:313},{entity:"Landslide",year:2005,deaths:664},{entity:"Landslide",year:2006,deaths:1638},{entity:"Landslide",year:2007,deaths:271},{entity:"Landslide",year:2008,deaths:504},{entity:"Landslide",year:2009,deaths:723},{entity:"Landslide",year:2010,deaths:3427},{entity:"Landslide",year:2011,deaths:309},{entity:"Landslide",year:2012,deaths:501},{entity:"Landslide",year:2013,deaths:235},{entity:"Landslide",year:2014,deaths:943},{entity:"Landslide",year:2015,deaths:1006},{entity:"Landslide",year:2016,deaths:361},{entity:"Landslide",year:2017,deaths:405},{entity:"Mass movement (dry)",year:1903,deaths:76},{entity:"Mass movement (dry)",year:1905,deaths:18},{entity:"Mass movement (dry)",year:1908,deaths:33},{entity:"Mass movement (dry)",year:1910,deaths:62},{entity:"Mass movement (dry)",year:1915,deaths:56},{entity:"Mass movement (dry)",year:1937,deaths:40},{entity:"Mass movement (dry)",year:1955,deaths:3},{entity:"Mass movement (dry)",year:1962,deaths:2e3},{entity:"Mass movement (dry)",year:1963,deaths:150},{entity:"Mass movement (dry)",year:1965,deaths:26},{entity:"Mass movement (dry)",year:1970,deaths:42},{entity:"Mass movement (dry)",year:1971,deaths:31},{entity:"Mass movement (dry)",year:1980,deaths:50},{entity:"Mass movement (dry)",year:1982,deaths:59},{entity:"Mass movement (dry)",year:1983,deaths:466},{entity:"Mass movement (dry)",year:1985,deaths:300},{entity:"Mass movement (dry)",year:1987,deaths:183},{entity:"Mass movement (dry)",year:1988,deaths:157},{entity:"Mass movement (dry)",year:1989,deaths:55},{entity:"Mass movement (dry)",year:1990,deaths:116},{entity:"Mass movement (dry)",year:1991,deaths:86},{entity:"Mass movement (dry)",year:1992,deaths:323},{entity:"Mass movement (dry)",year:1993,deaths:341},{entity:"Mass movement (dry)",year:2e3,deaths:11},{entity:"Mass movement (dry)",year:2002,deaths:60},{entity:"Mass movement (dry)",year:2004,deaths:44},{entity:"Mass movement (dry)",year:2006,deaths:11},{entity:"Mass movement (dry)",year:2008,deaths:120},{entity:"Mass movement (dry)",year:2009,deaths:36},{entity:"Mass movement (dry)",year:2012,deaths:16},{entity:"Mass movement (dry)",year:2013,deaths:46},{entity:"Mass movement (dry)",year:2015,deaths:13},{entity:"Volcanic activity",year:1900,deaths:30},{entity:"Volcanic activity",year:1902,deaths:38690},{entity:"Volcanic activity",year:1903,deaths:17},{entity:"Volcanic activity",year:1906,deaths:700},{entity:"Volcanic activity",year:1909,deaths:5500},{entity:"Volcanic activity",year:1911,deaths:1335},{entity:"Volcanic activity",year:1914,deaths:140},{entity:"Volcanic activity",year:1919,deaths:5e3},{entity:"Volcanic activity",year:1926,deaths:144},{entity:"Volcanic activity",year:1929,deaths:5e3},{entity:"Volcanic activity",year:1930,deaths:1369},{entity:"Volcanic activity",year:1931,deaths:1300},{entity:"Volcanic activity",year:1937,deaths:506},{entity:"Volcanic activity",year:1944,deaths:26},{entity:"Volcanic activity",year:1948,deaths:100},{entity:"Volcanic activity",year:1949,deaths:2e3},{entity:"Volcanic activity",year:1950,deaths:84},{entity:"Volcanic activity",year:1951,deaths:4800},{entity:"Volcanic activity",year:1952,deaths:29},{entity:"Volcanic activity",year:1953,deaths:150},{entity:"Volcanic activity",year:1954,deaths:37},{entity:"Volcanic activity",year:1963,deaths:1705},{entity:"Volcanic activity",year:1964,deaths:4},{entity:"Volcanic activity",year:1965,deaths:355},{entity:"Volcanic activity",year:1966,deaths:1088},{entity:"Volcanic activity",year:1968,deaths:90},{entity:"Volcanic activity",year:1975,deaths:2},{entity:"Volcanic activity",year:1976,deaths:41},{entity:"Volcanic activity",year:1977,deaths:215},{entity:"Volcanic activity",year:1979,deaths:268},{entity:"Volcanic activity",year:1980,deaths:90},{entity:"Volcanic activity",year:1981,deaths:192},{entity:"Volcanic activity",year:1982,deaths:130},{entity:"Volcanic activity",year:1984,deaths:37},{entity:"Volcanic activity",year:1985,deaths:21800},{entity:"Volcanic activity",year:1986,deaths:1746},{entity:"Volcanic activity",year:1988,deaths:7},{entity:"Volcanic activity",year:1990,deaths:33},{entity:"Volcanic activity",year:1991,deaths:683},{entity:"Volcanic activity",year:1992,deaths:1},{entity:"Volcanic activity",year:1993,deaths:99},{entity:"Volcanic activity",year:1994,deaths:101},{entity:"Volcanic activity",year:1996,deaths:4},{entity:"Volcanic activity",year:1997,deaths:53},{entity:"Volcanic activity",year:2002,deaths:200},{entity:"Volcanic activity",year:2004,deaths:2},{entity:"Volcanic activity",year:2005,deaths:3},{entity:"Volcanic activity",year:2006,deaths:5},{entity:"Volcanic activity",year:2007,deaths:11},{entity:"Volcanic activity",year:2008,deaths:16},{entity:"Volcanic activity",year:2010,deaths:323},{entity:"Volcanic activity",year:2011,deaths:3},{entity:"Volcanic activity",year:2014,deaths:102},{entity:"Wildfire",year:1911,deaths:73},{entity:"Wildfire",year:1918,deaths:1e3},{entity:"Wildfire",year:1922,deaths:43},{entity:"Wildfire",year:1929,deaths:60},{entity:"Wildfire",year:1939,deaths:71},{entity:"Wildfire",year:1944,deaths:170},{entity:"Wildfire",year:1949,deaths:80},{entity:"Wildfire",year:1956,deaths:11},{entity:"Wildfire",year:1966,deaths:25},{entity:"Wildfire",year:1967,deaths:62},{entity:"Wildfire",year:1968,deaths:12},{entity:"Wildfire",year:1977,deaths:3},{entity:"Wildfire",year:1978,deaths:2},{entity:"Wildfire",year:1981,deaths:8},{entity:"Wildfire",year:1982,deaths:2},{entity:"Wildfire",year:1983,deaths:106},{entity:"Wildfire",year:1984,deaths:17},{entity:"Wildfire",year:1985,deaths:51},{entity:"Wildfire",year:1986,deaths:20},{entity:"Wildfire",year:1987,deaths:191},{entity:"Wildfire",year:1989,deaths:1},{entity:"Wildfire",year:1991,deaths:90},{entity:"Wildfire",year:1992,deaths:122},{entity:"Wildfire",year:1993,deaths:3},{entity:"Wildfire",year:1994,deaths:84},{entity:"Wildfire",year:1995,deaths:29},{entity:"Wildfire",year:1996,deaths:45},{entity:"Wildfire",year:1997,deaths:266},{entity:"Wildfire",year:1998,deaths:150},{entity:"Wildfire",year:1999,deaths:70},{entity:"Wildfire",year:2e3,deaths:47},{entity:"Wildfire",year:2001,deaths:33},{entity:"Wildfire",year:2002,deaths:6},{entity:"Wildfire",year:2003,deaths:47},{entity:"Wildfire",year:2004,deaths:14},{entity:"Wildfire",year:2005,deaths:45},{entity:"Wildfire",year:2006,deaths:13},{entity:"Wildfire",year:2007,deaths:148},{entity:"Wildfire",year:2008,deaths:86},{entity:"Wildfire",year:2009,deaths:190},{entity:"Wildfire",year:2010,deaths:166},{entity:"Wildfire",year:2011,deaths:10},{entity:"Wildfire",year:2012,deaths:21},{entity:"Wildfire",year:2013,deaths:35},{entity:"Wildfire",year:2014,deaths:16},{entity:"Wildfire",year:2015,deaths:67},{entity:"Wildfire",year:2016,deaths:39},{entity:"Wildfire",year:2017,deaths:75}],YXe=[{side:"left",year:1956,miles:3675,gas:2.38},{side:"right",year:1957,miles:3706,gas:2.4},{side:"bottom",year:1958,miles:3766,gas:2.26},{side:"top",year:1959,miles:3905,gas:2.31},{side:"right",year:1960,miles:3935,gas:2.27},{side:"bottom",year:1961,miles:3977,gas:2.25},{side:"right",year:1962,miles:4085,gas:2.22},{side:"bottom",year:1963,miles:4218,gas:2.12},{side:"bottom",year:1964,miles:4369,gas:2.11},{side:"bottom",year:1965,miles:4538,gas:2.14},{side:"top",year:1966,miles:4676,gas:2.14},{side:"bottom",year:1967,miles:4827,gas:2.14},{side:"right",year:1968,miles:5038,gas:2.13},{side:"right",year:1969,miles:5207,gas:2.07},{side:"right",year:1970,miles:5376,gas:2.01},{side:"bottom",year:1971,miles:5617,gas:1.93},{side:"bottom",year:1972,miles:5973,gas:1.87},{side:"right",year:1973,miles:6154,gas:1.9},{side:"left",year:1974,miles:5943,gas:2.34},{side:"bottom",year:1975,miles:6111,gas:2.31},{side:"bottom",year:1976,miles:6389,gas:2.32},{side:"top",year:1977,miles:6630,gas:2.36},{side:"bottom",year:1978,miles:6883,gas:2.23},{side:"left",year:1979,miles:6744,gas:2.68},{side:"left",year:1980,miles:6672,gas:3.3},{side:"right",year:1981,miles:6732,gas:3.3},{side:"right",year:1982,miles:6835,gas:2.92},{side:"right",year:1983,miles:6943,gas:2.66},{side:"right",year:1984,miles:7130,gas:2.48},{side:"right",year:1985,miles:7323,gas:2.36},{side:"left",year:1986,miles:7558,gas:1.76},{side:"top",year:1987,miles:7770,gas:1.76},{side:"bottom",year:1988,miles:8089,gas:1.68},{side:"left",year:1989,miles:8397,gas:1.75},{side:"top",year:1990,miles:8529,gas:1.88},{side:"right",year:1991,miles:8535,gas:1.78},{side:"right",year:1992,miles:8662,gas:1.69},{side:"left",year:1993,miles:8855,gas:1.6},{side:"bottom",year:1994,miles:8909,gas:1.59},{side:"bottom",year:1995,miles:9150,gas:1.6},{side:"top",year:1996,miles:9192,gas:1.67},{side:"right",year:1997,miles:9416,gas:1.65},{side:"bottom",year:1998,miles:9590,gas:1.39},{side:"right",year:1999,miles:9687,gas:1.5},{side:"top",year:2e3,miles:9717,gas:1.89},{side:"left",year:2001,miles:9699,gas:1.77},{side:"bottom",year:2002,miles:9814,gas:1.64},{side:"right",year:2003,miles:9868,gas:1.86},{side:"left",year:2004,miles:9994,gas:2.14},{side:"left",year:2005,miles:10067,gas:2.53},{side:"right",year:2006,miles:10037,gas:2.79},{side:"right",year:2007,miles:10025,gas:2.95},{side:"left",year:2008,miles:9880,gas:3.31},{side:"bottom",year:2009,miles:9657,gas:2.38},{side:"left",year:2010,miles:9596,gas:2.61}],qO=[{sepalLength:5.1,sepalWidth:3.5,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:4.9,sepalWidth:3,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:4.7,sepalWidth:3.2,petalLength:1.3,petalWidth:.2,species:"setosa"},{sepalLength:4.6,sepalWidth:3.1,petalLength:1.5,petalWidth:.2,species:"setosa"},{sepalLength:5,sepalWidth:3.6,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:5.4,sepalWidth:3.9,petalLength:1.7,petalWidth:.4,species:"setosa"},{sepalLength:4.6,sepalWidth:3.4,petalLength:1.4,petalWidth:.3,species:"setosa"},{sepalLength:5,sepalWidth:3.4,petalLength:1.5,petalWidth:.2,species:"setosa"},{sepalLength:4.4,sepalWidth:2.9,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:4.9,sepalWidth:3.1,petalLength:1.5,petalWidth:.1,species:"setosa"},{sepalLength:5.4,sepalWidth:3.7,petalLength:1.5,petalWidth:.2,species:"setosa"},{sepalLength:4.8,sepalWidth:3.4,petalLength:1.6,petalWidth:.2,species:"setosa"},{sepalLength:4.8,sepalWidth:3,petalLength:1.4,petalWidth:.1,species:"setosa"},{sepalLength:4.3,sepalWidth:3,petalLength:1.1,petalWidth:.1,species:"setosa"},{sepalLength:5.8,sepalWidth:4,petalLength:1.2,petalWidth:.2,species:"setosa"},{sepalLength:5.7,sepalWidth:4.4,petalLength:1.5,petalWidth:.4,species:"setosa"},{sepalLength:5.4,sepalWidth:3.9,petalLength:1.3,petalWidth:.4,species:"setosa"},{sepalLength:5.1,sepalWidth:3.5,petalLength:1.4,petalWidth:.3,species:"setosa"},{sepalLength:5.7,sepalWidth:3.8,petalLength:1.7,petalWidth:.3,species:"setosa"},{sepalLength:5.1,sepalWidth:3.8,petalLength:1.5,petalWidth:.3,species:"setosa"},{sepalLength:5.4,sepalWidth:3.4,petalLength:1.7,petalWidth:.2,species:"setosa"},{sepalLength:5.1,sepalWidth:3.7,petalLength:1.5,petalWidth:.4,species:"setosa"},{sepalLength:4.6,sepalWidth:3.6,petalLength:1,petalWidth:.2,species:"setosa"},{sepalLength:5.1,sepalWidth:3.3,petalLength:1.7,petalWidth:.5,species:"setosa"},{sepalLength:4.8,sepalWidth:3.4,petalLength:1.9,petalWidth:.2,species:"setosa"},{sepalLength:5,sepalWidth:3,petalLength:1.6,petalWidth:.2,species:"setosa"},{sepalLength:5,sepalWidth:3.4,petalLength:1.6,petalWidth:.4,species:"setosa"},{sepalLength:5.2,sepalWidth:3.5,petalLength:1.5,petalWidth:.2,species:"setosa"},{sepalLength:5.2,sepalWidth:3.4,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:4.7,sepalWidth:3.2,petalLength:1.6,petalWidth:.2,species:"setosa"},{sepalLength:4.8,sepalWidth:3.1,petalLength:1.6,petalWidth:.2,species:"setosa"},{sepalLength:5.4,sepalWidth:3.4,petalLength:1.5,petalWidth:.4,species:"setosa"},{sepalLength:5.2,sepalWidth:4.1,petalLength:1.5,petalWidth:.1,species:"setosa"},{sepalLength:5.5,sepalWidth:4.2,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:4.9,sepalWidth:3.1,petalLength:1.5,petalWidth:.2,species:"setosa"},{sepalLength:5,sepalWidth:3.2,petalLength:1.2,petalWidth:.2,species:"setosa"},{sepalLength:5.5,sepalWidth:3.5,petalLength:1.3,petalWidth:.2,species:"setosa"},{sepalLength:4.9,sepalWidth:3.6,petalLength:1.4,petalWidth:.1,species:"setosa"},{sepalLength:4.4,sepalWidth:3,petalLength:1.3,petalWidth:.2,species:"setosa"},{sepalLength:5.1,sepalWidth:3.4,petalLength:1.5,petalWidth:.2,species:"setosa"},{sepalLength:5,sepalWidth:3.5,petalLength:1.3,petalWidth:.3,species:"setosa"},{sepalLength:4.5,sepalWidth:2.3,petalLength:1.3,petalWidth:.3,species:"setosa"},{sepalLength:4.4,sepalWidth:3.2,petalLength:1.3,petalWidth:.2,species:"setosa"},{sepalLength:5,sepalWidth:3.5,petalLength:1.6,petalWidth:.6,species:"setosa"},{sepalLength:5.1,sepalWidth:3.8,petalLength:1.9,petalWidth:.4,species:"setosa"},{sepalLength:4.8,sepalWidth:3,petalLength:1.4,petalWidth:.3,species:"setosa"},{sepalLength:5.1,sepalWidth:3.8,petalLength:1.6,petalWidth:.2,species:"setosa"},{sepalLength:4.6,sepalWidth:3.2,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:5.3,sepalWidth:3.7,petalLength:1.5,petalWidth:.2,species:"setosa"},{sepalLength:5,sepalWidth:3.3,petalLength:1.4,petalWidth:.2,species:"setosa"},{sepalLength:7,sepalWidth:3.2,petalLength:4.7,petalWidth:1.4,species:"versicolor"},{sepalLength:6.4,sepalWidth:3.2,petalLength:4.5,petalWidth:1.5,species:"versicolor"},{sepalLength:6.9,sepalWidth:3.1,petalLength:4.9,petalWidth:1.5,species:"versicolor"},{sepalLength:5.5,sepalWidth:2.3,petalLength:4,petalWidth:1.3,species:"versicolor"},{sepalLength:6.5,sepalWidth:2.8,petalLength:4.6,petalWidth:1.5,species:"versicolor"},{sepalLength:5.7,sepalWidth:2.8,petalLength:4.5,petalWidth:1.3,species:"versicolor"},{sepalLength:6.3,sepalWidth:3.3,petalLength:4.7,petalWidth:1.6,species:"versicolor"},{sepalLength:4.9,sepalWidth:2.4,petalLength:3.3,petalWidth:1,species:"versicolor"},{sepalLength:6.6,sepalWidth:2.9,petalLength:4.6,petalWidth:1.3,species:"versicolor"},{sepalLength:5.2,sepalWidth:2.7,petalLength:3.9,petalWidth:1.4,species:"versicolor"},{sepalLength:5,sepalWidth:2,petalLength:3.5,petalWidth:1,species:"versicolor"},{sepalLength:5.9,sepalWidth:3,petalLength:4.2,petalWidth:1.5,species:"versicolor"},{sepalLength:6,sepalWidth:2.2,petalLength:4,petalWidth:1,species:"versicolor"},{sepalLength:6.1,sepalWidth:2.9,petalLength:4.7,petalWidth:1.4,species:"versicolor"},{sepalLength:5.6,sepalWidth:2.9,petalLength:3.6,petalWidth:1.3,species:"versicolor"},{sepalLength:6.7,sepalWidth:3.1,petalLength:4.4,petalWidth:1.4,species:"versicolor"},{sepalLength:5.6,sepalWidth:3,petalLength:4.5,petalWidth:1.5,species:"versicolor"},{sepalLength:5.8,sepalWidth:2.7,petalLength:4.1,petalWidth:1,species:"versicolor"},{sepalLength:6.2,sepalWidth:2.2,petalLength:4.5,petalWidth:1.5,species:"versicolor"},{sepalLength:5.6,sepalWidth:2.5,petalLength:3.9,petalWidth:1.1,species:"versicolor"},{sepalLength:5.9,sepalWidth:3.2,petalLength:4.8,petalWidth:1.8,species:"versicolor"},{sepalLength:6.1,sepalWidth:2.8,petalLength:4,petalWidth:1.3,species:"versicolor"},{sepalLength:6.3,sepalWidth:2.5,petalLength:4.9,petalWidth:1.5,species:"versicolor"},{sepalLength:6.1,sepalWidth:2.8,petalLength:4.7,petalWidth:1.2,species:"versicolor"},{sepalLength:6.4,sepalWidth:2.9,petalLength:4.3,petalWidth:1.3,species:"versicolor"},{sepalLength:6.6,sepalWidth:3,petalLength:4.4,petalWidth:1.4,species:"versicolor"},{sepalLength:6.8,sepalWidth:2.8,petalLength:4.8,petalWidth:1.4,species:"versicolor"},{sepalLength:6.7,sepalWidth:3,petalLength:5,petalWidth:1.7,species:"versicolor"},{sepalLength:6,sepalWidth:2.9,petalLength:4.5,petalWidth:1.5,species:"versicolor"},{sepalLength:5.7,sepalWidth:2.6,petalLength:3.5,petalWidth:1,species:"versicolor"},{sepalLength:5.5,sepalWidth:2.4,petalLength:3.8,petalWidth:1.1,species:"versicolor"},{sepalLength:5.5,sepalWidth:2.4,petalLength:3.7,petalWidth:1,species:"versicolor"},{sepalLength:5.8,sepalWidth:2.7,petalLength:3.9,petalWidth:1.2,species:"versicolor"},{sepalLength:6,sepalWidth:2.7,petalLength:5.1,petalWidth:1.6,species:"versicolor"},{sepalLength:5.4,sepalWidth:3,petalLength:4.5,petalWidth:1.5,species:"versicolor"},{sepalLength:6,sepalWidth:3.4,petalLength:4.5,petalWidth:1.6,species:"versicolor"},{sepalLength:6.7,sepalWidth:3.1,petalLength:4.7,petalWidth:1.5,species:"versicolor"},{sepalLength:6.3,sepalWidth:2.3,petalLength:4.4,petalWidth:1.3,species:"versicolor"},{sepalLength:5.6,sepalWidth:3,petalLength:4.1,petalWidth:1.3,species:"versicolor"},{sepalLength:5.5,sepalWidth:2.5,petalLength:4,petalWidth:1.3,species:"versicolor"},{sepalLength:5.5,sepalWidth:2.6,petalLength:4.4,petalWidth:1.2,species:"versicolor"},{sepalLength:6.1,sepalWidth:3,petalLength:4.6,petalWidth:1.4,species:"versicolor"},{sepalLength:5.8,sepalWidth:2.6,petalLength:4,petalWidth:1.2,species:"versicolor"},{sepalLength:5,sepalWidth:2.3,petalLength:3.3,petalWidth:1,species:"versicolor"},{sepalLength:5.6,sepalWidth:2.7,petalLength:4.2,petalWidth:1.3,species:"versicolor"},{sepalLength:5.7,sepalWidth:3,petalLength:4.2,petalWidth:1.2,species:"versicolor"},{sepalLength:5.7,sepalWidth:2.9,petalLength:4.2,petalWidth:1.3,species:"versicolor"},{sepalLength:6.2,sepalWidth:2.9,petalLength:4.3,petalWidth:1.3,species:"versicolor"},{sepalLength:5.1,sepalWidth:2.5,petalLength:3,petalWidth:1.1,species:"versicolor"},{sepalLength:5.7,sepalWidth:2.8,petalLength:4.1,petalWidth:1.3,species:"versicolor"},{sepalLength:6.3,sepalWidth:3.3,petalLength:6,petalWidth:2.5,species:"virginica"},{sepalLength:5.8,sepalWidth:2.7,petalLength:5.1,petalWidth:1.9,species:"virginica"},{sepalLength:7.1,sepalWidth:3,petalLength:5.9,petalWidth:2.1,species:"virginica"},{sepalLength:6.3,sepalWidth:2.9,petalLength:5.6,petalWidth:1.8,species:"virginica"},{sepalLength:6.5,sepalWidth:3,petalLength:5.8,petalWidth:2.2,species:"virginica"},{sepalLength:7.6,sepalWidth:3,petalLength:6.6,petalWidth:2.1,species:"virginica"},{sepalLength:4.9,sepalWidth:2.5,petalLength:4.5,petalWidth:1.7,species:"virginica"},{sepalLength:7.3,sepalWidth:2.9,petalLength:6.3,petalWidth:1.8,species:"virginica"},{sepalLength:6.7,sepalWidth:2.5,petalLength:5.8,petalWidth:1.8,species:"virginica"},{sepalLength:7.2,sepalWidth:3.6,petalLength:6.1,petalWidth:2.5,species:"virginica"},{sepalLength:6.5,sepalWidth:3.2,petalLength:5.1,petalWidth:2,species:"virginica"},{sepalLength:6.4,sepalWidth:2.7,petalLength:5.3,petalWidth:1.9,species:"virginica"},{sepalLength:6.8,sepalWidth:3,petalLength:5.5,petalWidth:2.1,species:"virginica"},{sepalLength:5.7,sepalWidth:2.5,petalLength:5,petalWidth:2,species:"virginica"},{sepalLength:5.8,sepalWidth:2.8,petalLength:5.1,petalWidth:2.4,species:"virginica"},{sepalLength:6.4,sepalWidth:3.2,petalLength:5.3,petalWidth:2.3,species:"virginica"},{sepalLength:6.5,sepalWidth:3,petalLength:5.5,petalWidth:1.8,species:"virginica"},{sepalLength:7.7,sepalWidth:3.8,petalLength:6.7,petalWidth:2.2,species:"virginica"},{sepalLength:7.7,sepalWidth:2.6,petalLength:6.9,petalWidth:2.3,species:"virginica"},{sepalLength:6,sepalWidth:2.2,petalLength:5,petalWidth:1.5,species:"virginica"},{sepalLength:6.9,sepalWidth:3.2,petalLength:5.7,petalWidth:2.3,species:"virginica"},{sepalLength:5.6,sepalWidth:2.8,petalLength:4.9,petalWidth:2,species:"virginica"},{sepalLength:7.7,sepalWidth:2.8,petalLength:6.7,petalWidth:2,species:"virginica"},{sepalLength:6.3,sepalWidth:2.7,petalLength:4.9,petalWidth:1.8,species:"virginica"},{sepalLength:6.7,sepalWidth:3.3,petalLength:5.7,petalWidth:2.1,species:"virginica"},{sepalLength:7.2,sepalWidth:3.2,petalLength:6,petalWidth:1.8,species:"virginica"},{sepalLength:6.2,sepalWidth:2.8,petalLength:4.8,petalWidth:1.8,species:"virginica"},{sepalLength:6.1,sepalWidth:3,petalLength:4.9,petalWidth:1.8,species:"virginica"},{sepalLength:6.4,sepalWidth:2.8,petalLength:5.6,petalWidth:2.1,species:"virginica"},{sepalLength:7.2,sepalWidth:3,petalLength:5.8,petalWidth:1.6,species:"virginica"},{sepalLength:7.4,sepalWidth:2.8,petalLength:6.1,petalWidth:1.9,species:"virginica"},{sepalLength:7.9,sepalWidth:3.8,petalLength:6.4,petalWidth:2,species:"virginica"},{sepalLength:6.4,sepalWidth:2.8,petalLength:5.6,petalWidth:2.2,species:"virginica"},{sepalLength:6.3,sepalWidth:2.8,petalLength:5.1,petalWidth:1.5,species:"virginica"},{sepalLength:6.1,sepalWidth:2.6,petalLength:5.6,petalWidth:1.4,species:"virginica"},{sepalLength:7.7,sepalWidth:3,petalLength:6.1,petalWidth:2.3,species:"virginica"},{sepalLength:6.3,sepalWidth:3.4,petalLength:5.6,petalWidth:2.4,species:"virginica"},{sepalLength:6.4,sepalWidth:3.1,petalLength:5.5,petalWidth:1.8,species:"virginica"},{sepalLength:6,sepalWidth:3,petalLength:4.8,petalWidth:1.8,species:"virginica"},{sepalLength:6.9,sepalWidth:3.1,petalLength:5.4,petalWidth:2.1,species:"virginica"},{sepalLength:6.7,sepalWidth:3.1,petalLength:5.6,petalWidth:2.4,species:"virginica"},{sepalLength:6.9,sepalWidth:3.1,petalLength:5.1,petalWidth:2.3,species:"virginica"},{sepalLength:5.8,sepalWidth:2.7,petalLength:5.1,petalWidth:1.9,species:"virginica"},{sepalLength:6.8,sepalWidth:3.2,petalLength:5.9,petalWidth:2.3,species:"virginica"},{sepalLength:6.7,sepalWidth:3.3,petalLength:5.7,petalWidth:2.5,species:"virginica"},{sepalLength:6.7,sepalWidth:3,petalLength:5.2,petalWidth:2.3,species:"virginica"},{sepalLength:6.3,sepalWidth:2.5,petalLength:5,petalWidth:1.9,species:"virginica"},{sepalLength:6.5,sepalWidth:3,petalLength:5.2,petalWidth:2,species:"virginica"},{sepalLength:6.2,sepalWidth:3.4,petalLength:5.4,petalWidth:2.3,species:"virginica"},{sepalLength:5.9,sepalWidth:3,petalLength:5.1,petalWidth:1.8,species:"virginica"}],qXe=[{year:1850,age:0,sex:1,people:1483789},{year:1850,age:0,sex:2,people:1450376},{year:1850,age:5,sex:1,people:1411067},{year:1850,age:5,sex:2,people:1359668},{year:1850,age:10,sex:1,people:1260099},{year:1850,age:10,sex:2,people:1216114},{year:1850,age:15,sex:1,people:1077133},{year:1850,age:15,sex:2,people:1110619},{year:1850,age:20,sex:1,people:1017281},{year:1850,age:20,sex:2,people:1003841},{year:1850,age:25,sex:1,people:862547},{year:1850,age:25,sex:2,people:799482},{year:1850,age:30,sex:1,people:730638},{year:1850,age:30,sex:2,people:639636},{year:1850,age:35,sex:1,people:588487},{year:1850,age:35,sex:2,people:505012},{year:1850,age:40,sex:1,people:475911},{year:1850,age:40,sex:2,people:428185},{year:1850,age:45,sex:1,people:384211},{year:1850,age:45,sex:2,people:341254},{year:1850,age:50,sex:1,people:321343},{year:1850,age:50,sex:2,people:286580},{year:1850,age:55,sex:1,people:194080},{year:1850,age:55,sex:2,people:187208},{year:1850,age:60,sex:1,people:174976},{year:1850,age:60,sex:2,people:162236},{year:1850,age:65,sex:1,people:106827},{year:1850,age:65,sex:2,people:105534},{year:1850,age:70,sex:1,people:73677},{year:1850,age:70,sex:2,people:71762},{year:1850,age:75,sex:1,people:40834},{year:1850,age:75,sex:2,people:40229},{year:1850,age:80,sex:1,people:23449},{year:1850,age:80,sex:2,people:22949},{year:1850,age:85,sex:1,people:8186},{year:1850,age:85,sex:2,people:10511},{year:1850,age:90,sex:1,people:5259},{year:1850,age:90,sex:2,people:6569},{year:1860,age:0,sex:1,people:2120846},{year:1860,age:0,sex:2,people:2092162},{year:1860,age:5,sex:1,people:1804467},{year:1860,age:5,sex:2,people:1778772},{year:1860,age:10,sex:1,people:1612640},{year:1860,age:10,sex:2,people:1540350},{year:1860,age:15,sex:1,people:1438094},{year:1860,age:15,sex:2,people:1495999},{year:1860,age:20,sex:1,people:1351121},{year:1860,age:20,sex:2,people:1370462},{year:1860,age:25,sex:1,people:1217615},{year:1860,age:25,sex:2,people:1116373},{year:1860,age:30,sex:1,people:1043174},{year:1860,age:30,sex:2,people:936055},{year:1860,age:35,sex:1,people:866910},{year:1860,age:35,sex:2,people:737136},{year:1860,age:40,sex:1,people:699434},{year:1860,age:40,sex:2,people:616826},{year:1860,age:45,sex:1,people:552404},{year:1860,age:45,sex:2,people:461739},{year:1860,age:50,sex:1,people:456176},{year:1860,age:50,sex:2,people:407305},{year:1860,age:55,sex:1,people:292417},{year:1860,age:55,sex:2,people:267224},{year:1860,age:60,sex:1,people:260887},{year:1860,age:60,sex:2,people:249735},{year:1860,age:65,sex:1,people:149331},{year:1860,age:65,sex:2,people:141405},{year:1860,age:70,sex:1,people:98465},{year:1860,age:70,sex:2,people:101778},{year:1860,age:75,sex:1,people:56699},{year:1860,age:75,sex:2,people:57597},{year:1860,age:80,sex:1,people:29007},{year:1860,age:80,sex:2,people:29506},{year:1860,age:85,sex:1,people:10434},{year:1860,age:85,sex:2,people:14053},{year:1860,age:90,sex:1,people:7232},{year:1860,age:90,sex:2,people:6622},{year:1870,age:0,sex:1,people:2800083},{year:1870,age:0,sex:2,people:2717102},{year:1870,age:5,sex:1,people:2428469},{year:1870,age:5,sex:2,people:2393680},{year:1870,age:10,sex:1,people:2427341},{year:1870,age:10,sex:2,people:2342670},{year:1870,age:15,sex:1,people:1958390},{year:1870,age:15,sex:2,people:2077248},{year:1870,age:20,sex:1,people:1805303},{year:1870,age:20,sex:2,people:1909382},{year:1870,age:25,sex:1,people:1509059},{year:1870,age:25,sex:2,people:1574285},{year:1870,age:30,sex:1,people:1251534},{year:1870,age:30,sex:2,people:1275629},{year:1870,age:35,sex:1,people:1185336},{year:1870,age:35,sex:2,people:1137490},{year:1870,age:40,sex:1,people:968861},{year:1870,age:40,sex:2,people:944401},{year:1870,age:45,sex:1,people:852672},{year:1870,age:45,sex:2,people:747916},{year:1870,age:50,sex:1,people:736387},{year:1870,age:50,sex:2,people:637801},{year:1870,age:55,sex:1,people:486036},{year:1870,age:55,sex:2,people:407819},{year:1870,age:60,sex:1,people:399264},{year:1870,age:60,sex:2,people:374801},{year:1870,age:65,sex:1,people:260829},{year:1870,age:65,sex:2,people:239080},{year:1870,age:70,sex:1,people:173364},{year:1870,age:70,sex:2,people:165501},{year:1870,age:75,sex:1,people:86929},{year:1870,age:75,sex:2,people:89540},{year:1870,age:80,sex:1,people:47427},{year:1870,age:80,sex:2,people:54190},{year:1870,age:85,sex:1,people:15891},{year:1870,age:85,sex:2,people:19302},{year:1870,age:90,sex:1,people:8649},{year:1870,age:90,sex:2,people:13068},{year:1880,age:0,sex:1,people:3533662},{year:1880,age:0,sex:2,people:3421597},{year:1880,age:5,sex:1,people:3297503},{year:1880,age:5,sex:2,people:3179142},{year:1880,age:10,sex:1,people:2911924},{year:1880,age:10,sex:2,people:2813550},{year:1880,age:15,sex:1,people:2457734},{year:1880,age:15,sex:2,people:2527818},{year:1880,age:20,sex:1,people:2547780},{year:1880,age:20,sex:2,people:2512803},{year:1880,age:25,sex:1,people:2119393},{year:1880,age:25,sex:2,people:1974241},{year:1880,age:30,sex:1,people:1749107},{year:1880,age:30,sex:2,people:1596772},{year:1880,age:35,sex:1,people:1540772},{year:1880,age:35,sex:2,people:1483717},{year:1880,age:40,sex:1,people:1237347},{year:1880,age:40,sex:2,people:1239435},{year:1880,age:45,sex:1,people:1065973},{year:1880,age:45,sex:2,people:1003711},{year:1880,age:50,sex:1,people:964484},{year:1880,age:50,sex:2,people:863012},{year:1880,age:55,sex:1,people:679147},{year:1880,age:55,sex:2,people:594843},{year:1880,age:60,sex:1,people:580298},{year:1880,age:60,sex:2,people:526956},{year:1880,age:65,sex:1,people:369398},{year:1880,age:65,sex:2,people:346303},{year:1880,age:70,sex:1,people:255422},{year:1880,age:70,sex:2,people:251860},{year:1880,age:75,sex:1,people:141628},{year:1880,age:75,sex:2,people:143513},{year:1880,age:80,sex:1,people:67526},{year:1880,age:80,sex:2,people:77290},{year:1880,age:85,sex:1,people:22437},{year:1880,age:85,sex:2,people:31227},{year:1880,age:90,sex:1,people:10272},{year:1880,age:90,sex:2,people:15451},{year:1900,age:0,sex:1,people:4619544},{year:1900,age:0,sex:2,people:4589196},{year:1900,age:5,sex:1,people:4465783},{year:1900,age:5,sex:2,people:4390483},{year:1900,age:10,sex:1,people:4057669},{year:1900,age:10,sex:2,people:4001749},{year:1900,age:15,sex:1,people:3774846},{year:1900,age:15,sex:2,people:3801743},{year:1900,age:20,sex:1,people:3694038},{year:1900,age:20,sex:2,people:3751061},{year:1900,age:25,sex:1,people:3389280},{year:1900,age:25,sex:2,people:3236056},{year:1900,age:30,sex:1,people:2918964},{year:1900,age:30,sex:2,people:2665174},{year:1900,age:35,sex:1,people:2633883},{year:1900,age:35,sex:2,people:2347737},{year:1900,age:40,sex:1,people:2261070},{year:1900,age:40,sex:2,people:2004987},{year:1900,age:45,sex:1,people:1868413},{year:1900,age:45,sex:2,people:1648025},{year:1900,age:50,sex:1,people:1571038},{year:1900,age:50,sex:2,people:1411981},{year:1900,age:55,sex:1,people:1161908},{year:1900,age:55,sex:2,people:1064632},{year:1900,age:60,sex:1,people:916571},{year:1900,age:60,sex:2,people:887508},{year:1900,age:65,sex:1,people:672663},{year:1900,age:65,sex:2,people:640212},{year:1900,age:70,sex:1,people:454747},{year:1900,age:70,sex:2,people:440007},{year:1900,age:75,sex:1,people:268211},{year:1900,age:75,sex:2,people:265879},{year:1900,age:80,sex:1,people:127435},{year:1900,age:80,sex:2,people:132449},{year:1900,age:85,sex:1,people:44008},{year:1900,age:85,sex:2,people:48614},{year:1900,age:90,sex:1,people:15164},{year:1900,age:90,sex:2,people:20093},{year:1910,age:0,sex:1,people:5296823},{year:1910,age:0,sex:2,people:5287477},{year:1910,age:5,sex:1,people:4991803},{year:1910,age:5,sex:2,people:4866139},{year:1910,age:10,sex:1,people:4650747},{year:1910,age:10,sex:2,people:4471887},{year:1910,age:15,sex:1,people:4566154},{year:1910,age:15,sex:2,people:4592269},{year:1910,age:20,sex:1,people:4637632},{year:1910,age:20,sex:2,people:4447683},{year:1910,age:25,sex:1,people:4257755},{year:1910,age:25,sex:2,people:3946153},{year:1910,age:30,sex:1,people:3658125},{year:1910,age:30,sex:2,people:3295220},{year:1910,age:35,sex:1,people:3427518},{year:1910,age:35,sex:2,people:3088990},{year:1910,age:40,sex:1,people:2860229},{year:1910,age:40,sex:2,people:2471267},{year:1910,age:45,sex:1,people:2363801},{year:1910,age:45,sex:2,people:2114930},{year:1910,age:50,sex:1,people:2126516},{year:1910,age:50,sex:2,people:1773592},{year:1910,age:55,sex:1,people:1508358},{year:1910,age:55,sex:2,people:1317651},{year:1910,age:60,sex:1,people:1189421},{year:1910,age:60,sex:2,people:1090697},{year:1910,age:65,sex:1,people:850159},{year:1910,age:65,sex:2,people:813868},{year:1910,age:70,sex:1,people:557936},{year:1910,age:70,sex:2,people:547623},{year:1910,age:75,sex:1,people:322679},{year:1910,age:75,sex:2,people:350900},{year:1910,age:80,sex:1,people:161715},{year:1910,age:80,sex:2,people:174315},{year:1910,age:85,sex:1,people:59699},{year:1910,age:85,sex:2,people:62725},{year:1910,age:90,sex:1,people:23929},{year:1910,age:90,sex:2,people:28965},{year:1920,age:0,sex:1,people:5934792},{year:1920,age:0,sex:2,people:5694244},{year:1920,age:5,sex:1,people:5789008},{year:1920,age:5,sex:2,people:5693960},{year:1920,age:10,sex:1,people:5401156},{year:1920,age:10,sex:2,people:5293057},{year:1920,age:15,sex:1,people:4724365},{year:1920,age:15,sex:2,people:4779936},{year:1920,age:20,sex:1,people:4549411},{year:1920,age:20,sex:2,people:4742632},{year:1920,age:25,sex:1,people:4565066},{year:1920,age:25,sex:2,people:4529382},{year:1920,age:30,sex:1,people:4110771},{year:1920,age:30,sex:2,people:3982426},{year:1920,age:35,sex:1,people:4081543},{year:1920,age:35,sex:2,people:3713810},{year:1920,age:40,sex:1,people:3321923},{year:1920,age:40,sex:2,people:3059757},{year:1920,age:45,sex:1,people:3143891},{year:1920,age:45,sex:2,people:2669089},{year:1920,age:50,sex:1,people:2546035},{year:1920,age:50,sex:2,people:2200491},{year:1920,age:55,sex:1,people:1880975},{year:1920,age:55,sex:2,people:1674672},{year:1920,age:60,sex:1,people:1587549},{year:1920,age:60,sex:2,people:1382877},{year:1920,age:65,sex:1,people:1095956},{year:1920,age:65,sex:2,people:989901},{year:1920,age:70,sex:1,people:714618},{year:1920,age:70,sex:2,people:690097},{year:1920,age:75,sex:1,people:417292},{year:1920,age:75,sex:2,people:439465},{year:1920,age:80,sex:1,people:187e3},{year:1920,age:80,sex:2,people:211110},{year:1920,age:85,sex:1,people:75991},{year:1920,age:85,sex:2,people:92829},{year:1920,age:90,sex:1,people:22398},{year:1920,age:90,sex:2,people:32085},{year:1930,age:0,sex:1,people:5875250},{year:1930,age:0,sex:2,people:5662530},{year:1930,age:5,sex:1,people:6542592},{year:1930,age:5,sex:2,people:6129561},{year:1930,age:10,sex:1,people:6064820},{year:1930,age:10,sex:2,people:5986529},{year:1930,age:15,sex:1,people:5709452},{year:1930,age:15,sex:2,people:5769587},{year:1930,age:20,sex:1,people:5305992},{year:1930,age:20,sex:2,people:5565382},{year:1930,age:25,sex:1,people:4929853},{year:1930,age:25,sex:2,people:5050229},{year:1930,age:30,sex:1,people:4424408},{year:1930,age:30,sex:2,people:4455213},{year:1930,age:35,sex:1,people:4576531},{year:1930,age:35,sex:2,people:4593776},{year:1930,age:40,sex:1,people:4075139},{year:1930,age:40,sex:2,people:3754022},{year:1930,age:45,sex:1,people:3633152},{year:1930,age:45,sex:2,people:3396558},{year:1930,age:50,sex:1,people:3128108},{year:1930,age:50,sex:2,people:2809191},{year:1930,age:55,sex:1,people:2434077},{year:1930,age:55,sex:2,people:2298614},{year:1930,age:60,sex:1,people:1927564},{year:1930,age:60,sex:2,people:1783515},{year:1930,age:65,sex:1,people:1397275},{year:1930,age:65,sex:2,people:1307312},{year:1930,age:70,sex:1,people:919045},{year:1930,age:70,sex:2,people:918509},{year:1930,age:75,sex:1,people:536375},{year:1930,age:75,sex:2,people:522716},{year:1930,age:80,sex:1,people:246708},{year:1930,age:80,sex:2,people:283579},{year:1930,age:85,sex:1,people:88978},{year:1930,age:85,sex:2,people:109210},{year:1930,age:90,sex:1,people:30338},{year:1930,age:90,sex:2,people:43483},{year:1940,age:0,sex:1,people:5294628},{year:1940,age:0,sex:2,people:5124653},{year:1940,age:5,sex:1,people:5468378},{year:1940,age:5,sex:2,people:5359099},{year:1940,age:10,sex:1,people:5960416},{year:1940,age:10,sex:2,people:5868532},{year:1940,age:15,sex:1,people:6165109},{year:1940,age:15,sex:2,people:6193701},{year:1940,age:20,sex:1,people:5682414},{year:1940,age:20,sex:2,people:5896002},{year:1940,age:25,sex:1,people:5438166},{year:1940,age:25,sex:2,people:5664244},{year:1940,age:30,sex:1,people:5040048},{year:1940,age:30,sex:2,people:5171522},{year:1940,age:35,sex:1,people:4724804},{year:1940,age:35,sex:2,people:4791809},{year:1940,age:40,sex:1,people:4437392},{year:1940,age:40,sex:2,people:4394061},{year:1940,age:45,sex:1,people:4190187},{year:1940,age:45,sex:2,people:4050290},{year:1940,age:50,sex:1,people:3785735},{year:1940,age:50,sex:2,people:3488396},{year:1940,age:55,sex:1,people:2972069},{year:1940,age:55,sex:2,people:281e4},{year:1940,age:60,sex:1,people:2370232},{year:1940,age:60,sex:2,people:2317790},{year:1940,age:65,sex:1,people:1897678},{year:1940,age:65,sex:2,people:1911117},{year:1940,age:70,sex:1,people:1280023},{year:1940,age:70,sex:2,people:1287711},{year:1940,age:75,sex:1,people:713875},{year:1940,age:75,sex:2,people:764915},{year:1940,age:80,sex:1,people:359418},{year:1940,age:80,sex:2,people:414761},{year:1940,age:85,sex:1,people:127303},{year:1940,age:85,sex:2,people:152131},{year:1940,age:90,sex:1,people:42263},{year:1940,age:90,sex:2,people:58119},{year:1950,age:0,sex:1,people:8211806},{year:1950,age:0,sex:2,people:7862267},{year:1950,age:5,sex:1,people:6706601},{year:1950,age:5,sex:2,people:6450863},{year:1950,age:10,sex:1,people:5629744},{year:1950,age:10,sex:2,people:5430835},{year:1950,age:15,sex:1,people:5264129},{year:1950,age:15,sex:2,people:5288742},{year:1950,age:20,sex:1,people:5573308},{year:1950,age:20,sex:2,people:5854227},{year:1950,age:25,sex:1,people:6007254},{year:1950,age:25,sex:2,people:6317332},{year:1950,age:30,sex:1,people:5676022},{year:1950,age:30,sex:2,people:5895178},{year:1950,age:35,sex:1,people:5511364},{year:1950,age:35,sex:2,people:5696261},{year:1950,age:40,sex:1,people:5076985},{year:1950,age:40,sex:2,people:5199224},{year:1950,age:45,sex:1,people:4533177},{year:1950,age:45,sex:2,people:4595842},{year:1950,age:50,sex:1,people:4199164},{year:1950,age:50,sex:2,people:4147295},{year:1950,age:55,sex:1,people:3667351},{year:1950,age:55,sex:2,people:3595158},{year:1950,age:60,sex:1,people:3035038},{year:1950,age:60,sex:2,people:3009768},{year:1950,age:65,sex:1,people:2421234},{year:1950,age:65,sex:2,people:2548250},{year:1950,age:70,sex:1,people:1627920},{year:1950,age:70,sex:2,people:1786831},{year:1950,age:75,sex:1,people:1006530},{year:1950,age:75,sex:2,people:1148469},{year:1950,age:80,sex:1,people:511727},{year:1950,age:80,sex:2,people:637717},{year:1950,age:85,sex:1,people:182821},{year:1950,age:85,sex:2,people:242798},{year:1950,age:90,sex:1,people:54836},{year:1950,age:90,sex:2,people:90766},{year:1960,age:0,sex:1,people:10374975},{year:1960,age:0,sex:2,people:10146999},{year:1960,age:5,sex:1,people:9495503},{year:1960,age:5,sex:2,people:9250741},{year:1960,age:10,sex:1,people:8563700},{year:1960,age:10,sex:2,people:8310764},{year:1960,age:15,sex:1,people:6620902},{year:1960,age:15,sex:2,people:6617493},{year:1960,age:20,sex:1,people:5268384},{year:1960,age:20,sex:2,people:5513495},{year:1960,age:25,sex:1,people:5311805},{year:1960,age:25,sex:2,people:5548259},{year:1960,age:30,sex:1,people:5801342},{year:1960,age:30,sex:2,people:6090862},{year:1960,age:35,sex:1,people:6063063},{year:1960,age:35,sex:2,people:6431337},{year:1960,age:40,sex:1,people:5657943},{year:1960,age:40,sex:2,people:5940520},{year:1960,age:45,sex:1,people:5345658},{year:1960,age:45,sex:2,people:5516028},{year:1960,age:50,sex:1,people:4763364},{year:1960,age:50,sex:2,people:4928844},{year:1960,age:55,sex:1,people:4170581},{year:1960,age:55,sex:2,people:4402878},{year:1960,age:60,sex:1,people:3405293},{year:1960,age:60,sex:2,people:3723839},{year:1960,age:65,sex:1,people:2859371},{year:1960,age:65,sex:2,people:3268699},{year:1960,age:70,sex:1,people:2115763},{year:1960,age:70,sex:2,people:2516479},{year:1960,age:75,sex:1,people:1308913},{year:1960,age:75,sex:2,people:1641371},{year:1960,age:80,sex:1,people:619923},{year:1960,age:80,sex:2,people:856952},{year:1960,age:85,sex:1,people:253245},{year:1960,age:85,sex:2,people:384572},{year:1960,age:90,sex:1,people:75908},{year:1960,age:90,sex:2,people:135774},{year:1970,age:0,sex:1,people:8685121},{year:1970,age:0,sex:2,people:8326887},{year:1970,age:5,sex:1,people:10411131},{year:1970,age:5,sex:2,people:10003293},{year:1970,age:10,sex:1,people:10756403},{year:1970,age:10,sex:2,people:10343538},{year:1970,age:15,sex:1,people:9605399},{year:1970,age:15,sex:2,people:9414284},{year:1970,age:20,sex:1,people:7729202},{year:1970,age:20,sex:2,people:8341830},{year:1970,age:25,sex:1,people:6539301},{year:1970,age:25,sex:2,people:6903041},{year:1970,age:30,sex:1,people:5519879},{year:1970,age:30,sex:2,people:5851441},{year:1970,age:35,sex:1,people:5396732},{year:1970,age:35,sex:2,people:5708021},{year:1970,age:40,sex:1,people:5718538},{year:1970,age:40,sex:2,people:6129319},{year:1970,age:45,sex:1,people:5794120},{year:1970,age:45,sex:2,people:6198742},{year:1970,age:50,sex:1,people:5298312},{year:1970,age:50,sex:2,people:5783817},{year:1970,age:55,sex:1,people:4762911},{year:1970,age:55,sex:2,people:5222164},{year:1970,age:60,sex:1,people:4037643},{year:1970,age:60,sex:2,people:4577251},{year:1970,age:65,sex:1,people:3142606},{year:1970,age:65,sex:2,people:3894827},{year:1970,age:70,sex:1,people:2340826},{year:1970,age:70,sex:2,people:3138009},{year:1970,age:75,sex:1,people:1599269},{year:1970,age:75,sex:2,people:2293376},{year:1970,age:80,sex:1,people:886155},{year:1970,age:80,sex:2,people:1417553},{year:1970,age:85,sex:1,people:371123},{year:1970,age:85,sex:2,people:658511},{year:1970,age:90,sex:1,people:186502},{year:1970,age:90,sex:2,people:314929},{year:1980,age:0,sex:1,people:8439366},{year:1980,age:0,sex:2,people:8081854},{year:1980,age:5,sex:1,people:8680730},{year:1980,age:5,sex:2,people:8275881},{year:1980,age:10,sex:1,people:9452338},{year:1980,age:10,sex:2,people:9048483},{year:1980,age:15,sex:1,people:10698856},{year:1980,age:15,sex:2,people:10410271},{year:1980,age:20,sex:1,people:10486776},{year:1980,age:20,sex:2,people:10614947},{year:1980,age:25,sex:1,people:9624053},{year:1980,age:25,sex:2,people:9827903},{year:1980,age:30,sex:1,people:8705835},{year:1980,age:30,sex:2,people:8955225},{year:1980,age:35,sex:1,people:6852069},{year:1980,age:35,sex:2,people:7134239},{year:1980,age:40,sex:1,people:5692148},{year:1980,age:40,sex:2,people:5953910},{year:1980,age:45,sex:1,people:5342469},{year:1980,age:45,sex:2,people:5697543},{year:1980,age:50,sex:1,people:5603709},{year:1980,age:50,sex:2,people:6110117},{year:1980,age:55,sex:1,people:5485098},{year:1980,age:55,sex:2,people:6160229},{year:1980,age:60,sex:1,people:4696140},{year:1980,age:60,sex:2,people:5456885},{year:1980,age:65,sex:1,people:3893510},{year:1980,age:65,sex:2,people:4896947},{year:1980,age:70,sex:1,people:2857774},{year:1980,age:70,sex:2,people:3963441},{year:1980,age:75,sex:1,people:1840438},{year:1980,age:75,sex:2,people:2951759},{year:1980,age:80,sex:1,people:1012886},{year:1980,age:80,sex:2,people:1919292},{year:1980,age:85,sex:1,people:472338},{year:1980,age:85,sex:2,people:1023115},{year:1980,age:90,sex:1,people:204148},{year:1980,age:90,sex:2,people:499046},{year:1990,age:0,sex:1,people:9307465},{year:1990,age:0,sex:2,people:8894007},{year:1990,age:5,sex:1,people:9274732},{year:1990,age:5,sex:2,people:8799955},{year:1990,age:10,sex:1,people:8782542},{year:1990,age:10,sex:2,people:8337284},{year:1990,age:15,sex:1,people:9020572},{year:1990,age:15,sex:2,people:8590991},{year:1990,age:20,sex:1,people:9436188},{year:1990,age:20,sex:2,people:9152644},{year:1990,age:25,sex:1,people:10658027},{year:1990,age:25,sex:2,people:10587292},{year:1990,age:30,sex:1,people:11028712},{year:1990,age:30,sex:2,people:11105750},{year:1990,age:35,sex:1,people:9853933},{year:1990,age:35,sex:2,people:10038644},{year:1990,age:40,sex:1,people:8712632},{year:1990,age:40,sex:2,people:8928252},{year:1990,age:45,sex:1,people:6848082},{year:1990,age:45,sex:2,people:7115129},{year:1990,age:50,sex:1,people:5553992},{year:1990,age:50,sex:2,people:5899925},{year:1990,age:55,sex:1,people:4981670},{year:1990,age:55,sex:2,people:5460506},{year:1990,age:60,sex:1,people:4953822},{year:1990,age:60,sex:2,people:5663205},{year:1990,age:65,sex:1,people:4538398},{year:1990,age:65,sex:2,people:5594108},{year:1990,age:70,sex:1,people:3429420},{year:1990,age:70,sex:2,people:4610222},{year:1990,age:75,sex:1,people:2344932},{year:1990,age:75,sex:2,people:3723980},{year:1990,age:80,sex:1,people:1342996},{year:1990,age:80,sex:2,people:2545730},{year:1990,age:85,sex:1,people:588790},{year:1990,age:85,sex:2,people:1419494},{year:1990,age:90,sex:1,people:238459},{year:1990,age:90,sex:2,people:745146},{year:2e3,age:0,sex:1,people:9735380},{year:2e3,age:0,sex:2,people:9310714},{year:2e3,age:5,sex:1,people:10552146},{year:2e3,age:5,sex:2,people:10069564},{year:2e3,age:10,sex:1,people:10563233},{year:2e3,age:10,sex:2,people:10022524},{year:2e3,age:15,sex:1,people:10237419},{year:2e3,age:15,sex:2,people:9692669},{year:2e3,age:20,sex:1,people:9731315},{year:2e3,age:20,sex:2,people:9324244},{year:2e3,age:25,sex:1,people:9659493},{year:2e3,age:25,sex:2,people:9518507},{year:2e3,age:30,sex:1,people:10205879},{year:2e3,age:30,sex:2,people:10119296},{year:2e3,age:35,sex:1,people:11475182},{year:2e3,age:35,sex:2,people:11635647},{year:2e3,age:40,sex:1,people:11320252},{year:2e3,age:40,sex:2,people:11488578},{year:2e3,age:45,sex:1,people:9925006},{year:2e3,age:45,sex:2,people:10261253},{year:2e3,age:50,sex:1,people:8507934},{year:2e3,age:50,sex:2,people:8911133},{year:2e3,age:55,sex:1,people:6459082},{year:2e3,age:55,sex:2,people:6921268},{year:2e3,age:60,sex:1,people:5123399},{year:2e3,age:60,sex:2,people:5668961},{year:2e3,age:65,sex:1,people:4453623},{year:2e3,age:65,sex:2,people:4804784},{year:2e3,age:70,sex:1,people:3792145},{year:2e3,age:70,sex:2,people:5184855},{year:2e3,age:75,sex:1,people:2912655},{year:2e3,age:75,sex:2,people:4355644},{year:2e3,age:80,sex:1,people:1902638},{year:2e3,age:80,sex:2,people:3221898},{year:2e3,age:85,sex:1,people:970357},{year:2e3,age:85,sex:2,people:1981156},{year:2e3,age:90,sex:1,people:336303},{year:2e3,age:90,sex:2,people:1064581}];oe.registerModules([Pme]);const PB=[{title:"Basic",description:"Shows the default settings, plus custom chart presets.",component:$Xe},{title:"Paginated properties",description:"Splits the available chart props into 5 different pages.",component:HXe},{title:"Modeless and filtered",description:"Shows everything in a single page, but hides less common chart props.",component:VXe}];function KXe(){const[t,e]=T.useState(qO),[n,i]=T.useState({}),[r,s]=T.useState(null),[o,a]=T.useState(0),[l,u]=T.useState(0),c=PB[l];T.useEffect(()=>{a(o+1);const f=t[0];i(Object.fromEntries(Object.entries(f).map(([p,g])=>[p,{type:hbe(g),unique:null}]))),s(Object.keys(f).map(p=>({field:p})))},[t]);const[d]=T.useState({onFirstDataRendered:f=>f.api.sizeColumnsToFit()}),h=T.useCallback(f=>{const p=f.target.value,g=parseInt(p,10);u(g)},[u]);return K.jsxs("div",{className:Ln.PageWrapper,children:[K.jsxs("div",{children:[K.jsx("h1",{children:"Deneb demo"}),K.jsxs("p",{children:["Deneb is a chart builder library for ",K.jsx("a",{href:"https://vega.github.io/vega-lite/",children:"Vega-Lite"}),". For more information, see ",K.jsx("a",{href:"https://github.com/streamlit/deneb",children:"Deneb's page on Github"}),"."]})]}),K.jsxs("div",{className:Ln.DemoInput,children:[K.jsxs("div",{className:Ln.DatasetPickerWrapper,children:[K.jsx("h2",{children:"Pick a dataset"}),K.jsx(OI,{label:null,items:{iris:qO,barley:zXe,cars:UXe,disasters:jXe,driving:YXe,population:qXe},value:qO,setValue:e})]}),K.jsxs("details",{children:[K.jsx("summary",{className:Ln.PreviewDatasetToggle,children:"Preview dataset"}),K.jsx("div",{className:"ag-theme-alpine",style:{height:500},children:K.jsx(Dme,{rowData:t,columnDefs:r,gridOptions:d})})]})]}),K.jsxs("div",{children:[K.jsx("h2",{children:"Pick a demo"}),K.jsx("ul",{className:Ln.DemoPicker,onChange:h,children:PB.map((f,p)=>K.jsx("li",{"data-checked":p==l,children:K.jsxs("label",{children:[K.jsx("input",{type:"radio",name:"demoPicker",value:p,defaultChecked:p==l,className:DI.HiddenInput}),K.jsx("h3",{children:f.title}),K.jsx("p",{children:f.description})]})},p))})]}),K.jsx(c.component,{demo:c,dataset:t,columnTypes:n})]})}KO.createRoot(document.getElementById("root")).render(K.jsx(Q.StrictMode,{children:K.jsx(KXe,{})}))});export default XXe();
